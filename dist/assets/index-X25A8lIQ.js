var zv=Object.defineProperty;var nv=cs=>{throw TypeError(cs)};var Wv=(cs,is,us)=>is in cs?zv(cs,is,{enumerable:!0,configurable:!0,writable:!0,value:us}):cs[is]=us;var c0=(cs,is,us)=>Wv(cs,typeof is!="symbol"?is+"":is,us),_1=(cs,is,us)=>is.has(cs)||nv("Cannot "+us);var Wl=(cs,is,us)=>(_1(cs,is,"read from private field"),us?us.call(cs):is.get(cs)),_d=(cs,is,us)=>is.has(cs)?nv("Cannot add the same private member more than once"):is instanceof WeakSet?is.add(cs):is.set(cs,us),ep=(cs,is,us,hs)=>(_1(cs,is,"write to private field"),hs?hs.call(cs,us):is.set(cs,us),us),Uu=(cs,is,us)=>(_1(cs,is,"access private method"),us);var bx=(cs,is,us,hs)=>({set _(lo){ep(cs,is,lo,us)},get _(){return Wl(cs,is,hs)}});(function(){const is=document.createElement("link").relList;if(is&&is.supports&&is.supports("modulepreload"))return;for(const lo of document.querySelectorAll('link[rel="modulepreload"]'))hs(lo);new MutationObserver(lo=>{for(const co of lo)if(co.type==="childList")for(const uo of co.addedNodes)uo.tagName==="LINK"&&uo.rel==="modulepreload"&&hs(uo)}).observe(document,{childList:!0,subtree:!0});function us(lo){const co={};return lo.integrity&&(co.integrity=lo.integrity),lo.referrerPolicy&&(co.referrerPolicy=lo.referrerPolicy),lo.crossOrigin==="use-credentials"?co.credentials="include":lo.crossOrigin==="anonymous"?co.credentials="omit":co.credentials="same-origin",co}function hs(lo){if(lo.ep)return;lo.ep=!0;const co=us(lo);fetch(lo.href,co)}})();function getDefaultExportFromCjs(cs){return cs&&cs.__esModule&&Object.prototype.hasOwnProperty.call(cs,"default")?cs.default:cs}function getAugmentedNamespace(cs){if(cs.__esModule)return cs;var is=cs.default;if(typeof is=="function"){var us=function hs(){return this instanceof hs?Reflect.construct(is,arguments,this.constructor):is.apply(this,arguments)};us.prototype=is.prototype}else us={};return Object.defineProperty(us,"__esModule",{value:!0}),Object.keys(cs).forEach(function(hs){var lo=Object.getOwnPropertyDescriptor(cs,hs);Object.defineProperty(us,hs,lo.get?lo:{enumerable:!0,get:function(){return cs[hs]}})}),us}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(cs){return cs===null||typeof cs!="object"?null:(cs=z$2&&cs[z$2]||cs["@@iterator"],typeof cs=="function"?cs:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(cs,is,us){this.props=cs,this.context=is,this.refs=D$2,this.updater=us||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(cs,is){if(typeof cs!="object"&&typeof cs!="function"&&cs!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,cs,is,"setState")};E$2.prototype.forceUpdate=function(cs){this.updater.enqueueForceUpdate(this,cs,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(cs,is,us){this.props=cs,this.context=is,this.refs=D$2,this.updater=us||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(cs,is,us){var hs,lo={},co=null,uo=null;if(is!=null)for(hs in is.ref!==void 0&&(uo=is.ref),is.key!==void 0&&(co=""+is.key),is)J$1.call(is,hs)&&!L$2.hasOwnProperty(hs)&&(lo[hs]=is[hs]);var ga=arguments.length-2;if(ga===1)lo.children=us;else if(1<ga){for(var ba=Array(ga),xa=0;xa<ga;xa++)ba[xa]=arguments[xa+2];lo.children=ba}if(cs&&cs.defaultProps)for(hs in ga=cs.defaultProps,ga)lo[hs]===void 0&&(lo[hs]=ga[hs]);return{$$typeof:l$2,type:cs,key:co,ref:uo,props:lo,_owner:K$2.current}}function N$2(cs,is){return{$$typeof:l$2,type:cs.type,key:is,ref:cs.ref,props:cs.props,_owner:cs._owner}}function O$2(cs){return typeof cs=="object"&&cs!==null&&cs.$$typeof===l$2}function escape$1(cs){var is={"=":"=0",":":"=2"};return"$"+cs.replace(/[=:]/g,function(us){return is[us]})}var P$2=/\/+/g;function Q$2(cs,is){return typeof cs=="object"&&cs!==null&&cs.key!=null?escape$1(""+cs.key):is.toString(36)}function R$2(cs,is,us,hs,lo){var co=typeof cs;(co==="undefined"||co==="boolean")&&(cs=null);var uo=!1;if(cs===null)uo=!0;else switch(co){case"string":case"number":uo=!0;break;case"object":switch(cs.$$typeof){case l$2:case n$2:uo=!0}}if(uo)return uo=cs,lo=lo(uo),cs=hs===""?"."+Q$2(uo,0):hs,I$2(lo)?(us="",cs!=null&&(us=cs.replace(P$2,"$&/")+"/"),R$2(lo,is,us,"",function(xa){return xa})):lo!=null&&(O$2(lo)&&(lo=N$2(lo,us+(!lo.key||uo&&uo.key===lo.key?"":(""+lo.key).replace(P$2,"$&/")+"/")+cs)),is.push(lo)),1;if(uo=0,hs=hs===""?".":hs+":",I$2(cs))for(var ga=0;ga<cs.length;ga++){co=cs[ga];var ba=hs+Q$2(co,ga);uo+=R$2(co,is,us,ba,lo)}else if(ba=A$2(cs),typeof ba=="function")for(cs=ba.call(cs),ga=0;!(co=cs.next()).done;)co=co.value,ba=hs+Q$2(co,ga++),uo+=R$2(co,is,us,ba,lo);else if(co==="object")throw is=String(cs),Error("Objects are not valid as a React child (found: "+(is==="[object Object]"?"object with keys {"+Object.keys(cs).join(", ")+"}":is)+"). If you meant to render a collection of children, use an array instead.");return uo}function S$2(cs,is,us){if(cs==null)return cs;var hs=[],lo=0;return R$2(cs,hs,"","",function(co){return is.call(us,co,lo++)}),hs}function T$2(cs){if(cs._status===-1){var is=cs._result;is=is(),is.then(function(us){(cs._status===0||cs._status===-1)&&(cs._status=1,cs._result=us)},function(us){(cs._status===0||cs._status===-1)&&(cs._status=2,cs._result=us)}),cs._status===-1&&(cs._status=0,cs._result=is)}if(cs._status===1)return cs._result.default;throw cs._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(cs,is,us){S$2(cs,function(){is.apply(this,arguments)},us)},count:function(cs){var is=0;return S$2(cs,function(){is++}),is},toArray:function(cs){return S$2(cs,function(is){return is})||[]},only:function(cs){if(!O$2(cs))throw Error("React.Children.only expected to receive a single React element child.");return cs}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$2;react_production_min.cloneElement=function(cs,is,us){if(cs==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+cs+".");var hs=C$2({},cs.props),lo=cs.key,co=cs.ref,uo=cs._owner;if(is!=null){if(is.ref!==void 0&&(co=is.ref,uo=K$2.current),is.key!==void 0&&(lo=""+is.key),cs.type&&cs.type.defaultProps)var ga=cs.type.defaultProps;for(ba in is)J$1.call(is,ba)&&!L$2.hasOwnProperty(ba)&&(hs[ba]=is[ba]===void 0&&ga!==void 0?ga[ba]:is[ba])}var ba=arguments.length-2;if(ba===1)hs.children=us;else if(1<ba){ga=Array(ba);for(var xa=0;xa<ba;xa++)ga[xa]=arguments[xa+2];hs.children=ga}return{$$typeof:l$2,type:cs.type,key:lo,ref:co,props:hs,_owner:uo}};react_production_min.createContext=function(cs){return cs={$$typeof:u$1,_currentValue:cs,_currentValue2:cs,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},cs.Provider={$$typeof:t$1,_context:cs},cs.Consumer=cs};react_production_min.createElement=M$2;react_production_min.createFactory=function(cs){var is=M$2.bind(null,cs);return is.type=cs,is};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(cs){return{$$typeof:v$2,render:cs}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(cs){return{$$typeof:y$1,_payload:{_status:-1,_result:cs},_init:T$2}};react_production_min.memo=function(cs,is){return{$$typeof:x$1,type:cs,compare:is===void 0?null:is}};react_production_min.startTransition=function(cs){var is=V$2.transition;V$2.transition={};try{cs()}finally{V$2.transition=is}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(cs,is){return U$2.current.useCallback(cs,is)};react_production_min.useContext=function(cs){return U$2.current.useContext(cs)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(cs){return U$2.current.useDeferredValue(cs)};react_production_min.useEffect=function(cs,is){return U$2.current.useEffect(cs,is)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(cs,is,us){return U$2.current.useImperativeHandle(cs,is,us)};react_production_min.useInsertionEffect=function(cs,is){return U$2.current.useInsertionEffect(cs,is)};react_production_min.useLayoutEffect=function(cs,is){return U$2.current.useLayoutEffect(cs,is)};react_production_min.useMemo=function(cs,is){return U$2.current.useMemo(cs,is)};react_production_min.useReducer=function(cs,is,us){return U$2.current.useReducer(cs,is,us)};react_production_min.useRef=function(cs){return U$2.current.useRef(cs)};react_production_min.useState=function(cs){return U$2.current.useState(cs)};react_production_min.useSyncExternalStore=function(cs,is,us){return U$2.current.useSyncExternalStore(cs,is,us)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$2(cs,is,us){var hs,lo={},co=null,uo=null;us!==void 0&&(co=""+us),is.key!==void 0&&(co=""+is.key),is.ref!==void 0&&(uo=is.ref);for(hs in is)m$2.call(is,hs)&&!p$2.hasOwnProperty(hs)&&(lo[hs]=is[hs]);if(cs&&cs.defaultProps)for(hs in is=cs.defaultProps,is)lo[hs]===void 0&&(lo[hs]=is[hs]);return{$$typeof:k$1,type:cs,key:co,ref:uo,props:lo,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(cs){function is(lu,Kl){var xu=lu.length;lu.push(Kl);e:for(;0<xu;){var pu=xu-1>>>1,Ll=lu[pu];if(0<lo(Ll,Kl))lu[pu]=Kl,lu[xu]=Ll,xu=pu;else break e}}function us(lu){return lu.length===0?null:lu[0]}function hs(lu){if(lu.length===0)return null;var Kl=lu[0],xu=lu.pop();if(xu!==Kl){lu[0]=xu;e:for(var pu=0,Ll=lu.length,Nl=Ll>>>1;pu<Nl;){var Ml=2*(pu+1)-1,Ul=lu[Ml],Vl=Ml+1,Ql=lu[Vl];if(0>lo(Ul,xu))Vl<Ll&&0>lo(Ql,Ul)?(lu[pu]=Ql,lu[Vl]=xu,pu=Vl):(lu[pu]=Ul,lu[Ml]=xu,pu=Ml);else if(Vl<Ll&&0>lo(Ql,xu))lu[pu]=Ql,lu[Vl]=xu,pu=Vl;else break e}}return Kl}function lo(lu,Kl){var xu=lu.sortIndex-Kl.sortIndex;return xu!==0?xu:lu.id-Kl.id}if(typeof performance=="object"&&typeof performance.now=="function"){var co=performance;cs.unstable_now=function(){return co.now()}}else{var uo=Date,ga=uo.now();cs.unstable_now=function(){return uo.now()-ga}}var ba=[],xa=[],_a=1,$a=null,xl=3,yl=!1,wl=!1,_l=!1,El=typeof setTimeout=="function"?setTimeout:null,Sl=typeof clearTimeout=="function"?clearTimeout:null,Cl=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Tl(lu){for(var Kl=us(xa);Kl!==null;){if(Kl.callback===null)hs(xa);else if(Kl.startTime<=lu)hs(xa),Kl.sortIndex=Kl.expirationTime,is(ba,Kl);else break;Kl=us(xa)}}function Dl(lu){if(_l=!1,Tl(lu),!wl)if(us(ba)!==null)wl=!0,_c(Fl);else{var Kl=us(xa);Kl!==null&&uu(Dl,Kl.startTime-lu)}}function Fl(lu,Kl){wl=!1,_l&&(_l=!1,Sl(Rl),Rl=-1),yl=!0;var xu=xl;try{for(Tl(Kl),$a=us(ba);$a!==null&&(!($a.expirationTime>Kl)||lu&&!Ol());){var pu=$a.callback;if(typeof pu=="function"){$a.callback=null,xl=$a.priorityLevel;var Ll=pu($a.expirationTime<=Kl);Kl=cs.unstable_now(),typeof Ll=="function"?$a.callback=Ll:$a===us(ba)&&hs(ba),Tl(Kl)}else hs(ba);$a=us(ba)}if($a!==null)var Nl=!0;else{var Ml=us(xa);Ml!==null&&uu(Dl,Ml.startTime-Kl),Nl=!1}return Nl}finally{$a=null,xl=xu,yl=!1}}var Pl=!1,Al=null,Rl=-1,Il=5,Bl=-1;function Ol(){return!(cs.unstable_now()-Bl<Il)}function zl(){if(Al!==null){var lu=cs.unstable_now();Bl=lu;var Kl=!0;try{Kl=Al(!0,lu)}finally{Kl?Hl():(Pl=!1,Al=null)}}else Pl=!1}var Hl;if(typeof Cl=="function")Hl=function(){Cl(zl)};else if(typeof MessageChannel<"u"){var ou=new MessageChannel,au=ou.port2;ou.port1.onmessage=zl,Hl=function(){au.postMessage(null)}}else Hl=function(){El(zl,0)};function _c(lu){Al=lu,Pl||(Pl=!0,Hl())}function uu(lu,Kl){Rl=El(function(){lu(cs.unstable_now())},Kl)}cs.unstable_IdlePriority=5,cs.unstable_ImmediatePriority=1,cs.unstable_LowPriority=4,cs.unstable_NormalPriority=3,cs.unstable_Profiling=null,cs.unstable_UserBlockingPriority=2,cs.unstable_cancelCallback=function(lu){lu.callback=null},cs.unstable_continueExecution=function(){wl||yl||(wl=!0,_c(Fl))},cs.unstable_forceFrameRate=function(lu){0>lu||125<lu?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Il=0<lu?Math.floor(1e3/lu):5},cs.unstable_getCurrentPriorityLevel=function(){return xl},cs.unstable_getFirstCallbackNode=function(){return us(ba)},cs.unstable_next=function(lu){switch(xl){case 1:case 2:case 3:var Kl=3;break;default:Kl=xl}var xu=xl;xl=Kl;try{return lu()}finally{xl=xu}},cs.unstable_pauseExecution=function(){},cs.unstable_requestPaint=function(){},cs.unstable_runWithPriority=function(lu,Kl){switch(lu){case 1:case 2:case 3:case 4:case 5:break;default:lu=3}var xu=xl;xl=lu;try{return Kl()}finally{xl=xu}},cs.unstable_scheduleCallback=function(lu,Kl,xu){var pu=cs.unstable_now();switch(typeof xu=="object"&&xu!==null?(xu=xu.delay,xu=typeof xu=="number"&&0<xu?pu+xu:pu):xu=pu,lu){case 1:var Ll=-1;break;case 2:Ll=250;break;case 5:Ll=1073741823;break;case 4:Ll=1e4;break;default:Ll=5e3}return Ll=xu+Ll,lu={id:_a++,callback:Kl,priorityLevel:lu,startTime:xu,expirationTime:Ll,sortIndex:-1},xu>pu?(lu.sortIndex=xu,is(xa,lu),us(ba)===null&&lu===us(xa)&&(_l?(Sl(Rl),Rl=-1):_l=!0,uu(Dl,xu-pu))):(lu.sortIndex=Ll,is(ba,lu),wl||yl||(wl=!0,_c(Fl))),lu},cs.unstable_shouldYield=Ol,cs.unstable_wrapCallback=function(lu){var Kl=xl;return function(){var xu=xl;xl=Kl;try{return lu.apply(this,arguments)}finally{xl=xu}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(cs){for(var is="https://reactjs.org/docs/error-decoder.html?invariant="+cs,us=1;us<arguments.length;us++)is+="&args[]="+encodeURIComponent(arguments[us]);return"Minified React error #"+cs+"; visit "+is+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea$1={};function fa(cs,is){ha(cs,is),ha(cs+"Capture",is)}function ha(cs,is){for(ea$1[cs]=is,cs=0;cs<is.length;cs++)da.add(is[cs])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(cs){return ja.call(ma,cs)?!0:ja.call(la,cs)?!1:ka.test(cs)?ma[cs]=!0:(la[cs]=!0,!1)}function pa(cs,is,us,hs){if(us!==null&&us.type===0)return!1;switch(typeof is){case"function":case"symbol":return!0;case"boolean":return hs?!1:us!==null?!us.acceptsBooleans:(cs=cs.toLowerCase().slice(0,5),cs!=="data-"&&cs!=="aria-");default:return!1}}function qa$1(cs,is,us,hs){if(is===null||typeof is>"u"||pa(cs,is,us,hs))return!0;if(hs)return!1;if(us!==null)switch(us.type){case 3:return!is;case 4:return is===!1;case 5:return isNaN(is);case 6:return isNaN(is)||1>is}return!1}function v$1(cs,is,us,hs,lo,co,uo){this.acceptsBooleans=is===2||is===3||is===4,this.attributeName=hs,this.attributeNamespace=lo,this.mustUseProperty=us,this.propertyName=cs,this.type=is,this.sanitizeURL=co,this.removeEmptyString=uo}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(cs){z$1[cs]=new v$1(cs,0,!1,cs,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(cs){var is=cs[0];z$1[is]=new v$1(is,1,!1,cs[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(cs){z$1[cs]=new v$1(cs,2,!1,cs.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(cs){z$1[cs]=new v$1(cs,2,!1,cs,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(cs){z$1[cs]=new v$1(cs,3,!1,cs.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(cs){z$1[cs]=new v$1(cs,3,!0,cs,null,!1,!1)});["capture","download"].forEach(function(cs){z$1[cs]=new v$1(cs,4,!1,cs,null,!1,!1)});["cols","rows","size","span"].forEach(function(cs){z$1[cs]=new v$1(cs,6,!1,cs,null,!1,!1)});["rowSpan","start"].forEach(function(cs){z$1[cs]=new v$1(cs,5,!1,cs.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa(cs){return cs[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(cs){var is=cs.replace(ra$1,sa);z$1[is]=new v$1(is,1,!1,cs,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(cs){var is=cs.replace(ra$1,sa);z$1[is]=new v$1(is,1,!1,cs,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(cs){var is=cs.replace(ra$1,sa);z$1[is]=new v$1(is,1,!1,cs,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(cs){z$1[cs]=new v$1(cs,1,!1,cs.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(cs){z$1[cs]=new v$1(cs,1,!1,cs.toLowerCase(),null,!0,!0)});function ta$1(cs,is,us,hs){var lo=z$1.hasOwnProperty(is)?z$1[is]:null;(lo!==null?lo.type!==0:hs||!(2<is.length)||is[0]!=="o"&&is[0]!=="O"||is[1]!=="n"&&is[1]!=="N")&&(qa$1(is,us,lo,hs)&&(us=null),hs||lo===null?oa(is)&&(us===null?cs.removeAttribute(is):cs.setAttribute(is,""+us)):lo.mustUseProperty?cs[lo.propertyName]=us===null?lo.type===3?!1:"":us:(is=lo.attributeName,hs=lo.attributeNamespace,us===null?cs.removeAttribute(is):(lo=lo.type,us=lo===3||lo===4&&us===!0?"":""+us,hs?cs.setAttributeNS(hs,is,us):cs.setAttribute(is,us))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(cs){return cs===null||typeof cs!="object"?null:(cs=Ja$1&&cs[Ja$1]||cs["@@iterator"],typeof cs=="function"?cs:null)}var A$1=Object.assign,La;function Ma(cs){if(La===void 0)try{throw Error()}catch(us){var is=us.stack.trim().match(/\n( *(at )?)/);La=is&&is[1]||""}return`
`+La+cs}var Na$1=!1;function Oa(cs,is){if(!cs||Na$1)return"";Na$1=!0;var us=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(is)if(is=function(){throw Error()},Object.defineProperty(is.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(is,[])}catch(xa){var hs=xa}Reflect.construct(cs,[],is)}else{try{is.call()}catch(xa){hs=xa}cs.call(is.prototype)}else{try{throw Error()}catch(xa){hs=xa}cs()}}catch(xa){if(xa&&hs&&typeof xa.stack=="string"){for(var lo=xa.stack.split(`
`),co=hs.stack.split(`
`),uo=lo.length-1,ga=co.length-1;1<=uo&&0<=ga&&lo[uo]!==co[ga];)ga--;for(;1<=uo&&0<=ga;uo--,ga--)if(lo[uo]!==co[ga]){if(uo!==1||ga!==1)do if(uo--,ga--,0>ga||lo[uo]!==co[ga]){var ba=`
`+lo[uo].replace(" at new "," at ");return cs.displayName&&ba.includes("<anonymous>")&&(ba=ba.replace("<anonymous>",cs.displayName)),ba}while(1<=uo&&0<=ga);break}}}finally{Na$1=!1,Error.prepareStackTrace=us}return(cs=cs?cs.displayName||cs.name:"")?Ma(cs):""}function Pa(cs){switch(cs.tag){case 5:return Ma(cs.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return cs=Oa(cs.type,!1),cs;case 11:return cs=Oa(cs.type.render,!1),cs;case 1:return cs=Oa(cs.type,!0),cs;default:return""}}function Qa$1(cs){if(cs==null)return null;if(typeof cs=="function")return cs.displayName||cs.name||null;if(typeof cs=="string")return cs;switch(cs){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za$1:return"StrictMode";case Ea:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof cs=="object")switch(cs.$$typeof){case Ca:return(cs.displayName||"Context")+".Consumer";case Ba$1:return(cs._context.displayName||"Context")+".Provider";case Da:var is=cs.render;return cs=cs.displayName,cs||(cs=is.displayName||is.name||"",cs=cs!==""?"ForwardRef("+cs+")":"ForwardRef"),cs;case Ga$1:return is=cs.displayName||null,is!==null?is:Qa$1(cs.type)||"Memo";case Ha$1:is=cs._payload,cs=cs._init;try{return Qa$1(cs(is))}catch{}}return null}function Ra$1(cs){var is=cs.type;switch(cs.tag){case 24:return"Cache";case 9:return(is.displayName||"Context")+".Consumer";case 10:return(is._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return cs=is.render,cs=cs.displayName||cs.name||"",is.displayName||(cs!==""?"ForwardRef("+cs+")":"ForwardRef");case 7:return"Fragment";case 5:return is;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(is);case 8:return is===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof is=="function")return is.displayName||is.name||null;if(typeof is=="string")return is}return null}function Sa(cs){switch(typeof cs){case"boolean":case"number":case"string":case"undefined":return cs;case"object":return cs;default:return""}}function Ta(cs){var is=cs.type;return(cs=cs.nodeName)&&cs.toLowerCase()==="input"&&(is==="checkbox"||is==="radio")}function Ua$1(cs){var is=Ta(cs)?"checked":"value",us=Object.getOwnPropertyDescriptor(cs.constructor.prototype,is),hs=""+cs[is];if(!cs.hasOwnProperty(is)&&typeof us<"u"&&typeof us.get=="function"&&typeof us.set=="function"){var lo=us.get,co=us.set;return Object.defineProperty(cs,is,{configurable:!0,get:function(){return lo.call(this)},set:function(uo){hs=""+uo,co.call(this,uo)}}),Object.defineProperty(cs,is,{enumerable:us.enumerable}),{getValue:function(){return hs},setValue:function(uo){hs=""+uo},stopTracking:function(){cs._valueTracker=null,delete cs[is]}}}}function Va$1(cs){cs._valueTracker||(cs._valueTracker=Ua$1(cs))}function Wa$1(cs){if(!cs)return!1;var is=cs._valueTracker;if(!is)return!0;var us=is.getValue(),hs="";return cs&&(hs=Ta(cs)?cs.checked?"true":"false":cs.value),cs=hs,cs!==us?(is.setValue(cs),!0):!1}function Xa$1(cs){if(cs=cs||(typeof document<"u"?document:void 0),typeof cs>"u")return null;try{return cs.activeElement||cs.body}catch{return cs.body}}function Ya$1(cs,is){var us=is.checked;return A$1({},is,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:us??cs._wrapperState.initialChecked})}function Za(cs,is){var us=is.defaultValue==null?"":is.defaultValue,hs=is.checked!=null?is.checked:is.defaultChecked;us=Sa(is.value!=null?is.value:us),cs._wrapperState={initialChecked:hs,initialValue:us,controlled:is.type==="checkbox"||is.type==="radio"?is.checked!=null:is.value!=null}}function ab(cs,is){is=is.checked,is!=null&&ta$1(cs,"checked",is,!1)}function bb(cs,is){ab(cs,is);var us=Sa(is.value),hs=is.type;if(us!=null)hs==="number"?(us===0&&cs.value===""||cs.value!=us)&&(cs.value=""+us):cs.value!==""+us&&(cs.value=""+us);else if(hs==="submit"||hs==="reset"){cs.removeAttribute("value");return}is.hasOwnProperty("value")?cb(cs,is.type,us):is.hasOwnProperty("defaultValue")&&cb(cs,is.type,Sa(is.defaultValue)),is.checked==null&&is.defaultChecked!=null&&(cs.defaultChecked=!!is.defaultChecked)}function db(cs,is,us){if(is.hasOwnProperty("value")||is.hasOwnProperty("defaultValue")){var hs=is.type;if(!(hs!=="submit"&&hs!=="reset"||is.value!==void 0&&is.value!==null))return;is=""+cs._wrapperState.initialValue,us||is===cs.value||(cs.value=is),cs.defaultValue=is}us=cs.name,us!==""&&(cs.name=""),cs.defaultChecked=!!cs._wrapperState.initialChecked,us!==""&&(cs.name=us)}function cb(cs,is,us){(is!=="number"||Xa$1(cs.ownerDocument)!==cs)&&(us==null?cs.defaultValue=""+cs._wrapperState.initialValue:cs.defaultValue!==""+us&&(cs.defaultValue=""+us))}var eb=Array.isArray;function fb(cs,is,us,hs){if(cs=cs.options,is){is={};for(var lo=0;lo<us.length;lo++)is["$"+us[lo]]=!0;for(us=0;us<cs.length;us++)lo=is.hasOwnProperty("$"+cs[us].value),cs[us].selected!==lo&&(cs[us].selected=lo),lo&&hs&&(cs[us].defaultSelected=!0)}else{for(us=""+Sa(us),is=null,lo=0;lo<cs.length;lo++){if(cs[lo].value===us){cs[lo].selected=!0,hs&&(cs[lo].defaultSelected=!0);return}is!==null||cs[lo].disabled||(is=cs[lo])}is!==null&&(is.selected=!0)}}function gb(cs,is){if(is.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},is,{value:void 0,defaultValue:void 0,children:""+cs._wrapperState.initialValue})}function hb(cs,is){var us=is.value;if(us==null){if(us=is.children,is=is.defaultValue,us!=null){if(is!=null)throw Error(p$1(92));if(eb(us)){if(1<us.length)throw Error(p$1(93));us=us[0]}is=us}is==null&&(is=""),us=is}cs._wrapperState={initialValue:Sa(us)}}function ib(cs,is){var us=Sa(is.value),hs=Sa(is.defaultValue);us!=null&&(us=""+us,us!==cs.value&&(cs.value=us),is.defaultValue==null&&cs.defaultValue!==us&&(cs.defaultValue=us)),hs!=null&&(cs.defaultValue=""+hs)}function jb(cs){var is=cs.textContent;is===cs._wrapperState.initialValue&&is!==""&&is!==null&&(cs.value=is)}function kb(cs){switch(cs){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(cs,is){return cs==null||cs==="http://www.w3.org/1999/xhtml"?kb(is):cs==="http://www.w3.org/2000/svg"&&is==="foreignObject"?"http://www.w3.org/1999/xhtml":cs}var mb,nb=function(cs){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(is,us,hs,lo){MSApp.execUnsafeLocalFunction(function(){return cs(is,us,hs,lo)})}:cs}(function(cs,is){if(cs.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in cs)cs.innerHTML=is;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+is.valueOf().toString()+"</svg>",is=mb.firstChild;cs.firstChild;)cs.removeChild(cs.firstChild);for(;is.firstChild;)cs.appendChild(is.firstChild)}});function ob(cs,is){if(is){var us=cs.firstChild;if(us&&us===cs.lastChild&&us.nodeType===3){us.nodeValue=is;return}}cs.textContent=is}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(cs){qb.forEach(function(is){is=is+cs.charAt(0).toUpperCase()+cs.substring(1),pb[is]=pb[cs]})});function rb(cs,is,us){return is==null||typeof is=="boolean"||is===""?"":us||typeof is!="number"||is===0||pb.hasOwnProperty(cs)&&pb[cs]?(""+is).trim():is+"px"}function sb(cs,is){cs=cs.style;for(var us in is)if(is.hasOwnProperty(us)){var hs=us.indexOf("--")===0,lo=rb(us,is[us],hs);us==="float"&&(us="cssFloat"),hs?cs.setProperty(us,lo):cs[us]=lo}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(cs,is){if(is){if(tb[cs]&&(is.children!=null||is.dangerouslySetInnerHTML!=null))throw Error(p$1(137,cs));if(is.dangerouslySetInnerHTML!=null){if(is.children!=null)throw Error(p$1(60));if(typeof is.dangerouslySetInnerHTML!="object"||!("__html"in is.dangerouslySetInnerHTML))throw Error(p$1(61))}if(is.style!=null&&typeof is.style!="object")throw Error(p$1(62))}}function vb(cs,is){if(cs.indexOf("-")===-1)return typeof is.is=="string";switch(cs){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(cs){return cs=cs.target||cs.srcElement||window,cs.correspondingUseElement&&(cs=cs.correspondingUseElement),cs.nodeType===3?cs.parentNode:cs}var yb=null,zb=null,Ab=null;function Bb(cs){if(cs=Cb(cs)){if(typeof yb!="function")throw Error(p$1(280));var is=cs.stateNode;is&&(is=Db(is),yb(cs.stateNode,cs.type,is))}}function Eb(cs){zb?Ab?Ab.push(cs):Ab=[cs]:zb=cs}function Fb(){if(zb){var cs=zb,is=Ab;if(Ab=zb=null,Bb(cs),is)for(cs=0;cs<is.length;cs++)Bb(is[cs])}}function Gb(cs,is){return cs(is)}function Hb(){}var Ib=!1;function Jb(cs,is,us){if(Ib)return cs(is,us);Ib=!0;try{return Gb(cs,is,us)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(cs,is){var us=cs.stateNode;if(us===null)return null;var hs=Db(us);if(hs===null)return null;us=hs[is];e:switch(is){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(hs=!hs.disabled)||(cs=cs.type,hs=!(cs==="button"||cs==="input"||cs==="select"||cs==="textarea")),cs=!hs;break e;default:cs=!1}if(cs)return null;if(us&&typeof us!="function")throw Error(p$1(231,is,typeof us));return us}var Lb=!1;if(ia$1)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(cs,is,us,hs,lo,co,uo,ga,ba){var xa=Array.prototype.slice.call(arguments,3);try{is.apply(us,xa)}catch(_a){this.onError(_a)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(cs){Ob=!0,Pb=cs}};function Tb(cs,is,us,hs,lo,co,uo,ga,ba){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(cs,is,us,hs,lo,co,uo,ga,ba){if(Tb.apply(this,arguments),Ob){if(Ob){var xa=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=xa)}}function Vb(cs){var is=cs,us=cs;if(cs.alternate)for(;is.return;)is=is.return;else{cs=is;do is=cs,is.flags&4098&&(us=is.return),cs=is.return;while(cs)}return is.tag===3?us:null}function Wb(cs){if(cs.tag===13){var is=cs.memoizedState;if(is===null&&(cs=cs.alternate,cs!==null&&(is=cs.memoizedState)),is!==null)return is.dehydrated}return null}function Xb(cs){if(Vb(cs)!==cs)throw Error(p$1(188))}function Yb(cs){var is=cs.alternate;if(!is){if(is=Vb(cs),is===null)throw Error(p$1(188));return is!==cs?null:cs}for(var us=cs,hs=is;;){var lo=us.return;if(lo===null)break;var co=lo.alternate;if(co===null){if(hs=lo.return,hs!==null){us=hs;continue}break}if(lo.child===co.child){for(co=lo.child;co;){if(co===us)return Xb(lo),cs;if(co===hs)return Xb(lo),is;co=co.sibling}throw Error(p$1(188))}if(us.return!==hs.return)us=lo,hs=co;else{for(var uo=!1,ga=lo.child;ga;){if(ga===us){uo=!0,us=lo,hs=co;break}if(ga===hs){uo=!0,hs=lo,us=co;break}ga=ga.sibling}if(!uo){for(ga=co.child;ga;){if(ga===us){uo=!0,us=co,hs=lo;break}if(ga===hs){uo=!0,hs=co,us=lo;break}ga=ga.sibling}if(!uo)throw Error(p$1(189))}}if(us.alternate!==hs)throw Error(p$1(190))}if(us.tag!==3)throw Error(p$1(188));return us.stateNode.current===us?cs:is}function Zb(cs){return cs=Yb(cs),cs!==null?$b(cs):null}function $b(cs){if(cs.tag===5||cs.tag===6)return cs;for(cs=cs.child;cs!==null;){var is=$b(cs);if(is!==null)return is;cs=cs.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(cs){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,cs,void 0,(cs.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(cs){return cs>>>=0,cs===0?32:31-(pc(cs)/qc|0)|0}var rc=64,sc=4194304;function tc(cs){switch(cs&-cs){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return cs&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return cs&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return cs}}function uc(cs,is){var us=cs.pendingLanes;if(us===0)return 0;var hs=0,lo=cs.suspendedLanes,co=cs.pingedLanes,uo=us&268435455;if(uo!==0){var ga=uo&~lo;ga!==0?hs=tc(ga):(co&=uo,co!==0&&(hs=tc(co)))}else uo=us&~lo,uo!==0?hs=tc(uo):co!==0&&(hs=tc(co));if(hs===0)return 0;if(is!==0&&is!==hs&&!(is&lo)&&(lo=hs&-hs,co=is&-is,lo>=co||lo===16&&(co&4194240)!==0))return is;if(hs&4&&(hs|=us&16),is=cs.entangledLanes,is!==0)for(cs=cs.entanglements,is&=hs;0<is;)us=31-oc(is),lo=1<<us,hs|=cs[us],is&=~lo;return hs}function vc(cs,is){switch(cs){case 1:case 2:case 4:return is+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return is+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(cs,is){for(var us=cs.suspendedLanes,hs=cs.pingedLanes,lo=cs.expirationTimes,co=cs.pendingLanes;0<co;){var uo=31-oc(co),ga=1<<uo,ba=lo[uo];ba===-1?(!(ga&us)||ga&hs)&&(lo[uo]=vc(ga,is)):ba<=is&&(cs.expiredLanes|=ga),co&=~ga}}function xc(cs){return cs=cs.pendingLanes&-1073741825,cs!==0?cs:cs&1073741824?1073741824:0}function yc(){var cs=rc;return rc<<=1,!(rc&4194240)&&(rc=64),cs}function zc(cs){for(var is=[],us=0;31>us;us++)is.push(cs);return is}function Ac(cs,is,us){cs.pendingLanes|=is,is!==536870912&&(cs.suspendedLanes=0,cs.pingedLanes=0),cs=cs.eventTimes,is=31-oc(is),cs[is]=us}function Bc(cs,is){var us=cs.pendingLanes&~is;cs.pendingLanes=is,cs.suspendedLanes=0,cs.pingedLanes=0,cs.expiredLanes&=is,cs.mutableReadLanes&=is,cs.entangledLanes&=is,is=cs.entanglements;var hs=cs.eventTimes;for(cs=cs.expirationTimes;0<us;){var lo=31-oc(us),co=1<<lo;is[lo]=0,hs[lo]=-1,cs[lo]=-1,us&=~co}}function Cc(cs,is){var us=cs.entangledLanes|=is;for(cs=cs.entanglements;us;){var hs=31-oc(us),lo=1<<hs;lo&is|cs[hs]&is&&(cs[hs]|=is),us&=~lo}}var C$1=0;function Dc(cs){return cs&=-cs,1<cs?4<cs?cs&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(cs,is){switch(cs){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(is.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(is.pointerId)}}function Tc(cs,is,us,hs,lo,co){return cs===null||cs.nativeEvent!==co?(cs={blockedOn:is,domEventName:us,eventSystemFlags:hs,nativeEvent:co,targetContainers:[lo]},is!==null&&(is=Cb(is),is!==null&&Fc(is)),cs):(cs.eventSystemFlags|=hs,is=cs.targetContainers,lo!==null&&is.indexOf(lo)===-1&&is.push(lo),cs)}function Uc(cs,is,us,hs,lo){switch(is){case"focusin":return Lc=Tc(Lc,cs,is,us,hs,lo),!0;case"dragenter":return Mc=Tc(Mc,cs,is,us,hs,lo),!0;case"mouseover":return Nc=Tc(Nc,cs,is,us,hs,lo),!0;case"pointerover":var co=lo.pointerId;return Oc.set(co,Tc(Oc.get(co)||null,cs,is,us,hs,lo)),!0;case"gotpointercapture":return co=lo.pointerId,Pc.set(co,Tc(Pc.get(co)||null,cs,is,us,hs,lo)),!0}return!1}function Vc(cs){var is=Wc(cs.target);if(is!==null){var us=Vb(is);if(us!==null){if(is=us.tag,is===13){if(is=Wb(us),is!==null){cs.blockedOn=is,Ic(cs.priority,function(){Gc(us)});return}}else if(is===3&&us.stateNode.current.memoizedState.isDehydrated){cs.blockedOn=us.tag===3?us.stateNode.containerInfo:null;return}}}cs.blockedOn=null}function Xc(cs){if(cs.blockedOn!==null)return!1;for(var is=cs.targetContainers;0<is.length;){var us=Yc(cs.domEventName,cs.eventSystemFlags,is[0],cs.nativeEvent);if(us===null){us=cs.nativeEvent;var hs=new us.constructor(us.type,us);wb=hs,us.target.dispatchEvent(hs),wb=null}else return is=Cb(us),is!==null&&Fc(is),cs.blockedOn=us,!1;is.shift()}return!0}function Zc(cs,is,us){Xc(cs)&&us.delete(is)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(cs,is){cs.blockedOn===is&&(cs.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(cs){function is(lo){return ad(lo,cs)}if(0<Kc.length){ad(Kc[0],cs);for(var us=1;us<Kc.length;us++){var hs=Kc[us];hs.blockedOn===cs&&(hs.blockedOn=null)}}for(Lc!==null&&ad(Lc,cs),Mc!==null&&ad(Mc,cs),Nc!==null&&ad(Nc,cs),Oc.forEach(is),Pc.forEach(is),us=0;us<Qc.length;us++)hs=Qc[us],hs.blockedOn===cs&&(hs.blockedOn=null);for(;0<Qc.length&&(us=Qc[0],us.blockedOn===null);)Vc(us),us.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(cs,is,us,hs){var lo=C$1,co=cd.transition;cd.transition=null;try{C$1=1,fd(cs,is,us,hs)}finally{C$1=lo,cd.transition=co}}function gd(cs,is,us,hs){var lo=C$1,co=cd.transition;cd.transition=null;try{C$1=4,fd(cs,is,us,hs)}finally{C$1=lo,cd.transition=co}}function fd(cs,is,us,hs){if(dd){var lo=Yc(cs,is,us,hs);if(lo===null)hd(cs,is,hs,id,us),Sc(cs,hs);else if(Uc(lo,cs,is,us,hs))hs.stopPropagation();else if(Sc(cs,hs),is&4&&-1<Rc.indexOf(cs)){for(;lo!==null;){var co=Cb(lo);if(co!==null&&Ec(co),co=Yc(cs,is,us,hs),co===null&&hd(cs,is,hs,id,us),co===lo)break;lo=co}lo!==null&&hs.stopPropagation()}else hd(cs,is,hs,null,us)}}var id=null;function Yc(cs,is,us,hs){if(id=null,cs=xb(hs),cs=Wc(cs),cs!==null)if(is=Vb(cs),is===null)cs=null;else if(us=is.tag,us===13){if(cs=Wb(is),cs!==null)return cs;cs=null}else if(us===3){if(is.stateNode.current.memoizedState.isDehydrated)return is.tag===3?is.stateNode.containerInfo:null;cs=null}else is!==cs&&(cs=null);return id=cs,null}function jd(cs){switch(cs){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var cs,is=ld,us=is.length,hs,lo="value"in kd?kd.value:kd.textContent,co=lo.length;for(cs=0;cs<us&&is[cs]===lo[cs];cs++);var uo=us-cs;for(hs=1;hs<=uo&&is[us-hs]===lo[co-hs];hs++);return md=lo.slice(cs,1<hs?1-hs:void 0)}function od(cs){var is=cs.keyCode;return"charCode"in cs?(cs=cs.charCode,cs===0&&is===13&&(cs=13)):cs=is,cs===10&&(cs=13),32<=cs||cs===13?cs:0}function pd(){return!0}function qd(){return!1}function rd(cs){function is(us,hs,lo,co,uo){this._reactName=us,this._targetInst=lo,this.type=hs,this.nativeEvent=co,this.target=uo,this.currentTarget=null;for(var ga in cs)cs.hasOwnProperty(ga)&&(us=cs[ga],this[ga]=us?us(co):co[ga]);return this.isDefaultPrevented=(co.defaultPrevented!=null?co.defaultPrevented:co.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(is.prototype,{preventDefault:function(){this.defaultPrevented=!0;var us=this.nativeEvent;us&&(us.preventDefault?us.preventDefault():typeof us.returnValue!="unknown"&&(us.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var us=this.nativeEvent;us&&(us.stopPropagation?us.stopPropagation():typeof us.cancelBubble!="unknown"&&(us.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),is}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(cs){return cs.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(cs){return cs.relatedTarget===void 0?cs.fromElement===cs.srcElement?cs.toElement:cs.fromElement:cs.relatedTarget},movementX:function(cs){return"movementX"in cs?cs.movementX:(cs!==yd&&(yd&&cs.type==="mousemove"?(wd=cs.screenX-yd.screenX,xd=cs.screenY-yd.screenY):xd=wd=0,yd=cs),wd)},movementY:function(cs){return"movementY"in cs?cs.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(cs){return"clipboardData"in cs?cs.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(cs){var is=this.nativeEvent;return is.getModifierState?is.getModifierState(cs):(cs=Od[cs])?!!is[cs]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(cs){if(cs.key){var is=Md[cs.key]||cs.key;if(is!=="Unidentified")return is}return cs.type==="keypress"?(cs=od(cs),cs===13?"Enter":String.fromCharCode(cs)):cs.type==="keydown"||cs.type==="keyup"?Nd[cs.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(cs){return cs.type==="keypress"?od(cs):0},keyCode:function(cs){return cs.type==="keydown"||cs.type==="keyup"?cs.keyCode:0},which:function(cs){return cs.type==="keypress"?od(cs):cs.type==="keydown"||cs.type==="keyup"?cs.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(cs){return"deltaX"in cs?cs.deltaX:"wheelDeltaX"in cs?-cs.wheelDeltaX:0},deltaY:function(cs){return"deltaY"in cs?cs.deltaY:"wheelDeltaY"in cs?-cs.wheelDeltaY:"wheelDelta"in cs?-cs.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia$1&&"CompositionEvent"in window,be$1=null;ia$1&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia$1&&"TextEvent"in window&&!be$1,de$1=ia$1&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge$1(cs,is){switch(cs){case"keyup":return $d.indexOf(is.keyCode)!==-1;case"keydown":return is.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(cs){return cs=cs.detail,typeof cs=="object"&&"data"in cs?cs.data:null}var ie$1=!1;function je$1(cs,is){switch(cs){case"compositionend":return he$1(is);case"keypress":return is.which!==32?null:(fe$1=!0,ee$1);case"textInput":return cs=is.data,cs===ee$1&&fe$1?null:cs;default:return null}}function ke$1(cs,is){if(ie$1)return cs==="compositionend"||!ae$1&&ge$1(cs,is)?(cs=nd(),md=ld=kd=null,ie$1=!1,cs):null;switch(cs){case"paste":return null;case"keypress":if(!(is.ctrlKey||is.altKey||is.metaKey)||is.ctrlKey&&is.altKey){if(is.char&&1<is.char.length)return is.char;if(is.which)return String.fromCharCode(is.which)}return null;case"compositionend":return de$1&&is.locale!=="ko"?null:is.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(cs){var is=cs&&cs.nodeName&&cs.nodeName.toLowerCase();return is==="input"?!!le$1[cs.type]:is==="textarea"}function ne$1(cs,is,us,hs){Eb(hs),is=oe$1(is,"onChange"),0<is.length&&(us=new td("onChange","change",null,us,hs),cs.push({event:us,listeners:is}))}var pe$1=null,qe$1=null;function re$1(cs){se$1(cs,0)}function te$1(cs){var is=ue$1(cs);if(Wa$1(is))return cs}function ve$1(cs,is){if(cs==="change")return is}var we$1=!1;if(ia$1){var xe$1;if(ia$1){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(cs){if(cs.propertyName==="value"&&te$1(qe$1)){var is=[];ne$1(is,qe$1,cs,xb(cs)),Jb(re$1,is)}}function Ce$1(cs,is,us){cs==="focusin"?(Ae$1(),pe$1=is,qe$1=us,pe$1.attachEvent("onpropertychange",Be$1)):cs==="focusout"&&Ae$1()}function De$1(cs){if(cs==="selectionchange"||cs==="keyup"||cs==="keydown")return te$1(qe$1)}function Ee$1(cs,is){if(cs==="click")return te$1(is)}function Fe$1(cs,is){if(cs==="input"||cs==="change")return te$1(is)}function Ge$1(cs,is){return cs===is&&(cs!==0||1/cs===1/is)||cs!==cs&&is!==is}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie$1(cs,is){if(He$1(cs,is))return!0;if(typeof cs!="object"||cs===null||typeof is!="object"||is===null)return!1;var us=Object.keys(cs),hs=Object.keys(is);if(us.length!==hs.length)return!1;for(hs=0;hs<us.length;hs++){var lo=us[hs];if(!ja.call(is,lo)||!He$1(cs[lo],is[lo]))return!1}return!0}function Je$1(cs){for(;cs&&cs.firstChild;)cs=cs.firstChild;return cs}function Ke$1(cs,is){var us=Je$1(cs);cs=0;for(var hs;us;){if(us.nodeType===3){if(hs=cs+us.textContent.length,cs<=is&&hs>=is)return{node:us,offset:is-cs};cs=hs}e:{for(;us;){if(us.nextSibling){us=us.nextSibling;break e}us=us.parentNode}us=void 0}us=Je$1(us)}}function Le$1(cs,is){return cs&&is?cs===is?!0:cs&&cs.nodeType===3?!1:is&&is.nodeType===3?Le$1(cs,is.parentNode):"contains"in cs?cs.contains(is):cs.compareDocumentPosition?!!(cs.compareDocumentPosition(is)&16):!1:!1}function Me$1(){for(var cs=window,is=Xa$1();is instanceof cs.HTMLIFrameElement;){try{var us=typeof is.contentWindow.location.href=="string"}catch{us=!1}if(us)cs=is.contentWindow;else break;is=Xa$1(cs.document)}return is}function Ne$1(cs){var is=cs&&cs.nodeName&&cs.nodeName.toLowerCase();return is&&(is==="input"&&(cs.type==="text"||cs.type==="search"||cs.type==="tel"||cs.type==="url"||cs.type==="password")||is==="textarea"||cs.contentEditable==="true")}function Oe$1(cs){var is=Me$1(),us=cs.focusedElem,hs=cs.selectionRange;if(is!==us&&us&&us.ownerDocument&&Le$1(us.ownerDocument.documentElement,us)){if(hs!==null&&Ne$1(us)){if(is=hs.start,cs=hs.end,cs===void 0&&(cs=is),"selectionStart"in us)us.selectionStart=is,us.selectionEnd=Math.min(cs,us.value.length);else if(cs=(is=us.ownerDocument||document)&&is.defaultView||window,cs.getSelection){cs=cs.getSelection();var lo=us.textContent.length,co=Math.min(hs.start,lo);hs=hs.end===void 0?co:Math.min(hs.end,lo),!cs.extend&&co>hs&&(lo=hs,hs=co,co=lo),lo=Ke$1(us,co);var uo=Ke$1(us,hs);lo&&uo&&(cs.rangeCount!==1||cs.anchorNode!==lo.node||cs.anchorOffset!==lo.offset||cs.focusNode!==uo.node||cs.focusOffset!==uo.offset)&&(is=is.createRange(),is.setStart(lo.node,lo.offset),cs.removeAllRanges(),co>hs?(cs.addRange(is),cs.extend(uo.node,uo.offset)):(is.setEnd(uo.node,uo.offset),cs.addRange(is)))}}for(is=[],cs=us;cs=cs.parentNode;)cs.nodeType===1&&is.push({element:cs,left:cs.scrollLeft,top:cs.scrollTop});for(typeof us.focus=="function"&&us.focus(),us=0;us<is.length;us++)cs=is[us],cs.element.scrollLeft=cs.left,cs.element.scrollTop=cs.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(cs,is,us){var hs=us.window===us?us.document:us.nodeType===9?us:us.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa$1(hs)||(hs=Qe$1,"selectionStart"in hs&&Ne$1(hs)?hs={start:hs.selectionStart,end:hs.selectionEnd}:(hs=(hs.ownerDocument&&hs.ownerDocument.defaultView||window).getSelection(),hs={anchorNode:hs.anchorNode,anchorOffset:hs.anchorOffset,focusNode:hs.focusNode,focusOffset:hs.focusOffset}),Se$1&&Ie$1(Se$1,hs)||(Se$1=hs,hs=oe$1(Re$1,"onSelect"),0<hs.length&&(is=new td("onSelect","select",null,is,us),cs.push({event:is,listeners:hs}),is.target=Qe$1)))}function Ve$1(cs,is){var us={};return us[cs.toLowerCase()]=is.toLowerCase(),us["Webkit"+cs]="webkit"+is,us["Moz"+cs]="moz"+is,us}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia$1&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(cs){if(Xe$1[cs])return Xe$1[cs];if(!We$1[cs])return cs;var is=We$1[cs],us;for(us in is)if(is.hasOwnProperty(us)&&us in Ye$1)return Xe$1[cs]=is[us];return cs}var $e$1=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(cs,is){df.set(cs,is),fa(is,[cs])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(cs,is,us){var hs=cs.type||"unknown-event";cs.currentTarget=us,Ub(hs,is,void 0,cs),cs.currentTarget=null}function se$1(cs,is){is=(is&4)!==0;for(var us=0;us<cs.length;us++){var hs=cs[us],lo=hs.event;hs=hs.listeners;e:{var co=void 0;if(is)for(var uo=hs.length-1;0<=uo;uo--){var ga=hs[uo],ba=ga.instance,xa=ga.currentTarget;if(ga=ga.listener,ba!==co&&lo.isPropagationStopped())break e;nf(lo,ga,xa),co=ba}else for(uo=0;uo<hs.length;uo++){if(ga=hs[uo],ba=ga.instance,xa=ga.currentTarget,ga=ga.listener,ba!==co&&lo.isPropagationStopped())break e;nf(lo,ga,xa),co=ba}}}if(Qb)throw cs=Rb,Qb=!1,Rb=null,cs}function D$1(cs,is){var us=is[of];us===void 0&&(us=is[of]=new Set);var hs=cs+"__bubble";us.has(hs)||(pf(is,cs,2,!1),us.add(hs))}function qf(cs,is,us){var hs=0;is&&(hs|=4),pf(us,cs,hs,is)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(cs){if(!cs[rf]){cs[rf]=!0,da.forEach(function(us){us!=="selectionchange"&&(mf.has(us)||qf(us,!1,cs),qf(us,!0,cs))});var is=cs.nodeType===9?cs:cs.ownerDocument;is===null||is[rf]||(is[rf]=!0,qf("selectionchange",!1,is))}}function pf(cs,is,us,hs){switch(jd(is)){case 1:var lo=ed;break;case 4:lo=gd;break;default:lo=fd}us=lo.bind(null,is,us,cs),lo=void 0,!Lb||is!=="touchstart"&&is!=="touchmove"&&is!=="wheel"||(lo=!0),hs?lo!==void 0?cs.addEventListener(is,us,{capture:!0,passive:lo}):cs.addEventListener(is,us,!0):lo!==void 0?cs.addEventListener(is,us,{passive:lo}):cs.addEventListener(is,us,!1)}function hd(cs,is,us,hs,lo){var co=hs;if(!(is&1)&&!(is&2)&&hs!==null)e:for(;;){if(hs===null)return;var uo=hs.tag;if(uo===3||uo===4){var ga=hs.stateNode.containerInfo;if(ga===lo||ga.nodeType===8&&ga.parentNode===lo)break;if(uo===4)for(uo=hs.return;uo!==null;){var ba=uo.tag;if((ba===3||ba===4)&&(ba=uo.stateNode.containerInfo,ba===lo||ba.nodeType===8&&ba.parentNode===lo))return;uo=uo.return}for(;ga!==null;){if(uo=Wc(ga),uo===null)return;if(ba=uo.tag,ba===5||ba===6){hs=co=uo;continue e}ga=ga.parentNode}}hs=hs.return}Jb(function(){var xa=co,_a=xb(us),$a=[];e:{var xl=df.get(cs);if(xl!==void 0){var yl=td,wl=cs;switch(cs){case"keypress":if(od(us)===0)break e;case"keydown":case"keyup":yl=Rd;break;case"focusin":wl="focus",yl=Fd;break;case"focusout":wl="blur",yl=Fd;break;case"beforeblur":case"afterblur":yl=Fd;break;case"click":if(us.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yl=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yl=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yl=Vd;break;case $e$1:case af:case bf:yl=Hd;break;case cf:yl=Xd;break;case"scroll":yl=vd;break;case"wheel":yl=Zd;break;case"copy":case"cut":case"paste":yl=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yl=Td}var _l=(is&4)!==0,El=!_l&&cs==="scroll",Sl=_l?xl!==null?xl+"Capture":null:xl;_l=[];for(var Cl=xa,Tl;Cl!==null;){Tl=Cl;var Dl=Tl.stateNode;if(Tl.tag===5&&Dl!==null&&(Tl=Dl,Sl!==null&&(Dl=Kb(Cl,Sl),Dl!=null&&_l.push(tf(Cl,Dl,Tl)))),El)break;Cl=Cl.return}0<_l.length&&(xl=new yl(xl,wl,null,us,_a),$a.push({event:xl,listeners:_l}))}}if(!(is&7)){e:{if(xl=cs==="mouseover"||cs==="pointerover",yl=cs==="mouseout"||cs==="pointerout",xl&&us!==wb&&(wl=us.relatedTarget||us.fromElement)&&(Wc(wl)||wl[uf]))break e;if((yl||xl)&&(xl=_a.window===_a?_a:(xl=_a.ownerDocument)?xl.defaultView||xl.parentWindow:window,yl?(wl=us.relatedTarget||us.toElement,yl=xa,wl=wl?Wc(wl):null,wl!==null&&(El=Vb(wl),wl!==El||wl.tag!==5&&wl.tag!==6)&&(wl=null)):(yl=null,wl=xa),yl!==wl)){if(_l=Bd,Dl="onMouseLeave",Sl="onMouseEnter",Cl="mouse",(cs==="pointerout"||cs==="pointerover")&&(_l=Td,Dl="onPointerLeave",Sl="onPointerEnter",Cl="pointer"),El=yl==null?xl:ue$1(yl),Tl=wl==null?xl:ue$1(wl),xl=new _l(Dl,Cl+"leave",yl,us,_a),xl.target=El,xl.relatedTarget=Tl,Dl=null,Wc(_a)===xa&&(_l=new _l(Sl,Cl+"enter",wl,us,_a),_l.target=Tl,_l.relatedTarget=El,Dl=_l),El=Dl,yl&&wl)t:{for(_l=yl,Sl=wl,Cl=0,Tl=_l;Tl;Tl=vf(Tl))Cl++;for(Tl=0,Dl=Sl;Dl;Dl=vf(Dl))Tl++;for(;0<Cl-Tl;)_l=vf(_l),Cl--;for(;0<Tl-Cl;)Sl=vf(Sl),Tl--;for(;Cl--;){if(_l===Sl||Sl!==null&&_l===Sl.alternate)break t;_l=vf(_l),Sl=vf(Sl)}_l=null}else _l=null;yl!==null&&wf($a,xl,yl,_l,!1),wl!==null&&El!==null&&wf($a,El,wl,_l,!0)}}e:{if(xl=xa?ue$1(xa):window,yl=xl.nodeName&&xl.nodeName.toLowerCase(),yl==="select"||yl==="input"&&xl.type==="file")var Fl=ve$1;else if(me$1(xl))if(we$1)Fl=Fe$1;else{Fl=De$1;var Pl=Ce$1}else(yl=xl.nodeName)&&yl.toLowerCase()==="input"&&(xl.type==="checkbox"||xl.type==="radio")&&(Fl=Ee$1);if(Fl&&(Fl=Fl(cs,xa))){ne$1($a,Fl,us,_a);break e}Pl&&Pl(cs,xl,xa),cs==="focusout"&&(Pl=xl._wrapperState)&&Pl.controlled&&xl.type==="number"&&cb(xl,"number",xl.value)}switch(Pl=xa?ue$1(xa):window,cs){case"focusin":(me$1(Pl)||Pl.contentEditable==="true")&&(Qe$1=Pl,Re$1=xa,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1($a,us,_a);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1($a,us,_a)}var Al;if(ae$1)e:{switch(cs){case"compositionstart":var Rl="onCompositionStart";break e;case"compositionend":Rl="onCompositionEnd";break e;case"compositionupdate":Rl="onCompositionUpdate";break e}Rl=void 0}else ie$1?ge$1(cs,us)&&(Rl="onCompositionEnd"):cs==="keydown"&&us.keyCode===229&&(Rl="onCompositionStart");Rl&&(de$1&&us.locale!=="ko"&&(ie$1||Rl!=="onCompositionStart"?Rl==="onCompositionEnd"&&ie$1&&(Al=nd()):(kd=_a,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Pl=oe$1(xa,Rl),0<Pl.length&&(Rl=new Ld(Rl,cs,null,us,_a),$a.push({event:Rl,listeners:Pl}),Al?Rl.data=Al:(Al=he$1(us),Al!==null&&(Rl.data=Al)))),(Al=ce$1?je$1(cs,us):ke$1(cs,us))&&(xa=oe$1(xa,"onBeforeInput"),0<xa.length&&(_a=new Ld("onBeforeInput","beforeinput",null,us,_a),$a.push({event:_a,listeners:xa}),_a.data=Al))}se$1($a,is)})}function tf(cs,is,us){return{instance:cs,listener:is,currentTarget:us}}function oe$1(cs,is){for(var us=is+"Capture",hs=[];cs!==null;){var lo=cs,co=lo.stateNode;lo.tag===5&&co!==null&&(lo=co,co=Kb(cs,us),co!=null&&hs.unshift(tf(cs,co,lo)),co=Kb(cs,is),co!=null&&hs.push(tf(cs,co,lo))),cs=cs.return}return hs}function vf(cs){if(cs===null)return null;do cs=cs.return;while(cs&&cs.tag!==5);return cs||null}function wf(cs,is,us,hs,lo){for(var co=is._reactName,uo=[];us!==null&&us!==hs;){var ga=us,ba=ga.alternate,xa=ga.stateNode;if(ba!==null&&ba===hs)break;ga.tag===5&&xa!==null&&(ga=xa,lo?(ba=Kb(us,co),ba!=null&&uo.unshift(tf(us,ba,ga))):lo||(ba=Kb(us,co),ba!=null&&uo.push(tf(us,ba,ga)))),us=us.return}uo.length!==0&&cs.push({event:is,listeners:uo})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(cs){return(typeof cs=="string"?cs:""+cs).replace(xf,`
`).replace(yf,"")}function Af(cs,is,us){if(is=zf(is),zf(cs)!==is&&us)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(cs,is){return cs==="textarea"||cs==="noscript"||typeof is.children=="string"||typeof is.children=="number"||typeof is.dangerouslySetInnerHTML=="object"&&is.dangerouslySetInnerHTML!==null&&is.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(cs){return Hf.resolve(null).then(cs).catch(If)}:Ff;function If(cs){setTimeout(function(){throw cs})}function Kf(cs,is){var us=is,hs=0;do{var lo=us.nextSibling;if(cs.removeChild(us),lo&&lo.nodeType===8)if(us=lo.data,us==="/$"){if(hs===0){cs.removeChild(lo),bd(is);return}hs--}else us!=="$"&&us!=="$?"&&us!=="$!"||hs++;us=lo}while(us);bd(is)}function Lf(cs){for(;cs!=null;cs=cs.nextSibling){var is=cs.nodeType;if(is===1||is===3)break;if(is===8){if(is=cs.data,is==="$"||is==="$!"||is==="$?")break;if(is==="/$")return null}}return cs}function Mf(cs){cs=cs.previousSibling;for(var is=0;cs;){if(cs.nodeType===8){var us=cs.data;if(us==="$"||us==="$!"||us==="$?"){if(is===0)return cs;is--}else us==="/$"&&is++}cs=cs.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(cs){var is=cs[Of];if(is)return is;for(var us=cs.parentNode;us;){if(is=us[uf]||us[Of]){if(us=is.alternate,is.child!==null||us!==null&&us.child!==null)for(cs=Mf(cs);cs!==null;){if(us=cs[Of])return us;cs=Mf(cs)}return is}cs=us,us=cs.parentNode}return null}function Cb(cs){return cs=cs[Of]||cs[uf],!cs||cs.tag!==5&&cs.tag!==6&&cs.tag!==13&&cs.tag!==3?null:cs}function ue$1(cs){if(cs.tag===5||cs.tag===6)return cs.stateNode;throw Error(p$1(33))}function Db(cs){return cs[Pf]||null}var Sf=[],Tf=-1;function Uf(cs){return{current:cs}}function E$1(cs){0>Tf||(cs.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(cs,is){Tf++,Sf[Tf]=cs.current,cs.current=is}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(cs,is){var us=cs.type.contextTypes;if(!us)return Vf;var hs=cs.stateNode;if(hs&&hs.__reactInternalMemoizedUnmaskedChildContext===is)return hs.__reactInternalMemoizedMaskedChildContext;var lo={},co;for(co in us)lo[co]=is[co];return hs&&(cs=cs.stateNode,cs.__reactInternalMemoizedUnmaskedChildContext=is,cs.__reactInternalMemoizedMaskedChildContext=lo),lo}function Zf(cs){return cs=cs.childContextTypes,cs!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(cs,is,us){if(H$1.current!==Vf)throw Error(p$1(168));G$1(H$1,is),G$1(Wf,us)}function bg(cs,is,us){var hs=cs.stateNode;if(is=is.childContextTypes,typeof hs.getChildContext!="function")return us;hs=hs.getChildContext();for(var lo in hs)if(!(lo in is))throw Error(p$1(108,Ra$1(cs)||"Unknown",lo));return A$1({},us,hs)}function cg(cs){return cs=(cs=cs.stateNode)&&cs.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,cs),G$1(Wf,Wf.current),!0}function dg(cs,is,us){var hs=cs.stateNode;if(!hs)throw Error(p$1(169));us?(cs=bg(cs,is,Xf),hs.__reactInternalMemoizedMergedChildContext=cs,E$1(Wf),E$1(H$1),G$1(H$1,cs)):E$1(Wf),G$1(Wf,us)}var eg=null,fg=!1,gg=!1;function hg(cs){eg===null?eg=[cs]:eg.push(cs)}function ig(cs){fg=!0,hg(cs)}function jg(){if(!gg&&eg!==null){gg=!0;var cs=0,is=C$1;try{var us=eg;for(C$1=1;cs<us.length;cs++){var hs=us[cs];do hs=hs(!0);while(hs!==null)}eg=null,fg=!1}catch(lo){throw eg!==null&&(eg=eg.slice(cs+1)),ac(fc,jg),lo}finally{C$1=is,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(cs,is){kg[lg++]=ng,kg[lg++]=mg,mg=cs,ng=is}function ug(cs,is,us){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=cs;var hs=rg;cs=sg;var lo=32-oc(hs)-1;hs&=~(1<<lo),us+=1;var co=32-oc(is)+lo;if(30<co){var uo=lo-lo%5;co=(hs&(1<<uo)-1).toString(32),hs>>=uo,lo-=uo,rg=1<<32-oc(is)+lo|us<<lo|hs,sg=co+cs}else rg=1<<co|us<<lo|hs,sg=cs}function vg(cs){cs.return!==null&&(tg(cs,1),ug(cs,1,0))}function wg(cs){for(;cs===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;cs===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(cs,is){var us=Bg(5,null,null,0);us.elementType="DELETED",us.stateNode=is,us.return=cs,is=cs.deletions,is===null?(cs.deletions=[us],cs.flags|=16):is.push(us)}function Cg(cs,is){switch(cs.tag){case 5:var us=cs.type;return is=is.nodeType!==1||us.toLowerCase()!==is.nodeName.toLowerCase()?null:is,is!==null?(cs.stateNode=is,xg=cs,yg=Lf(is.firstChild),!0):!1;case 6:return is=cs.pendingProps===""||is.nodeType!==3?null:is,is!==null?(cs.stateNode=is,xg=cs,yg=null,!0):!1;case 13:return is=is.nodeType!==8?null:is,is!==null?(us=qg!==null?{id:rg,overflow:sg}:null,cs.memoizedState={dehydrated:is,treeContext:us,retryLane:1073741824},us=Bg(18,null,null,0),us.stateNode=is,us.return=cs,cs.child=us,xg=cs,yg=null,!0):!1;default:return!1}}function Dg(cs){return(cs.mode&1)!==0&&(cs.flags&128)===0}function Eg(cs){if(I$1){var is=yg;if(is){var us=is;if(!Cg(cs,is)){if(Dg(cs))throw Error(p$1(418));is=Lf(us.nextSibling);var hs=xg;is&&Cg(cs,is)?Ag(hs,us):(cs.flags=cs.flags&-4097|2,I$1=!1,xg=cs)}}else{if(Dg(cs))throw Error(p$1(418));cs.flags=cs.flags&-4097|2,I$1=!1,xg=cs}}}function Fg(cs){for(cs=cs.return;cs!==null&&cs.tag!==5&&cs.tag!==3&&cs.tag!==13;)cs=cs.return;xg=cs}function Gg(cs){if(cs!==xg)return!1;if(!I$1)return Fg(cs),I$1=!0,!1;var is;if((is=cs.tag!==3)&&!(is=cs.tag!==5)&&(is=cs.type,is=is!=="head"&&is!=="body"&&!Ef(cs.type,cs.memoizedProps)),is&&(is=yg)){if(Dg(cs))throw Hg(),Error(p$1(418));for(;is;)Ag(cs,is),is=Lf(is.nextSibling)}if(Fg(cs),cs.tag===13){if(cs=cs.memoizedState,cs=cs!==null?cs.dehydrated:null,!cs)throw Error(p$1(317));e:{for(cs=cs.nextSibling,is=0;cs;){if(cs.nodeType===8){var us=cs.data;if(us==="/$"){if(is===0){yg=Lf(cs.nextSibling);break e}is--}else us!=="$"&&us!=="$!"&&us!=="$?"||is++}cs=cs.nextSibling}yg=null}}else yg=xg?Lf(cs.stateNode.nextSibling):null;return!0}function Hg(){for(var cs=yg;cs;)cs=Lf(cs.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(cs){zg===null?zg=[cs]:zg.push(cs)}var Kg=ua.ReactCurrentBatchConfig;function Lg(cs,is,us){if(cs=us.ref,cs!==null&&typeof cs!="function"&&typeof cs!="object"){if(us._owner){if(us=us._owner,us){if(us.tag!==1)throw Error(p$1(309));var hs=us.stateNode}if(!hs)throw Error(p$1(147,cs));var lo=hs,co=""+cs;return is!==null&&is.ref!==null&&typeof is.ref=="function"&&is.ref._stringRef===co?is.ref:(is=function(uo){var ga=lo.refs;uo===null?delete ga[co]:ga[co]=uo},is._stringRef=co,is)}if(typeof cs!="string")throw Error(p$1(284));if(!us._owner)throw Error(p$1(290,cs))}return cs}function Mg(cs,is){throw cs=Object.prototype.toString.call(is),Error(p$1(31,cs==="[object Object]"?"object with keys {"+Object.keys(is).join(", ")+"}":cs))}function Ng(cs){var is=cs._init;return is(cs._payload)}function Og(cs){function is(Sl,Cl){if(cs){var Tl=Sl.deletions;Tl===null?(Sl.deletions=[Cl],Sl.flags|=16):Tl.push(Cl)}}function us(Sl,Cl){if(!cs)return null;for(;Cl!==null;)is(Sl,Cl),Cl=Cl.sibling;return null}function hs(Sl,Cl){for(Sl=new Map;Cl!==null;)Cl.key!==null?Sl.set(Cl.key,Cl):Sl.set(Cl.index,Cl),Cl=Cl.sibling;return Sl}function lo(Sl,Cl){return Sl=Pg(Sl,Cl),Sl.index=0,Sl.sibling=null,Sl}function co(Sl,Cl,Tl){return Sl.index=Tl,cs?(Tl=Sl.alternate,Tl!==null?(Tl=Tl.index,Tl<Cl?(Sl.flags|=2,Cl):Tl):(Sl.flags|=2,Cl)):(Sl.flags|=1048576,Cl)}function uo(Sl){return cs&&Sl.alternate===null&&(Sl.flags|=2),Sl}function ga(Sl,Cl,Tl,Dl){return Cl===null||Cl.tag!==6?(Cl=Qg(Tl,Sl.mode,Dl),Cl.return=Sl,Cl):(Cl=lo(Cl,Tl),Cl.return=Sl,Cl)}function ba(Sl,Cl,Tl,Dl){var Fl=Tl.type;return Fl===ya?_a(Sl,Cl,Tl.props.children,Dl,Tl.key):Cl!==null&&(Cl.elementType===Fl||typeof Fl=="object"&&Fl!==null&&Fl.$$typeof===Ha$1&&Ng(Fl)===Cl.type)?(Dl=lo(Cl,Tl.props),Dl.ref=Lg(Sl,Cl,Tl),Dl.return=Sl,Dl):(Dl=Rg(Tl.type,Tl.key,Tl.props,null,Sl.mode,Dl),Dl.ref=Lg(Sl,Cl,Tl),Dl.return=Sl,Dl)}function xa(Sl,Cl,Tl,Dl){return Cl===null||Cl.tag!==4||Cl.stateNode.containerInfo!==Tl.containerInfo||Cl.stateNode.implementation!==Tl.implementation?(Cl=Sg(Tl,Sl.mode,Dl),Cl.return=Sl,Cl):(Cl=lo(Cl,Tl.children||[]),Cl.return=Sl,Cl)}function _a(Sl,Cl,Tl,Dl,Fl){return Cl===null||Cl.tag!==7?(Cl=Tg(Tl,Sl.mode,Dl,Fl),Cl.return=Sl,Cl):(Cl=lo(Cl,Tl),Cl.return=Sl,Cl)}function $a(Sl,Cl,Tl){if(typeof Cl=="string"&&Cl!==""||typeof Cl=="number")return Cl=Qg(""+Cl,Sl.mode,Tl),Cl.return=Sl,Cl;if(typeof Cl=="object"&&Cl!==null){switch(Cl.$$typeof){case va:return Tl=Rg(Cl.type,Cl.key,Cl.props,null,Sl.mode,Tl),Tl.ref=Lg(Sl,null,Cl),Tl.return=Sl,Tl;case wa:return Cl=Sg(Cl,Sl.mode,Tl),Cl.return=Sl,Cl;case Ha$1:var Dl=Cl._init;return $a(Sl,Dl(Cl._payload),Tl)}if(eb(Cl)||Ka$1(Cl))return Cl=Tg(Cl,Sl.mode,Tl,null),Cl.return=Sl,Cl;Mg(Sl,Cl)}return null}function xl(Sl,Cl,Tl,Dl){var Fl=Cl!==null?Cl.key:null;if(typeof Tl=="string"&&Tl!==""||typeof Tl=="number")return Fl!==null?null:ga(Sl,Cl,""+Tl,Dl);if(typeof Tl=="object"&&Tl!==null){switch(Tl.$$typeof){case va:return Tl.key===Fl?ba(Sl,Cl,Tl,Dl):null;case wa:return Tl.key===Fl?xa(Sl,Cl,Tl,Dl):null;case Ha$1:return Fl=Tl._init,xl(Sl,Cl,Fl(Tl._payload),Dl)}if(eb(Tl)||Ka$1(Tl))return Fl!==null?null:_a(Sl,Cl,Tl,Dl,null);Mg(Sl,Tl)}return null}function yl(Sl,Cl,Tl,Dl,Fl){if(typeof Dl=="string"&&Dl!==""||typeof Dl=="number")return Sl=Sl.get(Tl)||null,ga(Cl,Sl,""+Dl,Fl);if(typeof Dl=="object"&&Dl!==null){switch(Dl.$$typeof){case va:return Sl=Sl.get(Dl.key===null?Tl:Dl.key)||null,ba(Cl,Sl,Dl,Fl);case wa:return Sl=Sl.get(Dl.key===null?Tl:Dl.key)||null,xa(Cl,Sl,Dl,Fl);case Ha$1:var Pl=Dl._init;return yl(Sl,Cl,Tl,Pl(Dl._payload),Fl)}if(eb(Dl)||Ka$1(Dl))return Sl=Sl.get(Tl)||null,_a(Cl,Sl,Dl,Fl,null);Mg(Cl,Dl)}return null}function wl(Sl,Cl,Tl,Dl){for(var Fl=null,Pl=null,Al=Cl,Rl=Cl=0,Il=null;Al!==null&&Rl<Tl.length;Rl++){Al.index>Rl?(Il=Al,Al=null):Il=Al.sibling;var Bl=xl(Sl,Al,Tl[Rl],Dl);if(Bl===null){Al===null&&(Al=Il);break}cs&&Al&&Bl.alternate===null&&is(Sl,Al),Cl=co(Bl,Cl,Rl),Pl===null?Fl=Bl:Pl.sibling=Bl,Pl=Bl,Al=Il}if(Rl===Tl.length)return us(Sl,Al),I$1&&tg(Sl,Rl),Fl;if(Al===null){for(;Rl<Tl.length;Rl++)Al=$a(Sl,Tl[Rl],Dl),Al!==null&&(Cl=co(Al,Cl,Rl),Pl===null?Fl=Al:Pl.sibling=Al,Pl=Al);return I$1&&tg(Sl,Rl),Fl}for(Al=hs(Sl,Al);Rl<Tl.length;Rl++)Il=yl(Al,Sl,Rl,Tl[Rl],Dl),Il!==null&&(cs&&Il.alternate!==null&&Al.delete(Il.key===null?Rl:Il.key),Cl=co(Il,Cl,Rl),Pl===null?Fl=Il:Pl.sibling=Il,Pl=Il);return cs&&Al.forEach(function(Ol){return is(Sl,Ol)}),I$1&&tg(Sl,Rl),Fl}function _l(Sl,Cl,Tl,Dl){var Fl=Ka$1(Tl);if(typeof Fl!="function")throw Error(p$1(150));if(Tl=Fl.call(Tl),Tl==null)throw Error(p$1(151));for(var Pl=Fl=null,Al=Cl,Rl=Cl=0,Il=null,Bl=Tl.next();Al!==null&&!Bl.done;Rl++,Bl=Tl.next()){Al.index>Rl?(Il=Al,Al=null):Il=Al.sibling;var Ol=xl(Sl,Al,Bl.value,Dl);if(Ol===null){Al===null&&(Al=Il);break}cs&&Al&&Ol.alternate===null&&is(Sl,Al),Cl=co(Ol,Cl,Rl),Pl===null?Fl=Ol:Pl.sibling=Ol,Pl=Ol,Al=Il}if(Bl.done)return us(Sl,Al),I$1&&tg(Sl,Rl),Fl;if(Al===null){for(;!Bl.done;Rl++,Bl=Tl.next())Bl=$a(Sl,Bl.value,Dl),Bl!==null&&(Cl=co(Bl,Cl,Rl),Pl===null?Fl=Bl:Pl.sibling=Bl,Pl=Bl);return I$1&&tg(Sl,Rl),Fl}for(Al=hs(Sl,Al);!Bl.done;Rl++,Bl=Tl.next())Bl=yl(Al,Sl,Rl,Bl.value,Dl),Bl!==null&&(cs&&Bl.alternate!==null&&Al.delete(Bl.key===null?Rl:Bl.key),Cl=co(Bl,Cl,Rl),Pl===null?Fl=Bl:Pl.sibling=Bl,Pl=Bl);return cs&&Al.forEach(function(zl){return is(Sl,zl)}),I$1&&tg(Sl,Rl),Fl}function El(Sl,Cl,Tl,Dl){if(typeof Tl=="object"&&Tl!==null&&Tl.type===ya&&Tl.key===null&&(Tl=Tl.props.children),typeof Tl=="object"&&Tl!==null){switch(Tl.$$typeof){case va:e:{for(var Fl=Tl.key,Pl=Cl;Pl!==null;){if(Pl.key===Fl){if(Fl=Tl.type,Fl===ya){if(Pl.tag===7){us(Sl,Pl.sibling),Cl=lo(Pl,Tl.props.children),Cl.return=Sl,Sl=Cl;break e}}else if(Pl.elementType===Fl||typeof Fl=="object"&&Fl!==null&&Fl.$$typeof===Ha$1&&Ng(Fl)===Pl.type){us(Sl,Pl.sibling),Cl=lo(Pl,Tl.props),Cl.ref=Lg(Sl,Pl,Tl),Cl.return=Sl,Sl=Cl;break e}us(Sl,Pl);break}else is(Sl,Pl);Pl=Pl.sibling}Tl.type===ya?(Cl=Tg(Tl.props.children,Sl.mode,Dl,Tl.key),Cl.return=Sl,Sl=Cl):(Dl=Rg(Tl.type,Tl.key,Tl.props,null,Sl.mode,Dl),Dl.ref=Lg(Sl,Cl,Tl),Dl.return=Sl,Sl=Dl)}return uo(Sl);case wa:e:{for(Pl=Tl.key;Cl!==null;){if(Cl.key===Pl)if(Cl.tag===4&&Cl.stateNode.containerInfo===Tl.containerInfo&&Cl.stateNode.implementation===Tl.implementation){us(Sl,Cl.sibling),Cl=lo(Cl,Tl.children||[]),Cl.return=Sl,Sl=Cl;break e}else{us(Sl,Cl);break}else is(Sl,Cl);Cl=Cl.sibling}Cl=Sg(Tl,Sl.mode,Dl),Cl.return=Sl,Sl=Cl}return uo(Sl);case Ha$1:return Pl=Tl._init,El(Sl,Cl,Pl(Tl._payload),Dl)}if(eb(Tl))return wl(Sl,Cl,Tl,Dl);if(Ka$1(Tl))return _l(Sl,Cl,Tl,Dl);Mg(Sl,Tl)}return typeof Tl=="string"&&Tl!==""||typeof Tl=="number"?(Tl=""+Tl,Cl!==null&&Cl.tag===6?(us(Sl,Cl.sibling),Cl=lo(Cl,Tl),Cl.return=Sl,Sl=Cl):(us(Sl,Cl),Cl=Qg(Tl,Sl.mode,Dl),Cl.return=Sl,Sl=Cl),uo(Sl)):us(Sl,Cl)}return El}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah$1(cs){var is=Wg.current;E$1(Wg),cs._currentValue=is}function bh(cs,is,us){for(;cs!==null;){var hs=cs.alternate;if((cs.childLanes&is)!==is?(cs.childLanes|=is,hs!==null&&(hs.childLanes|=is)):hs!==null&&(hs.childLanes&is)!==is&&(hs.childLanes|=is),cs===us)break;cs=cs.return}}function ch$1(cs,is){Xg=cs,Zg=Yg=null,cs=cs.dependencies,cs!==null&&cs.firstContext!==null&&(cs.lanes&is&&(dh$1=!0),cs.firstContext=null)}function eh(cs){var is=cs._currentValue;if(Zg!==cs)if(cs={context:cs,memoizedValue:is,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=cs,Xg.dependencies={lanes:0,firstContext:cs}}else Yg=Yg.next=cs;return is}var fh$1=null;function gh$1(cs){fh$1===null?fh$1=[cs]:fh$1.push(cs)}function hh$1(cs,is,us,hs){var lo=is.interleaved;return lo===null?(us.next=us,gh$1(is)):(us.next=lo.next,lo.next=us),is.interleaved=us,ih(cs,hs)}function ih(cs,is){cs.lanes|=is;var us=cs.alternate;for(us!==null&&(us.lanes|=is),us=cs,cs=cs.return;cs!==null;)cs.childLanes|=is,us=cs.alternate,us!==null&&(us.childLanes|=is),us=cs,cs=cs.return;return us.tag===3?us.stateNode:null}var jh=!1;function kh(cs){cs.updateQueue={baseState:cs.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh$1(cs,is){cs=cs.updateQueue,is.updateQueue===cs&&(is.updateQueue={baseState:cs.baseState,firstBaseUpdate:cs.firstBaseUpdate,lastBaseUpdate:cs.lastBaseUpdate,shared:cs.shared,effects:cs.effects})}function mh$1(cs,is){return{eventTime:cs,lane:is,tag:0,payload:null,callback:null,next:null}}function nh$1(cs,is,us){var hs=cs.updateQueue;if(hs===null)return null;if(hs=hs.shared,K$1&2){var lo=hs.pending;return lo===null?is.next=is:(is.next=lo.next,lo.next=is),hs.pending=is,ih(cs,us)}return lo=hs.interleaved,lo===null?(is.next=is,gh$1(hs)):(is.next=lo.next,lo.next=is),hs.interleaved=is,ih(cs,us)}function oh$1(cs,is,us){if(is=is.updateQueue,is!==null&&(is=is.shared,(us&4194240)!==0)){var hs=is.lanes;hs&=cs.pendingLanes,us|=hs,is.lanes=us,Cc(cs,us)}}function ph$1(cs,is){var us=cs.updateQueue,hs=cs.alternate;if(hs!==null&&(hs=hs.updateQueue,us===hs)){var lo=null,co=null;if(us=us.firstBaseUpdate,us!==null){do{var uo={eventTime:us.eventTime,lane:us.lane,tag:us.tag,payload:us.payload,callback:us.callback,next:null};co===null?lo=co=uo:co=co.next=uo,us=us.next}while(us!==null);co===null?lo=co=is:co=co.next=is}else lo=co=is;us={baseState:hs.baseState,firstBaseUpdate:lo,lastBaseUpdate:co,shared:hs.shared,effects:hs.effects},cs.updateQueue=us;return}cs=us.lastBaseUpdate,cs===null?us.firstBaseUpdate=is:cs.next=is,us.lastBaseUpdate=is}function qh(cs,is,us,hs){var lo=cs.updateQueue;jh=!1;var co=lo.firstBaseUpdate,uo=lo.lastBaseUpdate,ga=lo.shared.pending;if(ga!==null){lo.shared.pending=null;var ba=ga,xa=ba.next;ba.next=null,uo===null?co=xa:uo.next=xa,uo=ba;var _a=cs.alternate;_a!==null&&(_a=_a.updateQueue,ga=_a.lastBaseUpdate,ga!==uo&&(ga===null?_a.firstBaseUpdate=xa:ga.next=xa,_a.lastBaseUpdate=ba))}if(co!==null){var $a=lo.baseState;uo=0,_a=xa=ba=null,ga=co;do{var xl=ga.lane,yl=ga.eventTime;if((hs&xl)===xl){_a!==null&&(_a=_a.next={eventTime:yl,lane:0,tag:ga.tag,payload:ga.payload,callback:ga.callback,next:null});e:{var wl=cs,_l=ga;switch(xl=is,yl=us,_l.tag){case 1:if(wl=_l.payload,typeof wl=="function"){$a=wl.call(yl,$a,xl);break e}$a=wl;break e;case 3:wl.flags=wl.flags&-65537|128;case 0:if(wl=_l.payload,xl=typeof wl=="function"?wl.call(yl,$a,xl):wl,xl==null)break e;$a=A$1({},$a,xl);break e;case 2:jh=!0}}ga.callback!==null&&ga.lane!==0&&(cs.flags|=64,xl=lo.effects,xl===null?lo.effects=[ga]:xl.push(ga))}else yl={eventTime:yl,lane:xl,tag:ga.tag,payload:ga.payload,callback:ga.callback,next:null},_a===null?(xa=_a=yl,ba=$a):_a=_a.next=yl,uo|=xl;if(ga=ga.next,ga===null){if(ga=lo.shared.pending,ga===null)break;xl=ga,ga=xl.next,xl.next=null,lo.lastBaseUpdate=xl,lo.shared.pending=null}}while(!0);if(_a===null&&(ba=$a),lo.baseState=ba,lo.firstBaseUpdate=xa,lo.lastBaseUpdate=_a,is=lo.shared.interleaved,is!==null){lo=is;do uo|=lo.lane,lo=lo.next;while(lo!==is)}else co===null&&(lo.shared.lanes=0);rh|=uo,cs.lanes=uo,cs.memoizedState=$a}}function sh(cs,is,us){if(cs=is.effects,is.effects=null,cs!==null)for(is=0;is<cs.length;is++){var hs=cs[is],lo=hs.callback;if(lo!==null){if(hs.callback=null,hs=us,typeof lo!="function")throw Error(p$1(191,lo));lo.call(hs)}}}var th={},uh$1=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh$1(cs){if(cs===th)throw Error(p$1(174));return cs}function yh$1(cs,is){switch(G$1(wh,is),G$1(vh$1,cs),G$1(uh$1,th),cs=is.nodeType,cs){case 9:case 11:is=(is=is.documentElement)?is.namespaceURI:lb(null,"");break;default:cs=cs===8?is.parentNode:is,is=cs.namespaceURI||null,cs=cs.tagName,is=lb(is,cs)}E$1(uh$1),G$1(uh$1,is)}function zh(){E$1(uh$1),E$1(vh$1),E$1(wh)}function Ah(cs){xh$1(wh.current);var is=xh$1(uh$1.current),us=lb(is,cs.type);is!==us&&(G$1(vh$1,cs),G$1(uh$1,us))}function Bh(cs){vh$1.current===cs&&(E$1(uh$1),E$1(vh$1))}var L$1=Uf(0);function Ch$1(cs){for(var is=cs;is!==null;){if(is.tag===13){var us=is.memoizedState;if(us!==null&&(us=us.dehydrated,us===null||us.data==="$?"||us.data==="$!"))return is}else if(is.tag===19&&is.memoizedProps.revealOrder!==void 0){if(is.flags&128)return is}else if(is.child!==null){is.child.return=is,is=is.child;continue}if(is===cs)break;for(;is.sibling===null;){if(is.return===null||is.return===cs)return null;is=is.return}is.sibling.return=is.return,is=is.sibling}return null}var Dh=[];function Eh(){for(var cs=0;cs<Dh.length;cs++)Dh[cs]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p$1(321))}function Mh(cs,is){if(is===null)return!1;for(var us=0;us<is.length&&us<cs.length;us++)if(!He$1(cs[us],is[us]))return!1;return!0}function Nh(cs,is,us,hs,lo,co){if(Hh=co,M$1=is,is.memoizedState=null,is.updateQueue=null,is.lanes=0,Fh.current=cs===null||cs.memoizedState===null?Oh:Ph,cs=us(hs,lo),Jh){co=0;do{if(Jh=!1,Kh=0,25<=co)throw Error(p$1(301));co+=1,O$1=N$1=null,is.updateQueue=null,Fh.current=Qh,cs=us(hs,lo)}while(Jh)}if(Fh.current=Rh,is=N$1!==null&&N$1.next!==null,Hh=0,O$1=N$1=M$1=null,Ih=!1,is)throw Error(p$1(300));return cs}function Sh(){var cs=Kh!==0;return Kh=0,cs}function Th(){var cs={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=cs:O$1=O$1.next=cs,O$1}function Uh(){if(N$1===null){var cs=M$1.alternate;cs=cs!==null?cs.memoizedState:null}else cs=N$1.next;var is=O$1===null?M$1.memoizedState:O$1.next;if(is!==null)O$1=is,N$1=cs;else{if(cs===null)throw Error(p$1(310));N$1=cs,cs={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$1===null?M$1.memoizedState=O$1=cs:O$1=O$1.next=cs}return O$1}function Vh(cs,is){return typeof is=="function"?is(cs):is}function Wh(cs){var is=Uh(),us=is.queue;if(us===null)throw Error(p$1(311));us.lastRenderedReducer=cs;var hs=N$1,lo=hs.baseQueue,co=us.pending;if(co!==null){if(lo!==null){var uo=lo.next;lo.next=co.next,co.next=uo}hs.baseQueue=lo=co,us.pending=null}if(lo!==null){co=lo.next,hs=hs.baseState;var ga=uo=null,ba=null,xa=co;do{var _a=xa.lane;if((Hh&_a)===_a)ba!==null&&(ba=ba.next={lane:0,action:xa.action,hasEagerState:xa.hasEagerState,eagerState:xa.eagerState,next:null}),hs=xa.hasEagerState?xa.eagerState:cs(hs,xa.action);else{var $a={lane:_a,action:xa.action,hasEagerState:xa.hasEagerState,eagerState:xa.eagerState,next:null};ba===null?(ga=ba=$a,uo=hs):ba=ba.next=$a,M$1.lanes|=_a,rh|=_a}xa=xa.next}while(xa!==null&&xa!==co);ba===null?uo=hs:ba.next=ga,He$1(hs,is.memoizedState)||(dh$1=!0),is.memoizedState=hs,is.baseState=uo,is.baseQueue=ba,us.lastRenderedState=hs}if(cs=us.interleaved,cs!==null){lo=cs;do co=lo.lane,M$1.lanes|=co,rh|=co,lo=lo.next;while(lo!==cs)}else lo===null&&(us.lanes=0);return[is.memoizedState,us.dispatch]}function Xh(cs){var is=Uh(),us=is.queue;if(us===null)throw Error(p$1(311));us.lastRenderedReducer=cs;var hs=us.dispatch,lo=us.pending,co=is.memoizedState;if(lo!==null){us.pending=null;var uo=lo=lo.next;do co=cs(co,uo.action),uo=uo.next;while(uo!==lo);He$1(co,is.memoizedState)||(dh$1=!0),is.memoizedState=co,is.baseQueue===null&&(is.baseState=co),us.lastRenderedState=co}return[co,hs]}function Yh(){}function Zh(cs,is){var us=M$1,hs=Uh(),lo=is(),co=!He$1(hs.memoizedState,lo);if(co&&(hs.memoizedState=lo,dh$1=!0),hs=hs.queue,$h(ai$1.bind(null,us,hs,cs),[cs]),hs.getSnapshot!==is||co||O$1!==null&&O$1.memoizedState.tag&1){if(us.flags|=2048,bi$1(9,ci$1.bind(null,us,hs,lo,is),void 0,null),Q$1===null)throw Error(p$1(349));Hh&30||di$1(us,is,lo)}return lo}function di$1(cs,is,us){cs.flags|=16384,cs={getSnapshot:is,value:us},is=M$1.updateQueue,is===null?(is={lastEffect:null,stores:null},M$1.updateQueue=is,is.stores=[cs]):(us=is.stores,us===null?is.stores=[cs]:us.push(cs))}function ci$1(cs,is,us,hs){is.value=us,is.getSnapshot=hs,ei$1(is)&&fi$1(cs)}function ai$1(cs,is,us){return us(function(){ei$1(is)&&fi$1(cs)})}function ei$1(cs){var is=cs.getSnapshot;cs=cs.value;try{var us=is();return!He$1(cs,us)}catch{return!0}}function fi$1(cs){var is=ih(cs,1);is!==null&&gi$1(is,cs,1,-1)}function hi$1(cs){var is=Th();return typeof cs=="function"&&(cs=cs()),is.memoizedState=is.baseState=cs,cs={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:cs},is.queue=cs,cs=cs.dispatch=ii$1.bind(null,M$1,cs),[is.memoizedState,cs]}function bi$1(cs,is,us,hs){return cs={tag:cs,create:is,destroy:us,deps:hs,next:null},is=M$1.updateQueue,is===null?(is={lastEffect:null,stores:null},M$1.updateQueue=is,is.lastEffect=cs.next=cs):(us=is.lastEffect,us===null?is.lastEffect=cs.next=cs:(hs=us.next,us.next=cs,cs.next=hs,is.lastEffect=cs)),cs}function ji$1(){return Uh().memoizedState}function ki$1(cs,is,us,hs){var lo=Th();M$1.flags|=cs,lo.memoizedState=bi$1(1|is,us,void 0,hs===void 0?null:hs)}function li$1(cs,is,us,hs){var lo=Uh();hs=hs===void 0?null:hs;var co=void 0;if(N$1!==null){var uo=N$1.memoizedState;if(co=uo.destroy,hs!==null&&Mh(hs,uo.deps)){lo.memoizedState=bi$1(is,us,co,hs);return}}M$1.flags|=cs,lo.memoizedState=bi$1(1|is,us,co,hs)}function mi$1(cs,is){return ki$1(8390656,8,cs,is)}function $h(cs,is){return li$1(2048,8,cs,is)}function ni$1(cs,is){return li$1(4,2,cs,is)}function oi$1(cs,is){return li$1(4,4,cs,is)}function pi$1(cs,is){if(typeof is=="function")return cs=cs(),is(cs),function(){is(null)};if(is!=null)return cs=cs(),is.current=cs,function(){is.current=null}}function qi$1(cs,is,us){return us=us!=null?us.concat([cs]):null,li$1(4,4,pi$1.bind(null,is,cs),us)}function ri$1(){}function si$1(cs,is){var us=Uh();is=is===void 0?null:is;var hs=us.memoizedState;return hs!==null&&is!==null&&Mh(is,hs[1])?hs[0]:(us.memoizedState=[cs,is],cs)}function ti$1(cs,is){var us=Uh();is=is===void 0?null:is;var hs=us.memoizedState;return hs!==null&&is!==null&&Mh(is,hs[1])?hs[0]:(cs=cs(),us.memoizedState=[cs,is],cs)}function ui$1(cs,is,us){return Hh&21?(He$1(us,is)||(us=yc(),M$1.lanes|=us,rh|=us,cs.baseState=!0),is):(cs.baseState&&(cs.baseState=!1,dh$1=!0),cs.memoizedState=us)}function vi$1(cs,is){var us=C$1;C$1=us!==0&&4>us?us:4,cs(!0);var hs=Gh.transition;Gh.transition={};try{cs(!1),is()}finally{C$1=us,Gh.transition=hs}}function wi$1(){return Uh().memoizedState}function xi$1(cs,is,us){var hs=yi$1(cs);if(us={lane:hs,action:us,hasEagerState:!1,eagerState:null,next:null},zi$1(cs))Ai$1(is,us);else if(us=hh$1(cs,is,us,hs),us!==null){var lo=R$1();gi$1(us,cs,hs,lo),Bi$1(us,is,hs)}}function ii$1(cs,is,us){var hs=yi$1(cs),lo={lane:hs,action:us,hasEagerState:!1,eagerState:null,next:null};if(zi$1(cs))Ai$1(is,lo);else{var co=cs.alternate;if(cs.lanes===0&&(co===null||co.lanes===0)&&(co=is.lastRenderedReducer,co!==null))try{var uo=is.lastRenderedState,ga=co(uo,us);if(lo.hasEagerState=!0,lo.eagerState=ga,He$1(ga,uo)){var ba=is.interleaved;ba===null?(lo.next=lo,gh$1(is)):(lo.next=ba.next,ba.next=lo),is.interleaved=lo;return}}catch{}finally{}us=hh$1(cs,is,lo,hs),us!==null&&(lo=R$1(),gi$1(us,cs,hs,lo),Bi$1(us,is,hs))}}function zi$1(cs){var is=cs.alternate;return cs===M$1||is!==null&&is===M$1}function Ai$1(cs,is){Jh=Ih=!0;var us=cs.pending;us===null?is.next=is:(is.next=us.next,us.next=is),cs.pending=is}function Bi$1(cs,is,us){if(us&4194240){var hs=is.lanes;hs&=cs.pendingLanes,us|=hs,is.lanes=us,Cc(cs,us)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(cs,is){return Th().memoizedState=[cs,is===void 0?null:is],cs},useContext:eh,useEffect:mi$1,useImperativeHandle:function(cs,is,us){return us=us!=null?us.concat([cs]):null,ki$1(4194308,4,pi$1.bind(null,is,cs),us)},useLayoutEffect:function(cs,is){return ki$1(4194308,4,cs,is)},useInsertionEffect:function(cs,is){return ki$1(4,2,cs,is)},useMemo:function(cs,is){var us=Th();return is=is===void 0?null:is,cs=cs(),us.memoizedState=[cs,is],cs},useReducer:function(cs,is,us){var hs=Th();return is=us!==void 0?us(is):is,hs.memoizedState=hs.baseState=is,cs={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:is},hs.queue=cs,cs=cs.dispatch=xi$1.bind(null,M$1,cs),[hs.memoizedState,cs]},useRef:function(cs){var is=Th();return cs={current:cs},is.memoizedState=cs},useState:hi$1,useDebugValue:ri$1,useDeferredValue:function(cs){return Th().memoizedState=cs},useTransition:function(){var cs=hi$1(!1),is=cs[0];return cs=vi$1.bind(null,cs[1]),Th().memoizedState=cs,[is,cs]},useMutableSource:function(){},useSyncExternalStore:function(cs,is,us){var hs=M$1,lo=Th();if(I$1){if(us===void 0)throw Error(p$1(407));us=us()}else{if(us=is(),Q$1===null)throw Error(p$1(349));Hh&30||di$1(hs,is,us)}lo.memoizedState=us;var co={value:us,getSnapshot:is};return lo.queue=co,mi$1(ai$1.bind(null,hs,co,cs),[cs]),hs.flags|=2048,bi$1(9,ci$1.bind(null,hs,co,us,is),void 0,null),us},useId:function(){var cs=Th(),is=Q$1.identifierPrefix;if(I$1){var us=sg,hs=rg;us=(hs&~(1<<32-oc(hs)-1)).toString(32)+us,is=":"+is+"R"+us,us=Kh++,0<us&&(is+="H"+us.toString(32)),is+=":"}else us=Lh++,is=":"+is+"r"+us.toString(32)+":";return cs.memoizedState=is},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si$1,useContext:eh,useEffect:$h,useImperativeHandle:qi$1,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Wh,useRef:ji$1,useState:function(){return Wh(Vh)},useDebugValue:ri$1,useDeferredValue:function(cs){var is=Uh();return ui$1(is,N$1.memoizedState,cs)},useTransition:function(){var cs=Wh(Vh)[0],is=Uh().memoizedState;return[cs,is]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi$1,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si$1,useContext:eh,useEffect:$h,useImperativeHandle:qi$1,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Xh,useRef:ji$1,useState:function(){return Xh(Vh)},useDebugValue:ri$1,useDeferredValue:function(cs){var is=Uh();return N$1===null?is.memoizedState=cs:ui$1(is,N$1.memoizedState,cs)},useTransition:function(){var cs=Xh(Vh)[0],is=Uh().memoizedState;return[cs,is]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi$1,unstable_isNewReconciler:!1};function Ci$1(cs,is){if(cs&&cs.defaultProps){is=A$1({},is),cs=cs.defaultProps;for(var us in cs)is[us]===void 0&&(is[us]=cs[us]);return is}return is}function Di$1(cs,is,us,hs){is=cs.memoizedState,us=us(hs,is),us=us==null?is:A$1({},is,us),cs.memoizedState=us,cs.lanes===0&&(cs.updateQueue.baseState=us)}var Ei$1={isMounted:function(cs){return(cs=cs._reactInternals)?Vb(cs)===cs:!1},enqueueSetState:function(cs,is,us){cs=cs._reactInternals;var hs=R$1(),lo=yi$1(cs),co=mh$1(hs,lo);co.payload=is,us!=null&&(co.callback=us),is=nh$1(cs,co,lo),is!==null&&(gi$1(is,cs,lo,hs),oh$1(is,cs,lo))},enqueueReplaceState:function(cs,is,us){cs=cs._reactInternals;var hs=R$1(),lo=yi$1(cs),co=mh$1(hs,lo);co.tag=1,co.payload=is,us!=null&&(co.callback=us),is=nh$1(cs,co,lo),is!==null&&(gi$1(is,cs,lo,hs),oh$1(is,cs,lo))},enqueueForceUpdate:function(cs,is){cs=cs._reactInternals;var us=R$1(),hs=yi$1(cs),lo=mh$1(us,hs);lo.tag=2,is!=null&&(lo.callback=is),is=nh$1(cs,lo,hs),is!==null&&(gi$1(is,cs,hs,us),oh$1(is,cs,hs))}};function Fi$1(cs,is,us,hs,lo,co,uo){return cs=cs.stateNode,typeof cs.shouldComponentUpdate=="function"?cs.shouldComponentUpdate(hs,co,uo):is.prototype&&is.prototype.isPureReactComponent?!Ie$1(us,hs)||!Ie$1(lo,co):!0}function Gi$1(cs,is,us){var hs=!1,lo=Vf,co=is.contextType;return typeof co=="object"&&co!==null?co=eh(co):(lo=Zf(is)?Xf:H$1.current,hs=is.contextTypes,co=(hs=hs!=null)?Yf(cs,lo):Vf),is=new is(us,co),cs.memoizedState=is.state!==null&&is.state!==void 0?is.state:null,is.updater=Ei$1,cs.stateNode=is,is._reactInternals=cs,hs&&(cs=cs.stateNode,cs.__reactInternalMemoizedUnmaskedChildContext=lo,cs.__reactInternalMemoizedMaskedChildContext=co),is}function Hi$1(cs,is,us,hs){cs=is.state,typeof is.componentWillReceiveProps=="function"&&is.componentWillReceiveProps(us,hs),typeof is.UNSAFE_componentWillReceiveProps=="function"&&is.UNSAFE_componentWillReceiveProps(us,hs),is.state!==cs&&Ei$1.enqueueReplaceState(is,is.state,null)}function Ii$1(cs,is,us,hs){var lo=cs.stateNode;lo.props=us,lo.state=cs.memoizedState,lo.refs={},kh(cs);var co=is.contextType;typeof co=="object"&&co!==null?lo.context=eh(co):(co=Zf(is)?Xf:H$1.current,lo.context=Yf(cs,co)),lo.state=cs.memoizedState,co=is.getDerivedStateFromProps,typeof co=="function"&&(Di$1(cs,is,co,us),lo.state=cs.memoizedState),typeof is.getDerivedStateFromProps=="function"||typeof lo.getSnapshotBeforeUpdate=="function"||typeof lo.UNSAFE_componentWillMount!="function"&&typeof lo.componentWillMount!="function"||(is=lo.state,typeof lo.componentWillMount=="function"&&lo.componentWillMount(),typeof lo.UNSAFE_componentWillMount=="function"&&lo.UNSAFE_componentWillMount(),is!==lo.state&&Ei$1.enqueueReplaceState(lo,lo.state,null),qh(cs,us,lo,hs),lo.state=cs.memoizedState),typeof lo.componentDidMount=="function"&&(cs.flags|=4194308)}function Ji$1(cs,is){try{var us="",hs=is;do us+=Pa(hs),hs=hs.return;while(hs);var lo=us}catch(co){lo=`
Error generating stack: `+co.message+`
`+co.stack}return{value:cs,source:is,stack:lo,digest:null}}function Ki$1(cs,is,us){return{value:cs,source:null,stack:us??null,digest:is??null}}function Li$1(cs,is){try{console.error(is.value)}catch(us){setTimeout(function(){throw us})}}var Mi$1=typeof WeakMap=="function"?WeakMap:Map;function Ni$1(cs,is,us){us=mh$1(-1,us),us.tag=3,us.payload={element:null};var hs=is.value;return us.callback=function(){Oi$1||(Oi$1=!0,Pi$1=hs),Li$1(cs,is)},us}function Qi$1(cs,is,us){us=mh$1(-1,us),us.tag=3;var hs=cs.type.getDerivedStateFromError;if(typeof hs=="function"){var lo=is.value;us.payload=function(){return hs(lo)},us.callback=function(){Li$1(cs,is)}}var co=cs.stateNode;return co!==null&&typeof co.componentDidCatch=="function"&&(us.callback=function(){Li$1(cs,is),typeof hs!="function"&&(Ri$1===null?Ri$1=new Set([this]):Ri$1.add(this));var uo=is.stack;this.componentDidCatch(is.value,{componentStack:uo!==null?uo:""})}),us}function Si$1(cs,is,us){var hs=cs.pingCache;if(hs===null){hs=cs.pingCache=new Mi$1;var lo=new Set;hs.set(is,lo)}else lo=hs.get(is),lo===void 0&&(lo=new Set,hs.set(is,lo));lo.has(us)||(lo.add(us),cs=Ti$1.bind(null,cs,is,us),is.then(cs,cs))}function Ui$1(cs){do{var is;if((is=cs.tag===13)&&(is=cs.memoizedState,is=is!==null?is.dehydrated!==null:!0),is)return cs;cs=cs.return}while(cs!==null);return null}function Vi$1(cs,is,us,hs,lo){return cs.mode&1?(cs.flags|=65536,cs.lanes=lo,cs):(cs===is?cs.flags|=65536:(cs.flags|=128,us.flags|=131072,us.flags&=-52805,us.tag===1&&(us.alternate===null?us.tag=17:(is=mh$1(-1,1),is.tag=2,nh$1(us,is,1))),us.lanes|=1),cs)}var Wi$1=ua.ReactCurrentOwner,dh$1=!1;function Xi$1(cs,is,us,hs){is.child=cs===null?Vg(is,null,us,hs):Ug(is,cs.child,us,hs)}function Yi$1(cs,is,us,hs,lo){us=us.render;var co=is.ref;return ch$1(is,lo),hs=Nh(cs,is,us,hs,co,lo),us=Sh(),cs!==null&&!dh$1?(is.updateQueue=cs.updateQueue,is.flags&=-2053,cs.lanes&=~lo,Zi$1(cs,is,lo)):(I$1&&us&&vg(is),is.flags|=1,Xi$1(cs,is,hs,lo),is.child)}function $i$1(cs,is,us,hs,lo){if(cs===null){var co=us.type;return typeof co=="function"&&!aj(co)&&co.defaultProps===void 0&&us.compare===null&&us.defaultProps===void 0?(is.tag=15,is.type=co,bj(cs,is,co,hs,lo)):(cs=Rg(us.type,null,hs,is,is.mode,lo),cs.ref=is.ref,cs.return=is,is.child=cs)}if(co=cs.child,!(cs.lanes&lo)){var uo=co.memoizedProps;if(us=us.compare,us=us!==null?us:Ie$1,us(uo,hs)&&cs.ref===is.ref)return Zi$1(cs,is,lo)}return is.flags|=1,cs=Pg(co,hs),cs.ref=is.ref,cs.return=is,is.child=cs}function bj(cs,is,us,hs,lo){if(cs!==null){var co=cs.memoizedProps;if(Ie$1(co,hs)&&cs.ref===is.ref)if(dh$1=!1,is.pendingProps=hs=co,(cs.lanes&lo)!==0)cs.flags&131072&&(dh$1=!0);else return is.lanes=cs.lanes,Zi$1(cs,is,lo)}return cj(cs,is,us,hs,lo)}function dj(cs,is,us){var hs=is.pendingProps,lo=hs.children,co=cs!==null?cs.memoizedState:null;if(hs.mode==="hidden")if(!(is.mode&1))is.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=us;else{if(!(us&1073741824))return cs=co!==null?co.baseLanes|us:us,is.lanes=is.childLanes=1073741824,is.memoizedState={baseLanes:cs,cachePool:null,transitions:null},is.updateQueue=null,G$1(ej,fj),fj|=cs,null;is.memoizedState={baseLanes:0,cachePool:null,transitions:null},hs=co!==null?co.baseLanes:us,G$1(ej,fj),fj|=hs}else co!==null?(hs=co.baseLanes|us,is.memoizedState=null):hs=us,G$1(ej,fj),fj|=hs;return Xi$1(cs,is,lo,us),is.child}function gj(cs,is){var us=is.ref;(cs===null&&us!==null||cs!==null&&cs.ref!==us)&&(is.flags|=512,is.flags|=2097152)}function cj(cs,is,us,hs,lo){var co=Zf(us)?Xf:H$1.current;return co=Yf(is,co),ch$1(is,lo),us=Nh(cs,is,us,hs,co,lo),hs=Sh(),cs!==null&&!dh$1?(is.updateQueue=cs.updateQueue,is.flags&=-2053,cs.lanes&=~lo,Zi$1(cs,is,lo)):(I$1&&hs&&vg(is),is.flags|=1,Xi$1(cs,is,us,lo),is.child)}function hj(cs,is,us,hs,lo){if(Zf(us)){var co=!0;cg(is)}else co=!1;if(ch$1(is,lo),is.stateNode===null)ij(cs,is),Gi$1(is,us,hs),Ii$1(is,us,hs,lo),hs=!0;else if(cs===null){var uo=is.stateNode,ga=is.memoizedProps;uo.props=ga;var ba=uo.context,xa=us.contextType;typeof xa=="object"&&xa!==null?xa=eh(xa):(xa=Zf(us)?Xf:H$1.current,xa=Yf(is,xa));var _a=us.getDerivedStateFromProps,$a=typeof _a=="function"||typeof uo.getSnapshotBeforeUpdate=="function";$a||typeof uo.UNSAFE_componentWillReceiveProps!="function"&&typeof uo.componentWillReceiveProps!="function"||(ga!==hs||ba!==xa)&&Hi$1(is,uo,hs,xa),jh=!1;var xl=is.memoizedState;uo.state=xl,qh(is,hs,uo,lo),ba=is.memoizedState,ga!==hs||xl!==ba||Wf.current||jh?(typeof _a=="function"&&(Di$1(is,us,_a,hs),ba=is.memoizedState),(ga=jh||Fi$1(is,us,ga,hs,xl,ba,xa))?($a||typeof uo.UNSAFE_componentWillMount!="function"&&typeof uo.componentWillMount!="function"||(typeof uo.componentWillMount=="function"&&uo.componentWillMount(),typeof uo.UNSAFE_componentWillMount=="function"&&uo.UNSAFE_componentWillMount()),typeof uo.componentDidMount=="function"&&(is.flags|=4194308)):(typeof uo.componentDidMount=="function"&&(is.flags|=4194308),is.memoizedProps=hs,is.memoizedState=ba),uo.props=hs,uo.state=ba,uo.context=xa,hs=ga):(typeof uo.componentDidMount=="function"&&(is.flags|=4194308),hs=!1)}else{uo=is.stateNode,lh$1(cs,is),ga=is.memoizedProps,xa=is.type===is.elementType?ga:Ci$1(is.type,ga),uo.props=xa,$a=is.pendingProps,xl=uo.context,ba=us.contextType,typeof ba=="object"&&ba!==null?ba=eh(ba):(ba=Zf(us)?Xf:H$1.current,ba=Yf(is,ba));var yl=us.getDerivedStateFromProps;(_a=typeof yl=="function"||typeof uo.getSnapshotBeforeUpdate=="function")||typeof uo.UNSAFE_componentWillReceiveProps!="function"&&typeof uo.componentWillReceiveProps!="function"||(ga!==$a||xl!==ba)&&Hi$1(is,uo,hs,ba),jh=!1,xl=is.memoizedState,uo.state=xl,qh(is,hs,uo,lo);var wl=is.memoizedState;ga!==$a||xl!==wl||Wf.current||jh?(typeof yl=="function"&&(Di$1(is,us,yl,hs),wl=is.memoizedState),(xa=jh||Fi$1(is,us,xa,hs,xl,wl,ba)||!1)?(_a||typeof uo.UNSAFE_componentWillUpdate!="function"&&typeof uo.componentWillUpdate!="function"||(typeof uo.componentWillUpdate=="function"&&uo.componentWillUpdate(hs,wl,ba),typeof uo.UNSAFE_componentWillUpdate=="function"&&uo.UNSAFE_componentWillUpdate(hs,wl,ba)),typeof uo.componentDidUpdate=="function"&&(is.flags|=4),typeof uo.getSnapshotBeforeUpdate=="function"&&(is.flags|=1024)):(typeof uo.componentDidUpdate!="function"||ga===cs.memoizedProps&&xl===cs.memoizedState||(is.flags|=4),typeof uo.getSnapshotBeforeUpdate!="function"||ga===cs.memoizedProps&&xl===cs.memoizedState||(is.flags|=1024),is.memoizedProps=hs,is.memoizedState=wl),uo.props=hs,uo.state=wl,uo.context=ba,hs=xa):(typeof uo.componentDidUpdate!="function"||ga===cs.memoizedProps&&xl===cs.memoizedState||(is.flags|=4),typeof uo.getSnapshotBeforeUpdate!="function"||ga===cs.memoizedProps&&xl===cs.memoizedState||(is.flags|=1024),hs=!1)}return jj(cs,is,us,hs,co,lo)}function jj(cs,is,us,hs,lo,co){gj(cs,is);var uo=(is.flags&128)!==0;if(!hs&&!uo)return lo&&dg(is,us,!1),Zi$1(cs,is,co);hs=is.stateNode,Wi$1.current=is;var ga=uo&&typeof us.getDerivedStateFromError!="function"?null:hs.render();return is.flags|=1,cs!==null&&uo?(is.child=Ug(is,cs.child,null,co),is.child=Ug(is,null,ga,co)):Xi$1(cs,is,ga,co),is.memoizedState=hs.state,lo&&dg(is,us,!0),is.child}function kj(cs){var is=cs.stateNode;is.pendingContext?ag(cs,is.pendingContext,is.pendingContext!==is.context):is.context&&ag(cs,is.context,!1),yh$1(cs,is.containerInfo)}function lj(cs,is,us,hs,lo){return Ig(),Jg(lo),is.flags|=256,Xi$1(cs,is,us,hs),is.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(cs){return{baseLanes:cs,cachePool:null,transitions:null}}function oj(cs,is,us){var hs=is.pendingProps,lo=L$1.current,co=!1,uo=(is.flags&128)!==0,ga;if((ga=uo)||(ga=cs!==null&&cs.memoizedState===null?!1:(lo&2)!==0),ga?(co=!0,is.flags&=-129):(cs===null||cs.memoizedState!==null)&&(lo|=1),G$1(L$1,lo&1),cs===null)return Eg(is),cs=is.memoizedState,cs!==null&&(cs=cs.dehydrated,cs!==null)?(is.mode&1?cs.data==="$!"?is.lanes=8:is.lanes=1073741824:is.lanes=1,null):(uo=hs.children,cs=hs.fallback,co?(hs=is.mode,co=is.child,uo={mode:"hidden",children:uo},!(hs&1)&&co!==null?(co.childLanes=0,co.pendingProps=uo):co=pj(uo,hs,0,null),cs=Tg(cs,hs,us,null),co.return=is,cs.return=is,co.sibling=cs,is.child=co,is.child.memoizedState=nj(us),is.memoizedState=mj,cs):qj(is,uo));if(lo=cs.memoizedState,lo!==null&&(ga=lo.dehydrated,ga!==null))return rj(cs,is,uo,hs,ga,lo,us);if(co){co=hs.fallback,uo=is.mode,lo=cs.child,ga=lo.sibling;var ba={mode:"hidden",children:hs.children};return!(uo&1)&&is.child!==lo?(hs=is.child,hs.childLanes=0,hs.pendingProps=ba,is.deletions=null):(hs=Pg(lo,ba),hs.subtreeFlags=lo.subtreeFlags&14680064),ga!==null?co=Pg(ga,co):(co=Tg(co,uo,us,null),co.flags|=2),co.return=is,hs.return=is,hs.sibling=co,is.child=hs,hs=co,co=is.child,uo=cs.child.memoizedState,uo=uo===null?nj(us):{baseLanes:uo.baseLanes|us,cachePool:null,transitions:uo.transitions},co.memoizedState=uo,co.childLanes=cs.childLanes&~us,is.memoizedState=mj,hs}return co=cs.child,cs=co.sibling,hs=Pg(co,{mode:"visible",children:hs.children}),!(is.mode&1)&&(hs.lanes=us),hs.return=is,hs.sibling=null,cs!==null&&(us=is.deletions,us===null?(is.deletions=[cs],is.flags|=16):us.push(cs)),is.child=hs,is.memoizedState=null,hs}function qj(cs,is){return is=pj({mode:"visible",children:is},cs.mode,0,null),is.return=cs,cs.child=is}function sj(cs,is,us,hs){return hs!==null&&Jg(hs),Ug(is,cs.child,null,us),cs=qj(is,is.pendingProps.children),cs.flags|=2,is.memoizedState=null,cs}function rj(cs,is,us,hs,lo,co,uo){if(us)return is.flags&256?(is.flags&=-257,hs=Ki$1(Error(p$1(422))),sj(cs,is,uo,hs)):is.memoizedState!==null?(is.child=cs.child,is.flags|=128,null):(co=hs.fallback,lo=is.mode,hs=pj({mode:"visible",children:hs.children},lo,0,null),co=Tg(co,lo,uo,null),co.flags|=2,hs.return=is,co.return=is,hs.sibling=co,is.child=hs,is.mode&1&&Ug(is,cs.child,null,uo),is.child.memoizedState=nj(uo),is.memoizedState=mj,co);if(!(is.mode&1))return sj(cs,is,uo,null);if(lo.data==="$!"){if(hs=lo.nextSibling&&lo.nextSibling.dataset,hs)var ga=hs.dgst;return hs=ga,co=Error(p$1(419)),hs=Ki$1(co,hs,void 0),sj(cs,is,uo,hs)}if(ga=(uo&cs.childLanes)!==0,dh$1||ga){if(hs=Q$1,hs!==null){switch(uo&-uo){case 4:lo=2;break;case 16:lo=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:lo=32;break;case 536870912:lo=268435456;break;default:lo=0}lo=lo&(hs.suspendedLanes|uo)?0:lo,lo!==0&&lo!==co.retryLane&&(co.retryLane=lo,ih(cs,lo),gi$1(hs,cs,lo,-1))}return tj(),hs=Ki$1(Error(p$1(421))),sj(cs,is,uo,hs)}return lo.data==="$?"?(is.flags|=128,is.child=cs.child,is=uj.bind(null,cs),lo._reactRetry=is,null):(cs=co.treeContext,yg=Lf(lo.nextSibling),xg=is,I$1=!0,zg=null,cs!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=cs.id,sg=cs.overflow,qg=is),is=qj(is,hs.children),is.flags|=4096,is)}function vj(cs,is,us){cs.lanes|=is;var hs=cs.alternate;hs!==null&&(hs.lanes|=is),bh(cs.return,is,us)}function wj(cs,is,us,hs,lo){var co=cs.memoizedState;co===null?cs.memoizedState={isBackwards:is,rendering:null,renderingStartTime:0,last:hs,tail:us,tailMode:lo}:(co.isBackwards=is,co.rendering=null,co.renderingStartTime=0,co.last=hs,co.tail=us,co.tailMode=lo)}function xj(cs,is,us){var hs=is.pendingProps,lo=hs.revealOrder,co=hs.tail;if(Xi$1(cs,is,hs.children,us),hs=L$1.current,hs&2)hs=hs&1|2,is.flags|=128;else{if(cs!==null&&cs.flags&128)e:for(cs=is.child;cs!==null;){if(cs.tag===13)cs.memoizedState!==null&&vj(cs,us,is);else if(cs.tag===19)vj(cs,us,is);else if(cs.child!==null){cs.child.return=cs,cs=cs.child;continue}if(cs===is)break e;for(;cs.sibling===null;){if(cs.return===null||cs.return===is)break e;cs=cs.return}cs.sibling.return=cs.return,cs=cs.sibling}hs&=1}if(G$1(L$1,hs),!(is.mode&1))is.memoizedState=null;else switch(lo){case"forwards":for(us=is.child,lo=null;us!==null;)cs=us.alternate,cs!==null&&Ch$1(cs)===null&&(lo=us),us=us.sibling;us=lo,us===null?(lo=is.child,is.child=null):(lo=us.sibling,us.sibling=null),wj(is,!1,lo,us,co);break;case"backwards":for(us=null,lo=is.child,is.child=null;lo!==null;){if(cs=lo.alternate,cs!==null&&Ch$1(cs)===null){is.child=lo;break}cs=lo.sibling,lo.sibling=us,us=lo,lo=cs}wj(is,!0,us,null,co);break;case"together":wj(is,!1,null,null,void 0);break;default:is.memoizedState=null}return is.child}function ij(cs,is){!(is.mode&1)&&cs!==null&&(cs.alternate=null,is.alternate=null,is.flags|=2)}function Zi$1(cs,is,us){if(cs!==null&&(is.dependencies=cs.dependencies),rh|=is.lanes,!(us&is.childLanes))return null;if(cs!==null&&is.child!==cs.child)throw Error(p$1(153));if(is.child!==null){for(cs=is.child,us=Pg(cs,cs.pendingProps),is.child=us,us.return=is;cs.sibling!==null;)cs=cs.sibling,us=us.sibling=Pg(cs,cs.pendingProps),us.return=is;us.sibling=null}return is.child}function yj(cs,is,us){switch(is.tag){case 3:kj(is),Ig();break;case 5:Ah(is);break;case 1:Zf(is.type)&&cg(is);break;case 4:yh$1(is,is.stateNode.containerInfo);break;case 10:var hs=is.type._context,lo=is.memoizedProps.value;G$1(Wg,hs._currentValue),hs._currentValue=lo;break;case 13:if(hs=is.memoizedState,hs!==null)return hs.dehydrated!==null?(G$1(L$1,L$1.current&1),is.flags|=128,null):us&is.child.childLanes?oj(cs,is,us):(G$1(L$1,L$1.current&1),cs=Zi$1(cs,is,us),cs!==null?cs.sibling:null);G$1(L$1,L$1.current&1);break;case 19:if(hs=(us&is.childLanes)!==0,cs.flags&128){if(hs)return xj(cs,is,us);is.flags|=128}if(lo=is.memoizedState,lo!==null&&(lo.rendering=null,lo.tail=null,lo.lastEffect=null),G$1(L$1,L$1.current),hs)break;return null;case 22:case 23:return is.lanes=0,dj(cs,is,us)}return Zi$1(cs,is,us)}var zj,Aj,Bj,Cj;zj=function(cs,is){for(var us=is.child;us!==null;){if(us.tag===5||us.tag===6)cs.appendChild(us.stateNode);else if(us.tag!==4&&us.child!==null){us.child.return=us,us=us.child;continue}if(us===is)break;for(;us.sibling===null;){if(us.return===null||us.return===is)return;us=us.return}us.sibling.return=us.return,us=us.sibling}};Aj=function(){};Bj=function(cs,is,us,hs){var lo=cs.memoizedProps;if(lo!==hs){cs=is.stateNode,xh$1(uh$1.current);var co=null;switch(us){case"input":lo=Ya$1(cs,lo),hs=Ya$1(cs,hs),co=[];break;case"select":lo=A$1({},lo,{value:void 0}),hs=A$1({},hs,{value:void 0}),co=[];break;case"textarea":lo=gb(cs,lo),hs=gb(cs,hs),co=[];break;default:typeof lo.onClick!="function"&&typeof hs.onClick=="function"&&(cs.onclick=Bf)}ub(us,hs);var uo;us=null;for(xa in lo)if(!hs.hasOwnProperty(xa)&&lo.hasOwnProperty(xa)&&lo[xa]!=null)if(xa==="style"){var ga=lo[xa];for(uo in ga)ga.hasOwnProperty(uo)&&(us||(us={}),us[uo]="")}else xa!=="dangerouslySetInnerHTML"&&xa!=="children"&&xa!=="suppressContentEditableWarning"&&xa!=="suppressHydrationWarning"&&xa!=="autoFocus"&&(ea$1.hasOwnProperty(xa)?co||(co=[]):(co=co||[]).push(xa,null));for(xa in hs){var ba=hs[xa];if(ga=lo!=null?lo[xa]:void 0,hs.hasOwnProperty(xa)&&ba!==ga&&(ba!=null||ga!=null))if(xa==="style")if(ga){for(uo in ga)!ga.hasOwnProperty(uo)||ba&&ba.hasOwnProperty(uo)||(us||(us={}),us[uo]="");for(uo in ba)ba.hasOwnProperty(uo)&&ga[uo]!==ba[uo]&&(us||(us={}),us[uo]=ba[uo])}else us||(co||(co=[]),co.push(xa,us)),us=ba;else xa==="dangerouslySetInnerHTML"?(ba=ba?ba.__html:void 0,ga=ga?ga.__html:void 0,ba!=null&&ga!==ba&&(co=co||[]).push(xa,ba)):xa==="children"?typeof ba!="string"&&typeof ba!="number"||(co=co||[]).push(xa,""+ba):xa!=="suppressContentEditableWarning"&&xa!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(xa)?(ba!=null&&xa==="onScroll"&&D$1("scroll",cs),co||ga===ba||(co=[])):(co=co||[]).push(xa,ba))}us&&(co=co||[]).push("style",us);var xa=co;(is.updateQueue=xa)&&(is.flags|=4)}};Cj=function(cs,is,us,hs){us!==hs&&(is.flags|=4)};function Dj(cs,is){if(!I$1)switch(cs.tailMode){case"hidden":is=cs.tail;for(var us=null;is!==null;)is.alternate!==null&&(us=is),is=is.sibling;us===null?cs.tail=null:us.sibling=null;break;case"collapsed":us=cs.tail;for(var hs=null;us!==null;)us.alternate!==null&&(hs=us),us=us.sibling;hs===null?is||cs.tail===null?cs.tail=null:cs.tail.sibling=null:hs.sibling=null}}function S$1(cs){var is=cs.alternate!==null&&cs.alternate.child===cs.child,us=0,hs=0;if(is)for(var lo=cs.child;lo!==null;)us|=lo.lanes|lo.childLanes,hs|=lo.subtreeFlags&14680064,hs|=lo.flags&14680064,lo.return=cs,lo=lo.sibling;else for(lo=cs.child;lo!==null;)us|=lo.lanes|lo.childLanes,hs|=lo.subtreeFlags,hs|=lo.flags,lo.return=cs,lo=lo.sibling;return cs.subtreeFlags|=hs,cs.childLanes=us,is}function Ej(cs,is,us){var hs=is.pendingProps;switch(wg(is),is.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(is),null;case 1:return Zf(is.type)&&$f(),S$1(is),null;case 3:return hs=is.stateNode,zh(),E$1(Wf),E$1(H$1),Eh(),hs.pendingContext&&(hs.context=hs.pendingContext,hs.pendingContext=null),(cs===null||cs.child===null)&&(Gg(is)?is.flags|=4:cs===null||cs.memoizedState.isDehydrated&&!(is.flags&256)||(is.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(cs,is),S$1(is),null;case 5:Bh(is);var lo=xh$1(wh.current);if(us=is.type,cs!==null&&is.stateNode!=null)Bj(cs,is,us,hs,lo),cs.ref!==is.ref&&(is.flags|=512,is.flags|=2097152);else{if(!hs){if(is.stateNode===null)throw Error(p$1(166));return S$1(is),null}if(cs=xh$1(uh$1.current),Gg(is)){hs=is.stateNode,us=is.type;var co=is.memoizedProps;switch(hs[Of]=is,hs[Pf]=co,cs=(is.mode&1)!==0,us){case"dialog":D$1("cancel",hs),D$1("close",hs);break;case"iframe":case"object":case"embed":D$1("load",hs);break;case"video":case"audio":for(lo=0;lo<lf.length;lo++)D$1(lf[lo],hs);break;case"source":D$1("error",hs);break;case"img":case"image":case"link":D$1("error",hs),D$1("load",hs);break;case"details":D$1("toggle",hs);break;case"input":Za(hs,co),D$1("invalid",hs);break;case"select":hs._wrapperState={wasMultiple:!!co.multiple},D$1("invalid",hs);break;case"textarea":hb(hs,co),D$1("invalid",hs)}ub(us,co),lo=null;for(var uo in co)if(co.hasOwnProperty(uo)){var ga=co[uo];uo==="children"?typeof ga=="string"?hs.textContent!==ga&&(co.suppressHydrationWarning!==!0&&Af(hs.textContent,ga,cs),lo=["children",ga]):typeof ga=="number"&&hs.textContent!==""+ga&&(co.suppressHydrationWarning!==!0&&Af(hs.textContent,ga,cs),lo=["children",""+ga]):ea$1.hasOwnProperty(uo)&&ga!=null&&uo==="onScroll"&&D$1("scroll",hs)}switch(us){case"input":Va$1(hs),db(hs,co,!0);break;case"textarea":Va$1(hs),jb(hs);break;case"select":case"option":break;default:typeof co.onClick=="function"&&(hs.onclick=Bf)}hs=lo,is.updateQueue=hs,hs!==null&&(is.flags|=4)}else{uo=lo.nodeType===9?lo:lo.ownerDocument,cs==="http://www.w3.org/1999/xhtml"&&(cs=kb(us)),cs==="http://www.w3.org/1999/xhtml"?us==="script"?(cs=uo.createElement("div"),cs.innerHTML="<script><\/script>",cs=cs.removeChild(cs.firstChild)):typeof hs.is=="string"?cs=uo.createElement(us,{is:hs.is}):(cs=uo.createElement(us),us==="select"&&(uo=cs,hs.multiple?uo.multiple=!0:hs.size&&(uo.size=hs.size))):cs=uo.createElementNS(cs,us),cs[Of]=is,cs[Pf]=hs,zj(cs,is,!1,!1),is.stateNode=cs;e:{switch(uo=vb(us,hs),us){case"dialog":D$1("cancel",cs),D$1("close",cs),lo=hs;break;case"iframe":case"object":case"embed":D$1("load",cs),lo=hs;break;case"video":case"audio":for(lo=0;lo<lf.length;lo++)D$1(lf[lo],cs);lo=hs;break;case"source":D$1("error",cs),lo=hs;break;case"img":case"image":case"link":D$1("error",cs),D$1("load",cs),lo=hs;break;case"details":D$1("toggle",cs),lo=hs;break;case"input":Za(cs,hs),lo=Ya$1(cs,hs),D$1("invalid",cs);break;case"option":lo=hs;break;case"select":cs._wrapperState={wasMultiple:!!hs.multiple},lo=A$1({},hs,{value:void 0}),D$1("invalid",cs);break;case"textarea":hb(cs,hs),lo=gb(cs,hs),D$1("invalid",cs);break;default:lo=hs}ub(us,lo),ga=lo;for(co in ga)if(ga.hasOwnProperty(co)){var ba=ga[co];co==="style"?sb(cs,ba):co==="dangerouslySetInnerHTML"?(ba=ba?ba.__html:void 0,ba!=null&&nb(cs,ba)):co==="children"?typeof ba=="string"?(us!=="textarea"||ba!=="")&&ob(cs,ba):typeof ba=="number"&&ob(cs,""+ba):co!=="suppressContentEditableWarning"&&co!=="suppressHydrationWarning"&&co!=="autoFocus"&&(ea$1.hasOwnProperty(co)?ba!=null&&co==="onScroll"&&D$1("scroll",cs):ba!=null&&ta$1(cs,co,ba,uo))}switch(us){case"input":Va$1(cs),db(cs,hs,!1);break;case"textarea":Va$1(cs),jb(cs);break;case"option":hs.value!=null&&cs.setAttribute("value",""+Sa(hs.value));break;case"select":cs.multiple=!!hs.multiple,co=hs.value,co!=null?fb(cs,!!hs.multiple,co,!1):hs.defaultValue!=null&&fb(cs,!!hs.multiple,hs.defaultValue,!0);break;default:typeof lo.onClick=="function"&&(cs.onclick=Bf)}switch(us){case"button":case"input":case"select":case"textarea":hs=!!hs.autoFocus;break e;case"img":hs=!0;break e;default:hs=!1}}hs&&(is.flags|=4)}is.ref!==null&&(is.flags|=512,is.flags|=2097152)}return S$1(is),null;case 6:if(cs&&is.stateNode!=null)Cj(cs,is,cs.memoizedProps,hs);else{if(typeof hs!="string"&&is.stateNode===null)throw Error(p$1(166));if(us=xh$1(wh.current),xh$1(uh$1.current),Gg(is)){if(hs=is.stateNode,us=is.memoizedProps,hs[Of]=is,(co=hs.nodeValue!==us)&&(cs=xg,cs!==null))switch(cs.tag){case 3:Af(hs.nodeValue,us,(cs.mode&1)!==0);break;case 5:cs.memoizedProps.suppressHydrationWarning!==!0&&Af(hs.nodeValue,us,(cs.mode&1)!==0)}co&&(is.flags|=4)}else hs=(us.nodeType===9?us:us.ownerDocument).createTextNode(hs),hs[Of]=is,is.stateNode=hs}return S$1(is),null;case 13:if(E$1(L$1),hs=is.memoizedState,cs===null||cs.memoizedState!==null&&cs.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&is.mode&1&&!(is.flags&128))Hg(),Ig(),is.flags|=98560,co=!1;else if(co=Gg(is),hs!==null&&hs.dehydrated!==null){if(cs===null){if(!co)throw Error(p$1(318));if(co=is.memoizedState,co=co!==null?co.dehydrated:null,!co)throw Error(p$1(317));co[Of]=is}else Ig(),!(is.flags&128)&&(is.memoizedState=null),is.flags|=4;S$1(is),co=!1}else zg!==null&&(Fj(zg),zg=null),co=!0;if(!co)return is.flags&65536?is:null}return is.flags&128?(is.lanes=us,is):(hs=hs!==null,hs!==(cs!==null&&cs.memoizedState!==null)&&hs&&(is.child.flags|=8192,is.mode&1&&(cs===null||L$1.current&1?T$1===0&&(T$1=3):tj())),is.updateQueue!==null&&(is.flags|=4),S$1(is),null);case 4:return zh(),Aj(cs,is),cs===null&&sf(is.stateNode.containerInfo),S$1(is),null;case 10:return ah$1(is.type._context),S$1(is),null;case 17:return Zf(is.type)&&$f(),S$1(is),null;case 19:if(E$1(L$1),co=is.memoizedState,co===null)return S$1(is),null;if(hs=(is.flags&128)!==0,uo=co.rendering,uo===null)if(hs)Dj(co,!1);else{if(T$1!==0||cs!==null&&cs.flags&128)for(cs=is.child;cs!==null;){if(uo=Ch$1(cs),uo!==null){for(is.flags|=128,Dj(co,!1),hs=uo.updateQueue,hs!==null&&(is.updateQueue=hs,is.flags|=4),is.subtreeFlags=0,hs=us,us=is.child;us!==null;)co=us,cs=hs,co.flags&=14680066,uo=co.alternate,uo===null?(co.childLanes=0,co.lanes=cs,co.child=null,co.subtreeFlags=0,co.memoizedProps=null,co.memoizedState=null,co.updateQueue=null,co.dependencies=null,co.stateNode=null):(co.childLanes=uo.childLanes,co.lanes=uo.lanes,co.child=uo.child,co.subtreeFlags=0,co.deletions=null,co.memoizedProps=uo.memoizedProps,co.memoizedState=uo.memoizedState,co.updateQueue=uo.updateQueue,co.type=uo.type,cs=uo.dependencies,co.dependencies=cs===null?null:{lanes:cs.lanes,firstContext:cs.firstContext}),us=us.sibling;return G$1(L$1,L$1.current&1|2),is.child}cs=cs.sibling}co.tail!==null&&B$1()>Gj&&(is.flags|=128,hs=!0,Dj(co,!1),is.lanes=4194304)}else{if(!hs)if(cs=Ch$1(uo),cs!==null){if(is.flags|=128,hs=!0,us=cs.updateQueue,us!==null&&(is.updateQueue=us,is.flags|=4),Dj(co,!0),co.tail===null&&co.tailMode==="hidden"&&!uo.alternate&&!I$1)return S$1(is),null}else 2*B$1()-co.renderingStartTime>Gj&&us!==1073741824&&(is.flags|=128,hs=!0,Dj(co,!1),is.lanes=4194304);co.isBackwards?(uo.sibling=is.child,is.child=uo):(us=co.last,us!==null?us.sibling=uo:is.child=uo,co.last=uo)}return co.tail!==null?(is=co.tail,co.rendering=is,co.tail=is.sibling,co.renderingStartTime=B$1(),is.sibling=null,us=L$1.current,G$1(L$1,hs?us&1|2:us&1),is):(S$1(is),null);case 22:case 23:return Hj(),hs=is.memoizedState!==null,cs!==null&&cs.memoizedState!==null!==hs&&(is.flags|=8192),hs&&is.mode&1?fj&1073741824&&(S$1(is),is.subtreeFlags&6&&(is.flags|=8192)):S$1(is),null;case 24:return null;case 25:return null}throw Error(p$1(156,is.tag))}function Ij(cs,is){switch(wg(is),is.tag){case 1:return Zf(is.type)&&$f(),cs=is.flags,cs&65536?(is.flags=cs&-65537|128,is):null;case 3:return zh(),E$1(Wf),E$1(H$1),Eh(),cs=is.flags,cs&65536&&!(cs&128)?(is.flags=cs&-65537|128,is):null;case 5:return Bh(is),null;case 13:if(E$1(L$1),cs=is.memoizedState,cs!==null&&cs.dehydrated!==null){if(is.alternate===null)throw Error(p$1(340));Ig()}return cs=is.flags,cs&65536?(is.flags=cs&-65537|128,is):null;case 19:return E$1(L$1),null;case 4:return zh(),null;case 10:return ah$1(is.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(cs,is){var us=cs.ref;if(us!==null)if(typeof us=="function")try{us(null)}catch(hs){W$1(cs,is,hs)}else us.current=null}function Mj(cs,is,us){try{us()}catch(hs){W$1(cs,is,hs)}}var Nj=!1;function Oj(cs,is){if(Cf=dd,cs=Me$1(),Ne$1(cs)){if("selectionStart"in cs)var us={start:cs.selectionStart,end:cs.selectionEnd};else e:{us=(us=cs.ownerDocument)&&us.defaultView||window;var hs=us.getSelection&&us.getSelection();if(hs&&hs.rangeCount!==0){us=hs.anchorNode;var lo=hs.anchorOffset,co=hs.focusNode;hs=hs.focusOffset;try{us.nodeType,co.nodeType}catch{us=null;break e}var uo=0,ga=-1,ba=-1,xa=0,_a=0,$a=cs,xl=null;t:for(;;){for(var yl;$a!==us||lo!==0&&$a.nodeType!==3||(ga=uo+lo),$a!==co||hs!==0&&$a.nodeType!==3||(ba=uo+hs),$a.nodeType===3&&(uo+=$a.nodeValue.length),(yl=$a.firstChild)!==null;)xl=$a,$a=yl;for(;;){if($a===cs)break t;if(xl===us&&++xa===lo&&(ga=uo),xl===co&&++_a===hs&&(ba=uo),(yl=$a.nextSibling)!==null)break;$a=xl,xl=$a.parentNode}$a=yl}us=ga===-1||ba===-1?null:{start:ga,end:ba}}else us=null}us=us||{start:0,end:0}}else us=null;for(Df={focusedElem:cs,selectionRange:us},dd=!1,V$1=is;V$1!==null;)if(is=V$1,cs=is.child,(is.subtreeFlags&1028)!==0&&cs!==null)cs.return=is,V$1=cs;else for(;V$1!==null;){is=V$1;try{var wl=is.alternate;if(is.flags&1024)switch(is.tag){case 0:case 11:case 15:break;case 1:if(wl!==null){var _l=wl.memoizedProps,El=wl.memoizedState,Sl=is.stateNode,Cl=Sl.getSnapshotBeforeUpdate(is.elementType===is.type?_l:Ci$1(is.type,_l),El);Sl.__reactInternalSnapshotBeforeUpdate=Cl}break;case 3:var Tl=is.stateNode.containerInfo;Tl.nodeType===1?Tl.textContent="":Tl.nodeType===9&&Tl.documentElement&&Tl.removeChild(Tl.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(Dl){W$1(is,is.return,Dl)}if(cs=is.sibling,cs!==null){cs.return=is.return,V$1=cs;break}V$1=is.return}return wl=Nj,Nj=!1,wl}function Pj(cs,is,us){var hs=is.updateQueue;if(hs=hs!==null?hs.lastEffect:null,hs!==null){var lo=hs=hs.next;do{if((lo.tag&cs)===cs){var co=lo.destroy;lo.destroy=void 0,co!==void 0&&Mj(is,us,co)}lo=lo.next}while(lo!==hs)}}function Qj(cs,is){if(is=is.updateQueue,is=is!==null?is.lastEffect:null,is!==null){var us=is=is.next;do{if((us.tag&cs)===cs){var hs=us.create;us.destroy=hs()}us=us.next}while(us!==is)}}function Rj(cs){var is=cs.ref;if(is!==null){var us=cs.stateNode;switch(cs.tag){case 5:cs=us;break;default:cs=us}typeof is=="function"?is(cs):is.current=cs}}function Sj(cs){var is=cs.alternate;is!==null&&(cs.alternate=null,Sj(is)),cs.child=null,cs.deletions=null,cs.sibling=null,cs.tag===5&&(is=cs.stateNode,is!==null&&(delete is[Of],delete is[Pf],delete is[of],delete is[Qf],delete is[Rf])),cs.stateNode=null,cs.return=null,cs.dependencies=null,cs.memoizedProps=null,cs.memoizedState=null,cs.pendingProps=null,cs.stateNode=null,cs.updateQueue=null}function Tj(cs){return cs.tag===5||cs.tag===3||cs.tag===4}function Uj(cs){e:for(;;){for(;cs.sibling===null;){if(cs.return===null||Tj(cs.return))return null;cs=cs.return}for(cs.sibling.return=cs.return,cs=cs.sibling;cs.tag!==5&&cs.tag!==6&&cs.tag!==18;){if(cs.flags&2||cs.child===null||cs.tag===4)continue e;cs.child.return=cs,cs=cs.child}if(!(cs.flags&2))return cs.stateNode}}function Vj(cs,is,us){var hs=cs.tag;if(hs===5||hs===6)cs=cs.stateNode,is?us.nodeType===8?us.parentNode.insertBefore(cs,is):us.insertBefore(cs,is):(us.nodeType===8?(is=us.parentNode,is.insertBefore(cs,us)):(is=us,is.appendChild(cs)),us=us._reactRootContainer,us!=null||is.onclick!==null||(is.onclick=Bf));else if(hs!==4&&(cs=cs.child,cs!==null))for(Vj(cs,is,us),cs=cs.sibling;cs!==null;)Vj(cs,is,us),cs=cs.sibling}function Wj(cs,is,us){var hs=cs.tag;if(hs===5||hs===6)cs=cs.stateNode,is?us.insertBefore(cs,is):us.appendChild(cs);else if(hs!==4&&(cs=cs.child,cs!==null))for(Wj(cs,is,us),cs=cs.sibling;cs!==null;)Wj(cs,is,us),cs=cs.sibling}var X$1=null,Xj=!1;function Yj(cs,is,us){for(us=us.child;us!==null;)Zj(cs,is,us),us=us.sibling}function Zj(cs,is,us){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,us)}catch{}switch(us.tag){case 5:U$1||Lj(us,is);case 6:var hs=X$1,lo=Xj;X$1=null,Yj(cs,is,us),X$1=hs,Xj=lo,X$1!==null&&(Xj?(cs=X$1,us=us.stateNode,cs.nodeType===8?cs.parentNode.removeChild(us):cs.removeChild(us)):X$1.removeChild(us.stateNode));break;case 18:X$1!==null&&(Xj?(cs=X$1,us=us.stateNode,cs.nodeType===8?Kf(cs.parentNode,us):cs.nodeType===1&&Kf(cs,us),bd(cs)):Kf(X$1,us.stateNode));break;case 4:hs=X$1,lo=Xj,X$1=us.stateNode.containerInfo,Xj=!0,Yj(cs,is,us),X$1=hs,Xj=lo;break;case 0:case 11:case 14:case 15:if(!U$1&&(hs=us.updateQueue,hs!==null&&(hs=hs.lastEffect,hs!==null))){lo=hs=hs.next;do{var co=lo,uo=co.destroy;co=co.tag,uo!==void 0&&(co&2||co&4)&&Mj(us,is,uo),lo=lo.next}while(lo!==hs)}Yj(cs,is,us);break;case 1:if(!U$1&&(Lj(us,is),hs=us.stateNode,typeof hs.componentWillUnmount=="function"))try{hs.props=us.memoizedProps,hs.state=us.memoizedState,hs.componentWillUnmount()}catch(ga){W$1(us,is,ga)}Yj(cs,is,us);break;case 21:Yj(cs,is,us);break;case 22:us.mode&1?(U$1=(hs=U$1)||us.memoizedState!==null,Yj(cs,is,us),U$1=hs):Yj(cs,is,us);break;default:Yj(cs,is,us)}}function ak(cs){var is=cs.updateQueue;if(is!==null){cs.updateQueue=null;var us=cs.stateNode;us===null&&(us=cs.stateNode=new Kj),is.forEach(function(hs){var lo=bk.bind(null,cs,hs);us.has(hs)||(us.add(hs),hs.then(lo,lo))})}}function ck(cs,is){var us=is.deletions;if(us!==null)for(var hs=0;hs<us.length;hs++){var lo=us[hs];try{var co=cs,uo=is,ga=uo;e:for(;ga!==null;){switch(ga.tag){case 5:X$1=ga.stateNode,Xj=!1;break e;case 3:X$1=ga.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=ga.stateNode.containerInfo,Xj=!0;break e}ga=ga.return}if(X$1===null)throw Error(p$1(160));Zj(co,uo,lo),X$1=null,Xj=!1;var ba=lo.alternate;ba!==null&&(ba.return=null),lo.return=null}catch(xa){W$1(lo,is,xa)}}if(is.subtreeFlags&12854)for(is=is.child;is!==null;)dk(is,cs),is=is.sibling}function dk(cs,is){var us=cs.alternate,hs=cs.flags;switch(cs.tag){case 0:case 11:case 14:case 15:if(ck(is,cs),ek(cs),hs&4){try{Pj(3,cs,cs.return),Qj(3,cs)}catch(_l){W$1(cs,cs.return,_l)}try{Pj(5,cs,cs.return)}catch(_l){W$1(cs,cs.return,_l)}}break;case 1:ck(is,cs),ek(cs),hs&512&&us!==null&&Lj(us,us.return);break;case 5:if(ck(is,cs),ek(cs),hs&512&&us!==null&&Lj(us,us.return),cs.flags&32){var lo=cs.stateNode;try{ob(lo,"")}catch(_l){W$1(cs,cs.return,_l)}}if(hs&4&&(lo=cs.stateNode,lo!=null)){var co=cs.memoizedProps,uo=us!==null?us.memoizedProps:co,ga=cs.type,ba=cs.updateQueue;if(cs.updateQueue=null,ba!==null)try{ga==="input"&&co.type==="radio"&&co.name!=null&&ab(lo,co),vb(ga,uo);var xa=vb(ga,co);for(uo=0;uo<ba.length;uo+=2){var _a=ba[uo],$a=ba[uo+1];_a==="style"?sb(lo,$a):_a==="dangerouslySetInnerHTML"?nb(lo,$a):_a==="children"?ob(lo,$a):ta$1(lo,_a,$a,xa)}switch(ga){case"input":bb(lo,co);break;case"textarea":ib(lo,co);break;case"select":var xl=lo._wrapperState.wasMultiple;lo._wrapperState.wasMultiple=!!co.multiple;var yl=co.value;yl!=null?fb(lo,!!co.multiple,yl,!1):xl!==!!co.multiple&&(co.defaultValue!=null?fb(lo,!!co.multiple,co.defaultValue,!0):fb(lo,!!co.multiple,co.multiple?[]:"",!1))}lo[Pf]=co}catch(_l){W$1(cs,cs.return,_l)}}break;case 6:if(ck(is,cs),ek(cs),hs&4){if(cs.stateNode===null)throw Error(p$1(162));lo=cs.stateNode,co=cs.memoizedProps;try{lo.nodeValue=co}catch(_l){W$1(cs,cs.return,_l)}}break;case 3:if(ck(is,cs),ek(cs),hs&4&&us!==null&&us.memoizedState.isDehydrated)try{bd(is.containerInfo)}catch(_l){W$1(cs,cs.return,_l)}break;case 4:ck(is,cs),ek(cs);break;case 13:ck(is,cs),ek(cs),lo=cs.child,lo.flags&8192&&(co=lo.memoizedState!==null,lo.stateNode.isHidden=co,!co||lo.alternate!==null&&lo.alternate.memoizedState!==null||(fk=B$1())),hs&4&&ak(cs);break;case 22:if(_a=us!==null&&us.memoizedState!==null,cs.mode&1?(U$1=(xa=U$1)||_a,ck(is,cs),U$1=xa):ck(is,cs),ek(cs),hs&8192){if(xa=cs.memoizedState!==null,(cs.stateNode.isHidden=xa)&&!_a&&cs.mode&1)for(V$1=cs,_a=cs.child;_a!==null;){for($a=V$1=_a;V$1!==null;){switch(xl=V$1,yl=xl.child,xl.tag){case 0:case 11:case 14:case 15:Pj(4,xl,xl.return);break;case 1:Lj(xl,xl.return);var wl=xl.stateNode;if(typeof wl.componentWillUnmount=="function"){hs=xl,us=xl.return;try{is=hs,wl.props=is.memoizedProps,wl.state=is.memoizedState,wl.componentWillUnmount()}catch(_l){W$1(hs,us,_l)}}break;case 5:Lj(xl,xl.return);break;case 22:if(xl.memoizedState!==null){gk($a);continue}}yl!==null?(yl.return=xl,V$1=yl):gk($a)}_a=_a.sibling}e:for(_a=null,$a=cs;;){if($a.tag===5){if(_a===null){_a=$a;try{lo=$a.stateNode,xa?(co=lo.style,typeof co.setProperty=="function"?co.setProperty("display","none","important"):co.display="none"):(ga=$a.stateNode,ba=$a.memoizedProps.style,uo=ba!=null&&ba.hasOwnProperty("display")?ba.display:null,ga.style.display=rb("display",uo))}catch(_l){W$1(cs,cs.return,_l)}}}else if($a.tag===6){if(_a===null)try{$a.stateNode.nodeValue=xa?"":$a.memoizedProps}catch(_l){W$1(cs,cs.return,_l)}}else if(($a.tag!==22&&$a.tag!==23||$a.memoizedState===null||$a===cs)&&$a.child!==null){$a.child.return=$a,$a=$a.child;continue}if($a===cs)break e;for(;$a.sibling===null;){if($a.return===null||$a.return===cs)break e;_a===$a&&(_a=null),$a=$a.return}_a===$a&&(_a=null),$a.sibling.return=$a.return,$a=$a.sibling}}break;case 19:ck(is,cs),ek(cs),hs&4&&ak(cs);break;case 21:break;default:ck(is,cs),ek(cs)}}function ek(cs){var is=cs.flags;if(is&2){try{e:{for(var us=cs.return;us!==null;){if(Tj(us)){var hs=us;break e}us=us.return}throw Error(p$1(160))}switch(hs.tag){case 5:var lo=hs.stateNode;hs.flags&32&&(ob(lo,""),hs.flags&=-33);var co=Uj(cs);Wj(cs,co,lo);break;case 3:case 4:var uo=hs.stateNode.containerInfo,ga=Uj(cs);Vj(cs,ga,uo);break;default:throw Error(p$1(161))}}catch(ba){W$1(cs,cs.return,ba)}cs.flags&=-3}is&4096&&(cs.flags&=-4097)}function hk(cs,is,us){V$1=cs,ik(cs)}function ik(cs,is,us){for(var hs=(cs.mode&1)!==0;V$1!==null;){var lo=V$1,co=lo.child;if(lo.tag===22&&hs){var uo=lo.memoizedState!==null||Jj;if(!uo){var ga=lo.alternate,ba=ga!==null&&ga.memoizedState!==null||U$1;ga=Jj;var xa=U$1;if(Jj=uo,(U$1=ba)&&!xa)for(V$1=lo;V$1!==null;)uo=V$1,ba=uo.child,uo.tag===22&&uo.memoizedState!==null?jk(lo):ba!==null?(ba.return=uo,V$1=ba):jk(lo);for(;co!==null;)V$1=co,ik(co),co=co.sibling;V$1=lo,Jj=ga,U$1=xa}kk(cs)}else lo.subtreeFlags&8772&&co!==null?(co.return=lo,V$1=co):kk(cs)}}function kk(cs){for(;V$1!==null;){var is=V$1;if(is.flags&8772){var us=is.alternate;try{if(is.flags&8772)switch(is.tag){case 0:case 11:case 15:U$1||Qj(5,is);break;case 1:var hs=is.stateNode;if(is.flags&4&&!U$1)if(us===null)hs.componentDidMount();else{var lo=is.elementType===is.type?us.memoizedProps:Ci$1(is.type,us.memoizedProps);hs.componentDidUpdate(lo,us.memoizedState,hs.__reactInternalSnapshotBeforeUpdate)}var co=is.updateQueue;co!==null&&sh(is,co,hs);break;case 3:var uo=is.updateQueue;if(uo!==null){if(us=null,is.child!==null)switch(is.child.tag){case 5:us=is.child.stateNode;break;case 1:us=is.child.stateNode}sh(is,uo,us)}break;case 5:var ga=is.stateNode;if(us===null&&is.flags&4){us=ga;var ba=is.memoizedProps;switch(is.type){case"button":case"input":case"select":case"textarea":ba.autoFocus&&us.focus();break;case"img":ba.src&&(us.src=ba.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(is.memoizedState===null){var xa=is.alternate;if(xa!==null){var _a=xa.memoizedState;if(_a!==null){var $a=_a.dehydrated;$a!==null&&bd($a)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||is.flags&512&&Rj(is)}catch(xl){W$1(is,is.return,xl)}}if(is===cs){V$1=null;break}if(us=is.sibling,us!==null){us.return=is.return,V$1=us;break}V$1=is.return}}function gk(cs){for(;V$1!==null;){var is=V$1;if(is===cs){V$1=null;break}var us=is.sibling;if(us!==null){us.return=is.return,V$1=us;break}V$1=is.return}}function jk(cs){for(;V$1!==null;){var is=V$1;try{switch(is.tag){case 0:case 11:case 15:var us=is.return;try{Qj(4,is)}catch(ba){W$1(is,us,ba)}break;case 1:var hs=is.stateNode;if(typeof hs.componentDidMount=="function"){var lo=is.return;try{hs.componentDidMount()}catch(ba){W$1(is,lo,ba)}}var co=is.return;try{Rj(is)}catch(ba){W$1(is,co,ba)}break;case 5:var uo=is.return;try{Rj(is)}catch(ba){W$1(is,uo,ba)}}}catch(ba){W$1(is,is.return,ba)}if(is===cs){V$1=null;break}var ga=is.sibling;if(ga!==null){ga.return=is.return,V$1=ga;break}V$1=is.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$1=0,Q$1=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi$1=!1,Pi$1=null,Ri$1=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$1&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi$1(cs){return cs.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(cs=C$1,cs!==0||(cs=window.event,cs=cs===void 0?16:jd(cs.type)),cs):1}function gi$1(cs,is,us,hs){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(cs,us,hs),(!(K$1&2)||cs!==Q$1)&&(cs===Q$1&&(!(K$1&2)&&(qk|=us),T$1===4&&Ck(cs,Z$1)),Dk(cs,hs),us===1&&K$1===0&&!(is.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(cs,is){var us=cs.callbackNode;wc(cs,is);var hs=uc(cs,cs===Q$1?Z$1:0);if(hs===0)us!==null&&bc(us),cs.callbackNode=null,cs.callbackPriority=0;else if(is=hs&-hs,cs.callbackPriority!==is){if(us!=null&&bc(us),is===1)cs.tag===0?ig(Ek.bind(null,cs)):hg(Ek.bind(null,cs)),Jf(function(){!(K$1&6)&&jg()}),us=null;else{switch(Dc(hs)){case 1:us=fc;break;case 4:us=gc;break;case 16:us=hc;break;case 536870912:us=jc;break;default:us=hc}us=Fk(us,Gk.bind(null,cs))}cs.callbackPriority=is,cs.callbackNode=us}}function Gk(cs,is){if(Ak=-1,Bk=0,K$1&6)throw Error(p$1(327));var us=cs.callbackNode;if(Hk()&&cs.callbackNode!==us)return null;var hs=uc(cs,cs===Q$1?Z$1:0);if(hs===0)return null;if(hs&30||hs&cs.expiredLanes||is)is=Ik(cs,hs);else{is=hs;var lo=K$1;K$1|=2;var co=Jk();(Q$1!==cs||Z$1!==is)&&(uk=null,Gj=B$1()+500,Kk(cs,is));do try{Lk();break}catch(ga){Mk(cs,ga)}while(!0);$g(),mk.current=co,K$1=lo,Y$1!==null?is=0:(Q$1=null,Z$1=0,is=T$1)}if(is!==0){if(is===2&&(lo=xc(cs),lo!==0&&(hs=lo,is=Nk(cs,lo))),is===1)throw us=pk,Kk(cs,0),Ck(cs,hs),Dk(cs,B$1()),us;if(is===6)Ck(cs,hs);else{if(lo=cs.current.alternate,!(hs&30)&&!Ok(lo)&&(is=Ik(cs,hs),is===2&&(co=xc(cs),co!==0&&(hs=co,is=Nk(cs,co))),is===1))throw us=pk,Kk(cs,0),Ck(cs,hs),Dk(cs,B$1()),us;switch(cs.finishedWork=lo,cs.finishedLanes=hs,is){case 0:case 1:throw Error(p$1(345));case 2:Pk(cs,tk,uk);break;case 3:if(Ck(cs,hs),(hs&130023424)===hs&&(is=fk+500-B$1(),10<is)){if(uc(cs,0)!==0)break;if(lo=cs.suspendedLanes,(lo&hs)!==hs){R$1(),cs.pingedLanes|=cs.suspendedLanes&lo;break}cs.timeoutHandle=Ff(Pk.bind(null,cs,tk,uk),is);break}Pk(cs,tk,uk);break;case 4:if(Ck(cs,hs),(hs&4194240)===hs)break;for(is=cs.eventTimes,lo=-1;0<hs;){var uo=31-oc(hs);co=1<<uo,uo=is[uo],uo>lo&&(lo=uo),hs&=~co}if(hs=lo,hs=B$1()-hs,hs=(120>hs?120:480>hs?480:1080>hs?1080:1920>hs?1920:3e3>hs?3e3:4320>hs?4320:1960*lk(hs/1960))-hs,10<hs){cs.timeoutHandle=Ff(Pk.bind(null,cs,tk,uk),hs);break}Pk(cs,tk,uk);break;case 5:Pk(cs,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(cs,B$1()),cs.callbackNode===us?Gk.bind(null,cs):null}function Nk(cs,is){var us=sk;return cs.current.memoizedState.isDehydrated&&(Kk(cs,is).flags|=256),cs=Ik(cs,is),cs!==2&&(is=tk,tk=us,is!==null&&Fj(is)),cs}function Fj(cs){tk===null?tk=cs:tk.push.apply(tk,cs)}function Ok(cs){for(var is=cs;;){if(is.flags&16384){var us=is.updateQueue;if(us!==null&&(us=us.stores,us!==null))for(var hs=0;hs<us.length;hs++){var lo=us[hs],co=lo.getSnapshot;lo=lo.value;try{if(!He$1(co(),lo))return!1}catch{return!1}}}if(us=is.child,is.subtreeFlags&16384&&us!==null)us.return=is,is=us;else{if(is===cs)break;for(;is.sibling===null;){if(is.return===null||is.return===cs)return!0;is=is.return}is.sibling.return=is.return,is=is.sibling}}return!0}function Ck(cs,is){for(is&=~rk,is&=~qk,cs.suspendedLanes|=is,cs.pingedLanes&=~is,cs=cs.expirationTimes;0<is;){var us=31-oc(is),hs=1<<us;cs[us]=-1,is&=~hs}}function Ek(cs){if(K$1&6)throw Error(p$1(327));Hk();var is=uc(cs,0);if(!(is&1))return Dk(cs,B$1()),null;var us=Ik(cs,is);if(cs.tag!==0&&us===2){var hs=xc(cs);hs!==0&&(is=hs,us=Nk(cs,hs))}if(us===1)throw us=pk,Kk(cs,0),Ck(cs,is),Dk(cs,B$1()),us;if(us===6)throw Error(p$1(345));return cs.finishedWork=cs.current.alternate,cs.finishedLanes=is,Pk(cs,tk,uk),Dk(cs,B$1()),null}function Qk(cs,is){var us=K$1;K$1|=1;try{return cs(is)}finally{K$1=us,K$1===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(cs){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var is=K$1;K$1|=1;var us=ok.transition,hs=C$1;try{if(ok.transition=null,C$1=1,cs)return cs()}finally{C$1=hs,ok.transition=us,K$1=is,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(cs,is){cs.finishedWork=null,cs.finishedLanes=0;var us=cs.timeoutHandle;if(us!==-1&&(cs.timeoutHandle=-1,Gf(us)),Y$1!==null)for(us=Y$1.return;us!==null;){var hs=us;switch(wg(hs),hs.tag){case 1:hs=hs.type.childContextTypes,hs!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H$1),Eh();break;case 5:Bh(hs);break;case 4:zh();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah$1(hs.type._context);break;case 22:case 23:Hj()}us=us.return}if(Q$1=cs,Y$1=cs=Pg(cs.current,null),Z$1=fj=is,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh$1!==null){for(is=0;is<fh$1.length;is++)if(us=fh$1[is],hs=us.interleaved,hs!==null){us.interleaved=null;var lo=hs.next,co=us.pending;if(co!==null){var uo=co.next;co.next=lo,hs.next=uo}us.pending=hs}fh$1=null}return cs}function Mk(cs,is){do{var us=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var hs=M$1.memoizedState;hs!==null;){var lo=hs.queue;lo!==null&&(lo.pending=null),hs=hs.next}Ih=!1}if(Hh=0,O$1=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,us===null||us.return===null){T$1=1,pk=is,Y$1=null;break}e:{var co=cs,uo=us.return,ga=us,ba=is;if(is=Z$1,ga.flags|=32768,ba!==null&&typeof ba=="object"&&typeof ba.then=="function"){var xa=ba,_a=ga,$a=_a.tag;if(!(_a.mode&1)&&($a===0||$a===11||$a===15)){var xl=_a.alternate;xl?(_a.updateQueue=xl.updateQueue,_a.memoizedState=xl.memoizedState,_a.lanes=xl.lanes):(_a.updateQueue=null,_a.memoizedState=null)}var yl=Ui$1(uo);if(yl!==null){yl.flags&=-257,Vi$1(yl,uo,ga,co,is),yl.mode&1&&Si$1(co,xa,is),is=yl,ba=xa;var wl=is.updateQueue;if(wl===null){var _l=new Set;_l.add(ba),is.updateQueue=_l}else wl.add(ba);break e}else{if(!(is&1)){Si$1(co,xa,is),tj();break e}ba=Error(p$1(426))}}else if(I$1&&ga.mode&1){var El=Ui$1(uo);if(El!==null){!(El.flags&65536)&&(El.flags|=256),Vi$1(El,uo,ga,co,is),Jg(Ji$1(ba,ga));break e}}co=ba=Ji$1(ba,ga),T$1!==4&&(T$1=2),sk===null?sk=[co]:sk.push(co),co=uo;do{switch(co.tag){case 3:co.flags|=65536,is&=-is,co.lanes|=is;var Sl=Ni$1(co,ba,is);ph$1(co,Sl);break e;case 1:ga=ba;var Cl=co.type,Tl=co.stateNode;if(!(co.flags&128)&&(typeof Cl.getDerivedStateFromError=="function"||Tl!==null&&typeof Tl.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(Tl)))){co.flags|=65536,is&=-is,co.lanes|=is;var Dl=Qi$1(co,ga,is);ph$1(co,Dl);break e}}co=co.return}while(co!==null)}Sk(us)}catch(Fl){is=Fl,Y$1===us&&us!==null&&(Y$1=us=us.return);continue}break}while(!0)}function Jk(){var cs=mk.current;return mk.current=Rh,cs===null?Rh:cs}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$1)}function Ik(cs,is){var us=K$1;K$1|=2;var hs=Jk();(Q$1!==cs||Z$1!==is)&&(uk=null,Kk(cs,is));do try{Tk();break}catch(lo){Mk(cs,lo)}while(!0);if($g(),K$1=us,mk.current=hs,Y$1!==null)throw Error(p$1(261));return Q$1=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(cs){var is=Vk(cs.alternate,cs,fj);cs.memoizedProps=cs.pendingProps,is===null?Sk(cs):Y$1=is,nk.current=null}function Sk(cs){var is=cs;do{var us=is.alternate;if(cs=is.return,is.flags&32768){if(us=Ij(us,is),us!==null){us.flags&=32767,Y$1=us;return}if(cs!==null)cs.flags|=32768,cs.subtreeFlags=0,cs.deletions=null;else{T$1=6,Y$1=null;return}}else if(us=Ej(us,is,fj),us!==null){Y$1=us;return}if(is=is.sibling,is!==null){Y$1=is;return}Y$1=is=cs}while(is!==null);T$1===0&&(T$1=5)}function Pk(cs,is,us){var hs=C$1,lo=ok.transition;try{ok.transition=null,C$1=1,Wk(cs,is,us,hs)}finally{ok.transition=lo,C$1=hs}return null}function Wk(cs,is,us,hs){do Hk();while(wk!==null);if(K$1&6)throw Error(p$1(327));us=cs.finishedWork;var lo=cs.finishedLanes;if(us===null)return null;if(cs.finishedWork=null,cs.finishedLanes=0,us===cs.current)throw Error(p$1(177));cs.callbackNode=null,cs.callbackPriority=0;var co=us.lanes|us.childLanes;if(Bc(cs,co),cs===Q$1&&(Y$1=Q$1=null,Z$1=0),!(us.subtreeFlags&2064)&&!(us.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),co=(us.flags&15990)!==0,us.subtreeFlags&15990||co){co=ok.transition,ok.transition=null;var uo=C$1;C$1=1;var ga=K$1;K$1|=4,nk.current=null,Oj(cs,us),dk(us,cs),Oe$1(Df),dd=!!Cf,Df=Cf=null,cs.current=us,hk(us),dc(),K$1=ga,C$1=uo,ok.transition=co}else cs.current=us;if(vk&&(vk=!1,wk=cs,xk=lo),co=cs.pendingLanes,co===0&&(Ri$1=null),mc(us.stateNode),Dk(cs,B$1()),is!==null)for(hs=cs.onRecoverableError,us=0;us<is.length;us++)lo=is[us],hs(lo.value,{componentStack:lo.stack,digest:lo.digest});if(Oi$1)throw Oi$1=!1,cs=Pi$1,Pi$1=null,cs;return xk&1&&cs.tag!==0&&Hk(),co=cs.pendingLanes,co&1?cs===zk?yk++:(yk=0,zk=cs):yk=0,jg(),null}function Hk(){if(wk!==null){var cs=Dc(xk),is=ok.transition,us=C$1;try{if(ok.transition=null,C$1=16>cs?16:cs,wk===null)var hs=!1;else{if(cs=wk,wk=null,xk=0,K$1&6)throw Error(p$1(331));var lo=K$1;for(K$1|=4,V$1=cs.current;V$1!==null;){var co=V$1,uo=co.child;if(V$1.flags&16){var ga=co.deletions;if(ga!==null){for(var ba=0;ba<ga.length;ba++){var xa=ga[ba];for(V$1=xa;V$1!==null;){var _a=V$1;switch(_a.tag){case 0:case 11:case 15:Pj(8,_a,co)}var $a=_a.child;if($a!==null)$a.return=_a,V$1=$a;else for(;V$1!==null;){_a=V$1;var xl=_a.sibling,yl=_a.return;if(Sj(_a),_a===xa){V$1=null;break}if(xl!==null){xl.return=yl,V$1=xl;break}V$1=yl}}}var wl=co.alternate;if(wl!==null){var _l=wl.child;if(_l!==null){wl.child=null;do{var El=_l.sibling;_l.sibling=null,_l=El}while(_l!==null)}}V$1=co}}if(co.subtreeFlags&2064&&uo!==null)uo.return=co,V$1=uo;else e:for(;V$1!==null;){if(co=V$1,co.flags&2048)switch(co.tag){case 0:case 11:case 15:Pj(9,co,co.return)}var Sl=co.sibling;if(Sl!==null){Sl.return=co.return,V$1=Sl;break e}V$1=co.return}}var Cl=cs.current;for(V$1=Cl;V$1!==null;){uo=V$1;var Tl=uo.child;if(uo.subtreeFlags&2064&&Tl!==null)Tl.return=uo,V$1=Tl;else e:for(uo=Cl;V$1!==null;){if(ga=V$1,ga.flags&2048)try{switch(ga.tag){case 0:case 11:case 15:Qj(9,ga)}}catch(Fl){W$1(ga,ga.return,Fl)}if(ga===uo){V$1=null;break e}var Dl=ga.sibling;if(Dl!==null){Dl.return=ga.return,V$1=Dl;break e}V$1=ga.return}}if(K$1=lo,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,cs)}catch{}hs=!0}return hs}finally{C$1=us,ok.transition=is}}return!1}function Xk(cs,is,us){is=Ji$1(us,is),is=Ni$1(cs,is,1),cs=nh$1(cs,is,1),is=R$1(),cs!==null&&(Ac(cs,1,is),Dk(cs,is))}function W$1(cs,is,us){if(cs.tag===3)Xk(cs,cs,us);else for(;is!==null;){if(is.tag===3){Xk(is,cs,us);break}else if(is.tag===1){var hs=is.stateNode;if(typeof is.type.getDerivedStateFromError=="function"||typeof hs.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(hs))){cs=Ji$1(us,cs),cs=Qi$1(is,cs,1),is=nh$1(is,cs,1),cs=R$1(),is!==null&&(Ac(is,1,cs),Dk(is,cs));break}}is=is.return}}function Ti$1(cs,is,us){var hs=cs.pingCache;hs!==null&&hs.delete(is),is=R$1(),cs.pingedLanes|=cs.suspendedLanes&us,Q$1===cs&&(Z$1&us)===us&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-fk?Kk(cs,0):rk|=us),Dk(cs,is)}function Yk(cs,is){is===0&&(cs.mode&1?(is=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):is=1);var us=R$1();cs=ih(cs,is),cs!==null&&(Ac(cs,is,us),Dk(cs,us))}function uj(cs){var is=cs.memoizedState,us=0;is!==null&&(us=is.retryLane),Yk(cs,us)}function bk(cs,is){var us=0;switch(cs.tag){case 13:var hs=cs.stateNode,lo=cs.memoizedState;lo!==null&&(us=lo.retryLane);break;case 19:hs=cs.stateNode;break;default:throw Error(p$1(314))}hs!==null&&hs.delete(is),Yk(cs,us)}var Vk;Vk=function(cs,is,us){if(cs!==null)if(cs.memoizedProps!==is.pendingProps||Wf.current)dh$1=!0;else{if(!(cs.lanes&us)&&!(is.flags&128))return dh$1=!1,yj(cs,is,us);dh$1=!!(cs.flags&131072)}else dh$1=!1,I$1&&is.flags&1048576&&ug(is,ng,is.index);switch(is.lanes=0,is.tag){case 2:var hs=is.type;ij(cs,is),cs=is.pendingProps;var lo=Yf(is,H$1.current);ch$1(is,us),lo=Nh(null,is,hs,cs,lo,us);var co=Sh();return is.flags|=1,typeof lo=="object"&&lo!==null&&typeof lo.render=="function"&&lo.$$typeof===void 0?(is.tag=1,is.memoizedState=null,is.updateQueue=null,Zf(hs)?(co=!0,cg(is)):co=!1,is.memoizedState=lo.state!==null&&lo.state!==void 0?lo.state:null,kh(is),lo.updater=Ei$1,is.stateNode=lo,lo._reactInternals=is,Ii$1(is,hs,cs,us),is=jj(null,is,hs,!0,co,us)):(is.tag=0,I$1&&co&&vg(is),Xi$1(null,is,lo,us),is=is.child),is;case 16:hs=is.elementType;e:{switch(ij(cs,is),cs=is.pendingProps,lo=hs._init,hs=lo(hs._payload),is.type=hs,lo=is.tag=Zk(hs),cs=Ci$1(hs,cs),lo){case 0:is=cj(null,is,hs,cs,us);break e;case 1:is=hj(null,is,hs,cs,us);break e;case 11:is=Yi$1(null,is,hs,cs,us);break e;case 14:is=$i$1(null,is,hs,Ci$1(hs.type,cs),us);break e}throw Error(p$1(306,hs,""))}return is;case 0:return hs=is.type,lo=is.pendingProps,lo=is.elementType===hs?lo:Ci$1(hs,lo),cj(cs,is,hs,lo,us);case 1:return hs=is.type,lo=is.pendingProps,lo=is.elementType===hs?lo:Ci$1(hs,lo),hj(cs,is,hs,lo,us);case 3:e:{if(kj(is),cs===null)throw Error(p$1(387));hs=is.pendingProps,co=is.memoizedState,lo=co.element,lh$1(cs,is),qh(is,hs,null,us);var uo=is.memoizedState;if(hs=uo.element,co.isDehydrated)if(co={element:hs,isDehydrated:!1,cache:uo.cache,pendingSuspenseBoundaries:uo.pendingSuspenseBoundaries,transitions:uo.transitions},is.updateQueue.baseState=co,is.memoizedState=co,is.flags&256){lo=Ji$1(Error(p$1(423)),is),is=lj(cs,is,hs,us,lo);break e}else if(hs!==lo){lo=Ji$1(Error(p$1(424)),is),is=lj(cs,is,hs,us,lo);break e}else for(yg=Lf(is.stateNode.containerInfo.firstChild),xg=is,I$1=!0,zg=null,us=Vg(is,null,hs,us),is.child=us;us;)us.flags=us.flags&-3|4096,us=us.sibling;else{if(Ig(),hs===lo){is=Zi$1(cs,is,us);break e}Xi$1(cs,is,hs,us)}is=is.child}return is;case 5:return Ah(is),cs===null&&Eg(is),hs=is.type,lo=is.pendingProps,co=cs!==null?cs.memoizedProps:null,uo=lo.children,Ef(hs,lo)?uo=null:co!==null&&Ef(hs,co)&&(is.flags|=32),gj(cs,is),Xi$1(cs,is,uo,us),is.child;case 6:return cs===null&&Eg(is),null;case 13:return oj(cs,is,us);case 4:return yh$1(is,is.stateNode.containerInfo),hs=is.pendingProps,cs===null?is.child=Ug(is,null,hs,us):Xi$1(cs,is,hs,us),is.child;case 11:return hs=is.type,lo=is.pendingProps,lo=is.elementType===hs?lo:Ci$1(hs,lo),Yi$1(cs,is,hs,lo,us);case 7:return Xi$1(cs,is,is.pendingProps,us),is.child;case 8:return Xi$1(cs,is,is.pendingProps.children,us),is.child;case 12:return Xi$1(cs,is,is.pendingProps.children,us),is.child;case 10:e:{if(hs=is.type._context,lo=is.pendingProps,co=is.memoizedProps,uo=lo.value,G$1(Wg,hs._currentValue),hs._currentValue=uo,co!==null)if(He$1(co.value,uo)){if(co.children===lo.children&&!Wf.current){is=Zi$1(cs,is,us);break e}}else for(co=is.child,co!==null&&(co.return=is);co!==null;){var ga=co.dependencies;if(ga!==null){uo=co.child;for(var ba=ga.firstContext;ba!==null;){if(ba.context===hs){if(co.tag===1){ba=mh$1(-1,us&-us),ba.tag=2;var xa=co.updateQueue;if(xa!==null){xa=xa.shared;var _a=xa.pending;_a===null?ba.next=ba:(ba.next=_a.next,_a.next=ba),xa.pending=ba}}co.lanes|=us,ba=co.alternate,ba!==null&&(ba.lanes|=us),bh(co.return,us,is),ga.lanes|=us;break}ba=ba.next}}else if(co.tag===10)uo=co.type===is.type?null:co.child;else if(co.tag===18){if(uo=co.return,uo===null)throw Error(p$1(341));uo.lanes|=us,ga=uo.alternate,ga!==null&&(ga.lanes|=us),bh(uo,us,is),uo=co.sibling}else uo=co.child;if(uo!==null)uo.return=co;else for(uo=co;uo!==null;){if(uo===is){uo=null;break}if(co=uo.sibling,co!==null){co.return=uo.return,uo=co;break}uo=uo.return}co=uo}Xi$1(cs,is,lo.children,us),is=is.child}return is;case 9:return lo=is.type,hs=is.pendingProps.children,ch$1(is,us),lo=eh(lo),hs=hs(lo),is.flags|=1,Xi$1(cs,is,hs,us),is.child;case 14:return hs=is.type,lo=Ci$1(hs,is.pendingProps),lo=Ci$1(hs.type,lo),$i$1(cs,is,hs,lo,us);case 15:return bj(cs,is,is.type,is.pendingProps,us);case 17:return hs=is.type,lo=is.pendingProps,lo=is.elementType===hs?lo:Ci$1(hs,lo),ij(cs,is),is.tag=1,Zf(hs)?(cs=!0,cg(is)):cs=!1,ch$1(is,us),Gi$1(is,hs,lo),Ii$1(is,hs,lo,us),jj(null,is,hs,!0,cs,us);case 19:return xj(cs,is,us);case 22:return dj(cs,is,us)}throw Error(p$1(156,is.tag))};function Fk(cs,is){return ac(cs,is)}function $k(cs,is,us,hs){this.tag=cs,this.key=us,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=is,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=hs,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(cs,is,us,hs){return new $k(cs,is,us,hs)}function aj(cs){return cs=cs.prototype,!(!cs||!cs.isReactComponent)}function Zk(cs){if(typeof cs=="function")return aj(cs)?1:0;if(cs!=null){if(cs=cs.$$typeof,cs===Da)return 11;if(cs===Ga$1)return 14}return 2}function Pg(cs,is){var us=cs.alternate;return us===null?(us=Bg(cs.tag,is,cs.key,cs.mode),us.elementType=cs.elementType,us.type=cs.type,us.stateNode=cs.stateNode,us.alternate=cs,cs.alternate=us):(us.pendingProps=is,us.type=cs.type,us.flags=0,us.subtreeFlags=0,us.deletions=null),us.flags=cs.flags&14680064,us.childLanes=cs.childLanes,us.lanes=cs.lanes,us.child=cs.child,us.memoizedProps=cs.memoizedProps,us.memoizedState=cs.memoizedState,us.updateQueue=cs.updateQueue,is=cs.dependencies,us.dependencies=is===null?null:{lanes:is.lanes,firstContext:is.firstContext},us.sibling=cs.sibling,us.index=cs.index,us.ref=cs.ref,us}function Rg(cs,is,us,hs,lo,co){var uo=2;if(hs=cs,typeof cs=="function")aj(cs)&&(uo=1);else if(typeof cs=="string")uo=5;else e:switch(cs){case ya:return Tg(us.children,lo,co,is);case za$1:uo=8,lo|=8;break;case Aa:return cs=Bg(12,us,is,lo|2),cs.elementType=Aa,cs.lanes=co,cs;case Ea:return cs=Bg(13,us,is,lo),cs.elementType=Ea,cs.lanes=co,cs;case Fa$1:return cs=Bg(19,us,is,lo),cs.elementType=Fa$1,cs.lanes=co,cs;case Ia$1:return pj(us,lo,co,is);default:if(typeof cs=="object"&&cs!==null)switch(cs.$$typeof){case Ba$1:uo=10;break e;case Ca:uo=9;break e;case Da:uo=11;break e;case Ga$1:uo=14;break e;case Ha$1:uo=16,hs=null;break e}throw Error(p$1(130,cs==null?cs:typeof cs,""))}return is=Bg(uo,us,is,lo),is.elementType=cs,is.type=hs,is.lanes=co,is}function Tg(cs,is,us,hs){return cs=Bg(7,cs,hs,is),cs.lanes=us,cs}function pj(cs,is,us,hs){return cs=Bg(22,cs,hs,is),cs.elementType=Ia$1,cs.lanes=us,cs.stateNode={isHidden:!1},cs}function Qg(cs,is,us){return cs=Bg(6,cs,null,is),cs.lanes=us,cs}function Sg(cs,is,us){return is=Bg(4,cs.children!==null?cs.children:[],cs.key,is),is.lanes=us,is.stateNode={containerInfo:cs.containerInfo,pendingChildren:null,implementation:cs.implementation},is}function al(cs,is,us,hs,lo){this.tag=is,this.containerInfo=cs,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=hs,this.onRecoverableError=lo,this.mutableSourceEagerHydrationData=null}function bl(cs,is,us,hs,lo,co,uo,ga,ba){return cs=new al(cs,is,us,ga,ba),is===1?(is=1,co===!0&&(is|=8)):is=0,co=Bg(3,null,null,is),cs.current=co,co.stateNode=cs,co.memoizedState={element:hs,isDehydrated:us,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(co),cs}function cl(cs,is,us){var hs=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:hs==null?null:""+hs,children:cs,containerInfo:is,implementation:us}}function dl(cs){if(!cs)return Vf;cs=cs._reactInternals;e:{if(Vb(cs)!==cs||cs.tag!==1)throw Error(p$1(170));var is=cs;do{switch(is.tag){case 3:is=is.stateNode.context;break e;case 1:if(Zf(is.type)){is=is.stateNode.__reactInternalMemoizedMergedChildContext;break e}}is=is.return}while(is!==null);throw Error(p$1(171))}if(cs.tag===1){var us=cs.type;if(Zf(us))return bg(cs,us,is)}return is}function el(cs,is,us,hs,lo,co,uo,ga,ba){return cs=bl(us,hs,!0,cs,lo,co,uo,ga,ba),cs.context=dl(null),us=cs.current,hs=R$1(),lo=yi$1(us),co=mh$1(hs,lo),co.callback=is??null,nh$1(us,co,lo),cs.current.lanes=lo,Ac(cs,lo,hs),Dk(cs,hs),cs}function fl(cs,is,us,hs){var lo=is.current,co=R$1(),uo=yi$1(lo);return us=dl(us),is.context===null?is.context=us:is.pendingContext=us,is=mh$1(co,uo),is.payload={element:cs},hs=hs===void 0?null:hs,hs!==null&&(is.callback=hs),cs=nh$1(lo,is,uo),cs!==null&&(gi$1(cs,lo,uo,co),oh$1(cs,lo,uo)),uo}function gl(cs){if(cs=cs.current,!cs.child)return null;switch(cs.child.tag){case 5:return cs.child.stateNode;default:return cs.child.stateNode}}function hl(cs,is){if(cs=cs.memoizedState,cs!==null&&cs.dehydrated!==null){var us=cs.retryLane;cs.retryLane=us!==0&&us<is?us:is}}function il(cs,is){hl(cs,is),(cs=cs.alternate)&&hl(cs,is)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(cs){console.error(cs)};function ll(cs){this._internalRoot=cs}ml.prototype.render=ll.prototype.render=function(cs){var is=this._internalRoot;if(is===null)throw Error(p$1(409));fl(cs,is,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var cs=this._internalRoot;if(cs!==null){this._internalRoot=null;var is=cs.containerInfo;Rk(function(){fl(null,cs,null,null)}),is[uf]=null}};function ml(cs){this._internalRoot=cs}ml.prototype.unstable_scheduleHydration=function(cs){if(cs){var is=Hc();cs={blockedOn:null,target:cs,priority:is};for(var us=0;us<Qc.length&&is!==0&&is<Qc[us].priority;us++);Qc.splice(us,0,cs),us===0&&Vc(cs)}};function nl(cs){return!(!cs||cs.nodeType!==1&&cs.nodeType!==9&&cs.nodeType!==11)}function ol(cs){return!(!cs||cs.nodeType!==1&&cs.nodeType!==9&&cs.nodeType!==11&&(cs.nodeType!==8||cs.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(cs,is,us,hs,lo){if(lo){if(typeof hs=="function"){var co=hs;hs=function(){var xa=gl(uo);co.call(xa)}}var uo=el(is,hs,cs,0,null,!1,!1,"",pl);return cs._reactRootContainer=uo,cs[uf]=uo.current,sf(cs.nodeType===8?cs.parentNode:cs),Rk(),uo}for(;lo=cs.lastChild;)cs.removeChild(lo);if(typeof hs=="function"){var ga=hs;hs=function(){var xa=gl(ba);ga.call(xa)}}var ba=bl(cs,0,!1,null,null,!1,!1,"",pl);return cs._reactRootContainer=ba,cs[uf]=ba.current,sf(cs.nodeType===8?cs.parentNode:cs),Rk(function(){fl(is,ba,us,hs)}),ba}function rl(cs,is,us,hs,lo){var co=us._reactRootContainer;if(co){var uo=co;if(typeof lo=="function"){var ga=lo;lo=function(){var ba=gl(uo);ga.call(ba)}}fl(is,uo,cs,lo)}else uo=ql(us,is,cs,lo,hs);return gl(uo)}Ec=function(cs){switch(cs.tag){case 3:var is=cs.stateNode;if(is.current.memoizedState.isDehydrated){var us=tc(is.pendingLanes);us!==0&&(Cc(is,us|1),Dk(is,B$1()),!(K$1&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var hs=ih(cs,1);if(hs!==null){var lo=R$1();gi$1(hs,cs,1,lo)}}),il(cs,1)}};Fc=function(cs){if(cs.tag===13){var is=ih(cs,134217728);if(is!==null){var us=R$1();gi$1(is,cs,134217728,us)}il(cs,134217728)}};Gc=function(cs){if(cs.tag===13){var is=yi$1(cs),us=ih(cs,is);if(us!==null){var hs=R$1();gi$1(us,cs,is,hs)}il(cs,is)}};Hc=function(){return C$1};Ic=function(cs,is){var us=C$1;try{return C$1=cs,is()}finally{C$1=us}};yb=function(cs,is,us){switch(is){case"input":if(bb(cs,us),is=us.name,us.type==="radio"&&is!=null){for(us=cs;us.parentNode;)us=us.parentNode;for(us=us.querySelectorAll("input[name="+JSON.stringify(""+is)+'][type="radio"]'),is=0;is<us.length;is++){var hs=us[is];if(hs!==cs&&hs.form===cs.form){var lo=Db(hs);if(!lo)throw Error(p$1(90));Wa$1(hs),bb(hs,lo)}}}break;case"textarea":ib(cs,us);break;case"select":is=us.value,is!=null&&fb(cs,!!us.multiple,is,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(cs){return cs=Zb(cs),cs===null?null:cs.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(cs,is){var us=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(is))throw Error(p$1(200));return cl(cs,is,null,us)};reactDom_production_min.createRoot=function(cs,is){if(!nl(cs))throw Error(p$1(299));var us=!1,hs="",lo=kl;return is!=null&&(is.unstable_strictMode===!0&&(us=!0),is.identifierPrefix!==void 0&&(hs=is.identifierPrefix),is.onRecoverableError!==void 0&&(lo=is.onRecoverableError)),is=bl(cs,1,!1,null,null,us,!1,hs,lo),cs[uf]=is.current,sf(cs.nodeType===8?cs.parentNode:cs),new ll(is)};reactDom_production_min.findDOMNode=function(cs){if(cs==null)return null;if(cs.nodeType===1)return cs;var is=cs._reactInternals;if(is===void 0)throw typeof cs.render=="function"?Error(p$1(188)):(cs=Object.keys(cs).join(","),Error(p$1(268,cs)));return cs=Zb(is),cs=cs===null?null:cs.stateNode,cs};reactDom_production_min.flushSync=function(cs){return Rk(cs)};reactDom_production_min.hydrate=function(cs,is,us){if(!ol(is))throw Error(p$1(200));return rl(null,cs,is,!0,us)};reactDom_production_min.hydrateRoot=function(cs,is,us){if(!nl(cs))throw Error(p$1(405));var hs=us!=null&&us.hydratedSources||null,lo=!1,co="",uo=kl;if(us!=null&&(us.unstable_strictMode===!0&&(lo=!0),us.identifierPrefix!==void 0&&(co=us.identifierPrefix),us.onRecoverableError!==void 0&&(uo=us.onRecoverableError)),is=el(is,null,cs,1,us??null,lo,!1,co,uo),cs[uf]=is.current,sf(cs),hs)for(cs=0;cs<hs.length;cs++)us=hs[cs],lo=us._getVersion,lo=lo(us._source),is.mutableSourceEagerHydrationData==null?is.mutableSourceEagerHydrationData=[us,lo]:is.mutableSourceEagerHydrationData.push(us,lo);return new ml(is)};reactDom_production_min.render=function(cs,is,us){if(!ol(is))throw Error(p$1(200));return rl(null,cs,is,!1,us)};reactDom_production_min.unmountComponentAtNode=function(cs){if(!ol(cs))throw Error(p$1(40));return cs._reactRootContainer?(Rk(function(){rl(null,null,cs,!1,function(){cs._reactRootContainer=null,cs[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(cs,is,us,hs){if(!ol(us))throw Error(p$1(200));if(cs==null||cs._reactInternals===void 0)throw Error(p$1(38));return rl(cs,is,us,!1,hs)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(cs){console.error(cs)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;function commonjsRequire(cs){throw new Error('Could not dynamically require "'+cs+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(is,us){module.exports=is.pdfjsLib=us()})(globalThis,()=>(()=>{var __webpack_modules__=[,(cs,is)=>{var qp;Object.defineProperty(is,"__esModule",{value:!0}),is.VerbosityLevel=is.Util=is.UnknownErrorException=is.UnexpectedResponseException=is.TextRenderingMode=is.RenderingIntentFlag=is.PromiseCapability=is.PermissionFlag=is.PasswordResponses=is.PasswordException=is.PageActionEventType=is.OPS=is.MissingPDFException=is.MAX_IMAGE_SIZE_TO_CACHE=is.LINE_FACTOR=is.LINE_DESCENT_FACTOR=is.InvalidPDFException=is.ImageKind=is.IDENTITY_MATRIX=is.FormatError=is.FeatureTest=is.FONT_IDENTITY_MATRIX=is.DocumentActionEventType=is.CMapCompressionType=is.BaseException=is.BASELINE_FACTOR=is.AnnotationType=is.AnnotationReplyType=is.AnnotationPrefix=is.AnnotationMode=is.AnnotationFlag=is.AnnotationFieldFlag=is.AnnotationEditorType=is.AnnotationEditorPrefix=is.AnnotationEditorParamsType=is.AnnotationBorderStyleType=is.AnnotationActionEventType=is.AbortException=void 0,is.assert=Kl,is.bytesToString=_u,is.createValidAbsoluteUrl=pu,is.getModificationDate=mp,is.getUuid=Ip,is.getVerbosityLevel=au,is.info=_c,is.isArrayBuffer=Mu,is.isArrayEqual=hp,is.isNodeJS=void 0,is.normalizeUnicode=Tp,is.objectFromMap=Fu,is.objectSize=Tu,is.setVerbosityLevel=ou,is.shadow=Ll,is.string32=Cu,is.stringToBytes=bu,is.stringToPDFString=Lu,is.stringToUTF8String=Ju,is.unreachable=lu,is.utf8StringToString=Vu,is.warn=uu;const us=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");is.isNodeJS=us;const hs=[1,0,0,1,0,0];is.IDENTITY_MATRIX=hs;const lo=[.001,0,0,.001,0,0];is.FONT_IDENTITY_MATRIX=lo;const co=1e7;is.MAX_IMAGE_SIZE_TO_CACHE=co;const uo=1.35;is.LINE_FACTOR=uo;const ga=.35;is.LINE_DESCENT_FACTOR=ga;const ba=ga/uo;is.BASELINE_FACTOR=ba;const xa={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};is.RenderingIntentFlag=xa;const _a={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};is.AnnotationMode=_a;const $a="pdfjs_internal_editor_";is.AnnotationEditorPrefix=$a;const xl={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};is.AnnotationEditorType=xl;const yl={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};is.AnnotationEditorParamsType=yl;const wl={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};is.PermissionFlag=wl;const _l={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};is.TextRenderingMode=_l;const El={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};is.ImageKind=El;const Sl={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};is.AnnotationType=Sl;const Cl={GROUP:"Group",REPLY:"R"};is.AnnotationReplyType=Cl;const Tl={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};is.AnnotationFlag=Tl;const Dl={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};is.AnnotationFieldFlag=Dl;const Fl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};is.AnnotationBorderStyleType=Fl;const Pl={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};is.AnnotationActionEventType=Pl;const Al={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};is.DocumentActionEventType=Al;const Rl={O:"PageOpen",C:"PageClose"};is.PageActionEventType=Rl;const Il={ERRORS:0,WARNINGS:1,INFOS:5};is.VerbosityLevel=Il;const Bl={NONE:0,BINARY:1};is.CMapCompressionType=Bl;const Ol={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};is.OPS=Ol;const zl={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};is.PasswordResponses=zl;let Hl=Il.WARNINGS;function ou(lp){Number.isInteger(lp)&&(Hl=lp)}function au(){return Hl}function _c(lp){Hl>=Il.INFOS&&console.log(`Info: ${lp}`)}function uu(lp){Hl>=Il.WARNINGS&&console.log(`Warning: ${lp}`)}function lu(lp){throw new Error(lp)}function Kl(lp,$u){lp||lu($u)}function xu(lp){switch(lp==null?void 0:lp.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function pu(lp,$u=null,Zu=null){if(!lp)return null;try{if(Zu&&typeof lp=="string"){if(Zu.addDefaultProtocol&&lp.startsWith("www.")){const Np=lp.match(/\./g);(Np==null?void 0:Np.length)>=2&&(lp=`http://${lp}`)}if(Zu.tryConvertEncoding)try{lp=Ju(lp)}catch{}}const Ap=$u?new URL(lp,$u):new URL(lp);if(xu(Ap))return Ap}catch{}return null}function Ll(lp,$u,Zu,Ap=!1){return Object.defineProperty(lp,$u,{value:Zu,enumerable:!Ap,configurable:!0,writable:!1}),Zu}const Nl=function(){function $u(Zu,Ap){this.constructor===$u&&lu("Cannot initialize BaseException."),this.message=Zu,this.name=Ap}return $u.prototype=new Error,$u.constructor=$u,$u}();is.BaseException=Nl;class Ml extends Nl{constructor($u,Zu){super($u,"PasswordException"),this.code=Zu}}is.PasswordException=Ml;class Ul extends Nl{constructor($u,Zu){super($u,"UnknownErrorException"),this.details=Zu}}is.UnknownErrorException=Ul;class Vl extends Nl{constructor($u){super($u,"InvalidPDFException")}}is.InvalidPDFException=Vl;class Ql extends Nl{constructor($u){super($u,"MissingPDFException")}}is.MissingPDFException=Ql;class Jl extends Nl{constructor($u,Zu){super($u,"UnexpectedResponseException"),this.status=Zu}}is.UnexpectedResponseException=Jl;class iu extends Nl{constructor($u){super($u,"FormatError")}}is.FormatError=iu;class fu extends Nl{constructor($u){super($u,"AbortException")}}is.AbortException=fu;function _u(lp){(typeof lp!="object"||(lp==null?void 0:lp.length)===void 0)&&lu("Invalid argument for bytesToString");const $u=lp.length,Zu=8192;if($u<Zu)return String.fromCharCode.apply(null,lp);const Ap=[];for(let Np=0;Np<$u;Np+=Zu){const Vp=Math.min(Np+Zu,$u),Ru=lp.subarray(Np,Vp);Ap.push(String.fromCharCode.apply(null,Ru))}return Ap.join("")}function bu(lp){typeof lp!="string"&&lu("Invalid argument for stringToBytes");const $u=lp.length,Zu=new Uint8Array($u);for(let Ap=0;Ap<$u;++Ap)Zu[Ap]=lp.charCodeAt(Ap)&255;return Zu}function Cu(lp){return String.fromCharCode(lp>>24&255,lp>>16&255,lp>>8&255,lp&255)}function Tu(lp){return Object.keys(lp).length}function Fu(lp){const $u=Object.create(null);for(const[Zu,Ap]of lp)$u[Zu]=Ap;return $u}function ku(){const lp=new Uint8Array(4);return lp[0]=1,new Uint32Array(lp.buffer,0,1)[0]===1}function tu(){try{return new Function(""),!0}catch{return!1}}class eu{static get isLittleEndian(){return Ll(this,"isLittleEndian",ku())}static get isEvalSupported(){return Ll(this,"isEvalSupported",tu())}static get isOffscreenCanvasSupported(){return Ll(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Ll(this,"platform",{isWin:!1,isMac:!1}):Ll(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var $u,Zu;return Ll(this,"isCSSRoundSupported",(Zu=($u=globalThis.CSS)==null?void 0:$u.supports)==null?void 0:Zu.call($u,"width: round(1.5px, 1px)"))}}is.FeatureTest=eu;const gu=[...Array(256).keys()].map(lp=>lp.toString(16).padStart(2,"0"));class ru{static makeHexColor($u,Zu,Ap){return`#${gu[$u]}${gu[Zu]}${gu[Ap]}`}static scaleMinMax($u,Zu){let Ap;$u[0]?($u[0]<0&&(Ap=Zu[0],Zu[0]=Zu[1],Zu[1]=Ap),Zu[0]*=$u[0],Zu[1]*=$u[0],$u[3]<0&&(Ap=Zu[2],Zu[2]=Zu[3],Zu[3]=Ap),Zu[2]*=$u[3],Zu[3]*=$u[3]):(Ap=Zu[0],Zu[0]=Zu[2],Zu[2]=Ap,Ap=Zu[1],Zu[1]=Zu[3],Zu[3]=Ap,$u[1]<0&&(Ap=Zu[2],Zu[2]=Zu[3],Zu[3]=Ap),Zu[2]*=$u[1],Zu[3]*=$u[1],$u[2]<0&&(Ap=Zu[0],Zu[0]=Zu[1],Zu[1]=Ap),Zu[0]*=$u[2],Zu[1]*=$u[2]),Zu[0]+=$u[4],Zu[1]+=$u[4],Zu[2]+=$u[5],Zu[3]+=$u[5]}static transform($u,Zu){return[$u[0]*Zu[0]+$u[2]*Zu[1],$u[1]*Zu[0]+$u[3]*Zu[1],$u[0]*Zu[2]+$u[2]*Zu[3],$u[1]*Zu[2]+$u[3]*Zu[3],$u[0]*Zu[4]+$u[2]*Zu[5]+$u[4],$u[1]*Zu[4]+$u[3]*Zu[5]+$u[5]]}static applyTransform($u,Zu){const Ap=$u[0]*Zu[0]+$u[1]*Zu[2]+Zu[4],Np=$u[0]*Zu[1]+$u[1]*Zu[3]+Zu[5];return[Ap,Np]}static applyInverseTransform($u,Zu){const Ap=Zu[0]*Zu[3]-Zu[1]*Zu[2],Np=($u[0]*Zu[3]-$u[1]*Zu[2]+Zu[2]*Zu[5]-Zu[4]*Zu[3])/Ap,Vp=(-$u[0]*Zu[1]+$u[1]*Zu[0]+Zu[4]*Zu[1]-Zu[5]*Zu[0])/Ap;return[Np,Vp]}static getAxialAlignedBoundingBox($u,Zu){const Ap=this.applyTransform($u,Zu),Np=this.applyTransform($u.slice(2,4),Zu),Vp=this.applyTransform([$u[0],$u[3]],Zu),Ru=this.applyTransform([$u[2],$u[1]],Zu);return[Math.min(Ap[0],Np[0],Vp[0],Ru[0]),Math.min(Ap[1],Np[1],Vp[1],Ru[1]),Math.max(Ap[0],Np[0],Vp[0],Ru[0]),Math.max(Ap[1],Np[1],Vp[1],Ru[1])]}static inverseTransform($u){const Zu=$u[0]*$u[3]-$u[1]*$u[2];return[$u[3]/Zu,-$u[1]/Zu,-$u[2]/Zu,$u[0]/Zu,($u[2]*$u[5]-$u[4]*$u[3])/Zu,($u[4]*$u[1]-$u[5]*$u[0])/Zu]}static singularValueDecompose2dScale($u){const Zu=[$u[0],$u[2],$u[1],$u[3]],Ap=$u[0]*Zu[0]+$u[1]*Zu[2],Np=$u[0]*Zu[1]+$u[1]*Zu[3],Vp=$u[2]*Zu[0]+$u[3]*Zu[2],Ru=$u[2]*Zu[1]+$u[3]*Zu[3],Qu=(Ap+Ru)/2,up=Math.sqrt((Ap+Ru)**2-4*(Ap*Ru-Vp*Np))/2,Ep=Qu+up||1,Cp=Qu-up||1;return[Math.sqrt(Ep),Math.sqrt(Cp)]}static normalizeRect($u){const Zu=$u.slice(0);return $u[0]>$u[2]&&(Zu[0]=$u[2],Zu[2]=$u[0]),$u[1]>$u[3]&&(Zu[1]=$u[3],Zu[3]=$u[1]),Zu}static intersect($u,Zu){const Ap=Math.max(Math.min($u[0],$u[2]),Math.min(Zu[0],Zu[2])),Np=Math.min(Math.max($u[0],$u[2]),Math.max(Zu[0],Zu[2]));if(Ap>Np)return null;const Vp=Math.max(Math.min($u[1],$u[3]),Math.min(Zu[1],Zu[3])),Ru=Math.min(Math.max($u[1],$u[3]),Math.max(Zu[1],Zu[3]));return Vp>Ru?null:[Ap,Vp,Np,Ru]}static bezierBoundingBox($u,Zu,Ap,Np,Vp,Ru,Qu,up){const Ep=[],Cp=[[],[]];let Sp,vu,Zl,Ou,Du,$l,Au,Eu;for(let du=0;du<2;++du){if(du===0?(vu=6*$u-12*Ap+6*Vp,Sp=-3*$u+9*Ap-9*Vp+3*Qu,Zl=3*Ap-3*$u):(vu=6*Zu-12*Np+6*Ru,Sp=-3*Zu+9*Np-9*Ru+3*up,Zl=3*Np-3*Zu),Math.abs(Sp)<1e-12){if(Math.abs(vu)<1e-12)continue;Ou=-Zl/vu,0<Ou&&Ou<1&&Ep.push(Ou);continue}Au=vu*vu-4*Zl*Sp,Eu=Math.sqrt(Au),!(Au<0)&&(Du=(-vu+Eu)/(2*Sp),0<Du&&Du<1&&Ep.push(Du),$l=(-vu-Eu)/(2*Sp),0<$l&&$l<1&&Ep.push($l))}let _f=Ep.length,qu;const Xl=_f;for(;_f--;)Ou=Ep[_f],qu=1-Ou,Cp[0][_f]=qu*qu*qu*$u+3*qu*qu*Ou*Ap+3*qu*Ou*Ou*Vp+Ou*Ou*Ou*Qu,Cp[1][_f]=qu*qu*qu*Zu+3*qu*qu*Ou*Np+3*qu*Ou*Ou*Ru+Ou*Ou*Ou*up;return Cp[0][Xl]=$u,Cp[1][Xl]=Zu,Cp[0][Xl+1]=Qu,Cp[1][Xl+1]=up,Cp[0].length=Cp[1].length=Xl+2,[Math.min(...Cp[0]),Math.min(...Cp[1]),Math.max(...Cp[0]),Math.max(...Cp[1])]}}is.Util=ru;const Pu=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Lu(lp){if(lp[0]>=""){let Zu;if(lp[0]===""&&lp[1]===""?Zu="utf-16be":lp[0]===""&&lp[1]===""?Zu="utf-16le":lp[0]===""&&lp[1]===""&&lp[2]===""&&(Zu="utf-8"),Zu)try{const Ap=new TextDecoder(Zu,{fatal:!0}),Np=bu(lp);return Ap.decode(Np)}catch(Ap){uu(`stringToPDFString: "${Ap}".`)}}const $u=[];for(let Zu=0,Ap=lp.length;Zu<Ap;Zu++){const Np=Pu[lp.charCodeAt(Zu)];$u.push(Np?String.fromCharCode(Np):lp.charAt(Zu))}return $u.join("")}function Ju(lp){return decodeURIComponent(escape(lp))}function Vu(lp){return unescape(encodeURIComponent(lp))}function Mu(lp){return typeof lp=="object"&&(lp==null?void 0:lp.byteLength)!==void 0}function hp(lp,$u){if(lp.length!==$u.length)return!1;for(let Zu=0,Ap=lp.length;Zu<Ap;Zu++)if(lp[Zu]!==$u[Zu])return!1;return!0}function mp(lp=new Date){return[lp.getUTCFullYear().toString(),(lp.getUTCMonth()+1).toString().padStart(2,"0"),lp.getUTCDate().toString().padStart(2,"0"),lp.getUTCHours().toString().padStart(2,"0"),lp.getUTCMinutes().toString().padStart(2,"0"),lp.getUTCSeconds().toString().padStart(2,"0")].join("")}class Rp{constructor(){_d(this,qp,!1);this.promise=new Promise(($u,Zu)=>{this.resolve=Ap=>{ep(this,qp,!0),$u(Ap)},this.reject=Ap=>{ep(this,qp,!0),Zu(Ap)}})}get settled(){return Wl(this,qp)}}qp=new WeakMap,is.PromiseCapability=Rp;let Lp=null,Bp=null;function Tp(lp){return Lp||(Lp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Bp=new Map([["","t"]])),lp.replaceAll(Lp,($u,Zu,Ap)=>Zu?Zu.normalize("NFKC"):Bp.get(Ap))}function Ip(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const lp=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(lp);else for(let $u=0;$u<32;$u++)lp[$u]=Math.floor(Math.random()*255);return _u(lp)}const Hp="pdfjs_internal_id_";is.AnnotationPrefix=Hp},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var cs,us,hs,lo,qm,Hx,ga,ba,xa,_a,$a,xl,yl,wl,_l,Vx,Sl,Cl,w1,Dl,Fl;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(Al){if(typeof Al=="string"||Al instanceof URL?Al={url:Al}:(0,_util.isArrayBuffer)(Al)&&(Al={data:Al}),typeof Al!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!Al.url&&!Al.data&&!Al.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const Rl=new PDFDocumentLoadingTask,{docId:Il}=Rl,Bl=Al.url?getUrlProp(Al.url):null,Ol=Al.data?getDataProp(Al.data):null,zl=Al.httpHeaders||null,Hl=Al.withCredentials===!0,ou=Al.password??null,au=Al.range instanceof PDFDataRangeTransport?Al.range:null,_c=Number.isInteger(Al.rangeChunkSize)&&Al.rangeChunkSize>0?Al.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let uu=Al.worker instanceof PDFWorker?Al.worker:null;const lu=Al.verbosity,Kl=typeof Al.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(Al.docBaseUrl)?Al.docBaseUrl:null,xu=typeof Al.cMapUrl=="string"?Al.cMapUrl:null,pu=Al.cMapPacked!==!1,Ll=Al.CMapReaderFactory||DefaultCMapReaderFactory,Nl=typeof Al.standardFontDataUrl=="string"?Al.standardFontDataUrl:null,Ml=Al.StandardFontDataFactory||DefaultStandardFontDataFactory,Ul=Al.stopAtErrors!==!0,Vl=Number.isInteger(Al.maxImageSize)&&Al.maxImageSize>-1?Al.maxImageSize:-1,Ql=Al.isEvalSupported!==!1,Jl=typeof Al.isOffscreenCanvasSupported=="boolean"?Al.isOffscreenCanvasSupported:!_util.isNodeJS,iu=Number.isInteger(Al.canvasMaxAreaInBytes)?Al.canvasMaxAreaInBytes:-1,fu=typeof Al.disableFontFace=="boolean"?Al.disableFontFace:_util.isNodeJS,_u=Al.fontExtraProperties===!0,bu=Al.enableXfa===!0,Cu=Al.ownerDocument||globalThis.document,Tu=Al.disableRange===!0,Fu=Al.disableStream===!0,ku=Al.disableAutoFetch===!0,tu=Al.pdfBug===!0,eu=au?au.length:Al.length??NaN,gu=typeof Al.useSystemFonts=="boolean"?Al.useSystemFonts:!_util.isNodeJS&&!fu,ru=typeof Al.useWorkerFetch=="boolean"?Al.useWorkerFetch:Ll===_display_utils.DOMCMapReaderFactory&&Ml===_display_utils.DOMStandardFontDataFactory&&xu&&Nl&&(0,_display_utils.isValidFetchUrl)(xu,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Nl,document.baseURI),Pu=Al.canvasFactory||new DefaultCanvasFactory({ownerDocument:Cu}),Lu=Al.filterFactory||new DefaultFilterFactory({docId:Il,ownerDocument:Cu}),Ju=null;(0,_util.setVerbosityLevel)(lu);const Vu={canvasFactory:Pu,filterFactory:Lu};if(ru||(Vu.cMapReaderFactory=new Ll({baseUrl:xu,isCompressed:pu}),Vu.standardFontDataFactory=new Ml({baseUrl:Nl})),!uu){const mp={verbosity:lu,port:_worker_options.GlobalWorkerOptions.workerPort};uu=mp.port?PDFWorker.fromPort(mp):new PDFWorker(mp),Rl._worker=uu}const Mu={docId:Il,apiVersion:"3.11.174",data:Ol,password:ou,disableAutoFetch:ku,rangeChunkSize:_c,length:eu,docBaseUrl:Kl,enableXfa:bu,evaluatorOptions:{maxImageSize:Vl,disableFontFace:fu,ignoreErrors:Ul,isEvalSupported:Ql,isOffscreenCanvasSupported:Jl,canvasMaxAreaInBytes:iu,fontExtraProperties:_u,useSystemFonts:gu,cMapUrl:ru?xu:null,standardFontDataUrl:ru?Nl:null}},hp={ignoreErrors:Ul,isEvalSupported:Ql,disableFontFace:fu,fontExtraProperties:_u,enableXfa:bu,ownerDocument:Cu,disableAutoFetch:ku,pdfBug:tu,styleElement:Ju};return uu.promise.then(function(){if(Rl.destroyed)throw new Error("Loading aborted");const mp=_fetchDocument(uu,Mu),Rp=new Promise(function(Lp){let Bp;au?Bp=new _transport_stream.PDFDataTransportStream({length:eu,initialData:au.initialData,progressiveDone:au.progressiveDone,contentDispositionFilename:au.contentDispositionFilename,disableRange:Tu,disableStream:Fu},au):Ol||(Bp=(Ip=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ip):(0,_display_utils.isValidFetchUrl)(Ip.url)?new _displayFetch_stream.PDFFetchStream(Ip):new _displayNetwork.PDFNetworkStream(Ip))({url:Bl,length:eu,httpHeaders:zl,withCredentials:Hl,rangeChunkSize:_c,disableRange:Tu,disableStream:Fu})),Lp(Bp)});return Promise.all([mp,Rp]).then(function([Lp,Bp]){if(Rl.destroyed)throw new Error("Loading aborted");const Tp=new _message_handler.MessageHandler(Il,Lp,uu.port),Ip=new WorkerTransport(Tp,Rl,Bp,hp,Vu);Rl._transport=Ip,Tp.send("Ready",null)})}).catch(Rl._capability.reject),Rl}async function _fetchDocument(Al,Rl){if(Al.destroyed)throw new Error("Worker was destroyed");const Il=await Al.messageHandler.sendWithPromise("GetDocRequest",Rl,Rl.data?[Rl.data.buffer]:null);if(Al.destroyed)throw new Error("Worker was destroyed");return Il}function getUrlProp(Al){if(Al instanceof URL)return Al.href;try{return new URL(Al,window.location).href}catch{if(_util.isNodeJS&&typeof Al=="string")return Al}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(Al){if(_util.isNodeJS&&typeof Buffer<"u"&&Al instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(Al instanceof Uint8Array&&Al.byteLength===Al.buffer.byteLength)return Al;if(typeof Al=="string")return(0,_util.stringToBytes)(Al);if(typeof Al=="object"&&!isNaN(Al==null?void 0:Al.length)||(0,_util.isArrayBuffer)(Al))return new Uint8Array(Al);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const is=class is{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${bx(is,cs)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var Rl,Il,Bl;this.destroyed=!0;try{(Rl=this._worker)!=null&&Rl.port&&(this._worker._pendingDestroy=!0),await((Il=this._transport)==null?void 0:Il.destroy())}catch(Ol){throw(Bl=this._worker)!=null&&Bl.port&&delete this._worker._pendingDestroy,Ol}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};cs=new WeakMap,_d(is,cs,0);let PDFDocumentLoadingTask=is;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(Rl,Il,Bl=!1,Ol=null){this.length=Rl,this.initialData=Il,this.progressiveDone=Bl,this.contentDispositionFilename=Ol,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(Rl){this._rangeListeners.push(Rl)}addProgressListener(Rl){this._progressListeners.push(Rl)}addProgressiveReadListener(Rl){this._progressiveReadListeners.push(Rl)}addProgressiveDoneListener(Rl){this._progressiveDoneListeners.push(Rl)}onDataRange(Rl,Il){for(const Bl of this._rangeListeners)Bl(Rl,Il)}onDataProgress(Rl,Il){this._readyCapability.promise.then(()=>{for(const Bl of this._progressListeners)Bl(Rl,Il)})}onDataProgressiveRead(Rl){this._readyCapability.promise.then(()=>{for(const Il of this._progressiveReadListeners)Il(Rl)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const Rl of this._progressiveDoneListeners)Rl()})}transportReady(){this._readyCapability.resolve()}requestDataRange(Rl,Il){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(Rl,Il){this._pdfInfo=Rl,this._transport=Il,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Bl=>{if(!Bl)return Bl;const Ol=[];for(const zl in Bl)Ol.push(...Bl[zl]);return Ol}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(Rl){return this._transport.getPage(Rl)}getPageIndex(Rl){return this._transport.getPageIndex(Rl)}getDestinations(){return this._transport.getDestinations()}getDestination(Rl){return this._transport.getDestination(Rl)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(Rl=!1){return this._transport.startCleanup(Rl||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(Rl,Il,Bl,Ol=!1){_d(this,lo);_d(this,us,null);_d(this,hs,!1);this._pageIndex=Rl,this._pageInfo=Il,this._transport=Bl,this._stats=Ol?new _display_utils.StatTimer:null,this._pdfBug=Ol,this.commonObjs=Bl.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:Rl,rotation:Il=this.rotate,offsetX:Bl=0,offsetY:Ol=0,dontFlip:zl=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:Rl,rotation:Il,offsetX:Bl,offsetY:Ol,dontFlip:zl})}getAnnotations({intent:Rl="display"}={}){const Il=this._transport.getRenderingIntent(Rl);return this._transport.getAnnotations(this._pageIndex,Il.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var Rl;return((Rl=this._transport._htmlForXfa)==null?void 0:Rl.children[this._pageIndex])||null}render({canvasContext:Rl,viewport:Il,intent:Bl="display",annotationMode:Ol=_util.AnnotationMode.ENABLE,transform:zl=null,background:Hl=null,optionalContentConfigPromise:ou=null,annotationCanvasMap:au=null,pageColors:_c=null,printAnnotationStorage:uu=null}){var Ml,Ul;(Ml=this._stats)==null||Ml.time("Overall");const lu=this._transport.getRenderingIntent(Bl,Ol,uu);ep(this,hs,!1),Uu(this,lo,Hx).call(this),ou||(ou=this._transport.getOptionalContentConfig());let Kl=this._intentStates.get(lu.cacheKey);Kl||(Kl=Object.create(null),this._intentStates.set(lu.cacheKey,Kl)),Kl.streamReaderCancelTimeout&&(clearTimeout(Kl.streamReaderCancelTimeout),Kl.streamReaderCancelTimeout=null);const xu=!!(lu.renderingIntent&_util.RenderingIntentFlag.PRINT);Kl.displayReadyCapability||(Kl.displayReadyCapability=new _util.PromiseCapability,Kl.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ul=this._stats)==null||Ul.time("Page Request"),this._pumpOperatorList(lu));const pu=Vl=>{var Ql,Jl;Kl.renderTasks.delete(Ll),(this._maybeCleanupAfterRender||xu)&&ep(this,hs,!0),Uu(this,lo,qm).call(this,!xu),Vl?(Ll.capability.reject(Vl),this._abortOperatorList({intentState:Kl,reason:Vl instanceof Error?Vl:new Error(Vl)})):Ll.capability.resolve(),(Ql=this._stats)==null||Ql.timeEnd("Rendering"),(Jl=this._stats)==null||Jl.timeEnd("Overall")},Ll=new InternalRenderTask({callback:pu,params:{canvasContext:Rl,viewport:Il,transform:zl,background:Hl},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:au,operatorList:Kl.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!xu,pdfBug:this._pdfBug,pageColors:_c});(Kl.renderTasks||(Kl.renderTasks=new Set)).add(Ll);const Nl=Ll.task;return Promise.all([Kl.displayReadyCapability.promise,ou]).then(([Vl,Ql])=>{var Jl;if(this.destroyed){pu();return}(Jl=this._stats)==null||Jl.time("Rendering"),Ll.initializeGraphics({transparency:Vl,optionalContentConfig:Ql}),Ll.operatorListChanged()}).catch(pu),Nl}getOperatorList({intent:Rl="display",annotationMode:Il=_util.AnnotationMode.ENABLE,printAnnotationStorage:Bl=null}={}){var au;function Ol(){Hl.operatorList.lastChunk&&(Hl.opListReadCapability.resolve(Hl.operatorList),Hl.renderTasks.delete(ou))}const zl=this._transport.getRenderingIntent(Rl,Il,Bl,!0);let Hl=this._intentStates.get(zl.cacheKey);Hl||(Hl=Object.create(null),this._intentStates.set(zl.cacheKey,Hl));let ou;return Hl.opListReadCapability||(ou=Object.create(null),ou.operatorListChanged=Ol,Hl.opListReadCapability=new _util.PromiseCapability,(Hl.renderTasks||(Hl.renderTasks=new Set)).add(ou),Hl.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(au=this._stats)==null||au.time("Page Request"),this._pumpOperatorList(zl)),Hl.opListReadCapability.promise}streamTextContent({includeMarkedContent:Rl=!1,disableNormalization:Il=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:Rl===!0,disableNormalization:Il===!0},{highWaterMark:100,size(Ol){return Ol.items.length}})}getTextContent(Rl={}){if(this._transport._htmlForXfa)return this.getXfa().then(Bl=>_xfa_text.XfaText.textContent(Bl));const Il=this.streamTextContent(Rl);return new Promise(function(Bl,Ol){function zl(){Hl.read().then(function({value:au,done:_c}){if(_c){Bl(ou);return}Object.assign(ou.styles,au.styles),ou.items.push(...au.items),zl()},Ol)}const Hl=Il.getReader(),ou={items:[],styles:Object.create(null)};zl()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const Rl=[];for(const Il of this._intentStates.values())if(this._abortOperatorList({intentState:Il,reason:new Error("Page was destroyed."),force:!0}),!Il.opListReadCapability)for(const Bl of Il.renderTasks)Rl.push(Bl.completed),Bl.cancel();return this.objs.clear(),ep(this,hs,!1),Uu(this,lo,Hx).call(this),Promise.all(Rl)}cleanup(Rl=!1){ep(this,hs,!0);const Il=Uu(this,lo,qm).call(this,!1);return Rl&&Il&&this._stats&&(this._stats=new _display_utils.StatTimer),Il}_startRenderPage(Rl,Il){var Ol,zl;const Bl=this._intentStates.get(Il);Bl&&((Ol=this._stats)==null||Ol.timeEnd("Page Request"),(zl=Bl.displayReadyCapability)==null||zl.resolve(Rl))}_renderPageChunk(Rl,Il){for(let Bl=0,Ol=Rl.length;Bl<Ol;Bl++)Il.operatorList.fnArray.push(Rl.fnArray[Bl]),Il.operatorList.argsArray.push(Rl.argsArray[Bl]);Il.operatorList.lastChunk=Rl.lastChunk,Il.operatorList.separateAnnots=Rl.separateAnnots;for(const Bl of Il.renderTasks)Bl.operatorListChanged();Rl.lastChunk&&Uu(this,lo,qm).call(this,!0)}_pumpOperatorList({renderingIntent:Rl,cacheKey:Il,annotationStorageSerializable:Bl}){const{map:Ol,transfers:zl}=Bl,ou=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:Rl,cacheKey:Il,annotationStorage:Ol},zl).getReader(),au=this._intentStates.get(Il);au.streamReader=ou;const _c=()=>{ou.read().then(({value:uu,done:lu})=>{if(lu){au.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(uu,au),_c())},uu=>{if(au.streamReader=null,!this._transport.destroyed){if(au.operatorList){au.operatorList.lastChunk=!0;for(const lu of au.renderTasks)lu.operatorListChanged();Uu(this,lo,qm).call(this,!0)}if(au.displayReadyCapability)au.displayReadyCapability.reject(uu);else if(au.opListReadCapability)au.opListReadCapability.reject(uu);else throw uu}})};_c()}_abortOperatorList({intentState:Rl,reason:Il,force:Bl=!1}){if(Rl.streamReader){if(Rl.streamReaderCancelTimeout&&(clearTimeout(Rl.streamReaderCancelTimeout),Rl.streamReaderCancelTimeout=null),!Bl){if(Rl.renderTasks.size>0)return;if(Il instanceof _display_utils.RenderingCancelledException){let Ol=RENDERING_CANCELLED_TIMEOUT;Il.extraDelay>0&&Il.extraDelay<1e3&&(Ol+=Il.extraDelay),Rl.streamReaderCancelTimeout=setTimeout(()=>{Rl.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:Rl,reason:Il,force:!0})},Ol);return}}if(Rl.streamReader.cancel(new _util.AbortException(Il.message)).catch(()=>{}),Rl.streamReader=null,!this._transport.destroyed){for(const[Ol,zl]of this._intentStates)if(zl===Rl){this._intentStates.delete(Ol);break}this.cleanup()}}}get stats(){return this._stats}}us=new WeakMap,hs=new WeakMap,lo=new WeakSet,qm=function(Rl=!1){if(Uu(this,lo,Hx).call(this),!Wl(this,hs)||this.destroyed)return!1;if(Rl)return ep(this,us,setTimeout(()=>{ep(this,us,null),Uu(this,lo,qm).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:Il,operatorList:Bl}of this._intentStates.values())if(Il.size>0||!Bl.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ep(this,hs,!1),!0},Hx=function(){Wl(this,us)&&(clearTimeout(Wl(this,us)),ep(this,us,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){_d(this,ga,new Set);_d(this,ba,Promise.resolve())}postMessage(Rl,Il){const Bl={data:structuredClone(Rl,Il?{transfer:Il}:null)};Wl(this,ba).then(()=>{for(const Ol of Wl(this,ga))Ol.call(this,Bl)})}addEventListener(Rl,Il){Wl(this,ga).add(Il)}removeEventListener(Rl,Il){Wl(this,ga).delete(Il)}terminate(){Wl(this,ga).clear()}}ga=new WeakMap,ba=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Al=(xa=document==null?void 0:document.currentScript)==null?void 0:xa.src;Al&&(PDFWorkerUtil.fallbackWorkerSrc=Al.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Al,Rl){let Il;try{if(Il=new URL(Al),!Il.origin||Il.origin==="null")return!1}catch{return!1}const Bl=new URL(Rl,Il);return Il.origin===Bl.origin},PDFWorkerUtil.createCDNWrapper=function(Al){const Rl=`importScripts("${Al}");`;return URL.createObjectURL(new Blob([Rl]))}}const _PDFWorker=class _PDFWorker{constructor({name:Al=null,port:Rl=null,verbosity:Il=(0,_util.getVerbosityLevel)()}={}){var Bl;if(this.name=Al,this.destroyed=!1,this.verbosity=Il,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,Rl){if((Bl=Wl(_PDFWorker,_a))!=null&&Bl.has(Rl))throw new Error("Cannot use more than one PDFWorker per port.");(Wl(_PDFWorker,_a)||ep(_PDFWorker,_a,new WeakMap)).set(Rl,this),this._initializeFromPort(Rl);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Al){this._port=Al,this._messageHandler=new _message_handler.MessageHandler("main","worker",Al),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Al}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Al)||(Al=PDFWorkerUtil.createCDNWrapper(new URL(Al,window.location).href));const Rl=new Worker(Al),Il=new _message_handler.MessageHandler("main","worker",Rl),Bl=()=>{Rl.removeEventListener("error",Ol),Il.destroy(),Rl.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Ol=()=>{this._webWorker||Bl()};Rl.addEventListener("error",Ol),Il.on("test",Hl=>{if(Rl.removeEventListener("error",Ol),this.destroyed){Bl();return}Hl?(this._messageHandler=Il,this._port=Rl,this._webWorker=Rl,this._readyCapability.resolve(),Il.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Il.destroy(),Rl.terminate())}),Il.on("ready",Hl=>{if(Rl.removeEventListener("error",Ol),this.destroyed){Bl();return}try{zl()}catch{this._setupFakeWorker()}});const zl=()=>{const Hl=new Uint8Array;Il.send("test",Hl,[Hl.buffer])};zl();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Al=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const Rl=new LoopbackPort;this._port=Rl;const Il=`fake${PDFWorkerUtil.fakeWorkerId++}`,Bl=new _message_handler.MessageHandler(Il+"_worker",Il,Rl);Al.setup(Bl,Rl);const Ol=new _message_handler.MessageHandler(Il,Il+"_worker",Rl);this._messageHandler=Ol,this._readyCapability.resolve(),Ol.send("configure",{verbosity:this.verbosity})}).catch(Al=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Al.message}".`))})}destroy(){var Al;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(Al=Wl(_PDFWorker,_a))==null||Al.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Al){var Il;if(!(Al!=null&&Al.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const Rl=(Il=Wl(this,_a))==null?void 0:Il.get(Al.port);if(Rl){if(Rl._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return Rl}return new _PDFWorker(Al)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Al;try{return((Al=globalThis.pdfjsWorker)==null?void 0:Al.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};_a=new WeakMap,_d(_PDFWorker,_a);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(Rl,Il,Bl,Ol,zl){_d(this,_l);_d(this,$a,new Map);_d(this,xl,new Map);_d(this,yl,new Map);_d(this,wl,null);this.messageHandler=Rl,this.loadingTask=Il,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Ol.ownerDocument,styleElement:Ol.styleElement}),this._params=Ol,this.canvasFactory=zl.canvasFactory,this.filterFactory=zl.filterFactory,this.cMapReaderFactory=zl.cMapReaderFactory,this.standardFontDataFactory=zl.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Bl,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(Rl,Il=_util.AnnotationMode.ENABLE,Bl=null,Ol=!1){let zl=_util.RenderingIntentFlag.DISPLAY,Hl=_annotation_storage.SerializableEmpty;switch(Rl){case"any":zl=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":zl=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${Rl}`)}switch(Il){case _util.AnnotationMode.DISABLE:zl+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:zl+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:zl+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Hl=(zl&_util.RenderingIntentFlag.PRINT&&Bl instanceof _annotation_storage.PrintAnnotationStorage?Bl:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Il}`)}return Ol&&(zl+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:zl,cacheKey:`${zl}_${Hl.hash}`,annotationStorageSerializable:Hl}}destroy(){var Bl;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Bl=Wl(this,wl))==null||Bl.reject(new Error("Worker was destroyed during onPassword callback"));const Rl=[];for(const Ol of Wl(this,xl).values())Rl.push(Ol._destroy());Wl(this,xl).clear(),Wl(this,yl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Il=this.messageHandler.sendWithPromise("Terminate",null);return Rl.push(Il),Promise.all(Rl).then(()=>{var Ol;this.commonObjs.clear(),this.fontLoader.clear(),Wl(this,$a).clear(),this.filterFactory.destroy(),(Ol=this._networkStream)==null||Ol.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:Rl,loadingTask:Il}=this;Rl.on("GetReader",(Bl,Ol)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=zl=>{this._lastProgress={loaded:zl.loaded,total:zl.total}},Ol.onPull=()=>{this._fullReader.read().then(function({value:zl,done:Hl}){if(Hl){Ol.close();return}(0,_util.assert)(zl instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Ol.enqueue(new Uint8Array(zl),1,[zl])}).catch(zl=>{Ol.error(zl)})},Ol.onCancel=zl=>{this._fullReader.cancel(zl),Ol.ready.catch(Hl=>{if(!this.destroyed)throw Hl})}}),Rl.on("ReaderHeadersReady",Bl=>{const Ol=new _util.PromiseCapability,zl=this._fullReader;return zl.headersReady.then(()=>{var Hl;(!zl.isStreamingSupported||!zl.isRangeSupported)&&(this._lastProgress&&((Hl=Il.onProgress)==null||Hl.call(Il,this._lastProgress)),zl.onProgress=ou=>{var au;(au=Il.onProgress)==null||au.call(Il,{loaded:ou.loaded,total:ou.total})}),Ol.resolve({isStreamingSupported:zl.isStreamingSupported,isRangeSupported:zl.isRangeSupported,contentLength:zl.contentLength})},Ol.reject),Ol.promise}),Rl.on("GetRangeReader",(Bl,Ol)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const zl=this._networkStream.getRangeReader(Bl.begin,Bl.end);if(!zl){Ol.close();return}Ol.onPull=()=>{zl.read().then(function({value:Hl,done:ou}){if(ou){Ol.close();return}(0,_util.assert)(Hl instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Ol.enqueue(new Uint8Array(Hl),1,[Hl])}).catch(Hl=>{Ol.error(Hl)})},Ol.onCancel=Hl=>{zl.cancel(Hl),Ol.ready.catch(ou=>{if(!this.destroyed)throw ou})}}),Rl.on("GetDoc",({pdfInfo:Bl})=>{this._numPages=Bl.numPages,this._htmlForXfa=Bl.htmlForXfa,delete Bl.htmlForXfa,Il._capability.resolve(new PDFDocumentProxy(Bl,this))}),Rl.on("DocException",function(Bl){let Ol;switch(Bl.name){case"PasswordException":Ol=new _util.PasswordException(Bl.message,Bl.code);break;case"InvalidPDFException":Ol=new _util.InvalidPDFException(Bl.message);break;case"MissingPDFException":Ol=new _util.MissingPDFException(Bl.message);break;case"UnexpectedResponseException":Ol=new _util.UnexpectedResponseException(Bl.message,Bl.status);break;case"UnknownErrorException":Ol=new _util.UnknownErrorException(Bl.message,Bl.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Il._capability.reject(Ol)}),Rl.on("PasswordRequest",Bl=>{if(ep(this,wl,new _util.PromiseCapability),Il.onPassword){const Ol=zl=>{zl instanceof Error?Wl(this,wl).reject(zl):Wl(this,wl).resolve({password:zl})};try{Il.onPassword(Ol,Bl.code)}catch(zl){Wl(this,wl).reject(zl)}}else Wl(this,wl).reject(new _util.PasswordException(Bl.message,Bl.code));return Wl(this,wl).promise}),Rl.on("DataLoaded",Bl=>{var Ol;(Ol=Il.onProgress)==null||Ol.call(Il,{loaded:Bl.length,total:Bl.length}),this.downloadInfoCapability.resolve(Bl)}),Rl.on("StartRenderPage",Bl=>{if(this.destroyed)return;Wl(this,xl).get(Bl.pageIndex)._startRenderPage(Bl.transparency,Bl.cacheKey)}),Rl.on("commonobj",([Bl,Ol,zl])=>{var Hl;if(!this.destroyed&&!this.commonObjs.has(Bl))switch(Ol){case"Font":const ou=this._params;if("error"in zl){const uu=zl.error;(0,_util.warn)(`Error during font loading: ${uu}`),this.commonObjs.resolve(Bl,uu);break}const au=ou.pdfBug&&((Hl=globalThis.FontInspector)!=null&&Hl.enabled)?(uu,lu)=>globalThis.FontInspector.fontAdded(uu,lu):null,_c=new _font_loader.FontFaceObject(zl,{isEvalSupported:ou.isEvalSupported,disableFontFace:ou.disableFontFace,ignoreErrors:ou.ignoreErrors,inspectFont:au});this.fontLoader.bind(_c).catch(uu=>Rl.sendWithPromise("FontFallback",{id:Bl})).finally(()=>{!ou.fontExtraProperties&&_c.data&&(_c.data=null),this.commonObjs.resolve(Bl,_c)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Bl,zl);break;default:throw new Error(`Got unknown common object type ${Ol}`)}}),Rl.on("obj",([Bl,Ol,zl,Hl])=>{var au;if(this.destroyed)return;const ou=Wl(this,xl).get(Ol);if(!ou.objs.has(Bl))switch(zl){case"Image":if(ou.objs.resolve(Bl,Hl),Hl){let _c;if(Hl.bitmap){const{width:uu,height:lu}=Hl;_c=uu*lu*4}else _c=((au=Hl.data)==null?void 0:au.length)||0;_c>_util.MAX_IMAGE_SIZE_TO_CACHE&&(ou._maybeCleanupAfterRender=!0)}break;case"Pattern":ou.objs.resolve(Bl,Hl);break;default:throw new Error(`Got unknown object type ${zl}`)}}),Rl.on("DocProgress",Bl=>{var Ol;this.destroyed||(Ol=Il.onProgress)==null||Ol.call(Il,{loaded:Bl.loaded,total:Bl.total})}),Rl.on("FetchBuiltInCMap",Bl=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Bl):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),Rl.on("FetchStandardFontData",Bl=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Bl):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Bl;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:Rl,transfers:Il}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:Rl,filename:((Bl=this._fullReader)==null?void 0:Bl.filename)??null},Il).finally(()=>{this.annotationStorage.resetModified()})}getPage(Rl){if(!Number.isInteger(Rl)||Rl<=0||Rl>this._numPages)return Promise.reject(new Error("Invalid page request."));const Il=Rl-1,Bl=Wl(this,yl).get(Il);if(Bl)return Bl;const Ol=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Il}).then(zl=>{if(this.destroyed)throw new Error("Transport destroyed");const Hl=new PDFPageProxy(Il,zl,this,this._params.pdfBug);return Wl(this,xl).set(Il,Hl),Hl});return Wl(this,yl).set(Il,Ol),Ol}getPageIndex(Rl){return typeof Rl!="object"||Rl===null||!Number.isInteger(Rl.num)||Rl.num<0||!Number.isInteger(Rl.gen)||Rl.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:Rl.num,gen:Rl.gen})}getAnnotations(Rl,Il){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:Rl,intent:Il})}getFieldObjects(){return Uu(this,_l,Vx).call(this,"GetFieldObjects")}hasJSActions(){return Uu(this,_l,Vx).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(Rl){return typeof Rl!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:Rl})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Uu(this,_l,Vx).call(this,"GetDocJSActions")}getPageJSActions(Rl){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:Rl})}getStructTree(Rl){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:Rl})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(Rl=>new _optional_content_config.OptionalContentConfig(Rl))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const Rl="GetMetadata",Il=Wl(this,$a).get(Rl);if(Il)return Il;const Bl=this.messageHandler.sendWithPromise(Rl,null).then(Ol=>{var zl,Hl;return{info:Ol[0],metadata:Ol[1]?new _metadata.Metadata(Ol[1]):null,contentDispositionFilename:((zl=this._fullReader)==null?void 0:zl.filename)??null,contentLength:((Hl=this._fullReader)==null?void 0:Hl.contentLength)??null}});return Wl(this,$a).set(Rl,Bl),Bl}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(Rl=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const Il of Wl(this,xl).values())if(!Il.cleanup())throw new Error(`startCleanup: Page ${Il.pageNumber} is currently rendering.`);this.commonObjs.clear(),Rl||this.fontLoader.clear(),Wl(this,$a).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:Rl,enableXfa:Il}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:Rl,enableXfa:Il})}}$a=new WeakMap,xl=new WeakMap,yl=new WeakMap,wl=new WeakMap,_l=new WeakSet,Vx=function(Rl,Il=null){const Bl=Wl(this,$a).get(Rl);if(Bl)return Bl;const Ol=this.messageHandler.sendWithPromise(Rl,Il);return Wl(this,$a).set(Rl,Ol),Ol};class PDFObjects{constructor(){_d(this,Cl);_d(this,Sl,Object.create(null))}get(Rl,Il=null){if(Il){const Ol=Uu(this,Cl,w1).call(this,Rl);return Ol.capability.promise.then(()=>Il(Ol.data)),null}const Bl=Wl(this,Sl)[Rl];if(!(Bl!=null&&Bl.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${Rl}.`);return Bl.data}has(Rl){const Il=Wl(this,Sl)[Rl];return(Il==null?void 0:Il.capability.settled)||!1}resolve(Rl,Il=null){const Bl=Uu(this,Cl,w1).call(this,Rl);Bl.data=Il,Bl.capability.resolve()}clear(){var Rl;for(const Il in Wl(this,Sl)){const{data:Bl}=Wl(this,Sl)[Il];(Rl=Bl==null?void 0:Bl.bitmap)==null||Rl.close()}ep(this,Sl,Object.create(null))}}Sl=new WeakMap,Cl=new WeakSet,w1=function(Rl){var Il;return(Il=Wl(this,Sl))[Rl]||(Il[Rl]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(Rl){_d(this,Dl,null);ep(this,Dl,Rl),this.onContinue=null}get promise(){return Wl(this,Dl).capability.promise}cancel(Rl=0){Wl(this,Dl).cancel(null,Rl)}get separateAnnots(){const{separateAnnots:Rl}=Wl(this,Dl).operatorList;if(!Rl)return!1;const{annotationCanvasMap:Il}=Wl(this,Dl);return Rl.form||Rl.canvas&&(Il==null?void 0:Il.size)>0}}Dl=new WeakMap,exports.RenderTask=RenderTask;const Pl=class Pl{constructor({callback:Rl,params:Il,objs:Bl,commonObjs:Ol,annotationCanvasMap:zl,operatorList:Hl,pageIndex:ou,canvasFactory:au,filterFactory:_c,useRequestAnimationFrame:uu=!1,pdfBug:lu=!1,pageColors:Kl=null}){this.callback=Rl,this.params=Il,this.objs=Bl,this.commonObjs=Ol,this.annotationCanvasMap=zl,this.operatorListIdx=null,this.operatorList=Hl,this._pageIndex=ou,this.canvasFactory=au,this.filterFactory=_c,this._pdfBug=lu,this.pageColors=Kl,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=uu===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Il.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:Rl=!1,optionalContentConfig:Il}){var ou,au;if(this.cancelled)return;if(this._canvas){if(Wl(Pl,Fl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Wl(Pl,Fl).add(this._canvas)}this._pdfBug&&((ou=globalThis.StepperManager)!=null&&ou.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Bl,viewport:Ol,transform:zl,background:Hl}=this.params;this.gfx=new _canvas.CanvasGraphics(Bl,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Il},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:zl,viewport:Ol,transparency:Rl,background:Hl}),this.operatorListIdx=0,this.graphicsReady=!0,(au=this.graphicsReadyCallback)==null||au.call(this)}cancel(Rl=null,Il=0){var Bl;this.running=!1,this.cancelled=!0,(Bl=this.gfx)==null||Bl.endDrawing(),Wl(Pl,Fl).delete(this._canvas),this.callback(Rl||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,Il))}operatorListChanged(){var Rl;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(Rl=this.stepper)==null||Rl.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Wl(Pl,Fl).delete(this._canvas),this.callback())))}};Fl=new WeakMap,_d(Pl,Fl,new WeakSet);let InternalRenderTask=Pl;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(cs,is,us)=>{var xa,_a,$a,iv,yl;Object.defineProperty(is,"__esModule",{value:!0}),is.SerializableEmpty=is.PrintAnnotationStorage=is.AnnotationStorage=void 0;var hs=us(1),lo=us(4),co=us(8);const uo=Object.freeze({map:null,hash:"",transfers:void 0});is.SerializableEmpty=uo;class ga{constructor(){_d(this,$a);_d(this,xa,!1);_d(this,_a,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(_l,El){const Sl=Wl(this,_a).get(_l);return Sl===void 0?El:Object.assign(El,Sl)}getRawValue(_l){return Wl(this,_a).get(_l)}remove(_l){if(Wl(this,_a).delete(_l),Wl(this,_a).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const El of Wl(this,_a).values())if(El instanceof lo.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(_l,El){const Sl=Wl(this,_a).get(_l);let Cl=!1;if(Sl!==void 0)for(const[Tl,Dl]of Object.entries(El))Sl[Tl]!==Dl&&(Cl=!0,Sl[Tl]=Dl);else Cl=!0,Wl(this,_a).set(_l,El);Cl&&Uu(this,$a,iv).call(this),El instanceof lo.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(El.constructor._type)}has(_l){return Wl(this,_a).has(_l)}getAll(){return Wl(this,_a).size>0?(0,hs.objectFromMap)(Wl(this,_a)):null}setAll(_l){for(const[El,Sl]of Object.entries(_l))this.setValue(El,Sl)}get size(){return Wl(this,_a).size}resetModified(){Wl(this,xa)&&(ep(this,xa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ba(this)}get serializable(){if(Wl(this,_a).size===0)return uo;const _l=new Map,El=new co.MurmurHash3_64,Sl=[],Cl=Object.create(null);let Tl=!1;for(const[Dl,Fl]of Wl(this,_a)){const Pl=Fl instanceof lo.AnnotationEditor?Fl.serialize(!1,Cl):Fl;Pl&&(_l.set(Dl,Pl),El.update(`${Dl}:${JSON.stringify(Pl)}`),Tl||(Tl=!!Pl.bitmap))}if(Tl)for(const Dl of _l.values())Dl.bitmap&&Sl.push(Dl.bitmap);return _l.size>0?{map:_l,hash:El.hexdigest(),transfers:Sl}:uo}}xa=new WeakMap,_a=new WeakMap,$a=new WeakSet,iv=function(){Wl(this,xa)||(ep(this,xa,!0),typeof this.onSetModified=="function"&&this.onSetModified())},is.AnnotationStorage=ga;class ba extends ga{constructor(El){super();_d(this,yl);const{map:Sl,hash:Cl,transfers:Tl}=El.serializable,Dl=structuredClone(Sl,Tl?{transfer:Tl}:null);ep(this,yl,{map:Dl,hash:Cl,transfers:Tl})}get print(){(0,hs.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return Wl(this,yl)}}yl=new WeakMap,is.PrintAnnotationStorage=ba},(cs,is,us)=>{var ba,xa,_a,$a,xl,yl,wl,_l,El,Sl,Cl,Tl,Dl,Fl,Pl,S1,E1,Il,C1,T1,sv,ov,av,A1,lv;Object.defineProperty(is,"__esModule",{value:!0}),is.AnnotationEditor=void 0;var hs=us(5),lo=us(1),co=us(6);const uu=class uu{constructor(Kl){_d(this,Pl);_d(this,ba,"");_d(this,xa,!1);_d(this,_a,null);_d(this,$a,null);_d(this,xl,null);_d(this,yl,!1);_d(this,wl,null);_d(this,_l,this.focusin.bind(this));_d(this,El,this.focusout.bind(this));_d(this,Sl,!1);_d(this,Cl,!1);_d(this,Tl,!1);c0(this,"_initialOptions",Object.create(null));c0(this,"_uiManager",null);c0(this,"_focusEventsAllowed",!0);c0(this,"_l10nPromise",null);_d(this,Dl,!1);_d(this,Fl,uu._zIndex++);this.constructor===uu&&(0,lo.unreachable)("Cannot initialize AnnotationEditor."),this.parent=Kl.parent,this.id=Kl.id,this.width=this.height=null,this.pageIndex=Kl.parent.pageIndex,this.name=Kl.name,this.div=null,this._uiManager=Kl.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=Kl.isCentered,this._structTreeParentId=null;const{rotation:xu,rawDims:{pageWidth:pu,pageHeight:Ll,pageX:Nl,pageY:Ml}}=this.parent.viewport;this.rotation=xu,this.pageRotation=(360+xu-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[pu,Ll],this.pageTranslation=[Nl,Ml];const[Ul,Vl]=this.parentDimensions;this.x=Kl.x/Ul,this.y=Kl.y/Vl,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,lo.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(Kl){const xu=new ga({id:Kl.parent.getNextId(),parent:Kl.parent,uiManager:Kl._uiManager});xu.annotationElementId=Kl.annotationElementId,xu.deleted=!0,xu._uiManager.addToAnnotationStorage(xu)}static initialize(Kl,xu=null){if(uu._l10nPromise||(uu._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Ll=>[Ll,Kl.get(Ll)]))),xu!=null&&xu.strings)for(const Ll of xu.strings)uu._l10nPromise.set(Ll,Kl.get(Ll));if(uu._borderLineWidth!==-1)return;const pu=getComputedStyle(document.documentElement);uu._borderLineWidth=parseFloat(pu.getPropertyValue("--outline-width"))||0}static updateDefaultParams(Kl,xu){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(Kl){return!1}static paste(Kl,xu){(0,lo.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Wl(this,Dl)}set _isDraggable(Kl){var xu;ep(this,Dl,Kl),(xu=this.div)==null||xu.classList.toggle("draggable",Kl)}center(){const[Kl,xu]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*xu/(Kl*2),this.y+=this.width*Kl/(xu*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*xu/(Kl*2),this.y-=this.width*Kl/(xu*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(Kl){this._uiManager.addCommands(Kl)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Wl(this,Fl)}setParent(Kl){Kl!==null&&(this.pageIndex=Kl.pageIndex,this.pageDimensions=Kl.pageDimensions),this.parent=Kl}focusin(Kl){this._focusEventsAllowed&&(Wl(this,Sl)?ep(this,Sl,!1):this.parent.setSelected(this))}focusout(Kl){var pu;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const xu=Kl.relatedTarget;xu!=null&&xu.closest(`#${this.id}`)||(Kl.preventDefault(),(pu=this.parent)!=null&&pu.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(Kl,xu,pu,Ll){const[Nl,Ml]=this.parentDimensions;[pu,Ll]=this.screenToPageTranslation(pu,Ll),this.x=(Kl+pu)/Nl,this.y=(xu+Ll)/Ml,this.fixAndSetPosition()}translate(Kl,xu){Uu(this,Pl,S1).call(this,this.parentDimensions,Kl,xu)}translateInPage(Kl,xu){Uu(this,Pl,S1).call(this,this.pageDimensions,Kl,xu),this.div.scrollIntoView({block:"nearest"})}drag(Kl,xu){const[pu,Ll]=this.parentDimensions;if(this.x+=Kl/pu,this.y+=xu/Ll,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Ql,y:Jl}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Ql,Jl)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Nl,y:Ml}=this;const[Ul,Vl]=Uu(this,Pl,E1).call(this);Nl+=Ul,Ml+=Vl,this.div.style.left=`${(100*Nl).toFixed(2)}%`,this.div.style.top=`${(100*Ml).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[Kl,xu]=this.pageDimensions;let{x:pu,y:Ll,width:Nl,height:Ml}=this;switch(Nl*=Kl,Ml*=xu,pu*=Kl,Ll*=xu,this.rotation){case 0:pu=Math.max(0,Math.min(Kl-Nl,pu)),Ll=Math.max(0,Math.min(xu-Ml,Ll));break;case 90:pu=Math.max(0,Math.min(Kl-Ml,pu)),Ll=Math.min(xu,Math.max(Nl,Ll));break;case 180:pu=Math.min(Kl,Math.max(Nl,pu)),Ll=Math.min(xu,Math.max(Ml,Ll));break;case 270:pu=Math.min(Kl,Math.max(Ml,pu)),Ll=Math.max(0,Math.min(xu-Nl,Ll));break}this.x=pu/=Kl,this.y=Ll/=xu;const[Ul,Vl]=Uu(this,Pl,E1).call(this);pu+=Ul,Ll+=Vl;const{style:Ql}=this.div;Ql.left=`${(100*pu).toFixed(2)}%`,Ql.top=`${(100*Ll).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(Kl,xu){var pu;return Uu(pu=uu,Il,C1).call(pu,Kl,xu,this.parentRotation)}pageTranslationToScreen(Kl,xu){var pu;return Uu(pu=uu,Il,C1).call(pu,Kl,xu,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:Kl,pageDimensions:[xu,pu]}=this,Ll=xu*Kl,Nl=pu*Kl;return lo.FeatureTest.isCSSRoundSupported?[Math.round(Ll),Math.round(Nl)]:[Ll,Nl]}setDims(Kl,xu){var Nl;const[pu,Ll]=this.parentDimensions;this.div.style.width=`${(100*Kl/pu).toFixed(2)}%`,Wl(this,yl)||(this.div.style.height=`${(100*xu/Ll).toFixed(2)}%`),(Nl=Wl(this,_a))==null||Nl.classList.toggle("small",Kl<uu.SMALL_EDITOR_SIZE||xu<uu.SMALL_EDITOR_SIZE)}fixDims(){const{style:Kl}=this.div,{height:xu,width:pu}=Kl,Ll=pu.endsWith("%"),Nl=!Wl(this,yl)&&xu.endsWith("%");if(Ll&&Nl)return;const[Ml,Ul]=this.parentDimensions;Ll||(Kl.width=`${(100*parseFloat(pu)/Ml).toFixed(2)}%`),!Wl(this,yl)&&!Nl&&(Kl.height=`${(100*parseFloat(xu)/Ul).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(Wl(this,_a))return;const Kl=ep(this,_a,document.createElement("button"));Kl.className="altText";const xu=await uu._l10nPromise.get("editor_alt_text_button_label");Kl.textContent=xu,Kl.setAttribute("aria-label",xu),Kl.tabIndex="0",Kl.addEventListener("contextmenu",co.noContextMenu),Kl.addEventListener("pointerdown",pu=>pu.stopPropagation()),Kl.addEventListener("click",pu=>{pu.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),Kl.addEventListener("keydown",pu=>{pu.target===Kl&&pu.key==="Enter"&&(pu.preventDefault(),this._uiManager.editAltText(this))}),Uu(this,Pl,A1).call(this),this.div.append(Kl),uu.SMALL_EDITOR_SIZE||(uu.SMALL_EDITOR_SIZE=Math.min(128,Math.round(Kl.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:Wl(this,ba),decorative:Wl(this,xa)}}set altTextData({altText:Kl,decorative:xu}){Wl(this,ba)===Kl&&Wl(this,xa)===xu||(ep(this,ba,Kl),ep(this,xa,xu),Uu(this,Pl,A1).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",Wl(this,_l)),this.div.addEventListener("focusout",Wl(this,El));const[Kl,xu]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*xu/Kl).toFixed(2)}%`,this.div.style.maxHeight=`${(100*Kl/xu).toFixed(2)}%`);const[pu,Ll]=this.getInitialTranslation();return this.translate(pu,Ll),(0,hs.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(Kl){const{isMac:xu}=lo.FeatureTest.platform;if(Kl.button!==0||Kl.ctrlKey&&xu){Kl.preventDefault();return}ep(this,Sl,!0),Uu(this,Pl,lv).call(this,Kl)}moveInDOM(){var Kl;(Kl=this.parent)==null||Kl.moveEditorInDOM(this)}_setParentAndPosition(Kl,xu,pu){Kl.changeParent(this),this.x=xu,this.y=pu,this.fixAndSetPosition()}getRect(Kl,xu){const pu=this.parentScale,[Ll,Nl]=this.pageDimensions,[Ml,Ul]=this.pageTranslation,Vl=Kl/pu,Ql=xu/pu,Jl=this.x*Ll,iu=this.y*Nl,fu=this.width*Ll,_u=this.height*Nl;switch(this.rotation){case 0:return[Jl+Vl+Ml,Nl-iu-Ql-_u+Ul,Jl+Vl+fu+Ml,Nl-iu-Ql+Ul];case 90:return[Jl+Ql+Ml,Nl-iu+Vl+Ul,Jl+Ql+_u+Ml,Nl-iu+Vl+fu+Ul];case 180:return[Jl-Vl-fu+Ml,Nl-iu+Ql+Ul,Jl-Vl+Ml,Nl-iu+Ql+_u+Ul];case 270:return[Jl-Ql-_u+Ml,Nl-iu-Vl-fu+Ul,Jl-Ql+Ml,Nl-iu-Vl+Ul];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(Kl,xu){const[pu,Ll,Nl,Ml]=Kl,Ul=Nl-pu,Vl=Ml-Ll;switch(this.rotation){case 0:return[pu,xu-Ml,Ul,Vl];case 90:return[pu,xu-Ll,Vl,Ul];case 180:return[Nl,xu-Ll,Ul,Vl];case 270:return[Nl,xu-Ml,Vl,Ul];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ep(this,Tl,!0)}disableEditMode(){ep(this,Tl,!1)}isInEditMode(){return Wl(this,Tl)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var Kl,xu;(Kl=this.div)==null||Kl.addEventListener("focusin",Wl(this,_l)),(xu=this.div)==null||xu.addEventListener("focusout",Wl(this,El))}serialize(Kl=!1,xu=null){(0,lo.unreachable)("An editor must be serializable")}static deserialize(Kl,xu,pu){const Ll=new this.prototype.constructor({parent:xu,id:xu.getNextId(),uiManager:pu});Ll.rotation=Kl.rotation;const[Nl,Ml]=Ll.pageDimensions,[Ul,Vl,Ql,Jl]=Ll.getRectInCurrentCoords(Kl.rect,Ml);return Ll.x=Ul/Nl,Ll.y=Vl/Ml,Ll.width=Ql/Nl,Ll.height=Jl/Ml,Ll}remove(){var Kl;this.div.removeEventListener("focusin",Wl(this,_l)),this.div.removeEventListener("focusout",Wl(this,El)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(Kl=Wl(this,_a))==null||Kl.remove(),ep(this,_a,null),ep(this,$a,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Uu(this,Pl,sv).call(this),Wl(this,wl).classList.remove("hidden"))}select(){var Kl;this.makeResizable(),(Kl=this.div)==null||Kl.classList.add("selectedEditor")}unselect(){var Kl,xu,pu;(Kl=Wl(this,wl))==null||Kl.classList.add("hidden"),(xu=this.div)==null||xu.classList.remove("selectedEditor"),(pu=this.div)!=null&&pu.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(Kl,xu){}disableEditing(){Wl(this,_a)&&(Wl(this,_a).hidden=!0)}enableEditing(){Wl(this,_a)&&(Wl(this,_a).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return Wl(this,Cl)}set isEditing(Kl){ep(this,Cl,Kl),this.parent&&(Kl?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(Kl,xu){ep(this,yl,!0);const pu=Kl/xu,{style:Ll}=this.div;Ll.aspectRatio=pu,Ll.height="auto"}static get MIN_SIZE(){return 16}};ba=new WeakMap,xa=new WeakMap,_a=new WeakMap,$a=new WeakMap,xl=new WeakMap,yl=new WeakMap,wl=new WeakMap,_l=new WeakMap,El=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,Dl=new WeakMap,Fl=new WeakMap,Pl=new WeakSet,S1=function([Kl,xu],pu,Ll){[pu,Ll]=this.screenToPageTranslation(pu,Ll),this.x+=pu/Kl,this.y+=Ll/xu,this.fixAndSetPosition()},E1=function(){const[Kl,xu]=this.parentDimensions,{_borderLineWidth:pu}=uu,Ll=pu/Kl,Nl=pu/xu;switch(this.rotation){case 90:return[-Ll,Nl];case 180:return[Ll,Nl];case 270:return[Ll,-Nl];default:return[-Ll,-Nl]}},Il=new WeakSet,C1=function(Kl,xu,pu){switch(pu){case 90:return[xu,-Kl];case 180:return[-Kl,-xu];case 270:return[-xu,Kl];default:return[Kl,xu]}},T1=function(Kl){switch(Kl){case 90:{const[xu,pu]=this.pageDimensions;return[0,-xu/pu,pu/xu,0]}case 180:return[-1,0,0,-1];case 270:{const[xu,pu]=this.pageDimensions;return[0,xu/pu,-pu/xu,0]}default:return[1,0,0,1]}},sv=function(){if(Wl(this,wl))return;ep(this,wl,document.createElement("div")),Wl(this,wl).classList.add("resizers");const Kl=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||Kl.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const xu of Kl){const pu=document.createElement("div");Wl(this,wl).append(pu),pu.classList.add("resizer",xu),pu.addEventListener("pointerdown",Uu(this,Pl,ov).bind(this,xu)),pu.addEventListener("contextmenu",co.noContextMenu)}this.div.prepend(Wl(this,wl))},ov=function(Kl,xu){xu.preventDefault();const{isMac:pu}=lo.FeatureTest.platform;if(xu.button!==0||xu.ctrlKey&&pu)return;const Ll=Uu(this,Pl,av).bind(this,Kl),Nl=this._isDraggable;this._isDraggable=!1;const Ml={passive:!0,capture:!0};window.addEventListener("pointermove",Ll,Ml);const Ul=this.x,Vl=this.y,Ql=this.width,Jl=this.height,iu=this.parent.div.style.cursor,fu=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(xu.target).cursor;const _u=()=>{this._isDraggable=Nl,window.removeEventListener("pointerup",_u),window.removeEventListener("blur",_u),window.removeEventListener("pointermove",Ll,Ml),this.parent.div.style.cursor=iu,this.div.style.cursor=fu;const bu=this.x,Cu=this.y,Tu=this.width,Fu=this.height;bu===Ul&&Cu===Vl&&Tu===Ql&&Fu===Jl||this.addCommands({cmd:()=>{this.width=Tu,this.height=Fu,this.x=bu,this.y=Cu;const[ku,tu]=this.parentDimensions;this.setDims(ku*Tu,tu*Fu),this.fixAndSetPosition()},undo:()=>{this.width=Ql,this.height=Jl,this.x=Ul,this.y=Vl;const[ku,tu]=this.parentDimensions;this.setDims(ku*Ql,tu*Jl),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",_u),window.addEventListener("blur",_u)},av=function(Kl,xu){const[pu,Ll]=this.parentDimensions,Nl=this.x,Ml=this.y,Ul=this.width,Vl=this.height,Ql=uu.MIN_SIZE/pu,Jl=uu.MIN_SIZE/Ll,iu=Tp=>Math.round(Tp*1e4)/1e4,fu=Uu(this,Pl,T1).call(this,this.rotation),_u=(Tp,Ip)=>[fu[0]*Tp+fu[2]*Ip,fu[1]*Tp+fu[3]*Ip],bu=Uu(this,Pl,T1).call(this,360-this.rotation),Cu=(Tp,Ip)=>[bu[0]*Tp+bu[2]*Ip,bu[1]*Tp+bu[3]*Ip];let Tu,Fu,ku=!1,tu=!1;switch(Kl){case"topLeft":ku=!0,Tu=(Tp,Ip)=>[0,0],Fu=(Tp,Ip)=>[Tp,Ip];break;case"topMiddle":Tu=(Tp,Ip)=>[Tp/2,0],Fu=(Tp,Ip)=>[Tp/2,Ip];break;case"topRight":ku=!0,Tu=(Tp,Ip)=>[Tp,0],Fu=(Tp,Ip)=>[0,Ip];break;case"middleRight":tu=!0,Tu=(Tp,Ip)=>[Tp,Ip/2],Fu=(Tp,Ip)=>[0,Ip/2];break;case"bottomRight":ku=!0,Tu=(Tp,Ip)=>[Tp,Ip],Fu=(Tp,Ip)=>[0,0];break;case"bottomMiddle":Tu=(Tp,Ip)=>[Tp/2,Ip],Fu=(Tp,Ip)=>[Tp/2,0];break;case"bottomLeft":ku=!0,Tu=(Tp,Ip)=>[0,Ip],Fu=(Tp,Ip)=>[Tp,0];break;case"middleLeft":tu=!0,Tu=(Tp,Ip)=>[0,Ip/2],Fu=(Tp,Ip)=>[Tp,Ip/2];break}const eu=Tu(Ul,Vl),gu=Fu(Ul,Vl);let ru=_u(...gu);const Pu=iu(Nl+ru[0]),Lu=iu(Ml+ru[1]);let Ju=1,Vu=1,[Mu,hp]=this.screenToPageTranslation(xu.movementX,xu.movementY);if([Mu,hp]=Cu(Mu/pu,hp/Ll),ku){const Tp=Math.hypot(Ul,Vl);Ju=Vu=Math.max(Math.min(Math.hypot(gu[0]-eu[0]-Mu,gu[1]-eu[1]-hp)/Tp,1/Ul,1/Vl),Ql/Ul,Jl/Vl)}else tu?Ju=Math.max(Ql,Math.min(1,Math.abs(gu[0]-eu[0]-Mu)))/Ul:Vu=Math.max(Jl,Math.min(1,Math.abs(gu[1]-eu[1]-hp)))/Vl;const mp=iu(Ul*Ju),Rp=iu(Vl*Vu);ru=_u(...Fu(mp,Rp));const Lp=Pu-ru[0],Bp=Lu-ru[1];this.width=mp,this.height=Rp,this.x=Lp,this.y=Bp,this.setDims(pu*mp,Ll*Rp),this.fixAndSetPosition()},A1=async function(){var pu;const Kl=Wl(this,_a);if(!Kl)return;if(!Wl(this,ba)&&!Wl(this,xa)){Kl.classList.remove("done"),(pu=Wl(this,$a))==null||pu.remove();return}uu._l10nPromise.get("editor_alt_text_edit_button_label").then(Ll=>{Kl.setAttribute("aria-label",Ll)});let xu=Wl(this,$a);if(!xu){ep(this,$a,xu=document.createElement("span")),xu.className="tooltip",xu.setAttribute("role","tooltip");const Ll=xu.id=`alt-text-tooltip-${this.id}`;Kl.setAttribute("aria-describedby",Ll);const Nl=100;Kl.addEventListener("mouseenter",()=>{ep(this,xl,setTimeout(()=>{ep(this,xl,null),Wl(this,$a).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Nl))}),Kl.addEventListener("mouseleave",()=>{var Ml;clearTimeout(Wl(this,xl)),ep(this,xl,null),(Ml=Wl(this,$a))==null||Ml.classList.remove("show")})}Kl.classList.add("done"),xu.innerText=Wl(this,xa)?await uu._l10nPromise.get("editor_alt_text_decorative_tooltip"):Wl(this,ba),xu.parentNode||Kl.append(xu)},lv=function(Kl){if(!this._isDraggable)return;const xu=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let pu,Ll;xu&&(pu={passive:!0,capture:!0},Ll=Ml=>{const[Ul,Vl]=this.screenToPageTranslation(Ml.movementX,Ml.movementY);this._uiManager.dragSelectedEditors(Ul,Vl)},window.addEventListener("pointermove",Ll,pu));const Nl=()=>{if(window.removeEventListener("pointerup",Nl),window.removeEventListener("blur",Nl),xu&&window.removeEventListener("pointermove",Ll,pu),ep(this,Sl,!1),!this._uiManager.endDragSession()){const{isMac:Ml}=lo.FeatureTest.platform;Kl.ctrlKey&&!Ml||Kl.shiftKey||Kl.metaKey&&Ml?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Nl),window.addEventListener("blur",Nl)},_d(uu,Il),c0(uu,"_borderLineWidth",-1),c0(uu,"_colorManager",new hs.ColorManager),c0(uu,"_zIndex",1),c0(uu,"SMALL_EDITOR_SIZE",0);let uo=uu;is.AnnotationEditor=uo;class ga extends uo{constructor(Kl){super(Kl),this.annotationElementId=Kl.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(cs,is,us)=>{var yl,wl,_l,El,Sl,F1,Dl,Fl,Pl,Al,Rl,cv,Ol,zl,Hl,ou,au,_c,uu,lu,Kl,xu,pu,Ll,Nl,Ml,Ul,Vl,Ql,Jl,iu,fu,_u,bu,Cu,Tu,Fu,ku,tu,eu,gu,ru,Pu,Lu,Ju,Vu,Mu,uv,k1,R1,Xx,D1,P1,_g,_x,dv,hv,I1,wx,O1;Object.defineProperty(is,"__esModule",{value:!0}),is.KeyboardManager=is.CommandManager=is.ColorManager=is.AnnotationEditorUIManager=void 0,is.bindEvents=co,is.opacityToHex=uo;var hs=us(1),lo=us(6);function co(Vp,Ru,Qu){for(const up of Qu)Ru.addEventListener(up,Vp[up].bind(Vp))}function uo(Vp){return Math.round(Math.min(255,Math.max(1,255*Vp))).toString(16).padStart(2,"0")}class ga{constructor(){_d(this,yl,0)}getId(){return`${hs.AnnotationEditorPrefix}${bx(this,yl)._++}`}}yl=new WeakMap;const Tl=class Tl{constructor(){_d(this,Sl);_d(this,wl,(0,hs.getUuid)());_d(this,_l,0);_d(this,El,null)}static get _isSVGFittingCanvas(){const Ru='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',up=new OffscreenCanvas(1,3).getContext("2d"),Ep=new Image;Ep.src=Ru;const Cp=Ep.decode().then(()=>(up.drawImage(Ep,0,0,1,1,0,0,1,3),new Uint32Array(up.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,hs.shadow)(this,"_isSVGFittingCanvas",Cp)}async getFromFile(Ru){const{lastModified:Qu,name:up,size:Ep,type:Cp}=Ru;return Uu(this,Sl,F1).call(this,`${Qu}_${up}_${Ep}_${Cp}`,Ru)}async getFromUrl(Ru){return Uu(this,Sl,F1).call(this,Ru,Ru)}async getFromId(Ru){Wl(this,El)||ep(this,El,new Map);const Qu=Wl(this,El).get(Ru);return Qu?Qu.bitmap?(Qu.refCounter+=1,Qu):Qu.file?this.getFromFile(Qu.file):this.getFromUrl(Qu.url):null}getSvgUrl(Ru){const Qu=Wl(this,El).get(Ru);return Qu!=null&&Qu.isSvg?Qu.svgUrl:null}deleteId(Ru){Wl(this,El)||ep(this,El,new Map);const Qu=Wl(this,El).get(Ru);Qu&&(Qu.refCounter-=1,Qu.refCounter===0&&(Qu.bitmap=null))}isValidId(Ru){return Ru.startsWith(`image_${Wl(this,wl)}_`)}};wl=new WeakMap,_l=new WeakMap,El=new WeakMap,Sl=new WeakSet,F1=async function(Ru,Qu){Wl(this,El)||ep(this,El,new Map);let up=Wl(this,El).get(Ru);if(up===null)return null;if(up!=null&&up.bitmap)return up.refCounter+=1,up;try{up||(up={bitmap:null,id:`image_${Wl(this,wl)}_${bx(this,_l)._++}`,refCounter:0,isSvg:!1});let Ep;if(typeof Qu=="string"){up.url=Qu;const Cp=await fetch(Qu);if(!Cp.ok)throw new Error(Cp.statusText);Ep=await Cp.blob()}else Ep=up.file=Qu;if(Ep.type==="image/svg+xml"){const Cp=Tl._isSVGFittingCanvas,Sp=new FileReader,vu=new Image,Zl=new Promise((Ou,Du)=>{vu.onload=()=>{up.bitmap=vu,up.isSvg=!0,Ou()},Sp.onload=async()=>{const $l=up.svgUrl=Sp.result;vu.src=await Cp?`${$l}#svgView(preserveAspectRatio(none))`:$l},vu.onerror=Sp.onerror=Du});Sp.readAsDataURL(Ep),await Zl}else up.bitmap=await createImageBitmap(Ep);up.refCounter=1}catch(Ep){console.error(Ep),up=null}return Wl(this,El).set(Ru,up),up&&Wl(this,El).set(up.id,up),up};let ba=Tl;class xa{constructor(Ru=128){_d(this,Dl,[]);_d(this,Fl,!1);_d(this,Pl);_d(this,Al,-1);ep(this,Pl,Ru)}add({cmd:Ru,undo:Qu,mustExec:up,type:Ep=NaN,overwriteIfSameType:Cp=!1,keepUndo:Sp=!1}){if(up&&Ru(),Wl(this,Fl))return;const vu={cmd:Ru,undo:Qu,type:Ep};if(Wl(this,Al)===-1){Wl(this,Dl).length>0&&(Wl(this,Dl).length=0),ep(this,Al,0),Wl(this,Dl).push(vu);return}if(Cp&&Wl(this,Dl)[Wl(this,Al)].type===Ep){Sp&&(vu.undo=Wl(this,Dl)[Wl(this,Al)].undo),Wl(this,Dl)[Wl(this,Al)]=vu;return}const Zl=Wl(this,Al)+1;Zl===Wl(this,Pl)?Wl(this,Dl).splice(0,1):(ep(this,Al,Zl),Zl<Wl(this,Dl).length&&Wl(this,Dl).splice(Zl)),Wl(this,Dl).push(vu)}undo(){Wl(this,Al)!==-1&&(ep(this,Fl,!0),Wl(this,Dl)[Wl(this,Al)].undo(),ep(this,Fl,!1),ep(this,Al,Wl(this,Al)-1))}redo(){Wl(this,Al)<Wl(this,Dl).length-1&&(ep(this,Al,Wl(this,Al)+1),ep(this,Fl,!0),Wl(this,Dl)[Wl(this,Al)].cmd(),ep(this,Fl,!1))}hasSomethingToUndo(){return Wl(this,Al)!==-1}hasSomethingToRedo(){return Wl(this,Al)<Wl(this,Dl).length-1}destroy(){ep(this,Dl,null)}}Dl=new WeakMap,Fl=new WeakMap,Pl=new WeakMap,Al=new WeakMap,is.CommandManager=xa;class _a{constructor(Ru){_d(this,Rl);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Qu}=hs.FeatureTest.platform;for(const[up,Ep,Cp={}]of Ru)for(const Sp of up){const vu=Sp.startsWith("mac+");Qu&&vu?(this.callbacks.set(Sp.slice(4),{callback:Ep,options:Cp}),this.allKeys.add(Sp.split("+").at(-1))):!Qu&&!vu&&(this.callbacks.set(Sp,{callback:Ep,options:Cp}),this.allKeys.add(Sp.split("+").at(-1)))}}exec(Ru,Qu){if(!this.allKeys.has(Qu.key))return;const up=this.callbacks.get(Uu(this,Rl,cv).call(this,Qu));if(!up)return;const{callback:Ep,options:{bubbles:Cp=!1,args:Sp=[],checker:vu=null}}=up;vu&&!vu(Ru,Qu)||(Ep.bind(Ru,...Sp)(),Cp||(Qu.stopPropagation(),Qu.preventDefault()))}}Rl=new WeakSet,cv=function(Ru){Ru.altKey&&this.buffer.push("alt"),Ru.ctrlKey&&this.buffer.push("ctrl"),Ru.metaKey&&this.buffer.push("meta"),Ru.shiftKey&&this.buffer.push("shift"),this.buffer.push(Ru.key);const Qu=this.buffer.join("+");return this.buffer.length=0,Qu},is.KeyboardManager=_a;const Bl=class Bl{get _colors(){const Ru=new Map([["CanvasText",null],["Canvas",null]]);return(0,lo.getColorValues)(Ru),(0,hs.shadow)(this,"_colors",Ru)}convert(Ru){const Qu=(0,lo.getRGB)(Ru);if(!window.matchMedia("(forced-colors: active)").matches)return Qu;for(const[up,Ep]of this._colors)if(Ep.every((Cp,Sp)=>Cp===Qu[Sp]))return Bl._colorsMapping.get(up);return Qu}getHexCode(Ru){const Qu=this._colors.get(Ru);return Qu?hs.Util.makeHexColor(...Qu):Ru}};c0(Bl,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let $a=Bl;is.ColorManager=$a;const Np=class Np{constructor(Ru,Qu,up,Ep,Cp,Sp){_d(this,Mu);_d(this,Ol,null);_d(this,zl,new Map);_d(this,Hl,new Map);_d(this,ou,null);_d(this,au,null);_d(this,_c,new xa);_d(this,uu,0);_d(this,lu,new Set);_d(this,Kl,null);_d(this,xu,null);_d(this,pu,new Set);_d(this,Ll,null);_d(this,Nl,new ga);_d(this,Ml,!1);_d(this,Ul,!1);_d(this,Vl,null);_d(this,Ql,hs.AnnotationEditorType.NONE);_d(this,Jl,new Set);_d(this,iu,null);_d(this,fu,this.blur.bind(this));_d(this,_u,this.focus.bind(this));_d(this,bu,this.copy.bind(this));_d(this,Cu,this.cut.bind(this));_d(this,Tu,this.paste.bind(this));_d(this,Fu,this.keydown.bind(this));_d(this,ku,this.onEditingAction.bind(this));_d(this,tu,this.onPageChanging.bind(this));_d(this,eu,this.onScaleChanging.bind(this));_d(this,gu,this.onRotationChanging.bind(this));_d(this,ru,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});_d(this,Pu,[0,0]);_d(this,Lu,null);_d(this,Ju,null);_d(this,Vu,null);ep(this,Ju,Ru),ep(this,Vu,Qu),ep(this,ou,up),this._eventBus=Ep,this._eventBus._on("editingaction",Wl(this,ku)),this._eventBus._on("pagechanging",Wl(this,tu)),this._eventBus._on("scalechanging",Wl(this,eu)),this._eventBus._on("rotationchanging",Wl(this,gu)),ep(this,au,Cp.annotationStorage),ep(this,Ll,Cp.filterFactory),ep(this,iu,Sp),this.viewParameters={realScale:lo.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Ru=Np.prototype,Qu=Cp=>{const{activeElement:Sp}=document;return Sp&&Wl(Cp,Ju).contains(Sp)&&Cp.hasSomethingToControl()},up=this.TRANSLATE_SMALL,Ep=this.TRANSLATE_BIG;return(0,hs.shadow)(this,"_keyboardManager",new _a([[["ctrl+a","mac+meta+a"],Ru.selectAll],[["ctrl+z","mac+meta+z"],Ru.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Ru.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Ru.delete],[["Escape","mac+Escape"],Ru.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Ru.translateSelectedEditors,{args:[-up,0],checker:Qu}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Ru.translateSelectedEditors,{args:[-Ep,0],checker:Qu}],[["ArrowRight","mac+ArrowRight"],Ru.translateSelectedEditors,{args:[up,0],checker:Qu}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Ru.translateSelectedEditors,{args:[Ep,0],checker:Qu}],[["ArrowUp","mac+ArrowUp"],Ru.translateSelectedEditors,{args:[0,-up],checker:Qu}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Ru.translateSelectedEditors,{args:[0,-Ep],checker:Qu}],[["ArrowDown","mac+ArrowDown"],Ru.translateSelectedEditors,{args:[0,up],checker:Qu}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Ru.translateSelectedEditors,{args:[0,Ep],checker:Qu}]]))}destroy(){Uu(this,Mu,Xx).call(this),Uu(this,Mu,k1).call(this),this._eventBus._off("editingaction",Wl(this,ku)),this._eventBus._off("pagechanging",Wl(this,tu)),this._eventBus._off("scalechanging",Wl(this,eu)),this._eventBus._off("rotationchanging",Wl(this,gu));for(const Ru of Wl(this,Hl).values())Ru.destroy();Wl(this,Hl).clear(),Wl(this,zl).clear(),Wl(this,pu).clear(),ep(this,Ol,null),Wl(this,Jl).clear(),Wl(this,_c).destroy(),Wl(this,ou).destroy()}get hcmFilter(){return(0,hs.shadow)(this,"hcmFilter",Wl(this,iu)?Wl(this,Ll).addHCMFilter(Wl(this,iu).foreground,Wl(this,iu).background):"none")}get direction(){return(0,hs.shadow)(this,"direction",getComputedStyle(Wl(this,Ju)).direction)}editAltText(Ru){var Qu;(Qu=Wl(this,ou))==null||Qu.editAltText(this,Ru)}onPageChanging({pageNumber:Ru}){ep(this,uu,Ru-1)}focusMainContainer(){Wl(this,Ju).focus()}findParent(Ru,Qu){for(const up of Wl(this,Hl).values()){const{x:Ep,y:Cp,width:Sp,height:vu}=up.div.getBoundingClientRect();if(Ru>=Ep&&Ru<=Ep+Sp&&Qu>=Cp&&Qu<=Cp+vu)return up}return null}disableUserSelect(Ru=!1){Wl(this,Vu).classList.toggle("noUserSelect",Ru)}addShouldRescale(Ru){Wl(this,pu).add(Ru)}removeShouldRescale(Ru){Wl(this,pu).delete(Ru)}onScaleChanging({scale:Ru}){this.commitOrRemove(),this.viewParameters.realScale=Ru*lo.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Qu of Wl(this,pu))Qu.onScaleChanging()}onRotationChanging({pagesRotation:Ru}){this.commitOrRemove(),this.viewParameters.rotation=Ru}addToAnnotationStorage(Ru){!Ru.isEmpty()&&Wl(this,au)&&!Wl(this,au).has(Ru.id)&&Wl(this,au).setValue(Ru.id,Ru)}blur(){if(!this.hasSelection)return;const{activeElement:Ru}=document;for(const Qu of Wl(this,Jl))if(Qu.div.contains(Ru)){ep(this,Vl,[Qu,Ru]),Qu._focusEventsAllowed=!1;break}}focus(){if(!Wl(this,Vl))return;const[Ru,Qu]=Wl(this,Vl);ep(this,Vl,null),Qu.addEventListener("focusin",()=>{Ru._focusEventsAllowed=!0},{once:!0}),Qu.focus()}addEditListeners(){Uu(this,Mu,R1).call(this),Uu(this,Mu,D1).call(this)}removeEditListeners(){Uu(this,Mu,Xx).call(this),Uu(this,Mu,P1).call(this)}copy(Ru){var up;if(Ru.preventDefault(),(up=Wl(this,Ol))==null||up.commitOrRemove(),!this.hasSelection)return;const Qu=[];for(const Ep of Wl(this,Jl)){const Cp=Ep.serialize(!0);Cp&&Qu.push(Cp)}Qu.length!==0&&Ru.clipboardData.setData("application/pdfjs",JSON.stringify(Qu))}cut(Ru){this.copy(Ru),this.delete()}paste(Ru){Ru.preventDefault();const{clipboardData:Qu}=Ru;for(const Cp of Qu.items)for(const Sp of Wl(this,xu))if(Sp.isHandlingMimeForPasting(Cp.type)){Sp.paste(Cp,this.currentLayer);return}let up=Qu.getData("application/pdfjs");if(!up)return;try{up=JSON.parse(up)}catch(Cp){(0,hs.warn)(`paste: "${Cp.message}".`);return}if(!Array.isArray(up))return;this.unselectAll();const Ep=this.currentLayer;try{const Cp=[];for(const Zl of up){const Ou=Ep.deserialize(Zl);if(!Ou)return;Cp.push(Ou)}const Sp=()=>{for(const Zl of Cp)Uu(this,Mu,I1).call(this,Zl);Uu(this,Mu,O1).call(this,Cp)},vu=()=>{for(const Zl of Cp)Zl.remove()};this.addCommands({cmd:Sp,undo:vu,mustExec:!0})}catch(Cp){(0,hs.warn)(`paste: "${Cp.message}".`)}}keydown(Ru){var Qu;(Qu=this.getActive())!=null&&Qu.shouldGetKeyboardEvents()||Np._keyboardManager.exec(this,Ru)}onEditingAction(Ru){["undo","redo","delete","selectAll"].includes(Ru.name)&&this[Ru.name]()}setEditingState(Ru){Ru?(Uu(this,Mu,uv).call(this),Uu(this,Mu,R1).call(this),Uu(this,Mu,D1).call(this),Uu(this,Mu,_g).call(this,{isEditing:Wl(this,Ql)!==hs.AnnotationEditorType.NONE,isEmpty:Uu(this,Mu,wx).call(this),hasSomethingToUndo:Wl(this,_c).hasSomethingToUndo(),hasSomethingToRedo:Wl(this,_c).hasSomethingToRedo(),hasSelectedEditor:!1})):(Uu(this,Mu,k1).call(this),Uu(this,Mu,Xx).call(this),Uu(this,Mu,P1).call(this),Uu(this,Mu,_g).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Ru){if(!Wl(this,xu)){ep(this,xu,Ru);for(const Qu of Wl(this,xu))Uu(this,Mu,_x).call(this,Qu.defaultPropertiesToUpdate)}}getId(){return Wl(this,Nl).getId()}get currentLayer(){return Wl(this,Hl).get(Wl(this,uu))}getLayer(Ru){return Wl(this,Hl).get(Ru)}get currentPageIndex(){return Wl(this,uu)}addLayer(Ru){Wl(this,Hl).set(Ru.pageIndex,Ru),Wl(this,Ml)?Ru.enable():Ru.disable()}removeLayer(Ru){Wl(this,Hl).delete(Ru.pageIndex)}updateMode(Ru,Qu=null){if(Wl(this,Ql)!==Ru){if(ep(this,Ql,Ru),Ru===hs.AnnotationEditorType.NONE){this.setEditingState(!1),Uu(this,Mu,hv).call(this);return}this.setEditingState(!0),Uu(this,Mu,dv).call(this),this.unselectAll();for(const up of Wl(this,Hl).values())up.updateMode(Ru);if(Qu){for(const up of Wl(this,zl).values())if(up.annotationElementId===Qu){this.setSelected(up),up.enterInEditMode();break}}}}updateToolbar(Ru){Ru!==Wl(this,Ql)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Ru})}updateParams(Ru,Qu){if(Wl(this,xu)){if(Ru===hs.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Ru);return}for(const up of Wl(this,Jl))up.updateParams(Ru,Qu);for(const up of Wl(this,xu))up.updateDefaultParams(Ru,Qu)}}enableWaiting(Ru=!1){if(Wl(this,Ul)!==Ru){ep(this,Ul,Ru);for(const Qu of Wl(this,Hl).values())Ru?Qu.disableClick():Qu.enableClick(),Qu.div.classList.toggle("waiting",Ru)}}getEditors(Ru){const Qu=[];for(const up of Wl(this,zl).values())up.pageIndex===Ru&&Qu.push(up);return Qu}getEditor(Ru){return Wl(this,zl).get(Ru)}addEditor(Ru){Wl(this,zl).set(Ru.id,Ru)}removeEditor(Ru){var Qu;Wl(this,zl).delete(Ru.id),this.unselect(Ru),(!Ru.annotationElementId||!Wl(this,lu).has(Ru.annotationElementId))&&((Qu=Wl(this,au))==null||Qu.remove(Ru.id))}addDeletedAnnotationElement(Ru){Wl(this,lu).add(Ru.annotationElementId),Ru.deleted=!0}isDeletedAnnotationElement(Ru){return Wl(this,lu).has(Ru)}removeDeletedAnnotationElement(Ru){Wl(this,lu).delete(Ru.annotationElementId),Ru.deleted=!1}setActiveEditor(Ru){Wl(this,Ol)!==Ru&&(ep(this,Ol,Ru),Ru&&Uu(this,Mu,_x).call(this,Ru.propertiesToUpdate))}toggleSelected(Ru){if(Wl(this,Jl).has(Ru)){Wl(this,Jl).delete(Ru),Ru.unselect(),Uu(this,Mu,_g).call(this,{hasSelectedEditor:this.hasSelection});return}Wl(this,Jl).add(Ru),Ru.select(),Uu(this,Mu,_x).call(this,Ru.propertiesToUpdate),Uu(this,Mu,_g).call(this,{hasSelectedEditor:!0})}setSelected(Ru){for(const Qu of Wl(this,Jl))Qu!==Ru&&Qu.unselect();Wl(this,Jl).clear(),Wl(this,Jl).add(Ru),Ru.select(),Uu(this,Mu,_x).call(this,Ru.propertiesToUpdate),Uu(this,Mu,_g).call(this,{hasSelectedEditor:!0})}isSelected(Ru){return Wl(this,Jl).has(Ru)}unselect(Ru){Ru.unselect(),Wl(this,Jl).delete(Ru),Uu(this,Mu,_g).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Wl(this,Jl).size!==0}undo(){Wl(this,_c).undo(),Uu(this,Mu,_g).call(this,{hasSomethingToUndo:Wl(this,_c).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Uu(this,Mu,wx).call(this)})}redo(){Wl(this,_c).redo(),Uu(this,Mu,_g).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Wl(this,_c).hasSomethingToRedo(),isEmpty:Uu(this,Mu,wx).call(this)})}addCommands(Ru){Wl(this,_c).add(Ru),Uu(this,Mu,_g).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Uu(this,Mu,wx).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Ru=[...Wl(this,Jl)],Qu=()=>{for(const Ep of Ru)Ep.remove()},up=()=>{for(const Ep of Ru)Uu(this,Mu,I1).call(this,Ep)};this.addCommands({cmd:Qu,undo:up,mustExec:!0})}commitOrRemove(){var Ru;(Ru=Wl(this,Ol))==null||Ru.commitOrRemove()}hasSomethingToControl(){return Wl(this,Ol)||this.hasSelection}selectAll(){for(const Ru of Wl(this,Jl))Ru.commit();Uu(this,Mu,O1).call(this,Wl(this,zl).values())}unselectAll(){if(Wl(this,Ol)){Wl(this,Ol).commitOrRemove();return}if(this.hasSelection){for(const Ru of Wl(this,Jl))Ru.unselect();Wl(this,Jl).clear(),Uu(this,Mu,_g).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Ru,Qu,up=!1){if(up||this.commitOrRemove(),!this.hasSelection)return;Wl(this,Pu)[0]+=Ru,Wl(this,Pu)[1]+=Qu;const[Ep,Cp]=Wl(this,Pu),Sp=[...Wl(this,Jl)],vu=1e3;Wl(this,Lu)&&clearTimeout(Wl(this,Lu)),ep(this,Lu,setTimeout(()=>{ep(this,Lu,null),Wl(this,Pu)[0]=Wl(this,Pu)[1]=0,this.addCommands({cmd:()=>{for(const Zl of Sp)Wl(this,zl).has(Zl.id)&&Zl.translateInPage(Ep,Cp)},undo:()=>{for(const Zl of Sp)Wl(this,zl).has(Zl.id)&&Zl.translateInPage(-Ep,-Cp)},mustExec:!1})},vu));for(const Zl of Sp)Zl.translateInPage(Ru,Qu)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ep(this,Kl,new Map);for(const Ru of Wl(this,Jl))Wl(this,Kl).set(Ru,{savedX:Ru.x,savedY:Ru.y,savedPageIndex:Ru.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Wl(this,Kl))return!1;this.disableUserSelect(!1);const Ru=Wl(this,Kl);ep(this,Kl,null);let Qu=!1;for(const[{x:Ep,y:Cp,pageIndex:Sp},vu]of Ru)vu.newX=Ep,vu.newY=Cp,vu.newPageIndex=Sp,Qu||(Qu=Ep!==vu.savedX||Cp!==vu.savedY||Sp!==vu.savedPageIndex);if(!Qu)return!1;const up=(Ep,Cp,Sp,vu)=>{if(Wl(this,zl).has(Ep.id)){const Zl=Wl(this,Hl).get(vu);Zl?Ep._setParentAndPosition(Zl,Cp,Sp):(Ep.pageIndex=vu,Ep.x=Cp,Ep.y=Sp)}};return this.addCommands({cmd:()=>{for(const[Ep,{newX:Cp,newY:Sp,newPageIndex:vu}]of Ru)up(Ep,Cp,Sp,vu)},undo:()=>{for(const[Ep,{savedX:Cp,savedY:Sp,savedPageIndex:vu}]of Ru)up(Ep,Cp,Sp,vu)},mustExec:!0}),!0}dragSelectedEditors(Ru,Qu){if(Wl(this,Kl))for(const up of Wl(this,Kl).keys())up.drag(Ru,Qu)}rebuild(Ru){if(Ru.parent===null){const Qu=this.getLayer(Ru.pageIndex);Qu?(Qu.changeParent(Ru),Qu.addOrRebuild(Ru)):(this.addEditor(Ru),this.addToAnnotationStorage(Ru),Ru.rebuild())}else Ru.parent.addOrRebuild(Ru)}isActive(Ru){return Wl(this,Ol)===Ru}getActive(){return Wl(this,Ol)}getMode(){return Wl(this,Ql)}get imageManager(){return(0,hs.shadow)(this,"imageManager",new ba)}};Ol=new WeakMap,zl=new WeakMap,Hl=new WeakMap,ou=new WeakMap,au=new WeakMap,_c=new WeakMap,uu=new WeakMap,lu=new WeakMap,Kl=new WeakMap,xu=new WeakMap,pu=new WeakMap,Ll=new WeakMap,Nl=new WeakMap,Ml=new WeakMap,Ul=new WeakMap,Vl=new WeakMap,Ql=new WeakMap,Jl=new WeakMap,iu=new WeakMap,fu=new WeakMap,_u=new WeakMap,bu=new WeakMap,Cu=new WeakMap,Tu=new WeakMap,Fu=new WeakMap,ku=new WeakMap,tu=new WeakMap,eu=new WeakMap,gu=new WeakMap,ru=new WeakMap,Pu=new WeakMap,Lu=new WeakMap,Ju=new WeakMap,Vu=new WeakMap,Mu=new WeakSet,uv=function(){window.addEventListener("focus",Wl(this,_u)),window.addEventListener("blur",Wl(this,fu))},k1=function(){window.removeEventListener("focus",Wl(this,_u)),window.removeEventListener("blur",Wl(this,fu))},R1=function(){window.addEventListener("keydown",Wl(this,Fu),{capture:!0})},Xx=function(){window.removeEventListener("keydown",Wl(this,Fu),{capture:!0})},D1=function(){document.addEventListener("copy",Wl(this,bu)),document.addEventListener("cut",Wl(this,Cu)),document.addEventListener("paste",Wl(this,Tu))},P1=function(){document.removeEventListener("copy",Wl(this,bu)),document.removeEventListener("cut",Wl(this,Cu)),document.removeEventListener("paste",Wl(this,Tu))},_g=function(Ru){Object.entries(Ru).some(([up,Ep])=>Wl(this,ru)[up]!==Ep)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Wl(this,ru),Ru)})},_x=function(Ru){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Ru})},dv=function(){if(!Wl(this,Ml)){ep(this,Ml,!0);for(const Ru of Wl(this,Hl).values())Ru.enable()}},hv=function(){if(this.unselectAll(),Wl(this,Ml)){ep(this,Ml,!1);for(const Ru of Wl(this,Hl).values())Ru.disable()}},I1=function(Ru){const Qu=Wl(this,Hl).get(Ru.pageIndex);Qu?Qu.addOrRebuild(Ru):this.addEditor(Ru)},wx=function(){if(Wl(this,zl).size===0)return!0;if(Wl(this,zl).size===1)for(const Ru of Wl(this,zl).values())return Ru.isEmpty();return!1},O1=function(Ru){Wl(this,Jl).clear();for(const Qu of Ru)Qu.isEmpty()||(Wl(this,Jl).add(Qu),Qu.select());Uu(this,Mu,_g).call(this,{hasSelectedEditor:!0})},c0(Np,"TRANSLATE_SMALL",1),c0(Np,"TRANSLATE_BIG",10);let xl=Np;is.AnnotationEditorUIManager=xl},(cs,is,us)=>{var uu,lu,Kl,xu,pu,Ll,Nl,Ml,Ul,Vl,Ql,Jl,Zm,Jm,M1,Gx,$x,Sx,Ex;Object.defineProperty(is,"__esModule",{value:!0}),is.StatTimer=is.RenderingCancelledException=is.PixelsPerInch=is.PageViewport=is.PDFDateString=is.DOMStandardFontDataFactory=is.DOMSVGFactory=is.DOMFilterFactory=is.DOMCanvasFactory=is.DOMCMapReaderFactory=void 0,is.deprecated=Al,is.getColorValues=zl,is.getCurrentTransform=Hl,is.getCurrentTransformInverse=ou,is.getFilenameFromUrl=Sl,is.getPdfFilenameFromUrl=Cl,is.getRGB=Ol,is.getXfaPageViewport=Bl,is.isDataScheme=_l,is.isPdfFile=El,is.isValidFetchUrl=Dl,is.loadScript=Pl,is.noContextMenu=Fl,is.setLayerDimensions=au;var hs=us(7),lo=us(1);const co="http://www.w3.org/2000/svg",_c=class _c{};c0(_c,"CSS",96),c0(_c,"PDF",72),c0(_c,"PDF_TO_CSS_UNITS",_c.CSS/_c.PDF);let uo=_c;is.PixelsPerInch=uo;class ga extends hs.BaseFilterFactory{constructor({docId:eu,ownerDocument:gu=globalThis.document}={}){super();_d(this,Jl);_d(this,uu);_d(this,lu);_d(this,Kl);_d(this,xu);_d(this,pu);_d(this,Ll);_d(this,Nl);_d(this,Ml);_d(this,Ul);_d(this,Vl);_d(this,Ql,0);ep(this,Kl,eu),ep(this,xu,gu)}addFilter(eu){if(!eu)return"none";let gu=Wl(this,Jl,Zm).get(eu);if(gu)return gu;let ru,Pu,Lu,Ju;if(eu.length===1){const mp=eu[0],Rp=new Array(256);for(let Lp=0;Lp<256;Lp++)Rp[Lp]=mp[Lp]/255;Ju=ru=Pu=Lu=Rp.join(",")}else{const[mp,Rp,Lp]=eu,Bp=new Array(256),Tp=new Array(256),Ip=new Array(256);for(let Hp=0;Hp<256;Hp++)Bp[Hp]=mp[Hp]/255,Tp[Hp]=Rp[Hp]/255,Ip[Hp]=Lp[Hp]/255;ru=Bp.join(","),Pu=Tp.join(","),Lu=Ip.join(","),Ju=`${ru}${Pu}${Lu}`}if(gu=Wl(this,Jl,Zm).get(Ju),gu)return Wl(this,Jl,Zm).set(eu,gu),gu;const Vu=`g_${Wl(this,Kl)}_transfer_map_${bx(this,Ql)._++}`,Mu=`url(#${Vu})`;Wl(this,Jl,Zm).set(eu,Mu),Wl(this,Jl,Zm).set(Ju,Mu);const hp=Uu(this,Jl,Gx).call(this,Vu);return Uu(this,Jl,Sx).call(this,ru,Pu,Lu,hp),Mu}addHCMFilter(eu,gu){var Rp;const ru=`${eu}-${gu}`;if(Wl(this,Ll)===ru)return Wl(this,Nl);if(ep(this,Ll,ru),ep(this,Nl,"none"),(Rp=Wl(this,pu))==null||Rp.remove(),!eu||!gu)return Wl(this,Nl);const Pu=Uu(this,Jl,Ex).call(this,eu);eu=lo.Util.makeHexColor(...Pu);const Lu=Uu(this,Jl,Ex).call(this,gu);if(gu=lo.Util.makeHexColor(...Lu),Wl(this,Jl,Jm).style.color="",eu==="#000000"&&gu==="#ffffff"||eu===gu)return Wl(this,Nl);const Ju=new Array(256);for(let Lp=0;Lp<=255;Lp++){const Bp=Lp/255;Ju[Lp]=Bp<=.03928?Bp/12.92:((Bp+.055)/1.055)**2.4}const Vu=Ju.join(","),Mu=`g_${Wl(this,Kl)}_hcm_filter`,hp=ep(this,Ml,Uu(this,Jl,Gx).call(this,Mu));Uu(this,Jl,Sx).call(this,Vu,Vu,Vu,hp),Uu(this,Jl,M1).call(this,hp);const mp=(Lp,Bp)=>{const Tp=Pu[Lp]/255,Ip=Lu[Lp]/255,Hp=new Array(Bp+1);for(let qp=0;qp<=Bp;qp++)Hp[qp]=Tp+qp/Bp*(Ip-Tp);return Hp.join(",")};return Uu(this,Jl,Sx).call(this,mp(0,5),mp(1,5),mp(2,5),hp),ep(this,Nl,`url(#${Mu})`),Wl(this,Nl)}addHighlightHCMFilter(eu,gu,ru,Pu){var Ip;const Lu=`${eu}-${gu}-${ru}-${Pu}`;if(Wl(this,Ul)===Lu)return Wl(this,Vl);if(ep(this,Ul,Lu),ep(this,Vl,"none"),(Ip=Wl(this,Ml))==null||Ip.remove(),!eu||!gu)return Wl(this,Vl);const[Ju,Vu]=[eu,gu].map(Uu(this,Jl,Ex).bind(this));let Mu=Math.round(.2126*Ju[0]+.7152*Ju[1]+.0722*Ju[2]),hp=Math.round(.2126*Vu[0]+.7152*Vu[1]+.0722*Vu[2]),[mp,Rp]=[ru,Pu].map(Uu(this,Jl,Ex).bind(this));hp<Mu&&([Mu,hp,mp,Rp]=[hp,Mu,Rp,mp]),Wl(this,Jl,Jm).style.color="";const Lp=(Hp,qp,lp)=>{const $u=new Array(256),Zu=(hp-Mu)/lp,Ap=Hp/255,Np=(qp-Hp)/(255*lp);let Vp=0;for(let Ru=0;Ru<=lp;Ru++){const Qu=Math.round(Mu+Ru*Zu),up=Ap+Ru*Np;for(let Ep=Vp;Ep<=Qu;Ep++)$u[Ep]=up;Vp=Qu+1}for(let Ru=Vp;Ru<256;Ru++)$u[Ru]=$u[Vp-1];return $u.join(",")},Bp=`g_${Wl(this,Kl)}_hcm_highlight_filter`,Tp=ep(this,Ml,Uu(this,Jl,Gx).call(this,Bp));return Uu(this,Jl,M1).call(this,Tp),Uu(this,Jl,Sx).call(this,Lp(mp[0],Rp[0],5),Lp(mp[1],Rp[1],5),Lp(mp[2],Rp[2],5),Tp),ep(this,Vl,`url(#${Bp})`),Wl(this,Vl)}destroy(eu=!1){eu&&(Wl(this,Nl)||Wl(this,Vl))||(Wl(this,lu)&&(Wl(this,lu).parentNode.parentNode.remove(),ep(this,lu,null)),Wl(this,uu)&&(Wl(this,uu).clear(),ep(this,uu,null)),ep(this,Ql,0))}}uu=new WeakMap,lu=new WeakMap,Kl=new WeakMap,xu=new WeakMap,pu=new WeakMap,Ll=new WeakMap,Nl=new WeakMap,Ml=new WeakMap,Ul=new WeakMap,Vl=new WeakMap,Ql=new WeakMap,Jl=new WeakSet,Zm=function(){return Wl(this,uu)||ep(this,uu,new Map)},Jm=function(){if(!Wl(this,lu)){const eu=Wl(this,xu).createElement("div"),{style:gu}=eu;gu.visibility="hidden",gu.contain="strict",gu.width=gu.height=0,gu.position="absolute",gu.top=gu.left=0,gu.zIndex=-1;const ru=Wl(this,xu).createElementNS(co,"svg");ru.setAttribute("width",0),ru.setAttribute("height",0),ep(this,lu,Wl(this,xu).createElementNS(co,"defs")),eu.append(ru),ru.append(Wl(this,lu)),Wl(this,xu).body.append(eu)}return Wl(this,lu)},M1=function(eu){const gu=Wl(this,xu).createElementNS(co,"feColorMatrix");gu.setAttribute("type","matrix"),gu.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),eu.append(gu)},Gx=function(eu){const gu=Wl(this,xu).createElementNS(co,"filter");return gu.setAttribute("color-interpolation-filters","sRGB"),gu.setAttribute("id",eu),Wl(this,Jl,Jm).append(gu),gu},$x=function(eu,gu,ru){const Pu=Wl(this,xu).createElementNS(co,gu);Pu.setAttribute("type","discrete"),Pu.setAttribute("tableValues",ru),eu.append(Pu)},Sx=function(eu,gu,ru,Pu){const Lu=Wl(this,xu).createElementNS(co,"feComponentTransfer");Pu.append(Lu),Uu(this,Jl,$x).call(this,Lu,"feFuncR",eu),Uu(this,Jl,$x).call(this,Lu,"feFuncG",gu),Uu(this,Jl,$x).call(this,Lu,"feFuncB",ru)},Ex=function(eu){return Wl(this,Jl,Jm).style.color=eu,Ol(getComputedStyle(Wl(this,Jl,Jm)).getPropertyValue("color"))},is.DOMFilterFactory=ga;class ba extends hs.BaseCanvasFactory{constructor({ownerDocument:tu=globalThis.document}={}){super(),this._document=tu}_createCanvas(tu,eu){const gu=this._document.createElement("canvas");return gu.width=tu,gu.height=eu,gu}}is.DOMCanvasFactory=ba;async function xa(ku,tu=!1){if(Dl(ku,document.baseURI)){const eu=await fetch(ku);if(!eu.ok)throw new Error(eu.statusText);return tu?new Uint8Array(await eu.arrayBuffer()):(0,lo.stringToBytes)(await eu.text())}return new Promise((eu,gu)=>{const ru=new XMLHttpRequest;ru.open("GET",ku,!0),tu&&(ru.responseType="arraybuffer"),ru.onreadystatechange=()=>{if(ru.readyState===XMLHttpRequest.DONE){if(ru.status===200||ru.status===0){let Pu;if(tu&&ru.response?Pu=new Uint8Array(ru.response):!tu&&ru.responseText&&(Pu=(0,lo.stringToBytes)(ru.responseText)),Pu){eu(Pu);return}}gu(new Error(ru.statusText))}},ru.send(null)})}class _a extends hs.BaseCMapReaderFactory{_fetchData(tu,eu){return xa(tu,this.isCompressed).then(gu=>({cMapData:gu,compressionType:eu}))}}is.DOMCMapReaderFactory=_a;class $a extends hs.BaseStandardFontDataFactory{_fetchData(tu){return xa(tu,!0)}}is.DOMStandardFontDataFactory=$a;class xl extends hs.BaseSVGFactory{_createSVG(tu){return document.createElementNS(co,tu)}}is.DOMSVGFactory=xl;class yl{constructor({viewBox:tu,scale:eu,rotation:gu,offsetX:ru=0,offsetY:Pu=0,dontFlip:Lu=!1}){this.viewBox=tu,this.scale=eu,this.rotation=gu,this.offsetX=ru,this.offsetY=Pu;const Ju=(tu[2]+tu[0])/2,Vu=(tu[3]+tu[1])/2;let Mu,hp,mp,Rp;switch(gu%=360,gu<0&&(gu+=360),gu){case 180:Mu=-1,hp=0,mp=0,Rp=1;break;case 90:Mu=0,hp=1,mp=1,Rp=0;break;case 270:Mu=0,hp=-1,mp=-1,Rp=0;break;case 0:Mu=1,hp=0,mp=0,Rp=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Lu&&(mp=-mp,Rp=-Rp);let Lp,Bp,Tp,Ip;Mu===0?(Lp=Math.abs(Vu-tu[1])*eu+ru,Bp=Math.abs(Ju-tu[0])*eu+Pu,Tp=(tu[3]-tu[1])*eu,Ip=(tu[2]-tu[0])*eu):(Lp=Math.abs(Ju-tu[0])*eu+ru,Bp=Math.abs(Vu-tu[1])*eu+Pu,Tp=(tu[2]-tu[0])*eu,Ip=(tu[3]-tu[1])*eu),this.transform=[Mu*eu,hp*eu,mp*eu,Rp*eu,Lp-Mu*eu*Ju-mp*eu*Vu,Bp-hp*eu*Ju-Rp*eu*Vu],this.width=Tp,this.height=Ip}get rawDims(){const{viewBox:tu}=this;return(0,lo.shadow)(this,"rawDims",{pageWidth:tu[2]-tu[0],pageHeight:tu[3]-tu[1],pageX:tu[0],pageY:tu[1]})}clone({scale:tu=this.scale,rotation:eu=this.rotation,offsetX:gu=this.offsetX,offsetY:ru=this.offsetY,dontFlip:Pu=!1}={}){return new yl({viewBox:this.viewBox.slice(),scale:tu,rotation:eu,offsetX:gu,offsetY:ru,dontFlip:Pu})}convertToViewportPoint(tu,eu){return lo.Util.applyTransform([tu,eu],this.transform)}convertToViewportRectangle(tu){const eu=lo.Util.applyTransform([tu[0],tu[1]],this.transform),gu=lo.Util.applyTransform([tu[2],tu[3]],this.transform);return[eu[0],eu[1],gu[0],gu[1]]}convertToPdfPoint(tu,eu){return lo.Util.applyInverseTransform([tu,eu],this.transform)}}is.PageViewport=yl;class wl extends lo.BaseException{constructor(tu,eu=0){super(tu,"RenderingCancelledException"),this.extraDelay=eu}}is.RenderingCancelledException=wl;function _l(ku){const tu=ku.length;let eu=0;for(;eu<tu&&ku[eu].trim()==="";)eu++;return ku.substring(eu,eu+5).toLowerCase()==="data:"}function El(ku){return typeof ku=="string"&&/\.pdf$/i.test(ku)}function Sl(ku,tu=!1){return tu||([ku]=ku.split(/[#?]/,1)),ku.substring(ku.lastIndexOf("/")+1)}function Cl(ku,tu="document.pdf"){if(typeof ku!="string")return tu;if(_l(ku))return(0,lo.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),tu;const eu=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,gu=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ru=eu.exec(ku);let Pu=gu.exec(ru[1])||gu.exec(ru[2])||gu.exec(ru[3]);if(Pu&&(Pu=Pu[0],Pu.includes("%")))try{Pu=gu.exec(decodeURIComponent(Pu))[0]}catch{}return Pu||tu}class Tl{constructor(){c0(this,"started",Object.create(null));c0(this,"times",[])}time(tu){tu in this.started&&(0,lo.warn)(`Timer is already running for ${tu}`),this.started[tu]=Date.now()}timeEnd(tu){tu in this.started||(0,lo.warn)(`Timer has not been started for ${tu}`),this.times.push({name:tu,start:this.started[tu],end:Date.now()}),delete this.started[tu]}toString(){const tu=[];let eu=0;for(const{name:gu}of this.times)eu=Math.max(gu.length,eu);for(const{name:gu,start:ru,end:Pu}of this.times)tu.push(`${gu.padEnd(eu)} ${Pu-ru}ms
`);return tu.join("")}}is.StatTimer=Tl;function Dl(ku,tu){try{const{protocol:eu}=tu?new URL(ku,tu):new URL(ku);return eu==="http:"||eu==="https:"}catch{return!1}}function Fl(ku){ku.preventDefault()}function Pl(ku,tu=!1){return new Promise((eu,gu)=>{const ru=document.createElement("script");ru.src=ku,ru.onload=function(Pu){tu&&ru.remove(),eu(Pu)},ru.onerror=function(){gu(new Error(`Cannot load script at: ${ru.src}`))},(document.head||document.documentElement).append(ru)})}function Al(ku){console.log("Deprecated API usage: "+ku)}let Rl;class Il{static toDateObject(tu){if(!tu||typeof tu!="string")return null;Rl||(Rl=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const eu=Rl.exec(tu);if(!eu)return null;const gu=parseInt(eu[1],10);let ru=parseInt(eu[2],10);ru=ru>=1&&ru<=12?ru-1:0;let Pu=parseInt(eu[3],10);Pu=Pu>=1&&Pu<=31?Pu:1;let Lu=parseInt(eu[4],10);Lu=Lu>=0&&Lu<=23?Lu:0;let Ju=parseInt(eu[5],10);Ju=Ju>=0&&Ju<=59?Ju:0;let Vu=parseInt(eu[6],10);Vu=Vu>=0&&Vu<=59?Vu:0;const Mu=eu[7]||"Z";let hp=parseInt(eu[8],10);hp=hp>=0&&hp<=23?hp:0;let mp=parseInt(eu[9],10)||0;return mp=mp>=0&&mp<=59?mp:0,Mu==="-"?(Lu+=hp,Ju+=mp):Mu==="+"&&(Lu-=hp,Ju-=mp),new Date(Date.UTC(gu,ru,Pu,Lu,Ju,Vu))}}is.PDFDateString=Il;function Bl(ku,{scale:tu=1,rotation:eu=0}){const{width:gu,height:ru}=ku.attributes.style,Pu=[0,0,parseInt(gu),parseInt(ru)];return new yl({viewBox:Pu,scale:tu,rotation:eu})}function Ol(ku){if(ku.startsWith("#")){const tu=parseInt(ku.slice(1),16);return[(tu&16711680)>>16,(tu&65280)>>8,tu&255]}return ku.startsWith("rgb(")?ku.slice(4,-1).split(",").map(tu=>parseInt(tu)):ku.startsWith("rgba(")?ku.slice(5,-1).split(",").map(tu=>parseInt(tu)).slice(0,3):((0,lo.warn)(`Not a valid color format: "${ku}"`),[0,0,0])}function zl(ku){const tu=document.createElement("span");tu.style.visibility="hidden",document.body.append(tu);for(const eu of ku.keys()){tu.style.color=eu;const gu=window.getComputedStyle(tu).color;ku.set(eu,Ol(gu))}tu.remove()}function Hl(ku){const{a:tu,b:eu,c:gu,d:ru,e:Pu,f:Lu}=ku.getTransform();return[tu,eu,gu,ru,Pu,Lu]}function ou(ku){const{a:tu,b:eu,c:gu,d:ru,e:Pu,f:Lu}=ku.getTransform().invertSelf();return[tu,eu,gu,ru,Pu,Lu]}function au(ku,tu,eu=!1,gu=!0){if(tu instanceof yl){const{pageWidth:ru,pageHeight:Pu}=tu.rawDims,{style:Lu}=ku,Ju=lo.FeatureTest.isCSSRoundSupported,Vu=`var(--scale-factor) * ${ru}px`,Mu=`var(--scale-factor) * ${Pu}px`,hp=Ju?`round(${Vu}, 1px)`:`calc(${Vu})`,mp=Ju?`round(${Mu}, 1px)`:`calc(${Mu})`;!eu||tu.rotation%180===0?(Lu.width=hp,Lu.height=mp):(Lu.width=mp,Lu.height=hp)}gu&&ku.setAttribute("data-main-rotation",tu.rotation)}},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.BaseStandardFontDataFactory=is.BaseSVGFactory=is.BaseFilterFactory=is.BaseCanvasFactory=is.BaseCMapReaderFactory=void 0;var hs=us(1);class lo{constructor(){this.constructor===lo&&(0,hs.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(_a){return"none"}addHCMFilter(_a,$a){return"none"}addHighlightHCMFilter(_a,$a,xl,yl){return"none"}destroy(_a=!1){}}is.BaseFilterFactory=lo;class co{constructor(){this.constructor===co&&(0,hs.unreachable)("Cannot initialize BaseCanvasFactory.")}create(_a,$a){if(_a<=0||$a<=0)throw new Error("Invalid canvas size");const xl=this._createCanvas(_a,$a);return{canvas:xl,context:xl.getContext("2d")}}reset(_a,$a,xl){if(!_a.canvas)throw new Error("Canvas is not specified");if($a<=0||xl<=0)throw new Error("Invalid canvas size");_a.canvas.width=$a,_a.canvas.height=xl}destroy(_a){if(!_a.canvas)throw new Error("Canvas is not specified");_a.canvas.width=0,_a.canvas.height=0,_a.canvas=null,_a.context=null}_createCanvas(_a,$a){(0,hs.unreachable)("Abstract method `_createCanvas` called.")}}is.BaseCanvasFactory=co;class uo{constructor({baseUrl:_a=null,isCompressed:$a=!0}){this.constructor===uo&&(0,hs.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_a,this.isCompressed=$a}async fetch({name:_a}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_a)throw new Error("CMap name must be specified.");const $a=this.baseUrl+_a+(this.isCompressed?".bcmap":""),xl=this.isCompressed?hs.CMapCompressionType.BINARY:hs.CMapCompressionType.NONE;return this._fetchData($a,xl).catch(yl=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${$a}`)})}_fetchData(_a,$a){(0,hs.unreachable)("Abstract method `_fetchData` called.")}}is.BaseCMapReaderFactory=uo;class ga{constructor({baseUrl:_a=null}){this.constructor===ga&&(0,hs.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_a}async fetch({filename:_a}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_a)throw new Error("Font filename must be specified.");const $a=`${this.baseUrl}${_a}`;return this._fetchData($a).catch(xl=>{throw new Error(`Unable to load font data at: ${$a}`)})}_fetchData(_a){(0,hs.unreachable)("Abstract method `_fetchData` called.")}}is.BaseStandardFontDataFactory=ga;class ba{constructor(){this.constructor===ba&&(0,hs.unreachable)("Cannot initialize BaseSVGFactory.")}create(_a,$a,xl=!1){if(_a<=0||$a<=0)throw new Error("Invalid SVG dimensions");const yl=this._createSVG("svg:svg");return yl.setAttribute("version","1.1"),xl||(yl.setAttribute("width",`${_a}px`),yl.setAttribute("height",`${$a}px`)),yl.setAttribute("preserveAspectRatio","none"),yl.setAttribute("viewBox",`0 0 ${_a} ${$a}`),yl}createElement(_a){if(typeof _a!="string")throw new Error("Invalid SVG element type");return this._createSVG(_a)}_createSVG(_a){(0,hs.unreachable)("Abstract method `_createSVG` called.")}}is.BaseSVGFactory=ba},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.MurmurHash3_64=void 0;var hs=us(1);const lo=3285377520,co=4294901760,uo=65535;class ga{constructor(xa){this.h1=xa?xa&4294967295:lo,this.h2=xa?xa&4294967295:lo}update(xa){let _a,$a;if(typeof xa=="string"){_a=new Uint8Array(xa.length*2),$a=0;for(let Al=0,Rl=xa.length;Al<Rl;Al++){const Il=xa.charCodeAt(Al);Il<=255?_a[$a++]=Il:(_a[$a++]=Il>>>8,_a[$a++]=Il&255)}}else if((0,hs.isArrayBuffer)(xa))_a=xa.slice(),$a=_a.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const xl=$a>>2,yl=$a-xl*4,wl=new Uint32Array(_a.buffer,0,xl);let _l=0,El=0,Sl=this.h1,Cl=this.h2;const Tl=3432918353,Dl=461845907,Fl=Tl&uo,Pl=Dl&uo;for(let Al=0;Al<xl;Al++)Al&1?(_l=wl[Al],_l=_l*Tl&co|_l*Fl&uo,_l=_l<<15|_l>>>17,_l=_l*Dl&co|_l*Pl&uo,Sl^=_l,Sl=Sl<<13|Sl>>>19,Sl=Sl*5+3864292196):(El=wl[Al],El=El*Tl&co|El*Fl&uo,El=El<<15|El>>>17,El=El*Dl&co|El*Pl&uo,Cl^=El,Cl=Cl<<13|Cl>>>19,Cl=Cl*5+3864292196);switch(_l=0,yl){case 3:_l^=_a[xl*4+2]<<16;case 2:_l^=_a[xl*4+1]<<8;case 1:_l^=_a[xl*4],_l=_l*Tl&co|_l*Fl&uo,_l=_l<<15|_l>>>17,_l=_l*Dl&co|_l*Pl&uo,xl&1?Sl^=_l:Cl^=_l}this.h1=Sl,this.h2=Cl}hexdigest(){let xa=this.h1,_a=this.h2;return xa^=_a>>>1,xa=xa*3981806797&co|xa*36045&uo,_a=_a*4283543511&co|((_a<<16|xa>>>16)*2950163797&co)>>>16,xa^=_a>>>1,xa=xa*444984403&co|xa*60499&uo,_a=_a*3301882366&co|((_a<<16|xa>>>16)*3120437893&co)>>>16,xa^=_a>>>1,(xa>>>0).toString(16).padStart(8,"0")+(_a>>>0).toString(16).padStart(8,"0")}}is.MurmurHash3_64=ga},(cs,is,us)=>{var uo;Object.defineProperty(is,"__esModule",{value:!0}),is.FontLoader=is.FontFaceObject=void 0;var hs=us(1);class lo{constructor({ownerDocument:ba=globalThis.document,styleElement:xa=null}){_d(this,uo,new Set);this._document=ba,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(ba){this.nativeFontFaces.add(ba),this._document.fonts.add(ba)}removeNativeFontFace(ba){this.nativeFontFaces.delete(ba),this._document.fonts.delete(ba)}insertRule(ba){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const xa=this.styleElement.sheet;xa.insertRule(ba,xa.cssRules.length)}clear(){for(const ba of this.nativeFontFaces)this._document.fonts.delete(ba);this.nativeFontFaces.clear(),Wl(this,uo).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(ba){if(!(!ba||Wl(this,uo).has(ba.loadedName))){if((0,hs.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:xa,src:_a,style:$a}=ba,xl=new FontFace(xa,_a,$a);this.addNativeFontFace(xl);try{await xl.load(),Wl(this,uo).add(xa)}catch{(0,hs.warn)(`Cannot load system font: ${ba.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(xl)}return}(0,hs.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(ba){if(ba.attached||ba.missingFile&&!ba.systemFontInfo)return;if(ba.attached=!0,ba.systemFontInfo){await this.loadSystemFont(ba.systemFontInfo);return}if(this.isFontLoadingAPISupported){const _a=ba.createNativeFontFace();if(_a){this.addNativeFontFace(_a);try{await _a.loaded}catch($a){throw(0,hs.warn)(`Failed to load font '${_a.family}': '${$a}'.`),ba.disableFontFace=!0,$a}}return}const xa=ba.createFontFaceRule();if(xa){if(this.insertRule(xa),this.isSyncFontLoadingSupported)return;await new Promise(_a=>{const $a=this._queueLoadingCallback(_a);this._prepareFontLoadEvent(ba,$a)})}}get isFontLoadingAPISupported(){var xa;const ba=!!((xa=this._document)!=null&&xa.fonts);return(0,hs.shadow)(this,"isFontLoadingAPISupported",ba)}get isSyncFontLoadingSupported(){let ba=!1;return(hs.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(ba=!0),(0,hs.shadow)(this,"isSyncFontLoadingSupported",ba)}_queueLoadingCallback(ba){function xa(){for((0,hs.assert)(!$a.done,"completeRequest() cannot be called twice."),$a.done=!0;_a.length>0&&_a[0].done;){const xl=_a.shift();setTimeout(xl.callback,0)}}const{loadingRequests:_a}=this,$a={done:!1,complete:xa,callback:ba};return _a.push($a),$a}get _loadTestFont(){const ba=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,hs.shadow)(this,"_loadTestFont",ba)}_prepareFontLoadEvent(ba,xa){function _a(Ol,zl){return Ol.charCodeAt(zl)<<24|Ol.charCodeAt(zl+1)<<16|Ol.charCodeAt(zl+2)<<8|Ol.charCodeAt(zl+3)&255}function $a(Ol,zl,Hl,ou){const au=Ol.substring(0,zl),_c=Ol.substring(zl+Hl);return au+ou+_c}let xl,yl;const wl=this._document.createElement("canvas");wl.width=1,wl.height=1;const _l=wl.getContext("2d");let El=0;function Sl(Ol,zl){if(++El>30){(0,hs.warn)("Load test font never loaded."),zl();return}if(_l.font="30px "+Ol,_l.fillText(".",0,20),_l.getImageData(0,0,1,1).data[3]>0){zl();return}setTimeout(Sl.bind(null,Ol,zl))}const Cl=`lt${Date.now()}${this.loadTestFontId++}`;let Tl=this._loadTestFont;Tl=$a(Tl,976,Cl.length,Cl);const Fl=16,Pl=1482184792;let Al=_a(Tl,Fl);for(xl=0,yl=Cl.length-3;xl<yl;xl+=4)Al=Al-Pl+_a(Cl,xl)|0;xl<Cl.length&&(Al=Al-Pl+_a(Cl+"XXX",xl)|0),Tl=$a(Tl,Fl,4,(0,hs.string32)(Al));const Rl=`url(data:font/opentype;base64,${btoa(Tl)});`,Il=`@font-face {font-family:"${Cl}";src:${Rl}}`;this.insertRule(Il);const Bl=this._document.createElement("div");Bl.style.visibility="hidden",Bl.style.width=Bl.style.height="10px",Bl.style.position="absolute",Bl.style.top=Bl.style.left="0px";for(const Ol of[ba.loadedName,Cl]){const zl=this._document.createElement("span");zl.textContent="Hi",zl.style.fontFamily=Ol,Bl.append(zl)}this._document.body.append(Bl),Sl(Cl,()=>{Bl.remove(),xa.complete()})}}uo=new WeakMap,is.FontLoader=lo;class co{constructor(ba,{isEvalSupported:xa=!0,disableFontFace:_a=!1,ignoreErrors:$a=!1,inspectFont:xl=null}){this.compiledGlyphs=Object.create(null);for(const yl in ba)this[yl]=ba[yl];this.isEvalSupported=xa!==!1,this.disableFontFace=_a===!0,this.ignoreErrors=$a===!0,this._inspectFont=xl}createNativeFontFace(){var xa;if(!this.data||this.disableFontFace)return null;let ba;if(!this.cssFontInfo)ba=new FontFace(this.loadedName,this.data,{});else{const _a={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_a.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ba=new FontFace(this.cssFontInfo.fontFamily,this.data,_a)}return(xa=this._inspectFont)==null||xa.call(this,this),ba}createFontFaceRule(){var $a;if(!this.data||this.disableFontFace)return null;const ba=(0,hs.bytesToString)(this.data),xa=`url(data:${this.mimetype};base64,${btoa(ba)});`;let _a;if(!this.cssFontInfo)_a=`@font-face {font-family:"${this.loadedName}";src:${xa}}`;else{let xl=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(xl+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),_a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${xl}src:${xa}}`}return($a=this._inspectFont)==null||$a.call(this,this,xa),_a}getPathGenerator(ba,xa){if(this.compiledGlyphs[xa]!==void 0)return this.compiledGlyphs[xa];let _a;try{_a=ba.get(this.loadedName+"_path_"+xa)}catch($a){if(!this.ignoreErrors)throw $a;return(0,hs.warn)(`getPathGenerator - ignoring character: "${$a}".`),this.compiledGlyphs[xa]=function(xl,yl){}}if(this.isEvalSupported&&hs.FeatureTest.isEvalSupported){const $a=[];for(const xl of _a){const yl=xl.args!==void 0?xl.args.join(","):"";$a.push("c.",xl.cmd,"(",yl,`);
`)}return this.compiledGlyphs[xa]=new Function("c","size",$a.join(""))}return this.compiledGlyphs[xa]=function($a,xl){for(const yl of _a)yl.cmd==="scale"&&(yl.args=[xl,-xl]),$a[yl.cmd].apply($a,yl.args)}}}is.FontFaceObject=co},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.NodeStandardFontDataFactory=is.NodeFilterFactory=is.NodeCanvasFactory=is.NodeCMapReaderFactory=void 0;var hs=us(7);us(1);const lo=function(xa){return new Promise((_a,$a)=>{require$$5.readFile(xa,(yl,wl)=>{if(yl||!wl){$a(new Error(yl));return}_a(new Uint8Array(wl))})})};class co extends hs.BaseFilterFactory{}is.NodeFilterFactory=co;class uo extends hs.BaseCanvasFactory{_createCanvas(_a,$a){return require$$5.createCanvas(_a,$a)}}is.NodeCanvasFactory=uo;class ga extends hs.BaseCMapReaderFactory{_fetchData(_a,$a){return lo(_a).then(xl=>({cMapData:xl,compressionType:$a}))}}is.NodeCMapReaderFactory=ga;class ba extends hs.BaseStandardFontDataFactory{_fetchData(_a){return lo(_a)}}is.NodeStandardFontDataFactory=ba},(cs,is,us)=>{var lu,j1,N1;Object.defineProperty(is,"__esModule",{value:!0}),is.CanvasGraphics=void 0;var hs=us(1),lo=us(6),co=us(12),uo=us(13);const ga=16,ba=100,xa=4096,_a=15,$a=10,xl=1e3,yl=16;function wl(Ll,Nl){if(Ll._removeMirroring)throw new Error("Context is already forwarding operations.");Ll.__originalSave=Ll.save,Ll.__originalRestore=Ll.restore,Ll.__originalRotate=Ll.rotate,Ll.__originalScale=Ll.scale,Ll.__originalTranslate=Ll.translate,Ll.__originalTransform=Ll.transform,Ll.__originalSetTransform=Ll.setTransform,Ll.__originalResetTransform=Ll.resetTransform,Ll.__originalClip=Ll.clip,Ll.__originalMoveTo=Ll.moveTo,Ll.__originalLineTo=Ll.lineTo,Ll.__originalBezierCurveTo=Ll.bezierCurveTo,Ll.__originalRect=Ll.rect,Ll.__originalClosePath=Ll.closePath,Ll.__originalBeginPath=Ll.beginPath,Ll._removeMirroring=()=>{Ll.save=Ll.__originalSave,Ll.restore=Ll.__originalRestore,Ll.rotate=Ll.__originalRotate,Ll.scale=Ll.__originalScale,Ll.translate=Ll.__originalTranslate,Ll.transform=Ll.__originalTransform,Ll.setTransform=Ll.__originalSetTransform,Ll.resetTransform=Ll.__originalResetTransform,Ll.clip=Ll.__originalClip,Ll.moveTo=Ll.__originalMoveTo,Ll.lineTo=Ll.__originalLineTo,Ll.bezierCurveTo=Ll.__originalBezierCurveTo,Ll.rect=Ll.__originalRect,Ll.closePath=Ll.__originalClosePath,Ll.beginPath=Ll.__originalBeginPath,delete Ll._removeMirroring},Ll.save=function(){Nl.save(),this.__originalSave()},Ll.restore=function(){Nl.restore(),this.__originalRestore()},Ll.translate=function(Ul,Vl){Nl.translate(Ul,Vl),this.__originalTranslate(Ul,Vl)},Ll.scale=function(Ul,Vl){Nl.scale(Ul,Vl),this.__originalScale(Ul,Vl)},Ll.transform=function(Ul,Vl,Ql,Jl,iu,fu){Nl.transform(Ul,Vl,Ql,Jl,iu,fu),this.__originalTransform(Ul,Vl,Ql,Jl,iu,fu)},Ll.setTransform=function(Ul,Vl,Ql,Jl,iu,fu){Nl.setTransform(Ul,Vl,Ql,Jl,iu,fu),this.__originalSetTransform(Ul,Vl,Ql,Jl,iu,fu)},Ll.resetTransform=function(){Nl.resetTransform(),this.__originalResetTransform()},Ll.rotate=function(Ul){Nl.rotate(Ul),this.__originalRotate(Ul)},Ll.clip=function(Ul){Nl.clip(Ul),this.__originalClip(Ul)},Ll.moveTo=function(Ml,Ul){Nl.moveTo(Ml,Ul),this.__originalMoveTo(Ml,Ul)},Ll.lineTo=function(Ml,Ul){Nl.lineTo(Ml,Ul),this.__originalLineTo(Ml,Ul)},Ll.bezierCurveTo=function(Ml,Ul,Vl,Ql,Jl,iu){Nl.bezierCurveTo(Ml,Ul,Vl,Ql,Jl,iu),this.__originalBezierCurveTo(Ml,Ul,Vl,Ql,Jl,iu)},Ll.rect=function(Ml,Ul,Vl,Ql){Nl.rect(Ml,Ul,Vl,Ql),this.__originalRect(Ml,Ul,Vl,Ql)},Ll.closePath=function(){Nl.closePath(),this.__originalClosePath()},Ll.beginPath=function(){Nl.beginPath(),this.__originalBeginPath()}}class _l{constructor(Nl){this.canvasFactory=Nl,this.cache=Object.create(null)}getCanvas(Nl,Ml,Ul){let Vl;return this.cache[Nl]!==void 0?(Vl=this.cache[Nl],this.canvasFactory.reset(Vl,Ml,Ul)):(Vl=this.canvasFactory.create(Ml,Ul),this.cache[Nl]=Vl),Vl}delete(Nl){delete this.cache[Nl]}clear(){for(const Nl in this.cache){const Ml=this.cache[Nl];this.canvasFactory.destroy(Ml),delete this.cache[Nl]}}}function El(Ll,Nl,Ml,Ul,Vl,Ql,Jl,iu,fu,_u){const[bu,Cu,Tu,Fu,ku,tu]=(0,lo.getCurrentTransform)(Ll);if(Cu===0&&Tu===0){const ru=Jl*bu+ku,Pu=Math.round(ru),Lu=iu*Fu+tu,Ju=Math.round(Lu),Vu=(Jl+fu)*bu+ku,Mu=Math.abs(Math.round(Vu)-Pu)||1,hp=(iu+_u)*Fu+tu,mp=Math.abs(Math.round(hp)-Ju)||1;return Ll.setTransform(Math.sign(bu),0,0,Math.sign(Fu),Pu,Ju),Ll.drawImage(Nl,Ml,Ul,Vl,Ql,0,0,Mu,mp),Ll.setTransform(bu,Cu,Tu,Fu,ku,tu),[Mu,mp]}if(bu===0&&Fu===0){const ru=iu*Tu+ku,Pu=Math.round(ru),Lu=Jl*Cu+tu,Ju=Math.round(Lu),Vu=(iu+_u)*Tu+ku,Mu=Math.abs(Math.round(Vu)-Pu)||1,hp=(Jl+fu)*Cu+tu,mp=Math.abs(Math.round(hp)-Ju)||1;return Ll.setTransform(0,Math.sign(Cu),Math.sign(Tu),0,Pu,Ju),Ll.drawImage(Nl,Ml,Ul,Vl,Ql,0,0,mp,Mu),Ll.setTransform(bu,Cu,Tu,Fu,ku,tu),[mp,Mu]}Ll.drawImage(Nl,Ml,Ul,Vl,Ql,Jl,iu,fu,_u);const eu=Math.hypot(bu,Cu),gu=Math.hypot(Tu,Fu);return[eu*fu,gu*_u]}function Sl(Ll){const{width:Nl,height:Ml}=Ll;if(Nl>xl||Ml>xl)return null;const Ul=1e3,Vl=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Ql=Nl+1;let Jl=new Uint8Array(Ql*(Ml+1)),iu,fu,_u;const bu=Nl+7&-8;let Cu=new Uint8Array(bu*Ml),Tu=0;for(const gu of Ll.data){let ru=128;for(;ru>0;)Cu[Tu++]=gu&ru?0:255,ru>>=1}let Fu=0;for(Tu=0,Cu[Tu]!==0&&(Jl[0]=1,++Fu),fu=1;fu<Nl;fu++)Cu[Tu]!==Cu[Tu+1]&&(Jl[fu]=Cu[Tu]?2:1,++Fu),Tu++;for(Cu[Tu]!==0&&(Jl[fu]=2,++Fu),iu=1;iu<Ml;iu++){Tu=iu*bu,_u=iu*Ql,Cu[Tu-bu]!==Cu[Tu]&&(Jl[_u]=Cu[Tu]?1:8,++Fu);let gu=(Cu[Tu]?4:0)+(Cu[Tu-bu]?8:0);for(fu=1;fu<Nl;fu++)gu=(gu>>2)+(Cu[Tu+1]?4:0)+(Cu[Tu-bu+1]?8:0),Vl[gu]&&(Jl[_u+fu]=Vl[gu],++Fu),Tu++;if(Cu[Tu-bu]!==Cu[Tu]&&(Jl[_u+fu]=Cu[Tu]?2:4,++Fu),Fu>Ul)return null}for(Tu=bu*(Ml-1),_u=iu*Ql,Cu[Tu]!==0&&(Jl[_u]=8,++Fu),fu=1;fu<Nl;fu++)Cu[Tu]!==Cu[Tu+1]&&(Jl[_u+fu]=Cu[Tu]?4:8,++Fu),Tu++;if(Cu[Tu]!==0&&(Jl[_u+fu]=4,++Fu),Fu>Ul)return null;const ku=new Int32Array([0,Ql,-1,0,-Ql,0,0,0,1]),tu=new Path2D;for(iu=0;Fu&&iu<=Ml;iu++){let gu=iu*Ql;const ru=gu+Nl;for(;gu<ru&&!Jl[gu];)gu++;if(gu===ru)continue;tu.moveTo(gu%Ql,iu);const Pu=gu;let Lu=Jl[gu];do{const Ju=ku[Lu];do gu+=Ju;while(!Jl[gu]);const Vu=Jl[gu];Vu!==5&&Vu!==10?(Lu=Vu,Jl[gu]=0):(Lu=Vu&51*Lu>>4,Jl[gu]&=Lu>>2|Lu<<2),tu.lineTo(gu%Ql,gu/Ql|0),Jl[gu]||--Fu}while(Pu!==gu);--iu}return Cu=null,Jl=null,function(gu){gu.save(),gu.scale(1/Nl,-1/Ml),gu.translate(0,-Ml),gu.fill(tu),gu.beginPath(),gu.restore()}}class Cl{constructor(Nl,Ml){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=hs.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=hs.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=hs.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Nl,Ml])}clone(){const Nl=Object.create(this);return Nl.clipBox=this.clipBox.slice(),Nl}setCurrentPoint(Nl,Ml){this.x=Nl,this.y=Ml}updatePathMinMax(Nl,Ml,Ul){[Ml,Ul]=hs.Util.applyTransform([Ml,Ul],Nl),this.minX=Math.min(this.minX,Ml),this.minY=Math.min(this.minY,Ul),this.maxX=Math.max(this.maxX,Ml),this.maxY=Math.max(this.maxY,Ul)}updateRectMinMax(Nl,Ml){const Ul=hs.Util.applyTransform(Ml,Nl),Vl=hs.Util.applyTransform(Ml.slice(2),Nl);this.minX=Math.min(this.minX,Ul[0],Vl[0]),this.minY=Math.min(this.minY,Ul[1],Vl[1]),this.maxX=Math.max(this.maxX,Ul[0],Vl[0]),this.maxY=Math.max(this.maxY,Ul[1],Vl[1])}updateScalingPathMinMax(Nl,Ml){hs.Util.scaleMinMax(Nl,Ml),this.minX=Math.min(this.minX,Ml[0]),this.maxX=Math.max(this.maxX,Ml[1]),this.minY=Math.min(this.minY,Ml[2]),this.maxY=Math.max(this.maxY,Ml[3])}updateCurvePathMinMax(Nl,Ml,Ul,Vl,Ql,Jl,iu,fu,_u,bu){const Cu=hs.Util.bezierBoundingBox(Ml,Ul,Vl,Ql,Jl,iu,fu,_u);if(bu){bu[0]=Math.min(bu[0],Cu[0],Cu[2]),bu[1]=Math.max(bu[1],Cu[0],Cu[2]),bu[2]=Math.min(bu[2],Cu[1],Cu[3]),bu[3]=Math.max(bu[3],Cu[1],Cu[3]);return}this.updateRectMinMax(Nl,Cu)}getPathBoundingBox(Nl=co.PathType.FILL,Ml=null){const Ul=[this.minX,this.minY,this.maxX,this.maxY];if(Nl===co.PathType.STROKE){Ml||(0,hs.unreachable)("Stroke bounding box must include transform.");const Vl=hs.Util.singularValueDecompose2dScale(Ml),Ql=Vl[0]*this.lineWidth/2,Jl=Vl[1]*this.lineWidth/2;Ul[0]-=Ql,Ul[1]-=Jl,Ul[2]+=Ql,Ul[3]+=Jl}return Ul}updateClipFromPath(){const Nl=hs.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Nl||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Nl){this.clipBox=Nl,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Nl=co.PathType.FILL,Ml=null){return hs.Util.intersect(this.clipBox,this.getPathBoundingBox(Nl,Ml))}}function Tl(Ll,Nl){if(typeof ImageData<"u"&&Nl instanceof ImageData){Ll.putImageData(Nl,0,0);return}const Ml=Nl.height,Ul=Nl.width,Vl=Ml%yl,Ql=(Ml-Vl)/yl,Jl=Vl===0?Ql:Ql+1,iu=Ll.createImageData(Ul,yl);let fu=0,_u;const bu=Nl.data,Cu=iu.data;let Tu,Fu,ku,tu;if(Nl.kind===hs.ImageKind.GRAYSCALE_1BPP){const eu=bu.byteLength,gu=new Uint32Array(Cu.buffer,0,Cu.byteLength>>2),ru=gu.length,Pu=Ul+7>>3,Lu=4294967295,Ju=hs.FeatureTest.isLittleEndian?4278190080:255;for(Tu=0;Tu<Jl;Tu++){for(ku=Tu<Ql?yl:Vl,_u=0,Fu=0;Fu<ku;Fu++){const Vu=eu-fu;let Mu=0;const hp=Vu>Pu?Ul:Vu*8-7,mp=hp&-8;let Rp=0,Lp=0;for(;Mu<mp;Mu+=8)Lp=bu[fu++],gu[_u++]=Lp&128?Lu:Ju,gu[_u++]=Lp&64?Lu:Ju,gu[_u++]=Lp&32?Lu:Ju,gu[_u++]=Lp&16?Lu:Ju,gu[_u++]=Lp&8?Lu:Ju,gu[_u++]=Lp&4?Lu:Ju,gu[_u++]=Lp&2?Lu:Ju,gu[_u++]=Lp&1?Lu:Ju;for(;Mu<hp;Mu++)Rp===0&&(Lp=bu[fu++],Rp=128),gu[_u++]=Lp&Rp?Lu:Ju,Rp>>=1}for(;_u<ru;)gu[_u++]=0;Ll.putImageData(iu,0,Tu*yl)}}else if(Nl.kind===hs.ImageKind.RGBA_32BPP){for(Fu=0,tu=Ul*yl*4,Tu=0;Tu<Ql;Tu++)Cu.set(bu.subarray(fu,fu+tu)),fu+=tu,Ll.putImageData(iu,0,Fu),Fu+=yl;Tu<Jl&&(tu=Ul*Vl*4,Cu.set(bu.subarray(fu,fu+tu)),Ll.putImageData(iu,0,Fu))}else if(Nl.kind===hs.ImageKind.RGB_24BPP)for(ku=yl,tu=Ul*ku,Tu=0;Tu<Jl;Tu++){for(Tu>=Ql&&(ku=Vl,tu=Ul*ku),_u=0,Fu=tu;Fu--;)Cu[_u++]=bu[fu++],Cu[_u++]=bu[fu++],Cu[_u++]=bu[fu++],Cu[_u++]=255;Ll.putImageData(iu,0,Tu*yl)}else throw new Error(`bad image kind: ${Nl.kind}`)}function Dl(Ll,Nl){if(Nl.bitmap){Ll.drawImage(Nl.bitmap,0,0);return}const Ml=Nl.height,Ul=Nl.width,Vl=Ml%yl,Ql=(Ml-Vl)/yl,Jl=Vl===0?Ql:Ql+1,iu=Ll.createImageData(Ul,yl);let fu=0;const _u=Nl.data,bu=iu.data;for(let Cu=0;Cu<Jl;Cu++){const Tu=Cu<Ql?yl:Vl;({srcPos:fu}=(0,uo.convertBlackAndWhiteToRGBA)({src:_u,srcPos:fu,dest:bu,width:Ul,height:Tu,nonBlackColor:0})),Ll.putImageData(iu,0,Cu*yl)}}function Fl(Ll,Nl){const Ml=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Ul of Ml)Ll[Ul]!==void 0&&(Nl[Ul]=Ll[Ul]);Ll.setLineDash!==void 0&&(Nl.setLineDash(Ll.getLineDash()),Nl.lineDashOffset=Ll.lineDashOffset)}function Pl(Ll){if(Ll.strokeStyle=Ll.fillStyle="#000000",Ll.fillRule="nonzero",Ll.globalAlpha=1,Ll.lineWidth=1,Ll.lineCap="butt",Ll.lineJoin="miter",Ll.miterLimit=10,Ll.globalCompositeOperation="source-over",Ll.font="10px sans-serif",Ll.setLineDash!==void 0&&(Ll.setLineDash([]),Ll.lineDashOffset=0),!hs.isNodeJS){const{filter:Nl}=Ll;Nl!=="none"&&Nl!==""&&(Ll.filter="none")}}function Al(Ll,Nl,Ml,Ul){const Vl=Ll.length;for(let Ql=3;Ql<Vl;Ql+=4){const Jl=Ll[Ql];if(Jl===0)Ll[Ql-3]=Nl,Ll[Ql-2]=Ml,Ll[Ql-1]=Ul;else if(Jl<255){const iu=255-Jl;Ll[Ql-3]=Ll[Ql-3]*Jl+Nl*iu>>8,Ll[Ql-2]=Ll[Ql-2]*Jl+Ml*iu>>8,Ll[Ql-1]=Ll[Ql-1]*Jl+Ul*iu>>8}}}function Rl(Ll,Nl,Ml){const Ul=Ll.length,Vl=1/255;for(let Ql=3;Ql<Ul;Ql+=4){const Jl=Ml?Ml[Ll[Ql]]:Ll[Ql];Nl[Ql]=Nl[Ql]*Jl*Vl|0}}function Il(Ll,Nl,Ml){const Ul=Ll.length;for(let Vl=3;Vl<Ul;Vl+=4){const Ql=Ll[Vl-3]*77+Ll[Vl-2]*152+Ll[Vl-1]*28;Nl[Vl]=Ml?Nl[Vl]*Ml[Ql>>8]>>8:Nl[Vl]*Ql>>16}}function Bl(Ll,Nl,Ml,Ul,Vl,Ql,Jl,iu,fu,_u,bu){const Cu=!!Ql,Tu=Cu?Ql[0]:0,Fu=Cu?Ql[1]:0,ku=Cu?Ql[2]:0,tu=Vl==="Luminosity"?Il:Rl,gu=Math.min(Ul,Math.ceil(1048576/Ml));for(let ru=0;ru<Ul;ru+=gu){const Pu=Math.min(gu,Ul-ru),Lu=Ll.getImageData(iu-_u,ru+(fu-bu),Ml,Pu),Ju=Nl.getImageData(iu,ru+fu,Ml,Pu);Cu&&Al(Lu.data,Tu,Fu,ku),tu(Lu.data,Ju.data,Jl),Nl.putImageData(Ju,iu,ru+fu)}}function Ol(Ll,Nl,Ml,Ul){const Vl=Ul[0],Ql=Ul[1],Jl=Ul[2]-Vl,iu=Ul[3]-Ql;Jl===0||iu===0||(Bl(Nl.context,Ml,Jl,iu,Nl.subtype,Nl.backdrop,Nl.transferMap,Vl,Ql,Nl.offsetX,Nl.offsetY),Ll.save(),Ll.globalAlpha=1,Ll.globalCompositeOperation="source-over",Ll.setTransform(1,0,0,1,0,0),Ll.drawImage(Ml.canvas,0,0),Ll.restore())}function zl(Ll,Nl){const Ml=hs.Util.singularValueDecompose2dScale(Ll);Ml[0]=Math.fround(Ml[0]),Ml[1]=Math.fround(Ml[1]);const Ul=Math.fround((globalThis.devicePixelRatio||1)*lo.PixelsPerInch.PDF_TO_CSS_UNITS);return Nl!==void 0?Nl:Ml[0]<=Ul||Ml[1]<=Ul}const Hl=["butt","round","square"],ou=["miter","round","bevel"],au={},_c={},pu=class pu{constructor(Nl,Ml,Ul,Vl,Ql,{optionalContentConfig:Jl,markedContentStack:iu=null},fu,_u){_d(this,lu);this.ctx=Nl,this.current=new Cl(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Ml,this.objs=Ul,this.canvasFactory=Vl,this.filterFactory=Ql,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=iu||[],this.optionalContentConfig=Jl,this.cachedCanvases=new _l(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=fu,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=_u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Nl,Ml=null){return typeof Nl=="string"?Nl.startsWith("g_")?this.commonObjs.get(Nl):this.objs.get(Nl):Ml}beginDrawing({transform:Nl,viewport:Ml,transparency:Ul=!1,background:Vl=null}){const Ql=this.ctx.canvas.width,Jl=this.ctx.canvas.height,iu=this.ctx.fillStyle;if(this.ctx.fillStyle=Vl||"#ffffff",this.ctx.fillRect(0,0,Ql,Jl),this.ctx.fillStyle=iu,Ul){const fu=this.cachedCanvases.getCanvas("transparent",Ql,Jl);this.compositeCtx=this.ctx,this.transparentCanvas=fu.canvas,this.ctx=fu.context,this.ctx.save(),this.ctx.transform(...(0,lo.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Pl(this.ctx),Nl&&(this.ctx.transform(...Nl),this.outputScaleX=Nl[0],this.outputScaleY=Nl[0]),this.ctx.transform(...Ml.transform),this.viewportScale=Ml.scale,this.baseTransform=(0,lo.getCurrentTransform)(this.ctx)}executeOperatorList(Nl,Ml,Ul,Vl){const Ql=Nl.argsArray,Jl=Nl.fnArray;let iu=Ml||0;const fu=Ql.length;if(fu===iu)return iu;const _u=fu-iu>$a&&typeof Ul=="function",bu=_u?Date.now()+_a:0;let Cu=0;const Tu=this.commonObjs,Fu=this.objs;let ku;for(;;){if(Vl!==void 0&&iu===Vl.nextBreakPoint)return Vl.breakIt(iu,Ul),iu;if(ku=Jl[iu],ku!==hs.OPS.dependency)this[ku].apply(this,Ql[iu]);else for(const tu of Ql[iu]){const eu=tu.startsWith("g_")?Tu:Fu;if(!eu.has(tu))return eu.get(tu,Ul),iu}if(iu++,iu===fu)return iu;if(_u&&++Cu>$a){if(Date.now()>bu)return Ul(),iu;Cu=0}}}endDrawing(){Uu(this,lu,j1).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Nl of this._cachedBitmapsMap.values()){for(const Ml of Nl.values())typeof HTMLCanvasElement<"u"&&Ml instanceof HTMLCanvasElement&&(Ml.width=Ml.height=0);Nl.clear()}this._cachedBitmapsMap.clear(),Uu(this,lu,N1).call(this)}_scaleImage(Nl,Ml){const Ul=Nl.width,Vl=Nl.height;let Ql=Math.max(Math.hypot(Ml[0],Ml[1]),1),Jl=Math.max(Math.hypot(Ml[2],Ml[3]),1),iu=Ul,fu=Vl,_u="prescale1",bu,Cu;for(;Ql>2&&iu>1||Jl>2&&fu>1;){let Tu=iu,Fu=fu;Ql>2&&iu>1&&(Tu=iu>=16384?Math.floor(iu/2)-1||1:Math.ceil(iu/2),Ql/=iu/Tu),Jl>2&&fu>1&&(Fu=fu>=16384?Math.floor(fu/2)-1||1:Math.ceil(fu)/2,Jl/=fu/Fu),bu=this.cachedCanvases.getCanvas(_u,Tu,Fu),Cu=bu.context,Cu.clearRect(0,0,Tu,Fu),Cu.drawImage(Nl,0,0,iu,fu,0,0,Tu,Fu),Nl=bu.canvas,iu=Tu,fu=Fu,_u=_u==="prescale1"?"prescale2":"prescale1"}return{img:Nl,paintWidth:iu,paintHeight:fu}}_createMaskCanvas(Nl){const Ml=this.ctx,{width:Ul,height:Vl}=Nl,Ql=this.current.fillColor,Jl=this.current.patternFill,iu=(0,lo.getCurrentTransform)(Ml);let fu,_u,bu,Cu;if((Nl.bitmap||Nl.data)&&Nl.count>1){const Mu=Nl.bitmap||Nl.data.buffer;_u=JSON.stringify(Jl?iu:[iu.slice(0,4),Ql]),fu=this._cachedBitmapsMap.get(Mu),fu||(fu=new Map,this._cachedBitmapsMap.set(Mu,fu));const hp=fu.get(_u);if(hp&&!Jl){const mp=Math.round(Math.min(iu[0],iu[2])+iu[4]),Rp=Math.round(Math.min(iu[1],iu[3])+iu[5]);return{canvas:hp,offsetX:mp,offsetY:Rp}}bu=hp}bu||(Cu=this.cachedCanvases.getCanvas("maskCanvas",Ul,Vl),Dl(Cu.context,Nl));let Tu=hs.Util.transform(iu,[1/Ul,0,0,-1/Vl,0,0]);Tu=hs.Util.transform(Tu,[1,0,0,1,0,-Vl]);const Fu=hs.Util.applyTransform([0,0],Tu),ku=hs.Util.applyTransform([Ul,Vl],Tu),tu=hs.Util.normalizeRect([Fu[0],Fu[1],ku[0],ku[1]]),eu=Math.round(tu[2]-tu[0])||1,gu=Math.round(tu[3]-tu[1])||1,ru=this.cachedCanvases.getCanvas("fillCanvas",eu,gu),Pu=ru.context,Lu=Math.min(Fu[0],ku[0]),Ju=Math.min(Fu[1],ku[1]);Pu.translate(-Lu,-Ju),Pu.transform(...Tu),bu||(bu=this._scaleImage(Cu.canvas,(0,lo.getCurrentTransformInverse)(Pu)),bu=bu.img,fu&&Jl&&fu.set(_u,bu)),Pu.imageSmoothingEnabled=zl((0,lo.getCurrentTransform)(Pu),Nl.interpolate),El(Pu,bu,0,0,bu.width,bu.height,0,0,Ul,Vl),Pu.globalCompositeOperation="source-in";const Vu=hs.Util.transform((0,lo.getCurrentTransformInverse)(Pu),[1,0,0,1,-Lu,-Ju]);return Pu.fillStyle=Jl?Ql.getPattern(Ml,this,Vu,co.PathType.FILL):Ql,Pu.fillRect(0,0,Ul,Vl),fu&&!Jl&&(this.cachedCanvases.delete("fillCanvas"),fu.set(_u,ru.canvas)),{canvas:ru.canvas,offsetX:Math.round(Lu),offsetY:Math.round(Ju)}}setLineWidth(Nl){Nl!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Nl,this.ctx.lineWidth=Nl}setLineCap(Nl){this.ctx.lineCap=Hl[Nl]}setLineJoin(Nl){this.ctx.lineJoin=ou[Nl]}setMiterLimit(Nl){this.ctx.miterLimit=Nl}setDash(Nl,Ml){const Ul=this.ctx;Ul.setLineDash!==void 0&&(Ul.setLineDash(Nl),Ul.lineDashOffset=Ml)}setRenderingIntent(Nl){}setFlatness(Nl){}setGState(Nl){for(const[Ml,Ul]of Nl)switch(Ml){case"LW":this.setLineWidth(Ul);break;case"LC":this.setLineCap(Ul);break;case"LJ":this.setLineJoin(Ul);break;case"ML":this.setMiterLimit(Ul);break;case"D":this.setDash(Ul[0],Ul[1]);break;case"RI":this.setRenderingIntent(Ul);break;case"FL":this.setFlatness(Ul);break;case"Font":this.setFont(Ul[0],Ul[1]);break;case"CA":this.current.strokeAlpha=Ul;break;case"ca":this.current.fillAlpha=Ul,this.ctx.globalAlpha=Ul;break;case"BM":this.ctx.globalCompositeOperation=Ul;break;case"SMask":this.current.activeSMask=Ul?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Ul);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Nl=this.inSMaskMode;this.current.activeSMask&&!Nl?this.beginSMaskMode():!this.current.activeSMask&&Nl&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Nl=this.ctx.canvas.width,Ml=this.ctx.canvas.height,Ul="smaskGroupAt"+this.groupLevel,Vl=this.cachedCanvases.getCanvas(Ul,Nl,Ml);this.suspendedCtx=this.ctx,this.ctx=Vl.context;const Ql=this.ctx;Ql.setTransform(...(0,lo.getCurrentTransform)(this.suspendedCtx)),Fl(this.suspendedCtx,Ql),wl(Ql,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Fl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Nl){if(!this.current.activeSMask)return;Nl?(Nl[0]=Math.floor(Nl[0]),Nl[1]=Math.floor(Nl[1]),Nl[2]=Math.ceil(Nl[2]),Nl[3]=Math.ceil(Nl[3])):Nl=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Ml=this.current.activeSMask,Ul=this.suspendedCtx;Ol(Ul,Ml,this.ctx,Nl),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Fl(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Nl=this.current;this.stateStack.push(Nl),this.current=Nl.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Fl(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Nl,Ml,Ul,Vl,Ql,Jl){this.ctx.transform(Nl,Ml,Ul,Vl,Ql,Jl),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Nl,Ml,Ul){const Vl=this.ctx,Ql=this.current;let Jl=Ql.x,iu=Ql.y,fu,_u;const bu=(0,lo.getCurrentTransform)(Vl),Cu=bu[0]===0&&bu[3]===0||bu[1]===0&&bu[2]===0,Tu=Cu?Ul.slice(0):null;for(let Fu=0,ku=0,tu=Nl.length;Fu<tu;Fu++)switch(Nl[Fu]|0){case hs.OPS.rectangle:Jl=Ml[ku++],iu=Ml[ku++];const eu=Ml[ku++],gu=Ml[ku++],ru=Jl+eu,Pu=iu+gu;Vl.moveTo(Jl,iu),eu===0||gu===0?Vl.lineTo(ru,Pu):(Vl.lineTo(ru,iu),Vl.lineTo(ru,Pu),Vl.lineTo(Jl,Pu)),Cu||Ql.updateRectMinMax(bu,[Jl,iu,ru,Pu]),Vl.closePath();break;case hs.OPS.moveTo:Jl=Ml[ku++],iu=Ml[ku++],Vl.moveTo(Jl,iu),Cu||Ql.updatePathMinMax(bu,Jl,iu);break;case hs.OPS.lineTo:Jl=Ml[ku++],iu=Ml[ku++],Vl.lineTo(Jl,iu),Cu||Ql.updatePathMinMax(bu,Jl,iu);break;case hs.OPS.curveTo:fu=Jl,_u=iu,Jl=Ml[ku+4],iu=Ml[ku+5],Vl.bezierCurveTo(Ml[ku],Ml[ku+1],Ml[ku+2],Ml[ku+3],Jl,iu),Ql.updateCurvePathMinMax(bu,fu,_u,Ml[ku],Ml[ku+1],Ml[ku+2],Ml[ku+3],Jl,iu,Tu),ku+=6;break;case hs.OPS.curveTo2:fu=Jl,_u=iu,Vl.bezierCurveTo(Jl,iu,Ml[ku],Ml[ku+1],Ml[ku+2],Ml[ku+3]),Ql.updateCurvePathMinMax(bu,fu,_u,Jl,iu,Ml[ku],Ml[ku+1],Ml[ku+2],Ml[ku+3],Tu),Jl=Ml[ku+2],iu=Ml[ku+3],ku+=4;break;case hs.OPS.curveTo3:fu=Jl,_u=iu,Jl=Ml[ku+2],iu=Ml[ku+3],Vl.bezierCurveTo(Ml[ku],Ml[ku+1],Jl,iu,Jl,iu),Ql.updateCurvePathMinMax(bu,fu,_u,Ml[ku],Ml[ku+1],Jl,iu,Jl,iu,Tu),ku+=4;break;case hs.OPS.closePath:Vl.closePath();break}Cu&&Ql.updateScalingPathMinMax(bu,Tu),Ql.setCurrentPoint(Jl,iu)}closePath(){this.ctx.closePath()}stroke(Nl=!0){const Ml=this.ctx,Ul=this.current.strokeColor;Ml.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Ul=="object"&&(Ul!=null&&Ul.getPattern)?(Ml.save(),Ml.strokeStyle=Ul.getPattern(Ml,this,(0,lo.getCurrentTransformInverse)(Ml),co.PathType.STROKE),this.rescaleAndStroke(!1),Ml.restore()):this.rescaleAndStroke(!0)),Nl&&this.consumePath(this.current.getClippedPathBoundingBox()),Ml.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Nl=!0){const Ml=this.ctx,Ul=this.current.fillColor,Vl=this.current.patternFill;let Ql=!1;Vl&&(Ml.save(),Ml.fillStyle=Ul.getPattern(Ml,this,(0,lo.getCurrentTransformInverse)(Ml),co.PathType.FILL),Ql=!0);const Jl=this.current.getClippedPathBoundingBox();this.contentVisible&&Jl!==null&&(this.pendingEOFill?(Ml.fill("evenodd"),this.pendingEOFill=!1):Ml.fill()),Ql&&Ml.restore(),Nl&&this.consumePath(Jl)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=au}eoClip(){this.pendingClip=_c}beginText(){this.current.textMatrix=hs.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Nl=this.pendingTextPaths,Ml=this.ctx;if(Nl===void 0){Ml.beginPath();return}Ml.save(),Ml.beginPath();for(const Ul of Nl)Ml.setTransform(...Ul.transform),Ml.translate(Ul.x,Ul.y),Ul.addToPath(Ml,Ul.fontSize);Ml.restore(),Ml.clip(),Ml.beginPath(),delete this.pendingTextPaths}setCharSpacing(Nl){this.current.charSpacing=Nl}setWordSpacing(Nl){this.current.wordSpacing=Nl}setHScale(Nl){this.current.textHScale=Nl/100}setLeading(Nl){this.current.leading=-Nl}setFont(Nl,Ml){var bu;const Ul=this.commonObjs.get(Nl),Vl=this.current;if(!Ul)throw new Error(`Can't find font for ${Nl}`);if(Vl.fontMatrix=Ul.fontMatrix||hs.FONT_IDENTITY_MATRIX,(Vl.fontMatrix[0]===0||Vl.fontMatrix[3]===0)&&(0,hs.warn)("Invalid font matrix for font "+Nl),Ml<0?(Ml=-Ml,Vl.fontDirection=-1):Vl.fontDirection=1,this.current.font=Ul,this.current.fontSize=Ml,Ul.isType3Font)return;const Ql=Ul.loadedName||"sans-serif",Jl=((bu=Ul.systemFontInfo)==null?void 0:bu.css)||`"${Ql}", ${Ul.fallbackName}`;let iu="normal";Ul.black?iu="900":Ul.bold&&(iu="bold");const fu=Ul.italic?"italic":"normal";let _u=Ml;Ml<ga?_u=ga:Ml>ba&&(_u=ba),this.current.fontSizeScale=Ml/_u,this.ctx.font=`${fu} ${iu} ${_u}px ${Jl}`}setTextRenderingMode(Nl){this.current.textRenderingMode=Nl}setTextRise(Nl){this.current.textRise=Nl}moveText(Nl,Ml){this.current.x=this.current.lineX+=Nl,this.current.y=this.current.lineY+=Ml}setLeadingMoveText(Nl,Ml){this.setLeading(-Ml),this.moveText(Nl,Ml)}setTextMatrix(Nl,Ml,Ul,Vl,Ql,Jl){this.current.textMatrix=[Nl,Ml,Ul,Vl,Ql,Jl],this.current.textMatrixScale=Math.hypot(Nl,Ml),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Nl,Ml,Ul,Vl){const Ql=this.ctx,Jl=this.current,iu=Jl.font,fu=Jl.textRenderingMode,_u=Jl.fontSize/Jl.fontSizeScale,bu=fu&hs.TextRenderingMode.FILL_STROKE_MASK,Cu=!!(fu&hs.TextRenderingMode.ADD_TO_PATH_FLAG),Tu=Jl.patternFill&&!iu.missingFile;let Fu;(iu.disableFontFace||Cu||Tu)&&(Fu=iu.getPathGenerator(this.commonObjs,Nl)),iu.disableFontFace||Tu?(Ql.save(),Ql.translate(Ml,Ul),Ql.beginPath(),Fu(Ql,_u),Vl&&Ql.setTransform(...Vl),(bu===hs.TextRenderingMode.FILL||bu===hs.TextRenderingMode.FILL_STROKE)&&Ql.fill(),(bu===hs.TextRenderingMode.STROKE||bu===hs.TextRenderingMode.FILL_STROKE)&&Ql.stroke(),Ql.restore()):((bu===hs.TextRenderingMode.FILL||bu===hs.TextRenderingMode.FILL_STROKE)&&Ql.fillText(Nl,Ml,Ul),(bu===hs.TextRenderingMode.STROKE||bu===hs.TextRenderingMode.FILL_STROKE)&&Ql.strokeText(Nl,Ml,Ul)),Cu&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,lo.getCurrentTransform)(Ql),x:Ml,y:Ul,fontSize:_u,addToPath:Fu})}get isFontSubpixelAAEnabled(){const{context:Nl}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Nl.scale(1.5,1),Nl.fillText("I",0,10);const Ml=Nl.getImageData(0,0,10,10).data;let Ul=!1;for(let Vl=3;Vl<Ml.length;Vl+=4)if(Ml[Vl]>0&&Ml[Vl]<255){Ul=!0;break}return(0,hs.shadow)(this,"isFontSubpixelAAEnabled",Ul)}showText(Nl){const Ml=this.current,Ul=Ml.font;if(Ul.isType3Font)return this.showType3Text(Nl);const Vl=Ml.fontSize;if(Vl===0)return;const Ql=this.ctx,Jl=Ml.fontSizeScale,iu=Ml.charSpacing,fu=Ml.wordSpacing,_u=Ml.fontDirection,bu=Ml.textHScale*_u,Cu=Nl.length,Tu=Ul.vertical,Fu=Tu?1:-1,ku=Ul.defaultVMetrics,tu=Vl*Ml.fontMatrix[0],eu=Ml.textRenderingMode===hs.TextRenderingMode.FILL&&!Ul.disableFontFace&&!Ml.patternFill;Ql.save(),Ql.transform(...Ml.textMatrix),Ql.translate(Ml.x,Ml.y+Ml.textRise),_u>0?Ql.scale(bu,-1):Ql.scale(bu,1);let gu;if(Ml.patternFill){Ql.save();const Vu=Ml.fillColor.getPattern(Ql,this,(0,lo.getCurrentTransformInverse)(Ql),co.PathType.FILL);gu=(0,lo.getCurrentTransform)(Ql),Ql.restore(),Ql.fillStyle=Vu}let ru=Ml.lineWidth;const Pu=Ml.textMatrixScale;if(Pu===0||ru===0){const Vu=Ml.textRenderingMode&hs.TextRenderingMode.FILL_STROKE_MASK;(Vu===hs.TextRenderingMode.STROKE||Vu===hs.TextRenderingMode.FILL_STROKE)&&(ru=this.getSinglePixelWidth())}else ru/=Pu;if(Jl!==1&&(Ql.scale(Jl,Jl),ru/=Jl),Ql.lineWidth=ru,Ul.isInvalidPDFjsFont){const Vu=[];let Mu=0;for(const hp of Nl)Vu.push(hp.unicode),Mu+=hp.width;Ql.fillText(Vu.join(""),0,0),Ml.x+=Mu*tu*bu,Ql.restore(),this.compose();return}let Lu=0,Ju;for(Ju=0;Ju<Cu;++Ju){const Vu=Nl[Ju];if(typeof Vu=="number"){Lu+=Fu*Vu*Vl/1e3;continue}let Mu=!1;const hp=(Vu.isSpace?fu:0)+iu,mp=Vu.fontChar,Rp=Vu.accent;let Lp,Bp,Tp=Vu.width;if(Tu){const Hp=Vu.vmetric||ku,qp=-(Vu.vmetric?Hp[1]:Tp*.5)*tu,lp=Hp[2]*tu;Tp=Hp?-Hp[0]:Tp,Lp=qp/Jl,Bp=(Lu+lp)/Jl}else Lp=Lu/Jl,Bp=0;if(Ul.remeasure&&Tp>0){const Hp=Ql.measureText(mp).width*1e3/Vl*Jl;if(Tp<Hp&&this.isFontSubpixelAAEnabled){const qp=Tp/Hp;Mu=!0,Ql.save(),Ql.scale(qp,1),Lp/=qp}else Tp!==Hp&&(Lp+=(Tp-Hp)/2e3*Vl/Jl)}if(this.contentVisible&&(Vu.isInFont||Ul.missingFile)){if(eu&&!Rp)Ql.fillText(mp,Lp,Bp);else if(this.paintChar(mp,Lp,Bp,gu),Rp){const Hp=Lp+Vl*Rp.offset.x/Jl,qp=Bp-Vl*Rp.offset.y/Jl;this.paintChar(Rp.fontChar,Hp,qp,gu)}}const Ip=Tu?Tp*tu-hp*_u:Tp*tu+hp*_u;Lu+=Ip,Mu&&Ql.restore()}Tu?Ml.y-=Lu:Ml.x+=Lu*bu,Ql.restore(),this.compose()}showType3Text(Nl){const Ml=this.ctx,Ul=this.current,Vl=Ul.font,Ql=Ul.fontSize,Jl=Ul.fontDirection,iu=Vl.vertical?1:-1,fu=Ul.charSpacing,_u=Ul.wordSpacing,bu=Ul.textHScale*Jl,Cu=Ul.fontMatrix||hs.FONT_IDENTITY_MATRIX,Tu=Nl.length,Fu=Ul.textRenderingMode===hs.TextRenderingMode.INVISIBLE;let ku,tu,eu,gu;if(!(Fu||Ql===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Ml.save(),Ml.transform(...Ul.textMatrix),Ml.translate(Ul.x,Ul.y),Ml.scale(bu,Jl),ku=0;ku<Tu;++ku){if(tu=Nl[ku],typeof tu=="number"){gu=iu*tu*Ql/1e3,this.ctx.translate(gu,0),Ul.x+=gu*bu;continue}const ru=(tu.isSpace?_u:0)+fu,Pu=Vl.charProcOperatorList[tu.operatorListId];if(!Pu){(0,hs.warn)(`Type3 character "${tu.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=tu,this.save(),Ml.scale(Ql,Ql),Ml.transform(...Cu),this.executeOperatorList(Pu),this.restore()),eu=hs.Util.applyTransform([tu.width,0],Cu)[0]*Ql+ru,Ml.translate(eu,0),Ul.x+=eu*bu}Ml.restore(),this.processingType3=null}}setCharWidth(Nl,Ml){}setCharWidthAndBounds(Nl,Ml,Ul,Vl,Ql,Jl){this.ctx.rect(Ul,Vl,Ql-Ul,Jl-Vl),this.ctx.clip(),this.endPath()}getColorN_Pattern(Nl){let Ml;if(Nl[0]==="TilingPattern"){const Ul=Nl[1],Vl=this.baseTransform||(0,lo.getCurrentTransform)(this.ctx),Ql={createCanvasGraphics:Jl=>new pu(Jl,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Ml=new co.TilingPattern(Nl,Ul,this.ctx,Ql,Vl)}else Ml=this._getPattern(Nl[1],Nl[2]);return Ml}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Nl,Ml,Ul){const Vl=hs.Util.makeHexColor(Nl,Ml,Ul);this.ctx.strokeStyle=Vl,this.current.strokeColor=Vl}setFillRGBColor(Nl,Ml,Ul){const Vl=hs.Util.makeHexColor(Nl,Ml,Ul);this.ctx.fillStyle=Vl,this.current.fillColor=Vl,this.current.patternFill=!1}_getPattern(Nl,Ml=null){let Ul;return this.cachedPatterns.has(Nl)?Ul=this.cachedPatterns.get(Nl):(Ul=(0,co.getShadingPattern)(this.getObject(Nl)),this.cachedPatterns.set(Nl,Ul)),Ml&&(Ul.matrix=Ml),Ul}shadingFill(Nl){if(!this.contentVisible)return;const Ml=this.ctx;this.save();const Ul=this._getPattern(Nl);Ml.fillStyle=Ul.getPattern(Ml,this,(0,lo.getCurrentTransformInverse)(Ml),co.PathType.SHADING);const Vl=(0,lo.getCurrentTransformInverse)(Ml);if(Vl){const{width:Ql,height:Jl}=Ml.canvas,[iu,fu,_u,bu]=hs.Util.getAxialAlignedBoundingBox([0,0,Ql,Jl],Vl);this.ctx.fillRect(iu,fu,_u-iu,bu-fu)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,hs.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,hs.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Nl,Ml){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Nl)&&Nl.length===6&&this.transform(...Nl),this.baseTransform=(0,lo.getCurrentTransform)(this.ctx),Ml)){const Ul=Ml[2]-Ml[0],Vl=Ml[3]-Ml[1];this.ctx.rect(Ml[0],Ml[1],Ul,Vl),this.current.updateRectMinMax((0,lo.getCurrentTransform)(this.ctx),Ml),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Nl){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Ml=this.ctx;Nl.isolated||(0,hs.info)("TODO: Support non-isolated groups."),Nl.knockout&&(0,hs.warn)("Knockout groups not supported.");const Ul=(0,lo.getCurrentTransform)(Ml);if(Nl.matrix&&Ml.transform(...Nl.matrix),!Nl.bbox)throw new Error("Bounding box is required.");let Vl=hs.Util.getAxialAlignedBoundingBox(Nl.bbox,(0,lo.getCurrentTransform)(Ml));const Ql=[0,0,Ml.canvas.width,Ml.canvas.height];Vl=hs.Util.intersect(Vl,Ql)||[0,0,0,0];const Jl=Math.floor(Vl[0]),iu=Math.floor(Vl[1]);let fu=Math.max(Math.ceil(Vl[2])-Jl,1),_u=Math.max(Math.ceil(Vl[3])-iu,1),bu=1,Cu=1;fu>xa&&(bu=fu/xa,fu=xa),_u>xa&&(Cu=_u/xa,_u=xa),this.current.startNewPathAndClipBox([0,0,fu,_u]);let Tu="groupAt"+this.groupLevel;Nl.smask&&(Tu+="_smask_"+this.smaskCounter++%2);const Fu=this.cachedCanvases.getCanvas(Tu,fu,_u),ku=Fu.context;ku.scale(1/bu,1/Cu),ku.translate(-Jl,-iu),ku.transform(...Ul),Nl.smask?this.smaskStack.push({canvas:Fu.canvas,context:ku,offsetX:Jl,offsetY:iu,scaleX:bu,scaleY:Cu,subtype:Nl.smask.subtype,backdrop:Nl.smask.backdrop,transferMap:Nl.smask.transferMap||null,startTransformInverse:null}):(Ml.setTransform(1,0,0,1,0,0),Ml.translate(Jl,iu),Ml.scale(bu,Cu),Ml.save()),Fl(Ml,ku),this.ctx=ku,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Ml),this.groupLevel++}endGroup(Nl){if(!this.contentVisible)return;this.groupLevel--;const Ml=this.ctx,Ul=this.groupStack.pop();if(this.ctx=Ul,this.ctx.imageSmoothingEnabled=!1,Nl.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Vl=(0,lo.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Vl);const Ql=hs.Util.getAxialAlignedBoundingBox([0,0,Ml.canvas.width,Ml.canvas.height],Vl);this.ctx.drawImage(Ml.canvas,0,0),this.ctx.restore(),this.compose(Ql)}}beginAnnotation(Nl,Ml,Ul,Vl,Ql){if(Uu(this,lu,j1).call(this),Pl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Ml)&&Ml.length===4){const Jl=Ml[2]-Ml[0],iu=Ml[3]-Ml[1];if(Ql&&this.annotationCanvasMap){Ul=Ul.slice(),Ul[4]-=Ml[0],Ul[5]-=Ml[1],Ml=Ml.slice(),Ml[0]=Ml[1]=0,Ml[2]=Jl,Ml[3]=iu;const[fu,_u]=hs.Util.singularValueDecompose2dScale((0,lo.getCurrentTransform)(this.ctx)),{viewportScale:bu}=this,Cu=Math.ceil(Jl*this.outputScaleX*bu),Tu=Math.ceil(iu*this.outputScaleY*bu);this.annotationCanvas=this.canvasFactory.create(Cu,Tu);const{canvas:Fu,context:ku}=this.annotationCanvas;this.annotationCanvasMap.set(Nl,Fu),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ku,this.ctx.save(),this.ctx.setTransform(fu,0,0,-_u,0,iu*_u),Pl(this.ctx)}else Pl(this.ctx),this.ctx.rect(Ml[0],Ml[1],Jl,iu),this.ctx.clip(),this.endPath()}this.current=new Cl(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Ul),this.transform(...Vl)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Uu(this,lu,N1).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Nl){if(!this.contentVisible)return;const Ml=Nl.count;Nl=this.getObject(Nl.data,Nl),Nl.count=Ml;const Ul=this.ctx,Vl=this.processingType3;if(Vl&&(Vl.compiled===void 0&&(Vl.compiled=Sl(Nl)),Vl.compiled)){Vl.compiled(Ul);return}const Ql=this._createMaskCanvas(Nl),Jl=Ql.canvas;Ul.save(),Ul.setTransform(1,0,0,1,0,0),Ul.drawImage(Jl,Ql.offsetX,Ql.offsetY),Ul.restore(),this.compose()}paintImageMaskXObjectRepeat(Nl,Ml,Ul=0,Vl=0,Ql,Jl){if(!this.contentVisible)return;Nl=this.getObject(Nl.data,Nl);const iu=this.ctx;iu.save();const fu=(0,lo.getCurrentTransform)(iu);iu.transform(Ml,Ul,Vl,Ql,0,0);const _u=this._createMaskCanvas(Nl);iu.setTransform(1,0,0,1,_u.offsetX-fu[4],_u.offsetY-fu[5]);for(let bu=0,Cu=Jl.length;bu<Cu;bu+=2){const Tu=hs.Util.transform(fu,[Ml,Ul,Vl,Ql,Jl[bu],Jl[bu+1]]),[Fu,ku]=hs.Util.applyTransform([0,0],Tu);iu.drawImage(_u.canvas,Fu,ku)}iu.restore(),this.compose()}paintImageMaskXObjectGroup(Nl){if(!this.contentVisible)return;const Ml=this.ctx,Ul=this.current.fillColor,Vl=this.current.patternFill;for(const Ql of Nl){const{data:Jl,width:iu,height:fu,transform:_u}=Ql,bu=this.cachedCanvases.getCanvas("maskCanvas",iu,fu),Cu=bu.context;Cu.save();const Tu=this.getObject(Jl,Ql);Dl(Cu,Tu),Cu.globalCompositeOperation="source-in",Cu.fillStyle=Vl?Ul.getPattern(Cu,this,(0,lo.getCurrentTransformInverse)(Ml),co.PathType.FILL):Ul,Cu.fillRect(0,0,iu,fu),Cu.restore(),Ml.save(),Ml.transform(..._u),Ml.scale(1,-1),El(Ml,bu.canvas,0,0,iu,fu,0,-1,1,1),Ml.restore()}this.compose()}paintImageXObject(Nl){if(!this.contentVisible)return;const Ml=this.getObject(Nl);if(!Ml){(0,hs.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Ml)}paintImageXObjectRepeat(Nl,Ml,Ul,Vl){if(!this.contentVisible)return;const Ql=this.getObject(Nl);if(!Ql){(0,hs.warn)("Dependent image isn't ready yet");return}const Jl=Ql.width,iu=Ql.height,fu=[];for(let _u=0,bu=Vl.length;_u<bu;_u+=2)fu.push({transform:[Ml,0,0,Ul,Vl[_u],Vl[_u+1]],x:0,y:0,w:Jl,h:iu});this.paintInlineImageXObjectGroup(Ql,fu)}applyTransferMapsToCanvas(Nl){return this.current.transferMaps!=="none"&&(Nl.filter=this.current.transferMaps,Nl.drawImage(Nl.canvas,0,0),Nl.filter="none"),Nl.canvas}applyTransferMapsToBitmap(Nl){if(this.current.transferMaps==="none")return Nl.bitmap;const{bitmap:Ml,width:Ul,height:Vl}=Nl,Ql=this.cachedCanvases.getCanvas("inlineImage",Ul,Vl),Jl=Ql.context;return Jl.filter=this.current.transferMaps,Jl.drawImage(Ml,0,0),Jl.filter="none",Ql.canvas}paintInlineImageXObject(Nl){if(!this.contentVisible)return;const Ml=Nl.width,Ul=Nl.height,Vl=this.ctx;if(this.save(),!hs.isNodeJS){const{filter:iu}=Vl;iu!=="none"&&iu!==""&&(Vl.filter="none")}Vl.scale(1/Ml,-1/Ul);let Ql;if(Nl.bitmap)Ql=this.applyTransferMapsToBitmap(Nl);else if(typeof HTMLElement=="function"&&Nl instanceof HTMLElement||!Nl.data)Ql=Nl;else{const fu=this.cachedCanvases.getCanvas("inlineImage",Ml,Ul).context;Tl(fu,Nl),Ql=this.applyTransferMapsToCanvas(fu)}const Jl=this._scaleImage(Ql,(0,lo.getCurrentTransformInverse)(Vl));Vl.imageSmoothingEnabled=zl((0,lo.getCurrentTransform)(Vl),Nl.interpolate),El(Vl,Jl.img,0,0,Jl.paintWidth,Jl.paintHeight,0,-Ul,Ml,Ul),this.compose(),this.restore()}paintInlineImageXObjectGroup(Nl,Ml){if(!this.contentVisible)return;const Ul=this.ctx;let Vl;if(Nl.bitmap)Vl=Nl.bitmap;else{const Ql=Nl.width,Jl=Nl.height,fu=this.cachedCanvases.getCanvas("inlineImage",Ql,Jl).context;Tl(fu,Nl),Vl=this.applyTransferMapsToCanvas(fu)}for(const Ql of Ml)Ul.save(),Ul.transform(...Ql.transform),Ul.scale(1,-1),El(Ul,Vl,Ql.x,Ql.y,Ql.w,Ql.h,0,-1,1,1),Ul.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Nl){}markPointProps(Nl,Ml){}beginMarkedContent(Nl){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Nl,Ml){Nl==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Ml)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Nl){const Ml=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Nl);const Ul=this.ctx;this.pendingClip&&(Ml||(this.pendingClip===_c?Ul.clip("evenodd"):Ul.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Ul.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Nl=(0,lo.getCurrentTransform)(this.ctx);if(Nl[1]===0&&Nl[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Nl[0]),Math.abs(Nl[3]));else{const Ml=Math.abs(Nl[0]*Nl[3]-Nl[2]*Nl[1]),Ul=Math.hypot(Nl[0],Nl[2]),Vl=Math.hypot(Nl[1],Nl[3]);this._cachedGetSinglePixelWidth=Math.max(Ul,Vl)/Ml}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Nl}=this.current,{a:Ml,b:Ul,c:Vl,d:Ql}=this.ctx.getTransform();let Jl,iu;if(Ul===0&&Vl===0){const fu=Math.abs(Ml),_u=Math.abs(Ql);if(fu===_u)if(Nl===0)Jl=iu=1/fu;else{const bu=fu*Nl;Jl=iu=bu<1?1/bu:1}else if(Nl===0)Jl=1/fu,iu=1/_u;else{const bu=fu*Nl,Cu=_u*Nl;Jl=bu<1?1/bu:1,iu=Cu<1?1/Cu:1}}else{const fu=Math.abs(Ml*Ql-Ul*Vl),_u=Math.hypot(Ml,Ul),bu=Math.hypot(Vl,Ql);if(Nl===0)Jl=bu/fu,iu=_u/fu;else{const Cu=Nl*fu;Jl=bu>Cu?bu/Cu:1,iu=_u>Cu?_u/Cu:1}}this._cachedScaleForStroking[0]=Jl,this._cachedScaleForStroking[1]=iu}return this._cachedScaleForStroking}rescaleAndStroke(Nl){const{ctx:Ml}=this,{lineWidth:Ul}=this.current,[Vl,Ql]=this.getScaleForStroking();if(Ml.lineWidth=Ul||1,Vl===1&&Ql===1){Ml.stroke();return}const Jl=Ml.getLineDash();if(Nl&&Ml.save(),Ml.scale(Vl,Ql),Jl.length>0){const iu=Math.max(Vl,Ql);Ml.setLineDash(Jl.map(fu=>fu/iu)),Ml.lineDashOffset/=iu}Ml.stroke(),Nl&&Ml.restore()}isContentVisible(){for(let Nl=this.markedContentStack.length-1;Nl>=0;Nl--)if(!this.markedContentStack[Nl].visible)return!1;return!0}};lu=new WeakSet,j1=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},N1=function(){if(this.pageColors){const Nl=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Nl!=="none"){const Ml=this.ctx.filter;this.ctx.filter=Nl,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Ml}}};let uu=pu;is.CanvasGraphics=uu;for(const Ll in hs.OPS)uu.prototype[Ll]!==void 0&&(uu.prototype[hs.OPS[Ll]]=uu.prototype[Ll])},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.TilingPattern=is.PathType=void 0,is.getShadingPattern=yl;var hs=us(1),lo=us(6);const co={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};is.PathType=co;function uo(Sl,Cl){if(!Cl)return;const Tl=Cl[2]-Cl[0],Dl=Cl[3]-Cl[1],Fl=new Path2D;Fl.rect(Cl[0],Cl[1],Tl,Dl),Sl.clip(Fl)}class ga{constructor(){this.constructor===ga&&(0,hs.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,hs.unreachable)("Abstract method `getPattern` called.")}}class ba extends ga{constructor(Cl){super(),this._type=Cl[1],this._bbox=Cl[2],this._colorStops=Cl[3],this._p0=Cl[4],this._p1=Cl[5],this._r0=Cl[6],this._r1=Cl[7],this.matrix=null}_createGradient(Cl){let Tl;this._type==="axial"?Tl=Cl.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(Tl=Cl.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const Dl of this._colorStops)Tl.addColorStop(Dl[0],Dl[1]);return Tl}getPattern(Cl,Tl,Dl,Fl){let Pl;if(Fl===co.STROKE||Fl===co.FILL){const Al=Tl.current.getClippedPathBoundingBox(Fl,(0,lo.getCurrentTransform)(Cl))||[0,0,0,0],Rl=Math.ceil(Al[2]-Al[0])||1,Il=Math.ceil(Al[3]-Al[1])||1,Bl=Tl.cachedCanvases.getCanvas("pattern",Rl,Il,!0),Ol=Bl.context;Ol.clearRect(0,0,Ol.canvas.width,Ol.canvas.height),Ol.beginPath(),Ol.rect(0,0,Ol.canvas.width,Ol.canvas.height),Ol.translate(-Al[0],-Al[1]),Dl=hs.Util.transform(Dl,[1,0,0,1,Al[0],Al[1]]),Ol.transform(...Tl.baseTransform),this.matrix&&Ol.transform(...this.matrix),uo(Ol,this._bbox),Ol.fillStyle=this._createGradient(Ol),Ol.fill(),Pl=Cl.createPattern(Bl.canvas,"no-repeat");const zl=new DOMMatrix(Dl);Pl.setTransform(zl)}else uo(Cl,this._bbox),Pl=this._createGradient(Cl);return Pl}}function xa(Sl,Cl,Tl,Dl,Fl,Pl,Al,Rl){const Il=Cl.coords,Bl=Cl.colors,Ol=Sl.data,zl=Sl.width*4;let Hl;Il[Tl+1]>Il[Dl+1]&&(Hl=Tl,Tl=Dl,Dl=Hl,Hl=Pl,Pl=Al,Al=Hl),Il[Dl+1]>Il[Fl+1]&&(Hl=Dl,Dl=Fl,Fl=Hl,Hl=Al,Al=Rl,Rl=Hl),Il[Tl+1]>Il[Dl+1]&&(Hl=Tl,Tl=Dl,Dl=Hl,Hl=Pl,Pl=Al,Al=Hl);const ou=(Il[Tl]+Cl.offsetX)*Cl.scaleX,au=(Il[Tl+1]+Cl.offsetY)*Cl.scaleY,_c=(Il[Dl]+Cl.offsetX)*Cl.scaleX,uu=(Il[Dl+1]+Cl.offsetY)*Cl.scaleY,lu=(Il[Fl]+Cl.offsetX)*Cl.scaleX,Kl=(Il[Fl+1]+Cl.offsetY)*Cl.scaleY;if(au>=Kl)return;const xu=Bl[Pl],pu=Bl[Pl+1],Ll=Bl[Pl+2],Nl=Bl[Al],Ml=Bl[Al+1],Ul=Bl[Al+2],Vl=Bl[Rl],Ql=Bl[Rl+1],Jl=Bl[Rl+2],iu=Math.round(au),fu=Math.round(Kl);let _u,bu,Cu,Tu,Fu,ku,tu,eu;for(let gu=iu;gu<=fu;gu++){if(gu<uu){const Vu=gu<au?0:(au-gu)/(au-uu);_u=ou-(ou-_c)*Vu,bu=xu-(xu-Nl)*Vu,Cu=pu-(pu-Ml)*Vu,Tu=Ll-(Ll-Ul)*Vu}else{let Vu;gu>Kl?Vu=1:uu===Kl?Vu=0:Vu=(uu-gu)/(uu-Kl),_u=_c-(_c-lu)*Vu,bu=Nl-(Nl-Vl)*Vu,Cu=Ml-(Ml-Ql)*Vu,Tu=Ul-(Ul-Jl)*Vu}let ru;gu<au?ru=0:gu>Kl?ru=1:ru=(au-gu)/(au-Kl),Fu=ou-(ou-lu)*ru,ku=xu-(xu-Vl)*ru,tu=pu-(pu-Ql)*ru,eu=Ll-(Ll-Jl)*ru;const Pu=Math.round(Math.min(_u,Fu)),Lu=Math.round(Math.max(_u,Fu));let Ju=zl*gu+Pu*4;for(let Vu=Pu;Vu<=Lu;Vu++)ru=(_u-Vu)/(_u-Fu),ru<0?ru=0:ru>1&&(ru=1),Ol[Ju++]=bu-(bu-ku)*ru|0,Ol[Ju++]=Cu-(Cu-tu)*ru|0,Ol[Ju++]=Tu-(Tu-eu)*ru|0,Ol[Ju++]=255}}function _a(Sl,Cl,Tl){const Dl=Cl.coords,Fl=Cl.colors;let Pl,Al;switch(Cl.type){case"lattice":const Rl=Cl.verticesPerRow,Il=Math.floor(Dl.length/Rl)-1,Bl=Rl-1;for(Pl=0;Pl<Il;Pl++){let Ol=Pl*Rl;for(let zl=0;zl<Bl;zl++,Ol++)xa(Sl,Tl,Dl[Ol],Dl[Ol+1],Dl[Ol+Rl],Fl[Ol],Fl[Ol+1],Fl[Ol+Rl]),xa(Sl,Tl,Dl[Ol+Rl+1],Dl[Ol+1],Dl[Ol+Rl],Fl[Ol+Rl+1],Fl[Ol+1],Fl[Ol+Rl])}break;case"triangles":for(Pl=0,Al=Dl.length;Pl<Al;Pl+=3)xa(Sl,Tl,Dl[Pl],Dl[Pl+1],Dl[Pl+2],Fl[Pl],Fl[Pl+1],Fl[Pl+2]);break;default:throw new Error("illegal figure")}}class $a extends ga{constructor(Cl){super(),this._coords=Cl[2],this._colors=Cl[3],this._figures=Cl[4],this._bounds=Cl[5],this._bbox=Cl[7],this._background=Cl[8],this.matrix=null}_createMeshCanvas(Cl,Tl,Dl){const Rl=Math.floor(this._bounds[0]),Il=Math.floor(this._bounds[1]),Bl=Math.ceil(this._bounds[2])-Rl,Ol=Math.ceil(this._bounds[3])-Il,zl=Math.min(Math.ceil(Math.abs(Bl*Cl[0]*1.1)),3e3),Hl=Math.min(Math.ceil(Math.abs(Ol*Cl[1]*1.1)),3e3),ou=Bl/zl,au=Ol/Hl,_c={coords:this._coords,colors:this._colors,offsetX:-Rl,offsetY:-Il,scaleX:1/ou,scaleY:1/au},uu=zl+2*2,lu=Hl+2*2,Kl=Dl.getCanvas("mesh",uu,lu,!1),xu=Kl.context,pu=xu.createImageData(zl,Hl);if(Tl){const Nl=pu.data;for(let Ml=0,Ul=Nl.length;Ml<Ul;Ml+=4)Nl[Ml]=Tl[0],Nl[Ml+1]=Tl[1],Nl[Ml+2]=Tl[2],Nl[Ml+3]=255}for(const Nl of this._figures)_a(pu,Nl,_c);return xu.putImageData(pu,2,2),{canvas:Kl.canvas,offsetX:Rl-2*ou,offsetY:Il-2*au,scaleX:ou,scaleY:au}}getPattern(Cl,Tl,Dl,Fl){uo(Cl,this._bbox);let Pl;if(Fl===co.SHADING)Pl=hs.Util.singularValueDecompose2dScale((0,lo.getCurrentTransform)(Cl));else if(Pl=hs.Util.singularValueDecompose2dScale(Tl.baseTransform),this.matrix){const Rl=hs.Util.singularValueDecompose2dScale(this.matrix);Pl=[Pl[0]*Rl[0],Pl[1]*Rl[1]]}const Al=this._createMeshCanvas(Pl,Fl===co.SHADING?null:this._background,Tl.cachedCanvases);return Fl!==co.SHADING&&(Cl.setTransform(...Tl.baseTransform),this.matrix&&Cl.transform(...this.matrix)),Cl.translate(Al.offsetX,Al.offsetY),Cl.scale(Al.scaleX,Al.scaleY),Cl.createPattern(Al.canvas,"no-repeat")}}class xl extends ga{getPattern(){return"hotpink"}}function yl(Sl){switch(Sl[0]){case"RadialAxial":return new ba(Sl);case"Mesh":return new $a(Sl);case"Dummy":return new xl}throw new Error(`Unknown IR type: ${Sl[0]}`)}const wl={COLORED:1,UNCOLORED:2},El=class El{constructor(Cl,Tl,Dl,Fl,Pl){this.operatorList=Cl[2],this.matrix=Cl[3]||[1,0,0,1,0,0],this.bbox=Cl[4],this.xstep=Cl[5],this.ystep=Cl[6],this.paintType=Cl[7],this.tilingType=Cl[8],this.color=Tl,this.ctx=Dl,this.canvasGraphicsFactory=Fl,this.baseTransform=Pl}createPatternCanvas(Cl){const Tl=this.operatorList,Dl=this.bbox,Fl=this.xstep,Pl=this.ystep,Al=this.paintType,Rl=this.tilingType,Il=this.color,Bl=this.canvasGraphicsFactory;(0,hs.info)("TilingType: "+Rl);const Ol=Dl[0],zl=Dl[1],Hl=Dl[2],ou=Dl[3],au=hs.Util.singularValueDecompose2dScale(this.matrix),_c=hs.Util.singularValueDecompose2dScale(this.baseTransform),uu=[au[0]*_c[0],au[1]*_c[1]],lu=this.getSizeAndScale(Fl,this.ctx.canvas.width,uu[0]),Kl=this.getSizeAndScale(Pl,this.ctx.canvas.height,uu[1]),xu=Cl.cachedCanvases.getCanvas("pattern",lu.size,Kl.size,!0),pu=xu.context,Ll=Bl.createCanvasGraphics(pu);Ll.groupLevel=Cl.groupLevel,this.setFillAndStrokeStyleToContext(Ll,Al,Il);let Nl=Ol,Ml=zl,Ul=Hl,Vl=ou;return Ol<0&&(Nl=0,Ul+=Math.abs(Ol)),zl<0&&(Ml=0,Vl+=Math.abs(zl)),pu.translate(-(lu.scale*Nl),-(Kl.scale*Ml)),Ll.transform(lu.scale,0,0,Kl.scale,0,0),pu.save(),this.clipBbox(Ll,Nl,Ml,Ul,Vl),Ll.baseTransform=(0,lo.getCurrentTransform)(Ll.ctx),Ll.executeOperatorList(Tl),Ll.endDrawing(),{canvas:xu.canvas,scaleX:lu.scale,scaleY:Kl.scale,offsetX:Nl,offsetY:Ml}}getSizeAndScale(Cl,Tl,Dl){Cl=Math.abs(Cl);const Fl=Math.max(El.MAX_PATTERN_SIZE,Tl);let Pl=Math.ceil(Cl*Dl);return Pl>=Fl?Pl=Fl:Dl=Pl/Cl,{scale:Dl,size:Pl}}clipBbox(Cl,Tl,Dl,Fl,Pl){const Al=Fl-Tl,Rl=Pl-Dl;Cl.ctx.rect(Tl,Dl,Al,Rl),Cl.current.updateRectMinMax((0,lo.getCurrentTransform)(Cl.ctx),[Tl,Dl,Fl,Pl]),Cl.clip(),Cl.endPath()}setFillAndStrokeStyleToContext(Cl,Tl,Dl){const Fl=Cl.ctx,Pl=Cl.current;switch(Tl){case wl.COLORED:const Al=this.ctx;Fl.fillStyle=Al.fillStyle,Fl.strokeStyle=Al.strokeStyle,Pl.fillColor=Al.fillStyle,Pl.strokeColor=Al.strokeStyle;break;case wl.UNCOLORED:const Rl=hs.Util.makeHexColor(Dl[0],Dl[1],Dl[2]);Fl.fillStyle=Rl,Fl.strokeStyle=Rl,Pl.fillColor=Rl,Pl.strokeColor=Rl;break;default:throw new hs.FormatError(`Unsupported paint type: ${Tl}`)}}getPattern(Cl,Tl,Dl,Fl){let Pl=Dl;Fl!==co.SHADING&&(Pl=hs.Util.transform(Pl,Tl.baseTransform),this.matrix&&(Pl=hs.Util.transform(Pl,this.matrix)));const Al=this.createPatternCanvas(Tl);let Rl=new DOMMatrix(Pl);Rl=Rl.translate(Al.offsetX,Al.offsetY),Rl=Rl.scale(1/Al.scaleX,1/Al.scaleY);const Il=Cl.createPattern(Al.canvas,"repeat");return Il.setTransform(Rl),Il}};c0(El,"MAX_PATTERN_SIZE",3e3);let _l=El;is.TilingPattern=_l},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.convertBlackAndWhiteToRGBA=co,is.convertToRGBA=lo,is.grayToRGBA=ga;var hs=us(1);function lo(ba){switch(ba.kind){case hs.ImageKind.GRAYSCALE_1BPP:return co(ba);case hs.ImageKind.RGB_24BPP:return uo(ba)}return null}function co({src:ba,srcPos:xa=0,dest:_a,width:$a,height:xl,nonBlackColor:yl=4294967295,inverseDecode:wl=!1}){const _l=hs.FeatureTest.isLittleEndian?4278190080:255,[El,Sl]=wl?[yl,_l]:[_l,yl],Cl=$a>>3,Tl=$a&7,Dl=ba.length;_a=new Uint32Array(_a.buffer);let Fl=0;for(let Pl=0;Pl<xl;Pl++){for(const Rl=xa+Cl;xa<Rl;xa++){const Il=xa<Dl?ba[xa]:255;_a[Fl++]=Il&128?Sl:El,_a[Fl++]=Il&64?Sl:El,_a[Fl++]=Il&32?Sl:El,_a[Fl++]=Il&16?Sl:El,_a[Fl++]=Il&8?Sl:El,_a[Fl++]=Il&4?Sl:El,_a[Fl++]=Il&2?Sl:El,_a[Fl++]=Il&1?Sl:El}if(Tl===0)continue;const Al=xa<Dl?ba[xa++]:255;for(let Rl=0;Rl<Tl;Rl++)_a[Fl++]=Al&1<<7-Rl?Sl:El}return{srcPos:xa,destPos:Fl}}function uo({src:ba,srcPos:xa=0,dest:_a,destPos:$a=0,width:xl,height:yl}){let wl=0;const _l=ba.length>>2,El=new Uint32Array(ba.buffer,xa,_l);if(hs.FeatureTest.isLittleEndian){for(;wl<_l-2;wl+=3,$a+=4){const Sl=El[wl],Cl=El[wl+1],Tl=El[wl+2];_a[$a]=Sl|4278190080,_a[$a+1]=Sl>>>24|Cl<<8|4278190080,_a[$a+2]=Cl>>>16|Tl<<16|4278190080,_a[$a+3]=Tl>>>8|4278190080}for(let Sl=wl*4,Cl=ba.length;Sl<Cl;Sl+=3)_a[$a++]=ba[Sl]|ba[Sl+1]<<8|ba[Sl+2]<<16|4278190080}else{for(;wl<_l-2;wl+=3,$a+=4){const Sl=El[wl],Cl=El[wl+1],Tl=El[wl+2];_a[$a]=Sl|255,_a[$a+1]=Sl<<24|Cl>>>8|255,_a[$a+2]=Cl<<16|Tl>>>16|255,_a[$a+3]=Tl<<8|255}for(let Sl=wl*4,Cl=ba.length;Sl<Cl;Sl+=3)_a[$a++]=ba[Sl]<<24|ba[Sl+1]<<16|ba[Sl+2]<<8|255}return{srcPos:xa,destPos:$a}}function ga(ba,xa){if(hs.FeatureTest.isLittleEndian)for(let _a=0,$a=ba.length;_a<$a;_a++)xa[_a]=ba[_a]*65793|4278190080;else for(let _a=0,$a=ba.length;_a<$a;_a++)xa[_a]=ba[_a]*16843008|255}},(cs,is)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.GlobalWorkerOptions=void 0;const us=Object.create(null);is.GlobalWorkerOptions=us,us.workerPort=null,us.workerSrc=""},(cs,is,us)=>{var ba,fv,pv,Yx;Object.defineProperty(is,"__esModule",{value:!0}),is.MessageHandler=void 0;var hs=us(1);const lo={DATA:1,ERROR:2},co={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function uo(xl){switch(xl instanceof Error||typeof xl=="object"&&xl!==null||(0,hs.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),xl.name){case"AbortException":return new hs.AbortException(xl.message);case"MissingPDFException":return new hs.MissingPDFException(xl.message);case"PasswordException":return new hs.PasswordException(xl.message,xl.code);case"UnexpectedResponseException":return new hs.UnexpectedResponseException(xl.message,xl.status);case"UnknownErrorException":return new hs.UnknownErrorException(xl.message,xl.details);default:return new hs.UnknownErrorException(xl.message,xl.toString())}}class ga{constructor(yl,wl,_l){_d(this,ba);this.sourceName=yl,this.targetName=wl,this.comObj=_l,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=El=>{const Sl=El.data;if(Sl.targetName!==this.sourceName)return;if(Sl.stream){Uu(this,ba,pv).call(this,Sl);return}if(Sl.callback){const Tl=Sl.callbackId,Dl=this.callbackCapabilities[Tl];if(!Dl)throw new Error(`Cannot resolve callback ${Tl}`);if(delete this.callbackCapabilities[Tl],Sl.callback===lo.DATA)Dl.resolve(Sl.data);else if(Sl.callback===lo.ERROR)Dl.reject(uo(Sl.reason));else throw new Error("Unexpected callback case");return}const Cl=this.actionHandler[Sl.action];if(!Cl)throw new Error(`Unknown action from worker: ${Sl.action}`);if(Sl.callbackId){const Tl=this.sourceName,Dl=Sl.sourceName;new Promise(function(Fl){Fl(Cl(Sl.data))}).then(function(Fl){_l.postMessage({sourceName:Tl,targetName:Dl,callback:lo.DATA,callbackId:Sl.callbackId,data:Fl})},function(Fl){_l.postMessage({sourceName:Tl,targetName:Dl,callback:lo.ERROR,callbackId:Sl.callbackId,reason:uo(Fl)})});return}if(Sl.streamId){Uu(this,ba,fv).call(this,Sl);return}Cl(Sl.data)},_l.addEventListener("message",this._onComObjOnMessage)}on(yl,wl){const _l=this.actionHandler;if(_l[yl])throw new Error(`There is already an actionName called "${yl}"`);_l[yl]=wl}send(yl,wl,_l){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:yl,data:wl},_l)}sendWithPromise(yl,wl,_l){const El=this.callbackId++,Sl=new hs.PromiseCapability;this.callbackCapabilities[El]=Sl;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:yl,callbackId:El,data:wl},_l)}catch(Cl){Sl.reject(Cl)}return Sl.promise}sendWithStream(yl,wl,_l,El){const Sl=this.streamId++,Cl=this.sourceName,Tl=this.targetName,Dl=this.comObj;return new ReadableStream({start:Fl=>{const Pl=new hs.PromiseCapability;return this.streamControllers[Sl]={controller:Fl,startCall:Pl,pullCall:null,cancelCall:null,isClosed:!1},Dl.postMessage({sourceName:Cl,targetName:Tl,action:yl,streamId:Sl,data:wl,desiredSize:Fl.desiredSize},El),Pl.promise},pull:Fl=>{const Pl=new hs.PromiseCapability;return this.streamControllers[Sl].pullCall=Pl,Dl.postMessage({sourceName:Cl,targetName:Tl,stream:co.PULL,streamId:Sl,desiredSize:Fl.desiredSize}),Pl.promise},cancel:Fl=>{(0,hs.assert)(Fl instanceof Error,"cancel must have a valid reason");const Pl=new hs.PromiseCapability;return this.streamControllers[Sl].cancelCall=Pl,this.streamControllers[Sl].isClosed=!0,Dl.postMessage({sourceName:Cl,targetName:Tl,stream:co.CANCEL,streamId:Sl,reason:uo(Fl)}),Pl.promise}},_l)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}ba=new WeakSet,fv=function(yl){const wl=yl.streamId,_l=this.sourceName,El=yl.sourceName,Sl=this.comObj,Cl=this,Tl=this.actionHandler[yl.action],Dl={enqueue(Fl,Pl=1,Al){if(this.isCancelled)return;const Rl=this.desiredSize;this.desiredSize-=Pl,Rl>0&&this.desiredSize<=0&&(this.sinkCapability=new hs.PromiseCapability,this.ready=this.sinkCapability.promise),Sl.postMessage({sourceName:_l,targetName:El,stream:co.ENQUEUE,streamId:wl,chunk:Fl},Al)},close(){this.isCancelled||(this.isCancelled=!0,Sl.postMessage({sourceName:_l,targetName:El,stream:co.CLOSE,streamId:wl}),delete Cl.streamSinks[wl])},error(Fl){(0,hs.assert)(Fl instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Sl.postMessage({sourceName:_l,targetName:El,stream:co.ERROR,streamId:wl,reason:uo(Fl)}))},sinkCapability:new hs.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:yl.desiredSize,ready:null};Dl.sinkCapability.resolve(),Dl.ready=Dl.sinkCapability.promise,this.streamSinks[wl]=Dl,new Promise(function(Fl){Fl(Tl(yl.data,Dl))}).then(function(){Sl.postMessage({sourceName:_l,targetName:El,stream:co.START_COMPLETE,streamId:wl,success:!0})},function(Fl){Sl.postMessage({sourceName:_l,targetName:El,stream:co.START_COMPLETE,streamId:wl,reason:uo(Fl)})})},pv=function(yl){const wl=yl.streamId,_l=this.sourceName,El=yl.sourceName,Sl=this.comObj,Cl=this.streamControllers[wl],Tl=this.streamSinks[wl];switch(yl.stream){case co.START_COMPLETE:yl.success?Cl.startCall.resolve():Cl.startCall.reject(uo(yl.reason));break;case co.PULL_COMPLETE:yl.success?Cl.pullCall.resolve():Cl.pullCall.reject(uo(yl.reason));break;case co.PULL:if(!Tl){Sl.postMessage({sourceName:_l,targetName:El,stream:co.PULL_COMPLETE,streamId:wl,success:!0});break}Tl.desiredSize<=0&&yl.desiredSize>0&&Tl.sinkCapability.resolve(),Tl.desiredSize=yl.desiredSize,new Promise(function(Dl){var Fl;Dl((Fl=Tl.onPull)==null?void 0:Fl.call(Tl))}).then(function(){Sl.postMessage({sourceName:_l,targetName:El,stream:co.PULL_COMPLETE,streamId:wl,success:!0})},function(Dl){Sl.postMessage({sourceName:_l,targetName:El,stream:co.PULL_COMPLETE,streamId:wl,reason:uo(Dl)})});break;case co.ENQUEUE:if((0,hs.assert)(Cl,"enqueue should have stream controller"),Cl.isClosed)break;Cl.controller.enqueue(yl.chunk);break;case co.CLOSE:if((0,hs.assert)(Cl,"close should have stream controller"),Cl.isClosed)break;Cl.isClosed=!0,Cl.controller.close(),Uu(this,ba,Yx).call(this,Cl,wl);break;case co.ERROR:(0,hs.assert)(Cl,"error should have stream controller"),Cl.controller.error(uo(yl.reason)),Uu(this,ba,Yx).call(this,Cl,wl);break;case co.CANCEL_COMPLETE:yl.success?Cl.cancelCall.resolve():Cl.cancelCall.reject(uo(yl.reason)),Uu(this,ba,Yx).call(this,Cl,wl);break;case co.CANCEL:if(!Tl)break;new Promise(function(Dl){var Fl;Dl((Fl=Tl.onCancel)==null?void 0:Fl.call(Tl,uo(yl.reason)))}).then(function(){Sl.postMessage({sourceName:_l,targetName:El,stream:co.CANCEL_COMPLETE,streamId:wl,success:!0})},function(Dl){Sl.postMessage({sourceName:_l,targetName:El,stream:co.CANCEL_COMPLETE,streamId:wl,reason:uo(Dl)})}),Tl.sinkCapability.reject(uo(yl.reason)),Tl.isCancelled=!0,delete this.streamSinks[wl];break;default:throw new Error("Unexpected stream case")}},Yx=async function(yl,wl){var _l,El,Sl;await Promise.allSettled([(_l=yl.startCall)==null?void 0:_l.promise,(El=yl.pullCall)==null?void 0:El.promise,(Sl=yl.cancelCall)==null?void 0:Sl.promise]),delete this.streamControllers[wl]},is.MessageHandler=ga},(cs,is,us)=>{var co,uo;Object.defineProperty(is,"__esModule",{value:!0}),is.Metadata=void 0;var hs=us(1);class lo{constructor({parsedData:ba,rawData:xa}){_d(this,co);_d(this,uo);ep(this,co,ba),ep(this,uo,xa)}getRaw(){return Wl(this,uo)}get(ba){return Wl(this,co).get(ba)??null}getAll(){return(0,hs.objectFromMap)(Wl(this,co))}has(ba){return Wl(this,co).has(ba)}}co=new WeakMap,uo=new WeakMap,is.Metadata=lo},(cs,is,us)=>{var ba,xa,_a,$a,xl,yl,L1;Object.defineProperty(is,"__esModule",{value:!0}),is.OptionalContentConfig=void 0;var hs=us(1),lo=us(8);const co=Symbol("INTERNAL");class uo{constructor(El,Sl){_d(this,ba,!0);this.name=El,this.intent=Sl}get visible(){return Wl(this,ba)}_setVisible(El,Sl){El!==co&&(0,hs.unreachable)("Internal method `_setVisible` called."),ep(this,ba,Sl)}}ba=new WeakMap;class ga{constructor(El){_d(this,yl);_d(this,xa,null);_d(this,_a,new Map);_d(this,$a,null);_d(this,xl,null);if(this.name=null,this.creator=null,El!==null){this.name=El.name,this.creator=El.creator,ep(this,xl,El.order);for(const Sl of El.groups)Wl(this,_a).set(Sl.id,new uo(Sl.name,Sl.intent));if(El.baseState==="OFF")for(const Sl of Wl(this,_a).values())Sl._setVisible(co,!1);for(const Sl of El.on)Wl(this,_a).get(Sl)._setVisible(co,!0);for(const Sl of El.off)Wl(this,_a).get(Sl)._setVisible(co,!1);ep(this,$a,this.getHash())}}isVisible(El){if(Wl(this,_a).size===0)return!0;if(!El)return(0,hs.warn)("Optional content group not defined."),!0;if(El.type==="OCG")return Wl(this,_a).has(El.id)?Wl(this,_a).get(El.id).visible:((0,hs.warn)(`Optional content group not found: ${El.id}`),!0);if(El.type==="OCMD"){if(El.expression)return Uu(this,yl,L1).call(this,El.expression);if(!El.policy||El.policy==="AnyOn"){for(const Sl of El.ids){if(!Wl(this,_a).has(Sl))return(0,hs.warn)(`Optional content group not found: ${Sl}`),!0;if(Wl(this,_a).get(Sl).visible)return!0}return!1}else if(El.policy==="AllOn"){for(const Sl of El.ids){if(!Wl(this,_a).has(Sl))return(0,hs.warn)(`Optional content group not found: ${Sl}`),!0;if(!Wl(this,_a).get(Sl).visible)return!1}return!0}else if(El.policy==="AnyOff"){for(const Sl of El.ids){if(!Wl(this,_a).has(Sl))return(0,hs.warn)(`Optional content group not found: ${Sl}`),!0;if(!Wl(this,_a).get(Sl).visible)return!0}return!1}else if(El.policy==="AllOff"){for(const Sl of El.ids){if(!Wl(this,_a).has(Sl))return(0,hs.warn)(`Optional content group not found: ${Sl}`),!0;if(Wl(this,_a).get(Sl).visible)return!1}return!0}return(0,hs.warn)(`Unknown optional content policy ${El.policy}.`),!0}return(0,hs.warn)(`Unknown group type ${El.type}.`),!0}setVisibility(El,Sl=!0){if(!Wl(this,_a).has(El)){(0,hs.warn)(`Optional content group not found: ${El}`);return}Wl(this,_a).get(El)._setVisible(co,!!Sl),ep(this,xa,null)}get hasInitialVisibility(){return Wl(this,$a)===null||this.getHash()===Wl(this,$a)}getOrder(){return Wl(this,_a).size?Wl(this,xl)?Wl(this,xl).slice():[...Wl(this,_a).keys()]:null}getGroups(){return Wl(this,_a).size>0?(0,hs.objectFromMap)(Wl(this,_a)):null}getGroup(El){return Wl(this,_a).get(El)||null}getHash(){if(Wl(this,xa)!==null)return Wl(this,xa);const El=new lo.MurmurHash3_64;for(const[Sl,Cl]of Wl(this,_a))El.update(`${Sl}:${Cl.visible}`);return ep(this,xa,El.hexdigest())}}xa=new WeakMap,_a=new WeakMap,$a=new WeakMap,xl=new WeakMap,yl=new WeakSet,L1=function(El){const Sl=El.length;if(Sl<2)return!0;const Cl=El[0];for(let Tl=1;Tl<Sl;Tl++){const Dl=El[Tl];let Fl;if(Array.isArray(Dl))Fl=Uu(this,yl,L1).call(this,Dl);else if(Wl(this,_a).has(Dl))Fl=Wl(this,_a).get(Dl).visible;else return(0,hs.warn)(`Optional content group not found: ${Dl}`),!0;switch(Cl){case"And":if(!Fl)return!1;break;case"Or":if(Fl)return!0;break;case"Not":return!Fl;default:return!0}}return Cl==="And"},is.OptionalContentConfig=ga},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.PDFDataTransportStream=void 0;var hs=us(1),lo=us(6);class co{constructor({length:xa,initialData:_a,progressiveDone:$a=!1,contentDispositionFilename:xl=null,disableRange:yl=!1,disableStream:wl=!1},_l){if((0,hs.assert)(_l,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=$a,this._contentDispositionFilename=xl,(_a==null?void 0:_a.length)>0){const El=_a instanceof Uint8Array&&_a.byteLength===_a.buffer.byteLength?_a.buffer:new Uint8Array(_a).buffer;this._queuedChunks.push(El)}this._pdfDataRangeTransport=_l,this._isStreamingSupported=!wl,this._isRangeSupported=!yl,this._contentLength=xa,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((El,Sl)=>{this._onReceiveData({begin:El,chunk:Sl})}),this._pdfDataRangeTransport.addProgressListener((El,Sl)=>{this._onProgress({loaded:El,total:Sl})}),this._pdfDataRangeTransport.addProgressiveReadListener(El=>{this._onReceiveData({chunk:El})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:xa,chunk:_a}){const $a=_a instanceof Uint8Array&&_a.byteLength===_a.buffer.byteLength?_a.buffer:new Uint8Array(_a).buffer;if(xa===void 0)this._fullRequestReader?this._fullRequestReader._enqueue($a):this._queuedChunks.push($a);else{const xl=this._rangeReaders.some(function(yl){return yl._begin!==xa?!1:(yl._enqueue($a),!0)});(0,hs.assert)(xl,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var xa;return((xa=this._fullRequestReader)==null?void 0:xa._loaded)??0}_onProgress(xa){var _a,$a,xl,yl;xa.total===void 0?($a=(_a=this._rangeReaders[0])==null?void 0:_a.onProgress)==null||$a.call(_a,{loaded:xa.loaded}):(yl=(xl=this._fullRequestReader)==null?void 0:xl.onProgress)==null||yl.call(xl,{loaded:xa.loaded,total:xa.total})}_onProgressiveDone(){var xa;(xa=this._fullRequestReader)==null||xa.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(xa){const _a=this._rangeReaders.indexOf(xa);_a>=0&&this._rangeReaders.splice(_a,1)}getFullReader(){(0,hs.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const xa=this._queuedChunks;return this._queuedChunks=null,new uo(this,xa,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(xa,_a){if(_a<=this._progressiveDataLength)return null;const $a=new ga(this,xa,_a);return this._pdfDataRangeTransport.requestDataRange(xa,_a),this._rangeReaders.push($a),$a}cancelAllRequests(xa){var _a;(_a=this._fullRequestReader)==null||_a.cancel(xa);for(const $a of this._rangeReaders.slice(0))$a.cancel(xa);this._pdfDataRangeTransport.abort()}}is.PDFDataTransportStream=co;class uo{constructor(xa,_a,$a=!1,xl=null){this._stream=xa,this._done=$a||!1,this._filename=(0,lo.isPdfFile)(xl)?xl:null,this._queuedChunks=_a||[],this._loaded=0;for(const yl of this._queuedChunks)this._loaded+=yl.byteLength;this._requests=[],this._headersReady=Promise.resolve(),xa._fullRequestReader=this,this.onProgress=null}_enqueue(xa){this._done||(this._requests.length>0?this._requests.shift().resolve({value:xa,done:!1}):this._queuedChunks.push(xa),this._loaded+=xa.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const xa=new hs.PromiseCapability;return this._requests.push(xa),xa.promise}cancel(xa){this._done=!0;for(const _a of this._requests)_a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ga{constructor(xa,_a,$a){this._stream=xa,this._begin=_a,this._end=$a,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(xa){if(!this._done){if(this._requests.length===0)this._queuedChunk=xa;else{this._requests.shift().resolve({value:xa,done:!1});for(const $a of this._requests)$a.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const _a=this._queuedChunk;return this._queuedChunk=null,{value:_a,done:!1}}if(this._done)return{value:void 0,done:!0};const xa=new hs.PromiseCapability;return this._requests.push(xa),xa.promise}cancel(xa){this._done=!0;for(const _a of this._requests)_a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.PDFFetchStream=void 0;var hs=us(1),lo=us(20);function co($a,xl,yl){return{method:"GET",headers:$a,signal:yl.signal,mode:"cors",credentials:xl?"include":"same-origin",redirect:"follow"}}function uo($a){const xl=new Headers;for(const yl in $a){const wl=$a[yl];wl!==void 0&&xl.append(yl,wl)}return xl}function ga($a){return $a instanceof Uint8Array?$a.buffer:$a instanceof ArrayBuffer?$a:((0,hs.warn)(`getArrayBuffer - unexpected data format: ${$a}`),new Uint8Array($a).buffer)}class ba{constructor(xl){this.source=xl,this.isHttp=/^https?:/i.test(xl.url),this.httpHeaders=this.isHttp&&xl.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var xl;return((xl=this._fullRequestReader)==null?void 0:xl._loaded)??0}getFullReader(){return(0,hs.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new xa(this),this._fullRequestReader}getRangeReader(xl,yl){if(yl<=this._progressiveDataLength)return null;const wl=new _a(this,xl,yl);return this._rangeRequestReaders.push(wl),wl}cancelAllRequests(xl){var yl;(yl=this._fullRequestReader)==null||yl.cancel(xl);for(const wl of this._rangeRequestReaders.slice(0))wl.cancel(xl)}}is.PDFFetchStream=ba;class xa{constructor(xl){this._stream=xl,this._reader=null,this._loaded=0,this._filename=null;const yl=xl.source;this._withCredentials=yl.withCredentials||!1,this._contentLength=yl.length,this._headersCapability=new hs.PromiseCapability,this._disableRange=yl.disableRange||!1,this._rangeChunkSize=yl.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!yl.disableStream,this._isRangeSupported=!yl.disableRange,this._headers=uo(this._stream.httpHeaders);const wl=yl.url;fetch(wl,co(this._headers,this._withCredentials,this._abortController)).then(_l=>{if(!(0,lo.validateResponseStatus)(_l.status))throw(0,lo.createResponseStatusError)(_l.status,wl);this._reader=_l.body.getReader(),this._headersCapability.resolve();const El=Tl=>_l.headers.get(Tl),{allowRangeRequests:Sl,suggestedLength:Cl}=(0,lo.validateRangeRequestCapabilities)({getResponseHeader:El,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Sl,this._contentLength=Cl||this._contentLength,this._filename=(0,lo.extractFilenameFromHeader)(El),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new hs.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var wl;await this._headersCapability.promise;const{value:xl,done:yl}=await this._reader.read();return yl?{value:xl,done:yl}:(this._loaded+=xl.byteLength,(wl=this.onProgress)==null||wl.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ga(xl),done:!1})}cancel(xl){var yl;(yl=this._reader)==null||yl.cancel(xl),this._abortController.abort()}}class _a{constructor(xl,yl,wl){this._stream=xl,this._reader=null,this._loaded=0;const _l=xl.source;this._withCredentials=_l.withCredentials||!1,this._readCapability=new hs.PromiseCapability,this._isStreamingSupported=!_l.disableStream,this._abortController=new AbortController,this._headers=uo(this._stream.httpHeaders),this._headers.append("Range",`bytes=${yl}-${wl-1}`);const El=_l.url;fetch(El,co(this._headers,this._withCredentials,this._abortController)).then(Sl=>{if(!(0,lo.validateResponseStatus)(Sl.status))throw(0,lo.createResponseStatusError)(Sl.status,El);this._readCapability.resolve(),this._reader=Sl.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var wl;await this._readCapability.promise;const{value:xl,done:yl}=await this._reader.read();return yl?{value:xl,done:yl}:(this._loaded+=xl.byteLength,(wl=this.onProgress)==null||wl.call(this,{loaded:this._loaded}),{value:ga(xl),done:!1})}cancel(xl){var yl;(yl=this._reader)==null||yl.cancel(xl),this._abortController.abort()}}},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.createResponseStatusError=ba,is.extractFilenameFromHeader=ga,is.validateRangeRequestCapabilities=uo,is.validateResponseStatus=xa;var hs=us(1),lo=us(21),co=us(6);function uo({getResponseHeader:_a,isHttp:$a,rangeChunkSize:xl,disableRange:yl}){const wl={allowRangeRequests:!1,suggestedLength:void 0},_l=parseInt(_a("Content-Length"),10);return!Number.isInteger(_l)||(wl.suggestedLength=_l,_l<=2*xl)||yl||!$a||_a("Accept-Ranges")!=="bytes"||(_a("Content-Encoding")||"identity")!=="identity"||(wl.allowRangeRequests=!0),wl}function ga(_a){const $a=_a("Content-Disposition");if($a){let xl=(0,lo.getFilenameFromContentDispositionHeader)($a);if(xl.includes("%"))try{xl=decodeURIComponent(xl)}catch{}if((0,co.isPdfFile)(xl))return xl}return null}function ba(_a,$a){return _a===404||_a===0&&$a.startsWith("file:")?new hs.MissingPDFException('Missing PDF "'+$a+'".'):new hs.UnexpectedResponseException(`Unexpected server response (${_a}) while retrieving PDF "${$a}".`,_a)}function xa(_a){return _a===200||_a===206}},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.getFilenameFromContentDispositionHeader=lo;var hs=us(1);function lo(co){let uo=!0,ga=ba("filename\\*","i").exec(co);if(ga){ga=ga[1];let _l=xl(ga);return _l=unescape(_l),_l=yl(_l),_l=wl(_l),_a(_l)}if(ga=$a(co),ga){const _l=wl(ga);return _a(_l)}if(ga=ba("filename","i").exec(co),ga){ga=ga[1];let _l=xl(ga);return _l=wl(_l),_a(_l)}function ba(_l,El){return new RegExp("(?:^|;)\\s*"+_l+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',El)}function xa(_l,El){if(_l){if(!/^[\x00-\xFF]+$/.test(El))return El;try{const Sl=new TextDecoder(_l,{fatal:!0}),Cl=(0,hs.stringToBytes)(El);El=Sl.decode(Cl),uo=!1}catch{}}return El}function _a(_l){return uo&&/[\x80-\xff]/.test(_l)&&(_l=xa("utf-8",_l),uo&&(_l=xa("iso-8859-1",_l))),_l}function $a(_l){const El=[];let Sl;const Cl=ba("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Sl=Cl.exec(_l))!==null;){let[,Dl,Fl,Pl]=Sl;if(Dl=parseInt(Dl,10),Dl in El){if(Dl===0)break;continue}El[Dl]=[Fl,Pl]}const Tl=[];for(let Dl=0;Dl<El.length&&Dl in El;++Dl){let[Fl,Pl]=El[Dl];Pl=xl(Pl),Fl&&(Pl=unescape(Pl),Dl===0&&(Pl=yl(Pl))),Tl.push(Pl)}return Tl.join("")}function xl(_l){if(_l.startsWith('"')){const El=_l.slice(1).split('\\"');for(let Sl=0;Sl<El.length;++Sl){const Cl=El[Sl].indexOf('"');Cl!==-1&&(El[Sl]=El[Sl].slice(0,Cl),El.length=Sl+1),El[Sl]=El[Sl].replaceAll(/\\(.)/g,"$1")}_l=El.join('"')}return _l}function yl(_l){const El=_l.indexOf("'");if(El===-1)return _l;const Sl=_l.slice(0,El),Tl=_l.slice(El+1).replace(/^[^']*'/,"");return xa(Sl,Tl)}function wl(_l){return!_l.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_l)?_l:_l.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(El,Sl,Cl,Tl){if(Cl==="q"||Cl==="Q")return Tl=Tl.replaceAll("_"," "),Tl=Tl.replaceAll(/=([0-9a-fA-F]{2})/g,function(Dl,Fl){return String.fromCharCode(parseInt(Fl,16))}),xa(Sl,Tl);try{Tl=atob(Tl)}catch{}return xa(Sl,Tl)})}return""}},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.PDFNetworkStream=void 0;var hs=us(1),lo=us(20);const co=200,uo=206;function ga(xl){const yl=xl.response;return typeof yl!="string"?yl:(0,hs.stringToBytes)(yl).buffer}class ba{constructor(yl,wl={}){this.url=yl,this.isHttp=/^https?:/i.test(yl),this.httpHeaders=this.isHttp&&wl.httpHeaders||Object.create(null),this.withCredentials=wl.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(yl,wl,_l){const El={begin:yl,end:wl};for(const Sl in _l)El[Sl]=_l[Sl];return this.request(El)}requestFull(yl){return this.request(yl)}request(yl){const wl=new XMLHttpRequest,_l=this.currXhrId++,El=this.pendingRequests[_l]={xhr:wl};wl.open("GET",this.url),wl.withCredentials=this.withCredentials;for(const Sl in this.httpHeaders){const Cl=this.httpHeaders[Sl];Cl!==void 0&&wl.setRequestHeader(Sl,Cl)}return this.isHttp&&"begin"in yl&&"end"in yl?(wl.setRequestHeader("Range",`bytes=${yl.begin}-${yl.end-1}`),El.expectedStatus=uo):El.expectedStatus=co,wl.responseType="arraybuffer",yl.onError&&(wl.onerror=function(Sl){yl.onError(wl.status)}),wl.onreadystatechange=this.onStateChange.bind(this,_l),wl.onprogress=this.onProgress.bind(this,_l),El.onHeadersReceived=yl.onHeadersReceived,El.onDone=yl.onDone,El.onError=yl.onError,El.onProgress=yl.onProgress,wl.send(null),_l}onProgress(yl,wl){var El;const _l=this.pendingRequests[yl];_l&&((El=_l.onProgress)==null||El.call(_l,wl))}onStateChange(yl,wl){var Dl,Fl,Pl;const _l=this.pendingRequests[yl];if(!_l)return;const El=_l.xhr;if(El.readyState>=2&&_l.onHeadersReceived&&(_l.onHeadersReceived(),delete _l.onHeadersReceived),El.readyState!==4||!(yl in this.pendingRequests))return;if(delete this.pendingRequests[yl],El.status===0&&this.isHttp){(Dl=_l.onError)==null||Dl.call(_l,El.status);return}const Sl=El.status||co;if(!(Sl===co&&_l.expectedStatus===uo)&&Sl!==_l.expectedStatus){(Fl=_l.onError)==null||Fl.call(_l,El.status);return}const Tl=ga(El);if(Sl===uo){const Al=El.getResponseHeader("Content-Range"),Rl=/bytes (\d+)-(\d+)\/(\d+)/.exec(Al);_l.onDone({begin:parseInt(Rl[1],10),chunk:Tl})}else Tl?_l.onDone({begin:0,chunk:Tl}):(Pl=_l.onError)==null||Pl.call(_l,El.status)}getRequestXhr(yl){return this.pendingRequests[yl].xhr}isPendingRequest(yl){return yl in this.pendingRequests}abortRequest(yl){const wl=this.pendingRequests[yl].xhr;delete this.pendingRequests[yl],wl.abort()}}class xa{constructor(yl){this._source=yl,this._manager=new ba(yl.url,{httpHeaders:yl.httpHeaders,withCredentials:yl.withCredentials}),this._rangeChunkSize=yl.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(yl){const wl=this._rangeRequestReaders.indexOf(yl);wl>=0&&this._rangeRequestReaders.splice(wl,1)}getFullReader(){return(0,hs.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _a(this._manager,this._source),this._fullRequestReader}getRangeReader(yl,wl){const _l=new $a(this._manager,yl,wl);return _l.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_l),_l}cancelAllRequests(yl){var wl;(wl=this._fullRequestReader)==null||wl.cancel(yl);for(const _l of this._rangeRequestReaders.slice(0))_l.cancel(yl)}}is.PDFNetworkStream=xa;class _a{constructor(yl,wl){this._manager=yl;const _l={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=wl.url,this._fullRequestId=yl.requestFull(_l),this._headersReceivedCapability=new hs.PromiseCapability,this._disableRange=wl.disableRange||!1,this._contentLength=wl.length,this._rangeChunkSize=wl.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const yl=this._fullRequestId,wl=this._manager.getRequestXhr(yl),_l=Cl=>wl.getResponseHeader(Cl),{allowRangeRequests:El,suggestedLength:Sl}=(0,lo.validateRangeRequestCapabilities)({getResponseHeader:_l,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});El&&(this._isRangeSupported=!0),this._contentLength=Sl||this._contentLength,this._filename=(0,lo.extractFilenameFromHeader)(_l),this._isRangeSupported&&this._manager.abortRequest(yl),this._headersReceivedCapability.resolve()}_onDone(yl){if(yl&&(this._requests.length>0?this._requests.shift().resolve({value:yl.chunk,done:!1}):this._cachedChunks.push(yl.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const wl of this._requests)wl.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(yl){this._storedError=(0,lo.createResponseStatusError)(yl,this._url),this._headersReceivedCapability.reject(this._storedError);for(const wl of this._requests)wl.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(yl){var wl;(wl=this.onProgress)==null||wl.call(this,{loaded:yl.loaded,total:yl.lengthComputable?yl.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const yl=new hs.PromiseCapability;return this._requests.push(yl),yl.promise}cancel(yl){this._done=!0,this._headersReceivedCapability.reject(yl);for(const wl of this._requests)wl.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class $a{constructor(yl,wl,_l){this._manager=yl;const El={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=yl.url,this._requestId=yl.requestRange(wl,_l,El),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var yl;(yl=this.onClosed)==null||yl.call(this,this)}_onDone(yl){const wl=yl.chunk;this._requests.length>0?this._requests.shift().resolve({value:wl,done:!1}):this._queuedChunk=wl,this._done=!0;for(const _l of this._requests)_l.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(yl){this._storedError=(0,lo.createResponseStatusError)(yl,this._url);for(const wl of this._requests)wl.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(yl){var wl;this.isStreamingSupported||(wl=this.onProgress)==null||wl.call(this,{loaded:yl.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const wl=this._queuedChunk;return this._queuedChunk=null,{value:wl,done:!1}}if(this._done)return{value:void 0,done:!0};const yl=new hs.PromiseCapability;return this._requests.push(yl),yl.promise}cancel(yl){this._done=!0;for(const wl of this._requests)wl.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.PDFNodeStream=void 0;var hs=us(1),lo=us(20);const co=/^file:\/\/\/[a-zA-Z]:\//;function uo(_l){const El=require$$5,Sl=El.parse(_l);return Sl.protocol==="file:"||Sl.host?Sl:/^[a-z]:[/\\]/i.test(_l)?El.parse(`file:///${_l}`):(Sl.host||(Sl.protocol="file:"),Sl)}class ga{constructor(El){this.source=El,this.url=uo(El.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&El.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var El;return((El=this._fullRequestReader)==null?void 0:El._loaded)??0}getFullReader(){return(0,hs.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new yl(this):new $a(this),this._fullRequestReader}getRangeReader(El,Sl){if(Sl<=this._progressiveDataLength)return null;const Cl=this.isFsUrl?new wl(this,El,Sl):new xl(this,El,Sl);return this._rangeRequestReaders.push(Cl),Cl}cancelAllRequests(El){var Sl;(Sl=this._fullRequestReader)==null||Sl.cancel(El);for(const Cl of this._rangeRequestReaders.slice(0))Cl.cancel(El)}}is.PDFNodeStream=ga;class ba{constructor(El){this._url=El.url,this._done=!1,this._storedError=null,this.onProgress=null;const Sl=El.source;this._contentLength=Sl.length,this._loaded=0,this._filename=null,this._disableRange=Sl.disableRange||!1,this._rangeChunkSize=Sl.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Sl.disableStream,this._isRangeSupported=!Sl.disableRange,this._readableStream=null,this._readCapability=new hs.PromiseCapability,this._headersCapability=new hs.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Cl;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const El=this._readableStream.read();return El===null?(this._readCapability=new hs.PromiseCapability,this.read()):(this._loaded+=El.length,(Cl=this.onProgress)==null||Cl.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(El).buffer,done:!1})}cancel(El){if(!this._readableStream){this._error(El);return}this._readableStream.destroy(El)}_error(El){this._storedError=El,this._readCapability.resolve()}_setReadableStream(El){this._readableStream=El,El.on("readable",()=>{this._readCapability.resolve()}),El.on("end",()=>{El.destroy(),this._done=!0,this._readCapability.resolve()}),El.on("error",Sl=>{this._error(Sl)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new hs.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class xa{constructor(El){this._url=El.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new hs.PromiseCapability;const Sl=El.source;this._isStreamingSupported=!Sl.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Cl;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const El=this._readableStream.read();return El===null?(this._readCapability=new hs.PromiseCapability,this.read()):(this._loaded+=El.length,(Cl=this.onProgress)==null||Cl.call(this,{loaded:this._loaded}),{value:new Uint8Array(El).buffer,done:!1})}cancel(El){if(!this._readableStream){this._error(El);return}this._readableStream.destroy(El)}_error(El){this._storedError=El,this._readCapability.resolve()}_setReadableStream(El){this._readableStream=El,El.on("readable",()=>{this._readCapability.resolve()}),El.on("end",()=>{El.destroy(),this._done=!0,this._readCapability.resolve()}),El.on("error",Sl=>{this._error(Sl)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function _a(_l,El){return{protocol:_l.protocol,auth:_l.auth,host:_l.hostname,port:_l.port,path:_l.path,method:"GET",headers:El}}class $a extends ba{constructor(El){super(El);const Sl=Cl=>{if(Cl.statusCode===404){const Pl=new hs.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Pl,this._headersCapability.reject(Pl);return}this._headersCapability.resolve(),this._setReadableStream(Cl);const Tl=Pl=>this._readableStream.headers[Pl.toLowerCase()],{allowRangeRequests:Dl,suggestedLength:Fl}=(0,lo.validateRangeRequestCapabilities)({getResponseHeader:Tl,isHttp:El.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Dl,this._contentLength=Fl||this._contentLength,this._filename=(0,lo.extractFilenameFromHeader)(Tl)};if(this._request=null,this._url.protocol==="http:"){const Cl=require$$5;this._request=Cl.request(_a(this._url,El.httpHeaders),Sl)}else{const Cl=require$$5;this._request=Cl.request(_a(this._url,El.httpHeaders),Sl)}this._request.on("error",Cl=>{this._storedError=Cl,this._headersCapability.reject(Cl)}),this._request.end()}}class xl extends xa{constructor(El,Sl,Cl){super(El),this._httpHeaders={};for(const Dl in El.httpHeaders){const Fl=El.httpHeaders[Dl];Fl!==void 0&&(this._httpHeaders[Dl]=Fl)}this._httpHeaders.Range=`bytes=${Sl}-${Cl-1}`;const Tl=Dl=>{if(Dl.statusCode===404){const Fl=new hs.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Fl;return}this._setReadableStream(Dl)};if(this._request=null,this._url.protocol==="http:"){const Dl=require$$5;this._request=Dl.request(_a(this._url,this._httpHeaders),Tl)}else{const Dl=require$$5;this._request=Dl.request(_a(this._url,this._httpHeaders),Tl)}this._request.on("error",Dl=>{this._storedError=Dl}),this._request.end()}}class yl extends ba{constructor(El){super(El);let Sl=decodeURIComponent(this._url.path);co.test(this._url.href)&&(Sl=Sl.replace(/^\//,""));const Cl=require$$5;Cl.lstat(Sl,(Tl,Dl)=>{if(Tl){Tl.code==="ENOENT"&&(Tl=new hs.MissingPDFException(`Missing PDF "${Sl}".`)),this._storedError=Tl,this._headersCapability.reject(Tl);return}this._contentLength=Dl.size,this._setReadableStream(Cl.createReadStream(Sl)),this._headersCapability.resolve()})}}class wl extends xa{constructor(El,Sl,Cl){super(El);let Tl=decodeURIComponent(this._url.path);co.test(this._url.href)&&(Tl=Tl.replace(/^\//,""));const Dl=require$$5;this._setReadableStream(Dl.createReadStream(Tl,{start:Sl,end:Cl-1}))}}},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.SVGGraphics=void 0;var hs=us(6),lo=us(1);const co={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},uo="http://www.w3.org/XML/1998/namespace",ga="http://www.w3.org/1999/xlink",ba=["butt","round","square"],xa=["miter","round","bevel"],_a=function(Dl,Fl="",Pl=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!Pl)return URL.createObjectURL(new Blob([Dl],{type:Fl}));const Al="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Rl=`data:${Fl};base64,`;for(let Il=0,Bl=Dl.length;Il<Bl;Il+=3){const Ol=Dl[Il]&255,zl=Dl[Il+1]&255,Hl=Dl[Il+2]&255,ou=Ol>>2,au=(Ol&3)<<4|zl>>4,_c=Il+1<Bl?(zl&15)<<2|Hl>>6:64,uu=Il+2<Bl?Hl&63:64;Rl+=Al[ou]+Al[au]+Al[_c]+Al[uu]}return Rl},$a=function(){const Dl=new Uint8Array([137,80,78,71,13,10,26,10]),Fl=12,Pl=new Int32Array(256);for(let Hl=0;Hl<256;Hl++){let ou=Hl;for(let au=0;au<8;au++)ou=ou&1?3988292384^ou>>1&2147483647:ou>>1&2147483647;Pl[Hl]=ou}function Al(Hl,ou,au){let _c=-1;for(let uu=ou;uu<au;uu++){const lu=(_c^Hl[uu])&255,Kl=Pl[lu];_c=_c>>>8^Kl}return _c^-1}function Rl(Hl,ou,au,_c){let uu=_c;const lu=ou.length;au[uu]=lu>>24&255,au[uu+1]=lu>>16&255,au[uu+2]=lu>>8&255,au[uu+3]=lu&255,uu+=4,au[uu]=Hl.charCodeAt(0)&255,au[uu+1]=Hl.charCodeAt(1)&255,au[uu+2]=Hl.charCodeAt(2)&255,au[uu+3]=Hl.charCodeAt(3)&255,uu+=4,au.set(ou,uu),uu+=ou.length;const Kl=Al(au,_c+4,uu);au[uu]=Kl>>24&255,au[uu+1]=Kl>>16&255,au[uu+2]=Kl>>8&255,au[uu+3]=Kl&255}function Il(Hl,ou,au){let _c=1,uu=0;for(let lu=ou;lu<au;++lu)_c=(_c+(Hl[lu]&255))%65521,uu=(uu+_c)%65521;return uu<<16|_c}function Bl(Hl){if(!lo.isNodeJS)return Ol(Hl);try{const ou=parseInt(process.versions.node)>=8?Hl:Buffer.from(Hl),au=require$$5.deflateSync(ou,{level:9});return au instanceof Uint8Array?au:new Uint8Array(au)}catch(ou){(0,lo.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ou)}return Ol(Hl)}function Ol(Hl){let ou=Hl.length;const au=65535,_c=Math.ceil(ou/au),uu=new Uint8Array(2+ou+_c*5+4);let lu=0;uu[lu++]=120,uu[lu++]=156;let Kl=0;for(;ou>au;)uu[lu++]=0,uu[lu++]=255,uu[lu++]=255,uu[lu++]=0,uu[lu++]=0,uu.set(Hl.subarray(Kl,Kl+au),lu),lu+=au,Kl+=au,ou-=au;uu[lu++]=1,uu[lu++]=ou&255,uu[lu++]=ou>>8&255,uu[lu++]=~ou&65535&255,uu[lu++]=(~ou&65535)>>8&255,uu.set(Hl.subarray(Kl),lu),lu+=Hl.length-Kl;const xu=Il(Hl,0,Hl.length);return uu[lu++]=xu>>24&255,uu[lu++]=xu>>16&255,uu[lu++]=xu>>8&255,uu[lu++]=xu&255,uu}function zl(Hl,ou,au,_c){const uu=Hl.width,lu=Hl.height;let Kl,xu,pu;const Ll=Hl.data;switch(ou){case lo.ImageKind.GRAYSCALE_1BPP:xu=0,Kl=1,pu=uu+7>>3;break;case lo.ImageKind.RGB_24BPP:xu=2,Kl=8,pu=uu*3;break;case lo.ImageKind.RGBA_32BPP:xu=6,Kl=8,pu=uu*4;break;default:throw new Error("invalid format")}const Nl=new Uint8Array((1+pu)*lu);let Ml=0,Ul=0;for(let _u=0;_u<lu;++_u)Nl[Ml++]=0,Nl.set(Ll.subarray(Ul,Ul+pu),Ml),Ul+=pu,Ml+=pu;if(ou===lo.ImageKind.GRAYSCALE_1BPP&&_c){Ml=0;for(let _u=0;_u<lu;_u++){Ml++;for(let bu=0;bu<pu;bu++)Nl[Ml++]^=255}}const Vl=new Uint8Array([uu>>24&255,uu>>16&255,uu>>8&255,uu&255,lu>>24&255,lu>>16&255,lu>>8&255,lu&255,Kl,xu,0,0,0]),Ql=Bl(Nl),Jl=Dl.length+Fl*3+Vl.length+Ql.length,iu=new Uint8Array(Jl);let fu=0;return iu.set(Dl,fu),fu+=Dl.length,Rl("IHDR",Vl,iu,fu),fu+=Fl+Vl.length,Rl("IDATA",Ql,iu,fu),fu+=Fl+Ql.length,Rl("IEND",new Uint8Array(0),iu,fu),_a(iu,"image/png",au)}return function(ou,au,_c){const uu=ou.kind===void 0?lo.ImageKind.GRAYSCALE_1BPP:ou.kind;return zl(ou,uu,au,_c)}}();class xl{constructor(){this.fontSizeScale=1,this.fontWeight=co.fontWeight,this.fontSize=0,this.textMatrix=lo.IDENTITY_MATRIX,this.fontMatrix=lo.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=lo.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=co.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Fl,Pl){this.x=Fl,this.y=Pl}}function yl(Dl){let Fl=[];const Pl=[];for(const Al of Dl){if(Al.fn==="save"){Fl.push({fnId:92,fn:"group",items:[]}),Pl.push(Fl),Fl=Fl.at(-1).items;continue}Al.fn==="restore"?Fl=Pl.pop():Fl.push(Al)}return Fl}function wl(Dl){if(Number.isInteger(Dl))return Dl.toString();const Fl=Dl.toFixed(10);let Pl=Fl.length-1;if(Fl[Pl]!=="0")return Fl;do Pl--;while(Fl[Pl]==="0");return Fl.substring(0,Fl[Pl]==="."?Pl:Pl+1)}function _l(Dl){if(Dl[4]===0&&Dl[5]===0){if(Dl[1]===0&&Dl[2]===0)return Dl[0]===1&&Dl[3]===1?"":`scale(${wl(Dl[0])} ${wl(Dl[3])})`;if(Dl[0]===Dl[3]&&Dl[1]===-Dl[2]){const Fl=Math.acos(Dl[0])*180/Math.PI;return`rotate(${wl(Fl)})`}}else if(Dl[0]===1&&Dl[1]===0&&Dl[2]===0&&Dl[3]===1)return`translate(${wl(Dl[4])} ${wl(Dl[5])})`;return`matrix(${wl(Dl[0])} ${wl(Dl[1])} ${wl(Dl[2])} ${wl(Dl[3])} ${wl(Dl[4])} ${wl(Dl[5])})`}let El=0,Sl=0,Cl=0;class Tl{constructor(Fl,Pl,Al=!1){(0,hs.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new hs.DOMSVGFactory,this.current=new xl,this.transformMatrix=lo.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Fl,this.objs=Pl,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Al,this._operatorIdMapping=[];for(const Rl in lo.OPS)this._operatorIdMapping[lo.OPS[Rl]]=Rl}getObject(Fl,Pl=null){return typeof Fl=="string"?Fl.startsWith("g_")?this.commonObjs.get(Fl):this.objs.get(Fl):Pl}save(){this.transformStack.push(this.transformMatrix);const Fl=this.current;this.extraStack.push(Fl),this.current=Fl.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Fl){this.save(),this.executeOpTree(Fl),this.restore()}loadDependencies(Fl){const Pl=Fl.fnArray,Al=Fl.argsArray;for(let Rl=0,Il=Pl.length;Rl<Il;Rl++)if(Pl[Rl]===lo.OPS.dependency)for(const Bl of Al[Rl]){const Ol=Bl.startsWith("g_")?this.commonObjs:this.objs,zl=new Promise(Hl=>{Ol.get(Bl,Hl)});this.current.dependencies.push(zl)}return Promise.all(this.current.dependencies)}transform(Fl,Pl,Al,Rl,Il,Bl){const Ol=[Fl,Pl,Al,Rl,Il,Bl];this.transformMatrix=lo.Util.transform(this.transformMatrix,Ol),this.tgrp=null}getSVG(Fl,Pl){this.viewport=Pl;const Al=this._initialize(Pl);return this.loadDependencies(Fl).then(()=>(this.transformMatrix=lo.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Fl)),Al))}convertOpList(Fl){const Pl=this._operatorIdMapping,Al=Fl.argsArray,Rl=Fl.fnArray,Il=[];for(let Bl=0,Ol=Rl.length;Bl<Ol;Bl++){const zl=Rl[Bl];Il.push({fnId:zl,fn:Pl[zl],args:Al[Bl]})}return yl(Il)}executeOpTree(Fl){for(const Pl of Fl){const Al=Pl.fn,Rl=Pl.fnId,Il=Pl.args;switch(Rl|0){case lo.OPS.beginText:this.beginText();break;case lo.OPS.dependency:break;case lo.OPS.setLeading:this.setLeading(Il);break;case lo.OPS.setLeadingMoveText:this.setLeadingMoveText(Il[0],Il[1]);break;case lo.OPS.setFont:this.setFont(Il);break;case lo.OPS.showText:this.showText(Il[0]);break;case lo.OPS.showSpacedText:this.showText(Il[0]);break;case lo.OPS.endText:this.endText();break;case lo.OPS.moveText:this.moveText(Il[0],Il[1]);break;case lo.OPS.setCharSpacing:this.setCharSpacing(Il[0]);break;case lo.OPS.setWordSpacing:this.setWordSpacing(Il[0]);break;case lo.OPS.setHScale:this.setHScale(Il[0]);break;case lo.OPS.setTextMatrix:this.setTextMatrix(Il[0],Il[1],Il[2],Il[3],Il[4],Il[5]);break;case lo.OPS.setTextRise:this.setTextRise(Il[0]);break;case lo.OPS.setTextRenderingMode:this.setTextRenderingMode(Il[0]);break;case lo.OPS.setLineWidth:this.setLineWidth(Il[0]);break;case lo.OPS.setLineJoin:this.setLineJoin(Il[0]);break;case lo.OPS.setLineCap:this.setLineCap(Il[0]);break;case lo.OPS.setMiterLimit:this.setMiterLimit(Il[0]);break;case lo.OPS.setFillRGBColor:this.setFillRGBColor(Il[0],Il[1],Il[2]);break;case lo.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Il[0],Il[1],Il[2]);break;case lo.OPS.setStrokeColorN:this.setStrokeColorN(Il);break;case lo.OPS.setFillColorN:this.setFillColorN(Il);break;case lo.OPS.shadingFill:this.shadingFill(Il[0]);break;case lo.OPS.setDash:this.setDash(Il[0],Il[1]);break;case lo.OPS.setRenderingIntent:this.setRenderingIntent(Il[0]);break;case lo.OPS.setFlatness:this.setFlatness(Il[0]);break;case lo.OPS.setGState:this.setGState(Il[0]);break;case lo.OPS.fill:this.fill();break;case lo.OPS.eoFill:this.eoFill();break;case lo.OPS.stroke:this.stroke();break;case lo.OPS.fillStroke:this.fillStroke();break;case lo.OPS.eoFillStroke:this.eoFillStroke();break;case lo.OPS.clip:this.clip("nonzero");break;case lo.OPS.eoClip:this.clip("evenodd");break;case lo.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case lo.OPS.paintImageXObject:this.paintImageXObject(Il[0]);break;case lo.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Il[0]);break;case lo.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Il[0]);break;case lo.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Il[0],Il[1]);break;case lo.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case lo.OPS.closePath:this.closePath();break;case lo.OPS.closeStroke:this.closeStroke();break;case lo.OPS.closeFillStroke:this.closeFillStroke();break;case lo.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case lo.OPS.nextLine:this.nextLine();break;case lo.OPS.transform:this.transform(Il[0],Il[1],Il[2],Il[3],Il[4],Il[5]);break;case lo.OPS.constructPath:this.constructPath(Il[0],Il[1]);break;case lo.OPS.endPath:this.endPath();break;case 92:this.group(Pl.items);break;default:(0,lo.warn)(`Unimplemented operator ${Al}`);break}}}setWordSpacing(Fl){this.current.wordSpacing=Fl}setCharSpacing(Fl){this.current.charSpacing=Fl}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Fl,Pl,Al,Rl,Il,Bl){const Ol=this.current;Ol.textMatrix=Ol.lineMatrix=[Fl,Pl,Al,Rl,Il,Bl],Ol.textMatrixScale=Math.hypot(Fl,Pl),Ol.x=Ol.lineX=0,Ol.y=Ol.lineY=0,Ol.xcoords=[],Ol.ycoords=[],Ol.tspan=this.svgFactory.createElement("svg:tspan"),Ol.tspan.setAttributeNS(null,"font-family",Ol.fontFamily),Ol.tspan.setAttributeNS(null,"font-size",`${wl(Ol.fontSize)}px`),Ol.tspan.setAttributeNS(null,"y",wl(-Ol.y)),Ol.txtElement=this.svgFactory.createElement("svg:text"),Ol.txtElement.append(Ol.tspan)}beginText(){const Fl=this.current;Fl.x=Fl.lineX=0,Fl.y=Fl.lineY=0,Fl.textMatrix=lo.IDENTITY_MATRIX,Fl.lineMatrix=lo.IDENTITY_MATRIX,Fl.textMatrixScale=1,Fl.tspan=this.svgFactory.createElement("svg:tspan"),Fl.txtElement=this.svgFactory.createElement("svg:text"),Fl.txtgrp=this.svgFactory.createElement("svg:g"),Fl.xcoords=[],Fl.ycoords=[]}moveText(Fl,Pl){const Al=this.current;Al.x=Al.lineX+=Fl,Al.y=Al.lineY+=Pl,Al.xcoords=[],Al.ycoords=[],Al.tspan=this.svgFactory.createElement("svg:tspan"),Al.tspan.setAttributeNS(null,"font-family",Al.fontFamily),Al.tspan.setAttributeNS(null,"font-size",`${wl(Al.fontSize)}px`),Al.tspan.setAttributeNS(null,"y",wl(-Al.y))}showText(Fl){const Pl=this.current,Al=Pl.font,Rl=Pl.fontSize;if(Rl===0)return;const Il=Pl.fontSizeScale,Bl=Pl.charSpacing,Ol=Pl.wordSpacing,zl=Pl.fontDirection,Hl=Pl.textHScale*zl,ou=Al.vertical,au=ou?1:-1,_c=Al.defaultVMetrics,uu=Rl*Pl.fontMatrix[0];let lu=0;for(const pu of Fl){if(pu===null){lu+=zl*Ol;continue}else if(typeof pu=="number"){lu+=au*pu*Rl/1e3;continue}const Ll=(pu.isSpace?Ol:0)+Bl,Nl=pu.fontChar;let Ml,Ul,Vl=pu.width;if(ou){let Jl;const iu=pu.vmetric||_c;Jl=pu.vmetric?iu[1]:Vl*.5,Jl=-Jl*uu;const fu=iu[2]*uu;Vl=iu?-iu[0]:Vl,Ml=Jl/Il,Ul=(lu+fu)/Il}else Ml=lu/Il,Ul=0;(pu.isInFont||Al.missingFile)&&(Pl.xcoords.push(Pl.x+Ml),ou&&Pl.ycoords.push(-Pl.y+Ul),Pl.tspan.textContent+=Nl);const Ql=ou?Vl*uu-Ll*zl:Vl*uu+Ll*zl;lu+=Ql}Pl.tspan.setAttributeNS(null,"x",Pl.xcoords.map(wl).join(" ")),ou?Pl.tspan.setAttributeNS(null,"y",Pl.ycoords.map(wl).join(" ")):Pl.tspan.setAttributeNS(null,"y",wl(-Pl.y)),ou?Pl.y-=lu:Pl.x+=lu*Hl,Pl.tspan.setAttributeNS(null,"font-family",Pl.fontFamily),Pl.tspan.setAttributeNS(null,"font-size",`${wl(Pl.fontSize)}px`),Pl.fontStyle!==co.fontStyle&&Pl.tspan.setAttributeNS(null,"font-style",Pl.fontStyle),Pl.fontWeight!==co.fontWeight&&Pl.tspan.setAttributeNS(null,"font-weight",Pl.fontWeight);const Kl=Pl.textRenderingMode&lo.TextRenderingMode.FILL_STROKE_MASK;if(Kl===lo.TextRenderingMode.FILL||Kl===lo.TextRenderingMode.FILL_STROKE?(Pl.fillColor!==co.fillColor&&Pl.tspan.setAttributeNS(null,"fill",Pl.fillColor),Pl.fillAlpha<1&&Pl.tspan.setAttributeNS(null,"fill-opacity",Pl.fillAlpha)):Pl.textRenderingMode===lo.TextRenderingMode.ADD_TO_PATH?Pl.tspan.setAttributeNS(null,"fill","transparent"):Pl.tspan.setAttributeNS(null,"fill","none"),Kl===lo.TextRenderingMode.STROKE||Kl===lo.TextRenderingMode.FILL_STROKE){const pu=1/(Pl.textMatrixScale||1);this._setStrokeAttributes(Pl.tspan,pu)}let xu=Pl.textMatrix;Pl.textRise!==0&&(xu=xu.slice(),xu[5]+=Pl.textRise),Pl.txtElement.setAttributeNS(null,"transform",`${_l(xu)} scale(${wl(Hl)}, -1)`),Pl.txtElement.setAttributeNS(uo,"xml:space","preserve"),Pl.txtElement.append(Pl.tspan),Pl.txtgrp.append(Pl.txtElement),this._ensureTransformGroup().append(Pl.txtElement)}setLeadingMoveText(Fl,Pl){this.setLeading(-Pl),this.moveText(Fl,Pl)}addFontStyle(Fl){if(!Fl.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const Pl=_a(Fl.data,Fl.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Fl.loadedName}"; src: url(${Pl}); }
`}setFont(Fl){const Pl=this.current,Al=this.commonObjs.get(Fl[0]);let Rl=Fl[1];Pl.font=Al,this.embedFonts&&!Al.missingFile&&!this.embeddedFonts[Al.loadedName]&&(this.addFontStyle(Al),this.embeddedFonts[Al.loadedName]=Al),Pl.fontMatrix=Al.fontMatrix||lo.FONT_IDENTITY_MATRIX;let Il="normal";Al.black?Il="900":Al.bold&&(Il="bold");const Bl=Al.italic?"italic":"normal";Rl<0?(Rl=-Rl,Pl.fontDirection=-1):Pl.fontDirection=1,Pl.fontSize=Rl,Pl.fontFamily=Al.loadedName,Pl.fontWeight=Il,Pl.fontStyle=Bl,Pl.tspan=this.svgFactory.createElement("svg:tspan"),Pl.tspan.setAttributeNS(null,"y",wl(-Pl.y)),Pl.xcoords=[],Pl.ycoords=[]}endText(){var Pl;const Fl=this.current;Fl.textRenderingMode&lo.TextRenderingMode.ADD_TO_PATH_FLAG&&((Pl=Fl.txtElement)!=null&&Pl.hasChildNodes())&&(Fl.element=Fl.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Fl){Fl>0&&(this.current.lineWidth=Fl)}setLineCap(Fl){this.current.lineCap=ba[Fl]}setLineJoin(Fl){this.current.lineJoin=xa[Fl]}setMiterLimit(Fl){this.current.miterLimit=Fl}setStrokeAlpha(Fl){this.current.strokeAlpha=Fl}setStrokeRGBColor(Fl,Pl,Al){this.current.strokeColor=lo.Util.makeHexColor(Fl,Pl,Al)}setFillAlpha(Fl){this.current.fillAlpha=Fl}setFillRGBColor(Fl,Pl,Al){this.current.fillColor=lo.Util.makeHexColor(Fl,Pl,Al),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Fl){this.current.strokeColor=this._makeColorN_Pattern(Fl)}setFillColorN(Fl){this.current.fillColor=this._makeColorN_Pattern(Fl)}shadingFill(Fl){const{width:Pl,height:Al}=this.viewport,Rl=lo.Util.inverseTransform(this.transformMatrix),[Il,Bl,Ol,zl]=lo.Util.getAxialAlignedBoundingBox([0,0,Pl,Al],Rl),Hl=this.svgFactory.createElement("svg:rect");Hl.setAttributeNS(null,"x",Il),Hl.setAttributeNS(null,"y",Bl),Hl.setAttributeNS(null,"width",Ol-Il),Hl.setAttributeNS(null,"height",zl-Bl),Hl.setAttributeNS(null,"fill",this._makeShadingPattern(Fl)),this.current.fillAlpha<1&&Hl.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Hl)}_makeColorN_Pattern(Fl){return Fl[0]==="TilingPattern"?this._makeTilingPattern(Fl):this._makeShadingPattern(Fl)}_makeTilingPattern(Fl){const Pl=Fl[1],Al=Fl[2],Rl=Fl[3]||lo.IDENTITY_MATRIX,[Il,Bl,Ol,zl]=Fl[4],Hl=Fl[5],ou=Fl[6],au=Fl[7],_c=`shading${Cl++}`,[uu,lu,Kl,xu]=lo.Util.normalizeRect([...lo.Util.applyTransform([Il,Bl],Rl),...lo.Util.applyTransform([Ol,zl],Rl)]),[pu,Ll]=lo.Util.singularValueDecompose2dScale(Rl),Nl=Hl*pu,Ml=ou*Ll,Ul=this.svgFactory.createElement("svg:pattern");Ul.setAttributeNS(null,"id",_c),Ul.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Ul.setAttributeNS(null,"width",Nl),Ul.setAttributeNS(null,"height",Ml),Ul.setAttributeNS(null,"x",`${uu}`),Ul.setAttributeNS(null,"y",`${lu}`);const Vl=this.svg,Ql=this.transformMatrix,Jl=this.current.fillColor,iu=this.current.strokeColor,fu=this.svgFactory.create(Kl-uu,xu-lu);if(this.svg=fu,this.transformMatrix=Rl,au===2){const _u=lo.Util.makeHexColor(...Pl);this.current.fillColor=_u,this.current.strokeColor=_u}return this.executeOpTree(this.convertOpList(Al)),this.svg=Vl,this.transformMatrix=Ql,this.current.fillColor=Jl,this.current.strokeColor=iu,Ul.append(fu.childNodes[0]),this.defs.append(Ul),`url(#${_c})`}_makeShadingPattern(Fl){switch(typeof Fl=="string"&&(Fl=this.objs.get(Fl)),Fl[0]){case"RadialAxial":const Pl=`shading${Cl++}`,Al=Fl[3];let Rl;switch(Fl[1]){case"axial":const Il=Fl[4],Bl=Fl[5];Rl=this.svgFactory.createElement("svg:linearGradient"),Rl.setAttributeNS(null,"id",Pl),Rl.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Rl.setAttributeNS(null,"x1",Il[0]),Rl.setAttributeNS(null,"y1",Il[1]),Rl.setAttributeNS(null,"x2",Bl[0]),Rl.setAttributeNS(null,"y2",Bl[1]);break;case"radial":const Ol=Fl[4],zl=Fl[5],Hl=Fl[6],ou=Fl[7];Rl=this.svgFactory.createElement("svg:radialGradient"),Rl.setAttributeNS(null,"id",Pl),Rl.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Rl.setAttributeNS(null,"cx",zl[0]),Rl.setAttributeNS(null,"cy",zl[1]),Rl.setAttributeNS(null,"r",ou),Rl.setAttributeNS(null,"fx",Ol[0]),Rl.setAttributeNS(null,"fy",Ol[1]),Rl.setAttributeNS(null,"fr",Hl);break;default:throw new Error(`Unknown RadialAxial type: ${Fl[1]}`)}for(const Il of Al){const Bl=this.svgFactory.createElement("svg:stop");Bl.setAttributeNS(null,"offset",Il[0]),Bl.setAttributeNS(null,"stop-color",Il[1]),Rl.append(Bl)}return this.defs.append(Rl),`url(#${Pl})`;case"Mesh":return(0,lo.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Fl[0]}`)}}setDash(Fl,Pl){this.current.dashArray=Fl,this.current.dashPhase=Pl}constructPath(Fl,Pl){const Al=this.current;let Rl=Al.x,Il=Al.y,Bl=[],Ol=0;for(const zl of Fl)switch(zl|0){case lo.OPS.rectangle:Rl=Pl[Ol++],Il=Pl[Ol++];const Hl=Pl[Ol++],ou=Pl[Ol++],au=Rl+Hl,_c=Il+ou;Bl.push("M",wl(Rl),wl(Il),"L",wl(au),wl(Il),"L",wl(au),wl(_c),"L",wl(Rl),wl(_c),"Z");break;case lo.OPS.moveTo:Rl=Pl[Ol++],Il=Pl[Ol++],Bl.push("M",wl(Rl),wl(Il));break;case lo.OPS.lineTo:Rl=Pl[Ol++],Il=Pl[Ol++],Bl.push("L",wl(Rl),wl(Il));break;case lo.OPS.curveTo:Rl=Pl[Ol+4],Il=Pl[Ol+5],Bl.push("C",wl(Pl[Ol]),wl(Pl[Ol+1]),wl(Pl[Ol+2]),wl(Pl[Ol+3]),wl(Rl),wl(Il)),Ol+=6;break;case lo.OPS.curveTo2:Bl.push("C",wl(Rl),wl(Il),wl(Pl[Ol]),wl(Pl[Ol+1]),wl(Pl[Ol+2]),wl(Pl[Ol+3])),Rl=Pl[Ol+2],Il=Pl[Ol+3],Ol+=4;break;case lo.OPS.curveTo3:Rl=Pl[Ol+2],Il=Pl[Ol+3],Bl.push("C",wl(Pl[Ol]),wl(Pl[Ol+1]),wl(Rl),wl(Il),wl(Rl),wl(Il)),Ol+=4;break;case lo.OPS.closePath:Bl.push("Z");break}Bl=Bl.join(" "),Al.path&&Fl.length>0&&Fl[0]!==lo.OPS.rectangle&&Fl[0]!==lo.OPS.moveTo?Bl=Al.path.getAttributeNS(null,"d")+Bl:(Al.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Al.path)),Al.path.setAttributeNS(null,"d",Bl),Al.path.setAttributeNS(null,"fill","none"),Al.element=Al.path,Al.setCurrentPoint(Rl,Il)}endPath(){const Fl=this.current;if(Fl.path=null,!this.pendingClip)return;if(!Fl.element){this.pendingClip=null;return}const Pl=`clippath${El++}`,Al=this.svgFactory.createElement("svg:clipPath");Al.setAttributeNS(null,"id",Pl),Al.setAttributeNS(null,"transform",_l(this.transformMatrix));const Rl=Fl.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Rl.setAttributeNS(null,"clip-rule","evenodd"):Rl.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Al.append(Rl),this.defs.append(Al),Fl.activeClipUrl){Fl.clipGroup=null;for(const Il of this.extraStack)Il.clipGroup=null;Al.setAttributeNS(null,"clip-path",Fl.activeClipUrl)}Fl.activeClipUrl=`url(#${Pl})`,this.tgrp=null}clip(Fl){this.pendingClip=Fl}closePath(){const Fl=this.current;if(Fl.path){const Pl=`${Fl.path.getAttributeNS(null,"d")}Z`;Fl.path.setAttributeNS(null,"d",Pl)}}setLeading(Fl){this.current.leading=-Fl}setTextRise(Fl){this.current.textRise=Fl}setTextRenderingMode(Fl){this.current.textRenderingMode=Fl}setHScale(Fl){this.current.textHScale=Fl/100}setRenderingIntent(Fl){}setFlatness(Fl){}setGState(Fl){for(const[Pl,Al]of Fl)switch(Pl){case"LW":this.setLineWidth(Al);break;case"LC":this.setLineCap(Al);break;case"LJ":this.setLineJoin(Al);break;case"ML":this.setMiterLimit(Al);break;case"D":this.setDash(Al[0],Al[1]);break;case"RI":this.setRenderingIntent(Al);break;case"FL":this.setFlatness(Al);break;case"Font":this.setFont(Al);break;case"CA":this.setStrokeAlpha(Al);break;case"ca":this.setFillAlpha(Al);break;default:(0,lo.warn)(`Unimplemented graphic state operator ${Pl}`);break}}fill(){const Fl=this.current;Fl.element&&(Fl.element.setAttributeNS(null,"fill",Fl.fillColor),Fl.element.setAttributeNS(null,"fill-opacity",Fl.fillAlpha),this.endPath())}stroke(){const Fl=this.current;Fl.element&&(this._setStrokeAttributes(Fl.element),Fl.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Fl,Pl=1){const Al=this.current;let Rl=Al.dashArray;Pl!==1&&Rl.length>0&&(Rl=Rl.map(function(Il){return Pl*Il})),Fl.setAttributeNS(null,"stroke",Al.strokeColor),Fl.setAttributeNS(null,"stroke-opacity",Al.strokeAlpha),Fl.setAttributeNS(null,"stroke-miterlimit",wl(Al.miterLimit)),Fl.setAttributeNS(null,"stroke-linecap",Al.lineCap),Fl.setAttributeNS(null,"stroke-linejoin",Al.lineJoin),Fl.setAttributeNS(null,"stroke-width",wl(Pl*Al.lineWidth)+"px"),Fl.setAttributeNS(null,"stroke-dasharray",Rl.map(wl).join(" ")),Fl.setAttributeNS(null,"stroke-dashoffset",wl(Pl*Al.dashPhase)+"px")}eoFill(){var Fl;(Fl=this.current.element)==null||Fl.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var Fl;(Fl=this.current.element)==null||Fl.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Fl=this.svgFactory.createElement("svg:rect");Fl.setAttributeNS(null,"x","0"),Fl.setAttributeNS(null,"y","0"),Fl.setAttributeNS(null,"width","1px"),Fl.setAttributeNS(null,"height","1px"),Fl.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Fl)}paintImageXObject(Fl){const Pl=this.getObject(Fl);if(!Pl){(0,lo.warn)(`Dependent image with object ID ${Fl} is not ready yet`);return}this.paintInlineImageXObject(Pl)}paintInlineImageXObject(Fl,Pl){const Al=Fl.width,Rl=Fl.height,Il=$a(Fl,this.forceDataSchema,!!Pl),Bl=this.svgFactory.createElement("svg:rect");Bl.setAttributeNS(null,"x","0"),Bl.setAttributeNS(null,"y","0"),Bl.setAttributeNS(null,"width",wl(Al)),Bl.setAttributeNS(null,"height",wl(Rl)),this.current.element=Bl,this.clip("nonzero");const Ol=this.svgFactory.createElement("svg:image");Ol.setAttributeNS(ga,"xlink:href",Il),Ol.setAttributeNS(null,"x","0"),Ol.setAttributeNS(null,"y",wl(-Rl)),Ol.setAttributeNS(null,"width",wl(Al)+"px"),Ol.setAttributeNS(null,"height",wl(Rl)+"px"),Ol.setAttributeNS(null,"transform",`scale(${wl(1/Al)} ${wl(-1/Rl)})`),Pl?Pl.append(Ol):this._ensureTransformGroup().append(Ol)}paintImageMaskXObject(Fl){const Pl=this.getObject(Fl.data,Fl);if(Pl.bitmap){(0,lo.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Al=this.current,Rl=Pl.width,Il=Pl.height,Bl=Al.fillColor;Al.maskId=`mask${Sl++}`;const Ol=this.svgFactory.createElement("svg:mask");Ol.setAttributeNS(null,"id",Al.maskId);const zl=this.svgFactory.createElement("svg:rect");zl.setAttributeNS(null,"x","0"),zl.setAttributeNS(null,"y","0"),zl.setAttributeNS(null,"width",wl(Rl)),zl.setAttributeNS(null,"height",wl(Il)),zl.setAttributeNS(null,"fill",Bl),zl.setAttributeNS(null,"mask",`url(#${Al.maskId})`),this.defs.append(Ol),this._ensureTransformGroup().append(zl),this.paintInlineImageXObject(Pl,Ol)}paintFormXObjectBegin(Fl,Pl){if(Array.isArray(Fl)&&Fl.length===6&&this.transform(Fl[0],Fl[1],Fl[2],Fl[3],Fl[4],Fl[5]),Pl){const Al=Pl[2]-Pl[0],Rl=Pl[3]-Pl[1],Il=this.svgFactory.createElement("svg:rect");Il.setAttributeNS(null,"x",Pl[0]),Il.setAttributeNS(null,"y",Pl[1]),Il.setAttributeNS(null,"width",wl(Al)),Il.setAttributeNS(null,"height",wl(Rl)),this.current.element=Il,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Fl){const Pl=this.svgFactory.create(Fl.width,Fl.height),Al=this.svgFactory.createElement("svg:defs");Pl.append(Al),this.defs=Al;const Rl=this.svgFactory.createElement("svg:g");return Rl.setAttributeNS(null,"transform",_l(Fl.transform)),Pl.append(Rl),this.svg=Rl,Pl}_ensureClipGroup(){if(!this.current.clipGroup){const Fl=this.svgFactory.createElement("svg:g");Fl.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Fl),this.current.clipGroup=Fl}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",_l(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}is.SVGGraphics=Tl},(cs,is)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.XfaText=void 0;class us{static textContent(lo){const co=[],uo={items:co,styles:Object.create(null)};function ga(ba){var $a;if(!ba)return;let xa=null;const _a=ba.name;if(_a==="#text")xa=ba.value;else if(us.shouldBuildText(_a))($a=ba==null?void 0:ba.attributes)!=null&&$a.textContent?xa=ba.attributes.textContent:ba.value&&(xa=ba.value);else return;if(xa!==null&&co.push({str:xa}),!!ba.children)for(const xl of ba.children)ga(xl)}return ga(lo),uo}static shouldBuildText(lo){return!(lo==="textarea"||lo==="input"||lo==="option"||lo==="select")}}is.XfaText=us},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.TextLayerRenderTask=void 0,is.renderTextLayer=_l,is.updateTextLayer=El;var hs=us(1),lo=us(6);const co=1e5,uo=30,ga=.8,ba=new Map;function xa(Sl,Cl){let Tl;if(Cl&&hs.FeatureTest.isOffscreenCanvasSupported)Tl=new OffscreenCanvas(Sl,Sl).getContext("2d",{alpha:!1});else{const Dl=document.createElement("canvas");Dl.width=Dl.height=Sl,Tl=Dl.getContext("2d",{alpha:!1})}return Tl}function _a(Sl,Cl){const Tl=ba.get(Sl);if(Tl)return Tl;const Dl=xa(uo,Cl);Dl.font=`${uo}px ${Sl}`;const Fl=Dl.measureText("");let Pl=Fl.fontBoundingBoxAscent,Al=Math.abs(Fl.fontBoundingBoxDescent);if(Pl){const Il=Pl/(Pl+Al);return ba.set(Sl,Il),Dl.canvas.width=Dl.canvas.height=0,Il}Dl.strokeStyle="red",Dl.clearRect(0,0,uo,uo),Dl.strokeText("g",0,0);let Rl=Dl.getImageData(0,0,uo,uo).data;Al=0;for(let Il=Rl.length-1-3;Il>=0;Il-=4)if(Rl[Il]>0){Al=Math.ceil(Il/4/uo);break}Dl.clearRect(0,0,uo,uo),Dl.strokeText("A",0,uo),Rl=Dl.getImageData(0,0,uo,uo).data,Pl=0;for(let Il=0,Bl=Rl.length;Il<Bl;Il+=4)if(Rl[Il]>0){Pl=uo-Math.floor(Il/4/uo);break}if(Dl.canvas.width=Dl.canvas.height=0,Pl){const Il=Pl/(Pl+Al);return ba.set(Sl,Il),Il}return ba.set(Sl,ga),ga}function $a(Sl,Cl,Tl){const Dl=document.createElement("span"),Fl={angle:0,canvasWidth:0,hasText:Cl.str!=="",hasEOL:Cl.hasEOL,fontSize:0};Sl._textDivs.push(Dl);const Pl=hs.Util.transform(Sl._transform,Cl.transform);let Al=Math.atan2(Pl[1],Pl[0]);const Rl=Tl[Cl.fontName];Rl.vertical&&(Al+=Math.PI/2);const Il=Math.hypot(Pl[2],Pl[3]),Bl=Il*_a(Rl.fontFamily,Sl._isOffscreenCanvasSupported);let Ol,zl;Al===0?(Ol=Pl[4],zl=Pl[5]-Bl):(Ol=Pl[4]+Bl*Math.sin(Al),zl=Pl[5]-Bl*Math.cos(Al));const Hl="calc(var(--scale-factor)*",ou=Dl.style;Sl._container===Sl._rootContainer?(ou.left=`${(100*Ol/Sl._pageWidth).toFixed(2)}%`,ou.top=`${(100*zl/Sl._pageHeight).toFixed(2)}%`):(ou.left=`${Hl}${Ol.toFixed(2)}px)`,ou.top=`${Hl}${zl.toFixed(2)}px)`),ou.fontSize=`${Hl}${Il.toFixed(2)}px)`,ou.fontFamily=Rl.fontFamily,Fl.fontSize=Il,Dl.setAttribute("role","presentation"),Dl.textContent=Cl.str,Dl.dir=Cl.dir,Sl._fontInspectorEnabled&&(Dl.dataset.fontName=Cl.fontName),Al!==0&&(Fl.angle=Al*(180/Math.PI));let au=!1;if(Cl.str.length>1)au=!0;else if(Cl.str!==" "&&Cl.transform[0]!==Cl.transform[3]){const _c=Math.abs(Cl.transform[0]),uu=Math.abs(Cl.transform[3]);_c!==uu&&Math.max(_c,uu)/Math.min(_c,uu)>1.5&&(au=!0)}au&&(Fl.canvasWidth=Rl.vertical?Cl.height:Cl.width),Sl._textDivProperties.set(Dl,Fl),Sl._isReadableStream&&Sl._layoutText(Dl)}function xl(Sl){const{div:Cl,scale:Tl,properties:Dl,ctx:Fl,prevFontSize:Pl,prevFontFamily:Al}=Sl,{style:Rl}=Cl;let Il="";if(Dl.canvasWidth!==0&&Dl.hasText){const{fontFamily:Bl}=Rl,{canvasWidth:Ol,fontSize:zl}=Dl;(Pl!==zl||Al!==Bl)&&(Fl.font=`${zl*Tl}px ${Bl}`,Sl.prevFontSize=zl,Sl.prevFontFamily=Bl);const{width:Hl}=Fl.measureText(Cl.textContent);Hl>0&&(Il=`scaleX(${Ol*Tl/Hl})`)}Dl.angle!==0&&(Il=`rotate(${Dl.angle}deg) ${Il}`),Il.length>0&&(Rl.transform=Il)}function yl(Sl){if(Sl._canceled)return;const Cl=Sl._textDivs,Tl=Sl._capability;if(Cl.length>co){Tl.resolve();return}if(!Sl._isReadableStream)for(const Fl of Cl)Sl._layoutText(Fl);Tl.resolve()}class wl{constructor({textContentSource:Cl,container:Tl,viewport:Dl,textDivs:Fl,textDivProperties:Pl,textContentItemsStr:Al,isOffscreenCanvasSupported:Rl}){var Hl;this._textContentSource=Cl,this._isReadableStream=Cl instanceof ReadableStream,this._container=this._rootContainer=Tl,this._textDivs=Fl||[],this._textContentItemsStr=Al||[],this._isOffscreenCanvasSupported=Rl,this._fontInspectorEnabled=!!((Hl=globalThis.FontInspector)!=null&&Hl.enabled),this._reader=null,this._textDivProperties=Pl||new WeakMap,this._canceled=!1,this._capability=new hs.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:Dl.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:xa(0,Rl)};const{pageWidth:Il,pageHeight:Bl,pageX:Ol,pageY:zl}=Dl.rawDims;this._transform=[1,0,0,-1,-Ol,zl+Bl],this._pageWidth=Il,this._pageHeight=Bl,(0,lo.setLayerDimensions)(Tl,Dl),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new hs.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new hs.AbortException("TextLayer task cancelled."))}_processItems(Cl,Tl){for(const Dl of Cl){if(Dl.str===void 0){if(Dl.type==="beginMarkedContentProps"||Dl.type==="beginMarkedContent"){const Fl=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),Dl.id!==null&&this._container.setAttribute("id",`${Dl.id}`),Fl.append(this._container)}else Dl.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(Dl.str),$a(this,Dl,Tl)}}_layoutText(Cl){const Tl=this._layoutTextParams.properties=this._textDivProperties.get(Cl);if(this._layoutTextParams.div=Cl,xl(this._layoutTextParams),Tl.hasText&&this._container.append(Cl),Tl.hasEOL){const Dl=document.createElement("br");Dl.setAttribute("role","presentation"),this._container.append(Dl)}}_render(){const Cl=new hs.PromiseCapability;let Tl=Object.create(null);if(this._isReadableStream){const Dl=()=>{this._reader.read().then(({value:Fl,done:Pl})=>{if(Pl){Cl.resolve();return}Object.assign(Tl,Fl.styles),this._processItems(Fl.items,Tl),Dl()},Cl.reject)};this._reader=this._textContentSource.getReader(),Dl()}else if(this._textContentSource){const{items:Dl,styles:Fl}=this._textContentSource;this._processItems(Dl,Fl),Cl.resolve()}else throw new Error('No "textContentSource" parameter specified.');Cl.promise.then(()=>{Tl=null,yl(this)},this._capability.reject)}}is.TextLayerRenderTask=wl;function _l(Sl){!Sl.textContentSource&&(Sl.textContent||Sl.textContentStream)&&((0,lo.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),Sl.textContentSource=Sl.textContent||Sl.textContentStream);const{container:Cl,viewport:Tl}=Sl,Dl=getComputedStyle(Cl),Fl=Dl.getPropertyValue("visibility"),Pl=parseFloat(Dl.getPropertyValue("--scale-factor"));Fl==="visible"&&(!Pl||Math.abs(Pl-Tl.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const Al=new wl(Sl);return Al._render(),Al}function El({container:Sl,viewport:Cl,textDivs:Tl,textDivProperties:Dl,isOffscreenCanvasSupported:Fl,mustRotate:Pl=!0,mustRescale:Al=!0}){if(Pl&&(0,lo.setLayerDimensions)(Sl,{rotation:Cl.rotation}),Al){const Rl=xa(0,Fl),Bl={prevFontSize:null,prevFontFamily:null,div:null,scale:Cl.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Rl};for(const Ol of Tl)Bl.properties=Dl.get(Ol),Bl.div=Ol,xl(Bl)}}},(cs,is,us)=>{var _a,$a,xl,yl,wl,_l,El,Sl,Cl,Tl,Dl,B1,Kx,U1,z1;Object.defineProperty(is,"__esModule",{value:!0}),is.AnnotationEditorLayer=void 0;var hs=us(1),lo=us(4),co=us(28),uo=us(33),ga=us(6),ba=us(34);const Il=class Il{constructor({uiManager:Ol,pageIndex:zl,div:Hl,accessibilityManager:ou,annotationLayer:au,viewport:_c,l10n:uu}){_d(this,Dl);_d(this,_a);_d(this,$a,!1);_d(this,xl,null);_d(this,yl,this.pointerup.bind(this));_d(this,wl,this.pointerdown.bind(this));_d(this,_l,new Map);_d(this,El,!1);_d(this,Sl,!1);_d(this,Cl,!1);_d(this,Tl);const lu=[co.FreeTextEditor,uo.InkEditor,ba.StampEditor];if(!Il._initialized){Il._initialized=!0;for(const Kl of lu)Kl.initialize(uu)}Ol.registerEditorTypes(lu),ep(this,Tl,Ol),this.pageIndex=zl,this.div=Hl,ep(this,_a,ou),ep(this,xl,au),this.viewport=_c,Wl(this,Tl).addLayer(this)}get isEmpty(){return Wl(this,_l).size===0}updateToolbar(Ol){Wl(this,Tl).updateToolbar(Ol)}updateMode(Ol=Wl(this,Tl).getMode()){Uu(this,Dl,z1).call(this),Ol===hs.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Ol!==hs.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Ol===hs.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Ol===hs.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Ol===hs.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Ol){if(!Ol&&Wl(this,Tl).getMode()!==hs.AnnotationEditorType.INK)return;if(!Ol){for(const Hl of Wl(this,_l).values())if(Hl.isEmpty()){Hl.setInBackground();return}}Uu(this,Dl,Kx).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Ol){Wl(this,Tl).setEditingState(Ol)}addCommands(Ol){Wl(this,Tl).addCommands(Ol)}enable(){this.div.style.pointerEvents="auto";const Ol=new Set;for(const Hl of Wl(this,_l).values())Hl.enableEditing(),Hl.annotationElementId&&Ol.add(Hl.annotationElementId);if(!Wl(this,xl))return;const zl=Wl(this,xl).getEditableAnnotations();for(const Hl of zl){if(Hl.hide(),Wl(this,Tl).isDeletedAnnotationElement(Hl.data.id)||Ol.has(Hl.data.id))continue;const ou=this.deserialize(Hl);ou&&(this.addOrRebuild(ou),ou.enableEditing())}}disable(){var zl;ep(this,Cl,!0),this.div.style.pointerEvents="none";const Ol=new Set;for(const Hl of Wl(this,_l).values()){if(Hl.disableEditing(),!Hl.annotationElementId||Hl.serialize()!==null){Ol.add(Hl.annotationElementId);continue}(zl=this.getEditableAnnotation(Hl.annotationElementId))==null||zl.show(),Hl.remove()}if(Wl(this,xl)){const Hl=Wl(this,xl).getEditableAnnotations();for(const ou of Hl){const{id:au}=ou.data;Ol.has(au)||Wl(this,Tl).isDeletedAnnotationElement(au)||ou.show()}}Uu(this,Dl,z1).call(this),this.isEmpty&&(this.div.hidden=!0),ep(this,Cl,!1)}getEditableAnnotation(Ol){var zl;return((zl=Wl(this,xl))==null?void 0:zl.getEditableAnnotation(Ol))||null}setActiveEditor(Ol){Wl(this,Tl).getActive()!==Ol&&Wl(this,Tl).setActiveEditor(Ol)}enableClick(){this.div.addEventListener("pointerdown",Wl(this,wl)),this.div.addEventListener("pointerup",Wl(this,yl))}disableClick(){this.div.removeEventListener("pointerdown",Wl(this,wl)),this.div.removeEventListener("pointerup",Wl(this,yl))}attach(Ol){Wl(this,_l).set(Ol.id,Ol);const{annotationElementId:zl}=Ol;zl&&Wl(this,Tl).isDeletedAnnotationElement(zl)&&Wl(this,Tl).removeDeletedAnnotationElement(Ol)}detach(Ol){var zl;Wl(this,_l).delete(Ol.id),(zl=Wl(this,_a))==null||zl.removePointerInTextLayer(Ol.contentDiv),!Wl(this,Cl)&&Ol.annotationElementId&&Wl(this,Tl).addDeletedAnnotationElement(Ol)}remove(Ol){this.detach(Ol),Wl(this,Tl).removeEditor(Ol),Ol.div.contains(document.activeElement)&&setTimeout(()=>{Wl(this,Tl).focusMainContainer()},0),Ol.div.remove(),Ol.isAttachedToDOM=!1,Wl(this,Sl)||this.addInkEditorIfNeeded(!1)}changeParent(Ol){var zl;Ol.parent!==this&&(Ol.annotationElementId&&(Wl(this,Tl).addDeletedAnnotationElement(Ol.annotationElementId),lo.AnnotationEditor.deleteAnnotationElement(Ol),Ol.annotationElementId=null),this.attach(Ol),(zl=Ol.parent)==null||zl.detach(Ol),Ol.setParent(this),Ol.div&&Ol.isAttachedToDOM&&(Ol.div.remove(),this.div.append(Ol.div)))}add(Ol){if(this.changeParent(Ol),Wl(this,Tl).addEditor(Ol),this.attach(Ol),!Ol.isAttachedToDOM){const zl=Ol.render();this.div.append(zl),Ol.isAttachedToDOM=!0}Ol.fixAndSetPosition(),Ol.onceAdded(),Wl(this,Tl).addToAnnotationStorage(Ol)}moveEditorInDOM(Ol){var Hl;if(!Ol.isAttachedToDOM)return;const{activeElement:zl}=document;Ol.div.contains(zl)&&(Ol._focusEventsAllowed=!1,setTimeout(()=>{Ol.div.contains(document.activeElement)?Ol._focusEventsAllowed=!0:(Ol.div.addEventListener("focusin",()=>{Ol._focusEventsAllowed=!0},{once:!0}),zl.focus())},0)),Ol._structTreeParentId=(Hl=Wl(this,_a))==null?void 0:Hl.moveElementInDOM(this.div,Ol.div,Ol.contentDiv,!0)}addOrRebuild(Ol){Ol.needsToBeRebuilt()?Ol.rebuild():this.add(Ol)}addUndoableEditor(Ol){const zl=()=>Ol._uiManager.rebuild(Ol),Hl=()=>{Ol.remove()};this.addCommands({cmd:zl,undo:Hl,mustExec:!1})}getNextId(){return Wl(this,Tl).getId()}pasteEditor(Ol,zl){Wl(this,Tl).updateToolbar(Ol),Wl(this,Tl).updateMode(Ol);const{offsetX:Hl,offsetY:ou}=Uu(this,Dl,U1).call(this),au=this.getNextId(),_c=Uu(this,Dl,B1).call(this,{parent:this,id:au,x:Hl,y:ou,uiManager:Wl(this,Tl),isCentered:!0,...zl});_c&&this.add(_c)}deserialize(Ol){switch(Ol.annotationType??Ol.annotationEditorType){case hs.AnnotationEditorType.FREETEXT:return co.FreeTextEditor.deserialize(Ol,this,Wl(this,Tl));case hs.AnnotationEditorType.INK:return uo.InkEditor.deserialize(Ol,this,Wl(this,Tl));case hs.AnnotationEditorType.STAMP:return ba.StampEditor.deserialize(Ol,this,Wl(this,Tl))}return null}addNewEditor(){Uu(this,Dl,Kx).call(this,Uu(this,Dl,U1).call(this),!0)}setSelected(Ol){Wl(this,Tl).setSelected(Ol)}toggleSelected(Ol){Wl(this,Tl).toggleSelected(Ol)}isSelected(Ol){return Wl(this,Tl).isSelected(Ol)}unselect(Ol){Wl(this,Tl).unselect(Ol)}pointerup(Ol){const{isMac:zl}=hs.FeatureTest.platform;if(!(Ol.button!==0||Ol.ctrlKey&&zl)&&Ol.target===this.div&&Wl(this,El)){if(ep(this,El,!1),!Wl(this,$a)){ep(this,$a,!0);return}if(Wl(this,Tl).getMode()===hs.AnnotationEditorType.STAMP){Wl(this,Tl).unselectAll();return}Uu(this,Dl,Kx).call(this,Ol,!1)}}pointerdown(Ol){if(Wl(this,El)){ep(this,El,!1);return}const{isMac:zl}=hs.FeatureTest.platform;if(Ol.button!==0||Ol.ctrlKey&&zl||Ol.target!==this.div)return;ep(this,El,!0);const Hl=Wl(this,Tl).getActive();ep(this,$a,!Hl||Hl.isEmpty())}findNewParent(Ol,zl,Hl){const ou=Wl(this,Tl).findParent(zl,Hl);return ou===null||ou===this?!1:(ou.changeParent(Ol),!0)}destroy(){var Ol,zl;((Ol=Wl(this,Tl).getActive())==null?void 0:Ol.parent)===this&&(Wl(this,Tl).commitOrRemove(),Wl(this,Tl).setActiveEditor(null));for(const Hl of Wl(this,_l).values())(zl=Wl(this,_a))==null||zl.removePointerInTextLayer(Hl.contentDiv),Hl.setParent(null),Hl.isAttachedToDOM=!1,Hl.div.remove();this.div=null,Wl(this,_l).clear(),Wl(this,Tl).removeLayer(this)}render({viewport:Ol}){this.viewport=Ol,(0,ga.setLayerDimensions)(this.div,Ol);for(const zl of Wl(this,Tl).getEditors(this.pageIndex))this.add(zl);this.updateMode()}update({viewport:Ol}){Wl(this,Tl).commitOrRemove(),this.viewport=Ol,(0,ga.setLayerDimensions)(this.div,{rotation:Ol.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Ol,pageHeight:zl}=this.viewport.rawDims;return[Ol,zl]}};_a=new WeakMap,$a=new WeakMap,xl=new WeakMap,yl=new WeakMap,wl=new WeakMap,_l=new WeakMap,El=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,Dl=new WeakSet,B1=function(Ol){switch(Wl(this,Tl).getMode()){case hs.AnnotationEditorType.FREETEXT:return new co.FreeTextEditor(Ol);case hs.AnnotationEditorType.INK:return new uo.InkEditor(Ol);case hs.AnnotationEditorType.STAMP:return new ba.StampEditor(Ol)}return null},Kx=function(Ol,zl){const Hl=this.getNextId(),ou=Uu(this,Dl,B1).call(this,{parent:this,id:Hl,x:Ol.offsetX,y:Ol.offsetY,uiManager:Wl(this,Tl),isCentered:zl});return ou&&this.add(ou),ou},U1=function(){const{x:Ol,y:zl,width:Hl,height:ou}=this.div.getBoundingClientRect(),au=Math.max(0,Ol),_c=Math.max(0,zl),uu=Math.min(window.innerWidth,Ol+Hl),lu=Math.min(window.innerHeight,zl+ou),Kl=(au+uu)/2-Ol,xu=(_c+lu)/2-zl,[pu,Ll]=this.viewport.rotation%180===0?[Kl,xu]:[xu,Kl];return{offsetX:pu,offsetY:Ll}},z1=function(){ep(this,Sl,!0);for(const Ol of Wl(this,_l).values())Ol.isEmpty()&&Ol.remove();ep(this,Sl,!1)},c0(Il,"_initialized",!1);let xa=Il;is.AnnotationEditorLayer=xa},(cs,is,us)=>{var ba,xa,_a,$a,xl,yl,wl,_l,El,Sl,gv,mv,xv,Cx,W1,vv,H1;Object.defineProperty(is,"__esModule",{value:!0}),is.FreeTextEditor=void 0;var hs=us(1),lo=us(5),co=us(4),uo=us(29);const Il=class Il extends co.AnnotationEditor{constructor(zl){super({...zl,name:"freeTextEditor"});_d(this,Sl);_d(this,ba,this.editorDivBlur.bind(this));_d(this,xa,this.editorDivFocus.bind(this));_d(this,_a,this.editorDivInput.bind(this));_d(this,$a,this.editorDivKeydown.bind(this));_d(this,xl);_d(this,yl,"");_d(this,wl,`${this.id}-editor`);_d(this,_l);_d(this,El,null);ep(this,xl,zl.color||Il._defaultColor||co.AnnotationEditor._defaultLineColor),ep(this,_l,zl.fontSize||Il._defaultFontSize)}static get _keyboardManager(){const zl=Il.prototype,Hl=_c=>_c.isEmpty(),ou=lo.AnnotationEditorUIManager.TRANSLATE_SMALL,au=lo.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,hs.shadow)(this,"_keyboardManager",new lo.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],zl.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],zl.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],zl._translateEmpty,{args:[-ou,0],checker:Hl}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],zl._translateEmpty,{args:[-au,0],checker:Hl}],[["ArrowRight","mac+ArrowRight"],zl._translateEmpty,{args:[ou,0],checker:Hl}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],zl._translateEmpty,{args:[au,0],checker:Hl}],[["ArrowUp","mac+ArrowUp"],zl._translateEmpty,{args:[0,-ou],checker:Hl}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],zl._translateEmpty,{args:[0,-au],checker:Hl}],[["ArrowDown","mac+ArrowDown"],zl._translateEmpty,{args:[0,ou],checker:Hl}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],zl._translateEmpty,{args:[0,au],checker:Hl}]]))}static initialize(zl){co.AnnotationEditor.initialize(zl,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Hl=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Hl.getPropertyValue("--freetext-padding"))}static updateDefaultParams(zl,Hl){switch(zl){case hs.AnnotationEditorParamsType.FREETEXT_SIZE:Il._defaultFontSize=Hl;break;case hs.AnnotationEditorParamsType.FREETEXT_COLOR:Il._defaultColor=Hl;break}}updateParams(zl,Hl){switch(zl){case hs.AnnotationEditorParamsType.FREETEXT_SIZE:Uu(this,Sl,gv).call(this,Hl);break;case hs.AnnotationEditorParamsType.FREETEXT_COLOR:Uu(this,Sl,mv).call(this,Hl);break}}static get defaultPropertiesToUpdate(){return[[hs.AnnotationEditorParamsType.FREETEXT_SIZE,Il._defaultFontSize],[hs.AnnotationEditorParamsType.FREETEXT_COLOR,Il._defaultColor||co.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[hs.AnnotationEditorParamsType.FREETEXT_SIZE,Wl(this,_l)],[hs.AnnotationEditorParamsType.FREETEXT_COLOR,Wl(this,xl)]]}_translateEmpty(zl,Hl){this._uiManager.translateSelectedEditors(zl,Hl,!0)}getInitialTranslation(){const zl=this.parentScale;return[-Il._internalPadding*zl,-(Il._internalPadding+Wl(this,_l))*zl]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(hs.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",Wl(this,$a)),this.editorDiv.addEventListener("focus",Wl(this,xa)),this.editorDiv.addEventListener("blur",Wl(this,ba)),this.editorDiv.addEventListener("input",Wl(this,_a)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Wl(this,wl)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",Wl(this,$a)),this.editorDiv.removeEventListener("focus",Wl(this,xa)),this.editorDiv.removeEventListener("blur",Wl(this,ba)),this.editorDiv.removeEventListener("input",Wl(this,_a)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(zl){this._focusEventsAllowed&&(super.focusin(zl),zl.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var zl;if(this.width){Uu(this,Sl,H1).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(zl=this._initialOptions)!=null&&zl.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const zl=Wl(this,yl),Hl=ep(this,yl,Uu(this,Sl,xv).call(this).trimEnd());if(zl===Hl)return;const ou=au=>{if(ep(this,yl,au),!au){this.remove();return}Uu(this,Sl,W1).call(this),this._uiManager.rebuild(this),Uu(this,Sl,Cx).call(this)};this.addCommands({cmd:()=>{ou(Hl)},undo:()=>{ou(zl)},mustExec:!1}),Uu(this,Sl,Cx).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(zl){this.enterInEditMode()}keydown(zl){zl.target===this.div&&zl.key==="Enter"&&(this.enterInEditMode(),zl.preventDefault())}editorDivKeydown(zl){Il._keyboardManager.exec(this,zl)}editorDivFocus(zl){this.isEditing=!0}editorDivBlur(zl){this.isEditing=!1}editorDivInput(zl){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let zl,Hl;this.width&&(zl=this.x,Hl=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Wl(this,wl)),this.enableEditing(),co.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(au=>{var _c;return(_c=this.editorDiv)==null?void 0:_c.setAttribute("aria-label",au)}),co.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(au=>{var _c;return(_c=this.editorDiv)==null?void 0:_c.setAttribute("default-content",au)}),this.editorDiv.contentEditable=!0;const{style:ou}=this.editorDiv;if(ou.fontSize=`calc(${Wl(this,_l)}px * var(--scale-factor))`,ou.color=Wl(this,xl),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,lo.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[au,_c]=this.parentDimensions;if(this.annotationElementId){const{position:uu}=Wl(this,El);let[lu,Kl]=this.getInitialTranslation();[lu,Kl]=this.pageTranslationToScreen(lu,Kl);const[xu,pu]=this.pageDimensions,[Ll,Nl]=this.pageTranslation;let Ml,Ul;switch(this.rotation){case 0:Ml=zl+(uu[0]-Ll)/xu,Ul=Hl+this.height-(uu[1]-Nl)/pu;break;case 90:Ml=zl+(uu[0]-Ll)/xu,Ul=Hl-(uu[1]-Nl)/pu,[lu,Kl]=[Kl,-lu];break;case 180:Ml=zl-this.width+(uu[0]-Ll)/xu,Ul=Hl-(uu[1]-Nl)/pu,[lu,Kl]=[-lu,-Kl];break;case 270:Ml=zl+(uu[0]-Ll-this.height*pu)/xu,Ul=Hl+(uu[1]-Nl-this.width*xu)/pu,[lu,Kl]=[-Kl,lu];break}this.setAt(Ml*au,Ul*_c,lu,Kl)}else this.setAt(zl*au,Hl*_c,this.width*au,this.height*_c);Uu(this,Sl,W1).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(zl,Hl,ou){let au=null;if(zl instanceof uo.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:uu,fontColor:lu},rect:Kl,rotation:xu,id:pu},textContent:Ll,textPosition:Nl,parent:{page:{pageNumber:Ml}}}=zl;if(!Ll||Ll.length===0)return null;au=zl={annotationType:hs.AnnotationEditorType.FREETEXT,color:Array.from(lu),fontSize:uu,value:Ll.join(`
`),position:Nl,pageIndex:Ml-1,rect:Kl,rotation:xu,id:pu,deleted:!1}}const _c=super.deserialize(zl,Hl,ou);return ep(_c,_l,zl.fontSize),ep(_c,xl,hs.Util.makeHexColor(...zl.color)),ep(_c,yl,zl.value),_c.annotationElementId=zl.id||null,ep(_c,El,au),_c}serialize(zl=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Hl=Il._internalPadding*this.parentScale,ou=this.getRect(Hl,Hl),au=co.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:Wl(this,xl)),_c={annotationType:hs.AnnotationEditorType.FREETEXT,color:au,fontSize:Wl(this,_l),value:Wl(this,yl),pageIndex:this.pageIndex,rect:ou,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return zl?_c:this.annotationElementId&&!Uu(this,Sl,vv).call(this,_c)?null:(_c.id=this.annotationElementId,_c)}};ba=new WeakMap,xa=new WeakMap,_a=new WeakMap,$a=new WeakMap,xl=new WeakMap,yl=new WeakMap,wl=new WeakMap,_l=new WeakMap,El=new WeakMap,Sl=new WeakSet,gv=function(zl){const Hl=au=>{this.editorDiv.style.fontSize=`calc(${au}px * var(--scale-factor))`,this.translate(0,-(au-Wl(this,_l))*this.parentScale),ep(this,_l,au),Uu(this,Sl,Cx).call(this)},ou=Wl(this,_l);this.addCommands({cmd:()=>{Hl(zl)},undo:()=>{Hl(ou)},mustExec:!0,type:hs.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},mv=function(zl){const Hl=Wl(this,xl);this.addCommands({cmd:()=>{ep(this,xl,this.editorDiv.style.color=zl)},undo:()=>{ep(this,xl,this.editorDiv.style.color=Hl)},mustExec:!0,type:hs.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},xv=function(){const zl=this.editorDiv.getElementsByTagName("div");if(zl.length===0)return this.editorDiv.innerText;const Hl=[];for(const ou of zl)Hl.push(ou.innerText.replace(/\r\n?|\n/,""));return Hl.join(`
`)},Cx=function(){const[zl,Hl]=this.parentDimensions;let ou;if(this.isAttachedToDOM)ou=this.div.getBoundingClientRect();else{const{currentLayer:au,div:_c}=this,uu=_c.style.display;_c.style.display="hidden",au.div.append(this.div),ou=_c.getBoundingClientRect(),_c.remove(),_c.style.display=uu}this.rotation%180===this.parentRotation%180?(this.width=ou.width/zl,this.height=ou.height/Hl):(this.width=ou.height/zl,this.height=ou.width/Hl),this.fixAndSetPosition()},W1=function(){if(this.editorDiv.replaceChildren(),!!Wl(this,yl))for(const zl of Wl(this,yl).split(`
`)){const Hl=document.createElement("div");Hl.append(zl?document.createTextNode(zl):document.createElement("br")),this.editorDiv.append(Hl)}},vv=function(zl){const{value:Hl,fontSize:ou,color:au,rect:_c,pageIndex:uu}=Wl(this,El);return zl.value!==Hl||zl.fontSize!==ou||zl.rect.some((lu,Kl)=>Math.abs(lu-_c[Kl])>=1)||zl.color.some((lu,Kl)=>lu!==au[Kl])||zl.pageIndex!==uu},H1=function(zl=!1){if(!this.annotationElementId)return;if(Uu(this,Sl,Cx).call(this),!zl&&(this.width===0||this.height===0)){setTimeout(()=>Uu(this,Sl,H1).call(this,!0),0);return}const Hl=Il._internalPadding*this.parentScale;Wl(this,El).rect=this.getRect(Hl,Hl)},c0(Il,"_freeTextDefaultContent",""),c0(Il,"_internalPadding",0),c0(Il,"_defaultColor",null),c0(Il,"_defaultFontSize",10),c0(Il,"_type","freetext");let ga=Il;is.FreeTextEditor=ga},(cs,is,us)=>{var Ul,Ql,Lm,yv,fu,_u,bu,Cu,Tu,Fu,ku,tu,eu,gu,ru,Pu,Lu,Ju,Vu,Mu,hp,mp,bv,qx,V1,X1,Ip,Hp,qp,lp,$u,Zu,Ap,G1,Vp,Ru,Qu,up,_v,$1;Object.defineProperty(is,"__esModule",{value:!0}),is.StampAnnotationElement=is.InkAnnotationElement=is.FreeTextAnnotationElement=is.AnnotationLayer=void 0;var hs=us(1),lo=us(6),co=us(3),uo=us(30),ga=us(31),ba=us(32);const xa=1e3,_a=9,$a=new WeakSet;function xl(Sp){return{width:Sp[2]-Sp[0],height:Sp[3]-Sp[1]}}class yl{static create(vu){switch(vu.data.annotationType){case hs.AnnotationType.LINK:return new _l(vu);case hs.AnnotationType.TEXT:return new El(vu);case hs.AnnotationType.WIDGET:switch(vu.data.fieldType){case"Tx":return new Cl(vu);case"Btn":return vu.data.radioButton?new Fl(vu):vu.data.checkBox?new Dl(vu):new Pl(vu);case"Ch":return new Al(vu);case"Sig":return new Tl(vu)}return new Sl(vu);case hs.AnnotationType.POPUP:return new Rl(vu);case hs.AnnotationType.FREETEXT:return new Bl(vu);case hs.AnnotationType.LINE:return new Ol(vu);case hs.AnnotationType.SQUARE:return new zl(vu);case hs.AnnotationType.CIRCLE:return new Hl(vu);case hs.AnnotationType.POLYLINE:return new ou(vu);case hs.AnnotationType.CARET:return new _c(vu);case hs.AnnotationType.INK:return new uu(vu);case hs.AnnotationType.POLYGON:return new au(vu);case hs.AnnotationType.HIGHLIGHT:return new lu(vu);case hs.AnnotationType.UNDERLINE:return new Kl(vu);case hs.AnnotationType.SQUIGGLY:return new xu(vu);case hs.AnnotationType.STRIKEOUT:return new pu(vu);case hs.AnnotationType.STAMP:return new Ll(vu);case hs.AnnotationType.FILEATTACHMENT:return new Nl(vu);default:return new wl(vu)}}}const Vl=class Vl{constructor(vu,{isRenderable:Zl=!1,ignoreBorder:Ou=!1,createQuadrilaterals:Du=!1}={}){_d(this,Ul,!1);this.isRenderable=Zl,this.data=vu.data,this.layer=vu.layer,this.linkService=vu.linkService,this.downloadManager=vu.downloadManager,this.imageResourcesPath=vu.imageResourcesPath,this.renderForms=vu.renderForms,this.svgFactory=vu.svgFactory,this.annotationStorage=vu.annotationStorage,this.enableScripting=vu.enableScripting,this.hasJSActions=vu.hasJSActions,this._fieldObjects=vu.fieldObjects,this.parent=vu.parent,Zl&&(this.container=this._createContainer(Ou)),Du&&this._createQuadrilaterals()}static _hasPopupData({titleObj:vu,contentsObj:Zl,richText:Ou}){return!!(vu!=null&&vu.str||Zl!=null&&Zl.str||Ou!=null&&Ou.str)}get hasPopupData(){return Vl._hasPopupData(this.data)}_createContainer(vu){const{data:Zl,parent:{page:Ou,viewport:Du}}=this,$l=document.createElement("section");$l.setAttribute("data-annotation-id",Zl.id),this instanceof Sl||($l.tabIndex=xa),$l.style.zIndex=this.parent.zIndex++,this.data.popupRef&&$l.setAttribute("aria-haspopup","dialog"),Zl.noRotate&&$l.classList.add("norotate");const{pageWidth:Au,pageHeight:Eu,pageX:_f,pageY:qu}=Du.rawDims;if(!Zl.rect||this instanceof Rl){const{rotation:hu}=Zl;return!Zl.hasOwnCanvas&&hu!==0&&this.setRotation(hu,$l),$l}const{width:Xl,height:du}=xl(Zl.rect),su=hs.Util.normalizeRect([Zl.rect[0],Ou.view[3]-Zl.rect[1]+Ou.view[1],Zl.rect[2],Ou.view[3]-Zl.rect[3]+Ou.view[1]]);if(!vu&&Zl.borderStyle.width>0){$l.style.borderWidth=`${Zl.borderStyle.width}px`;const hu=Zl.borderStyle.horizontalCornerRadius,wu=Zl.borderStyle.verticalCornerRadius;if(hu>0||wu>0){const tp=`calc(${hu}px * var(--scale-factor)) / calc(${wu}px * var(--scale-factor))`;$l.style.borderRadius=tp}else if(this instanceof Fl){const tp=`calc(${Xl}px * var(--scale-factor)) / calc(${du}px * var(--scale-factor))`;$l.style.borderRadius=tp}switch(Zl.borderStyle.style){case hs.AnnotationBorderStyleType.SOLID:$l.style.borderStyle="solid";break;case hs.AnnotationBorderStyleType.DASHED:$l.style.borderStyle="dashed";break;case hs.AnnotationBorderStyleType.BEVELED:(0,hs.warn)("Unimplemented border style: beveled");break;case hs.AnnotationBorderStyleType.INSET:(0,hs.warn)("Unimplemented border style: inset");break;case hs.AnnotationBorderStyleType.UNDERLINE:$l.style.borderBottomStyle="solid";break}const Nu=Zl.borderColor||null;Nu?(ep(this,Ul,!0),$l.style.borderColor=hs.Util.makeHexColor(Nu[0]|0,Nu[1]|0,Nu[2]|0)):$l.style.borderWidth=0}$l.style.left=`${100*(su[0]-_f)/Au}%`,$l.style.top=`${100*(su[1]-qu)/Eu}%`;const{rotation:cu}=Zl;return Zl.hasOwnCanvas||cu===0?($l.style.width=`${100*Xl/Au}%`,$l.style.height=`${100*du/Eu}%`):this.setRotation(cu,$l),$l}setRotation(vu,Zl=this.container){if(!this.data.rect)return;const{pageWidth:Ou,pageHeight:Du}=this.parent.viewport.rawDims,{width:$l,height:Au}=xl(this.data.rect);let Eu,_f;vu%180===0?(Eu=100*$l/Ou,_f=100*Au/Du):(Eu=100*Au/Ou,_f=100*$l/Du),Zl.style.width=`${Eu}%`,Zl.style.height=`${_f}%`,Zl.setAttribute("data-main-rotation",(360-vu)%360)}get _commonActions(){const vu=(Zl,Ou,Du)=>{const $l=Du.detail[Zl],Au=$l[0],Eu=$l.slice(1);Du.target.style[Ou]=uo.ColorConverters[`${Au}_HTML`](Eu),this.annotationStorage.setValue(this.data.id,{[Ou]:uo.ColorConverters[`${Au}_rgb`](Eu)})};return(0,hs.shadow)(this,"_commonActions",{display:Zl=>{const{display:Ou}=Zl.detail,Du=Ou%2===1;this.container.style.visibility=Du?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Du,noPrint:Ou===1||Ou===2})},print:Zl=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Zl.detail.print})},hidden:Zl=>{const{hidden:Ou}=Zl.detail;this.container.style.visibility=Ou?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Ou,noView:Ou})},focus:Zl=>{setTimeout(()=>Zl.target.focus({preventScroll:!1}),0)},userName:Zl=>{Zl.target.title=Zl.detail.userName},readonly:Zl=>{Zl.target.disabled=Zl.detail.readonly},required:Zl=>{this._setRequired(Zl.target,Zl.detail.required)},bgColor:Zl=>{vu("bgColor","backgroundColor",Zl)},fillColor:Zl=>{vu("fillColor","backgroundColor",Zl)},fgColor:Zl=>{vu("fgColor","color",Zl)},textColor:Zl=>{vu("textColor","color",Zl)},borderColor:Zl=>{vu("borderColor","borderColor",Zl)},strokeColor:Zl=>{vu("strokeColor","borderColor",Zl)},rotation:Zl=>{const Ou=Zl.detail.rotation;this.setRotation(Ou),this.annotationStorage.setValue(this.data.id,{rotation:Ou})}})}_dispatchEventFromSandbox(vu,Zl){const Ou=this._commonActions;for(const Du of Object.keys(Zl.detail)){const $l=vu[Du]||Ou[Du];$l==null||$l(Zl)}}_setDefaultPropertiesFromJS(vu){if(!this.enableScripting)return;const Zl=this.annotationStorage.getRawValue(this.data.id);if(!Zl)return;const Ou=this._commonActions;for(const[Du,$l]of Object.entries(Zl)){const Au=Ou[Du];if(Au){const Eu={detail:{[Du]:$l},target:vu};Au(Eu),delete Zl[Du]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:vu}=this.data;if(!vu)return;const[Zl,Ou,Du,$l]=this.data.rect;if(vu.length===1){const[,{x:wu,y:Nu},{x:tp,y:Yu}]=vu[0];if(Du===wu&&$l===Nu&&Zl===tp&&Ou===Yu)return}const{style:Au}=this.container;let Eu;if(Wl(this,Ul)){const{borderColor:wu,borderWidth:Nu}=Au;Au.borderWidth=0,Eu=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${wu}" stroke-width="${Nu}">`],this.container.classList.add("hasBorder")}const _f=Du-Zl,qu=$l-Ou,{svgFactory:Xl}=this,du=Xl.createElement("svg");du.classList.add("quadrilateralsContainer"),du.setAttribute("width",0),du.setAttribute("height",0);const su=Xl.createElement("defs");du.append(su);const cu=Xl.createElement("clipPath"),hu=`clippath_${this.data.id}`;cu.setAttribute("id",hu),cu.setAttribute("clipPathUnits","objectBoundingBox"),su.append(cu);for(const[,{x:wu,y:Nu},{x:tp,y:Yu}]of vu){const zu=Xl.createElement("rect"),rp=(tp-Zl)/_f,dp=($l-Nu)/qu,Ku=(wu-tp)/_f,vp=(Nu-Yu)/qu;zu.setAttribute("x",rp),zu.setAttribute("y",dp),zu.setAttribute("width",Ku),zu.setAttribute("height",vp),cu.append(zu),Eu==null||Eu.push(`<rect vector-effect="non-scaling-stroke" x="${rp}" y="${dp}" width="${Ku}" height="${vp}"/>`)}Wl(this,Ul)&&(Eu.push("</g></svg>')"),Au.backgroundImage=Eu.join("")),this.container.append(du),this.container.style.clipPath=`url(#${hu})`}_createPopup(){const{container:vu,data:Zl}=this;vu.setAttribute("aria-haspopup","dialog");const Ou=new Rl({data:{color:Zl.color,titleObj:Zl.titleObj,modificationDate:Zl.modificationDate,contentsObj:Zl.contentsObj,richText:Zl.richText,parentRect:Zl.rect,borderStyle:0,id:`popup_${Zl.id}`,rotation:Zl.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Ou.render())}render(){(0,hs.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(vu,Zl=null){const Ou=[];if(this._fieldObjects){const Du=this._fieldObjects[vu];if(Du)for(const{page:$l,id:Au,exportValues:Eu}of Du){if($l===-1||Au===Zl)continue;const _f=typeof Eu=="string"?Eu:null,qu=document.querySelector(`[data-element-id="${Au}"]`);if(qu&&!$a.has(qu)){(0,hs.warn)(`_getElementsByName - element not allowed: ${Au}`);continue}Ou.push({id:Au,exportValue:_f,domElement:qu})}return Ou}for(const Du of document.getElementsByName(vu)){const{exportValue:$l}=Du,Au=Du.getAttribute("data-element-id");Au!==Zl&&$a.has(Du)&&Ou.push({id:Au,exportValue:$l,domElement:Du})}return Ou}show(){var vu;this.container&&(this.container.hidden=!1),(vu=this.popup)==null||vu.maybeShow()}hide(){var vu;this.container&&(this.container.hidden=!0),(vu=this.popup)==null||vu.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const vu=this.getElementsToTriggerPopup();if(Array.isArray(vu))for(const Zl of vu)Zl.classList.add("highlightArea");else vu.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:vu,data:{id:Zl}}=this;this.container.addEventListener("dblclick",()=>{var Ou;(Ou=this.linkService.eventBus)==null||Ou.dispatch("switchannotationeditormode",{source:this,mode:vu,editId:Zl})})}};Ul=new WeakMap;let wl=Vl;class _l extends wl{constructor(Zl,Ou=null){super(Zl,{isRenderable:!0,ignoreBorder:!!(Ou!=null&&Ou.ignoreBorder),createQuadrilaterals:!0});_d(this,Ql);this.isTooltipOnly=Zl.data.isTooltipOnly}render(){const{data:Zl,linkService:Ou}=this,Du=document.createElement("a");Du.setAttribute("data-element-id",Zl.id);let $l=!1;return Zl.url?(Ou.addLinkAttributes(Du,Zl.url,Zl.newWindow),$l=!0):Zl.action?(this._bindNamedAction(Du,Zl.action),$l=!0):Zl.attachment?(this._bindAttachment(Du,Zl.attachment),$l=!0):Zl.setOCGState?(Uu(this,Ql,yv).call(this,Du,Zl.setOCGState),$l=!0):Zl.dest?(this._bindLink(Du,Zl.dest),$l=!0):(Zl.actions&&(Zl.actions.Action||Zl.actions["Mouse Up"]||Zl.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Du,Zl),$l=!0),Zl.resetForm?(this._bindResetFormAction(Du,Zl.resetForm),$l=!0):this.isTooltipOnly&&!$l&&(this._bindLink(Du,""),$l=!0)),this.container.classList.add("linkAnnotation"),$l&&this.container.append(Du),this.container}_bindLink(Zl,Ou){Zl.href=this.linkService.getDestinationHash(Ou),Zl.onclick=()=>(Ou&&this.linkService.goToDestination(Ou),!1),(Ou||Ou==="")&&Uu(this,Ql,Lm).call(this)}_bindNamedAction(Zl,Ou){Zl.href=this.linkService.getAnchorUrl(""),Zl.onclick=()=>(this.linkService.executeNamedAction(Ou),!1),Uu(this,Ql,Lm).call(this)}_bindAttachment(Zl,Ou){Zl.href=this.linkService.getAnchorUrl(""),Zl.onclick=()=>{var Du;return(Du=this.downloadManager)==null||Du.openOrDownloadData(this.container,Ou.content,Ou.filename),!1},Uu(this,Ql,Lm).call(this)}_bindJSAction(Zl,Ou){Zl.href=this.linkService.getAnchorUrl("");const Du=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const $l of Object.keys(Ou.actions)){const Au=Du.get($l);Au&&(Zl[Au]=()=>{var Eu;return(Eu=this.linkService.eventBus)==null||Eu.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ou.id,name:$l}}),!1})}Zl.onclick||(Zl.onclick=()=>!1),Uu(this,Ql,Lm).call(this)}_bindResetFormAction(Zl,Ou){const Du=Zl.onclick;if(Du||(Zl.href=this.linkService.getAnchorUrl("")),Uu(this,Ql,Lm).call(this),!this._fieldObjects){(0,hs.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Du||(Zl.onclick=()=>!1);return}Zl.onclick=()=>{var du;Du==null||Du();const{fields:$l,refs:Au,include:Eu}=Ou,_f=[];if($l.length!==0||Au.length!==0){const su=new Set(Au);for(const cu of $l){const hu=this._fieldObjects[cu]||[];for(const{id:wu}of hu)su.add(wu)}for(const cu of Object.values(this._fieldObjects))for(const hu of cu)su.has(hu.id)===Eu&&_f.push(hu)}else for(const su of Object.values(this._fieldObjects))_f.push(...su);const qu=this.annotationStorage,Xl=[];for(const su of _f){const{id:cu}=su;switch(Xl.push(cu),su.type){case"text":{const wu=su.defaultValue||"";qu.setValue(cu,{value:wu});break}case"checkbox":case"radiobutton":{const wu=su.defaultValue===su.exportValues;qu.setValue(cu,{value:wu});break}case"combobox":case"listbox":{const wu=su.defaultValue||"";qu.setValue(cu,{value:wu});break}default:continue}const hu=document.querySelector(`[data-element-id="${cu}"]`);if(hu){if(!$a.has(hu)){(0,hs.warn)(`_bindResetFormAction - element not allowed: ${cu}`);continue}}else continue;hu.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((du=this.linkService.eventBus)==null||du.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Xl,name:"ResetForm"}})),!1}}}Ql=new WeakSet,Lm=function(){this.container.setAttribute("data-internal-link","")},yv=function(Zl,Ou){Zl.href=this.linkService.getAnchorUrl(""),Zl.onclick=()=>(this.linkService.executeSetOCGState(Ou),!1),Uu(this,Ql,Lm).call(this)};class El extends wl{constructor(vu){super(vu,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const vu=document.createElement("img");return vu.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",vu.alt="[{{type}} Annotation]",vu.dataset.l10nId="text_annotation_type",vu.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(vu),this.container}}class Sl extends wl{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(vu){var Zl;this.data.hasOwnCanvas&&(((Zl=vu.previousSibling)==null?void 0:Zl.nodeName)==="CANVAS"&&(vu.previousSibling.hidden=!0),vu.hidden=!1)}_getKeyModifier(vu){const{isWin:Zl,isMac:Ou}=hs.FeatureTest.platform;return Zl&&vu.ctrlKey||Ou&&vu.metaKey}_setEventListener(vu,Zl,Ou,Du,$l){Ou.includes("mouse")?vu.addEventListener(Ou,Au=>{var Eu;(Eu=this.linkService.eventBus)==null||Eu.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Du,value:$l(Au),shift:Au.shiftKey,modifier:this._getKeyModifier(Au)}})}):vu.addEventListener(Ou,Au=>{var Eu;if(Ou==="blur"){if(!Zl.focused||!Au.relatedTarget)return;Zl.focused=!1}else if(Ou==="focus"){if(Zl.focused)return;Zl.focused=!0}$l&&((Eu=this.linkService.eventBus)==null||Eu.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Du,value:$l(Au)}}))})}_setEventListeners(vu,Zl,Ou,Du){var $l,Au,Eu;for(const[_f,qu]of Ou)(qu==="Action"||($l=this.data.actions)!=null&&$l[qu])&&((qu==="Focus"||qu==="Blur")&&(Zl||(Zl={focused:!1})),this._setEventListener(vu,Zl,_f,qu,Du),qu==="Focus"&&!((Au=this.data.actions)!=null&&Au.Blur)?this._setEventListener(vu,Zl,"blur","Blur",null):qu==="Blur"&&!((Eu=this.data.actions)!=null&&Eu.Focus)&&this._setEventListener(vu,Zl,"focus","Focus",null))}_setBackgroundColor(vu){const Zl=this.data.backgroundColor||null;vu.style.backgroundColor=Zl===null?"transparent":hs.Util.makeHexColor(Zl[0],Zl[1],Zl[2])}_setTextStyle(vu){const Zl=["left","center","right"],{fontColor:Ou}=this.data.defaultAppearanceData,Du=this.data.defaultAppearanceData.fontSize||_a,$l=vu.style;let Au;const Eu=2,_f=qu=>Math.round(10*qu)/10;if(this.data.multiLine){const qu=Math.abs(this.data.rect[3]-this.data.rect[1]-Eu),Xl=Math.round(qu/(hs.LINE_FACTOR*Du))||1,du=qu/Xl;Au=Math.min(Du,_f(du/hs.LINE_FACTOR))}else{const qu=Math.abs(this.data.rect[3]-this.data.rect[1]-Eu);Au=Math.min(Du,_f(qu/hs.LINE_FACTOR))}$l.fontSize=`calc(${Au}px * var(--scale-factor))`,$l.color=hs.Util.makeHexColor(Ou[0],Ou[1],Ou[2]),this.data.textAlignment!==null&&($l.textAlign=Zl[this.data.textAlignment])}_setRequired(vu,Zl){Zl?vu.setAttribute("required",!0):vu.removeAttribute("required"),vu.setAttribute("aria-required",Zl)}}class Cl extends Sl{constructor(vu){const Zl=vu.renderForms||!vu.data.hasAppearance&&!!vu.data.fieldValue;super(vu,{isRenderable:Zl})}setPropertyOnSiblings(vu,Zl,Ou,Du){const $l=this.annotationStorage;for(const Au of this._getElementsByName(vu.name,vu.id))Au.domElement&&(Au.domElement[Zl]=Ou),$l.setValue(Au.id,{[Du]:Ou})}render(){var Du,$l;const vu=this.annotationStorage,Zl=this.data.id;this.container.classList.add("textWidgetAnnotation");let Ou=null;if(this.renderForms){const Au=vu.getValue(Zl,{value:this.data.fieldValue});let Eu=Au.value||"";const _f=vu.getValue(Zl,{charLimit:this.data.maxLen}).charLimit;_f&&Eu.length>_f&&(Eu=Eu.slice(0,_f));let qu=Au.formattedValue||((Du=this.data.textContent)==null?void 0:Du.join(`
`))||null;qu&&this.data.comb&&(qu=qu.replaceAll(/\s+/g,""));const Xl={userValue:Eu,formattedValue:qu,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Ou=document.createElement("textarea"),Ou.textContent=qu??Eu,this.data.doNotScroll&&(Ou.style.overflowY="hidden")):(Ou=document.createElement("input"),Ou.type="text",Ou.setAttribute("value",qu??Eu),this.data.doNotScroll&&(Ou.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Ou.hidden=!0),$a.add(Ou),Ou.setAttribute("data-element-id",Zl),Ou.disabled=this.data.readOnly,Ou.name=this.data.fieldName,Ou.tabIndex=xa,this._setRequired(Ou,this.data.required),_f&&(Ou.maxLength=_f),Ou.addEventListener("input",su=>{vu.setValue(Zl,{value:su.target.value}),this.setPropertyOnSiblings(Ou,"value",su.target.value,"value"),Xl.formattedValue=null}),Ou.addEventListener("resetform",su=>{const cu=this.data.defaultFieldValue??"";Ou.value=Xl.userValue=cu,Xl.formattedValue=null});let du=su=>{const{formattedValue:cu}=Xl;cu!=null&&(su.target.value=cu),su.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Ou.addEventListener("focus",cu=>{if(Xl.focused)return;const{target:hu}=cu;Xl.userValue&&(hu.value=Xl.userValue),Xl.lastCommittedValue=hu.value,Xl.commitKey=1,Xl.focused=!0}),Ou.addEventListener("updatefromsandbox",cu=>{this.showElementAndHideCanvas(cu.target);const hu={value(wu){Xl.userValue=wu.detail.value??"",vu.setValue(Zl,{value:Xl.userValue.toString()}),wu.target.value=Xl.userValue},formattedValue(wu){const{formattedValue:Nu}=wu.detail;Xl.formattedValue=Nu,Nu!=null&&wu.target!==document.activeElement&&(wu.target.value=Nu),vu.setValue(Zl,{formattedValue:Nu})},selRange(wu){wu.target.setSelectionRange(...wu.detail.selRange)},charLimit:wu=>{var zu;const{charLimit:Nu}=wu.detail,{target:tp}=wu;if(Nu===0){tp.removeAttribute("maxLength");return}tp.setAttribute("maxLength",Nu);let Yu=Xl.userValue;!Yu||Yu.length<=Nu||(Yu=Yu.slice(0,Nu),tp.value=Xl.userValue=Yu,vu.setValue(Zl,{value:Yu}),(zu=this.linkService.eventBus)==null||zu.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Zl,name:"Keystroke",value:Yu,willCommit:!0,commitKey:1,selStart:tp.selectionStart,selEnd:tp.selectionEnd}}))}};this._dispatchEventFromSandbox(hu,cu)}),Ou.addEventListener("keydown",cu=>{var Nu;Xl.commitKey=1;let hu=-1;if(cu.key==="Escape"?hu=0:cu.key==="Enter"&&!this.data.multiLine?hu=2:cu.key==="Tab"&&(Xl.commitKey=3),hu===-1)return;const{value:wu}=cu.target;Xl.lastCommittedValue!==wu&&(Xl.lastCommittedValue=wu,Xl.userValue=wu,(Nu=this.linkService.eventBus)==null||Nu.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Zl,name:"Keystroke",value:wu,willCommit:!0,commitKey:hu,selStart:cu.target.selectionStart,selEnd:cu.target.selectionEnd}}))});const su=du;du=null,Ou.addEventListener("blur",cu=>{var wu;if(!Xl.focused||!cu.relatedTarget)return;Xl.focused=!1;const{value:hu}=cu.target;Xl.userValue=hu,Xl.lastCommittedValue!==hu&&((wu=this.linkService.eventBus)==null||wu.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Zl,name:"Keystroke",value:hu,willCommit:!0,commitKey:Xl.commitKey,selStart:cu.target.selectionStart,selEnd:cu.target.selectionEnd}})),su(cu)}),($l=this.data.actions)!=null&&$l.Keystroke&&Ou.addEventListener("beforeinput",cu=>{var dp;Xl.lastCommittedValue=null;const{data:hu,target:wu}=cu,{value:Nu,selectionStart:tp,selectionEnd:Yu}=wu;let zu=tp,rp=Yu;switch(cu.inputType){case"deleteWordBackward":{const Ku=Nu.substring(0,tp).match(/\w*[^\w]*$/);Ku&&(zu-=Ku[0].length);break}case"deleteWordForward":{const Ku=Nu.substring(tp).match(/^[^\w]*\w*/);Ku&&(rp+=Ku[0].length);break}case"deleteContentBackward":tp===Yu&&(zu-=1);break;case"deleteContentForward":tp===Yu&&(rp+=1);break}cu.preventDefault(),(dp=this.linkService.eventBus)==null||dp.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Zl,name:"Keystroke",value:Nu,change:hu||"",willCommit:!1,selStart:zu,selEnd:rp}})}),this._setEventListeners(Ou,Xl,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],cu=>cu.target.value)}if(du&&Ou.addEventListener("blur",du),this.data.comb){const cu=(this.data.rect[2]-this.data.rect[0])/_f;Ou.classList.add("comb"),Ou.style.letterSpacing=`calc(${cu}px * var(--scale-factor) - 1ch)`}}else Ou=document.createElement("div"),Ou.textContent=this.data.fieldValue,Ou.style.verticalAlign="middle",Ou.style.display="table-cell";return this._setTextStyle(Ou),this._setBackgroundColor(Ou),this._setDefaultPropertiesFromJS(Ou),this.container.append(Ou),this.container}}class Tl extends Sl{constructor(vu){super(vu,{isRenderable:!!vu.data.hasOwnCanvas})}}class Dl extends Sl{constructor(vu){super(vu,{isRenderable:vu.renderForms})}render(){const vu=this.annotationStorage,Zl=this.data,Ou=Zl.id;let Du=vu.getValue(Ou,{value:Zl.exportValue===Zl.fieldValue}).value;typeof Du=="string"&&(Du=Du!=="Off",vu.setValue(Ou,{value:Du})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const $l=document.createElement("input");return $a.add($l),$l.setAttribute("data-element-id",Ou),$l.disabled=Zl.readOnly,this._setRequired($l,this.data.required),$l.type="checkbox",$l.name=Zl.fieldName,Du&&$l.setAttribute("checked",!0),$l.setAttribute("exportValue",Zl.exportValue),$l.tabIndex=xa,$l.addEventListener("change",Au=>{const{name:Eu,checked:_f}=Au.target;for(const qu of this._getElementsByName(Eu,Ou)){const Xl=_f&&qu.exportValue===Zl.exportValue;qu.domElement&&(qu.domElement.checked=Xl),vu.setValue(qu.id,{value:Xl})}vu.setValue(Ou,{value:_f})}),$l.addEventListener("resetform",Au=>{const Eu=Zl.defaultFieldValue||"Off";Au.target.checked=Eu===Zl.exportValue}),this.enableScripting&&this.hasJSActions&&($l.addEventListener("updatefromsandbox",Au=>{const Eu={value(_f){_f.target.checked=_f.detail.value!=="Off",vu.setValue(Ou,{value:_f.target.checked})}};this._dispatchEventFromSandbox(Eu,Au)}),this._setEventListeners($l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Au=>Au.target.checked)),this._setBackgroundColor($l),this._setDefaultPropertiesFromJS($l),this.container.append($l),this.container}}class Fl extends Sl{constructor(vu){super(vu,{isRenderable:vu.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const vu=this.annotationStorage,Zl=this.data,Ou=Zl.id;let Du=vu.getValue(Ou,{value:Zl.fieldValue===Zl.buttonValue}).value;typeof Du=="string"&&(Du=Du!==Zl.buttonValue,vu.setValue(Ou,{value:Du}));const $l=document.createElement("input");if($a.add($l),$l.setAttribute("data-element-id",Ou),$l.disabled=Zl.readOnly,this._setRequired($l,this.data.required),$l.type="radio",$l.name=Zl.fieldName,Du&&$l.setAttribute("checked",!0),$l.tabIndex=xa,$l.addEventListener("change",Au=>{const{name:Eu,checked:_f}=Au.target;for(const qu of this._getElementsByName(Eu,Ou))vu.setValue(qu.id,{value:!1});vu.setValue(Ou,{value:_f})}),$l.addEventListener("resetform",Au=>{const Eu=Zl.defaultFieldValue;Au.target.checked=Eu!=null&&Eu===Zl.buttonValue}),this.enableScripting&&this.hasJSActions){const Au=Zl.buttonValue;$l.addEventListener("updatefromsandbox",Eu=>{const _f={value:qu=>{const Xl=Au===qu.detail.value;for(const du of this._getElementsByName(qu.target.name)){const su=Xl&&du.id===Ou;du.domElement&&(du.domElement.checked=su),vu.setValue(du.id,{value:su})}}};this._dispatchEventFromSandbox(_f,Eu)}),this._setEventListeners($l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Eu=>Eu.target.checked)}return this._setBackgroundColor($l),this._setDefaultPropertiesFromJS($l),this.container.append($l),this.container}}class Pl extends _l{constructor(vu){super(vu,{ignoreBorder:vu.data.hasAppearance})}render(){const vu=super.render();vu.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(vu.title=this.data.alternativeText);const Zl=vu.lastChild;return this.enableScripting&&this.hasJSActions&&Zl&&(this._setDefaultPropertiesFromJS(Zl),Zl.addEventListener("updatefromsandbox",Ou=>{this._dispatchEventFromSandbox({},Ou)})),vu}}class Al extends Sl{constructor(vu){super(vu,{isRenderable:vu.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const vu=this.annotationStorage,Zl=this.data.id,Ou=vu.getValue(Zl,{value:this.data.fieldValue}),Du=document.createElement("select");$a.add(Du),Du.setAttribute("data-element-id",Zl),Du.disabled=this.data.readOnly,this._setRequired(Du,this.data.required),Du.name=this.data.fieldName,Du.tabIndex=xa;let $l=this.data.combo&&this.data.options.length>0;this.data.combo||(Du.size=this.data.options.length,this.data.multiSelect&&(Du.multiple=!0)),Du.addEventListener("resetform",Xl=>{const du=this.data.defaultFieldValue;for(const su of Du.options)su.selected=su.value===du});for(const Xl of this.data.options){const du=document.createElement("option");du.textContent=Xl.displayValue,du.value=Xl.exportValue,Ou.value.includes(Xl.exportValue)&&(du.setAttribute("selected",!0),$l=!1),Du.append(du)}let Au=null;if($l){const Xl=document.createElement("option");Xl.value=" ",Xl.setAttribute("hidden",!0),Xl.setAttribute("selected",!0),Du.prepend(Xl),Au=()=>{Xl.remove(),Du.removeEventListener("input",Au),Au=null},Du.addEventListener("input",Au)}const Eu=Xl=>{const du=Xl?"value":"textContent",{options:su,multiple:cu}=Du;return cu?Array.prototype.filter.call(su,hu=>hu.selected).map(hu=>hu[du]):su.selectedIndex===-1?null:su[su.selectedIndex][du]};let _f=Eu(!1);const qu=Xl=>{const du=Xl.target.options;return Array.prototype.map.call(du,su=>({displayValue:su.textContent,exportValue:su.value}))};return this.enableScripting&&this.hasJSActions?(Du.addEventListener("updatefromsandbox",Xl=>{const du={value(su){Au==null||Au();const cu=su.detail.value,hu=new Set(Array.isArray(cu)?cu:[cu]);for(const wu of Du.options)wu.selected=hu.has(wu.value);vu.setValue(Zl,{value:Eu(!0)}),_f=Eu(!1)},multipleSelection(su){Du.multiple=!0},remove(su){const cu=Du.options,hu=su.detail.remove;cu[hu].selected=!1,Du.remove(hu),cu.length>0&&Array.prototype.findIndex.call(cu,Nu=>Nu.selected)===-1&&(cu[0].selected=!0),vu.setValue(Zl,{value:Eu(!0),items:qu(su)}),_f=Eu(!1)},clear(su){for(;Du.length!==0;)Du.remove(0);vu.setValue(Zl,{value:null,items:[]}),_f=Eu(!1)},insert(su){const{index:cu,displayValue:hu,exportValue:wu}=su.detail.insert,Nu=Du.children[cu],tp=document.createElement("option");tp.textContent=hu,tp.value=wu,Nu?Nu.before(tp):Du.append(tp),vu.setValue(Zl,{value:Eu(!0),items:qu(su)}),_f=Eu(!1)},items(su){const{items:cu}=su.detail;for(;Du.length!==0;)Du.remove(0);for(const hu of cu){const{displayValue:wu,exportValue:Nu}=hu,tp=document.createElement("option");tp.textContent=wu,tp.value=Nu,Du.append(tp)}Du.options.length>0&&(Du.options[0].selected=!0),vu.setValue(Zl,{value:Eu(!0),items:qu(su)}),_f=Eu(!1)},indices(su){const cu=new Set(su.detail.indices);for(const hu of su.target.options)hu.selected=cu.has(hu.index);vu.setValue(Zl,{value:Eu(!0)}),_f=Eu(!1)},editable(su){su.target.disabled=!su.detail.editable}};this._dispatchEventFromSandbox(du,Xl)}),Du.addEventListener("input",Xl=>{var su;const du=Eu(!0);vu.setValue(Zl,{value:du}),Xl.preventDefault(),(su=this.linkService.eventBus)==null||su.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Zl,name:"Keystroke",value:_f,changeEx:du,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Du,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Xl=>Xl.target.value)):Du.addEventListener("input",function(Xl){vu.setValue(Zl,{value:Eu(!0)})}),this.data.combo&&this._setTextStyle(Du),this._setBackgroundColor(Du),this._setDefaultPropertiesFromJS(Du),this.container.append(Du),this.container}}class Rl extends wl{constructor(vu){const{data:Zl,elements:Ou}=vu;super(vu,{isRenderable:wl._hasPopupData(Zl)}),this.elements=Ou}render(){this.container.classList.add("popupAnnotation");const vu=new Il({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Zl=[];for(const Ou of this.elements)Ou.popup=vu,Zl.push(Ou.data.id),Ou.addHighlightArea();return this.container.setAttribute("aria-controls",Zl.map(Ou=>`${hs.AnnotationPrefix}${Ou}`).join(",")),this.container}}class Il{constructor({container:vu,color:Zl,elements:Ou,titleObj:Du,modificationDate:$l,contentsObj:Au,richText:Eu,parent:_f,rect:qu,parentRect:Xl,open:du}){_d(this,mp);_d(this,fu,null);_d(this,_u,Uu(this,mp,bv).bind(this));_d(this,bu,Uu(this,mp,X1).bind(this));_d(this,Cu,Uu(this,mp,V1).bind(this));_d(this,Tu,Uu(this,mp,qx).bind(this));_d(this,Fu,null);_d(this,ku,null);_d(this,tu,null);_d(this,eu,null);_d(this,gu,null);_d(this,ru,null);_d(this,Pu,!1);_d(this,Lu,null);_d(this,Ju,null);_d(this,Vu,null);_d(this,Mu,null);_d(this,hp,!1);var cu;ep(this,ku,vu),ep(this,Mu,Du),ep(this,tu,Au),ep(this,Vu,Eu),ep(this,gu,_f),ep(this,Fu,Zl),ep(this,Ju,qu),ep(this,ru,Xl),ep(this,eu,Ou);const su=lo.PDFDateString.toDateObject($l);su&&ep(this,fu,_f.l10n.get("annotation_date_string",{date:su.toLocaleDateString(),time:su.toLocaleTimeString()})),this.trigger=Ou.flatMap(hu=>hu.getElementsToTriggerPopup());for(const hu of this.trigger)hu.addEventListener("click",Wl(this,Tu)),hu.addEventListener("mouseenter",Wl(this,Cu)),hu.addEventListener("mouseleave",Wl(this,bu)),hu.classList.add("popupTriggerArea");for(const hu of Ou)(cu=hu.container)==null||cu.addEventListener("keydown",Wl(this,_u));Wl(this,ku).hidden=!0,du&&Uu(this,mp,qx).call(this)}render(){if(Wl(this,Lu))return;const{page:{view:vu},viewport:{rawDims:{pageWidth:Zl,pageHeight:Ou,pageX:Du,pageY:$l}}}=Wl(this,gu),Au=ep(this,Lu,document.createElement("div"));if(Au.className="popup",Wl(this,Fu)){const zu=Au.style.outlineColor=hs.Util.makeHexColor(...Wl(this,Fu));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Au.style.backgroundColor=`color-mix(in srgb, ${zu} 30%, white)`:Au.style.backgroundColor=hs.Util.makeHexColor(...Wl(this,Fu).map(dp=>Math.floor(.7*(255-dp)+dp)))}const Eu=document.createElement("span");Eu.className="header";const _f=document.createElement("h1");if(Eu.append(_f),{dir:_f.dir,str:_f.textContent}=Wl(this,Mu),Au.append(Eu),Wl(this,fu)){const zu=document.createElement("span");zu.classList.add("popupDate"),Wl(this,fu).then(rp=>{zu.textContent=rp}),Eu.append(zu)}const qu=Wl(this,tu),Xl=Wl(this,Vu);if(Xl!=null&&Xl.str&&(!(qu!=null&&qu.str)||qu.str===Xl.str))ba.XfaLayer.render({xfaHtml:Xl.html,intent:"richText",div:Au}),Au.lastChild.classList.add("richText","popupContent");else{const zu=this._formatContents(qu);Au.append(zu)}let du=!!Wl(this,ru),su=du?Wl(this,ru):Wl(this,Ju);for(const zu of Wl(this,eu))if(!su||hs.Util.intersect(zu.data.rect,su)!==null){su=zu.data.rect,du=!0;break}const cu=hs.Util.normalizeRect([su[0],vu[3]-su[1]+vu[1],su[2],vu[3]-su[3]+vu[1]]),wu=du?su[2]-su[0]+5:0,Nu=cu[0]+wu,tp=cu[1],{style:Yu}=Wl(this,ku);Yu.left=`${100*(Nu-Du)/Zl}%`,Yu.top=`${100*(tp-$l)/Ou}%`,Wl(this,ku).append(Au)}_formatContents({str:vu,dir:Zl}){const Ou=document.createElement("p");Ou.classList.add("popupContent"),Ou.dir=Zl;const Du=vu.split(/(?:\r\n?|\n)/);for(let $l=0,Au=Du.length;$l<Au;++$l){const Eu=Du[$l];Ou.append(document.createTextNode(Eu)),$l<Au-1&&Ou.append(document.createElement("br"))}return Ou}forceHide(){ep(this,hp,this.isVisible),Wl(this,hp)&&(Wl(this,ku).hidden=!0)}maybeShow(){Wl(this,hp)&&(ep(this,hp,!1),Wl(this,ku).hidden=!1)}get isVisible(){return Wl(this,ku).hidden===!1}}fu=new WeakMap,_u=new WeakMap,bu=new WeakMap,Cu=new WeakMap,Tu=new WeakMap,Fu=new WeakMap,ku=new WeakMap,tu=new WeakMap,eu=new WeakMap,gu=new WeakMap,ru=new WeakMap,Pu=new WeakMap,Lu=new WeakMap,Ju=new WeakMap,Vu=new WeakMap,Mu=new WeakMap,hp=new WeakMap,mp=new WeakSet,bv=function(vu){vu.altKey||vu.shiftKey||vu.ctrlKey||vu.metaKey||(vu.key==="Enter"||vu.key==="Escape"&&Wl(this,Pu))&&Uu(this,mp,qx).call(this)},qx=function(){ep(this,Pu,!Wl(this,Pu)),Wl(this,Pu)?(Uu(this,mp,V1).call(this),Wl(this,ku).addEventListener("click",Wl(this,Tu)),Wl(this,ku).addEventListener("keydown",Wl(this,_u))):(Uu(this,mp,X1).call(this),Wl(this,ku).removeEventListener("click",Wl(this,Tu)),Wl(this,ku).removeEventListener("keydown",Wl(this,_u)))},V1=function(){Wl(this,Lu)||this.render(),this.isVisible?Wl(this,Pu)&&Wl(this,ku).classList.add("focused"):(Wl(this,ku).hidden=!1,Wl(this,ku).style.zIndex=parseInt(Wl(this,ku).style.zIndex)+1e3)},X1=function(){Wl(this,ku).classList.remove("focused"),!(Wl(this,Pu)||!this.isVisible)&&(Wl(this,ku).hidden=!0,Wl(this,ku).style.zIndex=parseInt(Wl(this,ku).style.zIndex)-1e3)};class Bl extends wl{constructor(vu){super(vu,{isRenderable:!0,ignoreBorder:!0}),this.textContent=vu.data.textContent,this.textPosition=vu.data.textPosition,this.annotationEditorType=hs.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const vu=document.createElement("div");vu.classList.add("annotationTextContent"),vu.setAttribute("role","comment");for(const Zl of this.textContent){const Ou=document.createElement("span");Ou.textContent=Zl,vu.append(Ou)}this.container.append(vu)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}is.FreeTextAnnotationElement=Bl;class Ol extends wl{constructor(Zl){super(Zl,{isRenderable:!0,ignoreBorder:!0});_d(this,Ip,null)}render(){this.container.classList.add("lineAnnotation");const Zl=this.data,{width:Ou,height:Du}=xl(Zl.rect),$l=this.svgFactory.create(Ou,Du,!0),Au=ep(this,Ip,this.svgFactory.createElement("svg:line"));return Au.setAttribute("x1",Zl.rect[2]-Zl.lineCoordinates[0]),Au.setAttribute("y1",Zl.rect[3]-Zl.lineCoordinates[1]),Au.setAttribute("x2",Zl.rect[2]-Zl.lineCoordinates[2]),Au.setAttribute("y2",Zl.rect[3]-Zl.lineCoordinates[3]),Au.setAttribute("stroke-width",Zl.borderStyle.width||1),Au.setAttribute("stroke","transparent"),Au.setAttribute("fill","transparent"),$l.append(Au),this.container.append($l),!Zl.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Wl(this,Ip)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ip=new WeakMap;class zl extends wl{constructor(Zl){super(Zl,{isRenderable:!0,ignoreBorder:!0});_d(this,Hp,null)}render(){this.container.classList.add("squareAnnotation");const Zl=this.data,{width:Ou,height:Du}=xl(Zl.rect),$l=this.svgFactory.create(Ou,Du,!0),Au=Zl.borderStyle.width,Eu=ep(this,Hp,this.svgFactory.createElement("svg:rect"));return Eu.setAttribute("x",Au/2),Eu.setAttribute("y",Au/2),Eu.setAttribute("width",Ou-Au),Eu.setAttribute("height",Du-Au),Eu.setAttribute("stroke-width",Au||1),Eu.setAttribute("stroke","transparent"),Eu.setAttribute("fill","transparent"),$l.append(Eu),this.container.append($l),!Zl.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Wl(this,Hp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hp=new WeakMap;class Hl extends wl{constructor(Zl){super(Zl,{isRenderable:!0,ignoreBorder:!0});_d(this,qp,null)}render(){this.container.classList.add("circleAnnotation");const Zl=this.data,{width:Ou,height:Du}=xl(Zl.rect),$l=this.svgFactory.create(Ou,Du,!0),Au=Zl.borderStyle.width,Eu=ep(this,qp,this.svgFactory.createElement("svg:ellipse"));return Eu.setAttribute("cx",Ou/2),Eu.setAttribute("cy",Du/2),Eu.setAttribute("rx",Ou/2-Au/2),Eu.setAttribute("ry",Du/2-Au/2),Eu.setAttribute("stroke-width",Au||1),Eu.setAttribute("stroke","transparent"),Eu.setAttribute("fill","transparent"),$l.append(Eu),this.container.append($l),!Zl.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Wl(this,qp)}addHighlightArea(){this.container.classList.add("highlightArea")}}qp=new WeakMap;class ou extends wl{constructor(Zl){super(Zl,{isRenderable:!0,ignoreBorder:!0});_d(this,lp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Zl=this.data,{width:Ou,height:Du}=xl(Zl.rect),$l=this.svgFactory.create(Ou,Du,!0);let Au=[];for(const _f of Zl.vertices){const qu=_f.x-Zl.rect[0],Xl=Zl.rect[3]-_f.y;Au.push(qu+","+Xl)}Au=Au.join(" ");const Eu=ep(this,lp,this.svgFactory.createElement(this.svgElementName));return Eu.setAttribute("points",Au),Eu.setAttribute("stroke-width",Zl.borderStyle.width||1),Eu.setAttribute("stroke","transparent"),Eu.setAttribute("fill","transparent"),$l.append(Eu),this.container.append($l),!Zl.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Wl(this,lp)}addHighlightArea(){this.container.classList.add("highlightArea")}}lp=new WeakMap;class au extends ou{constructor(vu){super(vu),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class _c extends wl{constructor(vu){super(vu,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class uu extends wl{constructor(Zl){super(Zl,{isRenderable:!0,ignoreBorder:!0});_d(this,$u,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=hs.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Zl=this.data,{width:Ou,height:Du}=xl(Zl.rect),$l=this.svgFactory.create(Ou,Du,!0);for(const Au of Zl.inkLists){let Eu=[];for(const qu of Au){const Xl=qu.x-Zl.rect[0],du=Zl.rect[3]-qu.y;Eu.push(`${Xl},${du}`)}Eu=Eu.join(" ");const _f=this.svgFactory.createElement(this.svgElementName);Wl(this,$u).push(_f),_f.setAttribute("points",Eu),_f.setAttribute("stroke-width",Zl.borderStyle.width||1),_f.setAttribute("stroke","transparent"),_f.setAttribute("fill","transparent"),!Zl.popupRef&&this.hasPopupData&&this._createPopup(),$l.append(_f)}return this.container.append($l),this.container}getElementsToTriggerPopup(){return Wl(this,$u)}addHighlightArea(){this.container.classList.add("highlightArea")}}$u=new WeakMap,is.InkAnnotationElement=uu;class lu extends wl{constructor(vu){super(vu,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Kl extends wl{constructor(vu){super(vu,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class xu extends wl{constructor(vu){super(vu,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pu extends wl{constructor(vu){super(vu,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ll extends wl{constructor(vu){super(vu,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}is.StampAnnotationElement=Ll;class Nl extends wl{constructor(Zl){var $l;super(Zl,{isRenderable:!0});_d(this,Ap);_d(this,Zu,null);const{filename:Ou,content:Du}=this.data.file;this.filename=(0,lo.getFilenameFromUrl)(Ou,!0),this.content=Du,($l=this.linkService.eventBus)==null||$l.dispatch("fileattachmentannotation",{source:this,filename:Ou,content:Du})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Zl,data:Ou}=this;let Du;Ou.hasAppearance||Ou.fillAlpha===0?Du=document.createElement("div"):(Du=document.createElement("img"),Du.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Ou.name)?"paperclip":"pushpin"}.svg`,Ou.fillAlpha&&Ou.fillAlpha<1&&(Du.style=`filter: opacity(${Math.round(Ou.fillAlpha*100)}%);`)),Du.addEventListener("dblclick",Uu(this,Ap,G1).bind(this)),ep(this,Zu,Du);const{isMac:$l}=hs.FeatureTest.platform;return Zl.addEventListener("keydown",Au=>{Au.key==="Enter"&&($l?Au.metaKey:Au.ctrlKey)&&Uu(this,Ap,G1).call(this)}),!Ou.popupRef&&this.hasPopupData?this._createPopup():Du.classList.add("popupTriggerArea"),Zl.append(Du),Zl}getElementsToTriggerPopup(){return Wl(this,Zu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zu=new WeakMap,Ap=new WeakSet,G1=function(){var Zl;(Zl=this.downloadManager)==null||Zl.openOrDownloadData(this.container,this.content,this.filename)};class Ml{constructor({div:vu,accessibilityManager:Zl,annotationCanvasMap:Ou,l10n:Du,page:$l,viewport:Au}){_d(this,up);_d(this,Vp,null);_d(this,Ru,null);_d(this,Qu,new Map);this.div=vu,ep(this,Vp,Zl),ep(this,Ru,Ou),this.l10n=Du,this.page=$l,this.viewport=Au,this.zIndex=0,this.l10n||(this.l10n=ga.NullL10n)}async render(vu){const{annotations:Zl}=vu,Ou=this.div;(0,lo.setLayerDimensions)(Ou,this.viewport);const Du=new Map,$l={data:null,layer:Ou,linkService:vu.linkService,downloadManager:vu.downloadManager,imageResourcesPath:vu.imageResourcesPath||"",renderForms:vu.renderForms!==!1,svgFactory:new lo.DOMSVGFactory,annotationStorage:vu.annotationStorage||new co.AnnotationStorage,enableScripting:vu.enableScripting===!0,hasJSActions:vu.hasJSActions,fieldObjects:vu.fieldObjects,parent:this,elements:null};for(const Au of Zl){if(Au.noHTML)continue;const Eu=Au.annotationType===hs.AnnotationType.POPUP;if(Eu){const Xl=Du.get(Au.id);if(!Xl)continue;$l.elements=Xl}else{const{width:Xl,height:du}=xl(Au.rect);if(Xl<=0||du<=0)continue}$l.data=Au;const _f=yl.create($l);if(!_f.isRenderable)continue;if(!Eu&&Au.popupRef){const Xl=Du.get(Au.popupRef);Xl?Xl.push(_f):Du.set(Au.popupRef,[_f])}_f.annotationEditorType>0&&Wl(this,Qu).set(_f.data.id,_f);const qu=_f.render();Au.hidden&&(qu.style.visibility="hidden"),Uu(this,up,_v).call(this,qu,Au.id)}Uu(this,up,$1).call(this),await this.l10n.translate(Ou)}update({viewport:vu}){const Zl=this.div;this.viewport=vu,(0,lo.setLayerDimensions)(Zl,{rotation:vu.rotation}),Uu(this,up,$1).call(this),Zl.hidden=!1}getEditableAnnotations(){return Array.from(Wl(this,Qu).values())}getEditableAnnotation(vu){return Wl(this,Qu).get(vu)}}Vp=new WeakMap,Ru=new WeakMap,Qu=new WeakMap,up=new WeakSet,_v=function(vu,Zl){var Du;const Ou=vu.firstChild||vu;Ou.id=`${hs.AnnotationPrefix}${Zl}`,this.div.append(vu),(Du=Wl(this,Vp))==null||Du.moveElementInDOM(this.div,vu,Ou,!1)},$1=function(){if(!Wl(this,Ru))return;const vu=this.div;for(const[Zl,Ou]of Wl(this,Ru)){const Du=vu.querySelector(`[data-annotation-id="${Zl}"]`);if(!Du)continue;const{firstChild:$l}=Du;$l?$l.nodeName==="CANVAS"?$l.replaceWith(Ou):$l.before(Ou):Du.append(Ou)}Wl(this,Ru).clear()},is.AnnotationLayer=Ml},(cs,is)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.ColorConverters=void 0;function us(co){return Math.floor(Math.max(0,Math.min(1,co))*255).toString(16).padStart(2,"0")}function hs(co){return Math.max(0,Math.min(255,255*co))}class lo{static CMYK_G([uo,ga,ba,xa]){return["G",1-Math.min(1,.3*uo+.59*ba+.11*ga+xa)]}static G_CMYK([uo]){return["CMYK",0,0,0,1-uo]}static G_RGB([uo]){return["RGB",uo,uo,uo]}static G_rgb([uo]){return uo=hs(uo),[uo,uo,uo]}static G_HTML([uo]){const ga=us(uo);return`#${ga}${ga}${ga}`}static RGB_G([uo,ga,ba]){return["G",.3*uo+.59*ga+.11*ba]}static RGB_rgb(uo){return uo.map(hs)}static RGB_HTML(uo){return`#${uo.map(us).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([uo,ga,ba,xa]){return["RGB",1-Math.min(1,uo+xa),1-Math.min(1,ba+xa),1-Math.min(1,ga+xa)]}static CMYK_rgb([uo,ga,ba,xa]){return[hs(1-Math.min(1,uo+xa)),hs(1-Math.min(1,ba+xa)),hs(1-Math.min(1,ga+xa))]}static CMYK_HTML(uo){const ga=this.CMYK_RGB(uo).slice(1);return this.RGB_HTML(ga)}static RGB_CMYK([uo,ga,ba]){const xa=1-uo,_a=1-ga,$a=1-ba,xl=Math.min(xa,_a,$a);return["CMYK",xa,_a,$a,xl]}}is.ColorConverters=lo},(cs,is)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.NullL10n=void 0,is.getL10nFallback=hs;const us={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};us.print_progress_percent="{{progress}}%";function hs(uo,ga){switch(uo){case"find_match_count":uo=`find_match_count[${ga.total===1?"one":"other"}]`;break;case"find_match_count_limit":uo=`find_match_count_limit[${ga.limit===1?"one":"other"}]`;break}return us[uo]||""}function lo(uo,ga){return ga?uo.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(ba,xa)=>xa in ga?ga[xa]:"{{"+xa+"}}"):uo}const co={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(uo,ga=null,ba=hs(uo,ga)){return lo(ba,ga)},async translate(uo){}};is.NullL10n=co},(cs,is,us)=>{Object.defineProperty(is,"__esModule",{value:!0}),is.XfaLayer=void 0;var hs=us(25);class lo{static setupStorage(uo,ga,ba,xa,_a){const $a=xa.getValue(ga,{value:null});switch(ba.name){case"textarea":if($a.value!==null&&(uo.textContent=$a.value),_a==="print")break;uo.addEventListener("input",xl=>{xa.setValue(ga,{value:xl.target.value})});break;case"input":if(ba.attributes.type==="radio"||ba.attributes.type==="checkbox"){if($a.value===ba.attributes.xfaOn?uo.setAttribute("checked",!0):$a.value===ba.attributes.xfaOff&&uo.removeAttribute("checked"),_a==="print")break;uo.addEventListener("change",xl=>{xa.setValue(ga,{value:xl.target.checked?xl.target.getAttribute("xfaOn"):xl.target.getAttribute("xfaOff")})})}else{if($a.value!==null&&uo.setAttribute("value",$a.value),_a==="print")break;uo.addEventListener("input",xl=>{xa.setValue(ga,{value:xl.target.value})})}break;case"select":if($a.value!==null){uo.setAttribute("value",$a.value);for(const xl of ba.children)xl.attributes.value===$a.value?xl.attributes.selected=!0:xl.attributes.hasOwnProperty("selected")&&delete xl.attributes.selected}uo.addEventListener("input",xl=>{const yl=xl.target.options,wl=yl.selectedIndex===-1?"":yl[yl.selectedIndex].value;xa.setValue(ga,{value:wl})});break}}static setAttributes({html:uo,element:ga,storage:ba=null,intent:xa,linkService:_a}){const{attributes:$a}=ga,xl=uo instanceof HTMLAnchorElement;$a.type==="radio"&&($a.name=`${$a.name}-${xa}`);for(const[yl,wl]of Object.entries($a))if(wl!=null)switch(yl){case"class":wl.length&&uo.setAttribute(yl,wl.join(" "));break;case"dataId":break;case"id":uo.setAttribute("data-element-id",wl);break;case"style":Object.assign(uo.style,wl);break;case"textContent":uo.textContent=wl;break;default:(!xl||yl!=="href"&&yl!=="newWindow")&&uo.setAttribute(yl,wl)}xl&&_a.addLinkAttributes(uo,$a.href,$a.newWindow),ba&&$a.dataId&&this.setupStorage(uo,$a.dataId,ga,ba)}static render(uo){var _l;const ga=uo.annotationStorage,ba=uo.linkService,xa=uo.xfaHtml,_a=uo.intent||"display",$a=document.createElement(xa.name);xa.attributes&&this.setAttributes({html:$a,element:xa,intent:_a,linkService:ba});const xl=[[xa,-1,$a]],yl=uo.div;if(yl.append($a),uo.viewport){const El=`matrix(${uo.viewport.transform.join(",")})`;yl.style.transform=El}_a!=="richText"&&yl.setAttribute("class","xfaLayer xfaFont");const wl=[];for(;xl.length>0;){const[El,Sl,Cl]=xl.at(-1);if(Sl+1===El.children.length){xl.pop();continue}const Tl=El.children[++xl.at(-1)[1]];if(Tl===null)continue;const{name:Dl}=Tl;if(Dl==="#text"){const Pl=document.createTextNode(Tl.value);wl.push(Pl),Cl.append(Pl);continue}const Fl=(_l=Tl==null?void 0:Tl.attributes)!=null&&_l.xmlns?document.createElementNS(Tl.attributes.xmlns,Dl):document.createElement(Dl);if(Cl.append(Fl),Tl.attributes&&this.setAttributes({html:Fl,element:Tl,storage:ga,intent:_a,linkService:ba}),Tl.children&&Tl.children.length>0)xl.push([Tl,-1,Fl]);else if(Tl.value){const Pl=document.createTextNode(Tl.value);hs.XfaText.shouldBuildText(Dl)&&wl.push(Pl),Fl.append(Pl)}}for(const El of yl.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))El.setAttribute("readOnly",!0);return{textDivs:wl}}static update(uo){const ga=`matrix(${uo.viewport.transform.join(",")})`;uo.div.style.transform=ga,uo.div.hidden=!1}}is.XfaLayer=lo},(cs,is,us)=>{var xa,_a,$a,xl,yl,wl,_l,El,Sl,Cl,Tl,Dl,Fl,Pl,Al,wv,Sv,Ev,Cv,Y1,Tv,K1,Av,Fv,kv,Rv,Dv,gm,q1,Zx,Jx,Qm,Z1,Qx,Ql,Pv,J1,Iv,Ov,Q1,e1,ex;Object.defineProperty(is,"__esModule",{value:!0}),is.InkEditor=void 0;var hs=us(1),lo=us(4),co=us(29),uo=us(6),ga=us(5);const Fu=class Fu extends lo.AnnotationEditor{constructor(eu){super({...eu,name:"inkEditor"});_d(this,Al);_d(this,xa,0);_d(this,_a,0);_d(this,$a,this.canvasPointermove.bind(this));_d(this,xl,this.canvasPointerleave.bind(this));_d(this,yl,this.canvasPointerup.bind(this));_d(this,wl,this.canvasPointerdown.bind(this));_d(this,_l,new Path2D);_d(this,El,!1);_d(this,Sl,!1);_d(this,Cl,!1);_d(this,Tl,null);_d(this,Dl,0);_d(this,Fl,0);_d(this,Pl,null);this.color=eu.color||null,this.thickness=eu.thickness||null,this.opacity=eu.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(eu){lo.AnnotationEditor.initialize(eu,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(eu,gu){switch(eu){case hs.AnnotationEditorParamsType.INK_THICKNESS:Fu._defaultThickness=gu;break;case hs.AnnotationEditorParamsType.INK_COLOR:Fu._defaultColor=gu;break;case hs.AnnotationEditorParamsType.INK_OPACITY:Fu._defaultOpacity=gu/100;break}}updateParams(eu,gu){switch(eu){case hs.AnnotationEditorParamsType.INK_THICKNESS:Uu(this,Al,wv).call(this,gu);break;case hs.AnnotationEditorParamsType.INK_COLOR:Uu(this,Al,Sv).call(this,gu);break;case hs.AnnotationEditorParamsType.INK_OPACITY:Uu(this,Al,Ev).call(this,gu);break}}static get defaultPropertiesToUpdate(){return[[hs.AnnotationEditorParamsType.INK_THICKNESS,Fu._defaultThickness],[hs.AnnotationEditorParamsType.INK_COLOR,Fu._defaultColor||lo.AnnotationEditor._defaultLineColor],[hs.AnnotationEditorParamsType.INK_OPACITY,Math.round(Fu._defaultOpacity*100)]]}get propertiesToUpdate(){return[[hs.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Fu._defaultThickness],[hs.AnnotationEditorParamsType.INK_COLOR,this.color||Fu._defaultColor||lo.AnnotationEditor._defaultLineColor],[hs.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Fu._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Uu(this,Al,Zx).call(this),Uu(this,Al,Jx).call(this)),this.isAttachedToDOM||(this.parent.add(this),Uu(this,Al,Qm).call(this)),Uu(this,Al,ex).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,Wl(this,Tl).disconnect(),ep(this,Tl,null),super.remove())}setParent(eu){!this.parent&&eu?this._uiManager.removeShouldRescale(this):this.parent&&eu===null&&this._uiManager.addShouldRescale(this),super.setParent(eu)}onScaleChanging(){const[eu,gu]=this.parentDimensions,ru=this.width*eu,Pu=this.height*gu;this.setDimensions(ru,Pu)}enableEditMode(){Wl(this,El)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",Wl(this,wl)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",Wl(this,wl)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){Wl(this,El)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ep(this,El,!0),this.div.classList.add("disabled"),Uu(this,Al,ex).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(eu){this._focusEventsAllowed&&(super.focusin(eu),this.enableEditMode())}canvasPointerdown(eu){eu.button!==0||!this.isInEditMode()||Wl(this,El)||(this.setInForeground(),eu.preventDefault(),eu.type!=="mouse"&&this.div.focus(),Uu(this,Al,Tv).call(this,eu.offsetX,eu.offsetY))}canvasPointermove(eu){eu.preventDefault(),Uu(this,Al,K1).call(this,eu.offsetX,eu.offsetY)}canvasPointerup(eu){eu.preventDefault(),Uu(this,Al,q1).call(this,eu)}canvasPointerleave(eu){Uu(this,Al,q1).call(this,eu)}get isResizable(){return!this.isEmpty()&&Wl(this,El)}render(){if(this.div)return this.div;let eu,gu;this.width&&(eu=this.x,gu=this.y),super.render(),lo.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Vu=>{var Mu;return(Mu=this.div)==null?void 0:Mu.setAttribute("aria-label",Vu)});const[ru,Pu,Lu,Ju]=Uu(this,Al,Cv).call(this);if(this.setAt(ru,Pu,0,0),this.setDims(Lu,Ju),Uu(this,Al,Zx).call(this),this.width){const[Vu,Mu]=this.parentDimensions;this.setAspectRatio(this.width*Vu,this.height*Mu),this.setAt(eu*Vu,gu*Mu,this.width*Vu,this.height*Mu),ep(this,Cl,!0),Uu(this,Al,Qm).call(this),this.setDims(this.width*Vu,this.height*Mu),Uu(this,Al,gm).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Uu(this,Al,Jx).call(this),this.div}setDimensions(eu,gu){const ru=Math.round(eu),Pu=Math.round(gu);if(Wl(this,Dl)===ru&&Wl(this,Fl)===Pu)return;ep(this,Dl,ru),ep(this,Fl,Pu),this.canvas.style.visibility="hidden";const[Lu,Ju]=this.parentDimensions;this.width=eu/Lu,this.height=gu/Ju,this.fixAndSetPosition(),Wl(this,El)&&Uu(this,Al,Z1).call(this,eu,gu),Uu(this,Al,Qm).call(this),Uu(this,Al,gm).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(eu,gu,ru){var Ip,Hp,qp;if(eu instanceof co.InkAnnotationElement)return null;const Pu=super.deserialize(eu,gu,ru);Pu.thickness=eu.thickness,Pu.color=hs.Util.makeHexColor(...eu.color),Pu.opacity=eu.opacity;const[Lu,Ju]=Pu.pageDimensions,Vu=Pu.width*Lu,Mu=Pu.height*Ju,hp=Pu.parentScale,mp=eu.thickness/2;ep(Pu,El,!0),ep(Pu,Dl,Math.round(Vu)),ep(Pu,Fl,Math.round(Mu));const{paths:Rp,rect:Lp,rotation:Bp}=eu;for(let{bezier:lp}of Rp){lp=Uu(Ip=Fu,Ql,Iv).call(Ip,lp,Lp,Bp);const $u=[];Pu.paths.push($u);let Zu=hp*(lp[0]-mp),Ap=hp*(lp[1]-mp);for(let Vp=2,Ru=lp.length;Vp<Ru;Vp+=6){const Qu=hp*(lp[Vp]-mp),up=hp*(lp[Vp+1]-mp),Ep=hp*(lp[Vp+2]-mp),Cp=hp*(lp[Vp+3]-mp),Sp=hp*(lp[Vp+4]-mp),vu=hp*(lp[Vp+5]-mp);$u.push([[Zu,Ap],[Qu,up],[Ep,Cp],[Sp,vu]]),Zu=Sp,Ap=vu}const Np=Uu(this,Ql,Pv).call(this,$u);Pu.bezierPath2D.push(Np)}const Tp=Uu(Hp=Pu,Al,Q1).call(Hp);return ep(Pu,_a,Math.max(lo.AnnotationEditor.MIN_SIZE,Tp[2]-Tp[0])),ep(Pu,xa,Math.max(lo.AnnotationEditor.MIN_SIZE,Tp[3]-Tp[1])),Uu(qp=Pu,Al,Z1).call(qp,Vu,Mu),Pu}serialize(){if(this.isEmpty())return null;const eu=this.getRect(0,0),gu=lo.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:hs.AnnotationEditorType.INK,color:gu,thickness:this.thickness,opacity:this.opacity,paths:Uu(this,Al,Ov).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,eu),pageIndex:this.pageIndex,rect:eu,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};xa=new WeakMap,_a=new WeakMap,$a=new WeakMap,xl=new WeakMap,yl=new WeakMap,wl=new WeakMap,_l=new WeakMap,El=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,Dl=new WeakMap,Fl=new WeakMap,Pl=new WeakMap,Al=new WeakSet,wv=function(eu){const gu=this.thickness;this.addCommands({cmd:()=>{this.thickness=eu,Uu(this,Al,ex).call(this)},undo:()=>{this.thickness=gu,Uu(this,Al,ex).call(this)},mustExec:!0,type:hs.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Sv=function(eu){const gu=this.color;this.addCommands({cmd:()=>{this.color=eu,Uu(this,Al,gm).call(this)},undo:()=>{this.color=gu,Uu(this,Al,gm).call(this)},mustExec:!0,type:hs.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ev=function(eu){eu/=100;const gu=this.opacity;this.addCommands({cmd:()=>{this.opacity=eu,Uu(this,Al,gm).call(this)},undo:()=>{this.opacity=gu,Uu(this,Al,gm).call(this)},mustExec:!0,type:hs.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Cv=function(){const{parentRotation:eu,parentDimensions:[gu,ru]}=this;switch(eu){case 90:return[0,ru,ru,gu];case 180:return[gu,ru,gu,ru];case 270:return[gu,0,ru,gu];default:return[0,0,gu,ru]}},Y1=function(){const{ctx:eu,color:gu,opacity:ru,thickness:Pu,parentScale:Lu,scaleFactor:Ju}=this;eu.lineWidth=Pu*Lu/Ju,eu.lineCap="round",eu.lineJoin="round",eu.miterLimit=10,eu.strokeStyle=`${gu}${(0,ga.opacityToHex)(ru)}`},Tv=function(eu,gu){this.canvas.addEventListener("contextmenu",uo.noContextMenu),this.canvas.addEventListener("pointerleave",Wl(this,xl)),this.canvas.addEventListener("pointermove",Wl(this,$a)),this.canvas.addEventListener("pointerup",Wl(this,yl)),this.canvas.removeEventListener("pointerdown",Wl(this,wl)),this.isEditing=!0,Wl(this,Cl)||(ep(this,Cl,!0),Uu(this,Al,Qm).call(this),this.thickness||(this.thickness=Fu._defaultThickness),this.color||(this.color=Fu._defaultColor||lo.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Fu._defaultOpacity)),this.currentPath.push([eu,gu]),ep(this,Sl,!1),Uu(this,Al,Y1).call(this),ep(this,Pl,()=>{Uu(this,Al,kv).call(this),Wl(this,Pl)&&window.requestAnimationFrame(Wl(this,Pl))}),window.requestAnimationFrame(Wl(this,Pl))},K1=function(eu,gu){const[ru,Pu]=this.currentPath.at(-1);if(this.currentPath.length>1&&eu===ru&&gu===Pu)return;const Lu=this.currentPath;let Ju=Wl(this,_l);if(Lu.push([eu,gu]),ep(this,Sl,!0),Lu.length<=2){Ju.moveTo(...Lu[0]),Ju.lineTo(eu,gu);return}Lu.length===3&&(ep(this,_l,Ju=new Path2D),Ju.moveTo(...Lu[0])),Uu(this,Al,Rv).call(this,Ju,...Lu.at(-3),...Lu.at(-2),eu,gu)},Av=function(){if(this.currentPath.length===0)return;const eu=this.currentPath.at(-1);Wl(this,_l).lineTo(...eu)},Fv=function(eu,gu){ep(this,Pl,null),eu=Math.min(Math.max(eu,0),this.canvas.width),gu=Math.min(Math.max(gu,0),this.canvas.height),Uu(this,Al,K1).call(this,eu,gu),Uu(this,Al,Av).call(this);let ru;if(this.currentPath.length!==1)ru=Uu(this,Al,Dv).call(this);else{const Mu=[eu,gu];ru=[[Mu,Mu.slice(),Mu.slice(),Mu]]}const Pu=Wl(this,_l),Lu=this.currentPath;this.currentPath=[],ep(this,_l,new Path2D);const Ju=()=>{this.allRawPaths.push(Lu),this.paths.push(ru),this.bezierPath2D.push(Pu),this.rebuild()},Vu=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Uu(this,Al,Zx).call(this),Uu(this,Al,Jx).call(this)),Uu(this,Al,ex).call(this))};this.addCommands({cmd:Ju,undo:Vu,mustExec:!0})},kv=function(){if(!Wl(this,Sl))return;ep(this,Sl,!1);const eu=Math.ceil(this.thickness*this.parentScale),gu=this.currentPath.slice(-3),ru=gu.map(Ju=>Ju[0]),Pu=gu.map(Ju=>Ju[1]);Math.min(...ru)-eu,Math.max(...ru)+eu,Math.min(...Pu)-eu,Math.max(...Pu)+eu;const{ctx:Lu}=this;Lu.save(),Lu.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ju of this.bezierPath2D)Lu.stroke(Ju);Lu.stroke(Wl(this,_l)),Lu.restore()},Rv=function(eu,gu,ru,Pu,Lu,Ju,Vu){const Mu=(gu+Pu)/2,hp=(ru+Lu)/2,mp=(Pu+Ju)/2,Rp=(Lu+Vu)/2;eu.bezierCurveTo(Mu+2*(Pu-Mu)/3,hp+2*(Lu-hp)/3,mp+2*(Pu-mp)/3,Rp+2*(Lu-Rp)/3,mp,Rp)},Dv=function(){const eu=this.currentPath;if(eu.length<=2)return[[eu[0],eu[0],eu.at(-1),eu.at(-1)]];const gu=[];let ru,[Pu,Lu]=eu[0];for(ru=1;ru<eu.length-2;ru++){const[Lp,Bp]=eu[ru],[Tp,Ip]=eu[ru+1],Hp=(Lp+Tp)/2,qp=(Bp+Ip)/2,lp=[Pu+2*(Lp-Pu)/3,Lu+2*(Bp-Lu)/3],$u=[Hp+2*(Lp-Hp)/3,qp+2*(Bp-qp)/3];gu.push([[Pu,Lu],lp,$u,[Hp,qp]]),[Pu,Lu]=[Hp,qp]}const[Ju,Vu]=eu[ru],[Mu,hp]=eu[ru+1],mp=[Pu+2*(Ju-Pu)/3,Lu+2*(Vu-Lu)/3],Rp=[Mu+2*(Ju-Mu)/3,hp+2*(Vu-hp)/3];return gu.push([[Pu,Lu],mp,Rp,[Mu,hp]]),gu},gm=function(){if(this.isEmpty()){Uu(this,Al,Qx).call(this);return}Uu(this,Al,Y1).call(this);const{canvas:eu,ctx:gu}=this;gu.setTransform(1,0,0,1,0,0),gu.clearRect(0,0,eu.width,eu.height),Uu(this,Al,Qx).call(this);for(const ru of this.bezierPath2D)gu.stroke(ru)},q1=function(eu){this.canvas.removeEventListener("pointerleave",Wl(this,xl)),this.canvas.removeEventListener("pointermove",Wl(this,$a)),this.canvas.removeEventListener("pointerup",Wl(this,yl)),this.canvas.addEventListener("pointerdown",Wl(this,wl)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",uo.noContextMenu)},10),Uu(this,Al,Fv).call(this,eu.offsetX,eu.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Zx=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",lo.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(eu=>{var gu;return(gu=this.canvas)==null?void 0:gu.setAttribute("aria-label",eu)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Jx=function(){ep(this,Tl,new ResizeObserver(eu=>{const gu=eu[0].contentRect;gu.width&&gu.height&&this.setDimensions(gu.width,gu.height)})),Wl(this,Tl).observe(this.div)},Qm=function(){if(!Wl(this,Cl))return;const[eu,gu]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*eu),this.canvas.height=Math.ceil(this.height*gu),Uu(this,Al,Qx).call(this)},Z1=function(eu,gu){const ru=Uu(this,Al,e1).call(this),Pu=(eu-ru)/Wl(this,_a),Lu=(gu-ru)/Wl(this,xa);this.scaleFactor=Math.min(Pu,Lu)},Qx=function(){const eu=Uu(this,Al,e1).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+eu,this.translationY*this.scaleFactor+eu)},Ql=new WeakSet,Pv=function(eu){const gu=new Path2D;for(let ru=0,Pu=eu.length;ru<Pu;ru++){const[Lu,Ju,Vu,Mu]=eu[ru];ru===0&&gu.moveTo(...Lu),gu.bezierCurveTo(Ju[0],Ju[1],Vu[0],Vu[1],Mu[0],Mu[1])}return gu},J1=function(eu,gu,ru){const[Pu,Lu,Ju,Vu]=gu;switch(ru){case 0:for(let Mu=0,hp=eu.length;Mu<hp;Mu+=2)eu[Mu]+=Pu,eu[Mu+1]=Vu-eu[Mu+1];break;case 90:for(let Mu=0,hp=eu.length;Mu<hp;Mu+=2){const mp=eu[Mu];eu[Mu]=eu[Mu+1]+Pu,eu[Mu+1]=mp+Lu}break;case 180:for(let Mu=0,hp=eu.length;Mu<hp;Mu+=2)eu[Mu]=Ju-eu[Mu],eu[Mu+1]+=Lu;break;case 270:for(let Mu=0,hp=eu.length;Mu<hp;Mu+=2){const mp=eu[Mu];eu[Mu]=Ju-eu[Mu+1],eu[Mu+1]=Vu-mp}break;default:throw new Error("Invalid rotation")}return eu},Iv=function(eu,gu,ru){const[Pu,Lu,Ju,Vu]=gu;switch(ru){case 0:for(let Mu=0,hp=eu.length;Mu<hp;Mu+=2)eu[Mu]-=Pu,eu[Mu+1]=Vu-eu[Mu+1];break;case 90:for(let Mu=0,hp=eu.length;Mu<hp;Mu+=2){const mp=eu[Mu];eu[Mu]=eu[Mu+1]-Lu,eu[Mu+1]=mp-Pu}break;case 180:for(let Mu=0,hp=eu.length;Mu<hp;Mu+=2)eu[Mu]=Ju-eu[Mu],eu[Mu+1]-=Lu;break;case 270:for(let Mu=0,hp=eu.length;Mu<hp;Mu+=2){const mp=eu[Mu];eu[Mu]=Vu-eu[Mu+1],eu[Mu+1]=Ju-mp}break;default:throw new Error("Invalid rotation")}return eu},Ov=function(eu,gu,ru,Pu){var hp,mp;const Lu=[],Ju=this.thickness/2,Vu=eu*gu+Ju,Mu=eu*ru+Ju;for(const Rp of this.paths){const Lp=[],Bp=[];for(let Tp=0,Ip=Rp.length;Tp<Ip;Tp++){const[Hp,qp,lp,$u]=Rp[Tp],Zu=eu*Hp[0]+Vu,Ap=eu*Hp[1]+Mu,Np=eu*qp[0]+Vu,Vp=eu*qp[1]+Mu,Ru=eu*lp[0]+Vu,Qu=eu*lp[1]+Mu,up=eu*$u[0]+Vu,Ep=eu*$u[1]+Mu;Tp===0&&(Lp.push(Zu,Ap),Bp.push(Zu,Ap)),Lp.push(Np,Vp,Ru,Qu,up,Ep),Bp.push(Np,Vp),Tp===Ip-1&&Bp.push(up,Ep)}Lu.push({bezier:Uu(hp=Fu,Ql,J1).call(hp,Lp,Pu,this.rotation),points:Uu(mp=Fu,Ql,J1).call(mp,Bp,Pu,this.rotation)})}return Lu},Q1=function(){let eu=1/0,gu=-1/0,ru=1/0,Pu=-1/0;for(const Lu of this.paths)for(const[Ju,Vu,Mu,hp]of Lu){const mp=hs.Util.bezierBoundingBox(...Ju,...Vu,...Mu,...hp);eu=Math.min(eu,mp[0]),ru=Math.min(ru,mp[1]),gu=Math.max(gu,mp[2]),Pu=Math.max(Pu,mp[3])}return[eu,ru,gu,Pu]},e1=function(){return Wl(this,El)?Math.ceil(this.thickness*this.parentScale):0},ex=function(eu=!1){if(this.isEmpty())return;if(!Wl(this,El)){Uu(this,Al,gm).call(this);return}const gu=Uu(this,Al,Q1).call(this),ru=Uu(this,Al,e1).call(this);ep(this,_a,Math.max(lo.AnnotationEditor.MIN_SIZE,gu[2]-gu[0])),ep(this,xa,Math.max(lo.AnnotationEditor.MIN_SIZE,gu[3]-gu[1]));const Pu=Math.ceil(ru+Wl(this,_a)*this.scaleFactor),Lu=Math.ceil(ru+Wl(this,xa)*this.scaleFactor),[Ju,Vu]=this.parentDimensions;this.width=Pu/Ju,this.height=Lu/Vu,this.setAspectRatio(Pu,Lu);const Mu=this.translationX,hp=this.translationY;this.translationX=-gu[0],this.translationY=-gu[1],Uu(this,Al,Qm).call(this),Uu(this,Al,gm).call(this),ep(this,Dl,Pu),ep(this,Fl,Lu),this.setDims(Pu,Lu);const mp=eu?ru/this.scaleFactor/2:0;this.translate(Mu-this.translationX-mp,hp-this.translationY-mp)},_d(Fu,Ql),c0(Fu,"_defaultColor",null),c0(Fu,"_defaultOpacity",1),c0(Fu,"_defaultThickness",1),c0(Fu,"_type","ink");let ba=Fu;is.InkEditor=ba},(cs,is,us)=>{var ba,xa,_a,$a,xl,yl,wl,_l,El,Sl,Cl,Tx,Ax,t1,ev,Mv,jv,tv,r1,Nv;Object.defineProperty(is,"__esModule",{value:!0}),is.StampEditor=void 0;var hs=us(1),lo=us(4),co=us(6),uo=us(29);const zl=class zl extends lo.AnnotationEditor{constructor(au){super({...au,name:"stampEditor"});_d(this,Cl);_d(this,ba,null);_d(this,xa,null);_d(this,_a,null);_d(this,$a,null);_d(this,xl,null);_d(this,yl,null);_d(this,wl,null);_d(this,_l,null);_d(this,El,!1);_d(this,Sl,!1);ep(this,$a,au.bitmapUrl),ep(this,xl,au.bitmapFile)}static initialize(au){lo.AnnotationEditor.initialize(au)}static get supportedTypes(){const au=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,hs.shadow)(this,"supportedTypes",au.map(_c=>`image/${_c}`))}static get supportedTypesStr(){return(0,hs.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(au){return this.supportedTypes.includes(au)}static paste(au,_c){_c.pasteEditor(hs.AnnotationEditorType.STAMP,{bitmapFile:au.getAsFile()})}remove(){var au,_c;Wl(this,xa)&&(ep(this,ba,null),this._uiManager.imageManager.deleteId(Wl(this,xa)),(au=Wl(this,yl))==null||au.remove(),ep(this,yl,null),(_c=Wl(this,wl))==null||_c.disconnect(),ep(this,wl,null)),super.remove()}rebuild(){if(!this.parent){Wl(this,xa)&&Uu(this,Cl,t1).call(this);return}super.rebuild(),this.div!==null&&(Wl(this,xa)&&Uu(this,Cl,t1).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(Wl(this,_a)||Wl(this,ba)||Wl(this,$a)||Wl(this,xl))}get isResizable(){return!0}render(){if(this.div)return this.div;let au,_c;if(this.width&&(au=this.x,_c=this.y),super.render(),this.div.hidden=!0,Wl(this,ba)?Uu(this,Cl,ev).call(this):Uu(this,Cl,t1).call(this),this.width){const[uu,lu]=this.parentDimensions;this.setAt(au*uu,_c*lu,this.width*uu,this.height*lu)}return this.div}static deserialize(au,_c,uu){if(au instanceof uo.StampAnnotationElement)return null;const lu=super.deserialize(au,_c,uu),{rect:Kl,bitmapUrl:xu,bitmapId:pu,isSvg:Ll,accessibilityData:Nl}=au;pu&&uu.imageManager.isValidId(pu)?ep(lu,xa,pu):ep(lu,$a,xu),ep(lu,El,Ll);const[Ml,Ul]=lu.pageDimensions;return lu.width=(Kl[2]-Kl[0])/Ml,lu.height=(Kl[3]-Kl[1])/Ul,Nl&&(lu.altTextData=Nl),lu}serialize(au=!1,_c=null){if(this.isEmpty())return null;const uu={annotationType:hs.AnnotationEditorType.STAMP,bitmapId:Wl(this,xa),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:Wl(this,El),structTreeParentId:this._structTreeParentId};if(au)return uu.bitmapUrl=Uu(this,Cl,r1).call(this,!0),uu.accessibilityData=this.altTextData,uu;const{decorative:lu,altText:Kl}=this.altTextData;if(!lu&&Kl&&(uu.accessibilityData={type:"Figure",alt:Kl}),_c===null)return uu;_c.stamps||(_c.stamps=new Map);const xu=Wl(this,El)?(uu.rect[2]-uu.rect[0])*(uu.rect[3]-uu.rect[1]):null;if(!_c.stamps.has(Wl(this,xa)))_c.stamps.set(Wl(this,xa),{area:xu,serialized:uu}),uu.bitmap=Uu(this,Cl,r1).call(this,!1);else if(Wl(this,El)){const pu=_c.stamps.get(Wl(this,xa));xu>pu.area&&(pu.area=xu,pu.serialized.bitmap.close(),pu.serialized.bitmap=Uu(this,Cl,r1).call(this,!1))}return uu}};ba=new WeakMap,xa=new WeakMap,_a=new WeakMap,$a=new WeakMap,xl=new WeakMap,yl=new WeakMap,wl=new WeakMap,_l=new WeakMap,El=new WeakMap,Sl=new WeakMap,Cl=new WeakSet,Tx=function(au,_c=!1){if(!au){this.remove();return}ep(this,ba,au.bitmap),_c||(ep(this,xa,au.id),ep(this,El,au.isSvg)),Uu(this,Cl,ev).call(this)},Ax=function(){ep(this,_a,null),this._uiManager.enableWaiting(!1),Wl(this,yl)&&this.div.focus()},t1=function(){if(Wl(this,xa)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(Wl(this,xa)).then(_c=>Uu(this,Cl,Tx).call(this,_c,!0)).finally(()=>Uu(this,Cl,Ax).call(this));return}if(Wl(this,$a)){const _c=Wl(this,$a);ep(this,$a,null),this._uiManager.enableWaiting(!0),ep(this,_a,this._uiManager.imageManager.getFromUrl(_c).then(uu=>Uu(this,Cl,Tx).call(this,uu)).finally(()=>Uu(this,Cl,Ax).call(this)));return}if(Wl(this,xl)){const _c=Wl(this,xl);ep(this,xl,null),this._uiManager.enableWaiting(!0),ep(this,_a,this._uiManager.imageManager.getFromFile(_c).then(uu=>Uu(this,Cl,Tx).call(this,uu)).finally(()=>Uu(this,Cl,Ax).call(this)));return}const au=document.createElement("input");au.type="file",au.accept=zl.supportedTypesStr,ep(this,_a,new Promise(_c=>{au.addEventListener("change",async()=>{if(!au.files||au.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const uu=await this._uiManager.imageManager.getFromFile(au.files[0]);Uu(this,Cl,Tx).call(this,uu)}_c()}),au.addEventListener("cancel",()=>{this.remove(),_c()})}).finally(()=>Uu(this,Cl,Ax).call(this))),au.click()},ev=function(){const{div:au}=this;let{width:_c,height:uu}=Wl(this,ba);const[lu,Kl]=this.pageDimensions,xu=.75;if(this.width)_c=this.width*lu,uu=this.height*Kl;else if(_c>xu*lu||uu>xu*Kl){const Ml=Math.min(xu*lu/_c,xu*Kl/uu);_c*=Ml,uu*=Ml}const[pu,Ll]=this.parentDimensions;this.setDims(_c*pu/lu,uu*Ll/Kl),this._uiManager.enableWaiting(!1);const Nl=ep(this,yl,document.createElement("canvas"));au.append(Nl),au.hidden=!1,Uu(this,Cl,tv).call(this,_c,uu),Uu(this,Cl,Nv).call(this),Wl(this,Sl)||(this.parent.addUndoableEditor(this),ep(this,Sl,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Mv=function(au,_c){var xu;const[uu,lu]=this.parentDimensions;this.width=au/uu,this.height=_c/lu,this.setDims(au,_c),(xu=this._initialOptions)!=null&&xu.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,Wl(this,_l)!==null&&clearTimeout(Wl(this,_l)),ep(this,_l,setTimeout(()=>{ep(this,_l,null),Uu(this,Cl,tv).call(this,au,_c)},200))},jv=function(au,_c){const{width:uu,height:lu}=Wl(this,ba);let Kl=uu,xu=lu,pu=Wl(this,ba);for(;Kl>2*au||xu>2*_c;){const Ll=Kl,Nl=xu;Kl>2*au&&(Kl=Kl>=16384?Math.floor(Kl/2)-1:Math.ceil(Kl/2)),xu>2*_c&&(xu=xu>=16384?Math.floor(xu/2)-1:Math.ceil(xu/2));const Ml=new OffscreenCanvas(Kl,xu);Ml.getContext("2d").drawImage(pu,0,0,Ll,Nl,0,0,Kl,xu),pu=Ml.transferToImageBitmap()}return pu},tv=function(au,_c){au=Math.ceil(au),_c=Math.ceil(_c);const uu=Wl(this,yl);if(!uu||uu.width===au&&uu.height===_c)return;uu.width=au,uu.height=_c;const lu=Wl(this,El)?Wl(this,ba):Uu(this,Cl,jv).call(this,au,_c),Kl=uu.getContext("2d");Kl.filter=this._uiManager.hcmFilter,Kl.drawImage(lu,0,0,lu.width,lu.height,0,0,au,_c)},r1=function(au){if(au){if(Wl(this,El)){const lu=this._uiManager.imageManager.getSvgUrl(Wl(this,xa));if(lu)return lu}const _c=document.createElement("canvas");return{width:_c.width,height:_c.height}=Wl(this,ba),_c.getContext("2d").drawImage(Wl(this,ba),0,0),_c.toDataURL()}if(Wl(this,El)){const[_c,uu]=this.pageDimensions,lu=Math.round(this.width*_c*co.PixelsPerInch.PDF_TO_CSS_UNITS),Kl=Math.round(this.height*uu*co.PixelsPerInch.PDF_TO_CSS_UNITS),xu=new OffscreenCanvas(lu,Kl);return xu.getContext("2d").drawImage(Wl(this,ba),0,0,Wl(this,ba).width,Wl(this,ba).height,0,0,lu,Kl),xu.transferToImageBitmap()}return structuredClone(Wl(this,ba))},Nv=function(){ep(this,wl,new ResizeObserver(au=>{const _c=au[0].contentRect;_c.width&&_c.height&&Uu(this,Cl,Mv).call(this,_c.width,_c.height)})),Wl(this,wl).observe(this.div)},c0(zl,"_type","stamp");let ga=zl;is.StampEditor=ga}],__webpack_module_cache__={};function __w_pdfjs_require__(cs){var is=__webpack_module_cache__[cs];if(is!==void 0)return is.exports;var us=__webpack_module_cache__[cs]={exports:{}};return __webpack_modules__[cs](us,us.exports,__w_pdfjs_require__),us.exports}var __webpack_exports__={};return(()=>{var cs=__webpack_exports__;Object.defineProperty(cs,"__esModule",{value:!0}),Object.defineProperty(cs,"AbortException",{enumerable:!0,get:function(){return is.AbortException}}),Object.defineProperty(cs,"AnnotationEditorLayer",{enumerable:!0,get:function(){return co.AnnotationEditorLayer}}),Object.defineProperty(cs,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return is.AnnotationEditorParamsType}}),Object.defineProperty(cs,"AnnotationEditorType",{enumerable:!0,get:function(){return is.AnnotationEditorType}}),Object.defineProperty(cs,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return uo.AnnotationEditorUIManager}}),Object.defineProperty(cs,"AnnotationLayer",{enumerable:!0,get:function(){return ga.AnnotationLayer}}),Object.defineProperty(cs,"AnnotationMode",{enumerable:!0,get:function(){return is.AnnotationMode}}),Object.defineProperty(cs,"CMapCompressionType",{enumerable:!0,get:function(){return is.CMapCompressionType}}),Object.defineProperty(cs,"DOMSVGFactory",{enumerable:!0,get:function(){return hs.DOMSVGFactory}}),Object.defineProperty(cs,"FeatureTest",{enumerable:!0,get:function(){return is.FeatureTest}}),Object.defineProperty(cs,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ba.GlobalWorkerOptions}}),Object.defineProperty(cs,"ImageKind",{enumerable:!0,get:function(){return is.ImageKind}}),Object.defineProperty(cs,"InvalidPDFException",{enumerable:!0,get:function(){return is.InvalidPDFException}}),Object.defineProperty(cs,"MissingPDFException",{enumerable:!0,get:function(){return is.MissingPDFException}}),Object.defineProperty(cs,"OPS",{enumerable:!0,get:function(){return is.OPS}}),Object.defineProperty(cs,"PDFDataRangeTransport",{enumerable:!0,get:function(){return us.PDFDataRangeTransport}}),Object.defineProperty(cs,"PDFDateString",{enumerable:!0,get:function(){return hs.PDFDateString}}),Object.defineProperty(cs,"PDFWorker",{enumerable:!0,get:function(){return us.PDFWorker}}),Object.defineProperty(cs,"PasswordResponses",{enumerable:!0,get:function(){return is.PasswordResponses}}),Object.defineProperty(cs,"PermissionFlag",{enumerable:!0,get:function(){return is.PermissionFlag}}),Object.defineProperty(cs,"PixelsPerInch",{enumerable:!0,get:function(){return hs.PixelsPerInch}}),Object.defineProperty(cs,"PromiseCapability",{enumerable:!0,get:function(){return is.PromiseCapability}}),Object.defineProperty(cs,"RenderingCancelledException",{enumerable:!0,get:function(){return hs.RenderingCancelledException}}),Object.defineProperty(cs,"SVGGraphics",{enumerable:!0,get:function(){return us.SVGGraphics}}),Object.defineProperty(cs,"UnexpectedResponseException",{enumerable:!0,get:function(){return is.UnexpectedResponseException}}),Object.defineProperty(cs,"Util",{enumerable:!0,get:function(){return is.Util}}),Object.defineProperty(cs,"VerbosityLevel",{enumerable:!0,get:function(){return is.VerbosityLevel}}),Object.defineProperty(cs,"XfaLayer",{enumerable:!0,get:function(){return xa.XfaLayer}}),Object.defineProperty(cs,"build",{enumerable:!0,get:function(){return us.build}}),Object.defineProperty(cs,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return is.createValidAbsoluteUrl}}),Object.defineProperty(cs,"getDocument",{enumerable:!0,get:function(){return us.getDocument}}),Object.defineProperty(cs,"getFilenameFromUrl",{enumerable:!0,get:function(){return hs.getFilenameFromUrl}}),Object.defineProperty(cs,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return hs.getPdfFilenameFromUrl}}),Object.defineProperty(cs,"getXfaPageViewport",{enumerable:!0,get:function(){return hs.getXfaPageViewport}}),Object.defineProperty(cs,"isDataScheme",{enumerable:!0,get:function(){return hs.isDataScheme}}),Object.defineProperty(cs,"isPdfFile",{enumerable:!0,get:function(){return hs.isPdfFile}}),Object.defineProperty(cs,"loadScript",{enumerable:!0,get:function(){return hs.loadScript}}),Object.defineProperty(cs,"noContextMenu",{enumerable:!0,get:function(){return hs.noContextMenu}}),Object.defineProperty(cs,"normalizeUnicode",{enumerable:!0,get:function(){return is.normalizeUnicode}}),Object.defineProperty(cs,"renderTextLayer",{enumerable:!0,get:function(){return lo.renderTextLayer}}),Object.defineProperty(cs,"setLayerDimensions",{enumerable:!0,get:function(){return hs.setLayerDimensions}}),Object.defineProperty(cs,"shadow",{enumerable:!0,get:function(){return is.shadow}}),Object.defineProperty(cs,"updateTextLayer",{enumerable:!0,get:function(){return lo.updateTextLayer}}),Object.defineProperty(cs,"version",{enumerable:!0,get:function(){return us.version}});var is=__w_pdfjs_require__(1),us=__w_pdfjs_require__(2),hs=__w_pdfjs_require__(6),lo=__w_pdfjs_require__(26),co=__w_pdfjs_require__(27),uo=__w_pdfjs_require__(5),ga=__w_pdfjs_require__(29),ba=__w_pdfjs_require__(14),xa=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(cs,is){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(us,hs){us.__proto__=hs}||function(us,hs){for(var lo in hs)hs.hasOwnProperty(lo)&&(us[lo]=hs[lo])},extendStatics(cs,is)};function __extends(cs,is){extendStatics(cs,is);function us(){this.constructor=cs}cs.prototype=is===null?Object.create(is):(us.prototype=is.prototype,new us)}var __assign=function(){return __assign=Object.assign||function(is){for(var us,hs=1,lo=arguments.length;hs<lo;hs++){us=arguments[hs];for(var co in us)Object.prototype.hasOwnProperty.call(us,co)&&(is[co]=us[co])}return is},__assign.apply(this,arguments)};function __rest(cs,is){var us={};for(var hs in cs)Object.prototype.hasOwnProperty.call(cs,hs)&&is.indexOf(hs)<0&&(us[hs]=cs[hs]);if(cs!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lo=0,hs=Object.getOwnPropertySymbols(cs);lo<hs.length;lo++)is.indexOf(hs[lo])<0&&Object.prototype.propertyIsEnumerable.call(cs,hs[lo])&&(us[hs[lo]]=cs[hs[lo]]);return us}function __awaiter(cs,is,us,hs){function lo(co){return co instanceof us?co:new us(function(uo){uo(co)})}return new(us||(us=Promise))(function(co,uo){function ga(_a){try{xa(hs.next(_a))}catch($a){uo($a)}}function ba(_a){try{xa(hs.throw(_a))}catch($a){uo($a)}}function xa(_a){_a.done?co(_a.value):lo(_a.value).then(ga,ba)}xa((hs=hs.apply(cs,[])).next())})}function __generator(cs,is){var us={label:0,sent:function(){if(co[0]&1)throw co[1];return co[1]},trys:[],ops:[]},hs,lo,co,uo;return uo={next:ga(0),throw:ga(1),return:ga(2)},typeof Symbol=="function"&&(uo[Symbol.iterator]=function(){return this}),uo;function ga(xa){return function(_a){return ba([xa,_a])}}function ba(xa){if(hs)throw new TypeError("Generator is already executing.");for(;us;)try{if(hs=1,lo&&(co=xa[0]&2?lo.return:xa[0]?lo.throw||((co=lo.return)&&co.call(lo),0):lo.next)&&!(co=co.call(lo,xa[1])).done)return co;switch(lo=0,co&&(xa=[xa[0]&2,co.value]),xa[0]){case 0:case 1:co=xa;break;case 4:return us.label++,{value:xa[1],done:!1};case 5:us.label++,lo=xa[1],xa=[0];continue;case 7:xa=us.ops.pop(),us.trys.pop();continue;default:if(co=us.trys,!(co=co.length>0&&co[co.length-1])&&(xa[0]===6||xa[0]===2)){us=0;continue}if(xa[0]===3&&(!co||xa[1]>co[0]&&xa[1]<co[3])){us.label=xa[1];break}if(xa[0]===6&&us.label<co[1]){us.label=co[1],co=xa;break}if(co&&us.label<co[2]){us.label=co[2],us.ops.push(xa);break}co[2]&&us.ops.pop(),us.trys.pop();continue}xa=is.call(cs,us)}catch(_a){xa=[6,_a],lo=0}finally{hs=co=0}if(xa[0]&5)throw xa[1];return{value:xa[0]?xa[1]:void 0,done:!0}}}function __spreadArrays(){for(var cs=0,is=0,us=arguments.length;is<us;is++)cs+=arguments[is].length;for(var hs=Array(cs),lo=0,is=0;is<us;is++)for(var co=arguments[is],uo=0,ga=co.length;uo<ga;uo++,lo++)hs[lo]=co[uo];return hs}var chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=new Uint8Array(256);for(var i$2=0;i$2<chars$1.length;i$2++)lookup$1[chars$1.charCodeAt(i$2)]=i$2;var encodeToBase64=function(cs){for(var is="",us=cs.length,hs=0;hs<us;hs+=3)is+=chars$1[cs[hs]>>2],is+=chars$1[(cs[hs]&3)<<4|cs[hs+1]>>4],is+=chars$1[(cs[hs+1]&15)<<2|cs[hs+2]>>6],is+=chars$1[cs[hs+2]&63];return us%3===2?is=is.substring(0,is.length-1)+"=":us%3===1&&(is=is.substring(0,is.length-2)+"=="),is},decodeFromBase64$1=function(cs){var is=cs.length*.75,us=cs.length,hs,lo=0,co,uo,ga,ba;cs[cs.length-1]==="="&&(is--,cs[cs.length-2]==="="&&is--);var xa=new Uint8Array(is);for(hs=0;hs<us;hs+=4)co=lookup$1[cs.charCodeAt(hs)],uo=lookup$1[cs.charCodeAt(hs+1)],ga=lookup$1[cs.charCodeAt(hs+2)],ba=lookup$1[cs.charCodeAt(hs+3)],xa[lo++]=co<<2|uo>>4,xa[lo++]=(uo&15)<<4|ga>>2,xa[lo++]=(ga&3)<<6|ba&63;return xa},DATA_URI_PREFIX_REGEX=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,decodeFromBase64DataUri=function(cs){var is=cs.trim(),us=is.substring(0,100),hs=us.match(DATA_URI_PREFIX_REGEX);if(!hs)return decodeFromBase64$1(is);var lo=hs[0],co=is.substring(lo.length);return decodeFromBase64$1(co)},toCharCode=function(cs){return cs.charCodeAt(0)},toCodePoint=function(cs){return cs.codePointAt(0)},toHexStringOfMinLength=function(cs,is){return padStart$1(cs.toString(16),is,"0").toUpperCase()},toHexString=function(cs){return toHexStringOfMinLength(cs,2)},charFromCode=function(cs){return String.fromCharCode(cs)},charFromHexCode=function(cs){return charFromCode(parseInt(cs,16))},padStart$1=function(cs,is,us){for(var hs="",lo=0,co=is-cs.length;lo<co;lo++)hs+=us;return hs+cs},copyStringIntoBuffer=function(cs,is,us){for(var hs=cs.length,lo=0;lo<hs;lo++)is[us++]=cs.charCodeAt(lo);return hs},escapeRegExp$1=function(cs){return cs.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},cleanText=function(cs){return cs.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},escapedNewlineChars=["\\n","\\f","\\r","\\u000B"],isNewlineChar=function(cs){return/^[\n\f\r\u000B]$/.test(cs)},lineSplit=function(cs){return cs.split(/[\n\f\r\u000B]/)},mergeLines=function(cs){return cs.replace(/[\n\f\r\u000B]/g," ")},charAtIndex=function(cs,is){var us=cs.charCodeAt(is),hs,lo=is+1,co=1;return us>=55296&&us<=56319&&cs.length>lo&&(hs=cs.charCodeAt(lo),hs>=56320&&hs<=57343&&(co=2)),[cs.slice(is,is+co),co]},charSplit=function(cs){for(var is=[],us=0,hs=cs.length;us<hs;){var lo=charAtIndex(cs,us),co=lo[0],uo=lo[1];is.push(co),us+=uo}return is},buildWordBreakRegex=function(cs){for(var is=escapedNewlineChars.join("|"),us=["$"],hs=0,lo=cs.length;hs<lo;hs++){var co=cs[hs];if(isNewlineChar(co))throw new TypeError("`wordBreak` must not include "+is);us.push(co===""?".":escapeRegExp$1(co))}var uo=us.join("|");return new RegExp("("+is+")|((.*?)("+uo+"))","gm")},breakTextIntoLines=function(cs,is,us,hs){for(var lo=buildWordBreakRegex(is),co=cleanText(cs).match(lo),uo="",ga=0,ba=[],xa=function(){uo!==""&&ba.push(uo),uo="",ga=0},_a=0,$a=co.length;_a<$a;_a++){var xl=co[_a];if(isNewlineChar(xl))xa();else{var yl=hs(xl);ga+yl>us&&xa(),uo+=xl,ga+=yl}}return xa(),ba},dateRegex=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,parseDate$1=function(cs){var is=cs.match(dateRegex);if(is){var us=is[1],hs=is[2],lo=hs===void 0?"01":hs,co=is[3],uo=co===void 0?"01":co,ga=is[4],ba=ga===void 0?"00":ga,xa=is[5],_a=xa===void 0?"00":xa,$a=is[6],xl=$a===void 0?"00":$a,yl=is[7],wl=yl===void 0?"Z":yl,_l=is[8],El=_l===void 0?"00":_l,Sl=is[9],Cl=Sl===void 0?"00":Sl,Tl=wl==="Z"?"Z":""+wl+El+":"+Cl,Dl=new Date(us+"-"+lo+"-"+uo+"T"+ba+":"+_a+":"+xl+Tl);return Dl}},findLastMatch=function(cs,is){for(var us,hs=0,lo;hs<cs.length;){var co=cs.substring(hs).match(is);if(!co)return{match:lo,pos:hs};lo=co,hs+=((us=co.index)!==null&&us!==void 0?us:0)+co[0].length}return{match:lo,pos:hs}},last=function(cs){return cs[cs.length-1]},typedArrayFor=function(cs){if(cs instanceof Uint8Array)return cs;for(var is=cs.length,us=new Uint8Array(is),hs=0;hs<is;hs++)us[hs]=cs.charCodeAt(hs);return us},mergeIntoTypedArray=function(){for(var cs=[],is=0;is<arguments.length;is++)cs[is]=arguments[is];for(var us=cs.length,hs=[],lo=0;lo<us;lo++){var co=cs[lo];hs[lo]=co instanceof Uint8Array?co:typedArrayFor(co)}for(var uo=0,lo=0;lo<us;lo++)uo+=cs[lo].length;for(var ga=new Uint8Array(uo),ba=0,xa=0;xa<us;xa++)for(var _a=hs[xa],$a=0,xl=_a.length;$a<xl;$a++)ga[ba++]=_a[$a];return ga},mergeUint8Arrays=function(cs){for(var is=0,us=0,hs=cs.length;us<hs;us++)is+=cs[us].length;for(var lo=new Uint8Array(is),co=0,us=0,hs=cs.length;us<hs;us++){var uo=cs[us];lo.set(uo,co),co+=uo.length}return lo},arrayAsString=function(cs){for(var is="",us=0,hs=cs.length;us<hs;us++)is+=charFromCode(cs[us]);return is},byAscendingId=function(cs,is){return cs.id-is.id},sortedUniq=function(cs,is){for(var us=[],hs=0,lo=cs.length;hs<lo;hs++){var co=cs[hs],uo=cs[hs-1];(hs===0||is(co)!==is(uo))&&us.push(co)}return us},reverseArray=function(cs){for(var is=cs.length,us=0,hs=Math.floor(is/2);us<hs;us++){var lo=us,co=is-us-1,uo=cs[us];cs[lo]=cs[co],cs[co]=uo}return cs},sum=function(cs){for(var is=0,us=0,hs=cs.length;us<hs;us++)is+=cs[us];return is},range=function(cs,is){for(var us=new Array(is-cs),hs=0,lo=us.length;hs<lo;hs++)us[hs]=cs+hs;return us},pluckIndices=function(cs,is){for(var us=new Array(is.length),hs=0,lo=is.length;hs<lo;hs++)us[hs]=cs[is[hs]];return us},canBeConvertedToUint8Array=function(cs){return cs instanceof Uint8Array||cs instanceof ArrayBuffer||typeof cs=="string"},toUint8Array=function(cs){if(typeof cs=="string")return decodeFromBase64DataUri(cs);if(cs instanceof ArrayBuffer)return new Uint8Array(cs);if(cs instanceof Uint8Array)return cs;throw new TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")},waitForTick=function(){return new Promise(function(cs){setTimeout(function(){return cs()},0)})},utf16Encode=function(cs,is){is===void 0&&(is=!0);var us=[];is&&us.push(65279);for(var hs=0,lo=cs.length;hs<lo;){var co=cs.codePointAt(hs);if(co<65536)us.push(co),hs+=1;else if(co<1114112)us.push(highSurrogate(co),lowSurrogate(co)),hs+=2;else throw new Error("Invalid code point: 0x"+toHexString(co))}return new Uint16Array(us)},isWithinBMP=function(cs){return cs>=0&&cs<=65535},hasSurrogates=function(cs){return cs>=65536&&cs<=1114111},highSurrogate=function(cs){return Math.floor((cs-65536)/1024)+55296},lowSurrogate=function(cs){return(cs-65536)%1024+56320},ByteOrder;(function(cs){cs.BigEndian="BigEndian",cs.LittleEndian="LittleEndian"})(ByteOrder||(ByteOrder={}));var REPLACEMENT="".codePointAt(0),utf16Decode=function(cs,is){if(is===void 0&&(is=!0),cs.length<=1)return String.fromCodePoint(REPLACEMENT);for(var us=is?readBOM(cs):ByteOrder.BigEndian,hs=is?2:0,lo=[];cs.length-hs>=2;){var co=decodeValues(cs[hs++],cs[hs++],us);if(isHighSurrogate(co))if(cs.length-hs<2)lo.push(REPLACEMENT);else{var uo=decodeValues(cs[hs++],cs[hs++],us);isLowSurrogate(uo)?lo.push(co,uo):lo.push(REPLACEMENT)}else isLowSurrogate(co)?(hs+=2,lo.push(REPLACEMENT)):lo.push(co)}return hs<cs.length&&lo.push(REPLACEMENT),String.fromCodePoint.apply(String,lo)},isHighSurrogate=function(cs){return cs>=55296&&cs<=56319},isLowSurrogate=function(cs){return cs>=56320&&cs<=57343},decodeValues=function(cs,is,us){if(us===ByteOrder.LittleEndian)return is<<8|cs;if(us===ByteOrder.BigEndian)return cs<<8|is;throw new Error("Invalid byteOrder: "+us)},readBOM=function(cs){return hasUtf16BigEndianBOM(cs)?ByteOrder.BigEndian:hasUtf16LittleEndianBOM(cs)?ByteOrder.LittleEndian:ByteOrder.BigEndian},hasUtf16BigEndianBOM=function(cs){return cs[0]===254&&cs[1]===255},hasUtf16LittleEndianBOM=function(cs){return cs[0]===255&&cs[1]===254},hasUtf16BOM=function(cs){return hasUtf16BigEndianBOM(cs)||hasUtf16LittleEndianBOM(cs)},numberToString=function(cs){var is=String(cs);if(Math.abs(cs)<1){var us=parseInt(cs.toString().split("e-")[1]);if(us){var hs=cs<0;hs&&(cs*=-1),cs*=Math.pow(10,us-1),is="0."+new Array(us).join("0")+cs.toString().substring(2),hs&&(is="-"+is)}}else{var us=parseInt(cs.toString().split("+")[1]);us>20&&(us-=20,cs/=Math.pow(10,us),is=cs.toString()+new Array(us+1).join("0"))}return is},sizeInBytes=function(cs){return Math.ceil(cs.toString(2).length/8)},bytesFor=function(cs){for(var is=new Uint8Array(sizeInBytes(cs)),us=1;us<=is.length;us++)is[us-1]=cs>>(is.length-us)*8;return is},error=function(cs){throw new Error(cs)},common={};(function(cs){var is=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function us(co,uo){return Object.prototype.hasOwnProperty.call(co,uo)}cs.assign=function(co){for(var uo=Array.prototype.slice.call(arguments,1);uo.length;){var ga=uo.shift();if(ga){if(typeof ga!="object")throw new TypeError(ga+"must be non-object");for(var ba in ga)us(ga,ba)&&(co[ba]=ga[ba])}}return co},cs.shrinkBuf=function(co,uo){return co.length===uo?co:co.subarray?co.subarray(0,uo):(co.length=uo,co)};var hs={arraySet:function(co,uo,ga,ba,xa){if(uo.subarray&&co.subarray){co.set(uo.subarray(ga,ga+ba),xa);return}for(var _a=0;_a<ba;_a++)co[xa+_a]=uo[ga+_a]},flattenChunks:function(co){var uo,ga,ba,xa,_a,$a;for(ba=0,uo=0,ga=co.length;uo<ga;uo++)ba+=co[uo].length;for($a=new Uint8Array(ba),xa=0,uo=0,ga=co.length;uo<ga;uo++)_a=co[uo],$a.set(_a,xa),xa+=_a.length;return $a}},lo={arraySet:function(co,uo,ga,ba,xa){for(var _a=0;_a<ba;_a++)co[xa+_a]=uo[ga+_a]},flattenChunks:function(co){return[].concat.apply([],co)}};cs.setTyped=function(co){co?(cs.Buf8=Uint8Array,cs.Buf16=Uint16Array,cs.Buf32=Int32Array,cs.assign(cs,hs)):(cs.Buf8=Array,cs.Buf16=Array,cs.Buf32=Array,cs.assign(cs,lo))},cs.setTyped(is)})(common);var deflate$4={},deflate$3={},trees$1={},utils$7=common,Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(cs){for(var is=cs.length;--is>=0;)cs[is]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);var static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(cs,is,us,hs,lo){this.static_tree=cs,this.extra_bits=is,this.extra_base=us,this.elems=hs,this.max_length=lo,this.has_stree=cs&&cs.length}var static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(cs,is){this.dyn_tree=cs,this.max_code=0,this.stat_desc=is}function d_code(cs){return cs<256?_dist_code[cs]:_dist_code[256+(cs>>>7)]}function put_short(cs,is){cs.pending_buf[cs.pending++]=is&255,cs.pending_buf[cs.pending++]=is>>>8&255}function send_bits(cs,is,us){cs.bi_valid>Buf_size-us?(cs.bi_buf|=is<<cs.bi_valid&65535,put_short(cs,cs.bi_buf),cs.bi_buf=is>>Buf_size-cs.bi_valid,cs.bi_valid+=us-Buf_size):(cs.bi_buf|=is<<cs.bi_valid&65535,cs.bi_valid+=us)}function send_code(cs,is,us){send_bits(cs,us[is*2],us[is*2+1])}function bi_reverse(cs,is){var us=0;do us|=cs&1,cs>>>=1,us<<=1;while(--is>0);return us>>>1}function bi_flush(cs){cs.bi_valid===16?(put_short(cs,cs.bi_buf),cs.bi_buf=0,cs.bi_valid=0):cs.bi_valid>=8&&(cs.pending_buf[cs.pending++]=cs.bi_buf&255,cs.bi_buf>>=8,cs.bi_valid-=8)}function gen_bitlen(cs,is){var us=is.dyn_tree,hs=is.max_code,lo=is.stat_desc.static_tree,co=is.stat_desc.has_stree,uo=is.stat_desc.extra_bits,ga=is.stat_desc.extra_base,ba=is.stat_desc.max_length,xa,_a,$a,xl,yl,wl,_l=0;for(xl=0;xl<=MAX_BITS$1;xl++)cs.bl_count[xl]=0;for(us[cs.heap[cs.heap_max]*2+1]=0,xa=cs.heap_max+1;xa<HEAP_SIZE$1;xa++)_a=cs.heap[xa],xl=us[us[_a*2+1]*2+1]+1,xl>ba&&(xl=ba,_l++),us[_a*2+1]=xl,!(_a>hs)&&(cs.bl_count[xl]++,yl=0,_a>=ga&&(yl=uo[_a-ga]),wl=us[_a*2],cs.opt_len+=wl*(xl+yl),co&&(cs.static_len+=wl*(lo[_a*2+1]+yl)));if(_l!==0){do{for(xl=ba-1;cs.bl_count[xl]===0;)xl--;cs.bl_count[xl]--,cs.bl_count[xl+1]+=2,cs.bl_count[ba]--,_l-=2}while(_l>0);for(xl=ba;xl!==0;xl--)for(_a=cs.bl_count[xl];_a!==0;)$a=cs.heap[--xa],!($a>hs)&&(us[$a*2+1]!==xl&&(cs.opt_len+=(xl-us[$a*2+1])*us[$a*2],us[$a*2+1]=xl),_a--)}}function gen_codes(cs,is,us){var hs=new Array(MAX_BITS$1+1),lo=0,co,uo;for(co=1;co<=MAX_BITS$1;co++)hs[co]=lo=lo+us[co-1]<<1;for(uo=0;uo<=is;uo++){var ga=cs[uo*2+1];ga!==0&&(cs[uo*2]=bi_reverse(hs[ga]++,ga))}}function tr_static_init(){var cs,is,us,hs,lo,co=new Array(MAX_BITS$1+1);for(us=0,hs=0;hs<LENGTH_CODES$1-1;hs++)for(base_length[hs]=us,cs=0;cs<1<<extra_lbits[hs];cs++)_length_code[us++]=hs;for(_length_code[us-1]=hs,lo=0,hs=0;hs<16;hs++)for(base_dist[hs]=lo,cs=0;cs<1<<extra_dbits[hs];cs++)_dist_code[lo++]=hs;for(lo>>=7;hs<D_CODES$1;hs++)for(base_dist[hs]=lo<<7,cs=0;cs<1<<extra_dbits[hs]-7;cs++)_dist_code[256+lo++]=hs;for(is=0;is<=MAX_BITS$1;is++)co[is]=0;for(cs=0;cs<=143;)static_ltree[cs*2+1]=8,cs++,co[8]++;for(;cs<=255;)static_ltree[cs*2+1]=9,cs++,co[9]++;for(;cs<=279;)static_ltree[cs*2+1]=7,cs++,co[7]++;for(;cs<=287;)static_ltree[cs*2+1]=8,cs++,co[8]++;for(gen_codes(static_ltree,L_CODES$1+1,co),cs=0;cs<D_CODES$1;cs++)static_dtree[cs*2+1]=5,static_dtree[cs*2]=bi_reverse(cs,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)}function init_block(cs){var is;for(is=0;is<L_CODES$1;is++)cs.dyn_ltree[is*2]=0;for(is=0;is<D_CODES$1;is++)cs.dyn_dtree[is*2]=0;for(is=0;is<BL_CODES$1;is++)cs.bl_tree[is*2]=0;cs.dyn_ltree[END_BLOCK*2]=1,cs.opt_len=cs.static_len=0,cs.last_lit=cs.matches=0}function bi_windup(cs){cs.bi_valid>8?put_short(cs,cs.bi_buf):cs.bi_valid>0&&(cs.pending_buf[cs.pending++]=cs.bi_buf),cs.bi_buf=0,cs.bi_valid=0}function copy_block(cs,is,us,hs){bi_windup(cs),put_short(cs,us),put_short(cs,~us),utils$7.arraySet(cs.pending_buf,cs.window,is,us,cs.pending),cs.pending+=us}function smaller(cs,is,us,hs){var lo=is*2,co=us*2;return cs[lo]<cs[co]||cs[lo]===cs[co]&&hs[is]<=hs[us]}function pqdownheap(cs,is,us){for(var hs=cs.heap[us],lo=us<<1;lo<=cs.heap_len&&(lo<cs.heap_len&&smaller(is,cs.heap[lo+1],cs.heap[lo],cs.depth)&&lo++,!smaller(is,hs,cs.heap[lo],cs.depth));)cs.heap[us]=cs.heap[lo],us=lo,lo<<=1;cs.heap[us]=hs}function compress_block(cs,is,us){var hs,lo,co=0,uo,ga;if(cs.last_lit!==0)do hs=cs.pending_buf[cs.d_buf+co*2]<<8|cs.pending_buf[cs.d_buf+co*2+1],lo=cs.pending_buf[cs.l_buf+co],co++,hs===0?send_code(cs,lo,is):(uo=_length_code[lo],send_code(cs,uo+LITERALS$1+1,is),ga=extra_lbits[uo],ga!==0&&(lo-=base_length[uo],send_bits(cs,lo,ga)),hs--,uo=d_code(hs),send_code(cs,uo,us),ga=extra_dbits[uo],ga!==0&&(hs-=base_dist[uo],send_bits(cs,hs,ga)));while(co<cs.last_lit);send_code(cs,END_BLOCK,is)}function build_tree(cs,is){var us=is.dyn_tree,hs=is.stat_desc.static_tree,lo=is.stat_desc.has_stree,co=is.stat_desc.elems,uo,ga,ba=-1,xa;for(cs.heap_len=0,cs.heap_max=HEAP_SIZE$1,uo=0;uo<co;uo++)us[uo*2]!==0?(cs.heap[++cs.heap_len]=ba=uo,cs.depth[uo]=0):us[uo*2+1]=0;for(;cs.heap_len<2;)xa=cs.heap[++cs.heap_len]=ba<2?++ba:0,us[xa*2]=1,cs.depth[xa]=0,cs.opt_len--,lo&&(cs.static_len-=hs[xa*2+1]);for(is.max_code=ba,uo=cs.heap_len>>1;uo>=1;uo--)pqdownheap(cs,us,uo);xa=co;do uo=cs.heap[1],cs.heap[1]=cs.heap[cs.heap_len--],pqdownheap(cs,us,1),ga=cs.heap[1],cs.heap[--cs.heap_max]=uo,cs.heap[--cs.heap_max]=ga,us[xa*2]=us[uo*2]+us[ga*2],cs.depth[xa]=(cs.depth[uo]>=cs.depth[ga]?cs.depth[uo]:cs.depth[ga])+1,us[uo*2+1]=us[ga*2+1]=xa,cs.heap[1]=xa++,pqdownheap(cs,us,1);while(cs.heap_len>=2);cs.heap[--cs.heap_max]=cs.heap[1],gen_bitlen(cs,is),gen_codes(us,ba,cs.bl_count)}function scan_tree(cs,is,us){var hs,lo=-1,co,uo=is[0*2+1],ga=0,ba=7,xa=4;for(uo===0&&(ba=138,xa=3),is[(us+1)*2+1]=65535,hs=0;hs<=us;hs++)co=uo,uo=is[(hs+1)*2+1],!(++ga<ba&&co===uo)&&(ga<xa?cs.bl_tree[co*2]+=ga:co!==0?(co!==lo&&cs.bl_tree[co*2]++,cs.bl_tree[REP_3_6*2]++):ga<=10?cs.bl_tree[REPZ_3_10*2]++:cs.bl_tree[REPZ_11_138*2]++,ga=0,lo=co,uo===0?(ba=138,xa=3):co===uo?(ba=6,xa=3):(ba=7,xa=4))}function send_tree(cs,is,us){var hs,lo=-1,co,uo=is[0*2+1],ga=0,ba=7,xa=4;for(uo===0&&(ba=138,xa=3),hs=0;hs<=us;hs++)if(co=uo,uo=is[(hs+1)*2+1],!(++ga<ba&&co===uo)){if(ga<xa)do send_code(cs,co,cs.bl_tree);while(--ga!==0);else co!==0?(co!==lo&&(send_code(cs,co,cs.bl_tree),ga--),send_code(cs,REP_3_6,cs.bl_tree),send_bits(cs,ga-3,2)):ga<=10?(send_code(cs,REPZ_3_10,cs.bl_tree),send_bits(cs,ga-3,3)):(send_code(cs,REPZ_11_138,cs.bl_tree),send_bits(cs,ga-11,7));ga=0,lo=co,uo===0?(ba=138,xa=3):co===uo?(ba=6,xa=3):(ba=7,xa=4)}}function build_bl_tree(cs){var is;for(scan_tree(cs,cs.dyn_ltree,cs.l_desc.max_code),scan_tree(cs,cs.dyn_dtree,cs.d_desc.max_code),build_tree(cs,cs.bl_desc),is=BL_CODES$1-1;is>=3&&cs.bl_tree[bl_order[is]*2+1]===0;is--);return cs.opt_len+=3*(is+1)+5+5+4,is}function send_all_trees(cs,is,us,hs){var lo;for(send_bits(cs,is-257,5),send_bits(cs,us-1,5),send_bits(cs,hs-4,4),lo=0;lo<hs;lo++)send_bits(cs,cs.bl_tree[bl_order[lo]*2+1],3);send_tree(cs,cs.dyn_ltree,is-1),send_tree(cs,cs.dyn_dtree,us-1)}function detect_data_type(cs){var is=4093624447,us;for(us=0;us<=31;us++,is>>>=1)if(is&1&&cs.dyn_ltree[us*2]!==0)return Z_BINARY;if(cs.dyn_ltree[9*2]!==0||cs.dyn_ltree[10*2]!==0||cs.dyn_ltree[13*2]!==0)return Z_TEXT;for(us=32;us<LITERALS$1;us++)if(cs.dyn_ltree[us*2]!==0)return Z_TEXT;return Z_BINARY}var static_init_done=!1;function _tr_init(cs){static_init_done||(tr_static_init(),static_init_done=!0),cs.l_desc=new TreeDesc(cs.dyn_ltree,static_l_desc),cs.d_desc=new TreeDesc(cs.dyn_dtree,static_d_desc),cs.bl_desc=new TreeDesc(cs.bl_tree,static_bl_desc),cs.bi_buf=0,cs.bi_valid=0,init_block(cs)}function _tr_stored_block(cs,is,us,hs){send_bits(cs,(STORED_BLOCK<<1)+(hs?1:0),3),copy_block(cs,is,us)}function _tr_align(cs){send_bits(cs,STATIC_TREES<<1,3),send_code(cs,END_BLOCK,static_ltree),bi_flush(cs)}function _tr_flush_block(cs,is,us,hs){var lo,co,uo=0;cs.level>0?(cs.strm.data_type===Z_UNKNOWN$1&&(cs.strm.data_type=detect_data_type(cs)),build_tree(cs,cs.l_desc),build_tree(cs,cs.d_desc),uo=build_bl_tree(cs),lo=cs.opt_len+3+7>>>3,co=cs.static_len+3+7>>>3,co<=lo&&(lo=co)):lo=co=us+5,us+4<=lo&&is!==-1?_tr_stored_block(cs,is,us,hs):cs.strategy===Z_FIXED$1||co===lo?(send_bits(cs,(STATIC_TREES<<1)+(hs?1:0),3),compress_block(cs,static_ltree,static_dtree)):(send_bits(cs,(DYN_TREES<<1)+(hs?1:0),3),send_all_trees(cs,cs.l_desc.max_code+1,cs.d_desc.max_code+1,uo+1),compress_block(cs,cs.dyn_ltree,cs.dyn_dtree)),init_block(cs),hs&&bi_windup(cs)}function _tr_tally(cs,is,us){return cs.pending_buf[cs.d_buf+cs.last_lit*2]=is>>>8&255,cs.pending_buf[cs.d_buf+cs.last_lit*2+1]=is&255,cs.pending_buf[cs.l_buf+cs.last_lit]=us&255,cs.last_lit++,is===0?cs.dyn_ltree[us*2]++:(cs.matches++,is--,cs.dyn_ltree[(_length_code[us]+LITERALS$1+1)*2]++,cs.dyn_dtree[d_code(is)*2]++),cs.last_lit===cs.lit_bufsize-1}trees$1._tr_init=_tr_init;trees$1._tr_stored_block=_tr_stored_block;trees$1._tr_flush_block=_tr_flush_block;trees$1._tr_tally=_tr_tally;trees$1._tr_align=_tr_align;function adler32$2(cs,is,us,hs){for(var lo=cs&65535|0,co=cs>>>16&65535|0,uo=0;us!==0;){uo=us>2e3?2e3:us,us-=uo;do lo=lo+is[hs++]|0,co=co+lo|0;while(--uo);lo%=65521,co%=65521}return lo|co<<16|0}var adler32_1=adler32$2;function makeTable(){for(var cs,is=[],us=0;us<256;us++){cs=us;for(var hs=0;hs<8;hs++)cs=cs&1?3988292384^cs>>>1:cs>>>1;is[us]=cs}return is}var crcTable=makeTable();function crc32$2(cs,is,us,hs){var lo=crcTable,co=hs+us;cs^=-1;for(var uo=hs;uo<co;uo++)cs=cs>>>8^lo[(cs^is[uo])&255];return cs^-1}var crc32_1=crc32$2,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},utils$6=common,trees=trees$1,adler32$1=adler32_1,crc32$1=crc32_1,msg$2=messages,Z_NO_FLUSH$1=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH$2=4,Z_BLOCK$1=5,Z_OK$2=0,Z_STREAM_END$2=1,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_BUF_ERROR$1=-5,Z_DEFAULT_COMPRESSION$1=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY$1=0,Z_UNKNOWN=2,Z_DEFLATED$2=8,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(cs,is){return cs.msg=msg$2[is],is}function rank(cs){return(cs<<1)-(cs>4?9:0)}function zero(cs){for(var is=cs.length;--is>=0;)cs[is]=0}function flush_pending(cs){var is=cs.state,us=is.pending;us>cs.avail_out&&(us=cs.avail_out),us!==0&&(utils$6.arraySet(cs.output,is.pending_buf,is.pending_out,us,cs.next_out),cs.next_out+=us,is.pending_out+=us,cs.total_out+=us,cs.avail_out-=us,is.pending-=us,is.pending===0&&(is.pending_out=0))}function flush_block_only(cs,is){trees._tr_flush_block(cs,cs.block_start>=0?cs.block_start:-1,cs.strstart-cs.block_start,is),cs.block_start=cs.strstart,flush_pending(cs.strm)}function put_byte(cs,is){cs.pending_buf[cs.pending++]=is}function putShortMSB(cs,is){cs.pending_buf[cs.pending++]=is>>>8&255,cs.pending_buf[cs.pending++]=is&255}function read_buf(cs,is,us,hs){var lo=cs.avail_in;return lo>hs&&(lo=hs),lo===0?0:(cs.avail_in-=lo,utils$6.arraySet(is,cs.input,cs.next_in,lo,us),cs.state.wrap===1?cs.adler=adler32$1(cs.adler,is,lo,us):cs.state.wrap===2&&(cs.adler=crc32$1(cs.adler,is,lo,us)),cs.next_in+=lo,cs.total_in+=lo,lo)}function longest_match(cs,is){var us=cs.max_chain_length,hs=cs.strstart,lo,co,uo=cs.prev_length,ga=cs.nice_match,ba=cs.strstart>cs.w_size-MIN_LOOKAHEAD?cs.strstart-(cs.w_size-MIN_LOOKAHEAD):0,xa=cs.window,_a=cs.w_mask,$a=cs.prev,xl=cs.strstart+MAX_MATCH,yl=xa[hs+uo-1],wl=xa[hs+uo];cs.prev_length>=cs.good_match&&(us>>=2),ga>cs.lookahead&&(ga=cs.lookahead);do if(lo=is,!(xa[lo+uo]!==wl||xa[lo+uo-1]!==yl||xa[lo]!==xa[hs]||xa[++lo]!==xa[hs+1])){hs+=2,lo++;do;while(xa[++hs]===xa[++lo]&&xa[++hs]===xa[++lo]&&xa[++hs]===xa[++lo]&&xa[++hs]===xa[++lo]&&xa[++hs]===xa[++lo]&&xa[++hs]===xa[++lo]&&xa[++hs]===xa[++lo]&&xa[++hs]===xa[++lo]&&hs<xl);if(co=MAX_MATCH-(xl-hs),hs=xl-MAX_MATCH,co>uo){if(cs.match_start=is,uo=co,co>=ga)break;yl=xa[hs+uo-1],wl=xa[hs+uo]}}while((is=$a[is&_a])>ba&&--us!==0);return uo<=cs.lookahead?uo:cs.lookahead}function fill_window(cs){var is=cs.w_size,us,hs,lo,co,uo;do{if(co=cs.window_size-cs.lookahead-cs.strstart,cs.strstart>=is+(is-MIN_LOOKAHEAD)){utils$6.arraySet(cs.window,cs.window,is,is,0),cs.match_start-=is,cs.strstart-=is,cs.block_start-=is,hs=cs.hash_size,us=hs;do lo=cs.head[--us],cs.head[us]=lo>=is?lo-is:0;while(--hs);hs=is,us=hs;do lo=cs.prev[--us],cs.prev[us]=lo>=is?lo-is:0;while(--hs);co+=is}if(cs.strm.avail_in===0)break;if(hs=read_buf(cs.strm,cs.window,cs.strstart+cs.lookahead,co),cs.lookahead+=hs,cs.lookahead+cs.insert>=MIN_MATCH)for(uo=cs.strstart-cs.insert,cs.ins_h=cs.window[uo],cs.ins_h=(cs.ins_h<<cs.hash_shift^cs.window[uo+1])&cs.hash_mask;cs.insert&&(cs.ins_h=(cs.ins_h<<cs.hash_shift^cs.window[uo+MIN_MATCH-1])&cs.hash_mask,cs.prev[uo&cs.w_mask]=cs.head[cs.ins_h],cs.head[cs.ins_h]=uo,uo++,cs.insert--,!(cs.lookahead+cs.insert<MIN_MATCH)););}while(cs.lookahead<MIN_LOOKAHEAD&&cs.strm.avail_in!==0)}function deflate_stored(cs,is){var us=65535;for(us>cs.pending_buf_size-5&&(us=cs.pending_buf_size-5);;){if(cs.lookahead<=1){if(fill_window(cs),cs.lookahead===0&&is===Z_NO_FLUSH$1)return BS_NEED_MORE;if(cs.lookahead===0)break}cs.strstart+=cs.lookahead,cs.lookahead=0;var hs=cs.block_start+us;if((cs.strstart===0||cs.strstart>=hs)&&(cs.lookahead=cs.strstart-hs,cs.strstart=hs,flush_block_only(cs,!1),cs.strm.avail_out===0)||cs.strstart-cs.block_start>=cs.w_size-MIN_LOOKAHEAD&&(flush_block_only(cs,!1),cs.strm.avail_out===0))return BS_NEED_MORE}return cs.insert=0,is===Z_FINISH$2?(flush_block_only(cs,!0),cs.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(cs.strstart>cs.block_start&&(flush_block_only(cs,!1),cs.strm.avail_out===0),BS_NEED_MORE)}function deflate_fast(cs,is){for(var us,hs;;){if(cs.lookahead<MIN_LOOKAHEAD){if(fill_window(cs),cs.lookahead<MIN_LOOKAHEAD&&is===Z_NO_FLUSH$1)return BS_NEED_MORE;if(cs.lookahead===0)break}if(us=0,cs.lookahead>=MIN_MATCH&&(cs.ins_h=(cs.ins_h<<cs.hash_shift^cs.window[cs.strstart+MIN_MATCH-1])&cs.hash_mask,us=cs.prev[cs.strstart&cs.w_mask]=cs.head[cs.ins_h],cs.head[cs.ins_h]=cs.strstart),us!==0&&cs.strstart-us<=cs.w_size-MIN_LOOKAHEAD&&(cs.match_length=longest_match(cs,us)),cs.match_length>=MIN_MATCH)if(hs=trees._tr_tally(cs,cs.strstart-cs.match_start,cs.match_length-MIN_MATCH),cs.lookahead-=cs.match_length,cs.match_length<=cs.max_lazy_match&&cs.lookahead>=MIN_MATCH){cs.match_length--;do cs.strstart++,cs.ins_h=(cs.ins_h<<cs.hash_shift^cs.window[cs.strstart+MIN_MATCH-1])&cs.hash_mask,us=cs.prev[cs.strstart&cs.w_mask]=cs.head[cs.ins_h],cs.head[cs.ins_h]=cs.strstart;while(--cs.match_length!==0);cs.strstart++}else cs.strstart+=cs.match_length,cs.match_length=0,cs.ins_h=cs.window[cs.strstart],cs.ins_h=(cs.ins_h<<cs.hash_shift^cs.window[cs.strstart+1])&cs.hash_mask;else hs=trees._tr_tally(cs,0,cs.window[cs.strstart]),cs.lookahead--,cs.strstart++;if(hs&&(flush_block_only(cs,!1),cs.strm.avail_out===0))return BS_NEED_MORE}return cs.insert=cs.strstart<MIN_MATCH-1?cs.strstart:MIN_MATCH-1,is===Z_FINISH$2?(flush_block_only(cs,!0),cs.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):cs.last_lit&&(flush_block_only(cs,!1),cs.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(cs,is){for(var us,hs,lo;;){if(cs.lookahead<MIN_LOOKAHEAD){if(fill_window(cs),cs.lookahead<MIN_LOOKAHEAD&&is===Z_NO_FLUSH$1)return BS_NEED_MORE;if(cs.lookahead===0)break}if(us=0,cs.lookahead>=MIN_MATCH&&(cs.ins_h=(cs.ins_h<<cs.hash_shift^cs.window[cs.strstart+MIN_MATCH-1])&cs.hash_mask,us=cs.prev[cs.strstart&cs.w_mask]=cs.head[cs.ins_h],cs.head[cs.ins_h]=cs.strstart),cs.prev_length=cs.match_length,cs.prev_match=cs.match_start,cs.match_length=MIN_MATCH-1,us!==0&&cs.prev_length<cs.max_lazy_match&&cs.strstart-us<=cs.w_size-MIN_LOOKAHEAD&&(cs.match_length=longest_match(cs,us),cs.match_length<=5&&(cs.strategy===Z_FILTERED||cs.match_length===MIN_MATCH&&cs.strstart-cs.match_start>4096)&&(cs.match_length=MIN_MATCH-1)),cs.prev_length>=MIN_MATCH&&cs.match_length<=cs.prev_length){lo=cs.strstart+cs.lookahead-MIN_MATCH,hs=trees._tr_tally(cs,cs.strstart-1-cs.prev_match,cs.prev_length-MIN_MATCH),cs.lookahead-=cs.prev_length-1,cs.prev_length-=2;do++cs.strstart<=lo&&(cs.ins_h=(cs.ins_h<<cs.hash_shift^cs.window[cs.strstart+MIN_MATCH-1])&cs.hash_mask,us=cs.prev[cs.strstart&cs.w_mask]=cs.head[cs.ins_h],cs.head[cs.ins_h]=cs.strstart);while(--cs.prev_length!==0);if(cs.match_available=0,cs.match_length=MIN_MATCH-1,cs.strstart++,hs&&(flush_block_only(cs,!1),cs.strm.avail_out===0))return BS_NEED_MORE}else if(cs.match_available){if(hs=trees._tr_tally(cs,0,cs.window[cs.strstart-1]),hs&&flush_block_only(cs,!1),cs.strstart++,cs.lookahead--,cs.strm.avail_out===0)return BS_NEED_MORE}else cs.match_available=1,cs.strstart++,cs.lookahead--}return cs.match_available&&(hs=trees._tr_tally(cs,0,cs.window[cs.strstart-1]),cs.match_available=0),cs.insert=cs.strstart<MIN_MATCH-1?cs.strstart:MIN_MATCH-1,is===Z_FINISH$2?(flush_block_only(cs,!0),cs.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):cs.last_lit&&(flush_block_only(cs,!1),cs.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(cs,is){for(var us,hs,lo,co,uo=cs.window;;){if(cs.lookahead<=MAX_MATCH){if(fill_window(cs),cs.lookahead<=MAX_MATCH&&is===Z_NO_FLUSH$1)return BS_NEED_MORE;if(cs.lookahead===0)break}if(cs.match_length=0,cs.lookahead>=MIN_MATCH&&cs.strstart>0&&(lo=cs.strstart-1,hs=uo[lo],hs===uo[++lo]&&hs===uo[++lo]&&hs===uo[++lo])){co=cs.strstart+MAX_MATCH;do;while(hs===uo[++lo]&&hs===uo[++lo]&&hs===uo[++lo]&&hs===uo[++lo]&&hs===uo[++lo]&&hs===uo[++lo]&&hs===uo[++lo]&&hs===uo[++lo]&&lo<co);cs.match_length=MAX_MATCH-(co-lo),cs.match_length>cs.lookahead&&(cs.match_length=cs.lookahead)}if(cs.match_length>=MIN_MATCH?(us=trees._tr_tally(cs,1,cs.match_length-MIN_MATCH),cs.lookahead-=cs.match_length,cs.strstart+=cs.match_length,cs.match_length=0):(us=trees._tr_tally(cs,0,cs.window[cs.strstart]),cs.lookahead--,cs.strstart++),us&&(flush_block_only(cs,!1),cs.strm.avail_out===0))return BS_NEED_MORE}return cs.insert=0,is===Z_FINISH$2?(flush_block_only(cs,!0),cs.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):cs.last_lit&&(flush_block_only(cs,!1),cs.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(cs,is){for(var us;;){if(cs.lookahead===0&&(fill_window(cs),cs.lookahead===0)){if(is===Z_NO_FLUSH$1)return BS_NEED_MORE;break}if(cs.match_length=0,us=trees._tr_tally(cs,0,cs.window[cs.strstart]),cs.lookahead--,cs.strstart++,us&&(flush_block_only(cs,!1),cs.strm.avail_out===0))return BS_NEED_MORE}return cs.insert=0,is===Z_FINISH$2?(flush_block_only(cs,!0),cs.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):cs.last_lit&&(flush_block_only(cs,!1),cs.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(cs,is,us,hs,lo){this.good_length=cs,this.max_lazy=is,this.nice_length=us,this.max_chain=hs,this.func=lo}var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(cs){cs.window_size=2*cs.w_size,zero(cs.head),cs.max_lazy_match=configuration_table[cs.level].max_lazy,cs.good_match=configuration_table[cs.level].good_length,cs.nice_match=configuration_table[cs.level].nice_length,cs.max_chain_length=configuration_table[cs.level].max_chain,cs.strstart=0,cs.block_start=0,cs.lookahead=0,cs.insert=0,cs.match_length=cs.prev_length=MIN_MATCH-1,cs.match_available=0,cs.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils$6.Buf16(HEAP_SIZE*2),this.dyn_dtree=new utils$6.Buf16((2*D_CODES+1)*2),this.bl_tree=new utils$6.Buf16((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils$6.Buf16(MAX_BITS+1),this.heap=new utils$6.Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils$6.Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(cs){var is;return!cs||!cs.state?err(cs,Z_STREAM_ERROR$1):(cs.total_in=cs.total_out=0,cs.data_type=Z_UNKNOWN,is=cs.state,is.pending=0,is.pending_out=0,is.wrap<0&&(is.wrap=-is.wrap),is.status=is.wrap?INIT_STATE:BUSY_STATE,cs.adler=is.wrap===2?0:1,is.last_flush=Z_NO_FLUSH$1,trees._tr_init(is),Z_OK$2)}function deflateReset(cs){var is=deflateResetKeep(cs);return is===Z_OK$2&&lm_init(cs.state),is}function deflateSetHeader(cs,is){return!cs||!cs.state||cs.state.wrap!==2?Z_STREAM_ERROR$1:(cs.state.gzhead=is,Z_OK$2)}function deflateInit2(cs,is,us,hs,lo,co){if(!cs)return Z_STREAM_ERROR$1;var uo=1;if(is===Z_DEFAULT_COMPRESSION$1&&(is=6),hs<0?(uo=0,hs=-hs):hs>15&&(uo=2,hs-=16),lo<1||lo>MAX_MEM_LEVEL||us!==Z_DEFLATED$2||hs<8||hs>15||is<0||is>9||co<0||co>Z_FIXED)return err(cs,Z_STREAM_ERROR$1);hs===8&&(hs=9);var ga=new DeflateState;return cs.state=ga,ga.strm=cs,ga.wrap=uo,ga.gzhead=null,ga.w_bits=hs,ga.w_size=1<<ga.w_bits,ga.w_mask=ga.w_size-1,ga.hash_bits=lo+7,ga.hash_size=1<<ga.hash_bits,ga.hash_mask=ga.hash_size-1,ga.hash_shift=~~((ga.hash_bits+MIN_MATCH-1)/MIN_MATCH),ga.window=new utils$6.Buf8(ga.w_size*2),ga.head=new utils$6.Buf16(ga.hash_size),ga.prev=new utils$6.Buf16(ga.w_size),ga.lit_bufsize=1<<lo+6,ga.pending_buf_size=ga.lit_bufsize*4,ga.pending_buf=new utils$6.Buf8(ga.pending_buf_size),ga.d_buf=1*ga.lit_bufsize,ga.l_buf=3*ga.lit_bufsize,ga.level=is,ga.strategy=co,ga.method=us,deflateReset(cs)}function deflateInit(cs,is){return deflateInit2(cs,is,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1)}function deflate$2(cs,is){var us,hs,lo,co;if(!cs||!cs.state||is>Z_BLOCK$1||is<0)return cs?err(cs,Z_STREAM_ERROR$1):Z_STREAM_ERROR$1;if(hs=cs.state,!cs.output||!cs.input&&cs.avail_in!==0||hs.status===FINISH_STATE&&is!==Z_FINISH$2)return err(cs,cs.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$1);if(hs.strm=cs,us=hs.last_flush,hs.last_flush=is,hs.status===INIT_STATE)if(hs.wrap===2)cs.adler=0,put_byte(hs,31),put_byte(hs,139),put_byte(hs,8),hs.gzhead?(put_byte(hs,(hs.gzhead.text?1:0)+(hs.gzhead.hcrc?2:0)+(hs.gzhead.extra?4:0)+(hs.gzhead.name?8:0)+(hs.gzhead.comment?16:0)),put_byte(hs,hs.gzhead.time&255),put_byte(hs,hs.gzhead.time>>8&255),put_byte(hs,hs.gzhead.time>>16&255),put_byte(hs,hs.gzhead.time>>24&255),put_byte(hs,hs.level===9?2:hs.strategy>=Z_HUFFMAN_ONLY||hs.level<2?4:0),put_byte(hs,hs.gzhead.os&255),hs.gzhead.extra&&hs.gzhead.extra.length&&(put_byte(hs,hs.gzhead.extra.length&255),put_byte(hs,hs.gzhead.extra.length>>8&255)),hs.gzhead.hcrc&&(cs.adler=crc32$1(cs.adler,hs.pending_buf,hs.pending,0)),hs.gzindex=0,hs.status=EXTRA_STATE):(put_byte(hs,0),put_byte(hs,0),put_byte(hs,0),put_byte(hs,0),put_byte(hs,0),put_byte(hs,hs.level===9?2:hs.strategy>=Z_HUFFMAN_ONLY||hs.level<2?4:0),put_byte(hs,OS_CODE),hs.status=BUSY_STATE);else{var uo=Z_DEFLATED$2+(hs.w_bits-8<<4)<<8,ga=-1;hs.strategy>=Z_HUFFMAN_ONLY||hs.level<2?ga=0:hs.level<6?ga=1:hs.level===6?ga=2:ga=3,uo|=ga<<6,hs.strstart!==0&&(uo|=PRESET_DICT),uo+=31-uo%31,hs.status=BUSY_STATE,putShortMSB(hs,uo),hs.strstart!==0&&(putShortMSB(hs,cs.adler>>>16),putShortMSB(hs,cs.adler&65535)),cs.adler=1}if(hs.status===EXTRA_STATE)if(hs.gzhead.extra){for(lo=hs.pending;hs.gzindex<(hs.gzhead.extra.length&65535)&&!(hs.pending===hs.pending_buf_size&&(hs.gzhead.hcrc&&hs.pending>lo&&(cs.adler=crc32$1(cs.adler,hs.pending_buf,hs.pending-lo,lo)),flush_pending(cs),lo=hs.pending,hs.pending===hs.pending_buf_size));)put_byte(hs,hs.gzhead.extra[hs.gzindex]&255),hs.gzindex++;hs.gzhead.hcrc&&hs.pending>lo&&(cs.adler=crc32$1(cs.adler,hs.pending_buf,hs.pending-lo,lo)),hs.gzindex===hs.gzhead.extra.length&&(hs.gzindex=0,hs.status=NAME_STATE)}else hs.status=NAME_STATE;if(hs.status===NAME_STATE)if(hs.gzhead.name){lo=hs.pending;do{if(hs.pending===hs.pending_buf_size&&(hs.gzhead.hcrc&&hs.pending>lo&&(cs.adler=crc32$1(cs.adler,hs.pending_buf,hs.pending-lo,lo)),flush_pending(cs),lo=hs.pending,hs.pending===hs.pending_buf_size)){co=1;break}hs.gzindex<hs.gzhead.name.length?co=hs.gzhead.name.charCodeAt(hs.gzindex++)&255:co=0,put_byte(hs,co)}while(co!==0);hs.gzhead.hcrc&&hs.pending>lo&&(cs.adler=crc32$1(cs.adler,hs.pending_buf,hs.pending-lo,lo)),co===0&&(hs.gzindex=0,hs.status=COMMENT_STATE)}else hs.status=COMMENT_STATE;if(hs.status===COMMENT_STATE)if(hs.gzhead.comment){lo=hs.pending;do{if(hs.pending===hs.pending_buf_size&&(hs.gzhead.hcrc&&hs.pending>lo&&(cs.adler=crc32$1(cs.adler,hs.pending_buf,hs.pending-lo,lo)),flush_pending(cs),lo=hs.pending,hs.pending===hs.pending_buf_size)){co=1;break}hs.gzindex<hs.gzhead.comment.length?co=hs.gzhead.comment.charCodeAt(hs.gzindex++)&255:co=0,put_byte(hs,co)}while(co!==0);hs.gzhead.hcrc&&hs.pending>lo&&(cs.adler=crc32$1(cs.adler,hs.pending_buf,hs.pending-lo,lo)),co===0&&(hs.status=HCRC_STATE)}else hs.status=HCRC_STATE;if(hs.status===HCRC_STATE&&(hs.gzhead.hcrc?(hs.pending+2>hs.pending_buf_size&&flush_pending(cs),hs.pending+2<=hs.pending_buf_size&&(put_byte(hs,cs.adler&255),put_byte(hs,cs.adler>>8&255),cs.adler=0,hs.status=BUSY_STATE)):hs.status=BUSY_STATE),hs.pending!==0){if(flush_pending(cs),cs.avail_out===0)return hs.last_flush=-1,Z_OK$2}else if(cs.avail_in===0&&rank(is)<=rank(us)&&is!==Z_FINISH$2)return err(cs,Z_BUF_ERROR$1);if(hs.status===FINISH_STATE&&cs.avail_in!==0)return err(cs,Z_BUF_ERROR$1);if(cs.avail_in!==0||hs.lookahead!==0||is!==Z_NO_FLUSH$1&&hs.status!==FINISH_STATE){var ba=hs.strategy===Z_HUFFMAN_ONLY?deflate_huff(hs,is):hs.strategy===Z_RLE?deflate_rle(hs,is):configuration_table[hs.level].func(hs,is);if((ba===BS_FINISH_STARTED||ba===BS_FINISH_DONE)&&(hs.status=FINISH_STATE),ba===BS_NEED_MORE||ba===BS_FINISH_STARTED)return cs.avail_out===0&&(hs.last_flush=-1),Z_OK$2;if(ba===BS_BLOCK_DONE&&(is===Z_PARTIAL_FLUSH?trees._tr_align(hs):is!==Z_BLOCK$1&&(trees._tr_stored_block(hs,0,0,!1),is===Z_FULL_FLUSH&&(zero(hs.head),hs.lookahead===0&&(hs.strstart=0,hs.block_start=0,hs.insert=0))),flush_pending(cs),cs.avail_out===0))return hs.last_flush=-1,Z_OK$2}return is!==Z_FINISH$2?Z_OK$2:hs.wrap<=0?Z_STREAM_END$2:(hs.wrap===2?(put_byte(hs,cs.adler&255),put_byte(hs,cs.adler>>8&255),put_byte(hs,cs.adler>>16&255),put_byte(hs,cs.adler>>24&255),put_byte(hs,cs.total_in&255),put_byte(hs,cs.total_in>>8&255),put_byte(hs,cs.total_in>>16&255),put_byte(hs,cs.total_in>>24&255)):(putShortMSB(hs,cs.adler>>>16),putShortMSB(hs,cs.adler&65535)),flush_pending(cs),hs.wrap>0&&(hs.wrap=-hs.wrap),hs.pending!==0?Z_OK$2:Z_STREAM_END$2)}function deflateEnd(cs){var is;return!cs||!cs.state?Z_STREAM_ERROR$1:(is=cs.state.status,is!==INIT_STATE&&is!==EXTRA_STATE&&is!==NAME_STATE&&is!==COMMENT_STATE&&is!==HCRC_STATE&&is!==BUSY_STATE&&is!==FINISH_STATE?err(cs,Z_STREAM_ERROR$1):(cs.state=null,is===BUSY_STATE?err(cs,Z_DATA_ERROR$1):Z_OK$2))}function deflateSetDictionary(cs,is){var us=is.length,hs,lo,co,uo,ga,ba,xa,_a;if(!cs||!cs.state||(hs=cs.state,uo=hs.wrap,uo===2||uo===1&&hs.status!==INIT_STATE||hs.lookahead))return Z_STREAM_ERROR$1;for(uo===1&&(cs.adler=adler32$1(cs.adler,is,us,0)),hs.wrap=0,us>=hs.w_size&&(uo===0&&(zero(hs.head),hs.strstart=0,hs.block_start=0,hs.insert=0),_a=new utils$6.Buf8(hs.w_size),utils$6.arraySet(_a,is,us-hs.w_size,hs.w_size,0),is=_a,us=hs.w_size),ga=cs.avail_in,ba=cs.next_in,xa=cs.input,cs.avail_in=us,cs.next_in=0,cs.input=is,fill_window(hs);hs.lookahead>=MIN_MATCH;){lo=hs.strstart,co=hs.lookahead-(MIN_MATCH-1);do hs.ins_h=(hs.ins_h<<hs.hash_shift^hs.window[lo+MIN_MATCH-1])&hs.hash_mask,hs.prev[lo&hs.w_mask]=hs.head[hs.ins_h],hs.head[hs.ins_h]=lo,lo++;while(--co);hs.strstart=lo,hs.lookahead=MIN_MATCH-1,fill_window(hs)}return hs.strstart+=hs.lookahead,hs.block_start=hs.strstart,hs.insert=hs.lookahead,hs.lookahead=0,hs.match_length=hs.prev_length=MIN_MATCH-1,hs.match_available=0,cs.next_in=ba,cs.input=xa,cs.avail_in=ga,hs.wrap=uo,Z_OK$2}deflate$3.deflateInit=deflateInit;deflate$3.deflateInit2=deflateInit2;deflate$3.deflateReset=deflateReset;deflate$3.deflateResetKeep=deflateResetKeep;deflate$3.deflateSetHeader=deflateSetHeader;deflate$3.deflate=deflate$2;deflate$3.deflateEnd=deflateEnd;deflate$3.deflateSetDictionary=deflateSetDictionary;deflate$3.deflateInfo="pako deflate (from Nodeca project)";var strings$2={},utils$5=common,STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(cs){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(cs){STR_APPLY_UIA_OK=!1}var _utf8len=new utils$5.Buf8(256);for(var q$1=0;q$1<256;q$1++)_utf8len[q$1]=q$1>=252?6:q$1>=248?5:q$1>=240?4:q$1>=224?3:q$1>=192?2:1;_utf8len[254]=_utf8len[254]=1;strings$2.string2buf=function(cs){var is,us,hs,lo,co,uo=cs.length,ga=0;for(lo=0;lo<uo;lo++)us=cs.charCodeAt(lo),(us&64512)===55296&&lo+1<uo&&(hs=cs.charCodeAt(lo+1),(hs&64512)===56320&&(us=65536+(us-55296<<10)+(hs-56320),lo++)),ga+=us<128?1:us<2048?2:us<65536?3:4;for(is=new utils$5.Buf8(ga),co=0,lo=0;co<ga;lo++)us=cs.charCodeAt(lo),(us&64512)===55296&&lo+1<uo&&(hs=cs.charCodeAt(lo+1),(hs&64512)===56320&&(us=65536+(us-55296<<10)+(hs-56320),lo++)),us<128?is[co++]=us:us<2048?(is[co++]=192|us>>>6,is[co++]=128|us&63):us<65536?(is[co++]=224|us>>>12,is[co++]=128|us>>>6&63,is[co++]=128|us&63):(is[co++]=240|us>>>18,is[co++]=128|us>>>12&63,is[co++]=128|us>>>6&63,is[co++]=128|us&63);return is};function buf2binstring(cs,is){if(is<65534&&(cs.subarray&&STR_APPLY_UIA_OK||!cs.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils$5.shrinkBuf(cs,is));for(var us="",hs=0;hs<is;hs++)us+=String.fromCharCode(cs[hs]);return us}strings$2.buf2binstring=function(cs){return buf2binstring(cs,cs.length)};strings$2.binstring2buf=function(cs){for(var is=new utils$5.Buf8(cs.length),us=0,hs=is.length;us<hs;us++)is[us]=cs.charCodeAt(us);return is};strings$2.buf2string=function(cs,is){var us,hs,lo,co,uo=is||cs.length,ga=new Array(uo*2);for(hs=0,us=0;us<uo;){if(lo=cs[us++],lo<128){ga[hs++]=lo;continue}if(co=_utf8len[lo],co>4){ga[hs++]=65533,us+=co-1;continue}for(lo&=co===2?31:co===3?15:7;co>1&&us<uo;)lo=lo<<6|cs[us++]&63,co--;if(co>1){ga[hs++]=65533;continue}lo<65536?ga[hs++]=lo:(lo-=65536,ga[hs++]=55296|lo>>10&1023,ga[hs++]=56320|lo&1023)}return buf2binstring(ga,hs)};strings$2.utf8border=function(cs,is){var us;for(is=is||cs.length,is>cs.length&&(is=cs.length),us=is-1;us>=0&&(cs[us]&192)===128;)us--;return us<0||us===0?is:us+_utf8len[cs[us]]>is?us:is};function ZStream$2(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream$2,zlib_deflate=deflate$3,utils$4=common,strings$1=strings$2,msg$1=messages,ZStream$1=zstream,toString$1=Object.prototype.toString,Z_NO_FLUSH=0,Z_FINISH$1=4,Z_OK$1=0,Z_STREAM_END$1=1,Z_SYNC_FLUSH=2,Z_DEFAULT_COMPRESSION=-1,Z_DEFAULT_STRATEGY=0,Z_DEFLATED$1=8;function Deflate(cs){if(!(this instanceof Deflate))return new Deflate(cs);this.options=utils$4.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY,to:""},cs||{});var is=this.options;is.raw&&is.windowBits>0?is.windowBits=-is.windowBits:is.gzip&&is.windowBits>0&&is.windowBits<16&&(is.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream$1,this.strm.avail_out=0;var us=zlib_deflate.deflateInit2(this.strm,is.level,is.method,is.windowBits,is.memLevel,is.strategy);if(us!==Z_OK$1)throw new Error(msg$1[us]);if(is.header&&zlib_deflate.deflateSetHeader(this.strm,is.header),is.dictionary){var hs;if(typeof is.dictionary=="string"?hs=strings$1.string2buf(is.dictionary):toString$1.call(is.dictionary)==="[object ArrayBuffer]"?hs=new Uint8Array(is.dictionary):hs=is.dictionary,us=zlib_deflate.deflateSetDictionary(this.strm,hs),us!==Z_OK$1)throw new Error(msg$1[us]);this._dict_set=!0}}Deflate.prototype.push=function(cs,is){var us=this.strm,hs=this.options.chunkSize,lo,co;if(this.ended)return!1;co=is===~~is?is:is===!0?Z_FINISH$1:Z_NO_FLUSH,typeof cs=="string"?us.input=strings$1.string2buf(cs):toString$1.call(cs)==="[object ArrayBuffer]"?us.input=new Uint8Array(cs):us.input=cs,us.next_in=0,us.avail_in=us.input.length;do{if(us.avail_out===0&&(us.output=new utils$4.Buf8(hs),us.next_out=0,us.avail_out=hs),lo=zlib_deflate.deflate(us,co),lo!==Z_STREAM_END$1&&lo!==Z_OK$1)return this.onEnd(lo),this.ended=!0,!1;(us.avail_out===0||us.avail_in===0&&(co===Z_FINISH$1||co===Z_SYNC_FLUSH))&&(this.options.to==="string"?this.onData(strings$1.buf2binstring(utils$4.shrinkBuf(us.output,us.next_out))):this.onData(utils$4.shrinkBuf(us.output,us.next_out)))}while((us.avail_in>0||us.avail_out===0)&&lo!==Z_STREAM_END$1);return co===Z_FINISH$1?(lo=zlib_deflate.deflateEnd(this.strm),this.onEnd(lo),this.ended=!0,lo===Z_OK$1):(co===Z_SYNC_FLUSH&&(this.onEnd(Z_OK$1),us.avail_out=0),!0)};Deflate.prototype.onData=function(cs){this.chunks.push(cs)};Deflate.prototype.onEnd=function(cs){cs===Z_OK$1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=utils$4.flattenChunks(this.chunks)),this.chunks=[],this.err=cs,this.msg=this.strm.msg};function deflate$1(cs,is){var us=new Deflate(is);if(us.push(cs,!0),us.err)throw us.msg||msg$1[us.err];return us.result}function deflateRaw(cs,is){return is=is||{},is.raw=!0,deflate$1(cs,is)}function gzip(cs,is){return is=is||{},is.gzip=!0,deflate$1(cs,is)}deflate$4.Deflate=Deflate;deflate$4.deflate=deflate$1;deflate$4.deflateRaw=deflateRaw;deflate$4.gzip=gzip;var inflate$4={},inflate$3={},BAD$1=30,TYPE$1=12,inffast=function cs(is,us){var hs,lo,co,uo,ga,ba,xa,_a,$a,xl,yl,wl,_l,El,Sl,Cl,Tl,Dl,Fl,Pl,Al,Rl,Il,Bl,Ol;hs=is.state,lo=is.next_in,Bl=is.input,co=lo+(is.avail_in-5),uo=is.next_out,Ol=is.output,ga=uo-(us-is.avail_out),ba=uo+(is.avail_out-257),xa=hs.dmax,_a=hs.wsize,$a=hs.whave,xl=hs.wnext,yl=hs.window,wl=hs.hold,_l=hs.bits,El=hs.lencode,Sl=hs.distcode,Cl=(1<<hs.lenbits)-1,Tl=(1<<hs.distbits)-1;e:do{_l<15&&(wl+=Bl[lo++]<<_l,_l+=8,wl+=Bl[lo++]<<_l,_l+=8),Dl=El[wl&Cl];t:for(;;){if(Fl=Dl>>>24,wl>>>=Fl,_l-=Fl,Fl=Dl>>>16&255,Fl===0)Ol[uo++]=Dl&65535;else if(Fl&16){Pl=Dl&65535,Fl&=15,Fl&&(_l<Fl&&(wl+=Bl[lo++]<<_l,_l+=8),Pl+=wl&(1<<Fl)-1,wl>>>=Fl,_l-=Fl),_l<15&&(wl+=Bl[lo++]<<_l,_l+=8,wl+=Bl[lo++]<<_l,_l+=8),Dl=Sl[wl&Tl];r:for(;;){if(Fl=Dl>>>24,wl>>>=Fl,_l-=Fl,Fl=Dl>>>16&255,Fl&16){if(Al=Dl&65535,Fl&=15,_l<Fl&&(wl+=Bl[lo++]<<_l,_l+=8,_l<Fl&&(wl+=Bl[lo++]<<_l,_l+=8)),Al+=wl&(1<<Fl)-1,Al>xa){is.msg="invalid distance too far back",hs.mode=BAD$1;break e}if(wl>>>=Fl,_l-=Fl,Fl=uo-ga,Al>Fl){if(Fl=Al-Fl,Fl>$a&&hs.sane){is.msg="invalid distance too far back",hs.mode=BAD$1;break e}if(Rl=0,Il=yl,xl===0){if(Rl+=_a-Fl,Fl<Pl){Pl-=Fl;do Ol[uo++]=yl[Rl++];while(--Fl);Rl=uo-Al,Il=Ol}}else if(xl<Fl){if(Rl+=_a+xl-Fl,Fl-=xl,Fl<Pl){Pl-=Fl;do Ol[uo++]=yl[Rl++];while(--Fl);if(Rl=0,xl<Pl){Fl=xl,Pl-=Fl;do Ol[uo++]=yl[Rl++];while(--Fl);Rl=uo-Al,Il=Ol}}}else if(Rl+=xl-Fl,Fl<Pl){Pl-=Fl;do Ol[uo++]=yl[Rl++];while(--Fl);Rl=uo-Al,Il=Ol}for(;Pl>2;)Ol[uo++]=Il[Rl++],Ol[uo++]=Il[Rl++],Ol[uo++]=Il[Rl++],Pl-=3;Pl&&(Ol[uo++]=Il[Rl++],Pl>1&&(Ol[uo++]=Il[Rl++]))}else{Rl=uo-Al;do Ol[uo++]=Ol[Rl++],Ol[uo++]=Ol[Rl++],Ol[uo++]=Ol[Rl++],Pl-=3;while(Pl>2);Pl&&(Ol[uo++]=Ol[Rl++],Pl>1&&(Ol[uo++]=Ol[Rl++]))}}else if(Fl&64){is.msg="invalid distance code",hs.mode=BAD$1;break e}else{Dl=Sl[(Dl&65535)+(wl&(1<<Fl)-1)];continue r}break}}else if(Fl&64)if(Fl&32){hs.mode=TYPE$1;break e}else{is.msg="invalid literal/length code",hs.mode=BAD$1;break e}else{Dl=El[(Dl&65535)+(wl&(1<<Fl)-1)];continue t}break}}while(lo<co&&uo<ba);Pl=_l>>3,lo-=Pl,_l-=Pl<<3,wl&=(1<<_l)-1,is.next_in=lo,is.next_out=uo,is.avail_in=lo<co?5+(co-lo):5-(lo-co),is.avail_out=uo<ba?257+(ba-uo):257-(uo-ba),hs.hold=wl,hs.bits=_l},utils$3=common,MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],inftrees=function cs(is,us,hs,lo,co,uo,ga,ba){var xa=ba.bits,_a=0,$a=0,xl=0,yl=0,wl=0,_l=0,El=0,Sl=0,Cl=0,Tl=0,Dl,Fl,Pl,Al,Rl,Il=null,Bl=0,Ol,zl=new utils$3.Buf16(MAXBITS+1),Hl=new utils$3.Buf16(MAXBITS+1),ou=null,au=0,_c,uu,lu;for(_a=0;_a<=MAXBITS;_a++)zl[_a]=0;for($a=0;$a<lo;$a++)zl[us[hs+$a]]++;for(wl=xa,yl=MAXBITS;yl>=1&&zl[yl]===0;yl--);if(wl>yl&&(wl=yl),yl===0)return co[uo++]=1<<24|64<<16|0,co[uo++]=1<<24|64<<16|0,ba.bits=1,0;for(xl=1;xl<yl&&zl[xl]===0;xl++);for(wl<xl&&(wl=xl),Sl=1,_a=1;_a<=MAXBITS;_a++)if(Sl<<=1,Sl-=zl[_a],Sl<0)return-1;if(Sl>0&&(is===CODES$1||yl!==1))return-1;for(Hl[1]=0,_a=1;_a<MAXBITS;_a++)Hl[_a+1]=Hl[_a]+zl[_a];for($a=0;$a<lo;$a++)us[hs+$a]!==0&&(ga[Hl[us[hs+$a]]++]=$a);if(is===CODES$1?(Il=ou=ga,Ol=19):is===LENS$1?(Il=lbase,Bl-=257,ou=lext,au-=257,Ol=256):(Il=dbase,ou=dext,Ol=-1),Tl=0,$a=0,_a=xl,Rl=uo,_l=wl,El=0,Pl=-1,Cl=1<<wl,Al=Cl-1,is===LENS$1&&Cl>ENOUGH_LENS$1||is===DISTS$1&&Cl>ENOUGH_DISTS$1)return 1;for(;;){_c=_a-El,ga[$a]<Ol?(uu=0,lu=ga[$a]):ga[$a]>Ol?(uu=ou[au+ga[$a]],lu=Il[Bl+ga[$a]]):(uu=96,lu=0),Dl=1<<_a-El,Fl=1<<_l,xl=Fl;do Fl-=Dl,co[Rl+(Tl>>El)+Fl]=_c<<24|uu<<16|lu|0;while(Fl!==0);for(Dl=1<<_a-1;Tl&Dl;)Dl>>=1;if(Dl!==0?(Tl&=Dl-1,Tl+=Dl):Tl=0,$a++,--zl[_a]===0){if(_a===yl)break;_a=us[hs+ga[$a]]}if(_a>wl&&(Tl&Al)!==Pl){for(El===0&&(El=wl),Rl+=xl,_l=_a-El,Sl=1<<_l;_l+El<yl&&(Sl-=zl[_l+El],!(Sl<=0));)_l++,Sl<<=1;if(Cl+=1<<_l,is===LENS$1&&Cl>ENOUGH_LENS$1||is===DISTS$1&&Cl>ENOUGH_DISTS$1)return 1;Pl=Tl&Al,co[Pl]=wl<<24|_l<<16|Rl-uo|0}}return Tl!==0&&(co[Rl+Tl]=_a-El<<24|64<<16|0),ba.bits=wl,0},utils$2=common,adler32=adler32_1,crc32=crc32_1,inflate_fast=inffast,inflate_table=inftrees,CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS;function zswap32(cs){return(cs>>>24&255)+(cs>>>8&65280)+((cs&65280)<<8)+((cs&255)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils$2.Buf16(320),this.work=new utils$2.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(cs){var is;return!cs||!cs.state?Z_STREAM_ERROR:(is=cs.state,cs.total_in=cs.total_out=is.total=0,cs.msg="",is.wrap&&(cs.adler=is.wrap&1),is.mode=HEAD,is.last=0,is.havedict=0,is.dmax=32768,is.head=null,is.hold=0,is.bits=0,is.lencode=is.lendyn=new utils$2.Buf32(ENOUGH_LENS),is.distcode=is.distdyn=new utils$2.Buf32(ENOUGH_DISTS),is.sane=1,is.back=-1,Z_OK)}function inflateReset(cs){var is;return!cs||!cs.state?Z_STREAM_ERROR:(is=cs.state,is.wsize=0,is.whave=0,is.wnext=0,inflateResetKeep(cs))}function inflateReset2(cs,is){var us,hs;return!cs||!cs.state||(hs=cs.state,is<0?(us=0,is=-is):(us=(is>>4)+1,is<48&&(is&=15)),is&&(is<8||is>15))?Z_STREAM_ERROR:(hs.window!==null&&hs.wbits!==is&&(hs.window=null),hs.wrap=us,hs.wbits=is,inflateReset(cs))}function inflateInit2(cs,is){var us,hs;return cs?(hs=new InflateState,cs.state=hs,hs.window=null,us=inflateReset2(cs,is),us!==Z_OK&&(cs.state=null),us):Z_STREAM_ERROR}function inflateInit(cs){return inflateInit2(cs,DEF_WBITS)}var virgin=!0,lenfix,distfix;function fixedtables(cs){if(virgin){var is;for(lenfix=new utils$2.Buf32(512),distfix=new utils$2.Buf32(32),is=0;is<144;)cs.lens[is++]=8;for(;is<256;)cs.lens[is++]=9;for(;is<280;)cs.lens[is++]=7;for(;is<288;)cs.lens[is++]=8;for(inflate_table(LENS,cs.lens,0,288,lenfix,0,cs.work,{bits:9}),is=0;is<32;)cs.lens[is++]=5;inflate_table(DISTS,cs.lens,0,32,distfix,0,cs.work,{bits:5}),virgin=!1}cs.lencode=lenfix,cs.lenbits=9,cs.distcode=distfix,cs.distbits=5}function updatewindow(cs,is,us,hs){var lo,co=cs.state;return co.window===null&&(co.wsize=1<<co.wbits,co.wnext=0,co.whave=0,co.window=new utils$2.Buf8(co.wsize)),hs>=co.wsize?(utils$2.arraySet(co.window,is,us-co.wsize,co.wsize,0),co.wnext=0,co.whave=co.wsize):(lo=co.wsize-co.wnext,lo>hs&&(lo=hs),utils$2.arraySet(co.window,is,us-hs,lo,co.wnext),hs-=lo,hs?(utils$2.arraySet(co.window,is,us-hs,hs,0),co.wnext=hs,co.whave=co.wsize):(co.wnext+=lo,co.wnext===co.wsize&&(co.wnext=0),co.whave<co.wsize&&(co.whave+=lo))),0}function inflate$2(cs,is){var us,hs,lo,co,uo,ga,ba,xa,_a,$a,xl,yl,wl,_l,El=0,Sl,Cl,Tl,Dl,Fl,Pl,Al,Rl,Il=new utils$2.Buf8(4),Bl,Ol,zl=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!cs||!cs.state||!cs.output||!cs.input&&cs.avail_in!==0)return Z_STREAM_ERROR;us=cs.state,us.mode===TYPE&&(us.mode=TYPEDO),uo=cs.next_out,lo=cs.output,ba=cs.avail_out,co=cs.next_in,hs=cs.input,ga=cs.avail_in,xa=us.hold,_a=us.bits,$a=ga,xl=ba,Rl=Z_OK;e:for(;;)switch(us.mode){case HEAD:if(us.wrap===0){us.mode=TYPEDO;break}for(;_a<16;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}if(us.wrap&2&&xa===35615){us.check=0,Il[0]=xa&255,Il[1]=xa>>>8&255,us.check=crc32(us.check,Il,2,0),xa=0,_a=0,us.mode=FLAGS;break}if(us.flags=0,us.head&&(us.head.done=!1),!(us.wrap&1)||(((xa&255)<<8)+(xa>>8))%31){cs.msg="incorrect header check",us.mode=BAD;break}if((xa&15)!==Z_DEFLATED){cs.msg="unknown compression method",us.mode=BAD;break}if(xa>>>=4,_a-=4,Al=(xa&15)+8,us.wbits===0)us.wbits=Al;else if(Al>us.wbits){cs.msg="invalid window size",us.mode=BAD;break}us.dmax=1<<Al,cs.adler=us.check=1,us.mode=xa&512?DICTID:TYPE,xa=0,_a=0;break;case FLAGS:for(;_a<16;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}if(us.flags=xa,(us.flags&255)!==Z_DEFLATED){cs.msg="unknown compression method",us.mode=BAD;break}if(us.flags&57344){cs.msg="unknown header flags set",us.mode=BAD;break}us.head&&(us.head.text=xa>>8&1),us.flags&512&&(Il[0]=xa&255,Il[1]=xa>>>8&255,us.check=crc32(us.check,Il,2,0)),xa=0,_a=0,us.mode=TIME;case TIME:for(;_a<32;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}us.head&&(us.head.time=xa),us.flags&512&&(Il[0]=xa&255,Il[1]=xa>>>8&255,Il[2]=xa>>>16&255,Il[3]=xa>>>24&255,us.check=crc32(us.check,Il,4,0)),xa=0,_a=0,us.mode=OS;case OS:for(;_a<16;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}us.head&&(us.head.xflags=xa&255,us.head.os=xa>>8),us.flags&512&&(Il[0]=xa&255,Il[1]=xa>>>8&255,us.check=crc32(us.check,Il,2,0)),xa=0,_a=0,us.mode=EXLEN;case EXLEN:if(us.flags&1024){for(;_a<16;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}us.length=xa,us.head&&(us.head.extra_len=xa),us.flags&512&&(Il[0]=xa&255,Il[1]=xa>>>8&255,us.check=crc32(us.check,Il,2,0)),xa=0,_a=0}else us.head&&(us.head.extra=null);us.mode=EXTRA;case EXTRA:if(us.flags&1024&&(yl=us.length,yl>ga&&(yl=ga),yl&&(us.head&&(Al=us.head.extra_len-us.length,us.head.extra||(us.head.extra=new Array(us.head.extra_len)),utils$2.arraySet(us.head.extra,hs,co,yl,Al)),us.flags&512&&(us.check=crc32(us.check,hs,yl,co)),ga-=yl,co+=yl,us.length-=yl),us.length))break e;us.length=0,us.mode=NAME;case NAME:if(us.flags&2048){if(ga===0)break e;yl=0;do Al=hs[co+yl++],us.head&&Al&&us.length<65536&&(us.head.name+=String.fromCharCode(Al));while(Al&&yl<ga);if(us.flags&512&&(us.check=crc32(us.check,hs,yl,co)),ga-=yl,co+=yl,Al)break e}else us.head&&(us.head.name=null);us.length=0,us.mode=COMMENT;case COMMENT:if(us.flags&4096){if(ga===0)break e;yl=0;do Al=hs[co+yl++],us.head&&Al&&us.length<65536&&(us.head.comment+=String.fromCharCode(Al));while(Al&&yl<ga);if(us.flags&512&&(us.check=crc32(us.check,hs,yl,co)),ga-=yl,co+=yl,Al)break e}else us.head&&(us.head.comment=null);us.mode=HCRC;case HCRC:if(us.flags&512){for(;_a<16;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}if(xa!==(us.check&65535)){cs.msg="header crc mismatch",us.mode=BAD;break}xa=0,_a=0}us.head&&(us.head.hcrc=us.flags>>9&1,us.head.done=!0),cs.adler=us.check=0,us.mode=TYPE;break;case DICTID:for(;_a<32;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}cs.adler=us.check=zswap32(xa),xa=0,_a=0,us.mode=DICT;case DICT:if(us.havedict===0)return cs.next_out=uo,cs.avail_out=ba,cs.next_in=co,cs.avail_in=ga,us.hold=xa,us.bits=_a,Z_NEED_DICT;cs.adler=us.check=1,us.mode=TYPE;case TYPE:if(is===Z_BLOCK||is===Z_TREES)break e;case TYPEDO:if(us.last){xa>>>=_a&7,_a-=_a&7,us.mode=CHECK;break}for(;_a<3;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}switch(us.last=xa&1,xa>>>=1,_a-=1,xa&3){case 0:us.mode=STORED;break;case 1:if(fixedtables(us),us.mode=LEN_,is===Z_TREES){xa>>>=2,_a-=2;break e}break;case 2:us.mode=TABLE;break;case 3:cs.msg="invalid block type",us.mode=BAD}xa>>>=2,_a-=2;break;case STORED:for(xa>>>=_a&7,_a-=_a&7;_a<32;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}if((xa&65535)!==(xa>>>16^65535)){cs.msg="invalid stored block lengths",us.mode=BAD;break}if(us.length=xa&65535,xa=0,_a=0,us.mode=COPY_,is===Z_TREES)break e;case COPY_:us.mode=COPY;case COPY:if(yl=us.length,yl){if(yl>ga&&(yl=ga),yl>ba&&(yl=ba),yl===0)break e;utils$2.arraySet(lo,hs,co,yl,uo),ga-=yl,co+=yl,ba-=yl,uo+=yl,us.length-=yl;break}us.mode=TYPE;break;case TABLE:for(;_a<14;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}if(us.nlen=(xa&31)+257,xa>>>=5,_a-=5,us.ndist=(xa&31)+1,xa>>>=5,_a-=5,us.ncode=(xa&15)+4,xa>>>=4,_a-=4,us.nlen>286||us.ndist>30){cs.msg="too many length or distance symbols",us.mode=BAD;break}us.have=0,us.mode=LENLENS;case LENLENS:for(;us.have<us.ncode;){for(;_a<3;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}us.lens[zl[us.have++]]=xa&7,xa>>>=3,_a-=3}for(;us.have<19;)us.lens[zl[us.have++]]=0;if(us.lencode=us.lendyn,us.lenbits=7,Bl={bits:us.lenbits},Rl=inflate_table(CODES,us.lens,0,19,us.lencode,0,us.work,Bl),us.lenbits=Bl.bits,Rl){cs.msg="invalid code lengths set",us.mode=BAD;break}us.have=0,us.mode=CODELENS;case CODELENS:for(;us.have<us.nlen+us.ndist;){for(;El=us.lencode[xa&(1<<us.lenbits)-1],Sl=El>>>24,Cl=El>>>16&255,Tl=El&65535,!(Sl<=_a);){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}if(Tl<16)xa>>>=Sl,_a-=Sl,us.lens[us.have++]=Tl;else{if(Tl===16){for(Ol=Sl+2;_a<Ol;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}if(xa>>>=Sl,_a-=Sl,us.have===0){cs.msg="invalid bit length repeat",us.mode=BAD;break}Al=us.lens[us.have-1],yl=3+(xa&3),xa>>>=2,_a-=2}else if(Tl===17){for(Ol=Sl+3;_a<Ol;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}xa>>>=Sl,_a-=Sl,Al=0,yl=3+(xa&7),xa>>>=3,_a-=3}else{for(Ol=Sl+7;_a<Ol;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}xa>>>=Sl,_a-=Sl,Al=0,yl=11+(xa&127),xa>>>=7,_a-=7}if(us.have+yl>us.nlen+us.ndist){cs.msg="invalid bit length repeat",us.mode=BAD;break}for(;yl--;)us.lens[us.have++]=Al}}if(us.mode===BAD)break;if(us.lens[256]===0){cs.msg="invalid code -- missing end-of-block",us.mode=BAD;break}if(us.lenbits=9,Bl={bits:us.lenbits},Rl=inflate_table(LENS,us.lens,0,us.nlen,us.lencode,0,us.work,Bl),us.lenbits=Bl.bits,Rl){cs.msg="invalid literal/lengths set",us.mode=BAD;break}if(us.distbits=6,us.distcode=us.distdyn,Bl={bits:us.distbits},Rl=inflate_table(DISTS,us.lens,us.nlen,us.ndist,us.distcode,0,us.work,Bl),us.distbits=Bl.bits,Rl){cs.msg="invalid distances set",us.mode=BAD;break}if(us.mode=LEN_,is===Z_TREES)break e;case LEN_:us.mode=LEN;case LEN:if(ga>=6&&ba>=258){cs.next_out=uo,cs.avail_out=ba,cs.next_in=co,cs.avail_in=ga,us.hold=xa,us.bits=_a,inflate_fast(cs,xl),uo=cs.next_out,lo=cs.output,ba=cs.avail_out,co=cs.next_in,hs=cs.input,ga=cs.avail_in,xa=us.hold,_a=us.bits,us.mode===TYPE&&(us.back=-1);break}for(us.back=0;El=us.lencode[xa&(1<<us.lenbits)-1],Sl=El>>>24,Cl=El>>>16&255,Tl=El&65535,!(Sl<=_a);){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}if(Cl&&!(Cl&240)){for(Dl=Sl,Fl=Cl,Pl=Tl;El=us.lencode[Pl+((xa&(1<<Dl+Fl)-1)>>Dl)],Sl=El>>>24,Cl=El>>>16&255,Tl=El&65535,!(Dl+Sl<=_a);){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}xa>>>=Dl,_a-=Dl,us.back+=Dl}if(xa>>>=Sl,_a-=Sl,us.back+=Sl,us.length=Tl,Cl===0){us.mode=LIT;break}if(Cl&32){us.back=-1,us.mode=TYPE;break}if(Cl&64){cs.msg="invalid literal/length code",us.mode=BAD;break}us.extra=Cl&15,us.mode=LENEXT;case LENEXT:if(us.extra){for(Ol=us.extra;_a<Ol;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}us.length+=xa&(1<<us.extra)-1,xa>>>=us.extra,_a-=us.extra,us.back+=us.extra}us.was=us.length,us.mode=DIST;case DIST:for(;El=us.distcode[xa&(1<<us.distbits)-1],Sl=El>>>24,Cl=El>>>16&255,Tl=El&65535,!(Sl<=_a);){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}if(!(Cl&240)){for(Dl=Sl,Fl=Cl,Pl=Tl;El=us.distcode[Pl+((xa&(1<<Dl+Fl)-1)>>Dl)],Sl=El>>>24,Cl=El>>>16&255,Tl=El&65535,!(Dl+Sl<=_a);){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}xa>>>=Dl,_a-=Dl,us.back+=Dl}if(xa>>>=Sl,_a-=Sl,us.back+=Sl,Cl&64){cs.msg="invalid distance code",us.mode=BAD;break}us.offset=Tl,us.extra=Cl&15,us.mode=DISTEXT;case DISTEXT:if(us.extra){for(Ol=us.extra;_a<Ol;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}us.offset+=xa&(1<<us.extra)-1,xa>>>=us.extra,_a-=us.extra,us.back+=us.extra}if(us.offset>us.dmax){cs.msg="invalid distance too far back",us.mode=BAD;break}us.mode=MATCH;case MATCH:if(ba===0)break e;if(yl=xl-ba,us.offset>yl){if(yl=us.offset-yl,yl>us.whave&&us.sane){cs.msg="invalid distance too far back",us.mode=BAD;break}yl>us.wnext?(yl-=us.wnext,wl=us.wsize-yl):wl=us.wnext-yl,yl>us.length&&(yl=us.length),_l=us.window}else _l=lo,wl=uo-us.offset,yl=us.length;yl>ba&&(yl=ba),ba-=yl,us.length-=yl;do lo[uo++]=_l[wl++];while(--yl);us.length===0&&(us.mode=LEN);break;case LIT:if(ba===0)break e;lo[uo++]=us.length,ba--,us.mode=LEN;break;case CHECK:if(us.wrap){for(;_a<32;){if(ga===0)break e;ga--,xa|=hs[co++]<<_a,_a+=8}if(xl-=ba,cs.total_out+=xl,us.total+=xl,xl&&(cs.adler=us.check=us.flags?crc32(us.check,lo,xl,uo-xl):adler32(us.check,lo,xl,uo-xl)),xl=ba,(us.flags?xa:zswap32(xa))!==us.check){cs.msg="incorrect data check",us.mode=BAD;break}xa=0,_a=0}us.mode=LENGTH;case LENGTH:if(us.wrap&&us.flags){for(;_a<32;){if(ga===0)break e;ga--,xa+=hs[co++]<<_a,_a+=8}if(xa!==(us.total&4294967295)){cs.msg="incorrect length check",us.mode=BAD;break}xa=0,_a=0}us.mode=DONE;case DONE:Rl=Z_STREAM_END;break e;case BAD:Rl=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return cs.next_out=uo,cs.avail_out=ba,cs.next_in=co,cs.avail_in=ga,us.hold=xa,us.bits=_a,(us.wsize||xl!==cs.avail_out&&us.mode<BAD&&(us.mode<CHECK||is!==Z_FINISH))&&updatewindow(cs,cs.output,cs.next_out,xl-cs.avail_out),$a-=cs.avail_in,xl-=cs.avail_out,cs.total_in+=$a,cs.total_out+=xl,us.total+=xl,us.wrap&&xl&&(cs.adler=us.check=us.flags?crc32(us.check,lo,xl,cs.next_out-xl):adler32(us.check,lo,xl,cs.next_out-xl)),cs.data_type=us.bits+(us.last?64:0)+(us.mode===TYPE?128:0)+(us.mode===LEN_||us.mode===COPY_?256:0),($a===0&&xl===0||is===Z_FINISH)&&Rl===Z_OK&&(Rl=Z_BUF_ERROR),Rl}function inflateEnd(cs){if(!cs||!cs.state)return Z_STREAM_ERROR;var is=cs.state;return is.window&&(is.window=null),cs.state=null,Z_OK}function inflateGetHeader(cs,is){var us;return!cs||!cs.state||(us=cs.state,!(us.wrap&2))?Z_STREAM_ERROR:(us.head=is,is.done=!1,Z_OK)}function inflateSetDictionary(cs,is){var us=is.length,hs,lo,co;return!cs||!cs.state||(hs=cs.state,hs.wrap!==0&&hs.mode!==DICT)?Z_STREAM_ERROR:hs.mode===DICT&&(lo=1,lo=adler32(lo,is,us,0),lo!==hs.check)?Z_DATA_ERROR:(co=updatewindow(cs,is,us,us),co?(hs.mode=MEM,Z_MEM_ERROR):(hs.havedict=1,Z_OK))}inflate$3.inflateReset=inflateReset;inflate$3.inflateReset2=inflateReset2;inflate$3.inflateResetKeep=inflateResetKeep;inflate$3.inflateInit=inflateInit;inflate$3.inflateInit2=inflateInit2;inflate$3.inflate=inflate$2;inflate$3.inflateEnd=inflateEnd;inflate$3.inflateGetHeader=inflateGetHeader;inflate$3.inflateSetDictionary=inflateSetDictionary;inflate$3.inflateInfo="pako inflate (from Nodeca project)";var constants$1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function GZheader$1(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader$1,zlib_inflate=inflate$3,utils$1=common,strings=strings$2,c$1=constants$1,msg=messages,ZStream=zstream,GZheader=gzheader,toString=Object.prototype.toString;function Inflate(cs){if(!(this instanceof Inflate))return new Inflate(cs);this.options=utils$1.assign({chunkSize:16384,windowBits:0,to:""},cs||{});var is=this.options;is.raw&&is.windowBits>=0&&is.windowBits<16&&(is.windowBits=-is.windowBits,is.windowBits===0&&(is.windowBits=-15)),is.windowBits>=0&&is.windowBits<16&&!(cs&&cs.windowBits)&&(is.windowBits+=32),is.windowBits>15&&is.windowBits<48&&(is.windowBits&15||(is.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var us=zlib_inflate.inflateInit2(this.strm,is.windowBits);if(us!==c$1.Z_OK)throw new Error(msg[us]);if(this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header),is.dictionary&&(typeof is.dictionary=="string"?is.dictionary=strings.string2buf(is.dictionary):toString.call(is.dictionary)==="[object ArrayBuffer]"&&(is.dictionary=new Uint8Array(is.dictionary)),is.raw&&(us=zlib_inflate.inflateSetDictionary(this.strm,is.dictionary),us!==c$1.Z_OK)))throw new Error(msg[us])}Inflate.prototype.push=function(cs,is){var us=this.strm,hs=this.options.chunkSize,lo=this.options.dictionary,co,uo,ga,ba,xa,_a=!1;if(this.ended)return!1;uo=is===~~is?is:is===!0?c$1.Z_FINISH:c$1.Z_NO_FLUSH,typeof cs=="string"?us.input=strings.binstring2buf(cs):toString.call(cs)==="[object ArrayBuffer]"?us.input=new Uint8Array(cs):us.input=cs,us.next_in=0,us.avail_in=us.input.length;do{if(us.avail_out===0&&(us.output=new utils$1.Buf8(hs),us.next_out=0,us.avail_out=hs),co=zlib_inflate.inflate(us,c$1.Z_NO_FLUSH),co===c$1.Z_NEED_DICT&&lo&&(co=zlib_inflate.inflateSetDictionary(this.strm,lo)),co===c$1.Z_BUF_ERROR&&_a===!0&&(co=c$1.Z_OK,_a=!1),co!==c$1.Z_STREAM_END&&co!==c$1.Z_OK)return this.onEnd(co),this.ended=!0,!1;us.next_out&&(us.avail_out===0||co===c$1.Z_STREAM_END||us.avail_in===0&&(uo===c$1.Z_FINISH||uo===c$1.Z_SYNC_FLUSH))&&(this.options.to==="string"?(ga=strings.utf8border(us.output,us.next_out),ba=us.next_out-ga,xa=strings.buf2string(us.output,ga),us.next_out=ba,us.avail_out=hs-ba,ba&&utils$1.arraySet(us.output,us.output,ga,ba,0),this.onData(xa)):this.onData(utils$1.shrinkBuf(us.output,us.next_out))),us.avail_in===0&&us.avail_out===0&&(_a=!0)}while((us.avail_in>0||us.avail_out===0)&&co!==c$1.Z_STREAM_END);return co===c$1.Z_STREAM_END&&(uo=c$1.Z_FINISH),uo===c$1.Z_FINISH?(co=zlib_inflate.inflateEnd(this.strm),this.onEnd(co),this.ended=!0,co===c$1.Z_OK):(uo===c$1.Z_SYNC_FLUSH&&(this.onEnd(c$1.Z_OK),us.avail_out=0),!0)};Inflate.prototype.onData=function(cs){this.chunks.push(cs)};Inflate.prototype.onEnd=function(cs){cs===c$1.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=utils$1.flattenChunks(this.chunks)),this.chunks=[],this.err=cs,this.msg=this.strm.msg};function inflate$1(cs,is){var us=new Inflate(is);if(us.push(cs,!0),us.err)throw us.msg||msg[us.err];return us.result}function inflateRaw(cs,is){return is=is||{},is.raw=!0,inflate$1(cs,is)}inflate$4.Inflate=Inflate;inflate$4.inflate=inflate$1;inflate$4.inflateRaw=inflateRaw;inflate$4.ungzip=inflate$1;var assign=common.assign,deflate=deflate$4,inflate=inflate$4,constants=constants$1,pako={};assign(pako,deflate,inflate,constants);var pako_1=pako;const pako$1=getDefaultExportFromCjs(pako_1);var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256);for(var i$1=0;i$1<chars.length;i$1++)lookup[chars.charCodeAt(i$1)]=i$1;var decodeFromBase64=function(cs){var is=cs.length*.75,us=cs.length,hs,lo=0,co,uo,ga,ba;cs[cs.length-1]==="="&&(is--,cs[cs.length-2]==="="&&is--);var xa=new Uint8Array(is);for(hs=0;hs<us;hs+=4)co=lookup[cs.charCodeAt(hs)],uo=lookup[cs.charCodeAt(hs+1)],ga=lookup[cs.charCodeAt(hs+2)],ba=lookup[cs.charCodeAt(hs+3)],xa[lo++]=co<<2|uo>>4,xa[lo++]=(uo&15)<<4|ga>>2,xa[lo++]=(ga&3)<<6|ba&63;return xa},arrayToString=function(cs){for(var is="",us=0;us<cs.length;us++)is+=String.fromCharCode(cs[us]);return is},decompressJson=function(cs){return arrayToString(pako$1.inflate(decodeFromBase64(cs)))},padStart=function(cs,is,us){for(var hs="",lo=0,co=is-cs.length;lo<co;lo++)hs+=us;return hs+cs};const CourierBoldCompressed="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",CourierBoldObliqueCompressed="eJyFWdtyGjkQ/RVqnnarcAo7vuE3jEnCxgEvGDtxKg9iRgxaa0ZEF9s4lX/fnrGdTVZ9lBcKTmvU96PW8C0bmqqStc9OsqsPwYlSdnaPDvb6naP+3v5+1s3emNpPRCVpwdAEq6TdOTW6mC61+hpksyBo/euCTrOg89MKUSm9/XUNwddSletGcbOcfo+90Cof1KWmdTu7e4S4N+pBFhfK5+vsxNsgu9lwLazIvbRz2Tw7evCyLmQxM5Won809PTUP2cnnnYOj7s7eQa97fNjvHvd2v3SzBS21WtXywjjllakbRb3eT4LLtcpva+lcdkJPZlfSunZZ1uu9ftXr9UjFxHiVP7my2drGh84f+Z+d3f5xv0uf/V77udt+vm4/jzqDwixlZ751XlauM65zYzfGCi+LV53OQOvOrNnHdWbSSXtHKOkZ0apC1eU8X8s2dO0mcy/qQtjiRUoLh2Lz7jmWB4cUto8vv/Zf97vZwOVNhGx2crhHP8/kj987uxShbO6Ld9fZyfF++/WKvu72Dp/i/EF6q3IKxedv2fVH2qAJ1YQscRtBEfje/R8sH3Itqhj/Ggx5utSxpA7VsglxWceywmgtbIxvpM2bio0EoiKRo/AAC9pcMfsJK2stV0gEHhOu2dHdMk/p4GI0p0YTMbzebtaS8Z5cUYbxxGnh1jH8KK2JUVMzWfL3zEq/tpJZu6JuZVB1x6x16oEB5R3nneRjWivO4Nxow+zhZKWASDcNHCv9GgRTg6WV1IiMm8ReriWJOPeM7YMYOo2hYQydxdAoht7E0NsYehdD4xj6K4bex9B5DH2IoUkMTWPoIob+jqFZDM1j6DKGFjF0FUPXMfQxhj7F0E0MLekQupWep40lyUCfPj8HOSVXKlc2DwyLhoa1HZ0cTIu0/MYbw3DOkukxhn+ZDmK4gGkohuViSMXQPzHE0CvTwky0mK5laG/DhDKGGG5g6IWJfYihuxi6jyGGSbcM6fP1BQphyR2m7fpUNXqlC3jUF+aeiTN/OjfHpW4GlriEmoGO5dktd3astLGKPQ/ALnmwdIznTADbtnGqHTnh1MJHswyKJJUBFNCI241/IwahXzHdsWIKnyY5lmYKUZbckfaEs6PY08DR5E5ayfQ+zUKitGLDkRpdASTjxX/hXQqXiHBaCkL0IwFALrVWG6eYRiVP/doENCk+Hfp8aVMAuNFH5MFzg0vL5CstmXYGfVWJ3HI1vLSSU1wYL3K+3wq6ZUnWf8t2YS4LCig3oYa6FDZUWgRGjSlpyGRYOhesH7LiC3bAjDzGFiua8fih8BwcsFOE8woqIrmgWQ2Cj3czWzLdqYFeg3Bmd2pNusVSyTNJG+N8SlB+AhRNSGdUgtR9whYU6k5x1fwJWDZIdYYADy1SD23BQ669dqEekaktF3yfLHAYBGqGBbAuoAdGWMkZEQR3/0g6mr+8qmBUIcrJQR0IPi6TpAEa1Shg1MvkbkO0G2DVUYInHXDTQUJUQLs2j7IuGcEMqHibdDIkmyQlHKCUWmBIDn29SUTucm0ss9kUaZ+BuM0BXgBrF0hB4CuzfbfhQjvgMDPRFJTgAOGAVqugvdpoZswMwMFL4CCNWl4JXagVc7vaYmqYAD0qVSyjZJklTh0syoEdNaJBlNAJCNAYbNS8eaOBgXv9trTmVtbsHcjKUjkw9b4FyR6nGCVQV/NXkRGoKQscMigyN+CBGxCx55dc4BXYyDMTyhCSgk7ylkejHzwdkWCAxodEVYIAP6LWQLqnKCPo6EGZckgzdmKaHEuAh2dSeyZXnidpf28SjIhNq5hXGgpYZNJz5giFvgATTsvjVMCWCpkxbZ6oV74i3yfr+BwkzltRyEpYxnKZYIUxiNIYFc45sJqCthaaORmamwlocJOqqBpMTYvf5A/ERyKHSsCl5NBzVrmk8kGYJ1M3TVteEEtw/3YYkKIhMCJANi9UzqXhDGxkk95MQH4MwGfpsk5KB2DPAeRofuaagn0eEx0yQqc90n2bdAUMAuNkKwATfPpyY8om37Xh3o9gLg1YRFuhf6vSF1ruIH8ETtXJrSjk+IRQqMdHofkf8ks3ey9tfSGUbf49/vL9XxrnGMA=",CourierObliqueCompressed="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",CourierCompressed="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",HelveticaBoldCompressed="eJyNnVtzG0eyrf8KA0/7RMhzJJK6+U2+zMX2mJYsEuJMzANEtihsgYQMEITaO/Z/P41CV+bKlaug86JQf6uArsrKXNVX8H8m3y9vb7u7+8m3k4t/btazm+7o5PmTZy+PTl88eXk6eTT56/Lu/tfZbTc0+Hu3eOju51ezb75bLq532maxYO2oarPb+aJndRCm3fzm425/Y8N/3M8W86tXdzeLoeXjYXv91/mX7vq3+f3Vx8m396tN92jy/cfZanZ1361+73af/PHLfXd33V2/Wd7O7sY+fvfd8svk239/8+T540ffHB+/ePTk8eOTRy+fHf/n0eR8aLxazO+635br+f18eTf59ptBBuHtx/nVp7tuvZ58+3TgF91qXZpNHj8+/svjx4+Hnfy6HAawG8z3y8/9ajeGo/+6+j9HT16+ePpo9+/z8u/L3b8vH5d/nx+9ul6+745+79f33e366B93V8vV5+Vqdt9d/+Xo6NVicfRm9z3rozfduls9DNTDOF8fzY7uV7Pr7na2+nS0/HD0y/xued9/7r4ZGi2OXv3taHZ3/X+Xq6P58AXrzfv1/Ho+W8279V+Gzv447Op6fnfz+9XHrsxA6cnv98NHZqvrqg4Nv599/vs4Ic+fvHg0eVe3np4cP5q8Wl/tAr0axR862/7m+PHzR5Pf76//Pp18+2QnDv+/2P3/9PF+vv7Z3a/mV0NA//0/k+m7ybfHz4dGvw5dWX+eDXH830d7fHJyssfdl6vF7Nb46fPTPf9jsxzi9X5hytOnz/bK3eb2/W6ibu6ydr1cLGYr4y+GiSn8c7e62qV7FZ4fH++F2e0grYf4mGQdLj0oM557/Xm26u4W3YeWRB+r3Zitd9+4/uQdfzEO9/Nis85duBqqdJZ38bH//LG7y82HocyXYiTrxWz9MQfrz261zHR512V4vxUt7z+uOtH2w3KzEnT+INqu518E7B46MbddiKmnw/xOpNXVcrG8y3jd3c6jZDOw2NlAot0fm9ki45tVN5SzD/PZkyc1abp1sZqqvHz+dJx7kX2vMvouo+8z+sH3/Oz5Hv2YO/NX/2BNhb/l7/p7Tph/5DD/lD/4c97jL156NeT/zB/8NffrLA/ot9zqdf6uN/mDv+d+vc0fPM8fvPBZOx0neppbvcvoMu/xXzn53g+L2afuPtiGhfz9oMU65c9FT7FUnK2v5vOr+epqc5tnbbOz7fWw/nR5j8XfQmfsY7M8nve51VVudZ1bieL8kD94k9HH3OV5Rv+d9/gpt/IStiXhNu/xLqNlRp9F1WerFxa4zpG4z9+1yR98yJWwza2Ek/aOdsc9xfRzV3f5FRPh+MXjmpWrRvtD2Xg/X1w3l/rr5VaYe1idPWL35TjNk+NJrbgPuwND9Fkfs1o7PiyWq7ng667xLVeb1bCMX3kAj0+wbNbzcuCaoluPWnRZ3Wzmg3K7vNdHDju5fPFX5Bh6S5wPc8HE8dNwKCcPB65nNzedSNs9x0MxOuDYzV236kTtD8dCs5vV7DOY2tOaWcNJRCd80MP7frY+EOHD6kofK9gERH04KRg/Pxxizz+v52shDWO9/7jchGPFtOyH5PaZW80eRD3Mrjb36tClePmHRfcla43Kup1drdThzvtVp3Z8vbyfXYWKc2k+zCQGwJQV1qF3trseQqqOUTd3N7PV5nYx24jdLG+Gw8xP4utmOA6Yl9uQsy688sOek+cjW66uPwzHeeHA0I9Q4iLrByCR+x7OYA/Pntoebgen2yxwF7ayzMRie70r+vVaLGCLuGNfeSK3I5KlGNRQn8Mp8ZD34hziH2lK3QliBvryH/PGlyY5qf51cfb86Cj3oC4X1/OHOSS0fyT2zA+YRXF4txsfOj/0ob4Rg3U596IygaHmr/T9hVJx3J6IGdWDfyb2zmeCPuBnAWknfs4weASchBxXJ1YDfX7yvIrjVQ+xK3IdXztjHvgodVx+VR3w8mjlaDRVP9KXw7FTqda3RWOFcCarhAzRw1yzJ/rha9z76ct66rn8s7u7EZn7Ju7Cz+LUID05DhbJocx9xQuJHc02xnrFY/Xznxw5i+rbj8uVGNUZ7d3DQFVgJ3pU8Kd1EaOwWTXRDjxienErFzjWm3KUsxL9jSnoUWzxaKtmgrebxf3886IX/WqU/9s4QEuk4Xjrfj5bXM8/fMhz1bet4de4H09YkSxeGwfT7MCq05auGuO9a9lgK2N+jQHyxZDqHy+/DUcMeA3OToFWy0/dHZ4ImTmuupv5Oh76eonGyYblONdFPdRYb4aqDucjHmw6hrTCbERm2Ur1fzU+8C+q8NOX9di1XOmK18Eszj/ef8zw+6YBLpRv2VjuGybTNVfHlvCqdfhwICtjgP18uVUavG9zhdaMtJae1jK6bu0517Ht++BhCa+Y9bigW9wLA78PJu2euF0ecMTUNfu6240YSWMNX8rjTK8FPvixq0/xCOfFySn4+JDAqyGR1/n7fud8Pa2Tv2gsJD8fXH9/iRPnpxJ2X0eZYrIFt4wYJuetGv8ldtviMETt42wBS0Mt8t2pSaxwnwu1BJgvx8MmT7WvTGCjFLrWgG6imeKAxmlVs6rPRn6XB4iWwbLnlhDXg010KmMbS/731AlbuMhtTs3Or+dXymh/iF8EB2aHDnd/pcNa625j3t4czuuD+3rV+M5XTZOOpwM2A/F73IgPHFD+2Fruad9+iVie3dkBWTwSsG87WAo0QeaXB/e0WN7s5vtuKcK9bJvpJq9jNYOGr2pU8s3Bye1gJfeYN9L3Tq7jdnHnLh80u+e3lrsfN7u7kf95NPm5W939NpuvdveQ/z15tbtbPXn0zenj/zwat/buEdC+nxGNpo7wb8PWU9/au0pAODAUzsL3nOUu4NIbuE1VoPv6Dyg4T1DGkAW2vzoU0L5wEL0OW2+HrZe+VWOGKIzehfMQi/M6ekBh9MBh9EDr6AHR6EGx0QMb6zqwYidILoatF7Y1Hbae2dblsPXkiW/WISGDvgPeDJsnvlU/CCjEAjh8H9AaC0AUC1AsFsAsFsDGWDh5CJmwDVoft/KI+tzzsRGWpiEqDuNUpM65UqsC5WqIata4LNyqnuXv5hI2rurYxFzMJlFFG9dlbTLXtglU4Mapyit/nRHUuyEqeueq8qt6niPKHmBcGYGJ2Q1MIkswrn3BZDYHE9ghTIg2UTF4RUVgGBWhaxhj6zBB+EfVwEQMUd0ZV3ZiYrsy2ViMa3cxmS3GBPYZE6LZVPyQE3KbW/UCNQIhXGg0A3QhQ1TfxsmFnLMLVQVcyBC5kHHpQlU9y9/NLmRcuZCJ2YVMIhcyrl3IZHYhE8iFjJMLVf46I3AhQ+RCzpULVfU8R5RdyLhyIROzC5lELmRcu5DJ7EImsAuZEF2oYnChisCFKkIXMsYuZIJwoaqBCxmi4jOuXMjEdmWyCxnXLmQyu5AJ7EImRBeq+CEn5Da36gVqBEK4EIYGrShyqvQokimRyM4UZLCnyMmjoiiNKjQ5a+yPLSuKyrdii2xeUScHi6K2sdiGvSyqZGhRJFcL4usGB3+LnEyOROV0ocl5Y17Y86KojC+2yO4XdbLAKGofjG3YDKPKjhjVaItBA28MHAwycHTJKLBVRlX4ZWgAphk5GUYUlX3GFl/xFTbSKGo3jW3YUqPKvhrVaK5Be2jUxbbRvm/xQ/ETrusEPRcpGRVK5LdBYrcFEbwWKTktStJnocGZ3A97LErKYVHP/ooquStK2luxBTsrauSrKJGrgvRaUnBUpOSnQVJuCg3OZezZSVFSPop6dlFUyUNR0g6KLdg/UWP3RC16JyjgnEDBN4GiayJmz0RNOCbI4JdIqdpRUl6J+kEvYJ9ESbsktmCPRI0dErXoj6A8yAzfyra9pu1ICVccR4+WaIhMxTiZoXN2wqqADRoiDzQuDbCqZ/m72fqMK98zMZueSeR4xrXdmcxeZwIZnXFyucpfZwT+ZojMzblytqqe54iypxlXhmZidjOTyMqMax8zmU3MBHYwE6J9VQzeVREYV0XoWsbYskwQflU1MCtDVH/GlU2Z2K5MNijj2p1MZmsygX3JhGhKFT/khNzmVr1AjUAIF6p9RRtyRhXuAhkRCOxEJoEVOSMvckGakcln4vvZjlxQfuRqNiTXyJFc0JbkOnuSK2RKLpArmfBaMPAlZ2RMIChnMvlcxJe9yQVlTq5md3KN7MkF7U+us0G5wg7lSrQo4+BRxsCkjKFLOWSbckX4lIlgVM6oQF1QVuXqgfpls3JBu5XrbFeusF+5Eg3L+IPI1a1o1yvWiolwrdoxdC1nZAQukGuBwK5lEriWM3ItF6RrmXwmvp9dywXlWq5m13KNXMsF7Vqus2u5Qq7lArmWCa8FA9dyRq4FgnItk89FfNm1XFCu5Wp2LdfItVzQruU6u5Yr7FquRNcyDq5lDFzLGLqWQ3YtV4RrmQiu5Ywq1AXlWq4eqF92LRe0a7nOruUKu5Yr0bWMP4hc3Yp2vWKtmAjXWo2/6OG7q4RMoGLyK8PsVqMAXlUJOVXF0qdG8Sx9L3tUxcqhqpb9qSrkThVrb6oqO1Pl5EsVkyuN+HUi4EiVkB8ZVm40iucphuxEFSsfqlp2oaqQB1WsHaiq7D+Vs/tUHr1npOA8IwHfGQm6TkXsOZULxxkl8JtKqLIqVl5TtWbNsc9UrF2mquwxlbPDVB79ZaQPKeu2qU2fiR69cJUx19FWDFHhGidjcc7OUhWwFkPkLcaluVT1LH8324tx5S8mZoMxiRzGuLYYk9ljTCCTMU4uU/nrjMBnDJHROFdOU9XzHFH2GuPKbEzMbmMS2Y1x7Tcms+GYwI5jQrScisFzKgLTqQhdxxjbjgnCd6oGxmOIas+4sh4T25XJ5mNcu4/JbD8msP+YEA2o4oeckNvcqheoEYjsQt8N9FXcip8tqDoGIBHSwvUeYiALoiAVRvEpLISmkFq+jnbV9cS3LJ0che4CxwRzWrsLiKYcFBsIMBsIsHEge/LDGPdT34pu+gPGHZDw1h8o7kCjo/4Q4g7Mugts7C6QaJs/jCXvW9OwtSv0575VRwcIuux0/3tsdXJ3ZPzJNUOj/2L4DFEMjVMgjatomphDahLF1TgH1wSOsAkxzIYp1pVfZDTNCEJviOJvPE9ClWgmKk7TUV4IjNNREU9H5TwdlcvpqKKYjirxdFSepqMKaTqqQNNRMU/HyC8ymmaE01ERT0flYjpGiadjxDQdfx1n4oVv1V0BqvEHFEIPHDoEtAYckMUamIUZ2BhhIDW4jnbjPPatOgJAdQSAwgiAwwiA1hEAshEAsxEAG0cApI7AUZ2tJ48N2UyN7Kdxqo59Kw70J5wqQGKgP9FUAY0D/SlMFTAa6E8wVUDiQH+CgTqxcTraxK08zE1jTBs5pk0eEx+SgSJGuxGj3YTR/jzZn/Kc+FY8LipIHAQVng6CCo0HQQXJA8mi0OFRYfV8BlA8Ftqhctzy1LbsWMhRPYFBFA6PnOPhEVB7TTRgO2py5MdGzvzYyNhyNwLfskg7ipF2jpF2apF2xJF2xSPtzCLtyCJtaBPivsn5oc47fp6oU46fJ+ls42eR1aCI/ODTi58nfGaxI70tUGUrLtEFpYU2vIsf6oIECgGpKhrUJAeGGlCMSNXhokYcOZKpyEileosqJD8JVIWkUkGyKmqTmuQy5Qa5YqkFFS+pXMckc0lHGaqbBCp0UlXNU5Nc/tSAnIBUbQrUiP2BZLIKUsk1orppJRJ7CalfLyThMNTgYCE1fIcaHS6k5EYkR2OKIngUCWRXpCbn+mWC1/DKVrx8t0fiyt1O2B3ej5eddptTO0bdbZULWce+aSUODOvScfwFzUE6jZLgfo3nl0m6vPPLRF3Z+SW/o+qIgnDwHVVTMRz4BueLiDAw+Q1OFkSIqtaKU9BbYp8DwWFrv/X4S8wriCAJFEdWVTRjG4xpVCCyUcD4ksJRJlnEOrZoRVy0Otykb4WS56BdwGOD0V5xDgxR9J2ruFcVI14ZxLoijLIxjq8JIrJVa8U06C2xz4HgCBpPsRuO08oJ5lPfirccCop3gwoSNyAKT/ceCo23HQqiWwqF0d2EwsKNhELqeunorZn5Gc45ojDdLlyE75mGrXdhy6/QnE3SxZmzibous6P13Nd3aee+I6oWA9NgiObCOE2IcTUrJuapMYnmxzhPkgk8UybE6TJMc4brDoWBZ6+x7pB6kb97mtG7jGBa00LEPE9wlWiWK+apDi9TwXxHTpMeRZr5KKrpjy1yDkSdEiGKnA1R5ZSIasyLqFFypPc6VfQ4TQ6916maXDT2N23wdw0O+aNfb5RizqSgUzoFjXMKXkSBjEJK+YQSZRNKKpdQz5mEKuURSpxFqHEOoRYzCBXKH3qHLceJc6f9DltucCH3M5X0naSQMerVLiHlbAGVcgUUzpT6pgCkiSHKEeOUIMZVdpiYU8MkygvjnBQmcEaYENPBMOUCvuxDYeAsaLzsQ+pF/u5pRu8ygmlP78YwzxNeJZrtinmq47k5zjgrNPEs0/yzrNKA2+Rs4BaUFCxzbrDOKcJ6zBRWKWFIftuMKadPklUWUaOL5n6nTeVdU4EMY4USjeWcb9SC0o5Uzj57uh/yzhllnAuUay6oLHM155drlFkucE65wtnkSswj55RB4UUejghnTetFHpYvxPdPBXsnGORFft8lCTkXTKMsMM7zX083YfoN0ewbp8k3rubexDz1JtHMG+eJN4Hn3YQ47YZp1vEaBIWB57xxDYLUi/zd04zeZQTTnS5KMM+TXSWa64p5qutTYzDVhmiqjdNUG1dTbWKeapNoqo3zVJvAU21CnGrDNNX44CeFgae68eAnqRf5u6cZvcsIpjo9J8k8T3WVaKorpqn+bZzl8cmE33CGkdXZRUZP1rkQHq1z7M/WOYNH6BzCM3QO7SE6R3UGgflzMmUrXjErKD7RWJC4q1J4uq5WaLx/UhDdDymMboIUFu58FBLvKv4G8zZeTdyh2KDLg7L7iIj0oDo5qHCbEHAeayfG2omxLkOK2f0+QOKRr8LTrZxC44NeBcmHw4tCT38VFh8JLyg+2/UbVscY/dcTfMS0bMVHTAsSj5gWnh4xLTQ+YlqQfMS0KPSIaWH0iGlh4RHT155GPow6tD15M9nfzYet+GxOQeLZnMLTszmFxmdzCpLP5hSFns0prE4RoPjY0ZvRn2GrZj6i4MounMetPN7zxnjP5XjP83h5IkER4z2nZ5HewEQ68WXkzQQfMnwzrhSuXcal+Q2tDyOtVzFh9g1RSIyruJiYg2MSRci4DpPJHCsTKEGMU5bgdWhGlC+N69CkngvUiJXMIRPbseJsMn44VimvTODkMiFmWL7UbghyDa+rUyvOOnVdfZTqg8SQeoYonMZVOE3M4TSJwmlch9NkDqcJlHrGKfUqfysQpZ5zlXpVPReoESuZeia2Y8WpZ/xwrFLqmcCpZ0JMPXy0nTIEUg8fbadWnHrq0fYqpefYjqXAoT3wHJtuIsKsn2PTaiPkjefYtMypqp9jk+rbpsDJe+h5B9nmvCkcjLlO6tjkazFPCR7V/5+Y52SPckr5KFPipwdBZJZiEaTnQOQnUkE0nwLZNximu5z9vfSt+g2A6hkToDApwGEPQGv4AVk4gVkMgY2BA1Lz15G/oPoWSxiQONV4S8UKNJ5qvBVlCQqdarzFAgQUTzV2aHeO98K34rsaBcV3NQoS72oUnt7VKDS+q1EQvatRGL2rUVh4V6OQ+K7GDl0tFzTyeu7qbXafeOZbdZSAqrEgwlECh1EihVNXwHXwgGzwwGzwzj72nz925Zzr2NgyjGqZZ2vZmJqlnJplnho+nQVFTJqdzgLKM2Sns45WcSsPZBW93IV1dzvPU74JpbjJ9rFpeMVGesUmewU/kgqKcJGNcJFNcpFtmPA+buUk7XPm4buILwlRENK7iMxVhNS7iCxRrPK7iCxwbPhdRMbktXj8fkqIXFcfv7OY/TcdvzPXTpyP31kgT07H78TBxQxRrRgnnzauHMHEbAsmkTcYZxswgQ3chOjihsko/LXPhQodmXrFXa4Ftnfj5PHOhdGb2K45Zfmmke8bZ/M3gVeAKqRloArLHAxeEIwfygGxNJjUyIHGImFyK0V4uTDeSAVeOCpfCdQYul5HqioWkyrBimKo4ahybTGx7Zy8yhjXS43JLWNNi44J2li3Odt6gRrlpFajcKCPa1IUOI5R5fUpqjLWsYmIeGzAcY9qCm+UU5CjTKGOIq9k6XLAqRR4VTtwOUA3ESucvhyg1cZq17gcoGVe+fTlAKmi7UeBiz6qvCJGVXpibCKcMTZgf4xqssEop/UyyrRqRpENM6jsaCTGdTS+SNeq5bSmRpVXVlLV+hqbfM1L5FobW/CKG9W07kY5rb5BzmtwfMmuFc60Hkf16xmo1ubY4GAGttbp2OhwmqY1O6oHEzGt30FdNYWDYWus6KGNWtdDA1zdo3BwbdIrfWzytdUnrfpRbaz9sdHhJSofB0T50BK1bdVA3xQOWkM+Sjif4BM953g8ACg+x3OeVn7g6XriOa7xgOiZnfOwmgMLT+qc47rtqNroiRH6IZR6PRnH2nj1xjmN+tCrNy7m8TdevXHOkWi9euNCjEnj1RvjFJ30ysrIG6+sEKdgHXplhUQVtq+8skI6BfDgKyukcigPvLJCGgVVvr2hIsjhlW9vBEqhbb+9ESQV1oNvbwSVQnrg7Y2gcTibb28EhUIpXm3IseIw5lcbHFEAG682OFeha7/a4BIFrfVqgwscLv1qg2MKFL8SQKHgEDVfCUgKBezwKwFJVuH76isBqQUF8yuvBCSdQ3vwlYCkUqAbz8LruHLYxbPwwCjUrWfhQVDhPfAsPGgU0uaz8KBwGBvPwgOn0KVHxzkqHC77iW0IlzMKlwsULhdUuFzN4XKNwuUCh8sVDpcrMVzOKVwmULiMc7jGXw6GYFVCoaqYAlWxClPVcpCqQiGqmANUOYen8hicSik0I6bAjJTCcjGG5IVvxdOVCwwFIHG2d0EhABrP6y7C0IHRNYQLGDKQeJK2Q/6zzGUrzlxB8SzLhbO4FVOhIDHfhae5LjTOc0Hy94KLQrNfWD0/BRSnd4d20/rMt+IpS0E1BIDEdYvC0ylNofH6Q0F00aEwutJQ2DhjQOoIHMXT2YtJekR7h+Kguzw5dqUGkZ6vTs5XuBADOE9jJyarozLdMbu44tm5u6Dy0rfiKXlB4jy88HTyXWg84y5InmYXhc6tC6s5Biheyr2Y5Ke2dyxfiNjRTZjZTc7GTSP1NjL1Njn1+DICKCIpNyIpNyEpp6PrwVbs9RRdD5AYyJRcD2gcyDS4HjDq7hRcD0isoekEH7iboncBEo95Tcm7gMYHuqbCu0ChR7em6F2A4oNx09G7Tn0r3gyYoncBEjcFpuRdQOPl/2nwLmD0q7VT8C4g8Vr+FLzrCRC8Cj0drWv/I2VTtC5A9nYJoPwLbVOyLqT4donj+BNt02BdwPztEmNmXT7UZUi4ZS6SZaMilrIilrki2LpAEbVi1gUoFwZdqJ2Sc/m87Zzr1MZvzgUoJp5zTDynlniO+GaTK56SzjwlndWUNNKHeupz3fepvi9Hwxt/qekSHQ+ZvZEGLL6IAwK+iQPYXsUB5m/cAPRXbgDWd24A2RtpznbW99y34ot8l8n6gKd3+y7R+gDRxIFigwFW8xJQ7bajmS2wl2h9gOLN4stkfcDTscElWh8gOgK4DNYHLFxHv0Trc1RL6CmQW/xl5svR+174VjyfuETvQ5TPJy7J+5CC9wGOpxmXwfuA0WnG5Wh0MARzOmTq1cxL8jrE9GrmpXA7lPitzUv0O2T0hublJP8Y9iVZns/XJjbaiIFuWgPd6IFuxEDZ91BSA3XnQxhfT7206/RgBukmRBLY0/RtiKQKd0s3IpKQfC7fikgKOV66GcECeF96x4y5ckH1jhlL5Ietd8xYZmdM75gxJ4+sHIzSELmlcbJM48o3TczmaRI5qHG2URPYS02IhmqYXNVvMoVS5XtPXANgc4bIaY2T3ToXnmtiNl6XsvuaRhZsnH3YBDbjKizFoJMtmyAty1ThW6axeZnQcDDTk42ZwqZtAjt3upPIgvDwKm1E8+TmJhyMj/J101rxaTm86c34ZK83hQyfbvlVJ1T3/JTGzt+866caCP9X9/2UllYBeedPibQWqHt/QoMVASktCiipdQH1vDSgSqsDSnqBwBa8RqBGywRKtFKABIsFUlovUKIlAyW1aqCeFw5Uae1AiZcP1HgFQS0uIqjQOhJuBgfHELeJRYGBaSOlNQUlWlaCJFYW1PPiEtS8vqBMSwxKvMqgxgsNaEsdkrTcoCYdFRsIU0WZfRW1hrVik+SuKPIChBqvQepRAaGJlQjUjf5QWo9Q+1oA1aqE8oEAttYmbHIogHmFQjEuUkM5TfxXQsqW/66PoXj/yYXd3yTc/5WH3dY2bPl1nrIVr/MUlK7zVNfDHhmibhmXfasqdLCibUZ97gH313ju9Ngx7LQh6rRx2emqQqcr2mbU5x5wp43nTodnlaDnkVP3oyjHEJrAQALfNnjf6B+PK4p5cJDuMDSkNDCU5LCgAQwK6FbSXvaJh4NSHkx9zAdGYoiGYVyOoaowgIq2GfW5B9xv47nT9tgH9NoZddsF2W+ToePGtoL1oh/cdxdy5+0hDOi8M+q8C7Lz4c/Tjx0Nf56eWS/6wZ2Xf55+1MYHJaDrlVDHK5bdhr96PXYQ/up1JH3aN3dX/NXrUam/QAe9NUTdNS77i38kd+we/pFcQn3uAfdZ/ZHcvfR+oAvbc9ny4wRDqpdF8IObijbhq+nv4b1PxxrAZd/o7+G9FwcUoNCN0Pfh8AFY+LWK92OkfauPW3kMOY5XA/VA7LY+Be2T+gGRqzH4sBX3dZWDD0K8xXs1dtx70MeZvKKOj7QeC3zMCIZgSPamqguBaETGD38RjQ2PbaiTPEp1bDNK9uJrRjBUQ7KHVV0IREM1fviLaKj4viR1koeq3pes0nBat1jMaLAGcbgOdT9NX0jIg3bla1/HAzelV11Og3clD39/cjRZf55d7T5yOtJywp3/bM1xlhta/MLh9GxybTstW1f7v10LyE38Ovj3dR2ob9kIHeHQ9nTcA+7YEO298of86W1GvUDUI+OpW7uKG4O03zleSj028hA+sA1bX8JWH7diR1J97yldpx87whd2jyN+yJ/fZvQlo14g6qb0or1EPz4w9pVfTz+O+CF/fpvRl4x6gaiv0kxGSbwmUjus3hI5FtpD4+u2Df6lwfsW5+G0zqpGPV+IG0ckrsEcJ+VBftFW0i+S9prSKBonU1X1a3M8CFB4FCA96O/aavxF476BeSio5bHQayHjOPitkOOIH/Lntxl9yagXiPqrzgdHiV8PGDub3g44Jv4gvmIr2BfBesWoy/I0cNT4Gf2xz+kR/WPiD+IrtoJ9EaxXjPosz/722ocJXiSvpItb8aigoHotHFH+AePC05HDnuKflHUcf9e4IPr14sLo14t3bGlHOWUrHjIVJE6KCk8nGoXGk6KC5ElRUeikqLB46FVQfDr0wyRcgq6IDp1OohDozX6unvjGOGwg40whgTgA9jAg9GkCOsYGSA0AoDpHjvykXVxeaF5aqO1gpEbicA3HMTvOAzctjd6VFAKTYhwMUzCMU0TyZeCbxmXgm4OXgSOEMOkfgdBiDNmBn4DQLVL42j8AoRvEUDZ+/kGrFNao3rTCxCEmVQW6/knNY9+KNsN/SHNPP43utHfcT+hOgKJ9Ok+W/QndCRDfA3LFHdSZXVVyZHfK9ij/SoYWaCyHfiVDN8kjbPxKhlb1uFu/kqFlikbjVzL26iKszouwBi/y6ruQ6+4inwct8knPonHSs2if9MQrAvj1+QchtEC7av8gxNig/v2XbUa9QPT16u/P7qXbCV7pLFux2goSi3rhqQoLjYt6QXJRLwot6oXRlc7CwpXO2wn+2d1bHDEg6N2e3k3qTWXbikddd2mwwNMh1t0k3DA2JP9GxN0k3h42RkdZdxO8GVzJ7uD11LbcHsU9FH335C4+4RURBaH1fFcUczjE012R68CoZ7uiwCHKT3YFDMHKt5LvUrUzz7HD37t7Qohip3/vjsUcu/R7d8x17PLv3bHAsePfuyMMscNLLhQIjp265FKl9JtCT6TAcTzwm0K6iYip/k0hrTbi2/hNIS2nWMvfFJIixj0tITKUaQ6aS8jYoN47gzkwRNE3ruJuYo64SRRr4zrKJnN8TeDImhBjivcbTyPqcyA4gu2bi8sJ3llbhnV4t+V/uGkZdrXMe1nqHaB3EYJd4UXck9iqzx/kPbcdbpmucCoOHUlXOE9E+77xPdyvrzw3Aoeu2DV5uRIpdEs++xEodengsx9LvGpHCLqCV+1OYqs+f5B70H6Kg47FsRekQGdIgT6R0je/jXvIcu5ouF7IDDoXrheeULtefJa7cuCxkXrWgX3IB9OGoAd4fE0f5P2r4+tRQksiBLuvCHafjWvZMK5l27g+T/D84DN+FlA6K6gXzFp3GKPeEuM9RvoqU1+4uug+3Ncv3f//m9NnptYPXscPGa73DIXmN3wjjnGMmrrpG1vEa49BC3ERY1jFsBiuHVJavRostdBZ0WI3t88ErjtUWvzFUtLqTWuthu6oFnnyq+SFMgRp96wHbsUJK6j2EpF1DuB4/f2ZkeugW/o4urF6KFt2KcsRXb8ywV569y9bxq08EHXlvPBU1IXGk+yC5El2Uegku7CYvQXFK+c7ZFfOPWx/hAbrMO51NJcVZhEimx+EjVje11s5ZSO0cv5QL0yu9oYHG+GC7Cra3QjtdrsPzRBNlHFKO+ece3Qvv0ay4uvcklPRnqn2uBiipDQuo2lPSFF6Vr4UqDF+ma0m5pQ1ifLWuE5ekzmDTaA0Nk65zM9O8DT8kZuuc+A4v41TkjvnTHfl0AR5bhtRiQ8nDZTJfSaxDsS5wKjY8xweEUOUDMapGJxzMfBfqngW8XVuycVQORSDISoG4zLW6Y9H0A6WAjXGL4tB/e0IlqgYWn87gmUuhvS3I5hTMaS/HUHT8Eduus6B42IwTsXgnIvBlUMT5PluRBUDXMGiTO4zicUgLl9VJVxUwZKIAidGVLk8SE1FEnUqlSBetz6Vyibfr3uqBC6hg/frVJtUTukGlxYORlAXWPMGl27AxXbwBpdulApP3+DSKhdhUFMpBvWP1sfWrWlIxRlVLlFSU6GS/vU0gLqMXJYuXwqV1de3OBVz6zroXo/Xi2qYEOUHEj0gATbuAcJLjXQKPG6Vv905vuhnyJ/1IU63yIN6YadQlUwT2f0JyvHM3JAlB3G8EBClevY+npa/yOKo7PN3mMOJO1rZigVeUDUbQKLQC0/VXWgs6YKoRAuj+4mFhfuJhcT6fADrfWFk518nvhVvOj4kpwKebkY+oCcBIiMCxX9xzVm1HEB1HI7op8u2MLRTI27N2+zH24YJb6XzbrPdbpseuxXGus1uus0WusWh7Qeyu4Ls9x3KVry1UVB8rm6P8o2OwtM9jj1Nz9UVHO96FER3NAqjmxn9WCsnvhXzqsdaASRSradaARpTrQ+1Asx/ws/ZWCtAYo71qVb6MA99noc+z0PfmIdezkOv56HP89CLeegb81CK4KltWRE4ikXgHIvAqRWBIy4CV7wInFkROLIiMET1XRdEzCpDlFrGKb+MqyQzMWeaSZRuxjnnTODEMyFmn2FKQb7MQqGAdDBEGWmc0tK5yE0Tc4K6lLPUNEpV45yvJnDShms3TyOi9G1cuyExJ3K+dkNcp7S4dkMCJXe+dhM5pzncpINMR0rJjhLlO0oq5VHPWY8qJT5KnPuocfqjFisAFSqC/C6IiBWkG1KqBpSoIIIkagL1XBZBzZWBMhUHSlwfqHGJgAZVgpQKBSVVK6jnckGVKgYlXTTYgusGNSodlKh6xGtAY1L8OYHnmP+EHAASnlj+k2ccMJ9n/UnzCzQ8hfwnziag+Lzxn+DjTGKn2cUTzt0XHp6UNBB2cMY0pOTfI68nm10mcVyG47gc53GZlsblShqXSXFchmlcxmlc+JJUp2kcX5DiGKOUxxn0NNaopvEGOY45SDTuoMHY//O//w/7Vd1G",HelveticaBoldObliqueCompressed="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",HelveticaObliqueCompressed="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",HelveticaCompressed="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",TimesBoldCompressed="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",TimesBoldItalicCompressed="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",TimesItalicCompressed="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",TimesRomanCompressed="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",SymbolCompressed="eJx9WFlv2zgQ/iuGnnYBt5DkS85bmk13g27SoEkPbNEHWqIlIhSpklSuov99R7JIkSLtFyGZjxzN8c0h/4oueF1jpqKz6Mt1K1GJZ4s4S+PZYrvdbqJ59J4zdYNqDAfuXuodp52spdSToZrQl6n0KyZl1Sm/xgVpa5BcKURJfs5KCgdj+F++J8+4uCUqr6IzJVo8jy4qJFCusLjD3d27BucE0cGYd+/4c3T2/U2SxfM36XYxT+JtDI8k/jGPPrMCC0oYvuWSKMJZdPYmiWMLuK9I/sCwlNHZCuRfsJD9sSiOk7dxnMFbbrgieefGBW9eROfA7I/8z1myzVbz7rnpn9vuCW/unpvZecF3eHb3IhWu5eyK5Vw0XCCFi7ezc0pnvRo5E1hi8QhCeM0lHCoIK+/yCvdR67zrfd2THPA7VfzzNTrbpv2fX+BPeH8fm2usBMnBg++/oq/forO08+QGNMgGgeG/5wfxYrE4iPFzTlFt5JtkkLeMPIL/EFoNreJBE2vrXReako3YcqvVEXCTKWJdzPS7Gizyjk/mZZvsAKC66d7FCgMtF4NC2eaVqpDyLW+QwIzi/TGoD6tvPQL7BJEPNVKVb39DW2mkJnY5FALyD9eEhU6DL4SPrqTaS0mRrHyDXrHgvpQz7AvVU+CkqgQOnN3zVgSkkFVfKslzQIgfMfPFOBxWRiyDjcs5p5wFIoFr4kImprQrP59WP1ubiVpcCgxlNLq5XC4PwM8Wy77EvSs5ZyU0EpuFaXqAzmlTjVlerzcH8TuskH/4oiLj0WQQ/oWpdXadJAfxZSOJ7exmPfD01lYSD8K/kU0288JLS7Mh+hW337dINCPA5MRX8QE1jXU8Wx/E/6J6V4zyLBtCdd36Km4Cso+QTOG4N6T5dvRusxxsu6/scK5Wgw2fKovZ20HxHSnrQDjv0WjEejvw7/MkxmMD6ZQkvnEfa1xayperg/ibZfN2kN1K4lvxHw4lZAfD6QErpy1lOt2QF4H3XATa8HDP7VnrVWY6SoNZQfKWokBRt90Ak7mt2GACwTVE8bNPE+Tw3VTIzkmQqRuLqsvtUGaFw3cTcjzJxSod3tjYSnQgS4fvpgyc8KaDZuLwXR8FtYlv8YPD9rHBuGxfbQYG1q1vL2v9+3zC9nF0EF+BqoLBFBbbjRfSYbsJprLYboxtpx1Fj23esXoMhqlx7rB9uR2OPxP/aCMDmX61/Vhm8cha7HA91bzbWUR1z0/m8tLUKSyJ1qWNHqeXrTUf16lb76Or6XIzTmWFA4mHyeLOkUS3+H23UpJQPAnbE0bUS2CSUi6IdWM13Mhpu/OlBUE1t/YbA1QYCeWLYVsrRh+SeDm0RCQEf9pxa3Xpds4RcpJhqNVDbXPkzqTpOJcK/mT1VO17gUtn57C3J3cpMlUucW77Px3hRwZ83VJFGvriJ6YRHJboLmnWPUNXWAC7FbQg+/0IrjUL4RMFBxhYkEdSBLxiXB0xD8TkEZorywPXoP0I/jxhXGzWKEoJUFgeiTvs3srq2eO9Hq2Aeq92S9eDIgeYwIeawKoVY+KyVOumuBmpY0r+CgrgQVn7ohl9n6aIoc4TJjB0lEDWvmaGa05ETrGfPRd3lm1jI64b9SKtBJlbhAFTgEhuqWoUvlhCFdwRBW613cNWqnGYyDAdj+OQfdnugpBWHUa14jAKbbN2tlDrfR6mXUT9p7F3peyGvHNBb0UCl933GHgmyN6Hc/0R6+KZxiG7Ba6ReJjg6RiAos0DpTRsHWNz1s284Mr58DI+UF52N8B7vyIGzP4+nGJcWLXiNMtiR0/0S0BPtExAj3ZNwE42zh11e6duTZS/YlZaK6DebfrkOsb4aURMnsqiA+viHpPowDrwsoX1y6moRTZ20cMXtmpOgFYf8sGd8kFrRw4ptuCQagu2lJvwmpXEUu2DNSlOoEf12vY4aXOZkG6WY8OC4hzrwHRcjVhWepjd4KdYKK7jrx5H89WjRxPWoycydlS3jZ/I2VS/G9yp9gB6PG1T1aY4YAp3LfPHPPqABbtFRHS/jf34/T82FAfb",ZapfDingbatsCompressed="eJxtmNtu20YQhl+F4FULyMGeD7pz3AY1ChtG7NpFA18w1NomIlECSRcxgrx7SVk7+wOdG8H5OJydf2Z2d5gf9cV+t0v9VK/r+6vXsXlOlbHe28paq229qj/t++m62aXZ4J/m8PRb1z9/baZxefK63Z6eXN5dVMvTCh83u277xr/6kLrnl2XNq7TpXnczuZyabdee98/b2VzM/x4/dd/T5qab2pd6PQ2vaVVfvDRD005puE3Lu7eH1HbN9hTjx4/77/X6y5lcnUmjVzHIVVDicVX/1W/SsO36dLMfu6nb9/X6TAoBD+5euvZbn8axXtuZ36dhPJrVQqgPQoh5hev91LWLkIv94W1Ygq9+aX+tZAx2tfz64284/sblN/rqfLP/mqrbt3FKu7G67Nv9cNgPzZQ2H6rz7bb6vLgZq89pTMO/M/xfEqturJpqSM/d7GJIm2oamk3aNcO3av80O5xh3yyKmm1193ZIT02bqovTKjP+MAf++7zsZvZ3276kYyWWXB0z99S18/PbafPHQ71W4fjn/fxnFO+ZvkrT0LVzTr78qB/+nk38bHM9exgP8zr1z9U7jt6840YW5uSJKcZOCaBBnKgm5mU8MVNYyMwWFvO7Ukagkmgg6sDWQ5yFFqjzUrLEaQ3BEmiwNsMSaZS0vgWfOkPHWQowNeTUc0kumnxZvsgPxlGai6VTGUqAVCTQ6QkWnc77DKEiLktSUBJKqHIQZ86d8gCpHYoiEzMsb1ubYy8vW50DChB5ZhGqrijD0EqUIeiaEHIfCg5Kpuu0ApiToaGPSY0uaQsyr65L2oKi1yFt1PLaQ3lzfXTgXodGoJYzglndSLDMPg1sTPJpQJHJigw0QrGERqD9YhyTOgONQDUyuF1zaxuokc/BW2ztXCMrGZ9WMW1oQZHIXWNBkSCfRZEL5BMUiZw6CzVSFCfUSGZFNjIldoKDkonTKQiJIGzWmFd3BizJJ9SINoLDriOfUCOZS+zg+KGD1qGiLNMLxtJD1/ns00ON6EzyUCM6vbxhoBKaqbG3DFQCNiL1iHccBPV0DHhQH/JW8EW90dkyFKGywCJU0WkVSvSGeiSUODWFFD0HYdPQVoiRgfPMA+/nnRgiAyNYSjpWNQcNSMrtFCUH4ZIRpSCWocFCSuhCEY6hoUClc0WC52BJlCYYLQdhN+hygRRRlo5BKRRLS6oihSqh+ZzzRGG1Mo4Iz1LoP0qsxDGFzk0JE42ji0jCPejomJKCuwil4m5CiRMEUMVSzVLDUstSx1Juc0oVWMpqY295qVltmtWmWW2a1aZZbZrVplltmtWmWW2G1WZYbYbVZlhthtVmWG2G1WZYbYbVZlhtltVmWW2W1WZZbZbVZlltltVmWW2W1QYjQCh7E2aAQHeGhCFgPoNoy8KNb2wxBhmGKBxoUZXlLGsLI6AsftEDHV0wIURVbANLcTKlGGBIKPOAxCmhePCKUwFzAmpDFRQvjA9R06Hq8TONvshgKDCuRAZTXigUxjxNFfKRo3CLhnIJBMFRvMZpqpNBMlQJzGT5WFQMVQI/AikPMIhEU1aDjqJvQwmjSHB05cC9jbYwc5UtAHNLhDw41ha+lEqF4JaH3gmB61SYcqInxTDmQK8v08vjqv4zDf1N0w3Lf4A8/vwPpfK11w==";var compressedJsonForFontName={Courier:CourierCompressed,"Courier-Bold":CourierBoldCompressed,"Courier-Oblique":CourierObliqueCompressed,"Courier-BoldOblique":CourierBoldObliqueCompressed,Helvetica:HelveticaCompressed,"Helvetica-Bold":HelveticaBoldCompressed,"Helvetica-Oblique":HelveticaObliqueCompressed,"Helvetica-BoldOblique":HelveticaBoldObliqueCompressed,"Times-Roman":TimesRomanCompressed,"Times-Bold":TimesBoldCompressed,"Times-Italic":TimesItalicCompressed,"Times-BoldItalic":TimesBoldItalicCompressed,Symbol:SymbolCompressed,ZapfDingbats:ZapfDingbatsCompressed},FontNames;(function(cs){cs.Courier="Courier",cs.CourierBold="Courier-Bold",cs.CourierOblique="Courier-Oblique",cs.CourierBoldOblique="Courier-BoldOblique",cs.Helvetica="Helvetica",cs.HelveticaBold="Helvetica-Bold",cs.HelveticaOblique="Helvetica-Oblique",cs.HelveticaBoldOblique="Helvetica-BoldOblique",cs.TimesRoman="Times-Roman",cs.TimesRomanBold="Times-Bold",cs.TimesRomanItalic="Times-Italic",cs.TimesRomanBoldItalic="Times-BoldItalic",cs.Symbol="Symbol",cs.ZapfDingbats="ZapfDingbats"})(FontNames||(FontNames={}));var fontCache={},Font=function(){function cs(){var is=this;this.getWidthOfGlyph=function(us){return is.CharWidths[us]},this.getXAxisKerningForPair=function(us,hs){return(is.KernPairXAmounts[us]||{})[hs]}}return cs.load=function(is){var us=fontCache[is];if(us)return us;var hs=decompressJson(compressedJsonForFontName[is]),lo=Object.assign(new cs,JSON.parse(hs));return lo.CharWidths=lo.CharMetrics.reduce(function(co,uo){return co[uo.N]=uo.WX,co},{}),lo.KernPairXAmounts=lo.KernPairs.reduce(function(co,uo){var ga=uo[0],ba=uo[1],xa=uo[2];return co[ga]||(co[ga]={}),co[ga][ba]=xa,co},{}),fontCache[is]=lo,lo},cs}();const AllEncodingsCompressed="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";var decompressedEncodings=decompressJson(AllEncodingsCompressed),allUnicodeMappings=JSON.parse(decompressedEncodings),Encoding=function(){function cs(is,us){var hs=this;this.canEncodeUnicodeCodePoint=function(lo){return lo in hs.unicodeMappings},this.encodeUnicodeCodePoint=function(lo){var co=hs.unicodeMappings[lo];if(!co){var uo=String.fromCharCode(lo),ga="0x"+padStart(lo.toString(16),4,"0"),ba=hs.name+' cannot encode "'+uo+'" ('+ga+")";throw new Error(ba)}return{code:co[0],name:co[1]}},this.name=is,this.supportedCodePoints=Object.keys(us).map(Number).sort(function(lo,co){return lo-co}),this.unicodeMappings=us}return cs}(),Encodings={Symbol:new Encoding("Symbol",allUnicodeMappings.symbol),ZapfDingbats:new Encoding("ZapfDingbats",allUnicodeMappings.zapfdingbats),WinAnsi:new Encoding("WinAnsi",allUnicodeMappings.win1252)},values=function(cs){return Object.keys(cs).map(function(is){return cs[is]})},StandardFontValues=values(FontNames),isStandardFont=function(cs){return StandardFontValues.includes(cs)},rectanglesAreEqual=function(cs,is){return cs.x===is.x&&cs.y===is.y&&cs.width===is.width&&cs.height===is.height},backtick=function(cs){return"`"+cs+"`"},singleQuote=function(cs){return"'"+cs+"'"},formatValue=function(cs){var is=typeof cs;return is==="string"?singleQuote(cs):is==="undefined"?backtick(cs):cs},createValueErrorMsg=function(cs,is,us){for(var hs=new Array(us.length),lo=0,co=us.length;lo<co;lo++){var uo=us[lo];hs[lo]=formatValue(uo)}var ga=hs.join(" or ");return backtick(is)+" must be one of "+ga+", but was actually "+formatValue(cs)},assertIsOneOf=function(cs,is,us){Array.isArray(us)||(us=values(us));for(var hs=0,lo=us.length;hs<lo;hs++)if(cs===us[hs])return;throw new TypeError(createValueErrorMsg(cs,is,us))},assertIsOneOfOrUndefined=function(cs,is,us){Array.isArray(us)||(us=values(us)),assertIsOneOf(cs,is,us.concat(void 0))},assertIsSubset=function(cs,is,us){Array.isArray(us)||(us=values(us));for(var hs=0,lo=cs.length;hs<lo;hs++)assertIsOneOf(cs[hs],is,us)},getType=function(cs){return cs===null?"null":cs===void 0?"undefined":typeof cs=="string"?"string":isNaN(cs)?"NaN":typeof cs=="number"?"number":typeof cs=="boolean"?"boolean":typeof cs=="symbol"?"symbol":typeof cs=="bigint"?"bigint":cs.constructor&&cs.constructor.name?cs.constructor.name:cs.name?cs.name:cs.constructor?String(cs.constructor):String(cs)},isType=function(cs,is){return is==="null"?cs===null:is==="undefined"?cs===void 0:is==="string"?typeof cs=="string":is==="number"?typeof cs=="number"&&!isNaN(cs):is==="boolean"?typeof cs=="boolean":is==="symbol"?typeof cs=="symbol":is==="bigint"?typeof cs=="bigint":is===Date?cs instanceof Date:is===Array?cs instanceof Array:is===Uint8Array?cs instanceof Uint8Array:is===ArrayBuffer?cs instanceof ArrayBuffer:is===Function?cs instanceof Function:cs instanceof is[0]},createTypeErrorMsg=function(cs,is,us){for(var hs=new Array(us.length),lo=0,co=us.length;lo<co;lo++){var uo=us[lo];uo==="null"&&(hs[lo]=backtick("null")),uo==="undefined"&&(hs[lo]=backtick("undefined")),uo==="string"?hs[lo]=backtick("string"):uo==="number"?hs[lo]=backtick("number"):uo==="boolean"?hs[lo]=backtick("boolean"):uo==="symbol"?hs[lo]=backtick("symbol"):uo==="bigint"?hs[lo]=backtick("bigint"):uo===Array?hs[lo]=backtick("Array"):uo===Uint8Array?hs[lo]=backtick("Uint8Array"):uo===ArrayBuffer?hs[lo]=backtick("ArrayBuffer"):hs[lo]=backtick(uo[1])}var ga=hs.join(" or ");return backtick(is)+" must be of type "+ga+", but was actually of type "+backtick(getType(cs))},assertIs=function(cs,is,us){for(var hs=0,lo=us.length;hs<lo;hs++)if(isType(cs,us[hs]))return;throw new TypeError(createTypeErrorMsg(cs,is,us))},assertOrUndefined=function(cs,is,us){assertIs(cs,is,us.concat("undefined"))},assertEachIs=function(cs,is,us){for(var hs=0,lo=cs.length;hs<lo;hs++)assertIs(cs[hs],is,us)},assertRange=function(cs,is,us,hs){if(assertIs(cs,is,["number"]),assertIs(us,"min",["number"]),assertIs(hs,"max",["number"]),hs=Math.max(us,hs),cs<us||cs>hs)throw new Error(backtick(is)+" must be at least "+us+" and at most "+hs+", but was actually "+cs)},assertRangeOrUndefined=function(cs,is,us,hs){assertIs(cs,is,["number","undefined"]),typeof cs=="number"&&assertRange(cs,is,us,hs)},assertMultiple=function(cs,is,us){if(assertIs(cs,is,["number"]),cs%us!==0)throw new Error(backtick(is)+" must be a multiple of "+us+", but was actually "+cs)},assertInteger=function(cs,is){if(!Number.isInteger(cs))throw new Error(backtick(is)+" must be an integer, but was actually "+cs)},assertPositive=function(cs,is){if(![1,0].includes(Math.sign(cs)))throw new Error(backtick(is)+" must be a positive number or 0, but was actually "+cs)},pdfDocEncodingToUnicode=new Uint16Array(256);for(var idx$2=0;idx$2<256;idx$2++)pdfDocEncodingToUnicode[idx$2]=idx$2;pdfDocEncodingToUnicode[22]=toCharCode("");pdfDocEncodingToUnicode[24]=toCharCode("");pdfDocEncodingToUnicode[25]=toCharCode("");pdfDocEncodingToUnicode[26]=toCharCode("");pdfDocEncodingToUnicode[27]=toCharCode("");pdfDocEncodingToUnicode[28]=toCharCode("");pdfDocEncodingToUnicode[29]=toCharCode("");pdfDocEncodingToUnicode[30]=toCharCode("");pdfDocEncodingToUnicode[31]=toCharCode("");pdfDocEncodingToUnicode[127]=toCharCode("");pdfDocEncodingToUnicode[128]=toCharCode("");pdfDocEncodingToUnicode[129]=toCharCode("");pdfDocEncodingToUnicode[130]=toCharCode("");pdfDocEncodingToUnicode[131]=toCharCode("");pdfDocEncodingToUnicode[132]=toCharCode("");pdfDocEncodingToUnicode[133]=toCharCode("");pdfDocEncodingToUnicode[134]=toCharCode("");pdfDocEncodingToUnicode[135]=toCharCode("");pdfDocEncodingToUnicode[136]=toCharCode("");pdfDocEncodingToUnicode[137]=toCharCode("");pdfDocEncodingToUnicode[138]=toCharCode("");pdfDocEncodingToUnicode[139]=toCharCode("");pdfDocEncodingToUnicode[140]=toCharCode("");pdfDocEncodingToUnicode[141]=toCharCode("");pdfDocEncodingToUnicode[142]=toCharCode("");pdfDocEncodingToUnicode[143]=toCharCode("");pdfDocEncodingToUnicode[144]=toCharCode("");pdfDocEncodingToUnicode[145]=toCharCode("");pdfDocEncodingToUnicode[146]=toCharCode("");pdfDocEncodingToUnicode[147]=toCharCode("");pdfDocEncodingToUnicode[148]=toCharCode("");pdfDocEncodingToUnicode[149]=toCharCode("");pdfDocEncodingToUnicode[150]=toCharCode("");pdfDocEncodingToUnicode[151]=toCharCode("");pdfDocEncodingToUnicode[152]=toCharCode("");pdfDocEncodingToUnicode[153]=toCharCode("");pdfDocEncodingToUnicode[154]=toCharCode("");pdfDocEncodingToUnicode[155]=toCharCode("");pdfDocEncodingToUnicode[156]=toCharCode("");pdfDocEncodingToUnicode[157]=toCharCode("");pdfDocEncodingToUnicode[158]=toCharCode("");pdfDocEncodingToUnicode[159]=toCharCode("");pdfDocEncodingToUnicode[160]=toCharCode("");pdfDocEncodingToUnicode[173]=toCharCode("");var pdfDocEncodingDecode=function(cs){for(var is=new Array(cs.length),us=0,hs=cs.length;us<hs;us++)is[us]=pdfDocEncodingToUnicode[cs[us]];return String.fromCodePoint.apply(String,is)},Cache=function(){function cs(is){this.populate=is,this.value=void 0}return cs.prototype.getValue=function(){return this.value},cs.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},cs.prototype.invalidate=function(){this.value=void 0},cs.populatedBy=function(is){return new cs(is)},cs}(),MethodNotImplementedError=function(cs){__extends(is,cs);function is(us,hs){var lo=this,co="Method "+us+"."+hs+"() not implemented";return lo=cs.call(this,co)||this,lo}return is}(Error),PrivateConstructorError=function(cs){__extends(is,cs);function is(us){var hs=this,lo="Cannot construct "+us+" - it has a private constructor";return hs=cs.call(this,lo)||this,hs}return is}(Error),UnexpectedObjectTypeError=function(cs){__extends(is,cs);function is(us,hs){var lo=this,co=function(ba){var xa,_a;return(xa=ba==null?void 0:ba.name)!==null&&xa!==void 0?xa:(_a=ba==null?void 0:ba.constructor)===null||_a===void 0?void 0:_a.name},uo=Array.isArray(us)?us.map(co):[co(us)],ga="Expected instance of "+uo.join(" or ")+", "+("but got instance of "+(hs&&co(hs)));return lo=cs.call(this,ga)||this,lo}return is}(Error),UnsupportedEncodingError=function(cs){__extends(is,cs);function is(us){var hs=this,lo=us+" stream encoding not supported";return hs=cs.call(this,lo)||this,hs}return is}(Error),ReparseError=function(cs){__extends(is,cs);function is(us,hs){var lo=this,co="Cannot call "+us+"."+hs+"() more than once";return lo=cs.call(this,co)||this,lo}return is}(Error);(function(cs){__extends(is,cs);function is(us){var hs=this,lo="Missing catalog (ref="+us+")";return hs=cs.call(this,lo)||this,hs}return is})(Error);var MissingPageContentsEmbeddingError=function(cs){__extends(is,cs);function is(){var us=this,hs="Can't embed page with missing Contents";return us=cs.call(this,hs)||this,us}return is}(Error),UnrecognizedStreamTypeError=function(cs){__extends(is,cs);function is(us){var hs,lo,co,uo=this,ga=(co=(lo=(hs=us==null?void 0:us.contructor)===null||hs===void 0?void 0:hs.name)!==null&&lo!==void 0?lo:us==null?void 0:us.name)!==null&&co!==void 0?co:us,ba="Unrecognized stream type: "+ga;return uo=cs.call(this,ba)||this,uo}return is}(Error),PageEmbeddingMismatchedContextError=function(cs){__extends(is,cs);function is(){var us=this,hs="Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.";return us=cs.call(this,hs)||this,us}return is}(Error),PDFArrayIsNotRectangleError=function(cs){__extends(is,cs);function is(us){var hs=this,lo="Attempted to convert PDFArray with "+us+" elements to rectangle, but must have exactly 4 elements.";return hs=cs.call(this,lo)||this,hs}return is}(Error),InvalidPDFDateStringError=function(cs){__extends(is,cs);function is(us){var hs=this,lo='Attempted to convert "'+us+'" to a date, but it does not match the PDF date string format.';return hs=cs.call(this,lo)||this,hs}return is}(Error),InvalidTargetIndexError=function(cs){__extends(is,cs);function is(us,hs){var lo=this,co="Invalid targetIndex specified: targetIndex="+us+" must be less than Count="+hs;return lo=cs.call(this,co)||this,lo}return is}(Error),CorruptPageTreeError=function(cs){__extends(is,cs);function is(us,hs){var lo=this,co="Failed to "+hs+" at targetIndex="+us+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid";return lo=cs.call(this,co)||this,lo}return is}(Error),IndexOutOfBoundsError=function(cs){__extends(is,cs);function is(us,hs,lo){var co=this,uo="index should be at least "+hs+" and at most "+lo+", but was actually "+us;return co=cs.call(this,uo)||this,co}return is}(Error),InvalidAcroFieldValueError=function(cs){__extends(is,cs);function is(){var us=this,hs="Attempted to set invalid field value";return us=cs.call(this,hs)||this,us}return is}(Error),MultiSelectValueError=function(cs){__extends(is,cs);function is(){var us=this,hs="Attempted to select multiple values for single-select field";return us=cs.call(this,hs)||this,us}return is}(Error),MissingDAEntryError=function(cs){__extends(is,cs);function is(us){var hs=this,lo="No /DA (default appearance) entry found for field: "+us;return hs=cs.call(this,lo)||this,hs}return is}(Error),MissingTfOperatorError=function(cs){__extends(is,cs);function is(us){var hs=this,lo="No Tf operator found for DA of field: "+us;return hs=cs.call(this,lo)||this,hs}return is}(Error),NumberParsingError=function(cs){__extends(is,cs);function is(us,hs){var lo=this,co="Failed to parse number "+("(line:"+us.line+" col:"+us.column+" offset="+us.offset+'): "'+hs+'"');return lo=cs.call(this,co)||this,lo}return is}(Error),PDFParsingError=function(cs){__extends(is,cs);function is(us,hs){var lo=this,co="Failed to parse PDF document "+("(line:"+us.line+" col:"+us.column+" offset="+us.offset+"): "+hs);return lo=cs.call(this,co)||this,lo}return is}(Error),NextByteAssertionError=function(cs){__extends(is,cs);function is(us,hs,lo){var co=this,uo="Expected next byte to be "+hs+" but it was actually "+lo;return co=cs.call(this,us,uo)||this,co}return is}(PDFParsingError),PDFObjectParsingError=function(cs){__extends(is,cs);function is(us,hs){var lo=this,co="Failed to parse PDF object starting with the following byte: "+hs;return lo=cs.call(this,us,co)||this,lo}return is}(PDFParsingError),PDFInvalidObjectParsingError=function(cs){__extends(is,cs);function is(us){var hs=this,lo="Failed to parse invalid PDF object";return hs=cs.call(this,us,lo)||this,hs}return is}(PDFParsingError),PDFStreamParsingError=function(cs){__extends(is,cs);function is(us){var hs=this,lo="Failed to parse PDF stream";return hs=cs.call(this,us,lo)||this,hs}return is}(PDFParsingError),UnbalancedParenthesisError=function(cs){__extends(is,cs);function is(us){var hs=this,lo="Failed to parse PDF literal string due to unbalanced parenthesis";return hs=cs.call(this,us,lo)||this,hs}return is}(PDFParsingError),StalledParserError=function(cs){__extends(is,cs);function is(us){var hs=this,lo="Parser stalled";return hs=cs.call(this,us,lo)||this,hs}return is}(PDFParsingError),MissingPDFHeaderError=function(cs){__extends(is,cs);function is(us){var hs=this,lo="No PDF header found";return hs=cs.call(this,us,lo)||this,hs}return is}(PDFParsingError),MissingKeywordError=function(cs){__extends(is,cs);function is(us,hs){var lo=this,co="Did not find expected keyword '"+arrayAsString(hs)+"'";return lo=cs.call(this,us,co)||this,lo}return is}(PDFParsingError),CharCodes;(function(cs){cs[cs.Null=0]="Null",cs[cs.Backspace=8]="Backspace",cs[cs.Tab=9]="Tab",cs[cs.Newline=10]="Newline",cs[cs.FormFeed=12]="FormFeed",cs[cs.CarriageReturn=13]="CarriageReturn",cs[cs.Space=32]="Space",cs[cs.ExclamationPoint=33]="ExclamationPoint",cs[cs.Hash=35]="Hash",cs[cs.Percent=37]="Percent",cs[cs.LeftParen=40]="LeftParen",cs[cs.RightParen=41]="RightParen",cs[cs.Plus=43]="Plus",cs[cs.Minus=45]="Minus",cs[cs.Dash=45]="Dash",cs[cs.Period=46]="Period",cs[cs.ForwardSlash=47]="ForwardSlash",cs[cs.Zero=48]="Zero",cs[cs.One=49]="One",cs[cs.Two=50]="Two",cs[cs.Three=51]="Three",cs[cs.Four=52]="Four",cs[cs.Five=53]="Five",cs[cs.Six=54]="Six",cs[cs.Seven=55]="Seven",cs[cs.Eight=56]="Eight",cs[cs.Nine=57]="Nine",cs[cs.LessThan=60]="LessThan",cs[cs.GreaterThan=62]="GreaterThan",cs[cs.A=65]="A",cs[cs.D=68]="D",cs[cs.E=69]="E",cs[cs.F=70]="F",cs[cs.O=79]="O",cs[cs.P=80]="P",cs[cs.R=82]="R",cs[cs.LeftSquareBracket=91]="LeftSquareBracket",cs[cs.BackSlash=92]="BackSlash",cs[cs.RightSquareBracket=93]="RightSquareBracket",cs[cs.a=97]="a",cs[cs.b=98]="b",cs[cs.d=100]="d",cs[cs.e=101]="e",cs[cs.f=102]="f",cs[cs.i=105]="i",cs[cs.j=106]="j",cs[cs.l=108]="l",cs[cs.m=109]="m",cs[cs.n=110]="n",cs[cs.o=111]="o",cs[cs.r=114]="r",cs[cs.s=115]="s",cs[cs.t=116]="t",cs[cs.u=117]="u",cs[cs.x=120]="x",cs[cs.LeftCurly=123]="LeftCurly",cs[cs.RightCurly=125]="RightCurly",cs[cs.Tilde=126]="Tilde"})(CharCodes||(CharCodes={}));const CharCodes$1=CharCodes;var PDFHeader=function(){function cs(is,us){this.major=String(is),this.minor=String(us)}return cs.prototype.toString=function(){var is=charFromCode(129);return"%PDF-"+this.major+"."+this.minor+`
%`+is+is+is+is},cs.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},cs.prototype.copyBytesInto=function(is,us){var hs=us;return is[us++]=CharCodes$1.Percent,is[us++]=CharCodes$1.P,is[us++]=CharCodes$1.D,is[us++]=CharCodes$1.F,is[us++]=CharCodes$1.Dash,us+=copyStringIntoBuffer(this.major,is,us),is[us++]=CharCodes$1.Period,us+=copyStringIntoBuffer(this.minor,is,us),is[us++]=CharCodes$1.Newline,is[us++]=CharCodes$1.Percent,is[us++]=129,is[us++]=129,is[us++]=129,is[us++]=129,us-hs},cs.forVersion=function(is,us){return new cs(is,us)},cs}(),PDFObject=function(){function cs(){}return cs.prototype.clone=function(is){throw new MethodNotImplementedError(this.constructor.name,"clone")},cs.prototype.toString=function(){throw new MethodNotImplementedError(this.constructor.name,"toString")},cs.prototype.sizeInBytes=function(){throw new MethodNotImplementedError(this.constructor.name,"sizeInBytes")},cs.prototype.copyBytesInto=function(is,us){throw new MethodNotImplementedError(this.constructor.name,"copyBytesInto")},cs}(),PDFNumber=function(cs){__extends(is,cs);function is(us){var hs=cs.call(this)||this;return hs.numberValue=us,hs.stringValue=numberToString(us),hs}return is.prototype.asNumber=function(){return this.numberValue},is.prototype.value=function(){return this.numberValue},is.prototype.clone=function(){return is.of(this.numberValue)},is.prototype.toString=function(){return this.stringValue},is.prototype.sizeInBytes=function(){return this.stringValue.length},is.prototype.copyBytesInto=function(us,hs){return hs+=copyStringIntoBuffer(this.stringValue,us,hs),this.stringValue.length},is.of=function(us){return new is(us)},is}(PDFObject),PDFArray=function(cs){__extends(is,cs);function is(us){var hs=cs.call(this)||this;return hs.array=[],hs.context=us,hs}return is.prototype.size=function(){return this.array.length},is.prototype.push=function(us){this.array.push(us)},is.prototype.insert=function(us,hs){this.array.splice(us,0,hs)},is.prototype.indexOf=function(us){var hs=this.array.indexOf(us);return hs===-1?void 0:hs},is.prototype.remove=function(us){this.array.splice(us,1)},is.prototype.set=function(us,hs){this.array[us]=hs},is.prototype.get=function(us){return this.array[us]},is.prototype.lookupMaybe=function(us){for(var hs,lo=[],co=1;co<arguments.length;co++)lo[co-1]=arguments[co];return(hs=this.context).lookupMaybe.apply(hs,__spreadArrays([this.get(us)],lo))},is.prototype.lookup=function(us){for(var hs,lo=[],co=1;co<arguments.length;co++)lo[co-1]=arguments[co];return(hs=this.context).lookup.apply(hs,__spreadArrays([this.get(us)],lo))},is.prototype.asRectangle=function(){if(this.size()!==4)throw new PDFArrayIsNotRectangleError(this.size());var us=this.lookup(0,PDFNumber).asNumber(),hs=this.lookup(1,PDFNumber).asNumber(),lo=this.lookup(2,PDFNumber).asNumber(),co=this.lookup(3,PDFNumber).asNumber(),uo=us,ga=hs,ba=lo-us,xa=co-hs;return{x:uo,y:ga,width:ba,height:xa}},is.prototype.asArray=function(){return this.array.slice()},is.prototype.clone=function(us){for(var hs=is.withContext(us||this.context),lo=0,co=this.size();lo<co;lo++)hs.push(this.array[lo]);return hs},is.prototype.toString=function(){for(var us="[ ",hs=0,lo=this.size();hs<lo;hs++)us+=this.get(hs).toString(),us+=" ";return us+="]",us},is.prototype.sizeInBytes=function(){for(var us=3,hs=0,lo=this.size();hs<lo;hs++)us+=this.get(hs).sizeInBytes()+1;return us},is.prototype.copyBytesInto=function(us,hs){var lo=hs;us[hs++]=CharCodes$1.LeftSquareBracket,us[hs++]=CharCodes$1.Space;for(var co=0,uo=this.size();co<uo;co++)hs+=this.get(co).copyBytesInto(us,hs),us[hs++]=CharCodes$1.Space;return us[hs++]=CharCodes$1.RightSquareBracket,hs-lo},is.prototype.scalePDFNumbers=function(us,hs){for(var lo=0,co=this.size();lo<co;lo++){var uo=this.lookup(lo);if(uo instanceof PDFNumber){var ga=lo%2===0?us:hs;this.set(lo,PDFNumber.of(uo.asNumber()*ga))}}},is.withContext=function(us){return new is(us)},is}(PDFObject),ENFORCER$2={},PDFBool=function(cs){__extends(is,cs);function is(us,hs){var lo=this;if(us!==ENFORCER$2)throw new PrivateConstructorError("PDFBool");return lo=cs.call(this)||this,lo.value=hs,lo}return is.prototype.asBoolean=function(){return this.value},is.prototype.clone=function(){return this},is.prototype.toString=function(){return String(this.value)},is.prototype.sizeInBytes=function(){return this.value?4:5},is.prototype.copyBytesInto=function(us,hs){return this.value?(us[hs++]=CharCodes$1.t,us[hs++]=CharCodes$1.r,us[hs++]=CharCodes$1.u,us[hs++]=CharCodes$1.e,4):(us[hs++]=CharCodes$1.f,us[hs++]=CharCodes$1.a,us[hs++]=CharCodes$1.l,us[hs++]=CharCodes$1.s,us[hs++]=CharCodes$1.e,5)},is.True=new is(ENFORCER$2,!0),is.False=new is(ENFORCER$2,!1),is}(PDFObject),IsDelimiter=new Uint8Array(256);IsDelimiter[CharCodes$1.LeftParen]=1;IsDelimiter[CharCodes$1.RightParen]=1;IsDelimiter[CharCodes$1.LessThan]=1;IsDelimiter[CharCodes$1.GreaterThan]=1;IsDelimiter[CharCodes$1.LeftSquareBracket]=1;IsDelimiter[CharCodes$1.RightSquareBracket]=1;IsDelimiter[CharCodes$1.LeftCurly]=1;IsDelimiter[CharCodes$1.RightCurly]=1;IsDelimiter[CharCodes$1.ForwardSlash]=1;IsDelimiter[CharCodes$1.Percent]=1;var IsWhitespace=new Uint8Array(256);IsWhitespace[CharCodes$1.Null]=1;IsWhitespace[CharCodes$1.Tab]=1;IsWhitespace[CharCodes$1.Newline]=1;IsWhitespace[CharCodes$1.FormFeed]=1;IsWhitespace[CharCodes$1.CarriageReturn]=1;IsWhitespace[CharCodes$1.Space]=1;var IsIrregular=new Uint8Array(256);for(var idx$1=0,len$1=256;idx$1<len$1;idx$1++)IsIrregular[idx$1]=IsWhitespace[idx$1]||IsDelimiter[idx$1]?1:0;IsIrregular[CharCodes$1.Hash]=1;var decodeName=function(cs){return cs.replace(/#([\dABCDEF]{2})/g,function(is,us){return charFromHexCode(us)})},isRegularChar=function(cs){return cs>=CharCodes$1.ExclamationPoint&&cs<=CharCodes$1.Tilde&&!IsIrregular[cs]},ENFORCER$1={},pool$1=new Map,PDFName=function(cs){__extends(is,cs);function is(us,hs){var lo=this;if(us!==ENFORCER$1)throw new PrivateConstructorError("PDFName");lo=cs.call(this)||this;for(var co="/",uo=0,ga=hs.length;uo<ga;uo++){var ba=hs[uo],xa=toCharCode(ba);co+=isRegularChar(xa)?ba:"#"+toHexString(xa)}return lo.encodedName=co,lo}return is.prototype.asBytes=function(){for(var us=[],hs="",lo=!1,co=function($a){$a!==void 0&&us.push($a),lo=!1},uo=1,ga=this.encodedName.length;uo<ga;uo++){var ba=this.encodedName[uo],xa=toCharCode(ba),_a=this.encodedName[uo+1];lo?xa>=CharCodes$1.Zero&&xa<=CharCodes$1.Nine||xa>=CharCodes$1.a&&xa<=CharCodes$1.f||xa>=CharCodes$1.A&&xa<=CharCodes$1.F?(hs+=ba,(hs.length===2||!(_a>="0"&&_a<="9"||_a>="a"&&_a<="f"||_a>="A"&&_a<="F"))&&(co(parseInt(hs,16)),hs="")):co(xa):xa===CharCodes$1.Hash?lo=!0:co(xa)}return new Uint8Array(us)},is.prototype.decodeText=function(){var us=this.asBytes();return String.fromCharCode.apply(String,Array.from(us))},is.prototype.asString=function(){return this.encodedName},is.prototype.value=function(){return this.encodedName},is.prototype.clone=function(){return this},is.prototype.toString=function(){return this.encodedName},is.prototype.sizeInBytes=function(){return this.encodedName.length},is.prototype.copyBytesInto=function(us,hs){return hs+=copyStringIntoBuffer(this.encodedName,us,hs),this.encodedName.length},is.of=function(us){var hs=decodeName(us),lo=pool$1.get(hs);return lo||(lo=new is(ENFORCER$1,hs),pool$1.set(hs,lo)),lo},is.Length=is.of("Length"),is.FlateDecode=is.of("FlateDecode"),is.Resources=is.of("Resources"),is.Font=is.of("Font"),is.XObject=is.of("XObject"),is.ExtGState=is.of("ExtGState"),is.Contents=is.of("Contents"),is.Type=is.of("Type"),is.Parent=is.of("Parent"),is.MediaBox=is.of("MediaBox"),is.Page=is.of("Page"),is.Annots=is.of("Annots"),is.TrimBox=is.of("TrimBox"),is.ArtBox=is.of("ArtBox"),is.BleedBox=is.of("BleedBox"),is.CropBox=is.of("CropBox"),is.Rotate=is.of("Rotate"),is.Title=is.of("Title"),is.Author=is.of("Author"),is.Subject=is.of("Subject"),is.Creator=is.of("Creator"),is.Keywords=is.of("Keywords"),is.Producer=is.of("Producer"),is.CreationDate=is.of("CreationDate"),is.ModDate=is.of("ModDate"),is}(PDFObject),PDFNull=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.prototype.asNull=function(){return null},is.prototype.clone=function(){return this},is.prototype.toString=function(){return"null"},is.prototype.sizeInBytes=function(){return 4},is.prototype.copyBytesInto=function(us,hs){return us[hs++]=CharCodes$1.n,us[hs++]=CharCodes$1.u,us[hs++]=CharCodes$1.l,us[hs++]=CharCodes$1.l,4},is}(PDFObject);const PDFNull$1=new PDFNull;var PDFDict=function(cs){__extends(is,cs);function is(us,hs){var lo=cs.call(this)||this;return lo.dict=us,lo.context=hs,lo}return is.prototype.keys=function(){return Array.from(this.dict.keys())},is.prototype.values=function(){return Array.from(this.dict.values())},is.prototype.entries=function(){return Array.from(this.dict.entries())},is.prototype.set=function(us,hs){this.dict.set(us,hs)},is.prototype.get=function(us,hs){hs===void 0&&(hs=!1);var lo=this.dict.get(us);if(!(lo===PDFNull$1&&!hs))return lo},is.prototype.has=function(us){var hs=this.dict.get(us);return hs!==void 0&&hs!==PDFNull$1},is.prototype.lookupMaybe=function(us){for(var hs,lo=[],co=1;co<arguments.length;co++)lo[co-1]=arguments[co];var uo=lo.includes(PDFNull$1),ga=(hs=this.context).lookupMaybe.apply(hs,__spreadArrays([this.get(us,uo)],lo));if(!(ga===PDFNull$1&&!uo))return ga},is.prototype.lookup=function(us){for(var hs,lo=[],co=1;co<arguments.length;co++)lo[co-1]=arguments[co];var uo=lo.includes(PDFNull$1),ga=(hs=this.context).lookup.apply(hs,__spreadArrays([this.get(us,uo)],lo));if(!(ga===PDFNull$1&&!uo))return ga},is.prototype.delete=function(us){return this.dict.delete(us)},is.prototype.asMap=function(){return new Map(this.dict)},is.prototype.uniqueKey=function(us){us===void 0&&(us="");for(var hs=this.keys(),lo=PDFName.of(this.context.addRandomSuffix(us,10));hs.includes(lo);)lo=PDFName.of(this.context.addRandomSuffix(us,10));return lo},is.prototype.clone=function(us){for(var hs=is.withContext(us||this.context),lo=this.entries(),co=0,uo=lo.length;co<uo;co++){var ga=lo[co],ba=ga[0],xa=ga[1];hs.set(ba,xa)}return hs},is.prototype.toString=function(){for(var us=`<<
`,hs=this.entries(),lo=0,co=hs.length;lo<co;lo++){var uo=hs[lo],ga=uo[0],ba=uo[1];us+=ga.toString()+" "+ba.toString()+`
`}return us+=">>",us},is.prototype.sizeInBytes=function(){for(var us=5,hs=this.entries(),lo=0,co=hs.length;lo<co;lo++){var uo=hs[lo],ga=uo[0],ba=uo[1];us+=ga.sizeInBytes()+ba.sizeInBytes()+2}return us},is.prototype.copyBytesInto=function(us,hs){var lo=hs;us[hs++]=CharCodes$1.LessThan,us[hs++]=CharCodes$1.LessThan,us[hs++]=CharCodes$1.Newline;for(var co=this.entries(),uo=0,ga=co.length;uo<ga;uo++){var ba=co[uo],xa=ba[0],_a=ba[1];hs+=xa.copyBytesInto(us,hs),us[hs++]=CharCodes$1.Space,hs+=_a.copyBytesInto(us,hs),us[hs++]=CharCodes$1.Newline}return us[hs++]=CharCodes$1.GreaterThan,us[hs++]=CharCodes$1.GreaterThan,hs-lo},is.withContext=function(us){return new is(new Map,us)},is.fromMapWithContext=function(us,hs){return new is(us,hs)},is}(PDFObject),PDFStream=function(cs){__extends(is,cs);function is(us){var hs=cs.call(this)||this;return hs.dict=us,hs}return is.prototype.clone=function(us){throw new MethodNotImplementedError(this.constructor.name,"clone")},is.prototype.getContentsString=function(){throw new MethodNotImplementedError(this.constructor.name,"getContentsString")},is.prototype.getContents=function(){throw new MethodNotImplementedError(this.constructor.name,"getContents")},is.prototype.getContentsSize=function(){throw new MethodNotImplementedError(this.constructor.name,"getContentsSize")},is.prototype.updateDict=function(){var us=this.getContentsSize();this.dict.set(PDFName.Length,PDFNumber.of(us))},is.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},is.prototype.toString=function(){this.updateDict();var us=this.dict.toString();return us+=`
stream
`,us+=this.getContentsString(),us+=`
endstream`,us},is.prototype.copyBytesInto=function(us,hs){this.updateDict();var lo=hs;hs+=this.dict.copyBytesInto(us,hs),us[hs++]=CharCodes$1.Newline,us[hs++]=CharCodes$1.s,us[hs++]=CharCodes$1.t,us[hs++]=CharCodes$1.r,us[hs++]=CharCodes$1.e,us[hs++]=CharCodes$1.a,us[hs++]=CharCodes$1.m,us[hs++]=CharCodes$1.Newline;for(var co=this.getContents(),uo=0,ga=co.length;uo<ga;uo++)us[hs++]=co[uo];return us[hs++]=CharCodes$1.Newline,us[hs++]=CharCodes$1.e,us[hs++]=CharCodes$1.n,us[hs++]=CharCodes$1.d,us[hs++]=CharCodes$1.s,us[hs++]=CharCodes$1.t,us[hs++]=CharCodes$1.r,us[hs++]=CharCodes$1.e,us[hs++]=CharCodes$1.a,us[hs++]=CharCodes$1.m,hs-lo},is}(PDFObject),PDFRawStream=function(cs){__extends(is,cs);function is(us,hs){var lo=cs.call(this,us)||this;return lo.contents=hs,lo}return is.prototype.asUint8Array=function(){return this.contents.slice()},is.prototype.clone=function(us){return is.of(this.dict.clone(us),this.contents.slice())},is.prototype.getContentsString=function(){return arrayAsString(this.contents)},is.prototype.getContents=function(){return this.contents},is.prototype.getContentsSize=function(){return this.contents.length},is.of=function(us,hs){return new is(us,hs)},is}(PDFStream),ENFORCER={},pool=new Map,PDFRef=function(cs){__extends(is,cs);function is(us,hs,lo){var co=this;if(us!==ENFORCER)throw new PrivateConstructorError("PDFRef");return co=cs.call(this)||this,co.objectNumber=hs,co.generationNumber=lo,co.tag=hs+" "+lo+" R",co}return is.prototype.clone=function(){return this},is.prototype.toString=function(){return this.tag},is.prototype.sizeInBytes=function(){return this.tag.length},is.prototype.copyBytesInto=function(us,hs){return hs+=copyStringIntoBuffer(this.tag,us,hs),this.tag.length},is.of=function(us,hs){hs===void 0&&(hs=0);var lo=us+" "+hs+" R",co=pool.get(lo);return co||(co=new is(ENFORCER,us,hs),pool.set(lo,co)),co},is}(PDFObject),PDFOperator=function(){function cs(is,us){this.name=is,this.args=us||[]}return cs.prototype.clone=function(is){for(var us=new Array(this.args.length),hs=0,lo=us.length;hs<lo;hs++){var co=this.args[hs];us[hs]=co instanceof PDFObject?co.clone(is):co}return cs.of(this.name,us)},cs.prototype.toString=function(){for(var is="",us=0,hs=this.args.length;us<hs;us++)is+=String(this.args[us])+" ";return is+=this.name,is},cs.prototype.sizeInBytes=function(){for(var is=0,us=0,hs=this.args.length;us<hs;us++){var lo=this.args[us];is+=(lo instanceof PDFObject?lo.sizeInBytes():lo.length)+1}return is+=this.name.length,is},cs.prototype.copyBytesInto=function(is,us){for(var hs=us,lo=0,co=this.args.length;lo<co;lo++){var uo=this.args[lo];uo instanceof PDFObject?us+=uo.copyBytesInto(is,us):us+=copyStringIntoBuffer(uo,is,us),is[us++]=CharCodes$1.Space}return us+=copyStringIntoBuffer(this.name,is,us),us-hs},cs.of=function(is,us){return new cs(is,us)},cs}(),PDFOperatorNames;(function(cs){cs.NonStrokingColor="sc",cs.NonStrokingColorN="scn",cs.NonStrokingColorRgb="rg",cs.NonStrokingColorGray="g",cs.NonStrokingColorCmyk="k",cs.NonStrokingColorspace="cs",cs.StrokingColor="SC",cs.StrokingColorN="SCN",cs.StrokingColorRgb="RG",cs.StrokingColorGray="G",cs.StrokingColorCmyk="K",cs.StrokingColorspace="CS",cs.BeginMarkedContentSequence="BDC",cs.BeginMarkedContent="BMC",cs.EndMarkedContent="EMC",cs.MarkedContentPointWithProps="DP",cs.MarkedContentPoint="MP",cs.DrawObject="Do",cs.ConcatTransformationMatrix="cm",cs.PopGraphicsState="Q",cs.PushGraphicsState="q",cs.SetFlatness="i",cs.SetGraphicsStateParams="gs",cs.SetLineCapStyle="J",cs.SetLineDashPattern="d",cs.SetLineJoinStyle="j",cs.SetLineMiterLimit="M",cs.SetLineWidth="w",cs.SetTextMatrix="Tm",cs.SetRenderingIntent="ri",cs.AppendRectangle="re",cs.BeginInlineImage="BI",cs.BeginInlineImageData="ID",cs.EndInlineImage="EI",cs.ClipEvenOdd="W*",cs.ClipNonZero="W",cs.CloseAndStroke="s",cs.CloseFillEvenOddAndStroke="b*",cs.CloseFillNonZeroAndStroke="b",cs.ClosePath="h",cs.AppendBezierCurve="c",cs.CurveToReplicateFinalPoint="y",cs.CurveToReplicateInitialPoint="v",cs.EndPath="n",cs.FillEvenOddAndStroke="B*",cs.FillEvenOdd="f*",cs.FillNonZeroAndStroke="B",cs.FillNonZero="f",cs.LegacyFillNonZero="F",cs.LineTo="l",cs.MoveTo="m",cs.ShadingFill="sh",cs.StrokePath="S",cs.BeginText="BT",cs.EndText="ET",cs.MoveText="Td",cs.MoveTextSetLeading="TD",cs.NextLine="T*",cs.SetCharacterSpacing="Tc",cs.SetFontAndSize="Tf",cs.SetTextHorizontalScaling="Tz",cs.SetTextLineHeight="TL",cs.SetTextRenderingMode="Tr",cs.SetTextRise="Ts",cs.SetWordSpacing="Tw",cs.ShowText="Tj",cs.ShowTextAdjusted="TJ",cs.ShowTextLine="'",cs.ShowTextLineAndSpace='"',cs.Type3D0="d0",cs.Type3D1="d1",cs.BeginCompatibilitySection="BX",cs.EndCompatibilitySection="EX"})(PDFOperatorNames||(PDFOperatorNames={}));const Ops=PDFOperatorNames;var PDFFlateStream=function(cs){__extends(is,cs);function is(us,hs){var lo=cs.call(this,us)||this;return lo.computeContents=function(){var co=lo.getUnencodedContents();return lo.encode?pako$1.deflate(co):co},lo.encode=hs,hs&&us.set(PDFName.of("Filter"),PDFName.of("FlateDecode")),lo.contentsCache=Cache.populatedBy(lo.computeContents),lo}return is.prototype.getContents=function(){return this.contentsCache.access()},is.prototype.getContentsSize=function(){return this.contentsCache.access().length},is.prototype.getUnencodedContents=function(){throw new MethodNotImplementedError(this.constructor.name,"getUnencodedContents")},is}(PDFStream),PDFContentStream=function(cs){__extends(is,cs);function is(us,hs,lo){lo===void 0&&(lo=!0);var co=cs.call(this,us,lo)||this;return co.operators=hs,co}return is.prototype.push=function(){for(var us,hs=[],lo=0;lo<arguments.length;lo++)hs[lo]=arguments[lo];(us=this.operators).push.apply(us,hs)},is.prototype.clone=function(us){for(var hs=new Array(this.operators.length),lo=0,co=this.operators.length;lo<co;lo++)hs[lo]=this.operators[lo].clone(us);var uo=this,ga=uo.dict,ba=uo.encode;return is.of(ga.clone(us),hs,ba)},is.prototype.getContentsString=function(){for(var us="",hs=0,lo=this.operators.length;hs<lo;hs++)us+=this.operators[hs]+`
`;return us},is.prototype.getUnencodedContents=function(){for(var us=new Uint8Array(this.getUnencodedContentsSize()),hs=0,lo=0,co=this.operators.length;lo<co;lo++)hs+=this.operators[lo].copyBytesInto(us,hs),us[hs++]=CharCodes$1.Newline;return us},is.prototype.getUnencodedContentsSize=function(){for(var us=0,hs=0,lo=this.operators.length;hs<lo;hs++)us+=this.operators[hs].sizeInBytes()+1;return us},is.of=function(us,hs,lo){return lo===void 0&&(lo=!0),new is(us,hs,lo)},is}(PDFFlateStream),SimpleRNG=function(){function cs(is){this.seed=is}return cs.prototype.nextInt=function(){var is=Math.sin(this.seed++)*1e4;return is-Math.floor(is)},cs.withSeed=function(is){return new cs(is)},cs}(),byAscendingObjectNumber=function(cs,is){var us=cs[0],hs=is[0];return us.objectNumber-hs.objectNumber},PDFContext=function(){function cs(){this.largestObjectNumber=0,this.header=PDFHeader.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=SimpleRNG.withSeed(1)}return cs.prototype.assign=function(is,us){this.indirectObjects.set(is,us),is.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=is.objectNumber)},cs.prototype.nextRef=function(){return this.largestObjectNumber+=1,PDFRef.of(this.largestObjectNumber)},cs.prototype.register=function(is){var us=this.nextRef();return this.assign(us,is),us},cs.prototype.delete=function(is){return this.indirectObjects.delete(is)},cs.prototype.lookupMaybe=function(is){for(var us=[],hs=1;hs<arguments.length;hs++)us[hs-1]=arguments[hs];var lo=us.includes(PDFNull$1),co=is instanceof PDFRef?this.indirectObjects.get(is):is;if(!(!co||co===PDFNull$1&&!lo)){for(var uo=0,ga=us.length;uo<ga;uo++){var ba=us[uo];if(ba===PDFNull$1){if(co===PDFNull$1)return co}else if(co instanceof ba)return co}throw new UnexpectedObjectTypeError(us,co)}},cs.prototype.lookup=function(is){for(var us=[],hs=1;hs<arguments.length;hs++)us[hs-1]=arguments[hs];var lo=is instanceof PDFRef?this.indirectObjects.get(is):is;if(us.length===0)return lo;for(var co=0,uo=us.length;co<uo;co++){var ga=us[co];if(ga===PDFNull$1){if(lo===PDFNull$1)return lo}else if(lo instanceof ga)return lo}throw new UnexpectedObjectTypeError(us,lo)},cs.prototype.getObjectRef=function(is){for(var us=Array.from(this.indirectObjects.entries()),hs=0,lo=us.length;hs<lo;hs++){var co=us[hs],uo=co[0],ga=co[1];if(ga===is)return uo}},cs.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(byAscendingObjectNumber)},cs.prototype.obj=function(is){if(is instanceof PDFObject)return is;if(is==null)return PDFNull$1;if(typeof is=="string")return PDFName.of(is);if(typeof is=="number")return PDFNumber.of(is);if(typeof is=="boolean")return is?PDFBool.True:PDFBool.False;if(Array.isArray(is)){for(var us=PDFArray.withContext(this),hs=0,lo=is.length;hs<lo;hs++)us.push(this.obj(is[hs]));return us}else{for(var co=PDFDict.withContext(this),uo=Object.keys(is),hs=0,lo=uo.length;hs<lo;hs++){var ga=uo[hs],ba=is[ga];ba!==void 0&&co.set(PDFName.of(ga),this.obj(ba))}return co}},cs.prototype.stream=function(is,us){return us===void 0&&(us={}),PDFRawStream.of(this.obj(us),typedArrayFor(is))},cs.prototype.flateStream=function(is,us){return us===void 0&&(us={}),this.stream(pako$1.deflate(typedArrayFor(is)),__assign(__assign({},us),{Filter:"FlateDecode"}))},cs.prototype.contentStream=function(is,us){return us===void 0&&(us={}),PDFContentStream.of(this.obj(us),is)},cs.prototype.formXObject=function(is,us){return us===void 0&&(us={}),this.contentStream(is,__assign(__assign({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},us),{Type:"XObject",Subtype:"Form"}))},cs.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var is=this.obj({}),us=PDFOperator.of(Ops.PushGraphicsState),hs=PDFContentStream.of(is,[us]);return this.pushGraphicsStateContentStreamRef=this.register(hs),this.pushGraphicsStateContentStreamRef},cs.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var is=this.obj({}),us=PDFOperator.of(Ops.PopGraphicsState),hs=PDFContentStream.of(is,[us]);return this.popGraphicsStateContentStreamRef=this.register(hs),this.popGraphicsStateContentStreamRef},cs.prototype.addRandomSuffix=function(is,us){return us===void 0&&(us=4),is+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,us))},cs.create=function(){return new cs},cs}(),PDFPageLeaf=function(cs){__extends(is,cs);function is(us,hs,lo){lo===void 0&&(lo=!0);var co=cs.call(this,us,hs)||this;return co.normalized=!1,co.autoNormalizeCTM=lo,co}return is.prototype.clone=function(us){for(var hs=is.fromMapWithContext(new Map,us||this.context,this.autoNormalizeCTM),lo=this.entries(),co=0,uo=lo.length;co<uo;co++){var ga=lo[co],ba=ga[0],xa=ga[1];hs.set(ba,xa)}return hs},is.prototype.Parent=function(){return this.lookupMaybe(PDFName.Parent,PDFDict)},is.prototype.Contents=function(){return this.lookup(PDFName.of("Contents"))},is.prototype.Annots=function(){return this.lookupMaybe(PDFName.Annots,PDFArray)},is.prototype.BleedBox=function(){return this.lookupMaybe(PDFName.BleedBox,PDFArray)},is.prototype.TrimBox=function(){return this.lookupMaybe(PDFName.TrimBox,PDFArray)},is.prototype.ArtBox=function(){return this.lookupMaybe(PDFName.ArtBox,PDFArray)},is.prototype.Resources=function(){var us=this.getInheritableAttribute(PDFName.Resources);return this.context.lookupMaybe(us,PDFDict)},is.prototype.MediaBox=function(){var us=this.getInheritableAttribute(PDFName.MediaBox);return this.context.lookup(us,PDFArray)},is.prototype.CropBox=function(){var us=this.getInheritableAttribute(PDFName.CropBox);return this.context.lookupMaybe(us,PDFArray)},is.prototype.Rotate=function(){var us=this.getInheritableAttribute(PDFName.Rotate);return this.context.lookupMaybe(us,PDFNumber)},is.prototype.getInheritableAttribute=function(us){var hs;return this.ascend(function(lo){hs||(hs=lo.get(us))}),hs},is.prototype.setParent=function(us){this.set(PDFName.Parent,us)},is.prototype.addContentStream=function(us){var hs=this.normalizedEntries().Contents||this.context.obj([]);this.set(PDFName.Contents,hs),hs.push(us)},is.prototype.wrapContentStreams=function(us,hs){var lo=this.Contents();return lo instanceof PDFArray?(lo.insert(0,us),lo.push(hs),!0):!1},is.prototype.addAnnot=function(us){var hs=this.normalizedEntries().Annots;hs.push(us)},is.prototype.removeAnnot=function(us){var hs=this.normalizedEntries().Annots,lo=hs.indexOf(us);lo!==void 0&&hs.remove(lo)},is.prototype.setFontDictionary=function(us,hs){var lo=this.normalizedEntries().Font;lo.set(us,hs)},is.prototype.newFontDictionaryKey=function(us){var hs=this.normalizedEntries().Font;return hs.uniqueKey(us)},is.prototype.newFontDictionary=function(us,hs){var lo=this.newFontDictionaryKey(us);return this.setFontDictionary(lo,hs),lo},is.prototype.setXObject=function(us,hs){var lo=this.normalizedEntries().XObject;lo.set(us,hs)},is.prototype.newXObjectKey=function(us){var hs=this.normalizedEntries().XObject;return hs.uniqueKey(us)},is.prototype.newXObject=function(us,hs){var lo=this.newXObjectKey(us);return this.setXObject(lo,hs),lo},is.prototype.setExtGState=function(us,hs){var lo=this.normalizedEntries().ExtGState;lo.set(us,hs)},is.prototype.newExtGStateKey=function(us){var hs=this.normalizedEntries().ExtGState;return hs.uniqueKey(us)},is.prototype.newExtGState=function(us,hs){var lo=this.newExtGStateKey(us);return this.setExtGState(lo,hs),lo},is.prototype.ascend=function(us){us(this);var hs=this.Parent();hs&&hs.ascend(us)},is.prototype.normalize=function(){if(!this.normalized){var us=this.context,hs=this.get(PDFName.Contents),lo=this.context.lookup(hs);lo instanceof PDFStream&&this.set(PDFName.Contents,us.obj([hs])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var co=this.getInheritableAttribute(PDFName.Resources),uo=us.lookupMaybe(co,PDFDict)||us.obj({});this.set(PDFName.Resources,uo);var ga=uo.lookupMaybe(PDFName.Font,PDFDict)||us.obj({});uo.set(PDFName.Font,ga);var ba=uo.lookupMaybe(PDFName.XObject,PDFDict)||us.obj({});uo.set(PDFName.XObject,ba);var xa=uo.lookupMaybe(PDFName.ExtGState,PDFDict)||us.obj({});uo.set(PDFName.ExtGState,xa);var _a=this.Annots()||us.obj([]);this.set(PDFName.Annots,_a),this.normalized=!0}},is.prototype.normalizedEntries=function(){this.normalize();var us=this.Annots(),hs=this.Resources(),lo=this.Contents();return{Annots:us,Resources:hs,Contents:lo,Font:hs.lookup(PDFName.Font,PDFDict),XObject:hs.lookup(PDFName.XObject,PDFDict),ExtGState:hs.lookup(PDFName.ExtGState,PDFDict)}},is.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],is.withContextAndParent=function(us,hs){var lo=new Map;return lo.set(PDFName.Type,PDFName.Page),lo.set(PDFName.Parent,hs),lo.set(PDFName.Resources,us.obj({})),lo.set(PDFName.MediaBox,us.obj([0,0,612,792])),new is(lo,us,!1)},is.fromMapWithContext=function(us,hs,lo){return lo===void 0&&(lo=!0),new is(us,hs,lo)},is}(PDFDict),PDFObjectCopier=function(){function cs(is,us){var hs=this;this.traversedObjects=new Map,this.copy=function(lo){return lo instanceof PDFPageLeaf?hs.copyPDFPage(lo):lo instanceof PDFDict?hs.copyPDFDict(lo):lo instanceof PDFArray?hs.copyPDFArray(lo):lo instanceof PDFStream?hs.copyPDFStream(lo):lo instanceof PDFRef?hs.copyPDFIndirectObject(lo):lo.clone()},this.copyPDFPage=function(lo){for(var co=lo.clone(),uo=PDFPageLeaf.InheritableEntries,ga=0,ba=uo.length;ga<ba;ga++){var xa=PDFName.of(uo[ga]),_a=co.getInheritableAttribute(xa);!co.get(xa)&&_a&&co.set(xa,_a)}return co.delete(PDFName.of("Parent")),hs.copyPDFDict(co)},this.copyPDFDict=function(lo){if(hs.traversedObjects.has(lo))return hs.traversedObjects.get(lo);var co=lo.clone(hs.dest);hs.traversedObjects.set(lo,co);for(var uo=lo.entries(),ga=0,ba=uo.length;ga<ba;ga++){var xa=uo[ga],_a=xa[0],$a=xa[1];co.set(_a,hs.copy($a))}return co},this.copyPDFArray=function(lo){if(hs.traversedObjects.has(lo))return hs.traversedObjects.get(lo);var co=lo.clone(hs.dest);hs.traversedObjects.set(lo,co);for(var uo=0,ga=lo.size();uo<ga;uo++){var ba=lo.get(uo);co.set(uo,hs.copy(ba))}return co},this.copyPDFStream=function(lo){if(hs.traversedObjects.has(lo))return hs.traversedObjects.get(lo);var co=lo.clone(hs.dest);hs.traversedObjects.set(lo,co);for(var uo=lo.dict.entries(),ga=0,ba=uo.length;ga<ba;ga++){var xa=uo[ga],_a=xa[0],$a=xa[1];co.dict.set(_a,hs.copy($a))}return co},this.copyPDFIndirectObject=function(lo){var co=hs.traversedObjects.has(lo);if(!co){var uo=hs.dest.nextRef();hs.traversedObjects.set(lo,uo);var ga=hs.src.lookup(lo);if(ga){var ba=hs.copy(ga);hs.dest.assign(uo,ba)}}return hs.traversedObjects.get(lo)},this.src=is,this.dest=us}return cs.for=function(is,us){return new cs(is,us)},cs}(),PDFCrossRefSection=function(){function cs(is){this.subsections=is?[[is]]:[],this.chunkIdx=0,this.chunkLength=is?1:0}return cs.prototype.addEntry=function(is,us){this.append({ref:is,offset:us,deleted:!1})},cs.prototype.addDeletedEntry=function(is,us){this.append({ref:is,offset:us,deleted:!0})},cs.prototype.toString=function(){for(var is=`xref
`,us=0,hs=this.subsections.length;us<hs;us++){var lo=this.subsections[us];is+=lo[0].ref.objectNumber+" "+lo.length+`
`;for(var co=0,uo=lo.length;co<uo;co++){var ga=lo[co];is+=padStart$1(String(ga.offset),10,"0"),is+=" ",is+=padStart$1(String(ga.ref.generationNumber),5,"0"),is+=" ",is+=ga.deleted?"f":"n",is+=` 
`}}return is},cs.prototype.sizeInBytes=function(){for(var is=5,us=0,hs=this.subsections.length;us<hs;us++){var lo=this.subsections[us],co=lo.length,uo=lo[0];is+=2,is+=String(uo.ref.objectNumber).length,is+=String(co).length,is+=20*co}return is},cs.prototype.copyBytesInto=function(is,us){var hs=us;return is[us++]=CharCodes$1.x,is[us++]=CharCodes$1.r,is[us++]=CharCodes$1.e,is[us++]=CharCodes$1.f,is[us++]=CharCodes$1.Newline,us+=this.copySubsectionsIntoBuffer(this.subsections,is,us),us-hs},cs.prototype.copySubsectionsIntoBuffer=function(is,us,hs){for(var lo=hs,co=is.length,uo=0;uo<co;uo++){var ga=this.subsections[uo],ba=String(ga[0].ref.objectNumber);hs+=copyStringIntoBuffer(ba,us,hs),us[hs++]=CharCodes$1.Space;var xa=String(ga.length);hs+=copyStringIntoBuffer(xa,us,hs),us[hs++]=CharCodes$1.Newline,hs+=this.copyEntriesIntoBuffer(ga,us,hs)}return hs-lo},cs.prototype.copyEntriesIntoBuffer=function(is,us,hs){for(var lo=is.length,co=0;co<lo;co++){var uo=is[co],ga=padStart$1(String(uo.offset),10,"0");hs+=copyStringIntoBuffer(ga,us,hs),us[hs++]=CharCodes$1.Space;var ba=padStart$1(String(uo.ref.generationNumber),5,"0");hs+=copyStringIntoBuffer(ba,us,hs),us[hs++]=CharCodes$1.Space,us[hs++]=uo.deleted?CharCodes$1.f:CharCodes$1.n,us[hs++]=CharCodes$1.Space,us[hs++]=CharCodes$1.Newline}return 20*lo},cs.prototype.append=function(is){if(this.chunkLength===0){this.subsections.push([is]),this.chunkIdx=0,this.chunkLength=1;return}var us=this.subsections[this.chunkIdx],hs=us[this.chunkLength-1];is.ref.objectNumber-hs.ref.objectNumber>1?(this.subsections.push([is]),this.chunkIdx+=1,this.chunkLength=1):(us.push(is),this.chunkLength+=1)},cs.create=function(){return new cs({ref:PDFRef.of(0,65535),offset:0,deleted:!0})},cs.createEmpty=function(){return new cs},cs}(),PDFTrailer=function(){function cs(is){this.lastXRefOffset=String(is)}return cs.prototype.toString=function(){return`startxref
`+this.lastXRefOffset+`
%%EOF`},cs.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},cs.prototype.copyBytesInto=function(is,us){var hs=us;return is[us++]=CharCodes$1.s,is[us++]=CharCodes$1.t,is[us++]=CharCodes$1.a,is[us++]=CharCodes$1.r,is[us++]=CharCodes$1.t,is[us++]=CharCodes$1.x,is[us++]=CharCodes$1.r,is[us++]=CharCodes$1.e,is[us++]=CharCodes$1.f,is[us++]=CharCodes$1.Newline,us+=copyStringIntoBuffer(this.lastXRefOffset,is,us),is[us++]=CharCodes$1.Newline,is[us++]=CharCodes$1.Percent,is[us++]=CharCodes$1.Percent,is[us++]=CharCodes$1.E,is[us++]=CharCodes$1.O,is[us++]=CharCodes$1.F,us-hs},cs.forLastCrossRefSectionOffset=function(is){return new cs(is)},cs}(),PDFTrailerDict=function(){function cs(is){this.dict=is}return cs.prototype.toString=function(){return`trailer
`+this.dict.toString()},cs.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},cs.prototype.copyBytesInto=function(is,us){var hs=us;return is[us++]=CharCodes$1.t,is[us++]=CharCodes$1.r,is[us++]=CharCodes$1.a,is[us++]=CharCodes$1.i,is[us++]=CharCodes$1.l,is[us++]=CharCodes$1.e,is[us++]=CharCodes$1.r,is[us++]=CharCodes$1.Newline,us+=this.dict.copyBytesInto(is,us),us-hs},cs.of=function(is){return new cs(is)},cs}(),PDFObjectStream=function(cs){__extends(is,cs);function is(us,hs,lo){lo===void 0&&(lo=!0);var co=cs.call(this,us.obj({}),lo)||this;return co.objects=hs,co.offsets=co.computeObjectOffsets(),co.offsetsString=co.computeOffsetsString(),co.dict.set(PDFName.of("Type"),PDFName.of("ObjStm")),co.dict.set(PDFName.of("N"),PDFNumber.of(co.objects.length)),co.dict.set(PDFName.of("First"),PDFNumber.of(co.offsetsString.length)),co}return is.prototype.getObjectsCount=function(){return this.objects.length},is.prototype.clone=function(us){return is.withContextAndObjects(us||this.dict.context,this.objects.slice(),this.encode)},is.prototype.getContentsString=function(){for(var us=this.offsetsString,hs=0,lo=this.objects.length;hs<lo;hs++){var co=this.objects[hs],uo=co[1];us+=uo+`
`}return us},is.prototype.getUnencodedContents=function(){for(var us=new Uint8Array(this.getUnencodedContentsSize()),hs=copyStringIntoBuffer(this.offsetsString,us,0),lo=0,co=this.objects.length;lo<co;lo++){var uo=this.objects[lo],ga=uo[1];hs+=ga.copyBytesInto(us,hs),us[hs++]=CharCodes$1.Newline}return us},is.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+last(this.offsets)[1]+last(this.objects)[1].sizeInBytes()+1},is.prototype.computeOffsetsString=function(){for(var us="",hs=0,lo=this.offsets.length;hs<lo;hs++){var co=this.offsets[hs],uo=co[0],ga=co[1];us+=uo+" "+ga+" "}return us},is.prototype.computeObjectOffsets=function(){for(var us=0,hs=new Array(this.objects.length),lo=0,co=this.objects.length;lo<co;lo++){var uo=this.objects[lo],ga=uo[0],ba=uo[1];hs[lo]=[ga.objectNumber,us],us+=ba.sizeInBytes()+1}return hs},is.withContextAndObjects=function(us,hs,lo){return lo===void 0&&(lo=!0),new is(us,hs,lo)},is}(PDFFlateStream),PDFWriter=function(){function cs(is,us){var hs=this;this.parsedObjects=0,this.shouldWaitForTick=function(lo){return hs.parsedObjects+=lo,hs.parsedObjects%hs.objectsPerTick===0},this.context=is,this.objectsPerTick=us}return cs.prototype.serializeToBuffer=function(){return __awaiter(this,void 0,void 0,function(){var is,us,hs,lo,co,uo,ga,ba,xa,_a,$a,xl,yl,wl,_l,El,Sl;return __generator(this,function(Cl){switch(Cl.label){case 0:return[4,this.computeBufferSize()];case 1:is=Cl.sent(),us=is.size,hs=is.header,lo=is.indirectObjects,co=is.xref,uo=is.trailerDict,ga=is.trailer,ba=0,xa=new Uint8Array(us),ba+=hs.copyBytesInto(xa,ba),xa[ba++]=CharCodes$1.Newline,xa[ba++]=CharCodes$1.Newline,_a=0,$a=lo.length,Cl.label=2;case 2:return _a<$a?(xl=lo[_a],yl=xl[0],wl=xl[1],_l=String(yl.objectNumber),ba+=copyStringIntoBuffer(_l,xa,ba),xa[ba++]=CharCodes$1.Space,El=String(yl.generationNumber),ba+=copyStringIntoBuffer(El,xa,ba),xa[ba++]=CharCodes$1.Space,xa[ba++]=CharCodes$1.o,xa[ba++]=CharCodes$1.b,xa[ba++]=CharCodes$1.j,xa[ba++]=CharCodes$1.Newline,ba+=wl.copyBytesInto(xa,ba),xa[ba++]=CharCodes$1.Newline,xa[ba++]=CharCodes$1.e,xa[ba++]=CharCodes$1.n,xa[ba++]=CharCodes$1.d,xa[ba++]=CharCodes$1.o,xa[ba++]=CharCodes$1.b,xa[ba++]=CharCodes$1.j,xa[ba++]=CharCodes$1.Newline,xa[ba++]=CharCodes$1.Newline,Sl=wl instanceof PDFObjectStream?wl.getObjectsCount():1,this.shouldWaitForTick(Sl)?[4,waitForTick()]:[3,4]):[3,5];case 3:Cl.sent(),Cl.label=4;case 4:return _a++,[3,2];case 5:return co&&(ba+=co.copyBytesInto(xa,ba),xa[ba++]=CharCodes$1.Newline),uo&&(ba+=uo.copyBytesInto(xa,ba),xa[ba++]=CharCodes$1.Newline,xa[ba++]=CharCodes$1.Newline),ba+=ga.copyBytesInto(xa,ba),[2,xa]}})})},cs.prototype.computeIndirectObjectSize=function(is){var us=is[0],hs=is[1],lo=us.sizeInBytes()+3,co=hs.sizeInBytes()+9;return lo+co},cs.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},cs.prototype.computeBufferSize=function(){return __awaiter(this,void 0,void 0,function(){var is,us,hs,lo,co,uo,ga,ba,xa,_a,$a;return __generator(this,function(xl){switch(xl.label){case 0:is=PDFHeader.forVersion(1,7),us=is.sizeInBytes()+2,hs=PDFCrossRefSection.create(),lo=this.context.enumerateIndirectObjects(),co=0,uo=lo.length,xl.label=1;case 1:return co<uo?(ga=lo[co],ba=ga[0],hs.addEntry(ba,us),us+=this.computeIndirectObjectSize(ga),this.shouldWaitForTick(1)?[4,waitForTick()]:[3,3]):[3,4];case 2:xl.sent(),xl.label=3;case 3:return co++,[3,1];case 4:return xa=us,us+=hs.sizeInBytes()+1,_a=PDFTrailerDict.of(this.createTrailerDict()),us+=_a.sizeInBytes()+2,$a=PDFTrailer.forLastCrossRefSectionOffset(xa),us+=$a.sizeInBytes(),[2,{size:us,header:is,indirectObjects:lo,xref:hs,trailerDict:_a,trailer:$a}]}})})},cs.forContext=function(is,us){return new cs(is,us)},cs}(),PDFInvalidObject=function(cs){__extends(is,cs);function is(us){var hs=cs.call(this)||this;return hs.data=us,hs}return is.prototype.clone=function(){return is.of(this.data.slice())},is.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},is.prototype.sizeInBytes=function(){return this.data.length},is.prototype.copyBytesInto=function(us,hs){for(var lo=this.data.length,co=0;co<lo;co++)us[hs++]=this.data[co];return lo},is.of=function(us){return new is(us)},is}(PDFObject),EntryType;(function(cs){cs[cs.Deleted=0]="Deleted",cs[cs.Uncompressed=1]="Uncompressed",cs[cs.Compressed=2]="Compressed"})(EntryType||(EntryType={}));var PDFCrossRefStream=function(cs){__extends(is,cs);function is(us,hs,lo){lo===void 0&&(lo=!0);var co=cs.call(this,us,lo)||this;return co.computeIndex=function(){for(var uo=[],ga=0,ba=0,xa=co.entries.length;ba<xa;ba++){var _a=co.entries[ba],$a=co.entries[ba-1];ba===0?uo.push(_a.ref.objectNumber):_a.ref.objectNumber-$a.ref.objectNumber>1&&(uo.push(ga),uo.push(_a.ref.objectNumber),ga=0),ga+=1}return uo.push(ga),uo},co.computeEntryTuples=function(){for(var uo=new Array(co.entries.length),ga=0,ba=co.entries.length;ga<ba;ga++){var xa=co.entries[ga];if(xa.type===EntryType.Deleted){var _a=xa.type,$a=xa.nextFreeObjectNumber,xl=xa.ref;uo[ga]=[_a,$a,xl.generationNumber]}if(xa.type===EntryType.Uncompressed){var _a=xa.type,yl=xa.offset,xl=xa.ref;uo[ga]=[_a,yl,xl.generationNumber]}if(xa.type===EntryType.Compressed){var _a=xa.type,wl=xa.objectStreamRef,_l=xa.index;uo[ga]=[_a,wl.objectNumber,_l]}}return uo},co.computeMaxEntryByteWidths=function(){for(var uo=co.entryTuplesCache.access(),ga=[0,0,0],ba=0,xa=uo.length;ba<xa;ba++){var _a=uo[ba],$a=_a[0],xl=_a[1],yl=_a[2],wl=sizeInBytes($a),_l=sizeInBytes(xl),El=sizeInBytes(yl);wl>ga[0]&&(ga[0]=wl),_l>ga[1]&&(ga[1]=_l),El>ga[2]&&(ga[2]=El)}return ga},co.entries=hs||[],co.entryTuplesCache=Cache.populatedBy(co.computeEntryTuples),co.maxByteWidthsCache=Cache.populatedBy(co.computeMaxEntryByteWidths),co.indexCache=Cache.populatedBy(co.computeIndex),us.set(PDFName.of("Type"),PDFName.of("XRef")),co}return is.prototype.addDeletedEntry=function(us,hs){var lo=EntryType.Deleted;this.entries.push({type:lo,ref:us,nextFreeObjectNumber:hs}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},is.prototype.addUncompressedEntry=function(us,hs){var lo=EntryType.Uncompressed;this.entries.push({type:lo,ref:us,offset:hs}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},is.prototype.addCompressedEntry=function(us,hs,lo){var co=EntryType.Compressed;this.entries.push({type:co,ref:us,objectStreamRef:hs,index:lo}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},is.prototype.clone=function(us){var hs=this,lo=hs.dict,co=hs.entries,uo=hs.encode;return is.of(lo.clone(us),co.slice(),uo)},is.prototype.getContentsString=function(){for(var us=this.entryTuplesCache.access(),hs=this.maxByteWidthsCache.access(),lo="",co=0,uo=us.length;co<uo;co++){for(var ga=us[co],ba=ga[0],xa=ga[1],_a=ga[2],$a=reverseArray(bytesFor(ba)),xl=reverseArray(bytesFor(xa)),yl=reverseArray(bytesFor(_a)),wl=hs[0]-1;wl>=0;wl--)lo+=($a[wl]||0).toString(2);for(var wl=hs[1]-1;wl>=0;wl--)lo+=(xl[wl]||0).toString(2);for(var wl=hs[2]-1;wl>=0;wl--)lo+=(yl[wl]||0).toString(2)}return lo},is.prototype.getUnencodedContents=function(){for(var us=this.entryTuplesCache.access(),hs=this.maxByteWidthsCache.access(),lo=new Uint8Array(this.getUnencodedContentsSize()),co=0,uo=0,ga=us.length;uo<ga;uo++){for(var ba=us[uo],xa=ba[0],_a=ba[1],$a=ba[2],xl=reverseArray(bytesFor(xa)),yl=reverseArray(bytesFor(_a)),wl=reverseArray(bytesFor($a)),_l=hs[0]-1;_l>=0;_l--)lo[co++]=xl[_l]||0;for(var _l=hs[1]-1;_l>=0;_l--)lo[co++]=yl[_l]||0;for(var _l=hs[2]-1;_l>=0;_l--)lo[co++]=wl[_l]||0}return lo},is.prototype.getUnencodedContentsSize=function(){var us=this.maxByteWidthsCache.access(),hs=sum(us);return hs*this.entries.length},is.prototype.updateDict=function(){cs.prototype.updateDict.call(this);var us=this.maxByteWidthsCache.access(),hs=this.indexCache.access(),lo=this.dict.context;this.dict.set(PDFName.of("W"),lo.obj(us)),this.dict.set(PDFName.of("Index"),lo.obj(hs))},is.create=function(us,hs){hs===void 0&&(hs=!0);var lo=new is(us,[],hs);return lo.addDeletedEntry(PDFRef.of(0,65535),0),lo},is.of=function(us,hs,lo){return lo===void 0&&(lo=!0),new is(us,hs,lo)},is}(PDFFlateStream),PDFStreamWriter=function(cs){__extends(is,cs);function is(us,hs,lo,co){var uo=cs.call(this,us,hs)||this;return uo.encodeStreams=lo,uo.objectsPerStream=co,uo}return is.prototype.computeBufferSize=function(){return __awaiter(this,void 0,void 0,function(){var us,hs,lo,co,uo,ga,ba,xa,wl,_l,_a,Sl,$a,xl,El,yl,wl,_l,El,Sl,Cl,Tl,Dl,Fl;return __generator(this,function(Pl){switch(Pl.label){case 0:us=this.context.largestObjectNumber+1,hs=PDFHeader.forVersion(1,7),lo=hs.sizeInBytes()+2,co=PDFCrossRefStream.create(this.createTrailerDict(),this.encodeStreams),uo=[],ga=[],ba=[],xa=this.context.enumerateIndirectObjects(),wl=0,_l=xa.length,Pl.label=1;case 1:return wl<_l?(_a=xa[wl],Sl=_a[0],$a=_a[1],xl=Sl===this.context.trailerInfo.Encrypt||$a instanceof PDFStream||$a instanceof PDFInvalidObject||Sl.generationNumber!==0,xl?(uo.push(_a),co.addUncompressedEntry(Sl,lo),lo+=this.computeIndirectObjectSize(_a),this.shouldWaitForTick(1)?[4,waitForTick()]:[3,3]):[3,4]):[3,6];case 2:Pl.sent(),Pl.label=3;case 3:return[3,5];case 4:El=last(ga),yl=last(ba),(!El||El.length%this.objectsPerStream===0)&&(El=[],ga.push(El),yl=PDFRef.of(us++),ba.push(yl)),co.addCompressedEntry(Sl,yl,El.length),El.push(_a),Pl.label=5;case 5:return wl++,[3,1];case 6:wl=0,_l=ga.length,Pl.label=7;case 7:return wl<_l?(El=ga[wl],Sl=ba[wl],Cl=PDFObjectStream.withContextAndObjects(this.context,El,this.encodeStreams),co.addUncompressedEntry(Sl,lo),lo+=this.computeIndirectObjectSize([Sl,Cl]),uo.push([Sl,Cl]),this.shouldWaitForTick(El.length)?[4,waitForTick()]:[3,9]):[3,10];case 8:Pl.sent(),Pl.label=9;case 9:return wl++,[3,7];case 10:return Tl=PDFRef.of(us++),co.dict.set(PDFName.of("Size"),PDFNumber.of(us)),co.addUncompressedEntry(Tl,lo),Dl=lo,lo+=this.computeIndirectObjectSize([Tl,co]),uo.push([Tl,co]),Fl=PDFTrailer.forLastCrossRefSectionOffset(Dl),lo+=Fl.sizeInBytes(),[2,{size:lo,header:hs,indirectObjects:uo,trailer:Fl}]}})})},is.forContext=function(us,hs,lo,co){return lo===void 0&&(lo=!0),co===void 0&&(co=50),new is(us,hs,lo,co)},is}(PDFWriter),PDFHexString=function(cs){__extends(is,cs);function is(us){var hs=cs.call(this)||this;return hs.value=us,hs}return is.prototype.asBytes=function(){for(var us=this.value+(this.value.length%2===1?"0":""),hs=us.length,lo=new Uint8Array(us.length/2),co=0,uo=0;co<hs;){var ga=parseInt(us.substring(co,co+2),16);lo[uo]=ga,co+=2,uo+=1}return lo},is.prototype.decodeText=function(){var us=this.asBytes();return hasUtf16BOM(us)?utf16Decode(us):pdfDocEncodingDecode(us)},is.prototype.decodeDate=function(){var us=this.decodeText(),hs=parseDate$1(us);if(!hs)throw new InvalidPDFDateStringError(us);return hs},is.prototype.asString=function(){return this.value},is.prototype.clone=function(){return is.of(this.value)},is.prototype.toString=function(){return"<"+this.value+">"},is.prototype.sizeInBytes=function(){return this.value.length+2},is.prototype.copyBytesInto=function(us,hs){return us[hs++]=CharCodes$1.LessThan,hs+=copyStringIntoBuffer(this.value,us,hs),us[hs++]=CharCodes$1.GreaterThan,this.value.length+2},is.of=function(us){return new is(us)},is.fromText=function(us){for(var hs=utf16Encode(us),lo="",co=0,uo=hs.length;co<uo;co++)lo+=toHexStringOfMinLength(hs[co],4);return new is(lo)},is}(PDFObject),StandardFontEmbedder=function(){function cs(is,us){this.encoding=is===FontNames.ZapfDingbats?Encodings.ZapfDingbats:is===FontNames.Symbol?Encodings.Symbol:Encodings.WinAnsi,this.font=Font.load(is),this.fontName=this.font.FontName,this.customName=us}return cs.prototype.encodeText=function(is){for(var us=this.encodeTextAsGlyphs(is),hs=new Array(us.length),lo=0,co=us.length;lo<co;lo++)hs[lo]=toHexString(us[lo].code);return PDFHexString.of(hs.join(""))},cs.prototype.widthOfTextAtSize=function(is,us){for(var hs=this.encodeTextAsGlyphs(is),lo=0,co=0,uo=hs.length;co<uo;co++){var ga=hs[co].name,ba=(hs[co+1]||{}).name,xa=this.font.getXAxisKerningForPair(ga,ba)||0;lo+=this.widthOfGlyph(ga)+xa}var _a=us/1e3;return lo*_a},cs.prototype.heightOfFontAtSize=function(is,us){us===void 0&&(us={});var hs=us.descender,lo=hs===void 0?!0:hs,co=this.font,uo=co.Ascender,ga=co.Descender,ba=co.FontBBox,xa=uo||ba[3],_a=ga||ba[1],$a=xa-_a;return lo||($a+=ga||0),$a/1e3*is},cs.prototype.sizeOfFontAtHeight=function(is){var us=this.font,hs=us.Ascender,lo=us.Descender,co=us.FontBBox,uo=hs||co[3],ga=lo||co[1];return 1e3*is/(uo-ga)},cs.prototype.embedIntoContext=function(is,us){var hs=is.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===Encodings.WinAnsi?"WinAnsiEncoding":void 0});return us?(is.assign(us,hs),us):is.register(hs)},cs.prototype.widthOfGlyph=function(is){return this.font.getWidthOfGlyph(is)||250},cs.prototype.encodeTextAsGlyphs=function(is){for(var us=Array.from(is),hs=new Array(us.length),lo=0,co=us.length;lo<co;lo++){var uo=toCodePoint(us[lo]);hs[lo]=this.encoding.encodeUnicodeCodePoint(uo)}return hs},cs.for=function(is,us){return new cs(is,us)},cs}(),createCmap=function(cs,is){for(var us=new Array(cs.length),hs=0,lo=cs.length;hs<lo;hs++){var co=cs[hs],uo=cmapHexFormat(cmapHexString(is(co))),ga=cmapHexFormat.apply(void 0,co.codePoints.map(cmapCodePointFormat));us[hs]=[uo,ga]}return fillCmapTemplate(us)},fillCmapTemplate=function(cs){return`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange
`+cs.length+` beginbfchar
`+cs.map(function(is){var us=is[0],hs=is[1];return us+" "+hs}).join(`
`)+`
endbfchar
endcmap
CMapName currentdict /CMap defineresource pop
end
end`},cmapHexFormat=function(){for(var cs=[],is=0;is<arguments.length;is++)cs[is]=arguments[is];return"<"+cs.join("")+">"},cmapHexString=function(cs){return toHexStringOfMinLength(cs,4)},cmapCodePointFormat=function(cs){if(isWithinBMP(cs))return cmapHexString(cs);if(hasSurrogates(cs)){var is=highSurrogate(cs),us=lowSurrogate(cs);return""+cmapHexString(is)+cmapHexString(us)}var hs=toHexString(cs),lo="0x"+hs+" is not a valid UTF-8 or UTF-16 codepoint.";throw new Error(lo)},makeFontFlags=function(cs){var is=0,us=function(hs){is|=1<<hs-1};return cs.fixedPitch&&us(1),cs.serif&&us(2),us(3),cs.script&&us(4),cs.nonsymbolic&&us(6),cs.italic&&us(7),cs.allCap&&us(17),cs.smallCap&&us(18),cs.forceBold&&us(19),is},deriveFontFlags=function(cs){var is=cs["OS/2"]?cs["OS/2"].sFamilyClass:0,us=makeFontFlags({fixedPitch:cs.post.isFixedPitch,serif:1<=is&&is<=7,script:is===10,italic:cs.head.macStyle.italic});return us},PDFString=function(cs){__extends(is,cs);function is(us){var hs=cs.call(this)||this;return hs.value=us,hs}return is.prototype.asBytes=function(){for(var us=[],hs="",lo=!1,co=function($a){$a!==void 0&&us.push($a),lo=!1},uo=0,ga=this.value.length;uo<ga;uo++){var ba=this.value[uo],xa=toCharCode(ba),_a=this.value[uo+1];lo?xa===CharCodes$1.Newline||xa===CharCodes$1.CarriageReturn?co():xa===CharCodes$1.n?co(CharCodes$1.Newline):xa===CharCodes$1.r?co(CharCodes$1.CarriageReturn):xa===CharCodes$1.t?co(CharCodes$1.Tab):xa===CharCodes$1.b?co(CharCodes$1.Backspace):xa===CharCodes$1.f?co(CharCodes$1.FormFeed):xa===CharCodes$1.LeftParen?co(CharCodes$1.LeftParen):xa===CharCodes$1.RightParen?co(CharCodes$1.RightParen):xa===CharCodes$1.Backspace?co(CharCodes$1.BackSlash):xa>=CharCodes$1.Zero&&xa<=CharCodes$1.Seven?(hs+=ba,(hs.length===3||!(_a>="0"&&_a<="7"))&&(co(parseInt(hs,8)),hs="")):co(xa):xa===CharCodes$1.BackSlash?lo=!0:co(xa)}return new Uint8Array(us)},is.prototype.decodeText=function(){var us=this.asBytes();return hasUtf16BOM(us)?utf16Decode(us):pdfDocEncodingDecode(us)},is.prototype.decodeDate=function(){var us=this.decodeText(),hs=parseDate$1(us);if(!hs)throw new InvalidPDFDateStringError(us);return hs},is.prototype.asString=function(){return this.value},is.prototype.clone=function(){return is.of(this.value)},is.prototype.toString=function(){return"("+this.value+")"},is.prototype.sizeInBytes=function(){return this.value.length+2},is.prototype.copyBytesInto=function(us,hs){return us[hs++]=CharCodes$1.LeftParen,hs+=copyStringIntoBuffer(this.value,us,hs),us[hs++]=CharCodes$1.RightParen,this.value.length+2},is.of=function(us){return new is(us)},is.fromDate=function(us){var hs=padStart$1(String(us.getUTCFullYear()),4,"0"),lo=padStart$1(String(us.getUTCMonth()+1),2,"0"),co=padStart$1(String(us.getUTCDate()),2,"0"),uo=padStart$1(String(us.getUTCHours()),2,"0"),ga=padStart$1(String(us.getUTCMinutes()),2,"0"),ba=padStart$1(String(us.getUTCSeconds()),2,"0");return new is("D:"+hs+lo+co+uo+ga+ba+"Z")},is}(PDFObject),CustomFontEmbedder=function(){function cs(is,us,hs,lo){var co=this;this.allGlyphsInFontSortedById=function(){for(var uo=new Array(co.font.characterSet.length),ga=0,ba=uo.length;ga<ba;ga++){var xa=co.font.characterSet[ga];uo[ga]=co.font.glyphForCodePoint(xa)}return sortedUniq(uo.sort(byAscendingId),function(_a){return _a.id})},this.font=is,this.scale=1e3/this.font.unitsPerEm,this.fontData=us,this.fontName=this.font.postscriptName||"Font",this.customName=hs,this.fontFeatures=lo,this.baseFontName="",this.glyphCache=Cache.populatedBy(this.allGlyphsInFontSortedById)}return cs.for=function(is,us,hs,lo){return __awaiter(this,void 0,void 0,function(){var co;return __generator(this,function(uo){switch(uo.label){case 0:return[4,is.create(us)];case 1:return co=uo.sent(),[2,new cs(co,us,hs,lo)]}})})},cs.prototype.encodeText=function(is){for(var us=this.font.layout(is,this.fontFeatures).glyphs,hs=new Array(us.length),lo=0,co=us.length;lo<co;lo++)hs[lo]=toHexStringOfMinLength(us[lo].id,4);return PDFHexString.of(hs.join(""))},cs.prototype.widthOfTextAtSize=function(is,us){for(var hs=this.font.layout(is,this.fontFeatures).glyphs,lo=0,co=0,uo=hs.length;co<uo;co++)lo+=hs[co].advanceWidth*this.scale;var ga=us/1e3;return lo*ga},cs.prototype.heightOfFontAtSize=function(is,us){us===void 0&&(us={});var hs=us.descender,lo=hs===void 0?!0:hs,co=this.font,uo=co.ascent,ga=co.descent,ba=co.bbox,xa=(uo||ba.maxY)*this.scale,_a=(ga||ba.minY)*this.scale,$a=xa-_a;return lo||($a-=Math.abs(ga)||0),$a/1e3*is},cs.prototype.sizeOfFontAtHeight=function(is){var us=this.font,hs=us.ascent,lo=us.descent,co=us.bbox,uo=(hs||co.maxY)*this.scale,ga=(lo||co.minY)*this.scale;return 1e3*is/(uo-ga)},cs.prototype.embedIntoContext=function(is,us){return this.baseFontName=this.customName||is.addRandomSuffix(this.fontName),this.embedFontDict(is,us)},cs.prototype.embedFontDict=function(is,us){return __awaiter(this,void 0,void 0,function(){var hs,lo,co;return __generator(this,function(uo){switch(uo.label){case 0:return[4,this.embedCIDFontDict(is)];case 1:return hs=uo.sent(),lo=this.embedUnicodeCmap(is),co=is.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[hs],ToUnicode:lo}),us?(is.assign(us,co),[2,us]):[2,is.register(co)]}})})},cs.prototype.isCFF=function(){return this.font.cff},cs.prototype.embedCIDFontDict=function(is){return __awaiter(this,void 0,void 0,function(){var us,hs;return __generator(this,function(lo){switch(lo.label){case 0:return[4,this.embedFontDescriptor(is)];case 1:return us=lo.sent(),hs=is.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:PDFString.of("Adobe"),Ordering:PDFString.of("Identity"),Supplement:0},FontDescriptor:us,W:this.computeWidths()}),[2,is.register(hs)]}})})},cs.prototype.embedFontDescriptor=function(is){return __awaiter(this,void 0,void 0,function(){var us,hs,lo,co,uo,ga,ba,xa,_a,$a,xl,yl,wl,_l,El;return __generator(this,function(Sl){switch(Sl.label){case 0:return[4,this.embedFontStream(is)];case 1:return us=Sl.sent(),hs=this.scale,lo=this.font,co=lo.italicAngle,uo=lo.ascent,ga=lo.descent,ba=lo.capHeight,xa=lo.xHeight,_a=this.font.bbox,$a=_a.minX,xl=_a.minY,yl=_a.maxX,wl=_a.maxY,_l=is.obj((El={Type:"FontDescriptor",FontName:this.baseFontName,Flags:deriveFontFlags(this.font),FontBBox:[$a*hs,xl*hs,yl*hs,wl*hs],ItalicAngle:co,Ascent:uo*hs,Descent:ga*hs,CapHeight:(ba||uo)*hs,XHeight:(xa||0)*hs,StemV:0},El[this.isCFF()?"FontFile3":"FontFile2"]=us,El)),[2,is.register(_l)]}})})},cs.prototype.serializeFont=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(is){return[2,this.fontData]})})},cs.prototype.embedFontStream=function(is){return __awaiter(this,void 0,void 0,function(){var us,hs,lo;return __generator(this,function(co){switch(co.label){case 0:return lo=(hs=is).flateStream,[4,this.serializeFont()];case 1:return us=lo.apply(hs,[co.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,is.register(us)]}})})},cs.prototype.embedUnicodeCmap=function(is){var us=createCmap(this.glyphCache.access(),this.glyphId.bind(this)),hs=is.flateStream(us);return is.register(hs)},cs.prototype.glyphId=function(is){return is?is.id:-1},cs.prototype.computeWidths=function(){for(var is=this.glyphCache.access(),us=[],hs=[],lo=0,co=is.length;lo<co;lo++){var uo=is[lo],ga=is[lo-1],ba=this.glyphId(uo),xa=this.glyphId(ga);lo===0?us.push(ba):ba-xa!==1&&(us.push(hs),us.push(ba),hs=[]),hs.push(uo.advanceWidth*this.scale)}return us.push(hs),us},cs}(),CustomFontSubsetEmbedder=function(cs){__extends(is,cs);function is(us,hs,lo,co){var uo=cs.call(this,us,hs,lo,co)||this;return uo.subset=uo.font.createSubset(),uo.glyphs=[],uo.glyphCache=Cache.populatedBy(function(){return uo.glyphs}),uo.glyphIdMap=new Map,uo}return is.for=function(us,hs,lo,co){return __awaiter(this,void 0,void 0,function(){var uo;return __generator(this,function(ga){switch(ga.label){case 0:return[4,us.create(hs)];case 1:return uo=ga.sent(),[2,new is(uo,hs,lo,co)]}})})},is.prototype.encodeText=function(us){for(var hs=this.font.layout(us,this.fontFeatures).glyphs,lo=new Array(hs.length),co=0,uo=hs.length;co<uo;co++){var ga=hs[co],ba=this.subset.includeGlyph(ga);this.glyphs[ba-1]=ga,this.glyphIdMap.set(ga.id,ba),lo[co]=toHexStringOfMinLength(ba,4)}return this.glyphCache.invalidate(),PDFHexString.of(lo.join(""))},is.prototype.isCFF=function(){return this.subset.cff},is.prototype.glyphId=function(us){return us?this.glyphIdMap.get(us.id):-1},is.prototype.serializeFont=function(){var us=this;return new Promise(function(hs,lo){var co=[];us.subset.encodeStream().on("data",function(uo){return co.push(uo)}).on("end",function(){return hs(mergeUint8Arrays(co))}).on("error",function(uo){return lo(uo)})})},is}(CustomFontEmbedder),AFRelationship;(function(cs){cs.Source="Source",cs.Data="Data",cs.Alternative="Alternative",cs.Supplement="Supplement",cs.EncryptedPayload="EncryptedPayload",cs.FormData="EncryptedPayload",cs.Schema="Schema",cs.Unspecified="Unspecified"})(AFRelationship||(AFRelationship={}));var FileEmbedder=function(){function cs(is,us,hs){hs===void 0&&(hs={}),this.fileData=is,this.fileName=us,this.options=hs}return cs.for=function(is,us,hs){return hs===void 0&&(hs={}),new cs(is,us,hs)},cs.prototype.embedIntoContext=function(is,us){return __awaiter(this,void 0,void 0,function(){var hs,lo,co,uo,ga,ba,xa,_a,$a;return __generator(this,function(xl){return hs=this.options,lo=hs.mimeType,co=hs.description,uo=hs.creationDate,ga=hs.modificationDate,ba=hs.afRelationship,xa=is.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:lo??void 0,Params:{Size:this.fileData.length,CreationDate:uo?PDFString.fromDate(uo):void 0,ModDate:ga?PDFString.fromDate(ga):void 0}}),_a=is.register(xa),$a=is.obj({Type:"Filespec",F:PDFString.of(this.fileName),UF:PDFHexString.fromText(this.fileName),EF:{F:_a},Desc:co?PDFHexString.fromText(co):void 0,AFRelationship:ba??void 0}),us?(is.assign(us,$a),[2,us]):[2,is.register($a)]})})},cs}(),MARKERS=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],ColorSpace;(function(cs){cs.DeviceGray="DeviceGray",cs.DeviceRGB="DeviceRGB",cs.DeviceCMYK="DeviceCMYK"})(ColorSpace||(ColorSpace={}));var ChannelToColorSpace={1:ColorSpace.DeviceGray,3:ColorSpace.DeviceRGB,4:ColorSpace.DeviceCMYK},JpegEmbedder=function(){function cs(is,us,hs,lo,co){this.imageData=is,this.bitsPerComponent=us,this.width=hs,this.height=lo,this.colorSpace=co}return cs.for=function(is){return __awaiter(this,void 0,void 0,function(){var us,hs,lo,co,uo,ga,ba,xa,_a,$a;return __generator(this,function(xl){if(us=new DataView(is.buffer),hs=us.getUint16(0),hs!==65496)throw new Error("SOI not found in JPEG");for(lo=2;lo<us.byteLength&&(co=us.getUint16(lo),lo+=2,!MARKERS.includes(co));)lo+=us.getUint16(lo);if(!MARKERS.includes(co))throw new Error("Invalid JPEG");if(lo+=2,uo=us.getUint8(lo++),ga=us.getUint16(lo),lo+=2,ba=us.getUint16(lo),lo+=2,xa=us.getUint8(lo++),_a=ChannelToColorSpace[xa],!_a)throw new Error("Unknown JPEG channel.");return $a=_a,[2,new cs(is,uo,ba,ga,$a)]})})},cs.prototype.embedIntoContext=function(is,us){return __awaiter(this,void 0,void 0,function(){var hs;return __generator(this,function(lo){return hs=is.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===ColorSpace.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),us?(is.assign(us,hs),[2,us]):[2,is.register(hs)]})})},cs}(),UPNG={};UPNG.toRGBA8=function(cs){var is=cs.width,us=cs.height;if(cs.tabs.acTL==null)return[UPNG.toRGBA8.decodeImage(cs.data,is,us,cs).buffer];var hs=[];cs.frames[0].data==null&&(cs.frames[0].data=cs.data);for(var lo=is*us*4,co=new Uint8Array(lo),uo=new Uint8Array(lo),ga=new Uint8Array(lo),ba=0;ba<cs.frames.length;ba++){var xa=cs.frames[ba],_a=xa.rect.x,$a=xa.rect.y,xl=xa.rect.width,yl=xa.rect.height,wl=UPNG.toRGBA8.decodeImage(xa.data,xl,yl,cs);if(ba!=0)for(var _l=0;_l<lo;_l++)ga[_l]=co[_l];if(xa.blend==0?UPNG._copyTile(wl,xl,yl,co,is,us,_a,$a,0):xa.blend==1&&UPNG._copyTile(wl,xl,yl,co,is,us,_a,$a,1),hs.push(co.buffer.slice(0)),xa.dispose!=0){if(xa.dispose==1)UPNG._copyTile(uo,xl,yl,co,is,us,_a,$a,0);else if(xa.dispose==2)for(var _l=0;_l<lo;_l++)co[_l]=ga[_l]}}return hs};UPNG.toRGBA8.decodeImage=function(cs,is,us,hs){var lo=is*us,co=UPNG.decode._getBPP(hs),uo=Math.ceil(is*co/8),ga=new Uint8Array(lo*4),ba=new Uint32Array(ga.buffer),xa=hs.ctype,_a=hs.depth,$a=UPNG._bin.readUshort;if(xa==6){var xl=lo<<2;if(_a==8)for(var yl=0;yl<xl;yl+=4)ga[yl]=cs[yl],ga[yl+1]=cs[yl+1],ga[yl+2]=cs[yl+2],ga[yl+3]=cs[yl+3];if(_a==16)for(var yl=0;yl<xl;yl++)ga[yl]=cs[yl<<1]}else if(xa==2){var wl=hs.tabs.tRNS;if(wl==null){if(_a==8)for(var yl=0;yl<lo;yl++){var _l=yl*3;ba[yl]=255<<24|cs[_l+2]<<16|cs[_l+1]<<8|cs[_l]}if(_a==16)for(var yl=0;yl<lo;yl++){var _l=yl*6;ba[yl]=255<<24|cs[_l+4]<<16|cs[_l+2]<<8|cs[_l]}}else{var El=wl[0],Sl=wl[1],Cl=wl[2];if(_a==8)for(var yl=0;yl<lo;yl++){var Tl=yl<<2,_l=yl*3;ba[yl]=255<<24|cs[_l+2]<<16|cs[_l+1]<<8|cs[_l],cs[_l]==El&&cs[_l+1]==Sl&&cs[_l+2]==Cl&&(ga[Tl+3]=0)}if(_a==16)for(var yl=0;yl<lo;yl++){var Tl=yl<<2,_l=yl*6;ba[yl]=255<<24|cs[_l+4]<<16|cs[_l+2]<<8|cs[_l],$a(cs,_l)==El&&$a(cs,_l+2)==Sl&&$a(cs,_l+4)==Cl&&(ga[Tl+3]=0)}}}else if(xa==3){var Dl=hs.tabs.PLTE,Fl=hs.tabs.tRNS,Pl=Fl?Fl.length:0;if(_a==1)for(var Al=0;Al<us;Al++)for(var Rl=Al*uo,Il=Al*is,yl=0;yl<is;yl++){var Tl=Il+yl<<2,Bl=cs[Rl+(yl>>3)]>>7-((yl&7)<<0)&1,Ol=3*Bl;ga[Tl]=Dl[Ol],ga[Tl+1]=Dl[Ol+1],ga[Tl+2]=Dl[Ol+2],ga[Tl+3]=Bl<Pl?Fl[Bl]:255}if(_a==2)for(var Al=0;Al<us;Al++)for(var Rl=Al*uo,Il=Al*is,yl=0;yl<is;yl++){var Tl=Il+yl<<2,Bl=cs[Rl+(yl>>2)]>>6-((yl&3)<<1)&3,Ol=3*Bl;ga[Tl]=Dl[Ol],ga[Tl+1]=Dl[Ol+1],ga[Tl+2]=Dl[Ol+2],ga[Tl+3]=Bl<Pl?Fl[Bl]:255}if(_a==4)for(var Al=0;Al<us;Al++)for(var Rl=Al*uo,Il=Al*is,yl=0;yl<is;yl++){var Tl=Il+yl<<2,Bl=cs[Rl+(yl>>1)]>>4-((yl&1)<<2)&15,Ol=3*Bl;ga[Tl]=Dl[Ol],ga[Tl+1]=Dl[Ol+1],ga[Tl+2]=Dl[Ol+2],ga[Tl+3]=Bl<Pl?Fl[Bl]:255}if(_a==8)for(var yl=0;yl<lo;yl++){var Tl=yl<<2,Bl=cs[yl],Ol=3*Bl;ga[Tl]=Dl[Ol],ga[Tl+1]=Dl[Ol+1],ga[Tl+2]=Dl[Ol+2],ga[Tl+3]=Bl<Pl?Fl[Bl]:255}}else if(xa==4){if(_a==8)for(var yl=0;yl<lo;yl++){var Tl=yl<<2,zl=yl<<1,Hl=cs[zl];ga[Tl]=Hl,ga[Tl+1]=Hl,ga[Tl+2]=Hl,ga[Tl+3]=cs[zl+1]}if(_a==16)for(var yl=0;yl<lo;yl++){var Tl=yl<<2,zl=yl<<2,Hl=cs[zl];ga[Tl]=Hl,ga[Tl+1]=Hl,ga[Tl+2]=Hl,ga[Tl+3]=cs[zl+2]}}else if(xa==0)for(var El=hs.tabs.tRNS?hs.tabs.tRNS:-1,Al=0;Al<us;Al++){var ou=Al*uo,au=Al*is;if(_a==1)for(var _c=0;_c<is;_c++){var Hl=255*(cs[ou+(_c>>>3)]>>>7-(_c&7)&1),uu=Hl==El*255?0:255;ba[au+_c]=uu<<24|Hl<<16|Hl<<8|Hl}else if(_a==2)for(var _c=0;_c<is;_c++){var Hl=85*(cs[ou+(_c>>>2)]>>>6-((_c&3)<<1)&3),uu=Hl==El*85?0:255;ba[au+_c]=uu<<24|Hl<<16|Hl<<8|Hl}else if(_a==4)for(var _c=0;_c<is;_c++){var Hl=17*(cs[ou+(_c>>>1)]>>>4-((_c&1)<<2)&15),uu=Hl==El*17?0:255;ba[au+_c]=uu<<24|Hl<<16|Hl<<8|Hl}else if(_a==8)for(var _c=0;_c<is;_c++){var Hl=cs[ou+_c],uu=Hl==El?0:255;ba[au+_c]=uu<<24|Hl<<16|Hl<<8|Hl}else if(_a==16)for(var _c=0;_c<is;_c++){var Hl=cs[ou+(_c<<1)],uu=$a(cs,ou+(_c<<yl))==El?0:255;ba[au+_c]=uu<<24|Hl<<16|Hl<<8|Hl}}return ga};UPNG.decode=function(cs){for(var is=new Uint8Array(cs),us=8,hs=UPNG._bin,lo=hs.readUshort,co=hs.readUint,uo={tabs:{},frames:[]},ga=new Uint8Array(is.length),ba=0,xa,_a=0,$a=[137,80,78,71,13,10,26,10],xl=0;xl<8;xl++)if(is[xl]!=$a[xl])throw"The input is not a PNG file!";for(;us<is.length;){var yl=hs.readUint(is,us);us+=4;var wl=hs.readASCII(is,us,4);if(us+=4,wl=="IHDR")UPNG.decode._IHDR(is,us,uo);else if(wl=="IDAT"){for(var xl=0;xl<yl;xl++)ga[ba+xl]=is[us+xl];ba+=yl}else if(wl=="acTL")uo.tabs[wl]={num_frames:co(is,us),num_plays:co(is,us+4)},xa=new Uint8Array(is.length);else if(wl=="fcTL"){if(_a!=0){var _l=uo.frames[uo.frames.length-1];_l.data=UPNG.decode._decompress(uo,xa.slice(0,_a),_l.rect.width,_l.rect.height),_a=0}var El={x:co(is,us+12),y:co(is,us+16),width:co(is,us+4),height:co(is,us+8)},Sl=lo(is,us+22);Sl=lo(is,us+20)/(Sl==0?100:Sl);var Cl={rect:El,delay:Math.round(Sl*1e3),dispose:is[us+24],blend:is[us+25]};uo.frames.push(Cl)}else if(wl=="fdAT"){for(var xl=0;xl<yl-4;xl++)xa[_a+xl]=is[us+xl+4];_a+=yl-4}else if(wl=="pHYs")uo.tabs[wl]=[hs.readUint(is,us),hs.readUint(is,us+4),is[us+8]];else if(wl=="cHRM"){uo.tabs[wl]=[];for(var xl=0;xl<8;xl++)uo.tabs[wl].push(hs.readUint(is,us+xl*4))}else if(wl=="tEXt"){uo.tabs[wl]==null&&(uo.tabs[wl]={});var Tl=hs.nextZero(is,us),Dl=hs.readASCII(is,us,Tl-us),Fl=hs.readASCII(is,Tl+1,us+yl-Tl-1);uo.tabs[wl][Dl]=Fl}else if(wl=="iTXt"){uo.tabs[wl]==null&&(uo.tabs[wl]={});var Tl=0,Pl=us;Tl=hs.nextZero(is,Pl);var Dl=hs.readASCII(is,Pl,Tl-Pl);Pl=Tl+1,is[Pl],is[Pl+1],Pl+=2,Tl=hs.nextZero(is,Pl),hs.readASCII(is,Pl,Tl-Pl),Pl=Tl+1,Tl=hs.nextZero(is,Pl),hs.readUTF8(is,Pl,Tl-Pl),Pl=Tl+1;var Fl=hs.readUTF8(is,Pl,yl-(Pl-us));uo.tabs[wl][Dl]=Fl}else if(wl=="PLTE")uo.tabs[wl]=hs.readBytes(is,us,yl);else if(wl=="hIST"){var Al=uo.tabs.PLTE.length/3;uo.tabs[wl]=[];for(var xl=0;xl<Al;xl++)uo.tabs[wl].push(lo(is,us+xl*2))}else if(wl=="tRNS")uo.ctype==3?uo.tabs[wl]=hs.readBytes(is,us,yl):uo.ctype==0?uo.tabs[wl]=lo(is,us):uo.ctype==2&&(uo.tabs[wl]=[lo(is,us),lo(is,us+2),lo(is,us+4)]);else if(wl=="gAMA")uo.tabs[wl]=hs.readUint(is,us)/1e5;else if(wl=="sRGB")uo.tabs[wl]=is[us];else if(wl=="bKGD")uo.ctype==0||uo.ctype==4?uo.tabs[wl]=[lo(is,us)]:uo.ctype==2||uo.ctype==6?uo.tabs[wl]=[lo(is,us),lo(is,us+2),lo(is,us+4)]:uo.ctype==3&&(uo.tabs[wl]=is[us]);else if(wl=="IEND")break;us+=yl,hs.readUint(is,us),us+=4}if(_a!=0){var _l=uo.frames[uo.frames.length-1];_l.data=UPNG.decode._decompress(uo,xa.slice(0,_a),_l.rect.width,_l.rect.height),_a=0}return uo.data=UPNG.decode._decompress(uo,ga,uo.width,uo.height),delete uo.compress,delete uo.interlace,delete uo.filter,uo};UPNG.decode._decompress=function(cs,is,us,hs){var lo=UPNG.decode._getBPP(cs),co=Math.ceil(us*lo/8),uo=new Uint8Array((co+1+cs.interlace)*hs);return is=UPNG.decode._inflate(is,uo),cs.interlace==0?is=UPNG.decode._filterZero(is,cs,0,us,hs):cs.interlace==1&&(is=UPNG.decode._readInterlace(is,cs)),is};UPNG.decode._inflate=function(cs,is){var us=UPNG.inflateRaw(new Uint8Array(cs.buffer,2,cs.length-6),is);return us};UPNG.inflateRaw=function(){var cs={};return cs.H={},cs.H.N=function(is,us){var hs=Uint8Array,lo=0,co=0,uo=0,ga=0,ba=0,xa=0,_a=0,$a=0,xl=0,yl,wl;if(is[0]==3&&is[1]==0)return us||new hs(0);var _l=cs.H,El=_l.b,Sl=_l.e,Cl=_l.R,Tl=_l.n,Dl=_l.A,Fl=_l.Z,Pl=_l.m,Al=us==null;for(Al&&(us=new hs(is.length>>>2<<3));lo==0;){if(lo=El(is,xl,1),co=El(is,xl+1,2),xl+=3,co==0){xl&7&&(xl+=8-(xl&7));var Rl=(xl>>>3)+4,Il=is[Rl-4]|is[Rl-3]<<8;Al&&(us=cs.H.W(us,$a+Il)),us.set(new hs(is.buffer,is.byteOffset+Rl,Il),$a),xl=Rl+Il<<3,$a+=Il;continue}if(Al&&(us=cs.H.W(us,$a+(1<<17))),co==1&&(yl=Pl.J,wl=Pl.h,xa=511,_a=31),co==2){uo=Sl(is,xl,5)+257,ga=Sl(is,xl+5,5)+1,ba=Sl(is,xl+10,4)+4,xl+=14;for(var Bl=1,Ol=0;Ol<38;Ol+=2)Pl.Q[Ol]=0,Pl.Q[Ol+1]=0;for(var Ol=0;Ol<ba;Ol++){var zl=Sl(is,xl+Ol*3,3);Pl.Q[(Pl.X[Ol]<<1)+1]=zl,zl>Bl&&(Bl=zl)}xl+=3*ba,Tl(Pl.Q,Bl),Dl(Pl.Q,Bl,Pl.u),yl=Pl.w,wl=Pl.d,xl=Cl(Pl.u,(1<<Bl)-1,uo+ga,is,xl,Pl.v);var Hl=_l.V(Pl.v,0,uo,Pl.C);xa=(1<<Hl)-1;var ou=_l.V(Pl.v,uo,ga,Pl.D);_a=(1<<ou)-1,Tl(Pl.C,Hl),Dl(Pl.C,Hl,yl),Tl(Pl.D,ou),Dl(Pl.D,ou,wl)}for(;;){var au=yl[Fl(is,xl)&xa];xl+=au&15;var _c=au>>>4;if(!(_c>>>8))us[$a++]=_c;else{if(_c==256)break;var uu=$a+_c-254;if(_c>264){var lu=Pl.q[_c-257];uu=$a+(lu>>>3)+Sl(is,xl,lu&7),xl+=lu&7}var Kl=wl[Fl(is,xl)&_a];xl+=Kl&15;var xu=Kl>>>4,pu=Pl.c[xu],Ll=(pu>>>4)+El(is,xl,pu&15);for(xl+=pu&15;$a<uu;)us[$a]=us[$a++-Ll],us[$a]=us[$a++-Ll],us[$a]=us[$a++-Ll],us[$a]=us[$a++-Ll];$a=uu}}}return us.length==$a?us:us.slice(0,$a)},cs.H.W=function(is,us){var hs=is.length;if(us<=hs)return is;var lo=new Uint8Array(hs<<1);return lo.set(is,0),lo},cs.H.R=function(is,us,hs,lo,co,uo){for(var ga=cs.H.e,ba=cs.H.Z,xa=0;xa<hs;){var _a=is[ba(lo,co)&us];co+=_a&15;var $a=_a>>>4;if($a<=15)uo[xa]=$a,xa++;else{var xl=0,yl=0;$a==16?(yl=3+ga(lo,co,2),co+=2,xl=uo[xa-1]):$a==17?(yl=3+ga(lo,co,3),co+=3):$a==18&&(yl=11+ga(lo,co,7),co+=7);for(var wl=xa+yl;xa<wl;)uo[xa]=xl,xa++}}return co},cs.H.V=function(is,us,hs,lo){for(var co=0,uo=0,ga=lo.length>>>1;uo<hs;){var ba=is[uo+us];lo[uo<<1]=0,lo[(uo<<1)+1]=ba,ba>co&&(co=ba),uo++}for(;uo<ga;)lo[uo<<1]=0,lo[(uo<<1)+1]=0,uo++;return co},cs.H.n=function(is,us){for(var hs=cs.H.m,lo=is.length,co,uo,ga,ba,xa,_a=hs.j,ba=0;ba<=us;ba++)_a[ba]=0;for(ba=1;ba<lo;ba+=2)_a[is[ba]]++;var $a=hs.K;for(co=0,_a[0]=0,uo=1;uo<=us;uo++)co=co+_a[uo-1]<<1,$a[uo]=co;for(ga=0;ga<lo;ga+=2)xa=is[ga+1],xa!=0&&(is[ga]=$a[xa],$a[xa]++)},cs.H.A=function(is,us,hs){for(var lo=is.length,co=cs.H.m,uo=co.r,ga=0;ga<lo;ga+=2)if(is[ga+1]!=0)for(var ba=ga>>1,xa=is[ga+1],_a=ba<<4|xa,$a=us-xa,xl=is[ga]<<$a,yl=xl+(1<<$a);xl!=yl;){var wl=uo[xl]>>>15-us;hs[wl]=_a,xl++}},cs.H.l=function(is,us){for(var hs=cs.H.m.r,lo=15-us,co=0;co<is.length;co+=2){var uo=is[co]<<us-is[co+1];is[co]=hs[uo]>>>lo}},cs.H.M=function(is,us,hs){hs=hs<<(us&7);var lo=us>>>3;is[lo]|=hs,is[lo+1]|=hs>>>8},cs.H.I=function(is,us,hs){hs=hs<<(us&7);var lo=us>>>3;is[lo]|=hs,is[lo+1]|=hs>>>8,is[lo+2]|=hs>>>16},cs.H.e=function(is,us,hs){return(is[us>>>3]|is[(us>>>3)+1]<<8)>>>(us&7)&(1<<hs)-1},cs.H.b=function(is,us,hs){return(is[us>>>3]|is[(us>>>3)+1]<<8|is[(us>>>3)+2]<<16)>>>(us&7)&(1<<hs)-1},cs.H.Z=function(is,us){return(is[us>>>3]|is[(us>>>3)+1]<<8|is[(us>>>3)+2]<<16)>>>(us&7)},cs.H.i=function(is,us){return(is[us>>>3]|is[(us>>>3)+1]<<8|is[(us>>>3)+2]<<16|is[(us>>>3)+3]<<24)>>>(us&7)},cs.H.m=function(){var is=Uint16Array,us=Uint32Array;return{K:new is(16),j:new is(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new is(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new us(32),J:new is(512),_:[],h:new is(32),$:[],w:new is(32768),C:[],v:[],d:new is(32768),D:[],u:new is(512),Q:[],r:new is(32768),s:new us(286),Y:new us(30),a:new us(19),t:new us(15e3),k:new is(65536),g:new is(32768)}}(),function(){for(var is=cs.H.m,us=32768,hs=0;hs<us;hs++){var lo=hs;lo=(lo&2863311530)>>>1|(lo&1431655765)<<1,lo=(lo&3435973836)>>>2|(lo&858993459)<<2,lo=(lo&4042322160)>>>4|(lo&252645135)<<4,lo=(lo&4278255360)>>>8|(lo&16711935)<<8,is.r[hs]=(lo>>>16|lo<<16)>>>17}function co(uo,ga,ba){for(;ga--!=0;)uo.push(0,ba)}for(var hs=0;hs<32;hs++)is.q[hs]=is.S[hs]<<3|is.T[hs],is.c[hs]=is.p[hs]<<4|is.z[hs];co(is._,144,8),co(is._,112,9),co(is._,24,7),co(is._,8,8),cs.H.n(is._,9),cs.H.A(is._,9,is.J),cs.H.l(is._,9),co(is.$,32,5),cs.H.n(is.$,5),cs.H.A(is.$,5,is.h),cs.H.l(is.$,5),co(is.Q,19,0),co(is.C,286,0),co(is.D,30,0),co(is.v,320,0)}(),cs.H.N}();UPNG.decode._readInterlace=function(cs,is){for(var us=is.width,hs=is.height,lo=UPNG.decode._getBPP(is),co=lo>>3,uo=Math.ceil(us*lo/8),ga=new Uint8Array(hs*uo),ba=0,xa=[0,0,4,0,2,0,1],_a=[0,4,0,2,0,1,0],$a=[8,8,8,4,4,2,2],xl=[8,8,4,4,2,2,1],yl=0;yl<7;){for(var wl=$a[yl],_l=xl[yl],El=0,Sl=0,Cl=xa[yl];Cl<hs;)Cl+=wl,Sl++;for(var Tl=_a[yl];Tl<us;)Tl+=_l,El++;var Dl=Math.ceil(El*lo/8);UPNG.decode._filterZero(cs,is,ba,El,Sl);for(var Fl=0,Pl=xa[yl];Pl<hs;){for(var Al=_a[yl],Rl=ba+Fl*Dl<<3;Al<us;){if(lo==1){var Il=cs[Rl>>3];Il=Il>>7-(Rl&7)&1,ga[Pl*uo+(Al>>3)]|=Il<<7-((Al&7)<<0)}if(lo==2){var Il=cs[Rl>>3];Il=Il>>6-(Rl&7)&3,ga[Pl*uo+(Al>>2)]|=Il<<6-((Al&3)<<1)}if(lo==4){var Il=cs[Rl>>3];Il=Il>>4-(Rl&7)&15,ga[Pl*uo+(Al>>1)]|=Il<<4-((Al&1)<<2)}if(lo>=8)for(var Bl=Pl*uo+Al*co,Ol=0;Ol<co;Ol++)ga[Bl+Ol]=cs[(Rl>>3)+Ol];Rl+=lo,Al+=_l}Fl++,Pl+=wl}El*Sl!=0&&(ba+=Sl*(1+Dl)),yl=yl+1}return ga};UPNG.decode._getBPP=function(cs){var is=[1,null,3,1,2,null,4][cs.ctype];return is*cs.depth};UPNG.decode._filterZero=function(cs,is,us,hs,lo){var co=UPNG.decode._getBPP(is),uo=Math.ceil(hs*co/8),ga=UPNG.decode._paeth;co=Math.ceil(co/8);var ba=0,xa=1,_a=cs[us],$a=0;if(_a>1&&(cs[us]=[0,0,1][_a-2]),_a==3)for($a=co;$a<uo;$a++)cs[$a+1]=cs[$a+1]+(cs[$a+1-co]>>>1)&255;for(var xl=0;xl<lo;xl++)if(ba=us+xl*uo,xa=ba+xl+1,_a=cs[xa-1],$a=0,_a==0)for(;$a<uo;$a++)cs[ba+$a]=cs[xa+$a];else if(_a==1){for(;$a<co;$a++)cs[ba+$a]=cs[xa+$a];for(;$a<uo;$a++)cs[ba+$a]=cs[xa+$a]+cs[ba+$a-co]}else if(_a==2)for(;$a<uo;$a++)cs[ba+$a]=cs[xa+$a]+cs[ba+$a-uo];else if(_a==3){for(;$a<co;$a++)cs[ba+$a]=cs[xa+$a]+(cs[ba+$a-uo]>>>1);for(;$a<uo;$a++)cs[ba+$a]=cs[xa+$a]+(cs[ba+$a-uo]+cs[ba+$a-co]>>>1)}else{for(;$a<co;$a++)cs[ba+$a]=cs[xa+$a]+ga(0,cs[ba+$a-uo],0);for(;$a<uo;$a++)cs[ba+$a]=cs[xa+$a]+ga(cs[ba+$a-co],cs[ba+$a-uo],cs[ba+$a-co-uo])}return cs};UPNG.decode._paeth=function(cs,is,us){var hs=cs+is-us,lo=hs-cs,co=hs-is,uo=hs-us;return lo*lo<=co*co&&lo*lo<=uo*uo?cs:co*co<=uo*uo?is:us};UPNG.decode._IHDR=function(cs,is,us){var hs=UPNG._bin;us.width=hs.readUint(cs,is),is+=4,us.height=hs.readUint(cs,is),is+=4,us.depth=cs[is],is++,us.ctype=cs[is],is++,us.compress=cs[is],is++,us.filter=cs[is],is++,us.interlace=cs[is],is++};UPNG._bin={nextZero:function(cs,is){for(;cs[is]!=0;)is++;return is},readUshort:function(cs,is){return cs[is]<<8|cs[is+1]},writeUshort:function(cs,is,us){cs[is]=us>>8&255,cs[is+1]=us&255},readUint:function(cs,is){return cs[is]*(256*256*256)+(cs[is+1]<<16|cs[is+2]<<8|cs[is+3])},writeUint:function(cs,is,us){cs[is]=us>>24&255,cs[is+1]=us>>16&255,cs[is+2]=us>>8&255,cs[is+3]=us&255},readASCII:function(cs,is,us){for(var hs="",lo=0;lo<us;lo++)hs+=String.fromCharCode(cs[is+lo]);return hs},writeASCII:function(cs,is,us){for(var hs=0;hs<us.length;hs++)cs[is+hs]=us.charCodeAt(hs)},readBytes:function(cs,is,us){for(var hs=[],lo=0;lo<us;lo++)hs.push(cs[is+lo]);return hs},pad:function(cs){return cs.length<2?"0"+cs:cs},readUTF8:function(cs,is,us){for(var hs="",lo,co=0;co<us;co++)hs+="%"+UPNG._bin.pad(cs[is+co].toString(16));try{lo=decodeURIComponent(hs)}catch{return UPNG._bin.readASCII(cs,is,us)}return lo}};UPNG._copyTile=function(cs,is,us,hs,lo,co,uo,ga,ba){for(var xa=Math.min(is,lo),_a=Math.min(us,co),$a=0,xl=0,yl=0;yl<_a;yl++)for(var wl=0;wl<xa;wl++)if(uo>=0&&ga>=0?($a=yl*is+wl<<2,xl=(ga+yl)*lo+uo+wl<<2):($a=(-ga+yl)*is-uo+wl<<2,xl=yl*lo+wl<<2),ba==0)hs[xl]=cs[$a],hs[xl+1]=cs[$a+1],hs[xl+2]=cs[$a+2],hs[xl+3]=cs[$a+3];else if(ba==1){var _l=cs[$a+3]*.00392156862745098,El=cs[$a]*_l,Sl=cs[$a+1]*_l,Cl=cs[$a+2]*_l,Tl=hs[xl+3]*(1/255),Dl=hs[xl]*Tl,Fl=hs[xl+1]*Tl,Pl=hs[xl+2]*Tl,Al=1-_l,Rl=_l+Tl*Al,Il=Rl==0?0:1/Rl;hs[xl+3]=255*Rl,hs[xl+0]=(El+Dl*Al)*Il,hs[xl+1]=(Sl+Fl*Al)*Il,hs[xl+2]=(Cl+Pl*Al)*Il}else if(ba==2){var _l=cs[$a+3],El=cs[$a],Sl=cs[$a+1],Cl=cs[$a+2],Tl=hs[xl+3],Dl=hs[xl],Fl=hs[xl+1],Pl=hs[xl+2];_l==Tl&&El==Dl&&Sl==Fl&&Cl==Pl?(hs[xl]=0,hs[xl+1]=0,hs[xl+2]=0,hs[xl+3]=0):(hs[xl]=El,hs[xl+1]=Sl,hs[xl+2]=Cl,hs[xl+3]=_l)}else if(ba==3){var _l=cs[$a+3],El=cs[$a],Sl=cs[$a+1],Cl=cs[$a+2],Tl=hs[xl+3],Dl=hs[xl],Fl=hs[xl+1],Pl=hs[xl+2];if(_l==Tl&&El==Dl&&Sl==Fl&&Cl==Pl)continue;if(_l<220&&Tl>20)return!1}return!0};UPNG.encode=function(cs,is,us,hs,lo,co,uo){hs==null&&(hs=0),uo==null&&(uo=!1);var ga=UPNG.encode.compress(cs,is,us,hs,[!1,!1,!1,0,uo]);return UPNG.encode.compressPNG(ga,-1),UPNG.encode._main(ga,is,us,lo,co)};UPNG.encodeLL=function(cs,is,us,hs,lo,co,uo,ga){for(var ba={ctype:0+(hs==1?0:2)+(lo==0?0:4),depth:co,frames:[]},xa=(hs+lo)*co,_a=xa*is,$a=0;$a<cs.length;$a++)ba.frames.push({rect:{x:0,y:0,width:is,height:us},img:new Uint8Array(cs[$a]),blend:0,dispose:1,bpp:Math.ceil(xa/8),bpl:Math.ceil(_a/8)});UPNG.encode.compressPNG(ba,0,!0);var xl=UPNG.encode._main(ba,is,us,uo,ga);return xl};UPNG.encode._main=function(cs,is,us,hs,lo){lo==null&&(lo={});var co=UPNG.crc.crc,uo=UPNG._bin.writeUint,ga=UPNG._bin.writeUshort,ba=UPNG._bin.writeASCII,xa=8,_a=cs.frames.length>1,$a=!1,xl=33+(_a?20:0);if(lo.sRGB!=null&&(xl+=13),lo.pHYs!=null&&(xl+=21),cs.ctype==3){for(var yl=cs.plte.length,wl=0;wl<yl;wl++)cs.plte[wl]>>>24!=255&&($a=!0);xl+=8+yl*3+4+($a?8+yl*1+4:0)}for(var _l=0;_l<cs.frames.length;_l++){var El=cs.frames[_l];_a&&(xl+=38),xl+=El.cimg.length+12,_l!=0&&(xl+=4)}xl+=12;for(var Sl=new Uint8Array(xl),Cl=[137,80,78,71,13,10,26,10],wl=0;wl<8;wl++)Sl[wl]=Cl[wl];if(uo(Sl,xa,13),xa+=4,ba(Sl,xa,"IHDR"),xa+=4,uo(Sl,xa,is),xa+=4,uo(Sl,xa,us),xa+=4,Sl[xa]=cs.depth,xa++,Sl[xa]=cs.ctype,xa++,Sl[xa]=0,xa++,Sl[xa]=0,xa++,Sl[xa]=0,xa++,uo(Sl,xa,co(Sl,xa-17,17)),xa+=4,lo.sRGB!=null&&(uo(Sl,xa,1),xa+=4,ba(Sl,xa,"sRGB"),xa+=4,Sl[xa]=lo.sRGB,xa++,uo(Sl,xa,co(Sl,xa-5,5)),xa+=4),lo.pHYs!=null&&(uo(Sl,xa,9),xa+=4,ba(Sl,xa,"pHYs"),xa+=4,uo(Sl,xa,lo.pHYs[0]),xa+=4,uo(Sl,xa,lo.pHYs[1]),xa+=4,Sl[xa]=lo.pHYs[2],xa++,uo(Sl,xa,co(Sl,xa-13,13)),xa+=4),_a&&(uo(Sl,xa,8),xa+=4,ba(Sl,xa,"acTL"),xa+=4,uo(Sl,xa,cs.frames.length),xa+=4,uo(Sl,xa,lo.loop!=null?lo.loop:0),xa+=4,uo(Sl,xa,co(Sl,xa-12,12)),xa+=4),cs.ctype==3){var yl=cs.plte.length;uo(Sl,xa,yl*3),xa+=4,ba(Sl,xa,"PLTE"),xa+=4;for(var wl=0;wl<yl;wl++){var Tl=wl*3,Dl=cs.plte[wl],Fl=Dl&255,Pl=Dl>>>8&255,Al=Dl>>>16&255;Sl[xa+Tl+0]=Fl,Sl[xa+Tl+1]=Pl,Sl[xa+Tl+2]=Al}if(xa+=yl*3,uo(Sl,xa,co(Sl,xa-yl*3-4,yl*3+4)),xa+=4,$a){uo(Sl,xa,yl),xa+=4,ba(Sl,xa,"tRNS"),xa+=4;for(var wl=0;wl<yl;wl++)Sl[xa+wl]=cs.plte[wl]>>>24&255;xa+=yl,uo(Sl,xa,co(Sl,xa-yl-4,yl+4)),xa+=4}}for(var Rl=0,_l=0;_l<cs.frames.length;_l++){var El=cs.frames[_l];_a&&(uo(Sl,xa,26),xa+=4,ba(Sl,xa,"fcTL"),xa+=4,uo(Sl,xa,Rl++),xa+=4,uo(Sl,xa,El.rect.width),xa+=4,uo(Sl,xa,El.rect.height),xa+=4,uo(Sl,xa,El.rect.x),xa+=4,uo(Sl,xa,El.rect.y),xa+=4,ga(Sl,xa,hs[_l]),xa+=2,ga(Sl,xa,1e3),xa+=2,Sl[xa]=El.dispose,xa++,Sl[xa]=El.blend,xa++,uo(Sl,xa,co(Sl,xa-30,30)),xa+=4);var Il=El.cimg,yl=Il.length;uo(Sl,xa,yl+(_l==0?0:4)),xa+=4;var Bl=xa;ba(Sl,xa,_l==0?"IDAT":"fdAT"),xa+=4,_l!=0&&(uo(Sl,xa,Rl++),xa+=4),Sl.set(Il,xa),xa+=yl,uo(Sl,xa,co(Sl,Bl,xa-Bl)),xa+=4}return uo(Sl,xa,0),xa+=4,ba(Sl,xa,"IEND"),xa+=4,uo(Sl,xa,co(Sl,xa-4,4)),xa+=4,Sl.buffer};UPNG.encode.compressPNG=function(cs,is,us){for(var hs=0;hs<cs.frames.length;hs++){var lo=cs.frames[hs];lo.rect.width;var co=lo.rect.height,uo=new Uint8Array(co*lo.bpl+co);lo.cimg=UPNG.encode._filterZero(lo.img,co,lo.bpp,lo.bpl,uo,is,us)}};UPNG.encode.compress=function(cs,is,us,hs,lo){for(var co=lo[0],uo=lo[1],ga=lo[2],ba=lo[3],xa=lo[4],_a=6,$a=8,xl=255,yl=0;yl<cs.length;yl++)for(var wl=new Uint8Array(cs[yl]),_l=wl.length,El=0;El<_l;El+=4)xl&=wl[El+3];var Sl=xl!=255,Cl=UPNG.encode.framize(cs,is,us,co,uo,ga),Tl={},Dl=[],Fl=[];if(hs!=0){for(var Pl=[],El=0;El<Cl.length;El++)Pl.push(Cl[El].img.buffer);for(var Al=UPNG.encode.concatRGBA(Pl),Rl=UPNG.quantize(Al,hs),Il=0,Bl=new Uint8Array(Rl.abuf),El=0;El<Cl.length;El++){var Ol=Cl[El].img,zl=Ol.length;Fl.push(new Uint8Array(Rl.inds.buffer,Il>>2,zl>>2));for(var yl=0;yl<zl;yl+=4)Ol[yl]=Bl[Il+yl],Ol[yl+1]=Bl[Il+yl+1],Ol[yl+2]=Bl[Il+yl+2],Ol[yl+3]=Bl[Il+yl+3];Il+=zl}for(var El=0;El<Rl.plte.length;El++)Dl.push(Rl.plte[El].est.rgba)}else for(var yl=0;yl<Cl.length;yl++){var Hl=Cl[yl],ou=new Uint32Array(Hl.img.buffer),au=Hl.rect.width,_l=ou.length,_c=new Uint8Array(_l);Fl.push(_c);for(var El=0;El<_l;El++){var uu=ou[El];if(El!=0&&uu==ou[El-1])_c[El]=_c[El-1];else if(El>au&&uu==ou[El-au])_c[El]=_c[El-au];else{var lu=Tl[uu];if(lu==null&&(Tl[uu]=lu=Dl.length,Dl.push(uu),Dl.length>=300))break;_c[El]=lu}}}var Kl=Dl.length;Kl<=256&&xa==!1&&(Kl<=2?$a=1:Kl<=4?$a=2:Kl<=16?$a=4:$a=8,$a=Math.max($a,ba));for(var yl=0;yl<Cl.length;yl++){var Hl=Cl[yl];Hl.rect.x,Hl.rect.y;var au=Hl.rect.width,xu=Hl.rect.height,pu=Hl.img;new Uint32Array(pu.buffer);var Ll=4*au,Nl=4;if(Kl<=256&&xa==!1){Ll=Math.ceil($a*au/8);for(var Ml=new Uint8Array(Ll*xu),Ul=Fl[yl],Vl=0;Vl<xu;Vl++){var El=Vl*Ll,Ql=Vl*au;if($a==8)for(var Jl=0;Jl<au;Jl++)Ml[El+Jl]=Ul[Ql+Jl];else if($a==4)for(var Jl=0;Jl<au;Jl++)Ml[El+(Jl>>1)]|=Ul[Ql+Jl]<<4-(Jl&1)*4;else if($a==2)for(var Jl=0;Jl<au;Jl++)Ml[El+(Jl>>2)]|=Ul[Ql+Jl]<<6-(Jl&3)*2;else if($a==1)for(var Jl=0;Jl<au;Jl++)Ml[El+(Jl>>3)]|=Ul[Ql+Jl]<<7-(Jl&7)*1}pu=Ml,_a=3,Nl=1}else if(Sl==!1&&Cl.length==1){for(var Ml=new Uint8Array(au*xu*3),iu=au*xu,El=0;El<iu;El++){var Ol=El*3,fu=El*4;Ml[Ol]=pu[fu],Ml[Ol+1]=pu[fu+1],Ml[Ol+2]=pu[fu+2]}pu=Ml,_a=2,Nl=3,Ll=3*au}Hl.img=pu,Hl.bpl=Ll,Hl.bpp=Nl}return{ctype:_a,depth:$a,plte:Dl,frames:Cl}};UPNG.encode.framize=function(cs,is,us,hs,lo,co){for(var uo=[],ga=0;ga<cs.length;ga++){var ba=new Uint8Array(cs[ga]),xa=new Uint32Array(ba.buffer),_a,$a=0,xl=0,yl=is,wl=us,_l=hs?1:0;if(ga!=0){for(var El=co||hs||ga==1||uo[ga-2].dispose!=0?1:2,Sl=0,Cl=1e9,Tl=0;Tl<El;Tl++){for(var Hl=new Uint8Array(cs[ga-1-Tl]),Dl=new Uint32Array(cs[ga-1-Tl]),Fl=is,Pl=us,Al=-1,Rl=-1,Il=0;Il<us;Il++)for(var Bl=0;Bl<is;Bl++){var Ol=Il*is+Bl;xa[Ol]!=Dl[Ol]&&(Bl<Fl&&(Fl=Bl),Bl>Al&&(Al=Bl),Il<Pl&&(Pl=Il),Il>Rl&&(Rl=Il))}Al==-1&&(Fl=Pl=Al=Rl=0),lo&&((Fl&1)==1&&Fl--,(Pl&1)==1&&Pl--);var zl=(Al-Fl+1)*(Rl-Pl+1);zl<Cl&&(Cl=zl,Sl=Tl,$a=Fl,xl=Pl,yl=Al-Fl+1,wl=Rl-Pl+1)}var Hl=new Uint8Array(cs[ga-1-Sl]);Sl==1&&(uo[ga-1].dispose=2),_a=new Uint8Array(yl*wl*4),UPNG._copyTile(Hl,is,us,_a,yl,wl,-$a,-xl,0),_l=UPNG._copyTile(ba,is,us,_a,yl,wl,-$a,-xl,3)?1:0,_l==1?UPNG.encode._prepareDiff(ba,is,us,_a,{x:$a,y:xl,width:yl,height:wl}):UPNG._copyTile(ba,is,us,_a,yl,wl,-$a,-xl,0)}else _a=ba.slice(0);uo.push({rect:{x:$a,y:xl,width:yl,height:wl},img:_a,blend:_l,dispose:0})}if(hs)for(var ga=0;ga<uo.length;ga++){var ou=uo[ga];if(ou.blend!=1){var au=ou.rect,_c=uo[ga-1].rect,uu=Math.min(au.x,_c.x),lu=Math.min(au.y,_c.y),Kl=Math.max(au.x+au.width,_c.x+_c.width),xu=Math.max(au.y+au.height,_c.y+_c.height),pu={x:uu,y:lu,width:Kl-uu,height:xu-lu};uo[ga-1].dispose=1,ga-1!=0&&UPNG.encode._updateFrame(cs,is,us,uo,ga-1,pu,lo),UPNG.encode._updateFrame(cs,is,us,uo,ga,pu,lo)}}var Ll=0;if(cs.length!=1)for(var Ol=0;Ol<uo.length;Ol++){var ou=uo[Ol];Ll+=ou.rect.width*ou.rect.height}return uo};UPNG.encode._updateFrame=function(cs,is,us,hs,lo,co,uo){for(var ga=Uint8Array,ba=Uint32Array,xa=new ga(cs[lo-1]),_a=new ba(cs[lo-1]),$a=lo+1<cs.length?new ga(cs[lo+1]):null,xl=new ga(cs[lo]),yl=new ba(xl.buffer),wl=is,_l=us,El=-1,Sl=-1,Cl=0;Cl<co.height;Cl++)for(var Tl=0;Tl<co.width;Tl++){var Dl=co.x+Tl,Fl=co.y+Cl,Pl=Fl*is+Dl,Al=yl[Pl];Al==0||hs[lo-1].dispose==0&&_a[Pl]==Al&&($a==null||$a[Pl*4+3]!=0)||(Dl<wl&&(wl=Dl),Dl>El&&(El=Dl),Fl<_l&&(_l=Fl),Fl>Sl&&(Sl=Fl))}El==-1&&(wl=_l=El=Sl=0),uo&&((wl&1)==1&&wl--,(_l&1)==1&&_l--),co={x:wl,y:_l,width:El-wl+1,height:Sl-_l+1};var Rl=hs[lo];Rl.rect=co,Rl.blend=1,Rl.img=new Uint8Array(co.width*co.height*4),hs[lo-1].dispose==0?(UPNG._copyTile(xa,is,us,Rl.img,co.width,co.height,-co.x,-co.y,0),UPNG.encode._prepareDiff(xl,is,us,Rl.img,co)):UPNG._copyTile(xl,is,us,Rl.img,co.width,co.height,-co.x,-co.y,0)};UPNG.encode._prepareDiff=function(cs,is,us,hs,lo){UPNG._copyTile(cs,is,us,hs,lo.width,lo.height,-lo.x,-lo.y,2)};UPNG.encode._filterZero=function(cs,is,us,hs,lo,co,uo){var ga=[],ba=[0,1,2,3,4];co!=-1?ba=[co]:(is*hs>5e5||us==1)&&(ba=[0]);var xa;uo&&(xa={level:0});for(var _a=uo&&UZIP!=null?UZIP:pako$1,$a=0;$a<ba.length;$a++){for(var xl=0;xl<is;xl++)UPNG.encode._filterLine(lo,cs,xl,hs,us,ba[$a]);ga.push(_a.deflate(lo,xa))}for(var yl,wl=1e9,$a=0;$a<ga.length;$a++)ga[$a].length<wl&&(yl=$a,wl=ga[$a].length);return ga[yl]};UPNG.encode._filterLine=function(cs,is,us,hs,lo,co){var uo=us*hs,ga=uo+us,ba=UPNG.decode._paeth;if(cs[ga]=co,ga++,co==0)if(hs<500)for(var xa=0;xa<hs;xa++)cs[ga+xa]=is[uo+xa];else cs.set(new Uint8Array(is.buffer,uo,hs),ga);else if(co==1){for(var xa=0;xa<lo;xa++)cs[ga+xa]=is[uo+xa];for(var xa=lo;xa<hs;xa++)cs[ga+xa]=is[uo+xa]-is[uo+xa-lo]+256&255}else if(us==0){for(var xa=0;xa<lo;xa++)cs[ga+xa]=is[uo+xa];if(co==2)for(var xa=lo;xa<hs;xa++)cs[ga+xa]=is[uo+xa];if(co==3)for(var xa=lo;xa<hs;xa++)cs[ga+xa]=is[uo+xa]-(is[uo+xa-lo]>>1)+256&255;if(co==4)for(var xa=lo;xa<hs;xa++)cs[ga+xa]=is[uo+xa]-ba(is[uo+xa-lo],0,0)+256&255}else{if(co==2)for(var xa=0;xa<hs;xa++)cs[ga+xa]=is[uo+xa]+256-is[uo+xa-hs]&255;if(co==3){for(var xa=0;xa<lo;xa++)cs[ga+xa]=is[uo+xa]+256-(is[uo+xa-hs]>>1)&255;for(var xa=lo;xa<hs;xa++)cs[ga+xa]=is[uo+xa]+256-(is[uo+xa-hs]+is[uo+xa-lo]>>1)&255}if(co==4){for(var xa=0;xa<lo;xa++)cs[ga+xa]=is[uo+xa]+256-ba(0,is[uo+xa-hs],0)&255;for(var xa=lo;xa<hs;xa++)cs[ga+xa]=is[uo+xa]+256-ba(is[uo+xa-lo],is[uo+xa-hs],is[uo+xa-lo-hs])&255}}};UPNG.crc={table:function(){for(var cs=new Uint32Array(256),is=0;is<256;is++){for(var us=is,hs=0;hs<8;hs++)us&1?us=3988292384^us>>>1:us=us>>>1;cs[is]=us}return cs}(),update:function(cs,is,us,hs){for(var lo=0;lo<hs;lo++)cs=UPNG.crc.table[(cs^is[us+lo])&255]^cs>>>8;return cs},crc:function(cs,is,us){return UPNG.crc.update(4294967295,cs,is,us)^4294967295}};UPNG.quantize=function(cs,is){var us=new Uint8Array(cs),hs=us.slice(0),lo=new Uint32Array(hs.buffer),co=UPNG.quantize.getKDtree(hs,is),uo=co[0],ga=co[1];UPNG.quantize.planeDst;for(var ba=us,xa=lo,_a=ba.length,$a=new Uint8Array(us.length>>2),xl=0;xl<_a;xl+=4){var yl=ba[xl]*.00392156862745098,wl=ba[xl+1]*(1/255),_l=ba[xl+2]*(1/255),El=ba[xl+3]*(1/255),Sl=UPNG.quantize.getNearest(uo,yl,wl,_l,El);$a[xl>>2]=Sl.ind,xa[xl>>2]=Sl.est.rgba}return{abuf:hs.buffer,inds:$a,plte:ga}};UPNG.quantize.getKDtree=function(cs,is,us){us==null&&(us=1e-4);var hs=new Uint32Array(cs.buffer),lo={i0:0,i1:cs.length,bst:null,est:null,tdst:0,left:null,right:null};lo.bst=UPNG.quantize.stats(cs,lo.i0,lo.i1),lo.est=UPNG.quantize.estats(lo.bst);for(var co=[lo];co.length<is;){for(var uo=0,ga=0,ba=0;ba<co.length;ba++)co[ba].est.L>uo&&(uo=co[ba].est.L,ga=ba);if(uo<us)break;var xa=co[ga],_a=UPNG.quantize.splitPixels(cs,hs,xa.i0,xa.i1,xa.est.e,xa.est.eMq255),$a=xa.i0>=_a||xa.i1<=_a;if($a){xa.est.L=0;continue}var xl={i0:xa.i0,i1:_a,bst:null,est:null,tdst:0,left:null,right:null};xl.bst=UPNG.quantize.stats(cs,xl.i0,xl.i1),xl.est=UPNG.quantize.estats(xl.bst);var yl={i0:_a,i1:xa.i1,bst:null,est:null,tdst:0,left:null,right:null};yl.bst={R:[],m:[],N:xa.bst.N-xl.bst.N};for(var ba=0;ba<16;ba++)yl.bst.R[ba]=xa.bst.R[ba]-xl.bst.R[ba];for(var ba=0;ba<4;ba++)yl.bst.m[ba]=xa.bst.m[ba]-xl.bst.m[ba];yl.est=UPNG.quantize.estats(yl.bst),xa.left=xl,xa.right=yl,co[ga]=xl,co.push(yl)}co.sort(function(wl,_l){return _l.bst.N-wl.bst.N});for(var ba=0;ba<co.length;ba++)co[ba].ind=ba;return[lo,co]};UPNG.quantize.getNearest=function(cs,is,us,hs,lo){if(cs.left==null)return cs.tdst=UPNG.quantize.dist(cs.est.q,is,us,hs,lo),cs;var co=UPNG.quantize.planeDst(cs.est,is,us,hs,lo),uo=cs.left,ga=cs.right;co>0&&(uo=cs.right,ga=cs.left);var ba=UPNG.quantize.getNearest(uo,is,us,hs,lo);if(ba.tdst<=co*co)return ba;var xa=UPNG.quantize.getNearest(ga,is,us,hs,lo);return xa.tdst<ba.tdst?xa:ba};UPNG.quantize.planeDst=function(cs,is,us,hs,lo){var co=cs.e;return co[0]*is+co[1]*us+co[2]*hs+co[3]*lo-cs.eMq};UPNG.quantize.dist=function(cs,is,us,hs,lo){var co=is-cs[0],uo=us-cs[1],ga=hs-cs[2],ba=lo-cs[3];return co*co+uo*uo+ga*ga+ba*ba};UPNG.quantize.splitPixels=function(cs,is,us,hs,lo,co){var uo=UPNG.quantize.vecDot;for(hs-=4;us<hs;){for(;uo(cs,us,lo)<=co;)us+=4;for(;uo(cs,hs,lo)>co;)hs-=4;if(us>=hs)break;var ga=is[us>>2];is[us>>2]=is[hs>>2],is[hs>>2]=ga,us+=4,hs-=4}for(;uo(cs,us,lo)>co;)us-=4;return us+4};UPNG.quantize.vecDot=function(cs,is,us){return cs[is]*us[0]+cs[is+1]*us[1]+cs[is+2]*us[2]+cs[is+3]*us[3]};UPNG.quantize.stats=function(cs,is,us){for(var hs=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],lo=[0,0,0,0],co=us-is>>2,uo=is;uo<us;uo+=4){var ga=cs[uo]*.00392156862745098,ba=cs[uo+1]*(1/255),xa=cs[uo+2]*(1/255),_a=cs[uo+3]*(1/255);lo[0]+=ga,lo[1]+=ba,lo[2]+=xa,lo[3]+=_a,hs[0]+=ga*ga,hs[1]+=ga*ba,hs[2]+=ga*xa,hs[3]+=ga*_a,hs[5]+=ba*ba,hs[6]+=ba*xa,hs[7]+=ba*_a,hs[10]+=xa*xa,hs[11]+=xa*_a,hs[15]+=_a*_a}return hs[4]=hs[1],hs[8]=hs[2],hs[9]=hs[6],hs[12]=hs[3],hs[13]=hs[7],hs[14]=hs[11],{R:hs,m:lo,N:co}};UPNG.quantize.estats=function(cs){var is=cs.R,us=cs.m,hs=cs.N,lo=us[0],co=us[1],uo=us[2],ga=us[3],ba=hs==0?0:1/hs,xa=[is[0]-lo*lo*ba,is[1]-lo*co*ba,is[2]-lo*uo*ba,is[3]-lo*ga*ba,is[4]-co*lo*ba,is[5]-co*co*ba,is[6]-co*uo*ba,is[7]-co*ga*ba,is[8]-uo*lo*ba,is[9]-uo*co*ba,is[10]-uo*uo*ba,is[11]-uo*ga*ba,is[12]-ga*lo*ba,is[13]-ga*co*ba,is[14]-ga*uo*ba,is[15]-ga*ga*ba],_a=xa,$a=UPNG.M4,xl=[.5,.5,.5,.5],yl=0,wl=0;if(hs!=0)for(var _l=0;_l<10&&(xl=$a.multVec(_a,xl),wl=Math.sqrt($a.dot(xl,xl)),xl=$a.sml(1/wl,xl),!(Math.abs(wl-yl)<1e-9));_l++)yl=wl;var El=[lo*ba,co*ba,uo*ba,ga*ba],Sl=$a.dot($a.sml(255,El),xl);return{Cov:xa,q:El,e:xl,L:yl,eMq255:Sl,eMq:$a.dot(xl,El),rgba:(Math.round(255*El[3])<<24|Math.round(255*El[2])<<16|Math.round(255*El[1])<<8|Math.round(255*El[0])<<0)>>>0}};UPNG.M4={multVec:function(cs,is){return[cs[0]*is[0]+cs[1]*is[1]+cs[2]*is[2]+cs[3]*is[3],cs[4]*is[0]+cs[5]*is[1]+cs[6]*is[2]+cs[7]*is[3],cs[8]*is[0]+cs[9]*is[1]+cs[10]*is[2]+cs[11]*is[3],cs[12]*is[0]+cs[13]*is[1]+cs[14]*is[2]+cs[15]*is[3]]},dot:function(cs,is){return cs[0]*is[0]+cs[1]*is[1]+cs[2]*is[2]+cs[3]*is[3]},sml:function(cs,is){return[cs*is[0],cs*is[1],cs*is[2],cs*is[3]]}};UPNG.encode.concatRGBA=function(cs){for(var is=0,us=0;us<cs.length;us++)is+=cs[us].byteLength;for(var hs=new Uint8Array(is),lo=0,us=0;us<cs.length;us++){for(var co=new Uint8Array(cs[us]),uo=co.length,ga=0;ga<uo;ga+=4){var ba=co[ga],xa=co[ga+1],_a=co[ga+2],$a=co[ga+3];$a==0&&(ba=xa=_a=0),hs[lo+ga]=ba,hs[lo+ga+1]=xa,hs[lo+ga+2]=_a,hs[lo+ga+3]=$a}lo+=uo}return hs.buffer};var getImageType=function(cs){if(cs===0)return PngType.Greyscale;if(cs===2)return PngType.Truecolour;if(cs===3)return PngType.IndexedColour;if(cs===4)return PngType.GreyscaleWithAlpha;if(cs===6)return PngType.TruecolourWithAlpha;throw new Error("Unknown color type: "+cs)},splitAlphaChannel=function(cs){for(var is=Math.floor(cs.length/4),us=new Uint8Array(is*3),hs=new Uint8Array(is*1),lo=0,co=0,uo=0;lo<cs.length;)us[co++]=cs[lo++],us[co++]=cs[lo++],us[co++]=cs[lo++],hs[uo++]=cs[lo++];return{rgbChannel:us,alphaChannel:hs}},PngType;(function(cs){cs.Greyscale="Greyscale",cs.Truecolour="Truecolour",cs.IndexedColour="IndexedColour",cs.GreyscaleWithAlpha="GreyscaleWithAlpha",cs.TruecolourWithAlpha="TruecolourWithAlpha"})(PngType||(PngType={}));var PNG=function(){function cs(is){var us=UPNG.decode(is),hs=UPNG.toRGBA8(us);if(hs.length>1)throw new Error("Animated PNGs are not supported");var lo=new Uint8Array(hs[0]),co=splitAlphaChannel(lo),uo=co.rgbChannel,ga=co.alphaChannel;this.rgbChannel=uo;var ba=ga.some(function(xa){return xa<255});ba&&(this.alphaChannel=ga),this.type=getImageType(us.ctype),this.width=us.width,this.height=us.height,this.bitsPerComponent=8}return cs.load=function(is){return new cs(is)},cs}(),PngEmbedder=function(){function cs(is){this.image=is,this.bitsPerComponent=is.bitsPerComponent,this.width=is.width,this.height=is.height,this.colorSpace="DeviceRGB"}return cs.for=function(is){return __awaiter(this,void 0,void 0,function(){var us;return __generator(this,function(hs){return us=PNG.load(is),[2,new cs(us)]})})},cs.prototype.embedIntoContext=function(is,us){return __awaiter(this,void 0,void 0,function(){var hs,lo;return __generator(this,function(co){return hs=this.embedAlphaChannel(is),lo=is.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:hs}),us?(is.assign(us,lo),[2,us]):[2,is.register(lo)]})})},cs.prototype.embedAlphaChannel=function(is){if(this.image.alphaChannel){var us=is.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return is.register(us)}},cs}(),Stream=function(){function cs(is,us,hs){this.bytes=is,this.start=us||0,this.pos=this.start,this.end=us&&hs?us+hs:this.bytes.length}return Object.defineProperty(cs.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(cs.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),cs.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},cs.prototype.getUint16=function(){var is=this.getByte(),us=this.getByte();return is===-1||us===-1?-1:(is<<8)+us},cs.prototype.getInt32=function(){var is=this.getByte(),us=this.getByte(),hs=this.getByte(),lo=this.getByte();return(is<<24)+(us<<16)+(hs<<8)+lo},cs.prototype.getBytes=function(is,us){us===void 0&&(us=!1);var hs=this.bytes,lo=this.pos,co=this.end;if(is){var ga=lo+is;ga>co&&(ga=co),this.pos=ga;var uo=hs.subarray(lo,ga);return us?new Uint8ClampedArray(uo):uo}else{var uo=hs.subarray(lo,co);return us?new Uint8ClampedArray(uo):uo}},cs.prototype.peekByte=function(){var is=this.getByte();return this.pos--,is},cs.prototype.peekBytes=function(is,us){us===void 0&&(us=!1);var hs=this.getBytes(is,us);return this.pos-=hs.length,hs},cs.prototype.skip=function(is){is||(is=1),this.pos+=is},cs.prototype.reset=function(){this.pos=this.start},cs.prototype.moveStart=function(){this.start=this.pos},cs.prototype.makeSubStream=function(is,us){return new cs(this.bytes,is,us)},cs.prototype.decode=function(){return this.bytes},cs}(),emptyBuffer=new Uint8Array(0),DecodeStream=function(){function cs(is){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=emptyBuffer,this.minBufferLength=512,is)for(;this.minBufferLength<is;)this.minBufferLength*=2}return Object.defineProperty(cs.prototype,"isEmpty",{get:function(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},enumerable:!1,configurable:!0}),cs.prototype.getByte=function(){for(var is=this.pos;this.bufferLength<=is;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},cs.prototype.getUint16=function(){var is=this.getByte(),us=this.getByte();return is===-1||us===-1?-1:(is<<8)+us},cs.prototype.getInt32=function(){var is=this.getByte(),us=this.getByte(),hs=this.getByte(),lo=this.getByte();return(is<<24)+(us<<16)+(hs<<8)+lo},cs.prototype.getBytes=function(is,us){us===void 0&&(us=!1);var hs,lo=this.pos;if(is){for(this.ensureBuffer(lo+is),hs=lo+is;!this.eof&&this.bufferLength<hs;)this.readBlock();var co=this.bufferLength;hs>co&&(hs=co)}else{for(;!this.eof;)this.readBlock();hs=this.bufferLength}this.pos=hs;var uo=this.buffer.subarray(lo,hs);return us&&!(uo instanceof Uint8ClampedArray)?new Uint8ClampedArray(uo):uo},cs.prototype.peekByte=function(){var is=this.getByte();return this.pos--,is},cs.prototype.peekBytes=function(is,us){us===void 0&&(us=!1);var hs=this.getBytes(is,us);return this.pos-=hs.length,hs},cs.prototype.skip=function(is){is||(is=1),this.pos+=is},cs.prototype.reset=function(){this.pos=0},cs.prototype.makeSubStream=function(is,us){for(var hs=is+us;this.bufferLength<=hs&&!this.eof;)this.readBlock();return new Stream(this.buffer,is,us)},cs.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},cs.prototype.readBlock=function(){throw new MethodNotImplementedError(this.constructor.name,"readBlock")},cs.prototype.ensureBuffer=function(is){var us=this.buffer;if(is<=us.byteLength)return us;for(var hs=this.minBufferLength;hs<is;)hs*=2;var lo=new Uint8Array(hs);return lo.set(us),this.buffer=lo},cs}(),isSpace=function(cs){return cs===32||cs===9||cs===13||cs===10},Ascii85Stream=function(cs){__extends(is,cs);function is(us,hs){var lo=cs.call(this,hs)||this;return lo.stream=us,lo.input=new Uint8Array(5),hs&&(hs=.8*hs),lo}return is.prototype.readBlock=function(){for(var us=126,hs=122,lo=-1,co=this.stream,uo=co.getByte();isSpace(uo);)uo=co.getByte();if(uo===lo||uo===us){this.eof=!0;return}var ga=this.bufferLength,ba,xa;if(uo===hs){for(ba=this.ensureBuffer(ga+4),xa=0;xa<4;++xa)ba[ga+xa]=0;this.bufferLength+=4}else{var _a=this.input;for(_a[0]=uo,xa=1;xa<5;++xa){for(uo=co.getByte();isSpace(uo);)uo=co.getByte();if(_a[xa]=uo,uo===lo||uo===us)break}if(ba=this.ensureBuffer(ga+xa-1),this.bufferLength+=xa-1,xa<5){for(;xa<5;++xa)_a[xa]=117;this.eof=!0}var $a=0;for(xa=0;xa<5;++xa)$a=$a*85+(_a[xa]-33);for(xa=3;xa>=0;--xa)ba[ga+xa]=$a&255,$a>>=8}},is}(DecodeStream),AsciiHexStream=function(cs){__extends(is,cs);function is(us,hs){var lo=cs.call(this,hs)||this;return lo.stream=us,lo.firstDigit=-1,hs&&(hs=.5*hs),lo}return is.prototype.readBlock=function(){var us=8e3,hs=this.stream.getBytes(us);if(!hs.length){this.eof=!0;return}for(var lo=hs.length+1>>1,co=this.ensureBuffer(this.bufferLength+lo),uo=this.bufferLength,ga=this.firstDigit,ba=0,xa=hs.length;ba<xa;ba++){var _a=hs[ba],$a=void 0;if(_a>=48&&_a<=57)$a=_a&15;else if(_a>=65&&_a<=70||_a>=97&&_a<=102)$a=(_a&15)+9;else if(_a===62){this.eof=!0;break}else continue;ga<0?ga=$a:(co[uo++]=ga<<4|$a,ga=-1)}ga>=0&&this.eof&&(co[uo++]=ga<<4,ga=-1),this.firstDigit=ga,this.bufferLength=uo},is}(DecodeStream),codeLenCodeMap=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lengthDecode=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),distDecode=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),fixedLitCodeTab=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],fixedDistCodeTab=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],FlateStream=function(cs){__extends(is,cs);function is(us,hs){var lo=cs.call(this,hs)||this;lo.stream=us;var co=us.getByte(),uo=us.getByte();if(co===-1||uo===-1)throw new Error("Invalid header in flate stream: "+co+", "+uo);if((co&15)!==8)throw new Error("Unknown compression method in flate stream: "+co+", "+uo);if(((co<<8)+uo)%31!==0)throw new Error("Bad FCHECK in flate stream: "+co+", "+uo);if(uo&32)throw new Error("FDICT bit set in flate stream: "+co+", "+uo);return lo.codeSize=0,lo.codeBuf=0,lo}return is.prototype.readBlock=function(){var us,hs,lo=this.stream,co=this.getBits(3);if(co&1&&(this.eof=!0),co>>=1,co===0){var uo=void 0;if((uo=lo.getByte())===-1)throw new Error("Bad block header in flate stream");var ga=uo;if((uo=lo.getByte())===-1)throw new Error("Bad block header in flate stream");if(ga|=uo<<8,(uo=lo.getByte())===-1)throw new Error("Bad block header in flate stream");var ba=uo;if((uo=lo.getByte())===-1)throw new Error("Bad block header in flate stream");if(ba|=uo<<8,ba!==(~ga&65535)&&(ga!==0||ba!==0))throw new Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var xa=this.bufferLength;us=this.ensureBuffer(xa+ga);var _a=xa+ga;if(this.bufferLength=_a,ga===0)lo.peekByte()===-1&&(this.eof=!0);else for(var $a=xa;$a<_a;++$a){if((uo=lo.getByte())===-1){this.eof=!0;break}us[$a]=uo}return}var xl,yl;if(co===1)xl=fixedLitCodeTab,yl=fixedDistCodeTab;else if(co===2){var wl=this.getBits(5)+257,_l=this.getBits(5)+1,El=this.getBits(4)+4,Sl=new Uint8Array(codeLenCodeMap.length),Cl=void 0;for(Cl=0;Cl<El;++Cl)Sl[codeLenCodeMap[Cl]]=this.getBits(3);var Tl=this.generateHuffmanTable(Sl);hs=0,Cl=0;for(var Dl=wl+_l,Fl=new Uint8Array(Dl),Pl=void 0,Al=void 0,Rl=void 0;Cl<Dl;){var Il=this.getCode(Tl);if(Il===16)Pl=2,Al=3,Rl=hs;else if(Il===17)Pl=3,Al=3,Rl=hs=0;else if(Il===18)Pl=7,Al=11,Rl=hs=0;else{Fl[Cl++]=hs=Il;continue}for(var Bl=this.getBits(Pl)+Al;Bl-- >0;)Fl[Cl++]=Rl}xl=this.generateHuffmanTable(Fl.subarray(0,wl)),yl=this.generateHuffmanTable(Fl.subarray(wl,Dl))}else throw new Error("Unknown block type in flate stream");us=this.buffer;for(var Ol=us?us.length:0,zl=this.bufferLength;;){var Hl=this.getCode(xl);if(Hl<256){zl+1>=Ol&&(us=this.ensureBuffer(zl+1),Ol=us.length),us[zl++]=Hl;continue}if(Hl===256){this.bufferLength=zl;return}Hl-=257,Hl=lengthDecode[Hl];var ou=Hl>>16;ou>0&&(ou=this.getBits(ou)),hs=(Hl&65535)+ou,Hl=this.getCode(yl),Hl=distDecode[Hl],ou=Hl>>16,ou>0&&(ou=this.getBits(ou));var au=(Hl&65535)+ou;zl+hs>=Ol&&(us=this.ensureBuffer(zl+hs),Ol=us.length);for(var _c=0;_c<hs;++_c,++zl)us[zl]=us[zl-au]}},is.prototype.getBits=function(us){for(var hs=this.stream,lo=this.codeSize,co=this.codeBuf,uo;lo<us;){if((uo=hs.getByte())===-1)throw new Error("Bad encoding in flate stream");co|=uo<<lo,lo+=8}return uo=co&(1<<us)-1,this.codeBuf=co>>us,this.codeSize=lo-=us,uo},is.prototype.getCode=function(us){for(var hs=this.stream,lo=us[0],co=us[1],uo=this.codeSize,ga=this.codeBuf,ba;uo<co&&(ba=hs.getByte())!==-1;)ga|=ba<<uo,uo+=8;var xa=lo[ga&(1<<co)-1];typeof lo=="number"&&console.log("FLATE:",xa);var _a=xa>>16,$a=xa&65535;if(_a<1||uo<_a)throw new Error("Bad encoding in flate stream");return this.codeBuf=ga>>_a,this.codeSize=uo-_a,$a},is.prototype.generateHuffmanTable=function(us){var hs=us.length,lo=0,co;for(co=0;co<hs;++co)us[co]>lo&&(lo=us[co]);for(var uo=1<<lo,ga=new Int32Array(uo),ba=1,xa=0,_a=2;ba<=lo;++ba,xa<<=1,_a<<=1)for(var $a=0;$a<hs;++$a)if(us[$a]===ba){var xl=0,yl=xa;for(co=0;co<ba;++co)xl=xl<<1|yl&1,yl>>=1;for(co=xl;co<uo;co+=_a)ga[co]=ba<<16|$a;++xa}return[ga,lo]},is}(DecodeStream),LZWStream=function(cs){__extends(is,cs);function is(us,hs,lo){var co=cs.call(this,hs)||this;co.stream=us,co.cachedData=0,co.bitsCached=0;for(var uo=4096,ga={earlyChange:lo,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(uo),dictionaryLengths:new Uint16Array(uo),dictionaryPrevCodes:new Uint16Array(uo),currentSequence:new Uint8Array(uo),currentSequenceLength:0},ba=0;ba<256;++ba)ga.dictionaryValues[ba]=ba,ga.dictionaryLengths[ba]=1;return co.lzwState=ga,co}return is.prototype.readBlock=function(){var us=512,hs=us*2,lo=us,co,uo,ga,ba=this.lzwState;if(ba){var xa=ba.earlyChange,_a=ba.nextCode,$a=ba.dictionaryValues,xl=ba.dictionaryLengths,yl=ba.dictionaryPrevCodes,wl=ba.codeLength,_l=ba.prevCode,El=ba.currentSequence,Sl=ba.currentSequenceLength,Cl=0,Tl=this.bufferLength,Dl=this.ensureBuffer(this.bufferLength+hs);for(co=0;co<us;co++){var Fl=this.readBits(wl),Pl=Sl>0;if(!Fl||Fl<256)El[0]=Fl,Sl=1;else if(Fl>=258)if(Fl<_a)for(Sl=xl[Fl],uo=Sl-1,ga=Fl;uo>=0;uo--)El[uo]=$a[ga],ga=yl[ga];else El[Sl++]=El[0];else if(Fl===256){wl=9,_a=258,Sl=0;continue}else{this.eof=!0,delete this.lzwState;break}if(Pl&&(yl[_a]=_l,xl[_a]=xl[_l]+1,$a[_a]=El[0],_a++,wl=_a+xa&_a+xa-1?wl:Math.min(Math.log(_a+xa)/.6931471805599453+1,12)|0),_l=Fl,Cl+=Sl,hs<Cl){do hs+=lo;while(hs<Cl);Dl=this.ensureBuffer(this.bufferLength+hs)}for(uo=0;uo<Sl;uo++)Dl[Tl++]=El[uo]}ba.nextCode=_a,ba.codeLength=wl,ba.prevCode=_l,ba.currentSequenceLength=Sl,this.bufferLength=Tl}},is.prototype.readBits=function(us){for(var hs=this.bitsCached,lo=this.cachedData;hs<us;){var co=this.stream.getByte();if(co===-1)return this.eof=!0,null;lo=lo<<8|co,hs+=8}return this.bitsCached=hs-=us,this.cachedData=lo,lo>>>hs&(1<<us)-1},is}(DecodeStream),RunLengthStream=function(cs){__extends(is,cs);function is(us,hs){var lo=cs.call(this,hs)||this;return lo.stream=us,lo}return is.prototype.readBlock=function(){var us=this.stream.getBytes(2);if(!us||us.length<2||us[0]===128){this.eof=!0;return}var hs,lo=this.bufferLength,co=us[0];if(co<128){if(hs=this.ensureBuffer(lo+co+1),hs[lo++]=us[1],co>0){var uo=this.stream.getBytes(co);hs.set(uo,lo),lo+=co}}else{co=257-co;var ga=us[1];hs=this.ensureBuffer(lo+co+1);for(var ba=0;ba<co;ba++)hs[lo++]=ga}this.bufferLength=lo},is}(DecodeStream),decodeStream=function(cs,is,us){if(is===PDFName.of("FlateDecode"))return new FlateStream(cs);if(is===PDFName.of("LZWDecode")){var hs=1;if(us instanceof PDFDict){var lo=us.lookup(PDFName.of("EarlyChange"));lo instanceof PDFNumber&&(hs=lo.asNumber())}return new LZWStream(cs,void 0,hs)}if(is===PDFName.of("ASCII85Decode"))return new Ascii85Stream(cs);if(is===PDFName.of("ASCIIHexDecode"))return new AsciiHexStream(cs);if(is===PDFName.of("RunLengthDecode"))return new RunLengthStream(cs);throw new UnsupportedEncodingError(is.asString())},decodePDFRawStream=function(cs){var is=cs.dict,us=cs.contents,hs=new Stream(us),lo=is.lookup(PDFName.of("Filter")),co=is.lookup(PDFName.of("DecodeParms"));if(lo instanceof PDFName)hs=decodeStream(hs,lo,co);else if(lo instanceof PDFArray)for(var uo=0,ga=lo.size();uo<ga;uo++)hs=decodeStream(hs,lo.lookup(uo,PDFName),co&&co.lookupMaybe(uo,PDFDict));else if(lo)throw new UnexpectedObjectTypeError([PDFName,PDFArray],lo);return hs},fullPageBoundingBox=function(cs){var is=cs.MediaBox(),us=is.lookup(2,PDFNumber).asNumber()-is.lookup(0,PDFNumber).asNumber(),hs=is.lookup(3,PDFNumber).asNumber()-is.lookup(1,PDFNumber).asNumber();return{left:0,bottom:0,right:us,top:hs}},boundingBoxAdjustedMatrix=function(cs){return[1,0,0,1,-cs.left,-cs.bottom]},PDFPageEmbedder=function(){function cs(is,us,hs){this.page=is;var lo=us??fullPageBoundingBox(is);this.width=lo.right-lo.left,this.height=lo.top-lo.bottom,this.boundingBox=lo,this.transformationMatrix=hs??boundingBoxAdjustedMatrix(lo)}return cs.for=function(is,us,hs){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(lo){return[2,new cs(is,us,hs)]})})},cs.prototype.embedIntoContext=function(is,us){return __awaiter(this,void 0,void 0,function(){var hs,lo,co,uo,ga,ba,xa,_a,$a,xl;return __generator(this,function(yl){if(hs=this.page.normalizedEntries(),lo=hs.Contents,co=hs.Resources,!lo)throw new MissingPageContentsEmbeddingError;return uo=this.decodeContents(lo),ga=this.boundingBox,ba=ga.left,xa=ga.bottom,_a=ga.right,$a=ga.top,xl=is.flateStream(uo,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[ba,xa,_a,$a],Matrix:this.transformationMatrix,Resources:co}),us?(is.assign(us,xl),[2,us]):[2,is.register(xl)]})})},cs.prototype.decodeContents=function(is){for(var us=Uint8Array.of(CharCodes$1.Newline),hs=[],lo=0,co=is.size();lo<co;lo++){var uo=is.lookup(lo,PDFStream),ga=void 0;if(uo instanceof PDFRawStream)ga=decodePDFRawStream(uo).decode();else if(uo instanceof PDFContentStream)ga=uo.getUnencodedContents();else throw new UnrecognizedStreamTypeError(uo);hs.push(ga,us)}return mergeIntoTypedArray.apply(void 0,hs)},cs}(),asEnum=function(cs,is){if(cs!==void 0)return is[cs]},NonFullScreenPageMode;(function(cs){cs.UseNone="UseNone",cs.UseOutlines="UseOutlines",cs.UseThumbs="UseThumbs",cs.UseOC="UseOC"})(NonFullScreenPageMode||(NonFullScreenPageMode={}));var ReadingDirection;(function(cs){cs.L2R="L2R",cs.R2L="R2L"})(ReadingDirection||(ReadingDirection={}));var PrintScaling;(function(cs){cs.None="None",cs.AppDefault="AppDefault"})(PrintScaling||(PrintScaling={}));var Duplex;(function(cs){cs.Simplex="Simplex",cs.DuplexFlipShortEdge="DuplexFlipShortEdge",cs.DuplexFlipLongEdge="DuplexFlipLongEdge"})(Duplex||(Duplex={}));var ViewerPreferences=function(){function cs(is){this.dict=is}return cs.prototype.lookupBool=function(is){var us=this.dict.lookup(PDFName.of(is));if(us instanceof PDFBool)return us},cs.prototype.lookupName=function(is){var us=this.dict.lookup(PDFName.of(is));if(us instanceof PDFName)return us},cs.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},cs.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},cs.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},cs.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},cs.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},cs.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},cs.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},cs.prototype.Direction=function(){return this.lookupName("Direction")},cs.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},cs.prototype.Duplex=function(){return this.lookupName("Duplex")},cs.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},cs.prototype.PrintPageRange=function(){var is=this.dict.lookup(PDFName.of("PrintPageRange"));if(is instanceof PDFArray)return is},cs.prototype.NumCopies=function(){var is=this.dict.lookup(PDFName.of("NumCopies"));if(is instanceof PDFNumber)return is},cs.prototype.getHideToolbar=function(){var is,us;return(us=(is=this.HideToolbar())===null||is===void 0?void 0:is.asBoolean())!==null&&us!==void 0?us:!1},cs.prototype.getHideMenubar=function(){var is,us;return(us=(is=this.HideMenubar())===null||is===void 0?void 0:is.asBoolean())!==null&&us!==void 0?us:!1},cs.prototype.getHideWindowUI=function(){var is,us;return(us=(is=this.HideWindowUI())===null||is===void 0?void 0:is.asBoolean())!==null&&us!==void 0?us:!1},cs.prototype.getFitWindow=function(){var is,us;return(us=(is=this.FitWindow())===null||is===void 0?void 0:is.asBoolean())!==null&&us!==void 0?us:!1},cs.prototype.getCenterWindow=function(){var is,us;return(us=(is=this.CenterWindow())===null||is===void 0?void 0:is.asBoolean())!==null&&us!==void 0?us:!1},cs.prototype.getDisplayDocTitle=function(){var is,us;return(us=(is=this.DisplayDocTitle())===null||is===void 0?void 0:is.asBoolean())!==null&&us!==void 0?us:!1},cs.prototype.getNonFullScreenPageMode=function(){var is,us,hs=(is=this.NonFullScreenPageMode())===null||is===void 0?void 0:is.decodeText();return(us=asEnum(hs,NonFullScreenPageMode))!==null&&us!==void 0?us:NonFullScreenPageMode.UseNone},cs.prototype.getReadingDirection=function(){var is,us,hs=(is=this.Direction())===null||is===void 0?void 0:is.decodeText();return(us=asEnum(hs,ReadingDirection))!==null&&us!==void 0?us:ReadingDirection.L2R},cs.prototype.getPrintScaling=function(){var is,us,hs=(is=this.PrintScaling())===null||is===void 0?void 0:is.decodeText();return(us=asEnum(hs,PrintScaling))!==null&&us!==void 0?us:PrintScaling.AppDefault},cs.prototype.getDuplex=function(){var is,us=(is=this.Duplex())===null||is===void 0?void 0:is.decodeText();return asEnum(us,Duplex)},cs.prototype.getPickTrayByPDFSize=function(){var is;return(is=this.PickTrayByPDFSize())===null||is===void 0?void 0:is.asBoolean()},cs.prototype.getPrintPageRange=function(){var is=this.PrintPageRange();if(!is)return[];for(var us=[],hs=0;hs<is.size();hs+=2){var lo=is.lookup(hs,PDFNumber).asNumber(),co=is.lookup(hs+1,PDFNumber).asNumber();us.push({start:lo,end:co})}return us},cs.prototype.getNumCopies=function(){var is,us;return(us=(is=this.NumCopies())===null||is===void 0?void 0:is.asNumber())!==null&&us!==void 0?us:1},cs.prototype.setHideToolbar=function(is){var us=this.dict.context.obj(is);this.dict.set(PDFName.of("HideToolbar"),us)},cs.prototype.setHideMenubar=function(is){var us=this.dict.context.obj(is);this.dict.set(PDFName.of("HideMenubar"),us)},cs.prototype.setHideWindowUI=function(is){var us=this.dict.context.obj(is);this.dict.set(PDFName.of("HideWindowUI"),us)},cs.prototype.setFitWindow=function(is){var us=this.dict.context.obj(is);this.dict.set(PDFName.of("FitWindow"),us)},cs.prototype.setCenterWindow=function(is){var us=this.dict.context.obj(is);this.dict.set(PDFName.of("CenterWindow"),us)},cs.prototype.setDisplayDocTitle=function(is){var us=this.dict.context.obj(is);this.dict.set(PDFName.of("DisplayDocTitle"),us)},cs.prototype.setNonFullScreenPageMode=function(is){assertIsOneOf(is,"nonFullScreenPageMode",NonFullScreenPageMode);var us=PDFName.of(is);this.dict.set(PDFName.of("NonFullScreenPageMode"),us)},cs.prototype.setReadingDirection=function(is){assertIsOneOf(is,"readingDirection",ReadingDirection);var us=PDFName.of(is);this.dict.set(PDFName.of("Direction"),us)},cs.prototype.setPrintScaling=function(is){assertIsOneOf(is,"printScaling",PrintScaling);var us=PDFName.of(is);this.dict.set(PDFName.of("PrintScaling"),us)},cs.prototype.setDuplex=function(is){assertIsOneOf(is,"duplex",Duplex);var us=PDFName.of(is);this.dict.set(PDFName.of("Duplex"),us)},cs.prototype.setPickTrayByPDFSize=function(is){var us=this.dict.context.obj(is);this.dict.set(PDFName.of("PickTrayByPDFSize"),us)},cs.prototype.setPrintPageRange=function(is){Array.isArray(is)||(is=[is]);for(var us=[],hs=0,lo=is.length;hs<lo;hs++)us.push(is[hs].start),us.push(is[hs].end);assertEachIs(us,"printPageRange",["number"]);var co=this.dict.context.obj(us);this.dict.set(PDFName.of("PrintPageRange"),co)},cs.prototype.setNumCopies=function(is){assertRange(is,"numCopies",1,Number.MAX_VALUE),assertInteger(is,"numCopies");var us=this.dict.context.obj(is);this.dict.set(PDFName.of("NumCopies"),us)},cs.fromDict=function(is){return new cs(is)},cs.create=function(is){var us=is.obj({});return new cs(us)},cs}(),tfRegex$1=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/,PDFAcroField=function(){function cs(is,us){this.dict=is,this.ref=us}return cs.prototype.T=function(){return this.dict.lookupMaybe(PDFName.of("T"),PDFString,PDFHexString)},cs.prototype.Ff=function(){var is=this.getInheritableAttribute(PDFName.of("Ff"));return this.dict.context.lookupMaybe(is,PDFNumber)},cs.prototype.V=function(){var is=this.getInheritableAttribute(PDFName.of("V"));return this.dict.context.lookup(is)},cs.prototype.Kids=function(){return this.dict.lookupMaybe(PDFName.of("Kids"),PDFArray)},cs.prototype.DA=function(){var is=this.dict.lookup(PDFName.of("DA"));if(is instanceof PDFString||is instanceof PDFHexString)return is},cs.prototype.setKids=function(is){this.dict.set(PDFName.of("Kids"),this.dict.context.obj(is))},cs.prototype.getParent=function(){var is=this.dict.get(PDFName.of("Parent"));if(is instanceof PDFRef){var us=this.dict.lookup(PDFName.of("Parent"),PDFDict);return new cs(us,is)}},cs.prototype.setParent=function(is){is?this.dict.set(PDFName.of("Parent"),is):this.dict.delete(PDFName.of("Parent"))},cs.prototype.getFullyQualifiedName=function(){var is=this.getParent();return is?is.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},cs.prototype.getPartialName=function(){var is;return(is=this.T())===null||is===void 0?void 0:is.decodeText()},cs.prototype.setPartialName=function(is){is?this.dict.set(PDFName.of("T"),PDFHexString.fromText(is)):this.dict.delete(PDFName.of("T"))},cs.prototype.setDefaultAppearance=function(is){this.dict.set(PDFName.of("DA"),PDFString.of(is))},cs.prototype.getDefaultAppearance=function(){var is=this.DA();return is instanceof PDFHexString?is.decodeText():is==null?void 0:is.asString()},cs.prototype.setFontSize=function(is){var us,hs=(us=this.getFullyQualifiedName())!==null&&us!==void 0?us:"",lo=this.getDefaultAppearance();if(!lo)throw new MissingDAEntryError(hs);var co=findLastMatch(lo,tfRegex$1);if(!co.match)throw new MissingTfOperatorError(hs);var uo=lo.slice(0,co.pos-co.match[0].length),ga=co.pos<=lo.length?lo.slice(co.pos):"",ba=co.match[1],xa=uo+" /"+ba+" "+is+" Tf "+ga;this.setDefaultAppearance(xa)},cs.prototype.getFlags=function(){var is,us;return(us=(is=this.Ff())===null||is===void 0?void 0:is.asNumber())!==null&&us!==void 0?us:0},cs.prototype.setFlags=function(is){this.dict.set(PDFName.of("Ff"),PDFNumber.of(is))},cs.prototype.hasFlag=function(is){var us=this.getFlags();return(us&is)!==0},cs.prototype.setFlag=function(is){var us=this.getFlags();this.setFlags(us|is)},cs.prototype.clearFlag=function(is){var us=this.getFlags();this.setFlags(us&~is)},cs.prototype.setFlagTo=function(is,us){us?this.setFlag(is):this.clearFlag(is)},cs.prototype.getInheritableAttribute=function(is){var us;return this.ascend(function(hs){us||(us=hs.dict.get(is))}),us},cs.prototype.ascend=function(is){is(this);var us=this.getParent();us&&us.ascend(is)},cs}(),BorderStyle=function(){function cs(is){this.dict=is}return cs.prototype.W=function(){var is=this.dict.lookup(PDFName.of("W"));if(is instanceof PDFNumber)return is},cs.prototype.getWidth=function(){var is,us;return(us=(is=this.W())===null||is===void 0?void 0:is.asNumber())!==null&&us!==void 0?us:1},cs.prototype.setWidth=function(is){var us=this.dict.context.obj(is);this.dict.set(PDFName.of("W"),us)},cs.fromDict=function(is){return new cs(is)},cs}(),PDFAnnotation=function(){function cs(is){this.dict=is}return cs.prototype.Rect=function(){return this.dict.lookup(PDFName.of("Rect"),PDFArray)},cs.prototype.AP=function(){return this.dict.lookupMaybe(PDFName.of("AP"),PDFDict)},cs.prototype.F=function(){var is=this.dict.lookup(PDFName.of("F"));return this.dict.context.lookupMaybe(is,PDFNumber)},cs.prototype.getRectangle=function(){var is,us=this.Rect();return(is=us==null?void 0:us.asRectangle())!==null&&is!==void 0?is:{x:0,y:0,width:0,height:0}},cs.prototype.setRectangle=function(is){var us=is.x,hs=is.y,lo=is.width,co=is.height,uo=this.dict.context.obj([us,hs,us+lo,hs+co]);this.dict.set(PDFName.of("Rect"),uo)},cs.prototype.getAppearanceState=function(){var is=this.dict.lookup(PDFName.of("AS"));if(is instanceof PDFName)return is},cs.prototype.setAppearanceState=function(is){this.dict.set(PDFName.of("AS"),is)},cs.prototype.setAppearances=function(is){this.dict.set(PDFName.of("AP"),is)},cs.prototype.ensureAP=function(){var is=this.AP();return is||(is=this.dict.context.obj({}),this.dict.set(PDFName.of("AP"),is)),is},cs.prototype.getNormalAppearance=function(){var is=this.ensureAP(),us=is.get(PDFName.of("N"));if(us instanceof PDFRef||us instanceof PDFDict)return us;throw new Error("Unexpected N type: "+(us==null?void 0:us.constructor.name))},cs.prototype.setNormalAppearance=function(is){var us=this.ensureAP();us.set(PDFName.of("N"),is)},cs.prototype.setRolloverAppearance=function(is){var us=this.ensureAP();us.set(PDFName.of("R"),is)},cs.prototype.setDownAppearance=function(is){var us=this.ensureAP();us.set(PDFName.of("D"),is)},cs.prototype.removeRolloverAppearance=function(){var is=this.AP();is==null||is.delete(PDFName.of("R"))},cs.prototype.removeDownAppearance=function(){var is=this.AP();is==null||is.delete(PDFName.of("D"))},cs.prototype.getAppearances=function(){var is=this.AP();if(is){var us=is.lookup(PDFName.of("N"),PDFDict,PDFStream),hs=is.lookupMaybe(PDFName.of("R"),PDFDict,PDFStream),lo=is.lookupMaybe(PDFName.of("D"),PDFDict,PDFStream);return{normal:us,rollover:hs,down:lo}}},cs.prototype.getFlags=function(){var is,us;return(us=(is=this.F())===null||is===void 0?void 0:is.asNumber())!==null&&us!==void 0?us:0},cs.prototype.setFlags=function(is){this.dict.set(PDFName.of("F"),PDFNumber.of(is))},cs.prototype.hasFlag=function(is){var us=this.getFlags();return(us&is)!==0},cs.prototype.setFlag=function(is){var us=this.getFlags();this.setFlags(us|is)},cs.prototype.clearFlag=function(is){var us=this.getFlags();this.setFlags(us&~is)},cs.prototype.setFlagTo=function(is,us){us?this.setFlag(is):this.clearFlag(is)},cs.fromDict=function(is){return new cs(is)},cs}(),AppearanceCharacteristics=function(){function cs(is){this.dict=is}return cs.prototype.R=function(){var is=this.dict.lookup(PDFName.of("R"));if(is instanceof PDFNumber)return is},cs.prototype.BC=function(){var is=this.dict.lookup(PDFName.of("BC"));if(is instanceof PDFArray)return is},cs.prototype.BG=function(){var is=this.dict.lookup(PDFName.of("BG"));if(is instanceof PDFArray)return is},cs.prototype.CA=function(){var is=this.dict.lookup(PDFName.of("CA"));if(is instanceof PDFHexString||is instanceof PDFString)return is},cs.prototype.RC=function(){var is=this.dict.lookup(PDFName.of("RC"));if(is instanceof PDFHexString||is instanceof PDFString)return is},cs.prototype.AC=function(){var is=this.dict.lookup(PDFName.of("AC"));if(is instanceof PDFHexString||is instanceof PDFString)return is},cs.prototype.getRotation=function(){var is;return(is=this.R())===null||is===void 0?void 0:is.asNumber()},cs.prototype.getBorderColor=function(){var is=this.BC();if(is){for(var us=[],hs=0,lo=is==null?void 0:is.size();hs<lo;hs++){var co=is.get(hs);co instanceof PDFNumber&&us.push(co.asNumber())}return us}},cs.prototype.getBackgroundColor=function(){var is=this.BG();if(is){for(var us=[],hs=0,lo=is==null?void 0:is.size();hs<lo;hs++){var co=is.get(hs);co instanceof PDFNumber&&us.push(co.asNumber())}return us}},cs.prototype.getCaptions=function(){var is=this.CA(),us=this.RC(),hs=this.AC();return{normal:is==null?void 0:is.decodeText(),rollover:us==null?void 0:us.decodeText(),down:hs==null?void 0:hs.decodeText()}},cs.prototype.setRotation=function(is){var us=this.dict.context.obj(is);this.dict.set(PDFName.of("R"),us)},cs.prototype.setBorderColor=function(is){var us=this.dict.context.obj(is);this.dict.set(PDFName.of("BC"),us)},cs.prototype.setBackgroundColor=function(is){var us=this.dict.context.obj(is);this.dict.set(PDFName.of("BG"),us)},cs.prototype.setCaptions=function(is){var us=PDFHexString.fromText(is.normal);if(this.dict.set(PDFName.of("CA"),us),is.rollover){var hs=PDFHexString.fromText(is.rollover);this.dict.set(PDFName.of("RC"),hs)}else this.dict.delete(PDFName.of("RC"));if(is.down){var lo=PDFHexString.fromText(is.down);this.dict.set(PDFName.of("AC"),lo)}else this.dict.delete(PDFName.of("AC"))},cs.fromDict=function(is){return new cs(is)},cs}(),PDFWidgetAnnotation=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.prototype.MK=function(){var us=this.dict.lookup(PDFName.of("MK"));if(us instanceof PDFDict)return us},is.prototype.BS=function(){var us=this.dict.lookup(PDFName.of("BS"));if(us instanceof PDFDict)return us},is.prototype.DA=function(){var us=this.dict.lookup(PDFName.of("DA"));if(us instanceof PDFString||us instanceof PDFHexString)return us},is.prototype.P=function(){var us=this.dict.get(PDFName.of("P"));if(us instanceof PDFRef)return us},is.prototype.setP=function(us){this.dict.set(PDFName.of("P"),us)},is.prototype.setDefaultAppearance=function(us){this.dict.set(PDFName.of("DA"),PDFString.of(us))},is.prototype.getDefaultAppearance=function(){var us=this.DA();return us instanceof PDFHexString?us.decodeText():us==null?void 0:us.asString()},is.prototype.getAppearanceCharacteristics=function(){var us=this.MK();if(us)return AppearanceCharacteristics.fromDict(us)},is.prototype.getOrCreateAppearanceCharacteristics=function(){var us=this.MK();if(us)return AppearanceCharacteristics.fromDict(us);var hs=AppearanceCharacteristics.fromDict(this.dict.context.obj({}));return this.dict.set(PDFName.of("MK"),hs.dict),hs},is.prototype.getBorderStyle=function(){var us=this.BS();if(us)return BorderStyle.fromDict(us)},is.prototype.getOrCreateBorderStyle=function(){var us=this.BS();if(us)return BorderStyle.fromDict(us);var hs=BorderStyle.fromDict(this.dict.context.obj({}));return this.dict.set(PDFName.of("BS"),hs.dict),hs},is.prototype.getOnValue=function(){var us,hs=(us=this.getAppearances())===null||us===void 0?void 0:us.normal;if(hs instanceof PDFDict)for(var lo=hs.keys(),co=0,uo=lo.length;co<uo;co++){var ga=lo[co];if(ga!==PDFName.of("Off"))return ga}},is.fromDict=function(us){return new is(us)},is.create=function(us,hs){var lo=us.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:hs});return new is(lo)},is}(PDFAnnotation),PDFAcroTerminal=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.prototype.FT=function(){var us=this.getInheritableAttribute(PDFName.of("FT"));return this.dict.context.lookup(us,PDFName)},is.prototype.getWidgets=function(){var us=this.Kids();if(!us)return[PDFWidgetAnnotation.fromDict(this.dict)];for(var hs=new Array(us.size()),lo=0,co=us.size();lo<co;lo++){var uo=us.lookup(lo,PDFDict);hs[lo]=PDFWidgetAnnotation.fromDict(uo)}return hs},is.prototype.addWidget=function(us){var hs=this.normalizedEntries().Kids;hs.push(us)},is.prototype.removeWidget=function(us){var hs=this.Kids();if(hs){if(us<0||us>hs.size())throw new IndexOutOfBoundsError(us,0,hs.size());hs.remove(us)}else{if(us!==0)throw new IndexOutOfBoundsError(us,0,0);this.setKids([])}},is.prototype.normalizedEntries=function(){var us=this.Kids();return us||(us=this.dict.context.obj([this.ref]),this.dict.set(PDFName.of("Kids"),us)),{Kids:us}},is.fromDict=function(us,hs){return new is(us,hs)},is}(PDFAcroField),PDFAcroButton=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.prototype.Opt=function(){return this.dict.lookupMaybe(PDFName.of("Opt"),PDFString,PDFHexString,PDFArray)},is.prototype.setOpt=function(us){this.dict.set(PDFName.of("Opt"),this.dict.context.obj(us))},is.prototype.getExportValues=function(){var us=this.Opt();if(us){if(us instanceof PDFString||us instanceof PDFHexString)return[us];for(var hs=[],lo=0,co=us.size();lo<co;lo++){var uo=us.lookup(lo);(uo instanceof PDFString||uo instanceof PDFHexString)&&hs.push(uo)}return hs}},is.prototype.removeExportValue=function(us){var hs=this.Opt();if(hs)if(hs instanceof PDFString||hs instanceof PDFHexString){if(us!==0)throw new IndexOutOfBoundsError(us,0,0);this.setOpt([])}else{if(us<0||us>hs.size())throw new IndexOutOfBoundsError(us,0,hs.size());hs.remove(us)}},is.prototype.normalizeExportValues=function(){for(var us,hs,lo,co,uo=(us=this.getExportValues())!==null&&us!==void 0?us:[],ga=[],ba=this.getWidgets(),xa=0,_a=ba.length;xa<_a;xa++){var $a=ba[xa],xl=(hs=uo[xa])!==null&&hs!==void 0?hs:PDFHexString.fromText((co=(lo=$a.getOnValue())===null||lo===void 0?void 0:lo.decodeText())!==null&&co!==void 0?co:"");ga.push(xl)}this.setOpt(ga)},is.prototype.addOpt=function(us,hs){var lo;this.normalizeExportValues();var co=us.decodeText(),uo;if(hs)for(var ga=(lo=this.getExportValues())!==null&&lo!==void 0?lo:[],ba=0,xa=ga.length;ba<xa;ba++){var _a=ga[ba];_a.decodeText()===co&&(uo=ba)}var $a=this.Opt();return $a.push(us),uo??$a.size()-1},is.prototype.addWidgetWithOpt=function(us,hs,lo){var co=this.addOpt(hs,lo),uo=PDFName.of(String(co));return this.addWidget(us),uo},is}(PDFAcroTerminal),PDFAcroCheckBox=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.prototype.setValue=function(us){var hs,lo=(hs=this.getOnValue())!==null&&hs!==void 0?hs:PDFName.of("Yes");if(us!==lo&&us!==PDFName.of("Off"))throw new InvalidAcroFieldValueError;this.dict.set(PDFName.of("V"),us);for(var co=this.getWidgets(),uo=0,ga=co.length;uo<ga;uo++){var ba=co[uo],xa=ba.getOnValue()===us?us:PDFName.of("Off");ba.setAppearanceState(xa)}},is.prototype.getValue=function(){var us=this.V();return us instanceof PDFName?us:PDFName.of("Off")},is.prototype.getOnValue=function(){var us=this.getWidgets()[0];return us==null?void 0:us.getOnValue()},is.fromDict=function(us,hs){return new is(us,hs)},is.create=function(us){var hs=us.obj({FT:"Btn",Kids:[]}),lo=us.register(hs);return new is(hs,lo)},is}(PDFAcroButton),flag$1=function(cs){return 1<<cs},AcroFieldFlags;(function(cs){cs[cs.ReadOnly=flag$1(0)]="ReadOnly",cs[cs.Required=flag$1(1)]="Required",cs[cs.NoExport=flag$1(2)]="NoExport"})(AcroFieldFlags||(AcroFieldFlags={}));var AcroButtonFlags;(function(cs){cs[cs.NoToggleToOff=flag$1(14)]="NoToggleToOff",cs[cs.Radio=flag$1(15)]="Radio",cs[cs.PushButton=flag$1(16)]="PushButton",cs[cs.RadiosInUnison=flag$1(25)]="RadiosInUnison"})(AcroButtonFlags||(AcroButtonFlags={}));var AcroTextFlags;(function(cs){cs[cs.Multiline=flag$1(12)]="Multiline",cs[cs.Password=flag$1(13)]="Password",cs[cs.FileSelect=flag$1(20)]="FileSelect",cs[cs.DoNotSpellCheck=flag$1(22)]="DoNotSpellCheck",cs[cs.DoNotScroll=flag$1(23)]="DoNotScroll",cs[cs.Comb=flag$1(24)]="Comb",cs[cs.RichText=flag$1(25)]="RichText"})(AcroTextFlags||(AcroTextFlags={}));var AcroChoiceFlags;(function(cs){cs[cs.Combo=flag$1(17)]="Combo",cs[cs.Edit=flag$1(18)]="Edit",cs[cs.Sort=flag$1(19)]="Sort",cs[cs.MultiSelect=flag$1(21)]="MultiSelect",cs[cs.DoNotSpellCheck=flag$1(22)]="DoNotSpellCheck",cs[cs.CommitOnSelChange=flag$1(26)]="CommitOnSelChange"})(AcroChoiceFlags||(AcroChoiceFlags={}));var PDFAcroChoice=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.prototype.setValues=function(us){if(this.hasFlag(AcroChoiceFlags.Combo)&&!this.hasFlag(AcroChoiceFlags.Edit)&&!this.valuesAreValid(us))throw new InvalidAcroFieldValueError;if(us.length===0&&this.dict.delete(PDFName.of("V")),us.length===1&&this.dict.set(PDFName.of("V"),us[0]),us.length>1){if(!this.hasFlag(AcroChoiceFlags.MultiSelect))throw new MultiSelectValueError;this.dict.set(PDFName.of("V"),this.dict.context.obj(us))}this.updateSelectedIndices(us)},is.prototype.valuesAreValid=function(us){for(var hs=this.getOptions(),lo=function(ba,xa){var _a=us[ba].decodeText();if(!hs.find(function($a){return _a===($a.display||$a.value).decodeText()}))return{value:!1}},co=0,uo=us.length;co<uo;co++){var ga=lo(co);if(typeof ga=="object")return ga.value}return!0},is.prototype.updateSelectedIndices=function(us){if(us.length>1){for(var hs=new Array(us.length),lo=this.getOptions(),co=function(ba,xa){var _a=us[ba].decodeText();hs[ba]=lo.findIndex(function($a){return _a===($a.display||$a.value).decodeText()})},uo=0,ga=us.length;uo<ga;uo++)co(uo,ga);this.dict.set(PDFName.of("I"),this.dict.context.obj(hs.sort()))}else this.dict.delete(PDFName.of("I"))},is.prototype.getValues=function(){var us=this.V();if(us instanceof PDFString||us instanceof PDFHexString)return[us];if(us instanceof PDFArray){for(var hs=[],lo=0,co=us.size();lo<co;lo++){var uo=us.lookup(lo);(uo instanceof PDFString||uo instanceof PDFHexString)&&hs.push(uo)}return hs}return[]},is.prototype.Opt=function(){return this.dict.lookupMaybe(PDFName.of("Opt"),PDFString,PDFHexString,PDFArray)},is.prototype.setOptions=function(us){for(var hs=new Array(us.length),lo=0,co=us.length;lo<co;lo++){var uo=us[lo],ga=uo.value,ba=uo.display;hs[lo]=this.dict.context.obj([ga,ba||ga])}this.dict.set(PDFName.of("Opt"),this.dict.context.obj(hs))},is.prototype.getOptions=function(){var us=this.Opt();if(us instanceof PDFString||us instanceof PDFHexString)return[{value:us,display:us}];if(us instanceof PDFArray){for(var hs=[],lo=0,co=us.size();lo<co;lo++){var uo=us.lookup(lo);if((uo instanceof PDFString||uo instanceof PDFHexString)&&hs.push({value:uo,display:uo}),uo instanceof PDFArray&&uo.size()>0){var ga=uo.lookup(0,PDFString,PDFHexString),ba=uo.lookupMaybe(1,PDFString,PDFHexString);hs.push({value:ga,display:ba||ga})}}return hs}return[]},is}(PDFAcroTerminal),PDFAcroComboBox=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.fromDict=function(us,hs){return new is(us,hs)},is.create=function(us){var hs=us.obj({FT:"Ch",Ff:AcroChoiceFlags.Combo,Kids:[]}),lo=us.register(hs);return new is(hs,lo)},is}(PDFAcroChoice),PDFAcroNonTerminal=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.prototype.addField=function(us){var hs=this.normalizedEntries().Kids;hs==null||hs.push(us)},is.prototype.normalizedEntries=function(){var us=this.Kids();return us||(us=this.dict.context.obj([]),this.dict.set(PDFName.of("Kids"),us)),{Kids:us}},is.fromDict=function(us,hs){return new is(us,hs)},is.create=function(us){var hs=us.obj({}),lo=us.register(hs);return new is(hs,lo)},is}(PDFAcroField),PDFAcroSignature=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.fromDict=function(us,hs){return new is(us,hs)},is}(PDFAcroTerminal),PDFAcroText=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.prototype.MaxLen=function(){var us=this.dict.lookup(PDFName.of("MaxLen"));if(us instanceof PDFNumber)return us},is.prototype.Q=function(){var us=this.dict.lookup(PDFName.of("Q"));if(us instanceof PDFNumber)return us},is.prototype.setMaxLength=function(us){this.dict.set(PDFName.of("MaxLen"),PDFNumber.of(us))},is.prototype.removeMaxLength=function(){this.dict.delete(PDFName.of("MaxLen"))},is.prototype.getMaxLength=function(){var us;return(us=this.MaxLen())===null||us===void 0?void 0:us.asNumber()},is.prototype.setQuadding=function(us){this.dict.set(PDFName.of("Q"),PDFNumber.of(us))},is.prototype.getQuadding=function(){var us;return(us=this.Q())===null||us===void 0?void 0:us.asNumber()},is.prototype.setValue=function(us){this.dict.set(PDFName.of("V"),us)},is.prototype.removeValue=function(){this.dict.delete(PDFName.of("V"))},is.prototype.getValue=function(){var us=this.V();if(us instanceof PDFString||us instanceof PDFHexString)return us},is.fromDict=function(us,hs){return new is(us,hs)},is.create=function(us){var hs=us.obj({FT:"Tx",Kids:[]}),lo=us.register(hs);return new is(hs,lo)},is}(PDFAcroTerminal),PDFAcroPushButton=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.fromDict=function(us,hs){return new is(us,hs)},is.create=function(us){var hs=us.obj({FT:"Btn",Ff:AcroButtonFlags.PushButton,Kids:[]}),lo=us.register(hs);return new is(hs,lo)},is}(PDFAcroButton),PDFAcroRadioButton=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.prototype.setValue=function(us){var hs=this.getOnValues();if(!hs.includes(us)&&us!==PDFName.of("Off"))throw new InvalidAcroFieldValueError;this.dict.set(PDFName.of("V"),us);for(var lo=this.getWidgets(),co=0,uo=lo.length;co<uo;co++){var ga=lo[co],ba=ga.getOnValue()===us?us:PDFName.of("Off");ga.setAppearanceState(ba)}},is.prototype.getValue=function(){var us=this.V();return us instanceof PDFName?us:PDFName.of("Off")},is.prototype.getOnValues=function(){for(var us=this.getWidgets(),hs=[],lo=0,co=us.length;lo<co;lo++){var uo=us[lo].getOnValue();uo&&hs.push(uo)}return hs},is.fromDict=function(us,hs){return new is(us,hs)},is.create=function(us){var hs=us.obj({FT:"Btn",Ff:AcroButtonFlags.Radio,Kids:[]}),lo=us.register(hs);return new is(hs,lo)},is}(PDFAcroButton),PDFAcroListBox=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.fromDict=function(us,hs){return new is(us,hs)},is.create=function(us){var hs=us.obj({FT:"Ch",Kids:[]}),lo=us.register(hs);return new is(hs,lo)},is}(PDFAcroChoice),createPDFAcroFields=function(cs){if(!cs)return[];for(var is=[],us=0,hs=cs.size();us<hs;us++){var lo=cs.get(us),co=cs.lookup(us);lo instanceof PDFRef&&co instanceof PDFDict&&is.push([createPDFAcroField(co,lo),lo])}return is},createPDFAcroField=function(cs,is){var us=isNonTerminalAcroField(cs);return us?PDFAcroNonTerminal.fromDict(cs,is):createPDFAcroTerminal(cs,is)},isNonTerminalAcroField=function(cs){var is=cs.lookup(PDFName.of("Kids"));if(is instanceof PDFArray)for(var us=0,hs=is.size();us<hs;us++){var lo=is.lookup(us),co=lo instanceof PDFDict&&lo.has(PDFName.of("T"));if(co)return!0}return!1},createPDFAcroTerminal=function(cs,is){var us=getInheritableAttribute(cs,PDFName.of("FT")),hs=cs.context.lookup(us,PDFName);return hs===PDFName.of("Btn")?createPDFAcroButton(cs,is):hs===PDFName.of("Ch")?createPDFAcroChoice(cs,is):hs===PDFName.of("Tx")?PDFAcroText.fromDict(cs,is):hs===PDFName.of("Sig")?PDFAcroSignature.fromDict(cs,is):PDFAcroTerminal.fromDict(cs,is)},createPDFAcroButton=function(cs,is){var us,hs=getInheritableAttribute(cs,PDFName.of("Ff")),lo=cs.context.lookupMaybe(hs,PDFNumber),co=(us=lo==null?void 0:lo.asNumber())!==null&&us!==void 0?us:0;return flagIsSet(co,AcroButtonFlags.PushButton)?PDFAcroPushButton.fromDict(cs,is):flagIsSet(co,AcroButtonFlags.Radio)?PDFAcroRadioButton.fromDict(cs,is):PDFAcroCheckBox.fromDict(cs,is)},createPDFAcroChoice=function(cs,is){var us,hs=getInheritableAttribute(cs,PDFName.of("Ff")),lo=cs.context.lookupMaybe(hs,PDFNumber),co=(us=lo==null?void 0:lo.asNumber())!==null&&us!==void 0?us:0;return flagIsSet(co,AcroChoiceFlags.Combo)?PDFAcroComboBox.fromDict(cs,is):PDFAcroListBox.fromDict(cs,is)},flagIsSet=function(cs,is){return(cs&is)!==0},getInheritableAttribute=function(cs,is){var us;return ascend(cs,function(hs){us||(us=hs.get(is))}),us},ascend=function(cs,is){is(cs);var us=cs.lookupMaybe(PDFName.of("Parent"),PDFDict);us&&ascend(us,is)},PDFAcroForm=function(){function cs(is){this.dict=is}return cs.prototype.Fields=function(){var is=this.dict.lookup(PDFName.of("Fields"));if(is instanceof PDFArray)return is},cs.prototype.getFields=function(){for(var is=this.normalizedEntries().Fields,us=new Array(is.size()),hs=0,lo=is.size();hs<lo;hs++){var co=is.get(hs),uo=is.lookup(hs,PDFDict);us[hs]=[createPDFAcroField(uo,co),co]}return us},cs.prototype.getAllFields=function(){var is=[],us=function(hs){if(hs)for(var lo=0,co=hs.length;lo<co;lo++){var uo=hs[lo];is.push(uo);var ga=uo[0];ga instanceof PDFAcroNonTerminal&&us(createPDFAcroFields(ga.Kids()))}};return us(this.getFields()),is},cs.prototype.addField=function(is){var us=this.normalizedEntries().Fields;us==null||us.push(is)},cs.prototype.removeField=function(is){var us=is.getParent(),hs=us===void 0?this.normalizedEntries().Fields:us.Kids(),lo=hs==null?void 0:hs.indexOf(is.ref);if(hs===void 0||lo===void 0)throw new Error("Tried to remove inexistent field "+is.getFullyQualifiedName());hs.remove(lo),us!==void 0&&hs.size()===0&&this.removeField(us)},cs.prototype.normalizedEntries=function(){var is=this.Fields();return is||(is=this.dict.context.obj([]),this.dict.set(PDFName.of("Fields"),is)),{Fields:is}},cs.fromDict=function(is){return new cs(is)},cs.create=function(is){var us=is.obj({Fields:[]});return new cs(us)},cs}(),PDFCatalog=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.prototype.Pages=function(){return this.lookup(PDFName.of("Pages"),PDFDict)},is.prototype.AcroForm=function(){return this.lookupMaybe(PDFName.of("AcroForm"),PDFDict)},is.prototype.getAcroForm=function(){var us=this.AcroForm();if(us)return PDFAcroForm.fromDict(us)},is.prototype.getOrCreateAcroForm=function(){var us=this.getAcroForm();if(!us){us=PDFAcroForm.create(this.context);var hs=this.context.register(us.dict);this.set(PDFName.of("AcroForm"),hs)}return us},is.prototype.ViewerPreferences=function(){return this.lookupMaybe(PDFName.of("ViewerPreferences"),PDFDict)},is.prototype.getViewerPreferences=function(){var us=this.ViewerPreferences();if(us)return ViewerPreferences.fromDict(us)},is.prototype.getOrCreateViewerPreferences=function(){var us=this.getViewerPreferences();if(!us){us=ViewerPreferences.create(this.context);var hs=this.context.register(us.dict);this.set(PDFName.of("ViewerPreferences"),hs)}return us},is.prototype.insertLeafNode=function(us,hs){var lo=this.get(PDFName.of("Pages")),co=this.Pages().insertLeafNode(us,hs);return co||lo},is.prototype.removeLeafNode=function(us){this.Pages().removeLeafNode(us)},is.withContextAndPages=function(us,hs){var lo=new Map;return lo.set(PDFName.of("Type"),PDFName.of("Catalog")),lo.set(PDFName.of("Pages"),hs),new is(lo,us)},is.fromMapWithContext=function(us,hs){return new is(us,hs)},is}(PDFDict),PDFPageTree=function(cs){__extends(is,cs);function is(){return cs!==null&&cs.apply(this,arguments)||this}return is.prototype.Parent=function(){return this.lookup(PDFName.of("Parent"))},is.prototype.Kids=function(){return this.lookup(PDFName.of("Kids"),PDFArray)},is.prototype.Count=function(){return this.lookup(PDFName.of("Count"),PDFNumber)},is.prototype.pushTreeNode=function(us){var hs=this.Kids();hs.push(us)},is.prototype.pushLeafNode=function(us){var hs=this.Kids();this.insertLeafKid(hs.size(),us)},is.prototype.insertLeafNode=function(us,hs){var lo=this.Kids(),co=this.Count().asNumber();if(hs>co)throw new InvalidTargetIndexError(hs,co);for(var uo=hs,ga=0,ba=lo.size();ga<ba;ga++){if(uo===0){this.insertLeafKid(ga,us);return}var xa=lo.get(ga),_a=this.context.lookup(xa);if(_a instanceof is){if(_a.Count().asNumber()>uo)return _a.insertLeafNode(us,uo)||xa;uo-=_a.Count().asNumber()}_a instanceof PDFPageLeaf&&(uo-=1)}if(uo===0){this.insertLeafKid(lo.size(),us);return}throw new CorruptPageTreeError(hs,"insertLeafNode")},is.prototype.removeLeafNode=function(us,hs){hs===void 0&&(hs=!0);var lo=this.Kids(),co=this.Count().asNumber();if(us>=co)throw new InvalidTargetIndexError(us,co);for(var uo=us,ga=0,ba=lo.size();ga<ba;ga++){var xa=lo.get(ga),_a=this.context.lookup(xa);if(_a instanceof is)if(_a.Count().asNumber()>uo){_a.removeLeafNode(uo,hs),hs&&_a.Kids().size()===0&&lo.remove(ga);return}else uo-=_a.Count().asNumber();if(_a instanceof PDFPageLeaf)if(uo===0){this.removeKid(ga);return}else uo-=1}throw new CorruptPageTreeError(us,"removeLeafNode")},is.prototype.ascend=function(us){us(this);var hs=this.Parent();hs&&hs.ascend(us)},is.prototype.traverse=function(us){for(var hs=this.Kids(),lo=0,co=hs.size();lo<co;lo++){var uo=hs.get(lo),ga=this.context.lookup(uo);ga instanceof is&&ga.traverse(us),us(ga,uo)}},is.prototype.insertLeafKid=function(us,hs){var lo=this.Kids();this.ascend(function(co){var uo=co.Count().asNumber()+1;co.set(PDFName.of("Count"),PDFNumber.of(uo))}),lo.insert(us,hs)},is.prototype.removeKid=function(us){var hs=this.Kids(),lo=hs.lookup(us);lo instanceof PDFPageLeaf&&this.ascend(function(co){var uo=co.Count().asNumber()-1;co.set(PDFName.of("Count"),PDFNumber.of(uo))}),hs.remove(us)},is.withContext=function(us,hs){var lo=new Map;return lo.set(PDFName.of("Type"),PDFName.of("Pages")),lo.set(PDFName.of("Kids"),us.obj([])),lo.set(PDFName.of("Count"),us.obj(0)),hs&&lo.set(PDFName.of("Parent"),hs),new is(lo,us)},is.fromMapWithContext=function(us,hs){return new is(us,hs)},is}(PDFDict),IsDigit=new Uint8Array(256);IsDigit[CharCodes$1.Zero]=1;IsDigit[CharCodes$1.One]=1;IsDigit[CharCodes$1.Two]=1;IsDigit[CharCodes$1.Three]=1;IsDigit[CharCodes$1.Four]=1;IsDigit[CharCodes$1.Five]=1;IsDigit[CharCodes$1.Six]=1;IsDigit[CharCodes$1.Seven]=1;IsDigit[CharCodes$1.Eight]=1;IsDigit[CharCodes$1.Nine]=1;var IsNumericPrefix=new Uint8Array(256);IsNumericPrefix[CharCodes$1.Period]=1;IsNumericPrefix[CharCodes$1.Plus]=1;IsNumericPrefix[CharCodes$1.Minus]=1;var IsNumeric=new Uint8Array(256);for(var idx=0,len=256;idx<len;idx++)IsNumeric[idx]=IsDigit[idx]||IsNumericPrefix[idx]?1:0;var Newline$1=CharCodes$1.Newline,CarriageReturn$1=CharCodes$1.CarriageReturn,BaseParser=function(){function cs(is,us){us===void 0&&(us=!1),this.bytes=is,this.capNumbers=us}return cs.prototype.parseRawInt=function(){for(var is="";!this.bytes.done();){var us=this.bytes.peek();if(!IsDigit[us])break;is+=charFromCode(this.bytes.next())}var hs=Number(is);if(!is||!isFinite(hs))throw new NumberParsingError(this.bytes.position(),is);return hs},cs.prototype.parseRawNumber=function(){for(var is="";!this.bytes.done();){var us=this.bytes.peek();if(!IsNumeric[us]||(is+=charFromCode(this.bytes.next()),us===CharCodes$1.Period))break}for(;!this.bytes.done();){var us=this.bytes.peek();if(!IsDigit[us])break;is+=charFromCode(this.bytes.next())}var hs=Number(is);if(!is||!isFinite(hs))throw new NumberParsingError(this.bytes.position(),is);if(hs>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var lo="Parsed number that is too large for some PDF readers: "+is+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(lo),Number.MAX_SAFE_INTEGER}else{var lo="Parsed number that is too large for some PDF readers: "+is+", not capping.";console.warn(lo)}return hs},cs.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&IsWhitespace[this.bytes.peek()];)this.bytes.next()},cs.prototype.skipLine=function(){for(;!this.bytes.done();){var is=this.bytes.peek();if(is===Newline$1||is===CarriageReturn$1)return;this.bytes.next()}},cs.prototype.skipComment=function(){if(this.bytes.peek()!==CharCodes$1.Percent)return!1;for(;!this.bytes.done();){var is=this.bytes.peek();if(is===Newline$1||is===CarriageReturn$1)return!0;this.bytes.next()}return!0},cs.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},cs.prototype.matchKeyword=function(is){for(var us=this.bytes.offset(),hs=0,lo=is.length;hs<lo;hs++)if(this.bytes.done()||this.bytes.next()!==is[hs])return this.bytes.moveTo(us),!1;return!0},cs}(),ByteStream=function(){function cs(is){this.idx=0,this.line=0,this.column=0,this.bytes=is,this.length=this.bytes.length}return cs.prototype.moveTo=function(is){this.idx=is},cs.prototype.next=function(){var is=this.bytes[this.idx++];return is===CharCodes$1.Newline?(this.line+=1,this.column=0):this.column+=1,is},cs.prototype.assertNext=function(is){if(this.peek()!==is)throw new NextByteAssertionError(this.position(),is,this.peek());return this.next()},cs.prototype.peek=function(){return this.bytes[this.idx]},cs.prototype.peekAhead=function(is){return this.bytes[this.idx+is]},cs.prototype.peekAt=function(is){return this.bytes[is]},cs.prototype.done=function(){return this.idx>=this.length},cs.prototype.offset=function(){return this.idx},cs.prototype.slice=function(is,us){return this.bytes.slice(is,us)},cs.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},cs.of=function(is){return new cs(is)},cs.fromPDFRawStream=function(is){return cs.of(decodePDFRawStream(is).decode())},cs}(),Space=CharCodes$1.Space,CarriageReturn=CharCodes$1.CarriageReturn,Newline=CharCodes$1.Newline,stream=[CharCodes$1.s,CharCodes$1.t,CharCodes$1.r,CharCodes$1.e,CharCodes$1.a,CharCodes$1.m],endstream=[CharCodes$1.e,CharCodes$1.n,CharCodes$1.d,CharCodes$1.s,CharCodes$1.t,CharCodes$1.r,CharCodes$1.e,CharCodes$1.a,CharCodes$1.m],Keywords={header:[CharCodes$1.Percent,CharCodes$1.P,CharCodes$1.D,CharCodes$1.F,CharCodes$1.Dash],eof:[CharCodes$1.Percent,CharCodes$1.Percent,CharCodes$1.E,CharCodes$1.O,CharCodes$1.F],obj:[CharCodes$1.o,CharCodes$1.b,CharCodes$1.j],endobj:[CharCodes$1.e,CharCodes$1.n,CharCodes$1.d,CharCodes$1.o,CharCodes$1.b,CharCodes$1.j],xref:[CharCodes$1.x,CharCodes$1.r,CharCodes$1.e,CharCodes$1.f],trailer:[CharCodes$1.t,CharCodes$1.r,CharCodes$1.a,CharCodes$1.i,CharCodes$1.l,CharCodes$1.e,CharCodes$1.r],startxref:[CharCodes$1.s,CharCodes$1.t,CharCodes$1.a,CharCodes$1.r,CharCodes$1.t,CharCodes$1.x,CharCodes$1.r,CharCodes$1.e,CharCodes$1.f],true:[CharCodes$1.t,CharCodes$1.r,CharCodes$1.u,CharCodes$1.e],false:[CharCodes$1.f,CharCodes$1.a,CharCodes$1.l,CharCodes$1.s,CharCodes$1.e],null:[CharCodes$1.n,CharCodes$1.u,CharCodes$1.l,CharCodes$1.l],stream,streamEOF1:__spreadArrays(stream,[Space,CarriageReturn,Newline]),streamEOF2:__spreadArrays(stream,[CarriageReturn,Newline]),streamEOF3:__spreadArrays(stream,[CarriageReturn]),streamEOF4:__spreadArrays(stream,[Newline]),endstream,EOF1endstream:__spreadArrays([CarriageReturn,Newline],endstream),EOF2endstream:__spreadArrays([CarriageReturn],endstream),EOF3endstream:__spreadArrays([Newline],endstream)},PDFObjectParser=function(cs){__extends(is,cs);function is(us,hs,lo){lo===void 0&&(lo=!1);var co=cs.call(this,us,lo)||this;return co.context=hs,co}return is.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.true))return PDFBool.True;if(this.matchKeyword(Keywords.false))return PDFBool.False;if(this.matchKeyword(Keywords.null))return PDFNull$1;var us=this.bytes.peek();if(us===CharCodes$1.LessThan&&this.bytes.peekAhead(1)===CharCodes$1.LessThan)return this.parseDictOrStream();if(us===CharCodes$1.LessThan)return this.parseHexString();if(us===CharCodes$1.LeftParen)return this.parseString();if(us===CharCodes$1.ForwardSlash)return this.parseName();if(us===CharCodes$1.LeftSquareBracket)return this.parseArray();if(IsNumeric[us])return this.parseNumberOrRef();throw new PDFObjectParsingError(this.bytes.position(),us)},is.prototype.parseNumberOrRef=function(){var us=this.parseRawNumber();this.skipWhitespaceAndComments();var hs=this.bytes.offset();if(IsDigit[this.bytes.peek()]){var lo=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===CharCodes$1.R)return this.bytes.assertNext(CharCodes$1.R),PDFRef.of(us,lo)}return this.bytes.moveTo(hs),PDFNumber.of(us)},is.prototype.parseHexString=function(){var us="";for(this.bytes.assertNext(CharCodes$1.LessThan);!this.bytes.done()&&this.bytes.peek()!==CharCodes$1.GreaterThan;)us+=charFromCode(this.bytes.next());return this.bytes.assertNext(CharCodes$1.GreaterThan),PDFHexString.of(us)},is.prototype.parseString=function(){for(var us=0,hs=!1,lo="";!this.bytes.done();){var co=this.bytes.next();if(lo+=charFromCode(co),hs||(co===CharCodes$1.LeftParen&&(us+=1),co===CharCodes$1.RightParen&&(us-=1)),co===CharCodes$1.BackSlash?hs=!hs:hs&&(hs=!1),us===0)return PDFString.of(lo.substring(1,lo.length-1))}throw new UnbalancedParenthesisError(this.bytes.position())},is.prototype.parseName=function(){this.bytes.assertNext(CharCodes$1.ForwardSlash);for(var us="";!this.bytes.done();){var hs=this.bytes.peek();if(IsWhitespace[hs]||IsDelimiter[hs])break;us+=charFromCode(hs),this.bytes.next()}return PDFName.of(us)},is.prototype.parseArray=function(){this.bytes.assertNext(CharCodes$1.LeftSquareBracket),this.skipWhitespaceAndComments();for(var us=PDFArray.withContext(this.context);this.bytes.peek()!==CharCodes$1.RightSquareBracket;){var hs=this.parseObject();us.push(hs),this.skipWhitespaceAndComments()}return this.bytes.assertNext(CharCodes$1.RightSquareBracket),us},is.prototype.parseDict=function(){this.bytes.assertNext(CharCodes$1.LessThan),this.bytes.assertNext(CharCodes$1.LessThan),this.skipWhitespaceAndComments();for(var us=new Map;!this.bytes.done()&&this.bytes.peek()!==CharCodes$1.GreaterThan&&this.bytes.peekAhead(1)!==CharCodes$1.GreaterThan;){var hs=this.parseName(),lo=this.parseObject();us.set(hs,lo),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(CharCodes$1.GreaterThan),this.bytes.assertNext(CharCodes$1.GreaterThan);var co=us.get(PDFName.of("Type"));return co===PDFName.of("Catalog")?PDFCatalog.fromMapWithContext(us,this.context):co===PDFName.of("Pages")?PDFPageTree.fromMapWithContext(us,this.context):co===PDFName.of("Page")?PDFPageLeaf.fromMapWithContext(us,this.context):PDFDict.fromMapWithContext(us,this.context)},is.prototype.parseDictOrStream=function(){var us=this.bytes.position(),hs=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Keywords.streamEOF1)&&!this.matchKeyword(Keywords.streamEOF2)&&!this.matchKeyword(Keywords.streamEOF3)&&!this.matchKeyword(Keywords.streamEOF4)&&!this.matchKeyword(Keywords.stream))return hs;var lo=this.bytes.offset(),co,uo=hs.get(PDFName.of("Length"));uo instanceof PDFNumber?(co=lo+uo.asNumber(),this.bytes.moveTo(co),this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.endstream)||(this.bytes.moveTo(lo),co=this.findEndOfStreamFallback(us))):co=this.findEndOfStreamFallback(us);var ga=this.bytes.slice(lo,co);return PDFRawStream.of(hs,ga)},is.prototype.findEndOfStreamFallback=function(us){for(var hs=1,lo=this.bytes.offset();!this.bytes.done()&&(lo=this.bytes.offset(),this.matchKeyword(Keywords.stream)?hs+=1:this.matchKeyword(Keywords.EOF1endstream)||this.matchKeyword(Keywords.EOF2endstream)||this.matchKeyword(Keywords.EOF3endstream)||this.matchKeyword(Keywords.endstream)?hs-=1:this.bytes.next(),hs!==0););if(hs!==0)throw new PDFStreamParsingError(us);return lo},is.forBytes=function(us,hs,lo){return new is(ByteStream.of(us),hs,lo)},is.forByteStream=function(us,hs,lo){return lo===void 0&&(lo=!1),new is(us,hs,lo)},is}(BaseParser),PDFObjectStreamParser=function(cs){__extends(is,cs);function is(us,hs){var lo=cs.call(this,ByteStream.fromPDFRawStream(us),us.dict.context)||this,co=us.dict;return lo.alreadyParsed=!1,lo.shouldWaitForTick=hs||function(){return!1},lo.firstOffset=co.lookup(PDFName.of("First"),PDFNumber).asNumber(),lo.objectCount=co.lookup(PDFName.of("N"),PDFNumber).asNumber(),lo}return is.prototype.parseIntoContext=function(){return __awaiter(this,void 0,void 0,function(){var us,hs,lo,co,uo,ga,ba,xa;return __generator(this,function(_a){switch(_a.label){case 0:if(this.alreadyParsed)throw new ReparseError("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,us=this.parseOffsetsAndObjectNumbers(),hs=0,lo=us.length,_a.label=1;case 1:return hs<lo?(co=us[hs],uo=co.objectNumber,ga=co.offset,this.bytes.moveTo(this.firstOffset+ga),ba=this.parseObject(),xa=PDFRef.of(uo,0),this.context.assign(xa,ba),this.shouldWaitForTick()?[4,waitForTick()]:[3,3]):[3,4];case 2:_a.sent(),_a.label=3;case 3:return hs++,[3,1];case 4:return[2]}})})},is.prototype.parseOffsetsAndObjectNumbers=function(){for(var us=[],hs=0,lo=this.objectCount;hs<lo;hs++){this.skipWhitespaceAndComments();var co=this.parseRawInt();this.skipWhitespaceAndComments();var uo=this.parseRawInt();us.push({objectNumber:co,offset:uo})}return us},is.forStream=function(us,hs){return new is(us,hs)},is}(PDFObjectParser),PDFXRefStreamParser=function(){function cs(is){this.alreadyParsed=!1,this.dict=is.dict,this.bytes=ByteStream.fromPDFRawStream(is),this.context=this.dict.context;var us=this.dict.lookup(PDFName.of("Size"),PDFNumber),hs=this.dict.lookup(PDFName.of("Index"));if(hs instanceof PDFArray){this.subsections=[];for(var lo=0,co=hs.size();lo<co;lo+=2){var uo=hs.lookup(lo+0,PDFNumber).asNumber(),ga=hs.lookup(lo+1,PDFNumber).asNumber();this.subsections.push({firstObjectNumber:uo,length:ga})}}else this.subsections=[{firstObjectNumber:0,length:us.asNumber()}];var ba=this.dict.lookup(PDFName.of("W"),PDFArray);this.byteWidths=[-1,-1,-1];for(var lo=0,co=ba.size();lo<co;lo++)this.byteWidths[lo]=ba.lookup(lo,PDFNumber).asNumber()}return cs.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new ReparseError("PDFXRefStreamParser","parseIntoContext");this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(PDFName.of("Root")),Encrypt:this.dict.get(PDFName.of("Encrypt")),Info:this.dict.get(PDFName.of("Info")),ID:this.dict.get(PDFName.of("ID"))};var is=this.parseEntries();return is},cs.prototype.parseEntries=function(){for(var is=[],us=this.byteWidths,hs=us[0],lo=us[1],co=us[2],uo=0,ga=this.subsections.length;uo<ga;uo++)for(var ba=this.subsections[uo],xa=ba.firstObjectNumber,_a=ba.length,$a=0;$a<_a;$a++){for(var xl=0,yl=0,wl=hs;yl<wl;yl++)xl=xl<<8|this.bytes.next();for(var _l=0,yl=0,wl=lo;yl<wl;yl++)_l=_l<<8|this.bytes.next();for(var El=0,yl=0,wl=co;yl<wl;yl++)El=El<<8|this.bytes.next();hs===0&&(xl=1);var Sl=xa+$a,Cl={ref:PDFRef.of(Sl,El),offset:_l,deleted:xl===0,inObjectStream:xl===2};is.push(Cl)}return is},cs.forStream=function(is){return new cs(is)},cs}(),PDFParser=function(cs){__extends(is,cs);function is(us,hs,lo,co){hs===void 0&&(hs=1/0),lo===void 0&&(lo=!1),co===void 0&&(co=!1);var uo=cs.call(this,ByteStream.of(us),PDFContext.create(),co)||this;return uo.alreadyParsed=!1,uo.parsedObjects=0,uo.shouldWaitForTick=function(){return uo.parsedObjects+=1,uo.parsedObjects%uo.objectsPerTick===0},uo.objectsPerTick=hs,uo.throwOnInvalidObject=lo,uo}return is.prototype.parseDocument=function(){return __awaiter(this,void 0,void 0,function(){var us,hs;return __generator(this,function(lo){switch(lo.label){case 0:if(this.alreadyParsed)throw new ReparseError("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),lo.label=1;case 1:return this.bytes.done()?[3,3]:[4,this.parseDocumentSection()];case 2:if(lo.sent(),hs=this.bytes.offset(),hs===us)throw new StalledParserError(this.bytes.position());return us=hs,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup(PDFRef.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete(PDFRef.of(0))),[2,this.context]}})})},is.prototype.maybeRecoverRoot=function(){var us=function(_a){return _a instanceof PDFDict&&_a.lookup(PDFName.of("Type"))===PDFName.of("Catalog")},hs=this.context.lookup(this.context.trailerInfo.Root);if(!us(hs))for(var lo=this.context.enumerateIndirectObjects(),co=0,uo=lo.length;co<uo;co++){var ga=lo[co],ba=ga[0],xa=ga[1];us(xa)&&(this.context.trailerInfo.Root=ba)}},is.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword(Keywords.header)){var us=this.parseRawInt();this.bytes.assertNext(CharCodes$1.Period);var hs=this.parseRawInt(),lo=PDFHeader.forVersion(us,hs);return this.skipBinaryHeaderComment(),lo}this.bytes.next()}throw new MissingPDFHeaderError(this.bytes.position())},is.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var us=this.parseRawInt();this.skipWhitespaceAndComments();var hs=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Keywords.obj))throw new MissingKeywordError(this.bytes.position(),Keywords.obj);return PDFRef.of(us,hs)},is.prototype.matchIndirectObjectHeader=function(){var us=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch{return this.bytes.moveTo(us),!1}},is.prototype.parseIndirectObject=function(){return __awaiter(this,void 0,void 0,function(){var us,hs;return __generator(this,function(lo){switch(lo.label){case 0:return us=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),hs=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.endobj),hs instanceof PDFRawStream&&hs.dict.lookup(PDFName.of("Type"))===PDFName.of("ObjStm")?[4,PDFObjectStreamParser.forStream(hs,this.shouldWaitForTick).parseIntoContext()]:[3,2];case 1:return lo.sent(),[3,3];case 2:hs instanceof PDFRawStream&&hs.dict.lookup(PDFName.of("Type"))===PDFName.of("XRef")?PDFXRefStreamParser.forStream(hs).parseIntoContext():this.context.assign(us,hs),lo.label=3;case 3:return[2,us]}})})},is.prototype.tryToParseInvalidIndirectObject=function(){var us=this.bytes.position(),hs="Trying to parse invalid object: "+JSON.stringify(us)+")";if(this.throwOnInvalidObject)throw new Error(hs);console.warn(hs);var lo=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+lo),this.skipWhitespaceAndComments();for(var co=this.bytes.offset(),uo=!0;!this.bytes.done()&&(this.matchKeyword(Keywords.endobj)&&(uo=!1),!!uo);)this.bytes.next();if(uo)throw new PDFInvalidObjectParsingError(us);var ga=this.bytes.offset()-Keywords.endobj.length,ba=PDFInvalidObject.of(this.bytes.slice(co,ga));return this.context.assign(lo,ba),lo},is.prototype.parseIndirectObjects=function(){return __awaiter(this,void 0,void 0,function(){var us;return __generator(this,function(hs){switch(hs.label){case 0:this.skipWhitespaceAndComments(),hs.label=1;case 1:if(!(!this.bytes.done()&&IsDigit[this.bytes.peek()]))return[3,8];us=this.bytes.offset(),hs.label=2;case 2:return hs.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return hs.sent(),[3,5];case 4:return hs.sent(),this.bytes.moveTo(us),this.tryToParseInvalidIndirectObject(),[3,5];case 5:return this.skipWhitespaceAndComments(),this.skipJibberish(),this.shouldWaitForTick()?[4,waitForTick()]:[3,7];case 6:hs.sent(),hs.label=7;case 7:return[3,1];case 8:return[2]}})})},is.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Keywords.xref)){this.skipWhitespaceAndComments();for(var us=-1,hs=PDFCrossRefSection.createEmpty();!this.bytes.done()&&IsDigit[this.bytes.peek()];){var lo=this.parseRawInt();this.skipWhitespaceAndComments();var co=this.parseRawInt();this.skipWhitespaceAndComments();var uo=this.bytes.peek();if(uo===CharCodes$1.n||uo===CharCodes$1.f){var ga=PDFRef.of(us,co);this.bytes.next()===CharCodes$1.n?hs.addEntry(ga,lo):hs.addDeletedEntry(ga,lo),us+=1}else us=lo;this.skipWhitespaceAndComments()}return hs}},is.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Keywords.trailer)){this.skipWhitespaceAndComments();var us=this.parseDict(),hs=this.context;hs.trailerInfo={Root:us.get(PDFName.of("Root"))||hs.trailerInfo.Root,Encrypt:us.get(PDFName.of("Encrypt"))||hs.trailerInfo.Encrypt,Info:us.get(PDFName.of("Info"))||hs.trailerInfo.Info,ID:us.get(PDFName.of("ID"))||hs.trailerInfo.ID}}},is.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Keywords.startxref)){this.skipWhitespaceAndComments();var us=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword(Keywords.eof),this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.eof),this.skipWhitespaceAndComments(),PDFTrailer.forLastCrossRefSectionOffset(us)}},is.prototype.parseDocumentSection=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(us){switch(us.label){case 0:return[4,this.parseIndirectObjects()];case 1:return us.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},is.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var us=this.bytes.offset(),hs=this.bytes.peek(),lo=hs>=CharCodes$1.Space&&hs<=CharCodes$1.Tilde;if(lo&&(this.matchKeyword(Keywords.xref)||this.matchKeyword(Keywords.trailer)||this.matchKeyword(Keywords.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(us);break}this.bytes.next()}},is.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var us=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(us)}catch{this.bytes.next(),this.skipWhitespaceAndComments()}},is.forBytesWithOptions=function(us,hs,lo,co){return new is(us,hs,lo,co)},is}(PDFObjectParser),flag=function(cs){return 1<<cs},AnnotationFlags;(function(cs){cs[cs.Invisible=flag(0)]="Invisible",cs[cs.Hidden=flag(1)]="Hidden",cs[cs.Print=flag(2)]="Print",cs[cs.NoZoom=flag(3)]="NoZoom",cs[cs.NoRotate=flag(4)]="NoRotate",cs[cs.NoView=flag(5)]="NoView",cs[cs.ReadOnly=flag(6)]="ReadOnly",cs[cs.Locked=flag(7)]="Locked",cs[cs.ToggleNoView=flag(8)]="ToggleNoView",cs[cs.LockedContents=flag(9)]="LockedContents"})(AnnotationFlags||(AnnotationFlags={}));var asPDFName=function(cs){return cs instanceof PDFName?cs:PDFName.of(cs)},asPDFNumber=function(cs){return cs instanceof PDFNumber?cs:PDFNumber.of(cs)},asNumber=function(cs){return cs instanceof PDFNumber?cs.asNumber():cs},RotationTypes;(function(cs){cs.Degrees="degrees",cs.Radians="radians"})(RotationTypes||(RotationTypes={}));var degrees=function(cs){return assertIs(cs,"degreeAngle",["number"]),{type:RotationTypes.Degrees,angle:cs}},Radians=RotationTypes.Radians,Degrees=RotationTypes.Degrees,degreesToRadians=function(cs){return cs*Math.PI/180},radiansToDegrees=function(cs){return cs*180/Math.PI},toRadians=function(cs){return cs.type===Radians?cs.angle:cs.type===Degrees?degreesToRadians(cs.angle):error("Invalid rotation: "+JSON.stringify(cs))},toDegrees=function(cs){return cs.type===Radians?radiansToDegrees(cs.angle):cs.type===Degrees?cs.angle:error("Invalid rotation: "+JSON.stringify(cs))},reduceRotation=function(cs){cs===void 0&&(cs=0);var is=cs/90%4;return is===0?0:is===1?90:is===2?180:is===3?270:0},adjustDimsForRotation=function(cs,is){is===void 0&&(is=0);var us=reduceRotation(is);return us===90||us===270?{width:cs.height,height:cs.width}:{width:cs.width,height:cs.height}},rotateRectangle=function(cs,is,us){is===void 0&&(is=0),us===void 0&&(us=0);var hs=cs.x,lo=cs.y,co=cs.width,uo=cs.height,ga=reduceRotation(us),ba=is/2;return ga===0?{x:hs-ba,y:lo-ba,width:co,height:uo}:ga===90?{x:hs-uo+ba,y:lo-ba,width:uo,height:co}:ga===180?{x:hs-co+ba,y:lo-uo+ba,width:co,height:uo}:ga===270?{x:hs-ba,y:lo-co+ba,width:uo,height:co}:{x:hs-ba,y:lo-ba,width:co,height:uo}},clip=function(){return PDFOperator.of(Ops.ClipNonZero)},cos=Math.cos,sin=Math.sin,tan=Math.tan,concatTransformationMatrix=function(cs,is,us,hs,lo,co){return PDFOperator.of(Ops.ConcatTransformationMatrix,[asPDFNumber(cs),asPDFNumber(is),asPDFNumber(us),asPDFNumber(hs),asPDFNumber(lo),asPDFNumber(co)])},translate=function(cs,is){return concatTransformationMatrix(1,0,0,1,cs,is)},scale=function(cs,is){return concatTransformationMatrix(cs,0,0,is,0,0)},rotateRadians=function(cs){return concatTransformationMatrix(cos(asNumber(cs)),sin(asNumber(cs)),-sin(asNumber(cs)),cos(asNumber(cs)),0,0)},rotateDegrees=function(cs){return rotateRadians(degreesToRadians(asNumber(cs)))},skewRadians=function(cs,is){return concatTransformationMatrix(1,tan(asNumber(cs)),tan(asNumber(is)),1,0,0)},setDashPattern=function(cs,is){return PDFOperator.of(Ops.SetLineDashPattern,["["+cs.map(asPDFNumber).join(" ")+"]",asPDFNumber(is)])},LineCapStyle;(function(cs){cs[cs.Butt=0]="Butt",cs[cs.Round=1]="Round",cs[cs.Projecting=2]="Projecting"})(LineCapStyle||(LineCapStyle={}));var setLineCap=function(cs){return PDFOperator.of(Ops.SetLineCapStyle,[asPDFNumber(cs)])},LineJoinStyle;(function(cs){cs[cs.Miter=0]="Miter",cs[cs.Round=1]="Round",cs[cs.Bevel=2]="Bevel"})(LineJoinStyle||(LineJoinStyle={}));var setGraphicsState=function(cs){return PDFOperator.of(Ops.SetGraphicsStateParams,[asPDFName(cs)])},pushGraphicsState=function(){return PDFOperator.of(Ops.PushGraphicsState)},popGraphicsState=function(){return PDFOperator.of(Ops.PopGraphicsState)},setLineWidth=function(cs){return PDFOperator.of(Ops.SetLineWidth,[asPDFNumber(cs)])},appendBezierCurve=function(cs,is,us,hs,lo,co){return PDFOperator.of(Ops.AppendBezierCurve,[asPDFNumber(cs),asPDFNumber(is),asPDFNumber(us),asPDFNumber(hs),asPDFNumber(lo),asPDFNumber(co)])},appendQuadraticCurve=function(cs,is,us,hs){return PDFOperator.of(Ops.CurveToReplicateInitialPoint,[asPDFNumber(cs),asPDFNumber(is),asPDFNumber(us),asPDFNumber(hs)])},closePath=function(){return PDFOperator.of(Ops.ClosePath)},moveTo=function(cs,is){return PDFOperator.of(Ops.MoveTo,[asPDFNumber(cs),asPDFNumber(is)])},lineTo=function(cs,is){return PDFOperator.of(Ops.LineTo,[asPDFNumber(cs),asPDFNumber(is)])},stroke=function(){return PDFOperator.of(Ops.StrokePath)},fill$1=function(){return PDFOperator.of(Ops.FillNonZero)},fillAndStroke=function(){return PDFOperator.of(Ops.FillNonZeroAndStroke)},endPath=function(){return PDFOperator.of(Ops.EndPath)},nextLine=function(){return PDFOperator.of(Ops.NextLine)},showText=function(cs){return PDFOperator.of(Ops.ShowText,[cs])},beginText=function(){return PDFOperator.of(Ops.BeginText)},endText=function(){return PDFOperator.of(Ops.EndText)},setFontAndSize=function(cs,is){return PDFOperator.of(Ops.SetFontAndSize,[asPDFName(cs),asPDFNumber(is)])},setLineHeight=function(cs){return PDFOperator.of(Ops.SetTextLineHeight,[asPDFNumber(cs)])},TextRenderingMode;(function(cs){cs[cs.Fill=0]="Fill",cs[cs.Outline=1]="Outline",cs[cs.FillAndOutline=2]="FillAndOutline",cs[cs.Invisible=3]="Invisible",cs[cs.FillAndClip=4]="FillAndClip",cs[cs.OutlineAndClip=5]="OutlineAndClip",cs[cs.FillAndOutlineAndClip=6]="FillAndOutlineAndClip",cs[cs.Clip=7]="Clip"})(TextRenderingMode||(TextRenderingMode={}));var setTextMatrix=function(cs,is,us,hs,lo,co){return PDFOperator.of(Ops.SetTextMatrix,[asPDFNumber(cs),asPDFNumber(is),asPDFNumber(us),asPDFNumber(hs),asPDFNumber(lo),asPDFNumber(co)])},rotateAndSkewTextRadiansAndTranslate=function(cs,is,us,hs,lo){return setTextMatrix(cos(asNumber(cs)),sin(asNumber(cs))+tan(asNumber(is)),-sin(asNumber(cs))+tan(asNumber(us)),cos(asNumber(cs)),hs,lo)},drawObject=function(cs){return PDFOperator.of(Ops.DrawObject,[asPDFName(cs)])},setFillingGrayscaleColor=function(cs){return PDFOperator.of(Ops.NonStrokingColorGray,[asPDFNumber(cs)])},setStrokingGrayscaleColor=function(cs){return PDFOperator.of(Ops.StrokingColorGray,[asPDFNumber(cs)])},setFillingRgbColor=function(cs,is,us){return PDFOperator.of(Ops.NonStrokingColorRgb,[asPDFNumber(cs),asPDFNumber(is),asPDFNumber(us)])},setStrokingRgbColor=function(cs,is,us){return PDFOperator.of(Ops.StrokingColorRgb,[asPDFNumber(cs),asPDFNumber(is),asPDFNumber(us)])},setFillingCmykColor=function(cs,is,us,hs){return PDFOperator.of(Ops.NonStrokingColorCmyk,[asPDFNumber(cs),asPDFNumber(is),asPDFNumber(us),asPDFNumber(hs)])},setStrokingCmykColor=function(cs,is,us,hs){return PDFOperator.of(Ops.StrokingColorCmyk,[asPDFNumber(cs),asPDFNumber(is),asPDFNumber(us),asPDFNumber(hs)])},beginMarkedContent=function(cs){return PDFOperator.of(Ops.BeginMarkedContent,[asPDFName(cs)])},endMarkedContent=function(){return PDFOperator.of(Ops.EndMarkedContent)},ColorTypes;(function(cs){cs.Grayscale="Grayscale",cs.RGB="RGB",cs.CMYK="CMYK"})(ColorTypes||(ColorTypes={}));var grayscale=function(cs){return assertRange(cs,"gray",0,1),{type:ColorTypes.Grayscale,gray:cs}},rgb=function(cs,is,us){return assertRange(cs,"red",0,1),assertRange(is,"green",0,1),assertRange(us,"blue",0,1),{type:ColorTypes.RGB,red:cs,green:is,blue:us}},cmyk=function(cs,is,us,hs){return assertRange(cs,"cyan",0,1),assertRange(is,"magenta",0,1),assertRange(us,"yellow",0,1),assertRange(hs,"key",0,1),{type:ColorTypes.CMYK,cyan:cs,magenta:is,yellow:us,key:hs}},Grayscale=ColorTypes.Grayscale,RGB=ColorTypes.RGB,CMYK=ColorTypes.CMYK,setFillingColor=function(cs){return cs.type===Grayscale?setFillingGrayscaleColor(cs.gray):cs.type===RGB?setFillingRgbColor(cs.red,cs.green,cs.blue):cs.type===CMYK?setFillingCmykColor(cs.cyan,cs.magenta,cs.yellow,cs.key):error("Invalid color: "+JSON.stringify(cs))},setStrokingColor=function(cs){return cs.type===Grayscale?setStrokingGrayscaleColor(cs.gray):cs.type===RGB?setStrokingRgbColor(cs.red,cs.green,cs.blue):cs.type===CMYK?setStrokingCmykColor(cs.cyan,cs.magenta,cs.yellow,cs.key):error("Invalid color: "+JSON.stringify(cs))},componentsToColor=function(cs,is){return is===void 0&&(is=1),(cs==null?void 0:cs.length)===1?grayscale(cs[0]*is):(cs==null?void 0:cs.length)===3?rgb(cs[0]*is,cs[1]*is,cs[2]*is):(cs==null?void 0:cs.length)===4?cmyk(cs[0]*is,cs[1]*is,cs[2]*is,cs[3]*is):void 0},colorToComponents=function(cs){return cs.type===Grayscale?[cs.gray]:cs.type===RGB?[cs.red,cs.green,cs.blue]:cs.type===CMYK?[cs.cyan,cs.magenta,cs.yellow,cs.key]:error("Invalid color: "+JSON.stringify(cs))},cx=0,cy=0,px=0,py=0,sx=0,sy=0,parameters=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),parse=function(cs){for(var is,us=[],hs=[],lo="",co=!1,uo=0,ga=0,ba=cs;ga<ba.length;ga++){var xa=ba[ga];if(parameters.has(xa))uo=parameters.get(xa),is&&(lo.length>0&&(hs[hs.length]=+lo),us[us.length]={cmd:is,args:hs},hs=[],lo="",co=!1),is=xa;else if([" ",","].includes(xa)||xa==="-"&&lo.length>0&&lo[lo.length-1]!=="e"||xa==="."&&co){if(lo.length===0)continue;hs.length===uo?(us[us.length]={cmd:is,args:hs},hs=[+lo],is==="M"&&(is="L"),is==="m"&&(is="l")):hs[hs.length]=+lo,co=xa===".",lo=["-","."].includes(xa)?xa:""}else lo+=xa,xa==="."&&(co=!0)}return lo.length>0&&(hs.length===uo?(us[us.length]={cmd:is,args:hs},hs=[+lo],is==="M"&&(is="L"),is==="m"&&(is="l")):hs[hs.length]=+lo),us[us.length]={cmd:is,args:hs},us},apply=function(cs){cx=cy=px=py=sx=sy=0;for(var is=[],us=0;us<cs.length;us++){var hs=cs[us];if(hs.cmd&&typeof runners[hs.cmd]=="function"){var lo=runners[hs.cmd](hs.args);Array.isArray(lo)?is=is.concat(lo):is.push(lo)}}return is},runners={M:function(cs){return cx=cs[0],cy=cs[1],px=py=null,sx=cx,sy=cy,moveTo(cx,cy)},m:function(cs){return cx+=cs[0],cy+=cs[1],px=py=null,sx=cx,sy=cy,moveTo(cx,cy)},C:function(cs){return cx=cs[4],cy=cs[5],px=cs[2],py=cs[3],appendBezierCurve(cs[0],cs[1],cs[2],cs[3],cs[4],cs[5])},c:function(cs){var is=appendBezierCurve(cs[0]+cx,cs[1]+cy,cs[2]+cx,cs[3]+cy,cs[4]+cx,cs[5]+cy);return px=cx+cs[2],py=cy+cs[3],cx+=cs[4],cy+=cs[5],is},S:function(cs){(px===null||py===null)&&(px=cx,py=cy);var is=appendBezierCurve(cx-(px-cx),cy-(py-cy),cs[0],cs[1],cs[2],cs[3]);return px=cs[0],py=cs[1],cx=cs[2],cy=cs[3],is},s:function(cs){(px===null||py===null)&&(px=cx,py=cy);var is=appendBezierCurve(cx-(px-cx),cy-(py-cy),cx+cs[0],cy+cs[1],cx+cs[2],cy+cs[3]);return px=cx+cs[0],py=cy+cs[1],cx+=cs[2],cy+=cs[3],is},Q:function(cs){return px=cs[0],py=cs[1],cx=cs[2],cy=cs[3],appendQuadraticCurve(cs[0],cs[1],cx,cy)},q:function(cs){var is=appendQuadraticCurve(cs[0]+cx,cs[1]+cy,cs[2]+cx,cs[3]+cy);return px=cx+cs[0],py=cy+cs[1],cx+=cs[2],cy+=cs[3],is},T:function(cs){px===null||py===null?(px=cx,py=cy):(px=cx-(px-cx),py=cy-(py-cy));var is=appendQuadraticCurve(px,py,cs[0],cs[1]);return px=cx-(px-cx),py=cy-(py-cy),cx=cs[0],cy=cs[1],is},t:function(cs){px===null||py===null?(px=cx,py=cy):(px=cx-(px-cx),py=cy-(py-cy));var is=appendQuadraticCurve(px,py,cx+cs[0],cy+cs[1]);return cx+=cs[0],cy+=cs[1],is},A:function(cs){var is=solveArc(cx,cy,cs);return cx=cs[5],cy=cs[6],is},a:function(cs){cs[5]+=cx,cs[6]+=cy;var is=solveArc(cx,cy,cs);return cx=cs[5],cy=cs[6],is},L:function(cs){return cx=cs[0],cy=cs[1],px=py=null,lineTo(cx,cy)},l:function(cs){return cx+=cs[0],cy+=cs[1],px=py=null,lineTo(cx,cy)},H:function(cs){return cx=cs[0],px=py=null,lineTo(cx,cy)},h:function(cs){return cx+=cs[0],px=py=null,lineTo(cx,cy)},V:function(cs){return cy=cs[0],px=py=null,lineTo(cx,cy)},v:function(cs){return cy+=cs[0],px=py=null,lineTo(cx,cy)},Z:function(){var cs=closePath();return cx=sx,cy=sy,cs},z:function(){var cs=closePath();return cx=sx,cy=sy,cs}},solveArc=function(cs,is,us){for(var hs=us[0],lo=us[1],co=us[2],uo=us[3],ga=us[4],ba=us[5],xa=us[6],_a=arcToSegments(ba,xa,hs,lo,uo,ga,co,cs,is),$a=[],xl=0,yl=_a;xl<yl.length;xl++){var wl=yl[xl],_l=segmentToBezier.apply(void 0,wl);$a.push(appendBezierCurve.apply(void 0,_l))}return $a},arcToSegments=function(cs,is,us,hs,lo,co,uo,ga,ba){var xa=uo*(Math.PI/180),_a=Math.sin(xa),$a=Math.cos(xa);us=Math.abs(us),hs=Math.abs(hs),px=$a*(ga-cs)*.5+_a*(ba-is)*.5,py=$a*(ba-is)*.5-_a*(ga-cs)*.5;var xl=px*px/(us*us)+py*py/(hs*hs);xl>1&&(xl=Math.sqrt(xl),us*=xl,hs*=xl);var yl=$a/us,wl=_a/us,_l=-_a/hs,El=$a/hs,Sl=yl*ga+wl*ba,Cl=_l*ga+El*ba,Tl=yl*cs+wl*is,Dl=_l*cs+El*is,Fl=(Tl-Sl)*(Tl-Sl)+(Dl-Cl)*(Dl-Cl),Pl=1/Fl-.25;Pl<0&&(Pl=0);var Al=Math.sqrt(Pl);co===lo&&(Al=-Al);var Rl=.5*(Sl+Tl)-Al*(Dl-Cl),Il=.5*(Cl+Dl)+Al*(Tl-Sl),Bl=Math.atan2(Cl-Il,Sl-Rl),Ol=Math.atan2(Dl-Il,Tl-Rl),zl=Ol-Bl;zl<0&&co===1?zl+=2*Math.PI:zl>0&&co===0&&(zl-=2*Math.PI);for(var Hl=Math.ceil(Math.abs(zl/(Math.PI*.5+.001))),ou=[],au=0;au<Hl;au++){var _c=Bl+au*zl/Hl,uu=Bl+(au+1)*zl/Hl;ou[au]=[Rl,Il,_c,uu,us,hs,_a,$a]}return ou},segmentToBezier=function(cs,is,us,hs,lo,co,uo,ga){var ba=ga*lo,xa=-uo*co,_a=uo*lo,$a=ga*co,xl=.5*(hs-us),yl=8/3*Math.sin(xl*.5)*Math.sin(xl*.5)/Math.sin(xl),wl=cs+Math.cos(us)-yl*Math.sin(us),_l=is+Math.sin(us)+yl*Math.cos(us),El=cs+Math.cos(hs),Sl=is+Math.sin(hs),Cl=El+yl*Math.sin(hs),Tl=Sl-yl*Math.cos(hs),Dl=[ba*wl+xa*_l,_a*wl+$a*_l,ba*Cl+xa*Tl,_a*Cl+$a*Tl,ba*El+xa*Sl,_a*El+$a*Sl];return Dl},svgPathToOperators=function(cs){return apply(parse(cs))},drawLinesOfText=function(cs,is){for(var us=[pushGraphicsState(),is.graphicsState&&setGraphicsState(is.graphicsState),beginText(),setFillingColor(is.color),setFontAndSize(is.font,is.size),setLineHeight(is.lineHeight),rotateAndSkewTextRadiansAndTranslate(toRadians(is.rotate),toRadians(is.xSkew),toRadians(is.ySkew),is.x,is.y)].filter(Boolean),hs=0,lo=cs.length;hs<lo;hs++)us.push(showText(cs[hs]),nextLine());return us.push(endText(),popGraphicsState()),us},drawImage=function(cs,is){return[pushGraphicsState(),is.graphicsState&&setGraphicsState(is.graphicsState),translate(is.x,is.y),rotateRadians(toRadians(is.rotate)),scale(is.width,is.height),skewRadians(toRadians(is.xSkew),toRadians(is.ySkew)),drawObject(cs),popGraphicsState()].filter(Boolean)},drawPage=function(cs,is){return[pushGraphicsState(),is.graphicsState&&setGraphicsState(is.graphicsState),translate(is.x,is.y),rotateRadians(toRadians(is.rotate)),scale(is.xScale,is.yScale),skewRadians(toRadians(is.xSkew),toRadians(is.ySkew)),drawObject(cs),popGraphicsState()].filter(Boolean)},drawLine=function(cs){var is,us;return[pushGraphicsState(),cs.graphicsState&&setGraphicsState(cs.graphicsState),cs.color&&setStrokingColor(cs.color),setLineWidth(cs.thickness),setDashPattern((is=cs.dashArray)!==null&&is!==void 0?is:[],(us=cs.dashPhase)!==null&&us!==void 0?us:0),moveTo(cs.start.x,cs.start.y),cs.lineCap&&setLineCap(cs.lineCap),moveTo(cs.start.x,cs.start.y),lineTo(cs.end.x,cs.end.y),stroke(),popGraphicsState()].filter(Boolean)},drawRectangle=function(cs){var is,us;return[pushGraphicsState(),cs.graphicsState&&setGraphicsState(cs.graphicsState),cs.color&&setFillingColor(cs.color),cs.borderColor&&setStrokingColor(cs.borderColor),setLineWidth(cs.borderWidth),cs.borderLineCap&&setLineCap(cs.borderLineCap),setDashPattern((is=cs.borderDashArray)!==null&&is!==void 0?is:[],(us=cs.borderDashPhase)!==null&&us!==void 0?us:0),translate(cs.x,cs.y),rotateRadians(toRadians(cs.rotate)),skewRadians(toRadians(cs.xSkew),toRadians(cs.ySkew)),moveTo(0,0),lineTo(0,cs.height),lineTo(cs.width,cs.height),lineTo(cs.width,0),closePath(),cs.color&&cs.borderWidth?fillAndStroke():cs.color?fill$1():cs.borderColor?stroke():closePath(),popGraphicsState()].filter(Boolean)},KAPPA=4*((Math.sqrt(2)-1)/3),drawEllipsePath=function(cs){var is=asNumber(cs.x),us=asNumber(cs.y),hs=asNumber(cs.xScale),lo=asNumber(cs.yScale);is-=hs,us-=lo;var co=hs*KAPPA,uo=lo*KAPPA,ga=is+hs*2,ba=us+lo*2,xa=is+hs,_a=us+lo;return[pushGraphicsState(),moveTo(is,_a),appendBezierCurve(is,_a-uo,xa-co,us,xa,us),appendBezierCurve(xa+co,us,ga,_a-uo,ga,_a),appendBezierCurve(ga,_a+uo,xa+co,ba,xa,ba),appendBezierCurve(xa-co,ba,is,_a+uo,is,_a),popGraphicsState()]},drawEllipseCurves=function(cs){var is=asNumber(cs.x),us=asNumber(cs.y),hs=asNumber(cs.xScale),lo=asNumber(cs.yScale),co=-hs,uo=-lo,ga=hs*KAPPA,ba=lo*KAPPA,xa=co+hs*2,_a=uo+lo*2,$a=co+hs,xl=uo+lo;return[translate(is,us),rotateRadians(toRadians(cs.rotate)),moveTo(co,xl),appendBezierCurve(co,xl-ba,$a-ga,uo,$a,uo),appendBezierCurve($a+ga,uo,xa,xl-ba,xa,xl),appendBezierCurve(xa,xl+ba,$a+ga,_a,$a,_a),appendBezierCurve($a-ga,_a,co,xl+ba,co,xl)]},drawEllipse=function(cs){var is,us,hs;return __spreadArrays([pushGraphicsState(),cs.graphicsState&&setGraphicsState(cs.graphicsState),cs.color&&setFillingColor(cs.color),cs.borderColor&&setStrokingColor(cs.borderColor),setLineWidth(cs.borderWidth),cs.borderLineCap&&setLineCap(cs.borderLineCap),setDashPattern((is=cs.borderDashArray)!==null&&is!==void 0?is:[],(us=cs.borderDashPhase)!==null&&us!==void 0?us:0)],cs.rotate===void 0?drawEllipsePath({x:cs.x,y:cs.y,xScale:cs.xScale,yScale:cs.yScale}):drawEllipseCurves({x:cs.x,y:cs.y,xScale:cs.xScale,yScale:cs.yScale,rotate:(hs=cs.rotate)!==null&&hs!==void 0?hs:degrees(0)}),[cs.color&&cs.borderWidth?fillAndStroke():cs.color?fill$1():cs.borderColor?stroke():closePath(),popGraphicsState()]).filter(Boolean)},drawSvgPath=function(cs,is){var us,hs,lo;return __spreadArrays([pushGraphicsState(),is.graphicsState&&setGraphicsState(is.graphicsState),translate(is.x,is.y),rotateRadians(toRadians((us=is.rotate)!==null&&us!==void 0?us:degrees(0))),is.scale?scale(is.scale,-is.scale):scale(1,-1),is.color&&setFillingColor(is.color),is.borderColor&&setStrokingColor(is.borderColor),is.borderWidth&&setLineWidth(is.borderWidth),is.borderLineCap&&setLineCap(is.borderLineCap),setDashPattern((hs=is.borderDashArray)!==null&&hs!==void 0?hs:[],(lo=is.borderDashPhase)!==null&&lo!==void 0?lo:0)],svgPathToOperators(cs),[is.color&&is.borderWidth?fillAndStroke():is.color?fill$1():is.borderColor?stroke():closePath(),popGraphicsState()]).filter(Boolean)},drawCheckMark=function(cs){var is=asNumber(cs.size),us=-1+.75,hs=-1+.51,lo=1-.525,co=1-.31,uo=-1+.325,ga=.3995/(lo-hs)+hs;return[pushGraphicsState(),cs.color&&setStrokingColor(cs.color),setLineWidth(cs.thickness),translate(cs.x,cs.y),moveTo(uo*is,ga*is),lineTo(us*is,hs*is),lineTo(co*is,lo*is),stroke(),popGraphicsState()].filter(Boolean)},rotateInPlace=function(cs){return cs.rotation===0?[translate(0,0),rotateDegrees(0)]:cs.rotation===90?[translate(cs.width,0),rotateDegrees(90)]:cs.rotation===180?[translate(cs.width,cs.height),rotateDegrees(180)]:cs.rotation===270?[translate(0,cs.height),rotateDegrees(270)]:[]},drawCheckBox=function(cs){var is=drawRectangle({x:cs.x,y:cs.y,width:cs.width,height:cs.height,borderWidth:cs.borderWidth,color:cs.color,borderColor:cs.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)});if(!cs.filled)return is;var us=asNumber(cs.width),hs=asNumber(cs.height),lo=Math.min(us,hs)/2,co=drawCheckMark({x:us/2,y:hs/2,size:lo,thickness:cs.thickness,color:cs.markColor});return __spreadArrays([pushGraphicsState()],is,co,[popGraphicsState()])},drawRadioButton=function(cs){var is=asNumber(cs.width),us=asNumber(cs.height),hs=Math.min(is,us)/2,lo=drawEllipse({x:cs.x,y:cs.y,xScale:hs,yScale:hs,color:cs.color,borderColor:cs.borderColor,borderWidth:cs.borderWidth});if(!cs.filled)return lo;var co=drawEllipse({x:cs.x,y:cs.y,xScale:hs*.45,yScale:hs*.45,color:cs.dotColor,borderColor:void 0,borderWidth:0});return __spreadArrays([pushGraphicsState()],lo,co,[popGraphicsState()])},drawButton=function(cs){var is=asNumber(cs.x),us=asNumber(cs.y),hs=asNumber(cs.width),lo=asNumber(cs.height),co=drawRectangle({x:is,y:us,width:hs,height:lo,borderWidth:cs.borderWidth,color:cs.color,borderColor:cs.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),uo=drawTextLines(cs.textLines,{color:cs.textColor,font:cs.font,size:cs.fontSize,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)});return __spreadArrays([pushGraphicsState()],co,uo,[popGraphicsState()])},drawTextLines=function(cs,is){for(var us=[beginText(),setFillingColor(is.color),setFontAndSize(is.font,is.size)],hs=0,lo=cs.length;hs<lo;hs++){var co=cs[hs],uo=co.encoded,ga=co.x,ba=co.y;us.push(rotateAndSkewTextRadiansAndTranslate(toRadians(is.rotate),toRadians(is.xSkew),toRadians(is.ySkew),ga,ba),showText(uo))}return us.push(endText()),us},drawTextField=function(cs){var is=asNumber(cs.x),us=asNumber(cs.y),hs=asNumber(cs.width),lo=asNumber(cs.height),co=asNumber(cs.borderWidth),uo=asNumber(cs.padding),ga=is+co/2+uo,ba=us+co/2+uo,xa=hs-(co/2+uo)*2,_a=lo-(co/2+uo)*2,$a=[moveTo(ga,ba),lineTo(ga,ba+_a),lineTo(ga+xa,ba+_a),lineTo(ga+xa,ba),closePath(),clip(),endPath()],xl=drawRectangle({x:is,y:us,width:hs,height:lo,borderWidth:cs.borderWidth,color:cs.color,borderColor:cs.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),yl=drawTextLines(cs.textLines,{color:cs.textColor,font:cs.font,size:cs.fontSize,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),wl=__spreadArrays([beginMarkedContent("Tx"),pushGraphicsState()],yl,[popGraphicsState(),endMarkedContent()]);return __spreadArrays([pushGraphicsState()],xl,$a,wl,[popGraphicsState()])},drawOptionList=function(cs){for(var is=asNumber(cs.x),us=asNumber(cs.y),hs=asNumber(cs.width),lo=asNumber(cs.height),co=asNumber(cs.lineHeight),uo=asNumber(cs.borderWidth),ga=asNumber(cs.padding),ba=is+uo/2+ga,xa=us+uo/2+ga,_a=hs-(uo/2+ga)*2,$a=lo-(uo/2+ga)*2,xl=[moveTo(ba,xa),lineTo(ba,xa+$a),lineTo(ba+_a,xa+$a),lineTo(ba+_a,xa),closePath(),clip(),endPath()],yl=drawRectangle({x:is,y:us,width:hs,height:lo,borderWidth:cs.borderWidth,color:cs.color,borderColor:cs.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),wl=[],_l=0,El=cs.selectedLines.length;_l<El;_l++){var Sl=cs.textLines[cs.selectedLines[_l]];wl.push.apply(wl,drawRectangle({x:Sl.x-ga,y:Sl.y-(co-Sl.height)/2,width:hs-uo,height:Sl.height+(co-Sl.height)/2,borderWidth:0,color:cs.selectedColor,borderColor:void 0,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}))}var Cl=drawTextLines(cs.textLines,{color:cs.textColor,font:cs.font,size:cs.fontSize,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),Tl=__spreadArrays([beginMarkedContent("Tx"),pushGraphicsState()],Cl,[popGraphicsState(),endMarkedContent()]);return __spreadArrays([pushGraphicsState()],yl,wl,xl,Tl,[popGraphicsState()])},EncryptedPDFError=function(cs){__extends(is,cs);function is(){var us=this,hs="Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.";return us=cs.call(this,hs)||this,us}return is}(Error),FontkitNotRegisteredError=function(cs){__extends(is,cs);function is(){var us=this,hs="Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.";return us=cs.call(this,hs)||this,us}return is}(Error),ForeignPageError=function(cs){__extends(is,cs);function is(){var us=this,hs="A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.";return us=cs.call(this,hs)||this,us}return is}(Error),RemovePageFromEmptyDocumentError=function(cs){__extends(is,cs);function is(){var us=this,hs="PDFDocument has no pages so `PDFDocument.removePage` cannot be called";return us=cs.call(this,hs)||this,us}return is}(Error),NoSuchFieldError=function(cs){__extends(is,cs);function is(us){var hs=this,lo='PDFDocument has no form field with the name "'+us+'"';return hs=cs.call(this,lo)||this,hs}return is}(Error),UnexpectedFieldTypeError=function(cs){__extends(is,cs);function is(us,hs,lo){var co,uo,ga=this,ba=hs==null?void 0:hs.name,xa=(uo=(co=lo==null?void 0:lo.constructor)===null||co===void 0?void 0:co.name)!==null&&uo!==void 0?uo:lo,_a='Expected field "'+us+'" to be of type '+ba+", "+("but it is actually of type "+xa);return ga=cs.call(this,_a)||this,ga}return is}(Error);(function(cs){__extends(is,cs);function is(us){var hs=this,lo='Failed to select check box due to missing onValue: "'+us+'"';return hs=cs.call(this,lo)||this,hs}return is})(Error);var FieldAlreadyExistsError=function(cs){__extends(is,cs);function is(us){var hs=this,lo='A field already exists with the specified name: "'+us+'"';return hs=cs.call(this,lo)||this,hs}return is}(Error),InvalidFieldNamePartError=function(cs){__extends(is,cs);function is(us){var hs=this,lo='Field name contains invalid component: "'+us+'"';return hs=cs.call(this,lo)||this,hs}return is}(Error);(function(cs){__extends(is,cs);function is(us){var hs=this,lo='A non-terminal field already exists with the specified name: "'+us+'"';return hs=cs.call(this,lo)||this,hs}return is})(Error);var RichTextFieldReadError=function(cs){__extends(is,cs);function is(us){var hs=this,lo="Reading rich text fields is not supported: Attempted to read rich text field: "+us;return hs=cs.call(this,lo)||this,hs}return is}(Error),CombedTextLayoutError=function(cs){__extends(is,cs);function is(us,hs){var lo=this,co="Failed to layout combed text as lineLength="+us+" is greater than cellCount="+hs;return lo=cs.call(this,co)||this,lo}return is}(Error),ExceededMaxLengthError=function(cs){__extends(is,cs);function is(us,hs,lo){var co=this,uo="Attempted to set text with length="+us+" for TextField with maxLength="+hs+" and name="+lo;return co=cs.call(this,uo)||this,co}return is}(Error),InvalidMaxLengthError=function(cs){__extends(is,cs);function is(us,hs,lo){var co=this,uo="Attempted to set maxLength="+hs+", which is less than "+us+", the length of this field's current value (name="+lo+")";return co=cs.call(this,uo)||this,co}return is}(Error),TextAlignment;(function(cs){cs[cs.Left=0]="Left",cs[cs.Center=1]="Center",cs[cs.Right=2]="Right"})(TextAlignment||(TextAlignment={}));var MIN_FONT_SIZE=4,MAX_FONT_SIZE=500,computeFontSize=function(cs,is,us,hs){hs===void 0&&(hs=!1);for(var lo=MIN_FONT_SIZE;lo<MAX_FONT_SIZE;){for(var co=0,uo=0,ga=cs.length;uo<ga;uo++){co+=1;for(var ba=cs[uo],xa=ba.split(" "),_a=us.width,$a=0,xl=xa.length;$a<xl;$a++){var yl=$a===xl-1,wl=yl?xa[$a]:xa[$a]+" ",_l=is.widthOfTextAtSize(wl,lo);_a-=_l,_a<=0&&(co+=1,_a=us.width-_l)}}if(!hs&&co>cs.length)return lo-1;var El=is.heightAtSize(lo),Sl=El+El*.2,Cl=Sl*co;if(Cl>Math.abs(us.height))return lo-1;lo+=1}return lo},computeCombedFontSize=function(cs,is,us,hs){for(var lo=us.width/hs,co=us.height,uo=MIN_FONT_SIZE,ga=charSplit(cs);uo<MAX_FONT_SIZE;){for(var ba=0,xa=ga.length;ba<xa;ba++){var _a=ga[ba],$a=is.widthOfTextAtSize(_a,uo)>lo*.75;if($a)return uo-1}var xl=is.heightAtSize(uo,{descender:!1});if(xl>co)return uo-1;uo+=1}return uo},lastIndexOfWhitespace=function(cs){for(var is=cs.length;is>0;is--)if(/\s/.test(cs[is]))return is},splitOutLines=function(cs,is,us,hs){for(var lo,co=cs.length;co>0;){var uo=cs.substring(0,co),ga=us.encodeText(uo),ba=us.widthOfTextAtSize(uo,hs);if(ba<is){var xa=cs.substring(co)||void 0;return{line:uo,encoded:ga,width:ba,remainder:xa}}co=(lo=lastIndexOfWhitespace(uo))!==null&&lo!==void 0?lo:0}return{line:cs,encoded:us.encodeText(cs),width:us.widthOfTextAtSize(cs,hs),remainder:void 0}},layoutMultilineText=function(cs,is){var us=is.alignment,hs=is.fontSize,lo=is.font,co=is.bounds,uo=lineSplit(cleanText(cs));(hs===void 0||hs===0)&&(hs=computeFontSize(uo,lo,co,!0));for(var ga=lo.heightAtSize(hs),ba=ga+ga*.2,xa=[],_a=co.x,$a=co.y,xl=co.x+co.width,yl=co.y+co.height,wl=co.y+co.height,_l=0,El=uo.length;_l<El;_l++)for(var Sl=uo[_l];Sl!==void 0;){var Cl=splitOutLines(Sl,co.width,lo,hs),Tl=Cl.line,Dl=Cl.encoded,Fl=Cl.width,Pl=Cl.remainder,Al=us===TextAlignment.Left?co.x:us===TextAlignment.Center?co.x+co.width/2-Fl/2:us===TextAlignment.Right?co.x+co.width-Fl:co.x;wl-=ba,Al<_a&&(_a=Al),wl<$a&&($a=wl),Al+Fl>xl&&(xl=Al+Fl),wl+ga>yl&&(yl=wl+ga),xa.push({text:Tl,encoded:Dl,width:Fl,height:ga,x:Al,y:wl}),Sl=Pl==null?void 0:Pl.trim()}return{fontSize:hs,lineHeight:ba,lines:xa,bounds:{x:_a,y:$a,width:xl-_a,height:yl-$a}}},layoutCombedText=function(cs,is){var us=is.fontSize,hs=is.font,lo=is.bounds,co=is.cellCount,uo=mergeLines(cleanText(cs));if(uo.length>co)throw new CombedTextLayoutError(uo.length,co);(us===void 0||us===0)&&(us=computeCombedFontSize(uo,hs,lo,co));for(var ga=lo.width/co,ba=hs.heightAtSize(us,{descender:!1}),xa=lo.y+(lo.height/2-ba/2),_a=[],$a=lo.x,xl=lo.y,yl=lo.x+lo.width,wl=lo.y+lo.height,_l=0,El=0;_l<co;){var Sl=charAtIndex(uo,El),Cl=Sl[0],Tl=Sl[1],Dl=hs.encodeText(Cl),Fl=hs.widthOfTextAtSize(Cl,us),Pl=lo.x+(ga*_l+ga/2),Al=Pl-Fl/2;Al<$a&&($a=Al),xa<xl&&(xl=xa),Al+Fl>yl&&(yl=Al+Fl),xa+ba>wl&&(wl=xa+ba),_a.push({text:uo,encoded:Dl,width:Fl,height:ba,x:Al,y:xa}),_l+=1,El+=Tl}return{fontSize:us,cells:_a,bounds:{x:$a,y:xl,width:yl-$a,height:wl-xl}}},layoutSinglelineText=function(cs,is){var us=is.alignment,hs=is.fontSize,lo=is.font,co=is.bounds,uo=mergeLines(cleanText(cs));(hs===void 0||hs===0)&&(hs=computeFontSize([uo],lo,co));var ga=lo.encodeText(uo),ba=lo.widthOfTextAtSize(uo,hs),xa=lo.heightAtSize(hs,{descender:!1}),_a=us===TextAlignment.Left?co.x:us===TextAlignment.Center?co.x+co.width/2-ba/2:us===TextAlignment.Right?co.x+co.width-ba:co.x,$a=co.y+(co.height/2-xa/2);return{fontSize:hs,line:{text:uo,encoded:ga,width:ba,height:xa,x:_a,y:$a},bounds:{x:_a,y:$a,width:ba,height:xa}}},normalizeAppearance=function(cs){return"normal"in cs?cs:{normal:cs}},tfRegex=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,getDefaultFontSize=function(cs){var is,us,hs=(is=cs.getDefaultAppearance())!==null&&is!==void 0?is:"",lo=(us=findLastMatch(hs,tfRegex).match)!==null&&us!==void 0?us:[],co=Number(lo[2]);return isFinite(co)?co:void 0},colorRegex=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,getDefaultColor=function(cs){var is,us=(is=cs.getDefaultAppearance())!==null&&is!==void 0?is:"",hs=findLastMatch(us,colorRegex).match,lo=hs??[],co=lo[1],uo=lo[2],ga=lo[3],ba=lo[4],xa=lo[5];if(xa==="g"&&co)return grayscale(Number(co));if(xa==="rg"&&co&&uo&&ga)return rgb(Number(co),Number(uo),Number(ga));if(xa==="k"&&co&&uo&&ga&&ba)return cmyk(Number(co),Number(uo),Number(ga),Number(ba))},updateDefaultAppearance=function(cs,is,us,hs){var lo;hs===void 0&&(hs=0);var co=[setFillingColor(is).toString(),setFontAndSize((lo=us==null?void 0:us.name)!==null&&lo!==void 0?lo:"dummy__noop",hs).toString()].join(`
`);cs.setDefaultAppearance(co)},defaultCheckBoxAppearanceProvider=function(cs,is){var us,hs,lo,co=getDefaultColor(is),uo=getDefaultColor(cs.acroField),ga=is.getRectangle(),ba=is.getAppearanceCharacteristics(),xa=is.getBorderStyle(),_a=(us=xa==null?void 0:xa.getWidth())!==null&&us!==void 0?us:0,$a=reduceRotation(ba==null?void 0:ba.getRotation()),xl=adjustDimsForRotation(ga,$a),yl=xl.width,wl=xl.height,_l=rotateInPlace(__assign(__assign({},ga),{rotation:$a})),El=rgb(0,0,0),Sl=(hs=componentsToColor(ba==null?void 0:ba.getBorderColor()))!==null&&hs!==void 0?hs:El,Cl=componentsToColor(ba==null?void 0:ba.getBackgroundColor()),Tl=componentsToColor(ba==null?void 0:ba.getBackgroundColor(),.8),Dl=(lo=co??uo)!==null&&lo!==void 0?lo:El;updateDefaultAppearance(co?is:cs.acroField,Dl);var Fl={x:0+_a/2,y:0+_a/2,width:yl-_a,height:wl-_a,thickness:1.5,borderWidth:_a,borderColor:Sl,markColor:Dl};return{normal:{on:__spreadArrays(_l,drawCheckBox(__assign(__assign({},Fl),{color:Cl,filled:!0}))),off:__spreadArrays(_l,drawCheckBox(__assign(__assign({},Fl),{color:Cl,filled:!1})))},down:{on:__spreadArrays(_l,drawCheckBox(__assign(__assign({},Fl),{color:Tl,filled:!0}))),off:__spreadArrays(_l,drawCheckBox(__assign(__assign({},Fl),{color:Tl,filled:!1})))}}},defaultRadioGroupAppearanceProvider=function(cs,is){var us,hs,lo,co=getDefaultColor(is),uo=getDefaultColor(cs.acroField),ga=is.getRectangle(),ba=is.getAppearanceCharacteristics(),xa=is.getBorderStyle(),_a=(us=xa==null?void 0:xa.getWidth())!==null&&us!==void 0?us:0,$a=reduceRotation(ba==null?void 0:ba.getRotation()),xl=adjustDimsForRotation(ga,$a),yl=xl.width,wl=xl.height,_l=rotateInPlace(__assign(__assign({},ga),{rotation:$a})),El=rgb(0,0,0),Sl=(hs=componentsToColor(ba==null?void 0:ba.getBorderColor()))!==null&&hs!==void 0?hs:El,Cl=componentsToColor(ba==null?void 0:ba.getBackgroundColor()),Tl=componentsToColor(ba==null?void 0:ba.getBackgroundColor(),.8),Dl=(lo=co??uo)!==null&&lo!==void 0?lo:El;updateDefaultAppearance(co?is:cs.acroField,Dl);var Fl={x:yl/2,y:wl/2,width:yl-_a,height:wl-_a,borderWidth:_a,borderColor:Sl,dotColor:Dl};return{normal:{on:__spreadArrays(_l,drawRadioButton(__assign(__assign({},Fl),{color:Cl,filled:!0}))),off:__spreadArrays(_l,drawRadioButton(__assign(__assign({},Fl),{color:Cl,filled:!1})))},down:{on:__spreadArrays(_l,drawRadioButton(__assign(__assign({},Fl),{color:Tl,filled:!0}))),off:__spreadArrays(_l,drawRadioButton(__assign(__assign({},Fl),{color:Tl,filled:!1})))}}},defaultButtonAppearanceProvider=function(cs,is,us){var hs,lo,co,uo,ga,ba=getDefaultColor(is),xa=getDefaultColor(cs.acroField),_a=getDefaultFontSize(is),$a=getDefaultFontSize(cs.acroField),xl=is.getRectangle(),yl=is.getAppearanceCharacteristics(),wl=is.getBorderStyle(),_l=yl==null?void 0:yl.getCaptions(),El=(hs=_l==null?void 0:_l.normal)!==null&&hs!==void 0?hs:"",Sl=(co=(lo=_l==null?void 0:_l.down)!==null&&lo!==void 0?lo:El)!==null&&co!==void 0?co:"",Cl=(uo=wl==null?void 0:wl.getWidth())!==null&&uo!==void 0?uo:0,Tl=reduceRotation(yl==null?void 0:yl.getRotation()),Dl=adjustDimsForRotation(xl,Tl),Fl=Dl.width,Pl=Dl.height,Al=rotateInPlace(__assign(__assign({},xl),{rotation:Tl})),Rl=rgb(0,0,0),Il=componentsToColor(yl==null?void 0:yl.getBorderColor()),Bl=componentsToColor(yl==null?void 0:yl.getBackgroundColor()),Ol=componentsToColor(yl==null?void 0:yl.getBackgroundColor(),.8),zl={x:Cl,y:Cl,width:Fl-Cl*2,height:Pl-Cl*2},Hl=layoutSinglelineText(El,{alignment:TextAlignment.Center,fontSize:_a??$a,font:us,bounds:zl}),ou=layoutSinglelineText(Sl,{alignment:TextAlignment.Center,fontSize:_a??$a,font:us,bounds:zl}),au=Math.min(Hl.fontSize,ou.fontSize),_c=(ga=ba??xa)!==null&&ga!==void 0?ga:Rl;updateDefaultAppearance(ba||_a!==void 0?is:cs.acroField,_c,us,au);var uu={x:0+Cl/2,y:0+Cl/2,width:Fl-Cl,height:Pl-Cl,borderWidth:Cl,borderColor:Il,textColor:_c,font:us.name,fontSize:au};return{normal:__spreadArrays(Al,drawButton(__assign(__assign({},uu),{color:Bl,textLines:[Hl.line]}))),down:__spreadArrays(Al,drawButton(__assign(__assign({},uu),{color:Ol,textLines:[ou.line]})))}},defaultTextFieldAppearanceProvider=function(cs,is,us){var hs,lo,co,uo,ga=getDefaultColor(is),ba=getDefaultColor(cs.acroField),xa=getDefaultFontSize(is),_a=getDefaultFontSize(cs.acroField),$a=is.getRectangle(),xl=is.getAppearanceCharacteristics(),yl=is.getBorderStyle(),wl=(hs=cs.getText())!==null&&hs!==void 0?hs:"",_l=(lo=yl==null?void 0:yl.getWidth())!==null&&lo!==void 0?lo:0,El=reduceRotation(xl==null?void 0:xl.getRotation()),Sl=adjustDimsForRotation($a,El),Cl=Sl.width,Tl=Sl.height,Dl=rotateInPlace(__assign(__assign({},$a),{rotation:El})),Fl=rgb(0,0,0),Pl=componentsToColor(xl==null?void 0:xl.getBorderColor()),Al=componentsToColor(xl==null?void 0:xl.getBackgroundColor()),Rl,Il,Bl=cs.isCombed()?0:1,Ol={x:_l+Bl,y:_l+Bl,width:Cl-(_l+Bl)*2,height:Tl-(_l+Bl)*2};if(cs.isMultiline()){var zl=layoutMultilineText(wl,{alignment:cs.getAlignment(),fontSize:xa??_a,font:us,bounds:Ol});Rl=zl.lines,Il=zl.fontSize}else if(cs.isCombed()){var zl=layoutCombedText(wl,{fontSize:xa??_a,font:us,bounds:Ol,cellCount:(co=cs.getMaxLength())!==null&&co!==void 0?co:0});Rl=zl.cells,Il=zl.fontSize}else{var zl=layoutSinglelineText(wl,{alignment:cs.getAlignment(),fontSize:xa??_a,font:us,bounds:Ol});Rl=[zl.line],Il=zl.fontSize}var Hl=(uo=ga??ba)!==null&&uo!==void 0?uo:Fl;updateDefaultAppearance(ga||xa!==void 0?is:cs.acroField,Hl,us,Il);var ou={x:0+_l/2,y:0+_l/2,width:Cl-_l,height:Tl-_l,borderWidth:_l??0,borderColor:Pl,textColor:Hl,font:us.name,fontSize:Il,color:Al,textLines:Rl,padding:Bl};return __spreadArrays(Dl,drawTextField(ou))},defaultDropdownAppearanceProvider=function(cs,is,us){var hs,lo,co,uo=getDefaultColor(is),ga=getDefaultColor(cs.acroField),ba=getDefaultFontSize(is),xa=getDefaultFontSize(cs.acroField),_a=is.getRectangle(),$a=is.getAppearanceCharacteristics(),xl=is.getBorderStyle(),yl=(hs=cs.getSelected()[0])!==null&&hs!==void 0?hs:"",wl=(lo=xl==null?void 0:xl.getWidth())!==null&&lo!==void 0?lo:0,_l=reduceRotation($a==null?void 0:$a.getRotation()),El=adjustDimsForRotation(_a,_l),Sl=El.width,Cl=El.height,Tl=rotateInPlace(__assign(__assign({},_a),{rotation:_l})),Dl=rgb(0,0,0),Fl=componentsToColor($a==null?void 0:$a.getBorderColor()),Pl=componentsToColor($a==null?void 0:$a.getBackgroundColor()),Al=1,Rl={x:wl+Al,y:wl+Al,width:Sl-(wl+Al)*2,height:Cl-(wl+Al)*2},Il=layoutSinglelineText(yl,{alignment:TextAlignment.Left,fontSize:ba??xa,font:us,bounds:Rl}),Bl=Il.line,Ol=Il.fontSize,zl=(co=uo??ga)!==null&&co!==void 0?co:Dl;updateDefaultAppearance(uo||ba!==void 0?is:cs.acroField,zl,us,Ol);var Hl={x:0+wl/2,y:0+wl/2,width:Sl-wl,height:Cl-wl,borderWidth:wl??0,borderColor:Fl,textColor:zl,font:us.name,fontSize:Ol,color:Pl,textLines:[Bl],padding:Al};return __spreadArrays(Tl,drawTextField(Hl))},defaultOptionListAppearanceProvider=function(cs,is,us){var hs,lo,co=getDefaultColor(is),uo=getDefaultColor(cs.acroField),ga=getDefaultFontSize(is),ba=getDefaultFontSize(cs.acroField),xa=is.getRectangle(),_a=is.getAppearanceCharacteristics(),$a=is.getBorderStyle(),xl=(hs=$a==null?void 0:$a.getWidth())!==null&&hs!==void 0?hs:0,yl=reduceRotation(_a==null?void 0:_a.getRotation()),wl=adjustDimsForRotation(xa,yl),_l=wl.width,El=wl.height,Sl=rotateInPlace(__assign(__assign({},xa),{rotation:yl})),Cl=rgb(0,0,0),Tl=componentsToColor(_a==null?void 0:_a.getBorderColor()),Dl=componentsToColor(_a==null?void 0:_a.getBackgroundColor()),Fl=cs.getOptions(),Pl=cs.getSelected();cs.isSorted()&&Fl.sort();for(var Al="",Rl=0,Il=Fl.length;Rl<Il;Rl++)Al+=Fl[Rl],Rl<Il-1&&(Al+=`
`);for(var Bl=1,Ol={x:xl+Bl,y:xl+Bl,width:_l-(xl+Bl)*2,height:El-(xl+Bl)*2},zl=layoutMultilineText(Al,{alignment:TextAlignment.Left,fontSize:ga??ba,font:us,bounds:Ol}),Hl=zl.lines,ou=zl.fontSize,au=zl.lineHeight,_c=[],Rl=0,Il=Hl.length;Rl<Il;Rl++){var uu=Hl[Rl];Pl.includes(uu.text)&&_c.push(Rl)}var lu=rgb(153/255,193/255,218/255),Kl=(lo=co??uo)!==null&&lo!==void 0?lo:Cl;return updateDefaultAppearance(co||ga!==void 0?is:cs.acroField,Kl,us,ou),__spreadArrays(Sl,drawOptionList({x:0+xl/2,y:0+xl/2,width:_l-xl,height:El-xl,borderWidth:xl??0,borderColor:Tl,textColor:Kl,font:us.name,fontSize:ou,color:Dl,textLines:Hl,lineHeight:au,selectedColor:lu,selectedLines:_c,padding:Bl}))},PDFEmbeddedPage=function(){function cs(is,us,hs){this.alreadyEmbedded=!1,assertIs(is,"ref",[[PDFRef,"PDFRef"]]),assertIs(us,"doc",[[PDFDocument,"PDFDocument"]]),assertIs(hs,"embedder",[[PDFPageEmbedder,"PDFPageEmbedder"]]),this.ref=is,this.doc=us,this.width=hs.width,this.height=hs.height,this.embedder=hs}return cs.prototype.scale=function(is){return assertIs(is,"factor",["number"]),{width:this.width*is,height:this.height*is}},cs.prototype.size=function(){return this.scale(1)},cs.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(is){switch(is.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:is.sent(),this.alreadyEmbedded=!0,is.label=2;case 2:return[2]}})})},cs.of=function(is,us,hs){return new cs(is,us,hs)},cs}(),PDFFont=function(){function cs(is,us,hs){this.modified=!0,assertIs(is,"ref",[[PDFRef,"PDFRef"]]),assertIs(us,"doc",[[PDFDocument,"PDFDocument"]]),assertIs(hs,"embedder",[[CustomFontEmbedder,"CustomFontEmbedder"],[StandardFontEmbedder,"StandardFontEmbedder"]]),this.ref=is,this.doc=us,this.name=hs.fontName,this.embedder=hs}return cs.prototype.encodeText=function(is){return assertIs(is,"text",["string"]),this.modified=!0,this.embedder.encodeText(is)},cs.prototype.widthOfTextAtSize=function(is,us){return assertIs(is,"text",["string"]),assertIs(us,"size",["number"]),this.embedder.widthOfTextAtSize(is,us)},cs.prototype.heightAtSize=function(is,us){var hs;return assertIs(is,"size",["number"]),assertOrUndefined(us==null?void 0:us.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(is,{descender:(hs=us==null?void 0:us.descender)!==null&&hs!==void 0?hs:!0})},cs.prototype.sizeAtHeight=function(is){return assertIs(is,"height",["number"]),this.embedder.sizeOfFontAtHeight(is)},cs.prototype.getCharacterSet=function(){return this.embedder instanceof StandardFontEmbedder?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},cs.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(is){switch(is.label){case 0:return this.modified?[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]:[3,2];case 1:is.sent(),this.modified=!1,is.label=2;case 2:return[2]}})})},cs.of=function(is,us,hs){return new cs(is,us,hs)},cs}(),PDFImage=function(){function cs(is,us,hs){assertIs(is,"ref",[[PDFRef,"PDFRef"]]),assertIs(us,"doc",[[PDFDocument,"PDFDocument"]]),assertIs(hs,"embedder",[[JpegEmbedder,"JpegEmbedder"],[PngEmbedder,"PngEmbedder"]]),this.ref=is,this.doc=us,this.width=hs.width,this.height=hs.height,this.embedder=hs}return cs.prototype.scale=function(is){return assertIs(is,"factor",["number"]),{width:this.width*is,height:this.height*is}},cs.prototype.scaleToFit=function(is,us){assertIs(is,"width",["number"]),assertIs(us,"height",["number"]);var hs=is/this.width,lo=us/this.height,co=Math.min(hs,lo);return this.scale(co)},cs.prototype.size=function(){return this.scale(1)},cs.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){var is,us,hs;return __generator(this,function(lo){switch(lo.label){case 0:return this.embedder?(this.embedTask||(is=this,us=is.doc,hs=is.ref,this.embedTask=this.embedder.embedIntoContext(us.context,hs)),[4,this.embedTask]):[2];case 1:return lo.sent(),this.embedder=void 0,[2]}})})},cs.of=function(is,us,hs){return new cs(is,us,hs)},cs}(),ImageAlignment;(function(cs){cs[cs.Left=0]="Left",cs[cs.Center=1]="Center",cs[cs.Right=2]="Right"})(ImageAlignment||(ImageAlignment={}));var assertFieldAppearanceOptions=function(cs){assertOrUndefined(cs==null?void 0:cs.x,"options.x",["number"]),assertOrUndefined(cs==null?void 0:cs.y,"options.y",["number"]),assertOrUndefined(cs==null?void 0:cs.width,"options.width",["number"]),assertOrUndefined(cs==null?void 0:cs.height,"options.height",["number"]),assertOrUndefined(cs==null?void 0:cs.textColor,"options.textColor",[[Object,"Color"]]),assertOrUndefined(cs==null?void 0:cs.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),assertOrUndefined(cs==null?void 0:cs.borderColor,"options.borderColor",[[Object,"Color"]]),assertOrUndefined(cs==null?void 0:cs.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(cs==null?void 0:cs.rotate,"options.rotate",[[Object,"Rotation"]])},PDFField=function(){function cs(is,us,hs){assertIs(is,"acroField",[[PDFAcroTerminal,"PDFAcroTerminal"]]),assertIs(us,"ref",[[PDFRef,"PDFRef"]]),assertIs(hs,"doc",[[PDFDocument,"PDFDocument"]]),this.acroField=is,this.ref=us,this.doc=hs}return cs.prototype.getName=function(){var is;return(is=this.acroField.getFullyQualifiedName())!==null&&is!==void 0?is:""},cs.prototype.isReadOnly=function(){return this.acroField.hasFlag(AcroFieldFlags.ReadOnly)},cs.prototype.enableReadOnly=function(){this.acroField.setFlagTo(AcroFieldFlags.ReadOnly,!0)},cs.prototype.disableReadOnly=function(){this.acroField.setFlagTo(AcroFieldFlags.ReadOnly,!1)},cs.prototype.isRequired=function(){return this.acroField.hasFlag(AcroFieldFlags.Required)},cs.prototype.enableRequired=function(){this.acroField.setFlagTo(AcroFieldFlags.Required,!0)},cs.prototype.disableRequired=function(){this.acroField.setFlagTo(AcroFieldFlags.Required,!1)},cs.prototype.isExported=function(){return!this.acroField.hasFlag(AcroFieldFlags.NoExport)},cs.prototype.enableExporting=function(){this.acroField.setFlagTo(AcroFieldFlags.NoExport,!1)},cs.prototype.disableExporting=function(){this.acroField.setFlagTo(AcroFieldFlags.NoExport,!0)},cs.prototype.needsAppearancesUpdate=function(){throw new MethodNotImplementedError(this.constructor.name,"needsAppearancesUpdate")},cs.prototype.defaultUpdateAppearances=function(is){throw new MethodNotImplementedError(this.constructor.name,"defaultUpdateAppearances")},cs.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},cs.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},cs.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},cs.prototype.createWidget=function(is){var us,hs=is.textColor,lo=is.backgroundColor,co=is.borderColor,uo=is.borderWidth,ga=toDegrees(is.rotate),ba=is.caption,xa=is.x,_a=is.y,$a=is.width+uo,xl=is.height+uo,yl=!!is.hidden,wl=is.page;assertMultiple(ga,"degreesAngle",90);var _l=PDFWidgetAnnotation.create(this.doc.context,this.ref),El=rotateRectangle({x:xa,y:_a,width:$a,height:xl},uo,ga);_l.setRectangle(El),wl&&_l.setP(wl);var Sl=_l.getOrCreateAppearanceCharacteristics();lo&&Sl.setBackgroundColor(colorToComponents(lo)),Sl.setRotation(ga),ba&&Sl.setCaptions({normal:ba}),co&&Sl.setBorderColor(colorToComponents(co));var Cl=_l.getOrCreateBorderStyle();if(uo!==void 0&&Cl.setWidth(uo),_l.setFlagTo(AnnotationFlags.Print,!0),_l.setFlagTo(AnnotationFlags.Hidden,yl),_l.setFlagTo(AnnotationFlags.Invisible,!1),hs){var Tl=(us=this.acroField.getDefaultAppearance())!==null&&us!==void 0?us:"",Dl=Tl+`
`+setFillingColor(hs).toString();this.acroField.setDefaultAppearance(Dl)}return _l},cs.prototype.updateWidgetAppearanceWithFont=function(is,us,hs){var lo=hs.normal,co=hs.rollover,uo=hs.down;this.updateWidgetAppearances(is,{normal:this.createAppearanceStream(is,lo,us),rollover:co&&this.createAppearanceStream(is,co,us),down:uo&&this.createAppearanceStream(is,uo,us)})},cs.prototype.updateOnOffWidgetAppearance=function(is,us,hs){var lo=hs.normal,co=hs.rollover,uo=hs.down;this.updateWidgetAppearances(is,{normal:this.createAppearanceDict(is,lo,us),rollover:co&&this.createAppearanceDict(is,co,us),down:uo&&this.createAppearanceDict(is,uo,us)})},cs.prototype.updateWidgetAppearances=function(is,us){var hs=us.normal,lo=us.rollover,co=us.down;is.setNormalAppearance(hs),lo?is.setRolloverAppearance(lo):is.removeRolloverAppearance(),co?is.setDownAppearance(co):is.removeDownAppearance()},cs.prototype.createAppearanceStream=function(is,us,hs){var lo,co=this.acroField.dict.context,uo=is.getRectangle(),ga=uo.width,ba=uo.height,xa=hs&&{Font:(lo={},lo[hs.name]=hs.ref,lo)},_a=co.formXObject(us,{Resources:xa,BBox:co.obj([0,0,ga,ba]),Matrix:co.obj([1,0,0,1,0,0])}),$a=co.register(_a);return $a},cs.prototype.createImageAppearanceStream=function(is,us,hs){var lo,co,uo=this.acroField.dict.context,ga=is.getRectangle(),ba=is.getAppearanceCharacteristics(),xa=is.getBorderStyle(),_a=(co=xa==null?void 0:xa.getWidth())!==null&&co!==void 0?co:0,$a=reduceRotation(ba==null?void 0:ba.getRotation()),xl=rotateInPlace(__assign(__assign({},ga),{rotation:$a})),yl=adjustDimsForRotation(ga,$a),wl=us.scaleToFit(yl.width-_a*2,yl.height-_a*2),_l={x:_a,y:_a,width:wl.width,height:wl.height,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)};hs===ImageAlignment.Center?(_l.x+=(yl.width-_a*2)/2-wl.width/2,_l.y+=(yl.height-_a*2)/2-wl.height/2):hs===ImageAlignment.Right&&(_l.x=yl.width-_a-wl.width,_l.y=yl.height-_a-wl.height);var El=this.doc.context.addRandomSuffix("Image",10),Sl=__spreadArrays(xl,drawImage(El,_l)),Cl={XObject:(lo={},lo[El]=us.ref,lo)},Tl=uo.formXObject(Sl,{Resources:Cl,BBox:uo.obj([0,0,ga.width,ga.height]),Matrix:uo.obj([1,0,0,1,0,0])});return uo.register(Tl)},cs.prototype.createAppearanceDict=function(is,us,hs){var lo=this.acroField.dict.context,co=this.createAppearanceStream(is,us.on),uo=this.createAppearanceStream(is,us.off),ga=lo.obj({});return ga.set(hs,co),ga.set(PDFName.of("Off"),uo),ga},cs}(),PDFCheckBox=function(cs){__extends(is,cs);function is(us,hs,lo){var co=cs.call(this,us,hs,lo)||this;return assertIs(us,"acroCheckBox",[[PDFAcroCheckBox,"PDFAcroCheckBox"]]),co.acroField=us,co}return is.prototype.check=function(){var us,hs=(us=this.acroField.getOnValue())!==null&&us!==void 0?us:PDFName.of("Yes");this.markAsDirty(),this.acroField.setValue(hs)},is.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(PDFName.of("Off"))},is.prototype.isChecked=function(){var us=this.acroField.getOnValue();return!!us&&us===this.acroField.getValue()},is.prototype.addToPage=function(us,hs){var lo,co,uo,ga,ba,xa;assertIs(us,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(hs),hs||(hs={}),"textColor"in hs||(hs.textColor=rgb(0,0,0)),"backgroundColor"in hs||(hs.backgroundColor=rgb(1,1,1)),"borderColor"in hs||(hs.borderColor=rgb(0,0,0)),"borderWidth"in hs||(hs.borderWidth=1);var _a=this.createWidget({x:(lo=hs.x)!==null&&lo!==void 0?lo:0,y:(co=hs.y)!==null&&co!==void 0?co:0,width:(uo=hs.width)!==null&&uo!==void 0?uo:50,height:(ga=hs.height)!==null&&ga!==void 0?ga:50,textColor:hs.textColor,backgroundColor:hs.backgroundColor,borderColor:hs.borderColor,borderWidth:(ba=hs.borderWidth)!==null&&ba!==void 0?ba:0,rotate:(xa=hs.rotate)!==null&&xa!==void 0?xa:degrees(0),hidden:hs.hidden,page:us.ref}),$a=this.doc.context.register(_a.dict);this.acroField.addWidget($a),_a.setAppearanceState(PDFName.of("Off")),this.updateWidgetAppearance(_a,PDFName.of("Yes")),us.node.addAnnot($a)},is.prototype.needsAppearancesUpdate=function(){for(var us,hs=this.acroField.getWidgets(),lo=0,co=hs.length;lo<co;lo++){var uo=hs[lo],ga=uo.getAppearanceState(),ba=(us=uo.getAppearances())===null||us===void 0?void 0:us.normal;if(!(ba instanceof PDFDict)||ga&&!ba.has(ga))return!0}return!1},is.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},is.prototype.updateAppearances=function(us){var hs;assertOrUndefined(us,"provider",[Function]);for(var lo=this.acroField.getWidgets(),co=0,uo=lo.length;co<uo;co++){var ga=lo[co],ba=(hs=ga.getOnValue())!==null&&hs!==void 0?hs:PDFName.of("Yes");ba&&this.updateWidgetAppearance(ga,ba,us)}this.markAsClean()},is.prototype.updateWidgetAppearance=function(us,hs,lo){var co=lo??defaultCheckBoxAppearanceProvider,uo=normalizeAppearance(co(this,us));this.updateOnOffWidgetAppearance(us,hs,uo)},is.of=function(us,hs,lo){return new is(us,hs,lo)},is}(PDFField),PDFDropdown=function(cs){__extends(is,cs);function is(us,hs,lo){var co=cs.call(this,us,hs,lo)||this;return assertIs(us,"acroComboBox",[[PDFAcroComboBox,"PDFAcroComboBox"]]),co.acroField=us,co}return is.prototype.getOptions=function(){for(var us=this.acroField.getOptions(),hs=new Array(us.length),lo=0,co=hs.length;lo<co;lo++){var uo=us[lo],ga=uo.display,ba=uo.value;hs[lo]=(ga??ba).decodeText()}return hs},is.prototype.getSelected=function(){for(var us=this.acroField.getValues(),hs=new Array(us.length),lo=0,co=us.length;lo<co;lo++)hs[lo]=us[lo].decodeText();return hs},is.prototype.setOptions=function(us){assertIs(us,"options",[Array]);for(var hs=new Array(us.length),lo=0,co=us.length;lo<co;lo++)hs[lo]={value:PDFHexString.fromText(us[lo])};this.acroField.setOptions(hs)},is.prototype.addOptions=function(us){assertIs(us,"options",["string",Array]);for(var hs=Array.isArray(us)?us:[us],lo=this.acroField.getOptions(),co=new Array(hs.length),uo=0,ga=hs.length;uo<ga;uo++)co[uo]={value:PDFHexString.fromText(hs[uo])};this.acroField.setOptions(lo.concat(co))},is.prototype.select=function(us,hs){hs===void 0&&(hs=!1),assertIs(us,"options",["string",Array]),assertIs(hs,"merge",["boolean"]);var lo=Array.isArray(us)?us:[us],co=this.getOptions(),uo=lo.find(function($a){return!co.includes($a)});uo&&this.enableEditing(),this.markAsDirty(),(lo.length>1||lo.length===1&&hs)&&this.enableMultiselect();for(var ga=new Array(lo.length),ba=0,xa=lo.length;ba<xa;ba++)ga[ba]=PDFHexString.fromText(lo[ba]);if(hs){var _a=this.acroField.getValues();this.acroField.setValues(_a.concat(ga))}else this.acroField.setValues(ga)},is.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},is.prototype.setFontSize=function(us){assertPositive(us,"fontSize"),this.acroField.setFontSize(us),this.markAsDirty()},is.prototype.isEditable=function(){return this.acroField.hasFlag(AcroChoiceFlags.Edit)},is.prototype.enableEditing=function(){this.acroField.setFlagTo(AcroChoiceFlags.Edit,!0)},is.prototype.disableEditing=function(){this.acroField.setFlagTo(AcroChoiceFlags.Edit,!1)},is.prototype.isSorted=function(){return this.acroField.hasFlag(AcroChoiceFlags.Sort)},is.prototype.enableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!0)},is.prototype.disableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!1)},is.prototype.isMultiselect=function(){return this.acroField.hasFlag(AcroChoiceFlags.MultiSelect)},is.prototype.enableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!0)},is.prototype.disableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!1)},is.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(AcroChoiceFlags.DoNotSpellCheck)},is.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(AcroChoiceFlags.DoNotSpellCheck,!1)},is.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(AcroChoiceFlags.DoNotSpellCheck,!0)},is.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(AcroChoiceFlags.CommitOnSelChange)},is.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!0)},is.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!1)},is.prototype.addToPage=function(us,hs){var lo,co,uo,ga,ba,xa,_a;assertIs(us,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(hs),hs||(hs={}),"textColor"in hs||(hs.textColor=rgb(0,0,0)),"backgroundColor"in hs||(hs.backgroundColor=rgb(1,1,1)),"borderColor"in hs||(hs.borderColor=rgb(0,0,0)),"borderWidth"in hs||(hs.borderWidth=1);var $a=this.createWidget({x:(lo=hs.x)!==null&&lo!==void 0?lo:0,y:(co=hs.y)!==null&&co!==void 0?co:0,width:(uo=hs.width)!==null&&uo!==void 0?uo:200,height:(ga=hs.height)!==null&&ga!==void 0?ga:50,textColor:hs.textColor,backgroundColor:hs.backgroundColor,borderColor:hs.borderColor,borderWidth:(ba=hs.borderWidth)!==null&&ba!==void 0?ba:0,rotate:(xa=hs.rotate)!==null&&xa!==void 0?xa:degrees(0),hidden:hs.hidden,page:us.ref}),xl=this.doc.context.register($a.dict);this.acroField.addWidget(xl);var yl=(_a=hs.font)!==null&&_a!==void 0?_a:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance($a,yl),us.node.addAnnot(xl)},is.prototype.needsAppearancesUpdate=function(){var us;if(this.isDirty())return!0;for(var hs=this.acroField.getWidgets(),lo=0,co=hs.length;lo<co;lo++){var uo=hs[lo],ga=((us=uo.getAppearances())===null||us===void 0?void 0:us.normal)instanceof PDFStream;if(!ga)return!0}return!1},is.prototype.defaultUpdateAppearances=function(us){assertIs(us,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(us)},is.prototype.updateAppearances=function(us,hs){assertIs(us,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(hs,"provider",[Function]);for(var lo=this.acroField.getWidgets(),co=0,uo=lo.length;co<uo;co++){var ga=lo[co];this.updateWidgetAppearance(ga,us,hs)}this.markAsClean()},is.prototype.updateWidgetAppearance=function(us,hs,lo){var co=lo??defaultDropdownAppearanceProvider,uo=normalizeAppearance(co(this,us,hs));this.updateWidgetAppearanceWithFont(us,hs,uo)},is.of=function(us,hs,lo){return new is(us,hs,lo)},is}(PDFField),PDFOptionList=function(cs){__extends(is,cs);function is(us,hs,lo){var co=cs.call(this,us,hs,lo)||this;return assertIs(us,"acroListBox",[[PDFAcroListBox,"PDFAcroListBox"]]),co.acroField=us,co}return is.prototype.getOptions=function(){for(var us=this.acroField.getOptions(),hs=new Array(us.length),lo=0,co=hs.length;lo<co;lo++){var uo=us[lo],ga=uo.display,ba=uo.value;hs[lo]=(ga??ba).decodeText()}return hs},is.prototype.getSelected=function(){for(var us=this.acroField.getValues(),hs=new Array(us.length),lo=0,co=us.length;lo<co;lo++)hs[lo]=us[lo].decodeText();return hs},is.prototype.setOptions=function(us){assertIs(us,"options",[Array]),this.markAsDirty();for(var hs=new Array(us.length),lo=0,co=us.length;lo<co;lo++)hs[lo]={value:PDFHexString.fromText(us[lo])};this.acroField.setOptions(hs)},is.prototype.addOptions=function(us){assertIs(us,"options",["string",Array]),this.markAsDirty();for(var hs=Array.isArray(us)?us:[us],lo=this.acroField.getOptions(),co=new Array(hs.length),uo=0,ga=hs.length;uo<ga;uo++)co[uo]={value:PDFHexString.fromText(hs[uo])};this.acroField.setOptions(lo.concat(co))},is.prototype.select=function(us,hs){hs===void 0&&(hs=!1),assertIs(us,"options",["string",Array]),assertIs(hs,"merge",["boolean"]);var lo=Array.isArray(us)?us:[us],co=this.getOptions();assertIsSubset(lo,"option",co),this.markAsDirty(),(lo.length>1||lo.length===1&&hs)&&this.enableMultiselect();for(var uo=new Array(lo.length),ga=0,ba=lo.length;ga<ba;ga++)uo[ga]=PDFHexString.fromText(lo[ga]);if(hs){var xa=this.acroField.getValues();this.acroField.setValues(xa.concat(uo))}else this.acroField.setValues(uo)},is.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},is.prototype.setFontSize=function(us){assertPositive(us,"fontSize"),this.acroField.setFontSize(us),this.markAsDirty()},is.prototype.isSorted=function(){return this.acroField.hasFlag(AcroChoiceFlags.Sort)},is.prototype.enableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!0)},is.prototype.disableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!1)},is.prototype.isMultiselect=function(){return this.acroField.hasFlag(AcroChoiceFlags.MultiSelect)},is.prototype.enableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!0)},is.prototype.disableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!1)},is.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(AcroChoiceFlags.CommitOnSelChange)},is.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!0)},is.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!1)},is.prototype.addToPage=function(us,hs){var lo,co,uo,ga,ba,xa,_a;assertIs(us,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(hs),hs||(hs={}),"textColor"in hs||(hs.textColor=rgb(0,0,0)),"backgroundColor"in hs||(hs.backgroundColor=rgb(1,1,1)),"borderColor"in hs||(hs.borderColor=rgb(0,0,0)),"borderWidth"in hs||(hs.borderWidth=1);var $a=this.createWidget({x:(lo=hs.x)!==null&&lo!==void 0?lo:0,y:(co=hs.y)!==null&&co!==void 0?co:0,width:(uo=hs.width)!==null&&uo!==void 0?uo:200,height:(ga=hs.height)!==null&&ga!==void 0?ga:100,textColor:hs.textColor,backgroundColor:hs.backgroundColor,borderColor:hs.borderColor,borderWidth:(ba=hs.borderWidth)!==null&&ba!==void 0?ba:0,rotate:(xa=hs.rotate)!==null&&xa!==void 0?xa:degrees(0),hidden:hs.hidden,page:us.ref}),xl=this.doc.context.register($a.dict);this.acroField.addWidget(xl);var yl=(_a=hs.font)!==null&&_a!==void 0?_a:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance($a,yl),us.node.addAnnot(xl)},is.prototype.needsAppearancesUpdate=function(){var us;if(this.isDirty())return!0;for(var hs=this.acroField.getWidgets(),lo=0,co=hs.length;lo<co;lo++){var uo=hs[lo],ga=((us=uo.getAppearances())===null||us===void 0?void 0:us.normal)instanceof PDFStream;if(!ga)return!0}return!1},is.prototype.defaultUpdateAppearances=function(us){assertIs(us,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(us)},is.prototype.updateAppearances=function(us,hs){assertIs(us,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(hs,"provider",[Function]);for(var lo=this.acroField.getWidgets(),co=0,uo=lo.length;co<uo;co++){var ga=lo[co];this.updateWidgetAppearance(ga,us,hs)}this.markAsClean()},is.prototype.updateWidgetAppearance=function(us,hs,lo){var co=lo??defaultOptionListAppearanceProvider,uo=normalizeAppearance(co(this,us,hs));this.updateWidgetAppearanceWithFont(us,hs,uo)},is.of=function(us,hs,lo){return new is(us,hs,lo)},is}(PDFField),PDFRadioGroup=function(cs){__extends(is,cs);function is(us,hs,lo){var co=cs.call(this,us,hs,lo)||this;return assertIs(us,"acroRadioButton",[[PDFAcroRadioButton,"PDFAcroRadioButton"]]),co.acroField=us,co}return is.prototype.getOptions=function(){var us=this.acroField.getExportValues();if(us){for(var hs=new Array(us.length),lo=0,co=us.length;lo<co;lo++)hs[lo]=us[lo].decodeText();return hs}for(var uo=this.acroField.getOnValues(),ga=new Array(uo.length),lo=0,co=ga.length;lo<co;lo++)ga[lo]=uo[lo].decodeText();return ga},is.prototype.getSelected=function(){var us=this.acroField.getValue();if(us!==PDFName.of("Off")){var hs=this.acroField.getExportValues();if(hs){for(var lo=this.acroField.getOnValues(),co=0,uo=lo.length;co<uo;co++)if(lo[co]===us)return hs[co].decodeText()}return us.decodeText()}},is.prototype.select=function(us){assertIs(us,"option",["string"]);var hs=this.getOptions();assertIsOneOf(us,"option",hs),this.markAsDirty();var lo=this.acroField.getOnValues(),co=this.acroField.getExportValues();if(co)for(var uo=0,ga=co.length;uo<ga;uo++)co[uo].decodeText()===us&&this.acroField.setValue(lo[uo]);else for(var uo=0,ga=lo.length;uo<ga;uo++){var ba=lo[uo];ba.decodeText()===us&&this.acroField.setValue(ba)}},is.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(PDFName.of("Off"))},is.prototype.isOffToggleable=function(){return!this.acroField.hasFlag(AcroButtonFlags.NoToggleToOff)},is.prototype.enableOffToggling=function(){this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff,!1)},is.prototype.disableOffToggling=function(){this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff,!0)},is.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag(AcroButtonFlags.RadiosInUnison)},is.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison,!1)},is.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison,!0)},is.prototype.addOptionToPage=function(us,hs,lo){var co,uo,ga,ba,xa,_a,$a,xl,yl;assertIs(us,"option",["string"]),assertIs(hs,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(lo);var wl=this.createWidget({x:(co=lo==null?void 0:lo.x)!==null&&co!==void 0?co:0,y:(uo=lo==null?void 0:lo.y)!==null&&uo!==void 0?uo:0,width:(ga=lo==null?void 0:lo.width)!==null&&ga!==void 0?ga:50,height:(ba=lo==null?void 0:lo.height)!==null&&ba!==void 0?ba:50,textColor:(xa=lo==null?void 0:lo.textColor)!==null&&xa!==void 0?xa:rgb(0,0,0),backgroundColor:(_a=lo==null?void 0:lo.backgroundColor)!==null&&_a!==void 0?_a:rgb(1,1,1),borderColor:($a=lo==null?void 0:lo.borderColor)!==null&&$a!==void 0?$a:rgb(0,0,0),borderWidth:(xl=lo==null?void 0:lo.borderWidth)!==null&&xl!==void 0?xl:1,rotate:(yl=lo==null?void 0:lo.rotate)!==null&&yl!==void 0?yl:degrees(0),hidden:lo==null?void 0:lo.hidden,page:hs.ref}),_l=this.doc.context.register(wl.dict),El=this.acroField.addWidgetWithOpt(_l,PDFHexString.fromText(us),!this.isMutuallyExclusive());wl.setAppearanceState(PDFName.of("Off")),this.updateWidgetAppearance(wl,El),hs.node.addAnnot(_l)},is.prototype.needsAppearancesUpdate=function(){for(var us,hs=this.acroField.getWidgets(),lo=0,co=hs.length;lo<co;lo++){var uo=hs[lo],ga=uo.getAppearanceState(),ba=(us=uo.getAppearances())===null||us===void 0?void 0:us.normal;if(!(ba instanceof PDFDict)||ga&&!ba.has(ga))return!0}return!1},is.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},is.prototype.updateAppearances=function(us){assertOrUndefined(us,"provider",[Function]);for(var hs=this.acroField.getWidgets(),lo=0,co=hs.length;lo<co;lo++){var uo=hs[lo],ga=uo.getOnValue();ga&&this.updateWidgetAppearance(uo,ga,us)}},is.prototype.updateWidgetAppearance=function(us,hs,lo){var co=lo??defaultRadioGroupAppearanceProvider,uo=normalizeAppearance(co(this,us));this.updateOnOffWidgetAppearance(us,hs,uo)},is.of=function(us,hs,lo){return new is(us,hs,lo)},is}(PDFField),PDFSignature=function(cs){__extends(is,cs);function is(us,hs,lo){var co=cs.call(this,us,hs,lo)||this;return assertIs(us,"acroSignature",[[PDFAcroSignature,"PDFAcroSignature"]]),co.acroField=us,co}return is.prototype.needsAppearancesUpdate=function(){return!1},is.of=function(us,hs,lo){return new is(us,hs,lo)},is}(PDFField),PDFTextField=function(cs){__extends(is,cs);function is(us,hs,lo){var co=cs.call(this,us,hs,lo)||this;return assertIs(us,"acroText",[[PDFAcroText,"PDFAcroText"]]),co.acroField=us,co}return is.prototype.getText=function(){var us=this.acroField.getValue();if(!us&&this.isRichFormatted())throw new RichTextFieldReadError(this.getName());return us==null?void 0:us.decodeText()},is.prototype.setText=function(us){assertOrUndefined(us,"text",["string"]);var hs=this.getMaxLength();if(hs!==void 0&&us&&us.length>hs)throw new ExceededMaxLengthError(us.length,hs,this.getName());this.markAsDirty(),this.disableRichFormatting(),us?this.acroField.setValue(PDFHexString.fromText(us)):this.acroField.removeValue()},is.prototype.getAlignment=function(){var us=this.acroField.getQuadding();return us===0?TextAlignment.Left:us===1?TextAlignment.Center:us===2?TextAlignment.Right:TextAlignment.Left},is.prototype.setAlignment=function(us){assertIsOneOf(us,"alignment",TextAlignment),this.markAsDirty(),this.acroField.setQuadding(us)},is.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},is.prototype.setMaxLength=function(us){if(assertRangeOrUndefined(us,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),us===void 0)this.acroField.removeMaxLength();else{var hs=this.getText();if(hs&&hs.length>us)throw new InvalidMaxLengthError(hs.length,us,this.getName());this.acroField.setMaxLength(us)}},is.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},is.prototype.setImage=function(us){for(var hs=this.getAlignment(),lo=hs===TextAlignment.Center?ImageAlignment.Center:hs===TextAlignment.Right?ImageAlignment.Right:ImageAlignment.Left,co=this.acroField.getWidgets(),uo=0,ga=co.length;uo<ga;uo++){var ba=co[uo],xa=this.createImageAppearanceStream(ba,us,lo);this.updateWidgetAppearances(ba,{normal:xa})}this.markAsClean()},is.prototype.setFontSize=function(us){assertPositive(us,"fontSize"),this.acroField.setFontSize(us),this.markAsDirty()},is.prototype.isMultiline=function(){return this.acroField.hasFlag(AcroTextFlags.Multiline)},is.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(AcroTextFlags.Multiline,!0)},is.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(AcroTextFlags.Multiline,!1)},is.prototype.isPassword=function(){return this.acroField.hasFlag(AcroTextFlags.Password)},is.prototype.enablePassword=function(){this.acroField.setFlagTo(AcroTextFlags.Password,!0)},is.prototype.disablePassword=function(){this.acroField.setFlagTo(AcroTextFlags.Password,!1)},is.prototype.isFileSelector=function(){return this.acroField.hasFlag(AcroTextFlags.FileSelect)},is.prototype.enableFileSelection=function(){this.acroField.setFlagTo(AcroTextFlags.FileSelect,!0)},is.prototype.disableFileSelection=function(){this.acroField.setFlagTo(AcroTextFlags.FileSelect,!1)},is.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(AcroTextFlags.DoNotSpellCheck)},is.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotSpellCheck,!1)},is.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotSpellCheck,!0)},is.prototype.isScrollable=function(){return!this.acroField.hasFlag(AcroTextFlags.DoNotScroll)},is.prototype.enableScrolling=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotScroll,!1)},is.prototype.disableScrolling=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotScroll,!0)},is.prototype.isCombed=function(){return this.acroField.hasFlag(AcroTextFlags.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&this.getMaxLength()!==void 0},is.prototype.enableCombing=function(){if(this.getMaxLength()===void 0){var us="PDFTextFields must have a max length in order to be combed";console.warn(us)}this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(AcroTextFlags.Comb,!0)},is.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(AcroTextFlags.Comb,!1)},is.prototype.isRichFormatted=function(){return this.acroField.hasFlag(AcroTextFlags.RichText)},is.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(AcroTextFlags.RichText,!0)},is.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(AcroTextFlags.RichText,!1)},is.prototype.addToPage=function(us,hs){var lo,co,uo,ga,ba,xa,_a;assertIs(us,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(hs),hs||(hs={}),"textColor"in hs||(hs.textColor=rgb(0,0,0)),"backgroundColor"in hs||(hs.backgroundColor=rgb(1,1,1)),"borderColor"in hs||(hs.borderColor=rgb(0,0,0)),"borderWidth"in hs||(hs.borderWidth=1);var $a=this.createWidget({x:(lo=hs.x)!==null&&lo!==void 0?lo:0,y:(co=hs.y)!==null&&co!==void 0?co:0,width:(uo=hs.width)!==null&&uo!==void 0?uo:200,height:(ga=hs.height)!==null&&ga!==void 0?ga:50,textColor:hs.textColor,backgroundColor:hs.backgroundColor,borderColor:hs.borderColor,borderWidth:(ba=hs.borderWidth)!==null&&ba!==void 0?ba:0,rotate:(xa=hs.rotate)!==null&&xa!==void 0?xa:degrees(0),hidden:hs.hidden,page:us.ref}),xl=this.doc.context.register($a.dict);this.acroField.addWidget(xl);var yl=(_a=hs.font)!==null&&_a!==void 0?_a:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance($a,yl),us.node.addAnnot(xl)},is.prototype.needsAppearancesUpdate=function(){var us;if(this.isDirty())return!0;for(var hs=this.acroField.getWidgets(),lo=0,co=hs.length;lo<co;lo++){var uo=hs[lo],ga=((us=uo.getAppearances())===null||us===void 0?void 0:us.normal)instanceof PDFStream;if(!ga)return!0}return!1},is.prototype.defaultUpdateAppearances=function(us){assertIs(us,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(us)},is.prototype.updateAppearances=function(us,hs){assertIs(us,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(hs,"provider",[Function]);for(var lo=this.acroField.getWidgets(),co=0,uo=lo.length;co<uo;co++){var ga=lo[co];this.updateWidgetAppearance(ga,us,hs)}this.markAsClean()},is.prototype.updateWidgetAppearance=function(us,hs,lo){var co=lo??defaultTextFieldAppearanceProvider,uo=normalizeAppearance(co(this,us,hs));this.updateWidgetAppearanceWithFont(us,hs,uo)},is.of=function(us,hs,lo){return new is(us,hs,lo)},is}(PDFField),StandardFonts;(function(cs){cs.Courier="Courier",cs.CourierBold="Courier-Bold",cs.CourierOblique="Courier-Oblique",cs.CourierBoldOblique="Courier-BoldOblique",cs.Helvetica="Helvetica",cs.HelveticaBold="Helvetica-Bold",cs.HelveticaOblique="Helvetica-Oblique",cs.HelveticaBoldOblique="Helvetica-BoldOblique",cs.TimesRoman="Times-Roman",cs.TimesRomanBold="Times-Bold",cs.TimesRomanItalic="Times-Italic",cs.TimesRomanBoldItalic="Times-BoldItalic",cs.Symbol="Symbol",cs.ZapfDingbats="ZapfDingbats"})(StandardFonts||(StandardFonts={}));var PDFForm=function(){function cs(is,us){var hs=this;this.embedDefaultFont=function(){return hs.doc.embedStandardFont(StandardFonts.Helvetica)},assertIs(is,"acroForm",[[PDFAcroForm,"PDFAcroForm"]]),assertIs(us,"doc",[[PDFDocument,"PDFDocument"]]),this.acroForm=is,this.doc=us,this.dirtyFields=new Set,this.defaultFontCache=Cache.populatedBy(this.embedDefaultFont)}return cs.prototype.hasXFA=function(){return this.acroForm.dict.has(PDFName.of("XFA"))},cs.prototype.deleteXFA=function(){this.acroForm.dict.delete(PDFName.of("XFA"))},cs.prototype.getFields=function(){for(var is=this.acroForm.getAllFields(),us=[],hs=0,lo=is.length;hs<lo;hs++){var co=is[hs],uo=co[0],ga=co[1],ba=convertToPDFField(uo,ga,this.doc);ba&&us.push(ba)}return us},cs.prototype.getFieldMaybe=function(is){assertIs(is,"name",["string"]);for(var us=this.getFields(),hs=0,lo=us.length;hs<lo;hs++){var co=us[hs];if(co.getName()===is)return co}},cs.prototype.getField=function(is){assertIs(is,"name",["string"]);var us=this.getFieldMaybe(is);if(us)return us;throw new NoSuchFieldError(is)},cs.prototype.getButton=function(is){assertIs(is,"name",["string"]);var us=this.getField(is);if(us instanceof PDFButton)return us;throw new UnexpectedFieldTypeError(is,PDFButton,us)},cs.prototype.getCheckBox=function(is){assertIs(is,"name",["string"]);var us=this.getField(is);if(us instanceof PDFCheckBox)return us;throw new UnexpectedFieldTypeError(is,PDFCheckBox,us)},cs.prototype.getDropdown=function(is){assertIs(is,"name",["string"]);var us=this.getField(is);if(us instanceof PDFDropdown)return us;throw new UnexpectedFieldTypeError(is,PDFDropdown,us)},cs.prototype.getOptionList=function(is){assertIs(is,"name",["string"]);var us=this.getField(is);if(us instanceof PDFOptionList)return us;throw new UnexpectedFieldTypeError(is,PDFOptionList,us)},cs.prototype.getRadioGroup=function(is){assertIs(is,"name",["string"]);var us=this.getField(is);if(us instanceof PDFRadioGroup)return us;throw new UnexpectedFieldTypeError(is,PDFRadioGroup,us)},cs.prototype.getSignature=function(is){assertIs(is,"name",["string"]);var us=this.getField(is);if(us instanceof PDFSignature)return us;throw new UnexpectedFieldTypeError(is,PDFSignature,us)},cs.prototype.getTextField=function(is){assertIs(is,"name",["string"]);var us=this.getField(is);if(us instanceof PDFTextField)return us;throw new UnexpectedFieldTypeError(is,PDFTextField,us)},cs.prototype.createButton=function(is){assertIs(is,"name",["string"]);var us=splitFieldName(is),hs=this.findOrCreateNonTerminals(us.nonTerminal),lo=PDFAcroPushButton.create(this.doc.context);return lo.setPartialName(us.terminal),addFieldToParent(hs,[lo,lo.ref],us.terminal),PDFButton.of(lo,lo.ref,this.doc)},cs.prototype.createCheckBox=function(is){assertIs(is,"name",["string"]);var us=splitFieldName(is),hs=this.findOrCreateNonTerminals(us.nonTerminal),lo=PDFAcroCheckBox.create(this.doc.context);return lo.setPartialName(us.terminal),addFieldToParent(hs,[lo,lo.ref],us.terminal),PDFCheckBox.of(lo,lo.ref,this.doc)},cs.prototype.createDropdown=function(is){assertIs(is,"name",["string"]);var us=splitFieldName(is),hs=this.findOrCreateNonTerminals(us.nonTerminal),lo=PDFAcroComboBox.create(this.doc.context);return lo.setPartialName(us.terminal),addFieldToParent(hs,[lo,lo.ref],us.terminal),PDFDropdown.of(lo,lo.ref,this.doc)},cs.prototype.createOptionList=function(is){assertIs(is,"name",["string"]);var us=splitFieldName(is),hs=this.findOrCreateNonTerminals(us.nonTerminal),lo=PDFAcroListBox.create(this.doc.context);return lo.setPartialName(us.terminal),addFieldToParent(hs,[lo,lo.ref],us.terminal),PDFOptionList.of(lo,lo.ref,this.doc)},cs.prototype.createRadioGroup=function(is){assertIs(is,"name",["string"]);var us=splitFieldName(is),hs=this.findOrCreateNonTerminals(us.nonTerminal),lo=PDFAcroRadioButton.create(this.doc.context);return lo.setPartialName(us.terminal),addFieldToParent(hs,[lo,lo.ref],us.terminal),PDFRadioGroup.of(lo,lo.ref,this.doc)},cs.prototype.createTextField=function(is){assertIs(is,"name",["string"]);var us=splitFieldName(is),hs=this.findOrCreateNonTerminals(us.nonTerminal),lo=PDFAcroText.create(this.doc.context);return lo.setPartialName(us.terminal),addFieldToParent(hs,[lo,lo.ref],us.terminal),PDFTextField.of(lo,lo.ref,this.doc)},cs.prototype.flatten=function(is){is===void 0&&(is={updateFieldAppearances:!0}),is.updateFieldAppearances&&this.updateFieldAppearances();for(var us=this.getFields(),hs=0,lo=us.length;hs<lo;hs++){for(var co=us[hs],uo=co.acroField.getWidgets(),ga=0,ba=uo.length;ga<ba;ga++){var xa=uo[ga],_a=this.findWidgetPage(xa),$a=this.findWidgetAppearanceRef(co,xa),xl=_a.node.newXObject("FlatWidget",$a),yl=xa.getRectangle(),wl=__spreadArrays([pushGraphicsState(),translate(yl.x,yl.y)],rotateInPlace(__assign(__assign({},yl),{rotation:0})),[drawObject(xl),popGraphicsState()]).filter(Boolean);_a.pushOperators.apply(_a,wl)}this.removeField(co)}},cs.prototype.removeField=function(is){for(var us=is.acroField.getWidgets(),hs=new Set,lo=0,co=us.length;lo<co;lo++){var uo=us[lo],ga=this.findWidgetAppearanceRef(is,uo),ba=this.findWidgetPage(uo);hs.add(ba),ba.node.removeAnnot(ga)}hs.forEach(function(yl){return yl.node.removeAnnot(is.ref)}),this.acroForm.removeField(is.acroField);for(var xa=is.acroField.normalizedEntries().Kids,_a=xa.size(),$a=0;$a<_a;$a++){var xl=xa.get($a);xl instanceof PDFRef&&this.doc.context.delete(xl)}this.doc.context.delete(is.ref)},cs.prototype.updateFieldAppearances=function(is){assertOrUndefined(is,"font",[[PDFFont,"PDFFont"]]),is=is??this.getDefaultFont();for(var us=this.getFields(),hs=0,lo=us.length;hs<lo;hs++){var co=us[hs];co.needsAppearancesUpdate()&&co.defaultUpdateAppearances(is)}},cs.prototype.markFieldAsDirty=function(is){assertOrUndefined(is,"fieldRef",[[PDFRef,"PDFRef"]]),this.dirtyFields.add(is)},cs.prototype.markFieldAsClean=function(is){assertOrUndefined(is,"fieldRef",[[PDFRef,"PDFRef"]]),this.dirtyFields.delete(is)},cs.prototype.fieldIsDirty=function(is){return assertOrUndefined(is,"fieldRef",[[PDFRef,"PDFRef"]]),this.dirtyFields.has(is)},cs.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},cs.prototype.findWidgetPage=function(is){var us=is.P(),hs=this.doc.getPages().find(function(co){return co.ref===us});if(hs===void 0){var lo=this.doc.context.getObjectRef(is.dict);if(lo===void 0)throw new Error("Could not find PDFRef for PDFObject");if(hs=this.doc.findPageForAnnotationRef(lo),hs===void 0)throw new Error("Could not find page for PDFRef "+lo)}return hs},cs.prototype.findWidgetAppearanceRef=function(is,us){var hs,lo=us.getNormalAppearance();if(lo instanceof PDFDict&&(is instanceof PDFCheckBox||is instanceof PDFRadioGroup)){var co=is.acroField.getValue(),uo=(hs=lo.get(co))!==null&&hs!==void 0?hs:lo.get(PDFName.of("Off"));uo instanceof PDFRef&&(lo=uo)}if(!(lo instanceof PDFRef)){var ga=is.getName();throw new Error("Failed to extract appearance ref for: "+ga)}return lo},cs.prototype.findOrCreateNonTerminals=function(is){for(var us=[this.acroForm],hs=0,lo=is.length;hs<lo;hs++){var co=is[hs];if(!co)throw new InvalidFieldNamePartError(co);var uo=us[0],ga=us[1],ba=this.findNonTerminal(co,uo);if(ba)us=ba;else{var xa=PDFAcroNonTerminal.create(this.doc.context);xa.setPartialName(co),xa.setParent(ga);var _a=this.doc.context.register(xa.dict);uo.addField(_a),us=[xa,_a]}}return us},cs.prototype.findNonTerminal=function(is,us){for(var hs=us instanceof PDFAcroForm?this.acroForm.getFields():createPDFAcroFields(us.Kids()),lo=0,co=hs.length;lo<co;lo++){var uo=hs[lo],ga=uo[0],ba=uo[1];if(ga.getPartialName()===is){if(ga instanceof PDFAcroNonTerminal)return[ga,ba];throw new FieldAlreadyExistsError(is)}}},cs.of=function(is,us){return new cs(is,us)},cs}(),convertToPDFField=function(cs,is,us){if(cs instanceof PDFAcroPushButton)return PDFButton.of(cs,is,us);if(cs instanceof PDFAcroCheckBox)return PDFCheckBox.of(cs,is,us);if(cs instanceof PDFAcroComboBox)return PDFDropdown.of(cs,is,us);if(cs instanceof PDFAcroListBox)return PDFOptionList.of(cs,is,us);if(cs instanceof PDFAcroText)return PDFTextField.of(cs,is,us);if(cs instanceof PDFAcroRadioButton)return PDFRadioGroup.of(cs,is,us);if(cs instanceof PDFAcroSignature)return PDFSignature.of(cs,is,us)},splitFieldName=function(cs){if(cs.length===0)throw new Error("PDF field names must not be empty strings");for(var is=cs.split("."),us=0,hs=is.length;us<hs;us++)if(is[us]==="")throw new Error('Periods in PDF field names must be separated by at least one character: "'+cs+'"');return is.length===1?{nonTerminal:[],terminal:is[0]}:{nonTerminal:is.slice(0,is.length-1),terminal:is[is.length-1]}},addFieldToParent=function(cs,is,us){for(var hs=cs[0],lo=cs[1],co=is[0],uo=is[1],ga=hs.normalizedEntries(),ba=createPDFAcroFields("Kids"in ga?ga.Kids:ga.Fields),xa=0,_a=ba.length;xa<_a;xa++)if(ba[xa][0].getPartialName()===us)throw new FieldAlreadyExistsError(us);hs.addField(uo),co.setParent(lo)},PageSizes={A4:[595.28,841.89]},ParseSpeeds;(function(cs){cs[cs.Fastest=1/0]="Fastest",cs[cs.Fast=1500]="Fast",cs[cs.Medium=500]="Medium",cs[cs.Slow=100]="Slow"})(ParseSpeeds||(ParseSpeeds={}));var PDFEmbeddedFile=function(){function cs(is,us,hs){this.alreadyEmbedded=!1,this.ref=is,this.doc=us,this.embedder=hs}return cs.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){var is,us,hs,lo,co;return __generator(this,function(uo){switch(uo.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:is=uo.sent(),this.doc.catalog.has(PDFName.of("Names"))||this.doc.catalog.set(PDFName.of("Names"),this.doc.context.obj({})),us=this.doc.catalog.lookup(PDFName.of("Names"),PDFDict),us.has(PDFName.of("EmbeddedFiles"))||us.set(PDFName.of("EmbeddedFiles"),this.doc.context.obj({})),hs=us.lookup(PDFName.of("EmbeddedFiles"),PDFDict),hs.has(PDFName.of("Names"))||hs.set(PDFName.of("Names"),this.doc.context.obj([])),lo=hs.lookup(PDFName.of("Names"),PDFArray),lo.push(PDFHexString.fromText(this.embedder.fileName)),lo.push(is),this.doc.catalog.has(PDFName.of("AF"))||this.doc.catalog.set(PDFName.of("AF"),this.doc.context.obj([])),co=this.doc.catalog.lookup(PDFName.of("AF"),PDFArray),co.push(is),this.alreadyEmbedded=!0,uo.label=2;case 2:return[2]}})})},cs.of=function(is,us,hs){return new cs(is,us,hs)},cs}(),PDFJavaScript=function(){function cs(is,us,hs){this.alreadyEmbedded=!1,this.ref=is,this.doc=us,this.embedder=hs}return cs.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){var is,us,hs,lo,co,uo,ga;return __generator(this,function(ba){switch(ba.label){case 0:return this.alreadyEmbedded?[3,2]:(is=this.doc,us=is.catalog,hs=is.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]);case 1:lo=ba.sent(),us.has(PDFName.of("Names"))||us.set(PDFName.of("Names"),hs.obj({})),co=us.lookup(PDFName.of("Names"),PDFDict),co.has(PDFName.of("JavaScript"))||co.set(PDFName.of("JavaScript"),hs.obj({})),uo=co.lookup(PDFName.of("JavaScript"),PDFDict),uo.has(PDFName.of("Names"))||uo.set(PDFName.of("Names"),hs.obj([])),ga=uo.lookup(PDFName.of("Names"),PDFArray),ga.push(PDFHexString.fromText(this.embedder.scriptName)),ga.push(lo),this.alreadyEmbedded=!0,ba.label=2;case 2:return[2]}})})},cs.of=function(is,us,hs){return new cs(is,us,hs)},cs}(),JavaScriptEmbedder=function(){function cs(is,us){this.script=is,this.scriptName=us}return cs.for=function(is,us){return new cs(is,us)},cs.prototype.embedIntoContext=function(is,us){return __awaiter(this,void 0,void 0,function(){var hs;return __generator(this,function(lo){return hs=is.obj({Type:"Action",S:"JavaScript",JS:PDFHexString.fromText(this.script)}),us?(is.assign(us,hs),[2,us]):[2,is.register(hs)]})})},cs}(),PDFDocument=function(){function cs(is,us,hs){var lo=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var co=[];return lo.catalog.Pages().traverse(function(uo,ga){if(uo instanceof PDFPageLeaf){var ba=lo.pageMap.get(uo);ba||(ba=PDFPage.of(uo,ga,lo),lo.pageMap.set(uo,ba)),co.push(ba)}}),co},this.getOrCreateForm=function(){var co=lo.catalog.getOrCreateAcroForm();return PDFForm.of(co,lo)},assertIs(is,"context",[[PDFContext,"PDFContext"]]),assertIs(us,"ignoreEncryption",["boolean"]),this.context=is,this.catalog=is.lookup(is.trailerInfo.Root),this.isEncrypted=!!is.lookup(is.trailerInfo.Encrypt),this.pageCache=Cache.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=Cache.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!us&&this.isEncrypted)throw new EncryptedPDFError;hs&&this.updateInfoDict()}return cs.load=function(is,us){return us===void 0&&(us={}),__awaiter(this,void 0,void 0,function(){var hs,lo,co,uo,ga,ba,xa,_a,$a,xl,yl,wl;return __generator(this,function(_l){switch(_l.label){case 0:return hs=us.ignoreEncryption,lo=hs===void 0?!1:hs,co=us.parseSpeed,uo=co===void 0?ParseSpeeds.Slow:co,ga=us.throwOnInvalidObject,ba=ga===void 0?!1:ga,xa=us.updateMetadata,_a=xa===void 0?!0:xa,$a=us.capNumbers,xl=$a===void 0?!1:$a,assertIs(is,"pdf",["string",Uint8Array,ArrayBuffer]),assertIs(lo,"ignoreEncryption",["boolean"]),assertIs(uo,"parseSpeed",["number"]),assertIs(ba,"throwOnInvalidObject",["boolean"]),yl=toUint8Array(is),[4,PDFParser.forBytesWithOptions(yl,uo,ba,xl).parseDocument()];case 1:return wl=_l.sent(),[2,new cs(wl,lo,_a)]}})})},cs.create=function(is){return is===void 0&&(is={}),__awaiter(this,void 0,void 0,function(){var us,hs,lo,co,uo,ga;return __generator(this,function(ba){return us=is.updateMetadata,hs=us===void 0?!0:us,lo=PDFContext.create(),co=PDFPageTree.withContext(lo),uo=lo.register(co),ga=PDFCatalog.withContextAndPages(lo,uo),lo.trailerInfo.Root=lo.register(ga),[2,new cs(lo,!1,hs)]})})},cs.prototype.registerFontkit=function(is){this.fontkit=is},cs.prototype.getForm=function(){var is=this.formCache.access();return is.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),is.deleteXFA()),is},cs.prototype.getTitle=function(){var is=this.getInfoDict().lookup(PDFName.Title);if(is)return assertIsLiteralOrHexString(is),is.decodeText()},cs.prototype.getAuthor=function(){var is=this.getInfoDict().lookup(PDFName.Author);if(is)return assertIsLiteralOrHexString(is),is.decodeText()},cs.prototype.getSubject=function(){var is=this.getInfoDict().lookup(PDFName.Subject);if(is)return assertIsLiteralOrHexString(is),is.decodeText()},cs.prototype.getKeywords=function(){var is=this.getInfoDict().lookup(PDFName.Keywords);if(is)return assertIsLiteralOrHexString(is),is.decodeText()},cs.prototype.getCreator=function(){var is=this.getInfoDict().lookup(PDFName.Creator);if(is)return assertIsLiteralOrHexString(is),is.decodeText()},cs.prototype.getProducer=function(){var is=this.getInfoDict().lookup(PDFName.Producer);if(is)return assertIsLiteralOrHexString(is),is.decodeText()},cs.prototype.getCreationDate=function(){var is=this.getInfoDict().lookup(PDFName.CreationDate);if(is)return assertIsLiteralOrHexString(is),is.decodeDate()},cs.prototype.getModificationDate=function(){var is=this.getInfoDict().lookup(PDFName.ModDate);if(is)return assertIsLiteralOrHexString(is),is.decodeDate()},cs.prototype.setTitle=function(is,us){assertIs(is,"title",["string"]);var hs=PDFName.of("Title");if(this.getInfoDict().set(hs,PDFHexString.fromText(is)),us!=null&&us.showInWindowTitleBar){var lo=this.catalog.getOrCreateViewerPreferences();lo.setDisplayDocTitle(!0)}},cs.prototype.setAuthor=function(is){assertIs(is,"author",["string"]);var us=PDFName.of("Author");this.getInfoDict().set(us,PDFHexString.fromText(is))},cs.prototype.setSubject=function(is){assertIs(is,"author",["string"]);var us=PDFName.of("Subject");this.getInfoDict().set(us,PDFHexString.fromText(is))},cs.prototype.setKeywords=function(is){assertIs(is,"keywords",[Array]);var us=PDFName.of("Keywords");this.getInfoDict().set(us,PDFHexString.fromText(is.join(" ")))},cs.prototype.setCreator=function(is){assertIs(is,"creator",["string"]);var us=PDFName.of("Creator");this.getInfoDict().set(us,PDFHexString.fromText(is))},cs.prototype.setProducer=function(is){assertIs(is,"creator",["string"]);var us=PDFName.of("Producer");this.getInfoDict().set(us,PDFHexString.fromText(is))},cs.prototype.setLanguage=function(is){assertIs(is,"language",["string"]);var us=PDFName.of("Lang");this.catalog.set(us,PDFString.of(is))},cs.prototype.setCreationDate=function(is){assertIs(is,"creationDate",[[Date,"Date"]]);var us=PDFName.of("CreationDate");this.getInfoDict().set(us,PDFString.fromDate(is))},cs.prototype.setModificationDate=function(is){assertIs(is,"modificationDate",[[Date,"Date"]]);var us=PDFName.of("ModDate");this.getInfoDict().set(us,PDFString.fromDate(is))},cs.prototype.getPageCount=function(){return this.pageCount===void 0&&(this.pageCount=this.getPages().length),this.pageCount},cs.prototype.getPages=function(){return this.pageCache.access()},cs.prototype.getPage=function(is){var us=this.getPages();return assertRange(is,"index",0,us.length-1),us[is]},cs.prototype.getPageIndices=function(){return range(0,this.getPageCount())},cs.prototype.removePage=function(is){var us=this.getPageCount();if(this.pageCount===0)throw new RemovePageFromEmptyDocumentError;assertRange(is,"index",0,us-1),this.catalog.removeLeafNode(is),this.pageCount=us-1},cs.prototype.addPage=function(is){return assertIs(is,"page",["undefined",[PDFPage,"PDFPage"],Array]),this.insertPage(this.getPageCount(),is)},cs.prototype.insertPage=function(is,us){var hs=this.getPageCount();if(assertRange(is,"index",0,hs),assertIs(us,"page",["undefined",[PDFPage,"PDFPage"],Array]),!us||Array.isArray(us)){var lo=Array.isArray(us)?us:PageSizes.A4;us=PDFPage.create(this),us.setSize.apply(us,lo)}else if(us.doc!==this)throw new ForeignPageError;var co=this.catalog.insertLeafNode(us.ref,is);return us.node.setParent(co),this.pageMap.set(us.node,us),this.pageCache.invalidate(),this.pageCount=hs+1,us},cs.prototype.copyPages=function(is,us){return __awaiter(this,void 0,void 0,function(){var hs,lo,co,uo,ga,ba,xa,_a;return __generator(this,function($a){switch($a.label){case 0:return assertIs(is,"srcDoc",[[cs,"PDFDocument"]]),assertIs(us,"indices",[Array]),[4,is.flush()];case 1:for($a.sent(),hs=PDFObjectCopier.for(is.context,this.context),lo=is.getPages(),co=new Array(us.length),uo=0,ga=us.length;uo<ga;uo++)ba=lo[us[uo]],xa=hs.copy(ba.node),_a=this.context.register(xa),co[uo]=PDFPage.of(xa,_a,this);return[2,co]}})})},cs.prototype.copy=function(){return __awaiter(this,void 0,void 0,function(){var is,us,hs,lo;return __generator(this,function(co){switch(co.label){case 0:return[4,cs.create()];case 1:return is=co.sent(),[4,is.copyPages(this,this.getPageIndices())];case 2:for(us=co.sent(),hs=0,lo=us.length;hs<lo;hs++)is.addPage(us[hs]);return this.getAuthor()!==void 0&&is.setAuthor(this.getAuthor()),this.getCreationDate()!==void 0&&is.setCreationDate(this.getCreationDate()),this.getCreator()!==void 0&&is.setCreator(this.getCreator()),this.getModificationDate()!==void 0&&is.setModificationDate(this.getModificationDate()),this.getProducer()!==void 0&&is.setProducer(this.getProducer()),this.getSubject()!==void 0&&is.setSubject(this.getSubject()),this.getTitle()!==void 0&&is.setTitle(this.getTitle()),is.defaultWordBreaks=this.defaultWordBreaks,[2,is]}})})},cs.prototype.addJavaScript=function(is,us){assertIs(is,"name",["string"]),assertIs(us,"script",["string"]);var hs=JavaScriptEmbedder.for(us,is),lo=this.context.nextRef(),co=PDFJavaScript.of(lo,this,hs);this.javaScripts.push(co)},cs.prototype.attach=function(is,us,hs){return hs===void 0&&(hs={}),__awaiter(this,void 0,void 0,function(){var lo,co,uo,ga;return __generator(this,function(ba){return assertIs(is,"attachment",["string",Uint8Array,ArrayBuffer]),assertIs(us,"name",["string"]),assertOrUndefined(hs.mimeType,"mimeType",["string"]),assertOrUndefined(hs.description,"description",["string"]),assertOrUndefined(hs.creationDate,"options.creationDate",[Date]),assertOrUndefined(hs.modificationDate,"options.modificationDate",[Date]),assertIsOneOfOrUndefined(hs.afRelationship,"options.afRelationship",AFRelationship),lo=toUint8Array(is),co=FileEmbedder.for(lo,us,hs),uo=this.context.nextRef(),ga=PDFEmbeddedFile.of(uo,this,co),this.embeddedFiles.push(ga),[2]})})},cs.prototype.embedFont=function(is,us){return us===void 0&&(us={}),__awaiter(this,void 0,void 0,function(){var hs,lo,co,uo,ga,ba,xa,_a,$a,xl;return __generator(this,function(yl){switch(yl.label){case 0:return hs=us.subset,lo=hs===void 0?!1:hs,co=us.customName,uo=us.features,assertIs(is,"font",["string",Uint8Array,ArrayBuffer]),assertIs(lo,"subset",["boolean"]),isStandardFont(is)?(ga=StandardFontEmbedder.for(is,co),[3,7]):[3,1];case 1:return canBeConvertedToUint8Array(is)?(ba=toUint8Array(is),xa=this.assertFontkit(),lo?[4,CustomFontSubsetEmbedder.for(xa,ba,co,uo)]:[3,3]):[3,6];case 2:return _a=yl.sent(),[3,5];case 3:return[4,CustomFontEmbedder.for(xa,ba,co,uo)];case 4:_a=yl.sent(),yl.label=5;case 5:return ga=_a,[3,7];case 6:throw new TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return $a=this.context.nextRef(),xl=PDFFont.of($a,this,ga),this.fonts.push(xl),[2,xl]}})})},cs.prototype.embedStandardFont=function(is,us){if(assertIs(is,"font",["string"]),!isStandardFont(is))throw new TypeError("`font` must be one of type `StandardFonts`");var hs=StandardFontEmbedder.for(is,us),lo=this.context.nextRef(),co=PDFFont.of(lo,this,hs);return this.fonts.push(co),co},cs.prototype.embedJpg=function(is){return __awaiter(this,void 0,void 0,function(){var us,hs,lo,co;return __generator(this,function(uo){switch(uo.label){case 0:return assertIs(is,"jpg",["string",Uint8Array,ArrayBuffer]),us=toUint8Array(is),[4,JpegEmbedder.for(us)];case 1:return hs=uo.sent(),lo=this.context.nextRef(),co=PDFImage.of(lo,this,hs),this.images.push(co),[2,co]}})})},cs.prototype.embedPng=function(is){return __awaiter(this,void 0,void 0,function(){var us,hs,lo,co;return __generator(this,function(uo){switch(uo.label){case 0:return assertIs(is,"png",["string",Uint8Array,ArrayBuffer]),us=toUint8Array(is),[4,PngEmbedder.for(us)];case 1:return hs=uo.sent(),lo=this.context.nextRef(),co=PDFImage.of(lo,this,hs),this.images.push(co),[2,co]}})})},cs.prototype.embedPdf=function(is,us){return us===void 0&&(us=[0]),__awaiter(this,void 0,void 0,function(){var hs,lo,co;return __generator(this,function(uo){switch(uo.label){case 0:return assertIs(is,"pdf",["string",Uint8Array,ArrayBuffer,[cs,"PDFDocument"]]),assertIs(us,"indices",[Array]),is instanceof cs?(lo=is,[3,3]):[3,1];case 1:return[4,cs.load(is)];case 2:lo=uo.sent(),uo.label=3;case 3:return hs=lo,co=pluckIndices(hs.getPages(),us),[2,this.embedPages(co)]}})})},cs.prototype.embedPage=function(is,us,hs){return __awaiter(this,void 0,void 0,function(){var lo;return __generator(this,function(co){switch(co.label){case 0:return assertIs(is,"page",[[PDFPage,"PDFPage"]]),[4,this.embedPages([is],[us],[hs])];case 1:return lo=co.sent()[0],[2,lo]}})})},cs.prototype.embedPages=function(is,us,hs){return us===void 0&&(us=[]),hs===void 0&&(hs=[]),__awaiter(this,void 0,void 0,function(){var xa,_a,lo,co,uo,ga,ba,xa,_a,$a,xl,yl,wl,_l,El;return __generator(this,function(Sl){switch(Sl.label){case 0:if(is.length===0)return[2,[]];for(xa=0,_a=is.length-1;xa<_a;xa++)if(lo=is[xa],co=is[xa+1],lo.node.context!==co.node.context)throw new PageEmbeddingMismatchedContextError;uo=is[0].node.context,ga=uo===this.context?function(Cl){return Cl}:PDFObjectCopier.for(uo,this.context).copy,ba=new Array(is.length),xa=0,_a=is.length,Sl.label=1;case 1:return xa<_a?($a=ga(is[xa].node),xl=us[xa],yl=hs[xa],[4,PDFPageEmbedder.for($a,xl,yl)]):[3,4];case 2:wl=Sl.sent(),_l=this.context.nextRef(),ba[xa]=PDFEmbeddedPage.of(_l,this,wl),Sl.label=3;case 3:return xa++,[3,1];case 4:return(El=this.embeddedPages).push.apply(El,ba),[2,ba]}})})},cs.prototype.flush=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(is){switch(is.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return is.sent(),[4,this.embedAll(this.images)];case 2:return is.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return is.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return is.sent(),[4,this.embedAll(this.javaScripts)];case 5:return is.sent(),[2]}})})},cs.prototype.save=function(is){return is===void 0&&(is={}),__awaiter(this,void 0,void 0,function(){var us,hs,lo,co,uo,ga,ba,xa,_a,$a;return __generator(this,function(xl){switch(xl.label){case 0:return us=is.useObjectStreams,hs=us===void 0?!0:us,lo=is.addDefaultPage,co=lo===void 0?!0:lo,uo=is.objectsPerTick,ga=uo===void 0?50:uo,ba=is.updateFieldAppearances,xa=ba===void 0?!0:ba,assertIs(hs,"useObjectStreams",["boolean"]),assertIs(co,"addDefaultPage",["boolean"]),assertIs(ga,"objectsPerTick",["number"]),assertIs(xa,"updateFieldAppearances",["boolean"]),co&&this.getPageCount()===0&&this.addPage(),xa&&(_a=this.formCache.getValue(),_a&&_a.updateFieldAppearances()),[4,this.flush()];case 1:return xl.sent(),$a=hs?PDFStreamWriter:PDFWriter,[2,$a.forContext(this.context,ga).serializeToBuffer()]}})})},cs.prototype.saveAsBase64=function(is){return is===void 0&&(is={}),__awaiter(this,void 0,void 0,function(){var us,hs,lo,co,uo;return __generator(this,function(ga){switch(ga.label){case 0:return us=is.dataUri,hs=us===void 0?!1:us,lo=__rest(is,["dataUri"]),assertIs(hs,"dataUri",["boolean"]),[4,this.save(lo)];case 1:return co=ga.sent(),uo=encodeToBase64(co),[2,hs?"data:application/pdf;base64,"+uo:uo]}})})},cs.prototype.findPageForAnnotationRef=function(is){for(var us=this.getPages(),hs=0,lo=us.length;hs<lo;hs++){var co=us[hs],uo=co.node.Annots();if((uo==null?void 0:uo.indexOf(is))!==void 0)return co}},cs.prototype.embedAll=function(is){return __awaiter(this,void 0,void 0,function(){var us,hs;return __generator(this,function(lo){switch(lo.label){case 0:us=0,hs=is.length,lo.label=1;case 1:return us<hs?[4,is[us].embed()]:[3,4];case 2:lo.sent(),lo.label=3;case 3:return us++,[3,1];case 4:return[2]}})})},cs.prototype.updateInfoDict=function(){var is="pdf-lib (https://github.com/Hopding/pdf-lib)",us=new Date,hs=this.getInfoDict();this.setProducer(is),this.setModificationDate(us),hs.get(PDFName.of("Creator"))||this.setCreator(is),hs.get(PDFName.of("CreationDate"))||this.setCreationDate(us)},cs.prototype.getInfoDict=function(){var is=this.context.lookup(this.context.trailerInfo.Info);if(is instanceof PDFDict)return is;var us=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(us),us},cs.prototype.assertFontkit=function(){if(!this.fontkit)throw new FontkitNotRegisteredError;return this.fontkit},cs}();function assertIsLiteralOrHexString(cs){if(!(cs instanceof PDFHexString)&&!(cs instanceof PDFString))throw new UnexpectedObjectTypeError([PDFHexString,PDFString],cs)}var BlendMode;(function(cs){cs.Normal="Normal",cs.Multiply="Multiply",cs.Screen="Screen",cs.Overlay="Overlay",cs.Darken="Darken",cs.Lighten="Lighten",cs.ColorDodge="ColorDodge",cs.ColorBurn="ColorBurn",cs.HardLight="HardLight",cs.SoftLight="SoftLight",cs.Difference="Difference",cs.Exclusion="Exclusion"})(BlendMode||(BlendMode={}));var PDFPage=function(){function cs(is,us,hs){this.fontSize=24,this.fontColor=rgb(0,0,0),this.lineHeight=24,this.x=0,this.y=0,assertIs(is,"leafNode",[[PDFPageLeaf,"PDFPageLeaf"]]),assertIs(us,"ref",[[PDFRef,"PDFRef"]]),assertIs(hs,"doc",[[PDFDocument,"PDFDocument"]]),this.node=is,this.ref=us,this.doc=hs}return cs.prototype.setRotation=function(is){var us=toDegrees(is);assertMultiple(us,"degreesAngle",90),this.node.set(PDFName.of("Rotate"),this.doc.context.obj(us))},cs.prototype.getRotation=function(){var is=this.node.Rotate();return degrees(is?is.asNumber():0)},cs.prototype.setSize=function(is,us){assertIs(is,"width",["number"]),assertIs(us,"height",["number"]);var hs=this.getMediaBox();this.setMediaBox(hs.x,hs.y,is,us);var lo=this.getCropBox(),co=this.getBleedBox(),uo=this.getTrimBox(),ga=this.getArtBox(),ba=this.node.CropBox(),xa=this.node.BleedBox(),_a=this.node.TrimBox(),$a=this.node.ArtBox();ba&&rectanglesAreEqual(lo,hs)&&this.setCropBox(hs.x,hs.y,is,us),xa&&rectanglesAreEqual(co,hs)&&this.setBleedBox(hs.x,hs.y,is,us),_a&&rectanglesAreEqual(uo,hs)&&this.setTrimBox(hs.x,hs.y,is,us),$a&&rectanglesAreEqual(ga,hs)&&this.setArtBox(hs.x,hs.y,is,us)},cs.prototype.setWidth=function(is){assertIs(is,"width",["number"]),this.setSize(is,this.getSize().height)},cs.prototype.setHeight=function(is){assertIs(is,"height",["number"]),this.setSize(this.getSize().width,is)},cs.prototype.setMediaBox=function(is,us,hs,lo){assertIs(is,"x",["number"]),assertIs(us,"y",["number"]),assertIs(hs,"width",["number"]),assertIs(lo,"height",["number"]);var co=this.doc.context.obj([is,us,is+hs,us+lo]);this.node.set(PDFName.MediaBox,co)},cs.prototype.setCropBox=function(is,us,hs,lo){assertIs(is,"x",["number"]),assertIs(us,"y",["number"]),assertIs(hs,"width",["number"]),assertIs(lo,"height",["number"]);var co=this.doc.context.obj([is,us,is+hs,us+lo]);this.node.set(PDFName.CropBox,co)},cs.prototype.setBleedBox=function(is,us,hs,lo){assertIs(is,"x",["number"]),assertIs(us,"y",["number"]),assertIs(hs,"width",["number"]),assertIs(lo,"height",["number"]);var co=this.doc.context.obj([is,us,is+hs,us+lo]);this.node.set(PDFName.BleedBox,co)},cs.prototype.setTrimBox=function(is,us,hs,lo){assertIs(is,"x",["number"]),assertIs(us,"y",["number"]),assertIs(hs,"width",["number"]),assertIs(lo,"height",["number"]);var co=this.doc.context.obj([is,us,is+hs,us+lo]);this.node.set(PDFName.TrimBox,co)},cs.prototype.setArtBox=function(is,us,hs,lo){assertIs(is,"x",["number"]),assertIs(us,"y",["number"]),assertIs(hs,"width",["number"]),assertIs(lo,"height",["number"]);var co=this.doc.context.obj([is,us,is+hs,us+lo]);this.node.set(PDFName.ArtBox,co)},cs.prototype.getSize=function(){var is=this.getMediaBox(),us=is.width,hs=is.height;return{width:us,height:hs}},cs.prototype.getWidth=function(){return this.getSize().width},cs.prototype.getHeight=function(){return this.getSize().height},cs.prototype.getMediaBox=function(){var is=this.node.MediaBox();return is.asRectangle()},cs.prototype.getCropBox=function(){var is,us=this.node.CropBox();return(is=us==null?void 0:us.asRectangle())!==null&&is!==void 0?is:this.getMediaBox()},cs.prototype.getBleedBox=function(){var is,us=this.node.BleedBox();return(is=us==null?void 0:us.asRectangle())!==null&&is!==void 0?is:this.getCropBox()},cs.prototype.getTrimBox=function(){var is,us=this.node.TrimBox();return(is=us==null?void 0:us.asRectangle())!==null&&is!==void 0?is:this.getCropBox()},cs.prototype.getArtBox=function(){var is,us=this.node.ArtBox();return(is=us==null?void 0:us.asRectangle())!==null&&is!==void 0?is:this.getCropBox()},cs.prototype.translateContent=function(is,us){assertIs(is,"x",["number"]),assertIs(us,"y",["number"]),this.node.normalize(),this.getContentStream();var hs=this.createContentStream(pushGraphicsState(),translate(is,us)),lo=this.doc.context.register(hs),co=this.createContentStream(popGraphicsState()),uo=this.doc.context.register(co);this.node.wrapContentStreams(lo,uo)},cs.prototype.scale=function(is,us){assertIs(is,"x",["number"]),assertIs(us,"y",["number"]),this.setSize(this.getWidth()*is,this.getHeight()*us),this.scaleContent(is,us),this.scaleAnnotations(is,us)},cs.prototype.scaleContent=function(is,us){assertIs(is,"x",["number"]),assertIs(us,"y",["number"]),this.node.normalize(),this.getContentStream();var hs=this.createContentStream(pushGraphicsState(),scale(is,us)),lo=this.doc.context.register(hs),co=this.createContentStream(popGraphicsState()),uo=this.doc.context.register(co);this.node.wrapContentStreams(lo,uo)},cs.prototype.scaleAnnotations=function(is,us){assertIs(is,"x",["number"]),assertIs(us,"y",["number"]);var hs=this.node.Annots();if(hs)for(var lo=0;lo<hs.size();lo++){var co=hs.lookup(lo);co instanceof PDFDict&&this.scaleAnnot(co,is,us)}},cs.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},cs.prototype.setFont=function(is){assertIs(is,"font",[[PDFFont,"PDFFont"]]),this.font=is,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},cs.prototype.setFontSize=function(is){assertIs(is,"fontSize",["number"]),this.fontSize=is},cs.prototype.setFontColor=function(is){assertIs(is,"fontColor",[[Object,"Color"]]),this.fontColor=is},cs.prototype.setLineHeight=function(is){assertIs(is,"lineHeight",["number"]),this.lineHeight=is},cs.prototype.getPosition=function(){return{x:this.x,y:this.y}},cs.prototype.getX=function(){return this.x},cs.prototype.getY=function(){return this.y},cs.prototype.moveTo=function(is,us){assertIs(is,"x",["number"]),assertIs(us,"y",["number"]),this.x=is,this.y=us},cs.prototype.moveDown=function(is){assertIs(is,"yDecrease",["number"]),this.y-=is},cs.prototype.moveUp=function(is){assertIs(is,"yIncrease",["number"]),this.y+=is},cs.prototype.moveLeft=function(is){assertIs(is,"xDecrease",["number"]),this.x-=is},cs.prototype.moveRight=function(is){assertIs(is,"xIncrease",["number"]),this.x+=is},cs.prototype.pushOperators=function(){for(var is=[],us=0;us<arguments.length;us++)is[us]=arguments[us];assertEachIs(is,"operator",[[PDFOperator,"PDFOperator"]]);var hs=this.getContentStream();hs.push.apply(hs,is)},cs.prototype.drawText=function(is,us){var hs,lo,co,uo,ga,ba,xa;us===void 0&&(us={}),assertIs(is,"text",["string"]),assertOrUndefined(us.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(us.opacity,"opacity.opacity",0,1),assertOrUndefined(us.font,"options.font",[[PDFFont,"PDFFont"]]),assertOrUndefined(us.size,"options.size",["number"]),assertOrUndefined(us.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(us.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(us.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertOrUndefined(us.x,"options.x",["number"]),assertOrUndefined(us.y,"options.y",["number"]),assertOrUndefined(us.lineHeight,"options.lineHeight",["number"]),assertOrUndefined(us.maxWidth,"options.maxWidth",["number"]),assertOrUndefined(us.wordBreaks,"options.wordBreaks",[Array]),assertIsOneOfOrUndefined(us.blendMode,"options.blendMode",BlendMode);for(var _a=this.setOrEmbedFont(us.font),$a=_a.oldFont,xl=_a.newFont,yl=_a.newFontKey,wl=us.size||this.fontSize,_l=us.wordBreaks||this.doc.defaultWordBreaks,El=function(Al){return xl.widthOfTextAtSize(Al,wl)},Sl=us.maxWidth===void 0?lineSplit(cleanText(is)):breakTextIntoLines(is,_l,us.maxWidth,El),Cl=new Array(Sl.length),Tl=0,Dl=Sl.length;Tl<Dl;Tl++)Cl[Tl]=xl.encodeText(Sl[Tl]);var Fl=this.maybeEmbedGraphicsState({opacity:us.opacity,blendMode:us.blendMode}),Pl=this.getContentStream();Pl.push.apply(Pl,drawLinesOfText(Cl,{color:(hs=us.color)!==null&&hs!==void 0?hs:this.fontColor,font:yl,size:wl,rotate:(lo=us.rotate)!==null&&lo!==void 0?lo:degrees(0),xSkew:(co=us.xSkew)!==null&&co!==void 0?co:degrees(0),ySkew:(uo=us.ySkew)!==null&&uo!==void 0?uo:degrees(0),x:(ga=us.x)!==null&&ga!==void 0?ga:this.x,y:(ba=us.y)!==null&&ba!==void 0?ba:this.y,lineHeight:(xa=us.lineHeight)!==null&&xa!==void 0?xa:this.lineHeight,graphicsState:Fl})),us.font&&($a?this.setFont($a):this.resetFont())},cs.prototype.drawImage=function(is,us){var hs,lo,co,uo,ga,ba,xa;us===void 0&&(us={}),assertIs(is,"image",[[PDFImage,"PDFImage"]]),assertOrUndefined(us.x,"options.x",["number"]),assertOrUndefined(us.y,"options.y",["number"]),assertOrUndefined(us.width,"options.width",["number"]),assertOrUndefined(us.height,"options.height",["number"]),assertOrUndefined(us.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(us.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(us.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertRangeOrUndefined(us.opacity,"opacity.opacity",0,1),assertIsOneOfOrUndefined(us.blendMode,"options.blendMode",BlendMode);var _a=this.node.newXObject("Image",is.ref),$a=this.maybeEmbedGraphicsState({opacity:us.opacity,blendMode:us.blendMode}),xl=this.getContentStream();xl.push.apply(xl,drawImage(_a,{x:(hs=us.x)!==null&&hs!==void 0?hs:this.x,y:(lo=us.y)!==null&&lo!==void 0?lo:this.y,width:(co=us.width)!==null&&co!==void 0?co:is.size().width,height:(uo=us.height)!==null&&uo!==void 0?uo:is.size().height,rotate:(ga=us.rotate)!==null&&ga!==void 0?ga:degrees(0),xSkew:(ba=us.xSkew)!==null&&ba!==void 0?ba:degrees(0),ySkew:(xa=us.ySkew)!==null&&xa!==void 0?xa:degrees(0),graphicsState:$a}))},cs.prototype.drawPage=function(is,us){var hs,lo,co,uo,ga;us===void 0&&(us={}),assertIs(is,"embeddedPage",[[PDFEmbeddedPage,"PDFEmbeddedPage"]]),assertOrUndefined(us.x,"options.x",["number"]),assertOrUndefined(us.y,"options.y",["number"]),assertOrUndefined(us.xScale,"options.xScale",["number"]),assertOrUndefined(us.yScale,"options.yScale",["number"]),assertOrUndefined(us.width,"options.width",["number"]),assertOrUndefined(us.height,"options.height",["number"]),assertOrUndefined(us.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(us.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(us.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertRangeOrUndefined(us.opacity,"opacity.opacity",0,1),assertIsOneOfOrUndefined(us.blendMode,"options.blendMode",BlendMode);var ba=this.node.newXObject("EmbeddedPdfPage",is.ref),xa=this.maybeEmbedGraphicsState({opacity:us.opacity,blendMode:us.blendMode}),_a=us.width!==void 0?us.width/is.width:us.xScale!==void 0?us.xScale:1,$a=us.height!==void 0?us.height/is.height:us.yScale!==void 0?us.yScale:1,xl=this.getContentStream();xl.push.apply(xl,drawPage(ba,{x:(hs=us.x)!==null&&hs!==void 0?hs:this.x,y:(lo=us.y)!==null&&lo!==void 0?lo:this.y,xScale:_a,yScale:$a,rotate:(co=us.rotate)!==null&&co!==void 0?co:degrees(0),xSkew:(uo=us.xSkew)!==null&&uo!==void 0?uo:degrees(0),ySkew:(ga=us.ySkew)!==null&&ga!==void 0?ga:degrees(0),graphicsState:xa}))},cs.prototype.drawSvgPath=function(is,us){var hs,lo,co,uo,ga,ba,xa,_a,$a;us===void 0&&(us={}),assertIs(is,"path",["string"]),assertOrUndefined(us.x,"options.x",["number"]),assertOrUndefined(us.y,"options.y",["number"]),assertOrUndefined(us.scale,"options.scale",["number"]),assertOrUndefined(us.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(us.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(us.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(us.opacity,"opacity.opacity",0,1),assertOrUndefined(us.borderColor,"options.borderColor",[[Object,"Color"]]),assertOrUndefined(us.borderDashArray,"options.borderDashArray",[Array]),assertOrUndefined(us.borderDashPhase,"options.borderDashPhase",["number"]),assertIsOneOfOrUndefined(us.borderLineCap,"options.borderLineCap",LineCapStyle),assertRangeOrUndefined(us.borderOpacity,"options.borderOpacity",0,1),assertIsOneOfOrUndefined(us.blendMode,"options.blendMode",BlendMode);var xl=this.maybeEmbedGraphicsState({opacity:us.opacity,borderOpacity:us.borderOpacity,blendMode:us.blendMode});!("color"in us)&&!("borderColor"in us)&&(us.borderColor=rgb(0,0,0));var yl=this.getContentStream();yl.push.apply(yl,drawSvgPath(is,{x:(hs=us.x)!==null&&hs!==void 0?hs:this.x,y:(lo=us.y)!==null&&lo!==void 0?lo:this.y,scale:us.scale,rotate:(co=us.rotate)!==null&&co!==void 0?co:degrees(0),color:(uo=us.color)!==null&&uo!==void 0?uo:void 0,borderColor:(ga=us.borderColor)!==null&&ga!==void 0?ga:void 0,borderWidth:(ba=us.borderWidth)!==null&&ba!==void 0?ba:0,borderDashArray:(xa=us.borderDashArray)!==null&&xa!==void 0?xa:void 0,borderDashPhase:(_a=us.borderDashPhase)!==null&&_a!==void 0?_a:void 0,borderLineCap:($a=us.borderLineCap)!==null&&$a!==void 0?$a:void 0,graphicsState:xl}))},cs.prototype.drawLine=function(is){var us,hs,lo,co,uo;assertIs(is.start,"options.start",[[Object,"{ x: number, y: number }"]]),assertIs(is.end,"options.end",[[Object,"{ x: number, y: number }"]]),assertIs(is.start.x,"options.start.x",["number"]),assertIs(is.start.y,"options.start.y",["number"]),assertIs(is.end.x,"options.end.x",["number"]),assertIs(is.end.y,"options.end.y",["number"]),assertOrUndefined(is.thickness,"options.thickness",["number"]),assertOrUndefined(is.color,"options.color",[[Object,"Color"]]),assertOrUndefined(is.dashArray,"options.dashArray",[Array]),assertOrUndefined(is.dashPhase,"options.dashPhase",["number"]),assertIsOneOfOrUndefined(is.lineCap,"options.lineCap",LineCapStyle),assertRangeOrUndefined(is.opacity,"opacity.opacity",0,1),assertIsOneOfOrUndefined(is.blendMode,"options.blendMode",BlendMode);var ga=this.maybeEmbedGraphicsState({borderOpacity:is.opacity,blendMode:is.blendMode});"color"in is||(is.color=rgb(0,0,0));var ba=this.getContentStream();ba.push.apply(ba,drawLine({start:is.start,end:is.end,thickness:(us=is.thickness)!==null&&us!==void 0?us:1,color:(hs=is.color)!==null&&hs!==void 0?hs:void 0,dashArray:(lo=is.dashArray)!==null&&lo!==void 0?lo:void 0,dashPhase:(co=is.dashPhase)!==null&&co!==void 0?co:void 0,lineCap:(uo=is.lineCap)!==null&&uo!==void 0?uo:void 0,graphicsState:ga}))},cs.prototype.drawRectangle=function(is){var us,hs,lo,co,uo,ga,ba,xa,_a,$a,xl,yl,wl;is===void 0&&(is={}),assertOrUndefined(is.x,"options.x",["number"]),assertOrUndefined(is.y,"options.y",["number"]),assertOrUndefined(is.width,"options.width",["number"]),assertOrUndefined(is.height,"options.height",["number"]),assertOrUndefined(is.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(is.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(is.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertOrUndefined(is.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(is.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(is.opacity,"opacity.opacity",0,1),assertOrUndefined(is.borderColor,"options.borderColor",[[Object,"Color"]]),assertOrUndefined(is.borderDashArray,"options.borderDashArray",[Array]),assertOrUndefined(is.borderDashPhase,"options.borderDashPhase",["number"]),assertIsOneOfOrUndefined(is.borderLineCap,"options.borderLineCap",LineCapStyle),assertRangeOrUndefined(is.borderOpacity,"options.borderOpacity",0,1),assertIsOneOfOrUndefined(is.blendMode,"options.blendMode",BlendMode);var _l=this.maybeEmbedGraphicsState({opacity:is.opacity,borderOpacity:is.borderOpacity,blendMode:is.blendMode});!("color"in is)&&!("borderColor"in is)&&(is.color=rgb(0,0,0));var El=this.getContentStream();El.push.apply(El,drawRectangle({x:(us=is.x)!==null&&us!==void 0?us:this.x,y:(hs=is.y)!==null&&hs!==void 0?hs:this.y,width:(lo=is.width)!==null&&lo!==void 0?lo:150,height:(co=is.height)!==null&&co!==void 0?co:100,rotate:(uo=is.rotate)!==null&&uo!==void 0?uo:degrees(0),xSkew:(ga=is.xSkew)!==null&&ga!==void 0?ga:degrees(0),ySkew:(ba=is.ySkew)!==null&&ba!==void 0?ba:degrees(0),borderWidth:(xa=is.borderWidth)!==null&&xa!==void 0?xa:0,color:(_a=is.color)!==null&&_a!==void 0?_a:void 0,borderColor:($a=is.borderColor)!==null&&$a!==void 0?$a:void 0,borderDashArray:(xl=is.borderDashArray)!==null&&xl!==void 0?xl:void 0,borderDashPhase:(yl=is.borderDashPhase)!==null&&yl!==void 0?yl:void 0,graphicsState:_l,borderLineCap:(wl=is.borderLineCap)!==null&&wl!==void 0?wl:void 0}))},cs.prototype.drawSquare=function(is){is===void 0&&(is={});var us=is.size;assertOrUndefined(us,"size",["number"]),this.drawRectangle(__assign(__assign({},is),{width:us,height:us}))},cs.prototype.drawEllipse=function(is){var us,hs,lo,co,uo,ga,ba,xa,_a,$a,xl;is===void 0&&(is={}),assertOrUndefined(is.x,"options.x",["number"]),assertOrUndefined(is.y,"options.y",["number"]),assertOrUndefined(is.xScale,"options.xScale",["number"]),assertOrUndefined(is.yScale,"options.yScale",["number"]),assertOrUndefined(is.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(is.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(is.opacity,"opacity.opacity",0,1),assertOrUndefined(is.borderColor,"options.borderColor",[[Object,"Color"]]),assertRangeOrUndefined(is.borderOpacity,"options.borderOpacity",0,1),assertOrUndefined(is.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(is.borderDashArray,"options.borderDashArray",[Array]),assertOrUndefined(is.borderDashPhase,"options.borderDashPhase",["number"]),assertIsOneOfOrUndefined(is.borderLineCap,"options.borderLineCap",LineCapStyle),assertIsOneOfOrUndefined(is.blendMode,"options.blendMode",BlendMode);var yl=this.maybeEmbedGraphicsState({opacity:is.opacity,borderOpacity:is.borderOpacity,blendMode:is.blendMode});!("color"in is)&&!("borderColor"in is)&&(is.color=rgb(0,0,0));var wl=this.getContentStream();wl.push.apply(wl,drawEllipse({x:(us=is.x)!==null&&us!==void 0?us:this.x,y:(hs=is.y)!==null&&hs!==void 0?hs:this.y,xScale:(lo=is.xScale)!==null&&lo!==void 0?lo:100,yScale:(co=is.yScale)!==null&&co!==void 0?co:100,rotate:(uo=is.rotate)!==null&&uo!==void 0?uo:void 0,color:(ga=is.color)!==null&&ga!==void 0?ga:void 0,borderColor:(ba=is.borderColor)!==null&&ba!==void 0?ba:void 0,borderWidth:(xa=is.borderWidth)!==null&&xa!==void 0?xa:0,borderDashArray:(_a=is.borderDashArray)!==null&&_a!==void 0?_a:void 0,borderDashPhase:($a=is.borderDashPhase)!==null&&$a!==void 0?$a:void 0,borderLineCap:(xl=is.borderLineCap)!==null&&xl!==void 0?xl:void 0,graphicsState:yl}))},cs.prototype.drawCircle=function(is){is===void 0&&(is={});var us=is.size,hs=us===void 0?100:us;assertOrUndefined(hs,"size",["number"]),this.drawEllipse(__assign(__assign({},is),{xScale:hs,yScale:hs}))},cs.prototype.setOrEmbedFont=function(is){var us=this.font,hs=this.fontKey;is?this.setFont(is):this.getFont();var lo=this.font,co=this.fontKey;return{oldFont:us,oldFontKey:hs,newFont:lo,newFontKey:co}},cs.prototype.getFont=function(){if(!this.font||!this.fontKey){var is=this.doc.embedStandardFont(StandardFonts.Helvetica);this.setFont(is)}return[this.font,this.fontKey]},cs.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},cs.prototype.getContentStream=function(is){return is===void 0&&(is=!0),is&&this.contentStream?this.contentStream:(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef),this.contentStream)},cs.prototype.createContentStream=function(){for(var is=[],us=0;us<arguments.length;us++)is[us]=arguments[us];var hs=this.doc.context.obj({}),lo=PDFContentStream.of(hs,is);return lo},cs.prototype.maybeEmbedGraphicsState=function(is){var us=is.opacity,hs=is.borderOpacity,lo=is.blendMode;if(!(us===void 0&&hs===void 0&&lo===void 0)){var co=this.doc.context.obj({Type:"ExtGState",ca:us,CA:hs,BM:lo}),uo=this.node.newExtGState("GS",co);return uo}},cs.prototype.scaleAnnot=function(is,us,hs){for(var lo=["RD","CL","Vertices","QuadPoints","L","Rect"],co=0,uo=lo.length;co<uo;co++){var ga=is.lookup(PDFName.of(lo[co]));ga instanceof PDFArray&&ga.scalePDFNumbers(us,hs)}var ba=is.lookup(PDFName.of("InkList"));if(ba instanceof PDFArray)for(var co=0,uo=ba.size();co<uo;co++){var xa=ba.lookup(co);xa instanceof PDFArray&&xa.scalePDFNumbers(us,hs)}},cs.of=function(is,us,hs){return new cs(is,us,hs)},cs.create=function(is){assertIs(is,"doc",[[PDFDocument,"PDFDocument"]]);var us=PDFRef.of(-1),hs=PDFPageLeaf.withContextAndParent(is.context,us),lo=is.context.register(hs);return new cs(hs,lo,is)},cs}(),PDFButton=function(cs){__extends(is,cs);function is(us,hs,lo){var co=cs.call(this,us,hs,lo)||this;return assertIs(us,"acroButton",[[PDFAcroPushButton,"PDFAcroPushButton"]]),co.acroField=us,co}return is.prototype.setImage=function(us,hs){hs===void 0&&(hs=ImageAlignment.Center);for(var lo=this.acroField.getWidgets(),co=0,uo=lo.length;co<uo;co++){var ga=lo[co],ba=this.createImageAppearanceStream(ga,us,hs);this.updateWidgetAppearances(ga,{normal:ba})}this.markAsClean()},is.prototype.setFontSize=function(us){assertPositive(us,"fontSize"),this.acroField.setFontSize(us),this.markAsDirty()},is.prototype.addToPage=function(us,hs,lo){var co,uo,ga,ba,xa,_a,$a,xl,yl,wl,_l;assertOrUndefined(us,"text",["string"]),assertOrUndefined(hs,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(lo);var El=this.createWidget({x:((co=lo==null?void 0:lo.x)!==null&&co!==void 0?co:0)-((uo=lo==null?void 0:lo.borderWidth)!==null&&uo!==void 0?uo:0)/2,y:((ga=lo==null?void 0:lo.y)!==null&&ga!==void 0?ga:0)-((ba=lo==null?void 0:lo.borderWidth)!==null&&ba!==void 0?ba:0)/2,width:(xa=lo==null?void 0:lo.width)!==null&&xa!==void 0?xa:100,height:(_a=lo==null?void 0:lo.height)!==null&&_a!==void 0?_a:50,textColor:($a=lo==null?void 0:lo.textColor)!==null&&$a!==void 0?$a:rgb(0,0,0),backgroundColor:(xl=lo==null?void 0:lo.backgroundColor)!==null&&xl!==void 0?xl:rgb(.75,.75,.75),borderColor:lo==null?void 0:lo.borderColor,borderWidth:(yl=lo==null?void 0:lo.borderWidth)!==null&&yl!==void 0?yl:0,rotate:(wl=lo==null?void 0:lo.rotate)!==null&&wl!==void 0?wl:degrees(0),caption:us,hidden:lo==null?void 0:lo.hidden,page:hs.ref}),Sl=this.doc.context.register(El.dict);this.acroField.addWidget(Sl);var Cl=(_l=lo==null?void 0:lo.font)!==null&&_l!==void 0?_l:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(El,Cl),hs.node.addAnnot(Sl)},is.prototype.needsAppearancesUpdate=function(){var us;if(this.isDirty())return!0;for(var hs=this.acroField.getWidgets(),lo=0,co=hs.length;lo<co;lo++){var uo=hs[lo],ga=((us=uo.getAppearances())===null||us===void 0?void 0:us.normal)instanceof PDFStream;if(!ga)return!0}return!1},is.prototype.defaultUpdateAppearances=function(us){assertIs(us,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(us)},is.prototype.updateAppearances=function(us,hs){assertIs(us,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(hs,"provider",[Function]);for(var lo=this.acroField.getWidgets(),co=0,uo=lo.length;co<uo;co++){var ga=lo[co];this.updateWidgetAppearance(ga,us,hs)}},is.prototype.updateWidgetAppearance=function(us,hs,lo){var co=lo??defaultButtonAppearanceProvider,uo=normalizeAppearance(co(this,us,hs));this.updateWidgetAppearanceWithFont(us,hs,uo)},is.of=function(us,hs,lo){return new is(us,hs,lo)},is}(PDFField);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var XLSX={};XLSX.version="0.18.5";var current_ansi=1252,VALID_ANSI=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],set_ansi=function(cs){VALID_ANSI.indexOf(cs)!=-1&&(current_ansi=cs)};function reset_ansi(){set_ansi(1252)}var set_cp=function(cs){set_ansi(cs)};function reset_cp(){set_cp(1200),reset_ansi()}var _getchar=function cs(is){return String.fromCharCode(is)},_getansi=function cs(is){return String.fromCharCode(is)},$cptable,Base64_map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Base64_encode(cs){for(var is="",us=0,hs=0,lo=0,co=0,uo=0,ga=0,ba=0,xa=0;xa<cs.length;)us=cs.charCodeAt(xa++),co=us>>2,hs=cs.charCodeAt(xa++),uo=(us&3)<<4|hs>>4,lo=cs.charCodeAt(xa++),ga=(hs&15)<<2|lo>>6,ba=lo&63,isNaN(hs)?ga=ba=64:isNaN(lo)&&(ba=64),is+=Base64_map.charAt(co)+Base64_map.charAt(uo)+Base64_map.charAt(ga)+Base64_map.charAt(ba);return is}function Base64_decode(cs){var is="",us=0,hs=0,lo=0,co=0,uo=0,ga=0,ba=0;cs=cs.replace(/[^\w\+\/\=]/g,"");for(var xa=0;xa<cs.length;)co=Base64_map.indexOf(cs.charAt(xa++)),uo=Base64_map.indexOf(cs.charAt(xa++)),us=co<<2|uo>>4,is+=String.fromCharCode(us),ga=Base64_map.indexOf(cs.charAt(xa++)),hs=(uo&15)<<4|ga>>2,ga!==64&&(is+=String.fromCharCode(hs)),ba=Base64_map.indexOf(cs.charAt(xa++)),lo=(ga&3)<<6|ba,ba!==64&&(is+=String.fromCharCode(lo));return is}var has_buf=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Buffer_from=function(){if(typeof Buffer<"u"){var cs=!Buffer.from;if(!cs)try{Buffer.from("foo","utf8")}catch{cs=!0}return cs?function(is,us){return us?new Buffer(is,us):new Buffer(is)}:Buffer.from.bind(Buffer)}return function(){}}();function new_raw_buf(cs){return has_buf?Buffer.alloc?Buffer.alloc(cs):new Buffer(cs):typeof Uint8Array<"u"?new Uint8Array(cs):new Array(cs)}function new_unsafe_buf(cs){return has_buf?Buffer.allocUnsafe?Buffer.allocUnsafe(cs):new Buffer(cs):typeof Uint8Array<"u"?new Uint8Array(cs):new Array(cs)}var s2a=function cs(is){return has_buf?Buffer_from(is,"binary"):is.split("").map(function(us){return us.charCodeAt(0)&255})};function s2ab(cs){if(typeof ArrayBuffer>"u")return s2a(cs);for(var is=new ArrayBuffer(cs.length),us=new Uint8Array(is),hs=0;hs!=cs.length;++hs)us[hs]=cs.charCodeAt(hs)&255;return is}function a2s(cs){if(Array.isArray(cs))return cs.map(function(hs){return String.fromCharCode(hs)}).join("");for(var is=[],us=0;us<cs.length;++us)is[us]=String.fromCharCode(cs[us]);return is.join("")}function a2u(cs){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(cs)}var bconcat=has_buf?function(cs){return Buffer.concat(cs.map(function(is){return Buffer.isBuffer(is)?is:Buffer_from(is)}))}:function(cs){if(typeof Uint8Array<"u"){var is=0,us=0;for(is=0;is<cs.length;++is)us+=cs[is].length;var hs=new Uint8Array(us),lo=0;for(is=0,us=0;is<cs.length;us+=lo,++is)if(lo=cs[is].length,cs[is]instanceof Uint8Array)hs.set(cs[is],us);else{if(typeof cs[is]=="string")throw"wtf";hs.set(new Uint8Array(cs[is]),us)}return hs}return[].concat.apply([],cs.map(function(co){return Array.isArray(co)?co:[].slice.call(co)}))};function utf8decode(cs){for(var is=[],us=0,hs=cs.length+250,lo=new_raw_buf(cs.length+255),co=0;co<cs.length;++co){var uo=cs.charCodeAt(co);if(uo<128)lo[us++]=uo;else if(uo<2048)lo[us++]=192|uo>>6&31,lo[us++]=128|uo&63;else if(uo>=55296&&uo<57344){uo=(uo&1023)+64;var ga=cs.charCodeAt(++co)&1023;lo[us++]=240|uo>>8&7,lo[us++]=128|uo>>2&63,lo[us++]=128|ga>>6&15|(uo&3)<<4,lo[us++]=128|ga&63}else lo[us++]=224|uo>>12&15,lo[us++]=128|uo>>6&63,lo[us++]=128|uo&63;us>hs&&(is.push(lo.slice(0,us)),us=0,lo=new_raw_buf(65535),hs=65530)}return is.push(lo.slice(0,us)),bconcat(is)}var chr0=/\u0000/g,chr1=/[\u0001-\u0006]/g;function _strrev(cs){for(var is="",us=cs.length-1;us>=0;)is+=cs.charAt(us--);return is}function pad0(cs,is){var us=""+cs;return us.length>=is?us:fill("0",is-us.length)+us}function pad_(cs,is){var us=""+cs;return us.length>=is?us:fill(" ",is-us.length)+us}function rpad_(cs,is){var us=""+cs;return us.length>=is?us:us+fill(" ",is-us.length)}function pad0r1(cs,is){var us=""+Math.round(cs);return us.length>=is?us:fill("0",is-us.length)+us}function pad0r2(cs,is){var us=""+cs;return us.length>=is?us:fill("0",is-us.length)+us}var p2_32=Math.pow(2,32);function pad0r(cs,is){if(cs>p2_32||cs<-p2_32)return pad0r1(cs,is);var us=Math.round(cs);return pad0r2(us,is)}function SSF_isgeneral(cs,is){return is=is||0,cs.length>=7+is&&(cs.charCodeAt(is)|32)===103&&(cs.charCodeAt(is+1)|32)===101&&(cs.charCodeAt(is+2)|32)===110&&(cs.charCodeAt(is+3)|32)===101&&(cs.charCodeAt(is+4)|32)===114&&(cs.charCodeAt(is+5)|32)===97&&(cs.charCodeAt(is+6)|32)===108}var days=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],months=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function SSF_init_table(cs){return cs||(cs={}),cs[0]="General",cs[1]="0",cs[2]="0.00",cs[3]="#,##0",cs[4]="#,##0.00",cs[9]="0%",cs[10]="0.00%",cs[11]="0.00E+00",cs[12]="# ?/?",cs[13]="# ??/??",cs[14]="m/d/yy",cs[15]="d-mmm-yy",cs[16]="d-mmm",cs[17]="mmm-yy",cs[18]="h:mm AM/PM",cs[19]="h:mm:ss AM/PM",cs[20]="h:mm",cs[21]="h:mm:ss",cs[22]="m/d/yy h:mm",cs[37]="#,##0 ;(#,##0)",cs[38]="#,##0 ;[Red](#,##0)",cs[39]="#,##0.00;(#,##0.00)",cs[40]="#,##0.00;[Red](#,##0.00)",cs[45]="mm:ss",cs[46]="[h]:mm:ss",cs[47]="mmss.0",cs[48]="##0.0E+0",cs[49]="@",cs[56]='"/ "hh""mm""ss" "',cs}var table_fmt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},SSF_default_map={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SSF_default_str={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function SSF_frac(cs,is,us){for(var hs=cs<0?-1:1,lo=cs*hs,co=0,uo=1,ga=0,ba=1,xa=0,_a=0,$a=Math.floor(lo);xa<is&&($a=Math.floor(lo),ga=$a*uo+co,_a=$a*xa+ba,!(lo-$a<5e-8));)lo=1/(lo-$a),co=uo,uo=ga,ba=xa,xa=_a;if(_a>is&&(xa>is?(_a=ba,ga=co):(_a=xa,ga=uo)),!us)return[0,hs*ga,_a];var xl=Math.floor(hs*ga/_a);return[xl,hs*ga-xl*_a,_a]}function SSF_parse_date_code(cs,is,us){if(cs>2958465||cs<0)return null;var hs=cs|0,lo=Math.floor(86400*(cs-hs)),co=0,uo=[],ga={D:hs,T:lo,u:86400*(cs-hs)-lo,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(ga.u)<1e-6&&(ga.u=0),is&&is.date1904&&(hs+=1462),ga.u>.9999&&(ga.u=0,++lo==86400&&(ga.T=lo=0,++hs,++ga.D)),hs===60)uo=us?[1317,10,29]:[1900,2,29],co=3;else if(hs===0)uo=us?[1317,8,29]:[1900,1,0],co=6;else{hs>60&&--hs;var ba=new Date(1900,0,1);ba.setDate(ba.getDate()+hs-1),uo=[ba.getFullYear(),ba.getMonth()+1,ba.getDate()],co=ba.getDay(),hs<60&&(co=(co+6)%7),us&&(co=SSF_fix_hijri(ba,uo))}return ga.y=uo[0],ga.m=uo[1],ga.d=uo[2],ga.S=lo%60,lo=Math.floor(lo/60),ga.M=lo%60,lo=Math.floor(lo/60),ga.H=lo,ga.q=co,ga}var SSFbasedate=new Date(1899,11,31,0,0,0),SSFdnthresh=SSFbasedate.getTime(),SSFbase1904=new Date(1900,2,1,0,0,0);function datenum_local(cs,is){var us=cs.getTime();return is?us-=1461*24*60*60*1e3:cs>=SSFbase1904&&(us+=24*60*60*1e3),(us-(SSFdnthresh+(cs.getTimezoneOffset()-SSFbasedate.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function SSF_strip_decimal(cs){return cs.indexOf(".")==-1?cs:cs.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function SSF_normalize_exp(cs){return cs.indexOf("E")==-1?cs:cs.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function SSF_small_exp(cs){var is=cs<0?12:11,us=SSF_strip_decimal(cs.toFixed(12));return us.length<=is||(us=cs.toPrecision(10),us.length<=is)?us:cs.toExponential(5)}function SSF_large_exp(cs){var is=SSF_strip_decimal(cs.toFixed(11));return is.length>(cs<0?12:11)||is==="0"||is==="-0"?cs.toPrecision(6):is}function SSF_general_num(cs){var is=Math.floor(Math.log(Math.abs(cs))*Math.LOG10E),us;return is>=-4&&is<=-1?us=cs.toPrecision(10+is):Math.abs(is)<=9?us=SSF_small_exp(cs):is===10?us=cs.toFixed(10).substr(0,12):us=SSF_large_exp(cs),SSF_strip_decimal(SSF_normalize_exp(us.toUpperCase()))}function SSF_general(cs,is){switch(typeof cs){case"string":return cs;case"boolean":return cs?"TRUE":"FALSE";case"number":return(cs|0)===cs?cs.toString(10):SSF_general_num(cs);case"undefined":return"";case"object":if(cs==null)return"";if(cs instanceof Date)return SSF_format(14,datenum_local(cs,is&&is.date1904),is)}throw new Error("unsupported value in General format: "+cs)}function SSF_fix_hijri(cs,is){is[0]-=581;var us=cs.getDay();return cs<60&&(us=(us+6)%7),us}function SSF_write_date(cs,is,us,hs){var lo="",co=0,uo=0,ga=us.y,ba,xa=0;switch(cs){case 98:ga=us.y+543;case 121:switch(is.length){case 1:case 2:ba=ga%100,xa=2;break;default:ba=ga%1e4,xa=4;break}break;case 109:switch(is.length){case 1:case 2:ba=us.m,xa=is.length;break;case 3:return months[us.m-1][1];case 5:return months[us.m-1][0];default:return months[us.m-1][2]}break;case 100:switch(is.length){case 1:case 2:ba=us.d,xa=is.length;break;case 3:return days[us.q][0];default:return days[us.q][1]}break;case 104:switch(is.length){case 1:case 2:ba=1+(us.H+11)%12,xa=is.length;break;default:throw"bad hour format: "+is}break;case 72:switch(is.length){case 1:case 2:ba=us.H,xa=is.length;break;default:throw"bad hour format: "+is}break;case 77:switch(is.length){case 1:case 2:ba=us.M,xa=is.length;break;default:throw"bad minute format: "+is}break;case 115:if(is!="s"&&is!="ss"&&is!=".0"&&is!=".00"&&is!=".000")throw"bad second format: "+is;return us.u===0&&(is=="s"||is=="ss")?pad0(us.S,is.length):(hs>=2?uo=hs===3?1e3:100:uo=hs===1?10:1,co=Math.round(uo*(us.S+us.u)),co>=60*uo&&(co=0),is==="s"?co===0?"0":""+co/uo:(lo=pad0(co,2+hs),is==="ss"?lo.substr(0,2):"."+lo.substr(2,is.length-1)));case 90:switch(is){case"[h]":case"[hh]":ba=us.D*24+us.H;break;case"[m]":case"[mm]":ba=(us.D*24+us.H)*60+us.M;break;case"[s]":case"[ss]":ba=((us.D*24+us.H)*60+us.M)*60+Math.round(us.S+us.u);break;default:throw"bad abstime format: "+is}xa=is.length===3?1:2;break;case 101:ba=ga,xa=1;break}var _a=xa>0?pad0(ba,xa):"";return _a}function commaify(cs){var is=3;if(cs.length<=is)return cs;for(var us=cs.length%is,hs=cs.substr(0,us);us!=cs.length;us+=is)hs+=(hs.length>0?",":"")+cs.substr(us,is);return hs}var pct1=/%/g;function write_num_pct(cs,is,us){var hs=is.replace(pct1,""),lo=is.length-hs.length;return write_num(cs,hs,us*Math.pow(10,2*lo))+fill("%",lo)}function write_num_cm(cs,is,us){for(var hs=is.length-1;is.charCodeAt(hs-1)===44;)--hs;return write_num(cs,is.substr(0,hs),us/Math.pow(10,3*(is.length-hs)))}function write_num_exp(cs,is){var us,hs=cs.indexOf("E")-cs.indexOf(".")-1;if(cs.match(/^#+0.0E\+0$/)){if(is==0)return"0.0E+0";if(is<0)return"-"+write_num_exp(cs,-is);var lo=cs.indexOf(".");lo===-1&&(lo=cs.indexOf("E"));var co=Math.floor(Math.log(is)*Math.LOG10E)%lo;if(co<0&&(co+=lo),us=(is/Math.pow(10,co)).toPrecision(hs+1+(lo+co)%lo),us.indexOf("e")===-1){var uo=Math.floor(Math.log(is)*Math.LOG10E);for(us.indexOf(".")===-1?us=us.charAt(0)+"."+us.substr(1)+"E+"+(uo-us.length+co):us+="E+"+(uo-co);us.substr(0,2)==="0.";)us=us.charAt(0)+us.substr(2,lo)+"."+us.substr(2+lo),us=us.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");us=us.replace(/\+-/,"-")}us=us.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(ga,ba,xa,_a){return ba+xa+_a.substr(0,(lo+co)%lo)+"."+_a.substr(co)+"E"})}else us=is.toExponential(hs);return cs.match(/E\+00$/)&&us.match(/e[+-]\d$/)&&(us=us.substr(0,us.length-1)+"0"+us.charAt(us.length-1)),cs.match(/E\-/)&&us.match(/e\+/)&&(us=us.replace(/e\+/,"e")),us.replace("e","E")}var frac1=/# (\?+)( ?)\/( ?)(\d+)/;function write_num_f1(cs,is,us){var hs=parseInt(cs[4],10),lo=Math.round(is*hs),co=Math.floor(lo/hs),uo=lo-co*hs,ga=hs;return us+(co===0?"":""+co)+" "+(uo===0?fill(" ",cs[1].length+1+cs[4].length):pad_(uo,cs[1].length)+cs[2]+"/"+cs[3]+pad0(ga,cs[4].length))}function write_num_f2(cs,is,us){return us+(is===0?"":""+is)+fill(" ",cs[1].length+2+cs[4].length)}var dec1=/^#*0*\.([0#]+)/,closeparen=/\).*[0#]/,phone=/\(###\) ###\\?-####/;function hashq(cs){for(var is="",us,hs=0;hs!=cs.length;++hs)switch(us=cs.charCodeAt(hs)){case 35:break;case 63:is+=" ";break;case 48:is+="0";break;default:is+=String.fromCharCode(us)}return is}function rnd(cs,is){var us=Math.pow(10,is);return""+Math.round(cs*us)/us}function dec(cs,is){var us=cs-Math.floor(cs),hs=Math.pow(10,is);return is<(""+Math.round(us*hs)).length?0:Math.round(us*hs)}function carry(cs,is){return is<(""+Math.round((cs-Math.floor(cs))*Math.pow(10,is))).length?1:0}function flr(cs){return cs<2147483647&&cs>-2147483648?""+(cs>=0?cs|0:cs-1|0):""+Math.floor(cs)}function write_num_flt(cs,is,us){if(cs.charCodeAt(0)===40&&!is.match(closeparen)){var hs=is.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return us>=0?write_num_flt("n",hs,us):"("+write_num_flt("n",hs,-us)+")"}if(is.charCodeAt(is.length-1)===44)return write_num_cm(cs,is,us);if(is.indexOf("%")!==-1)return write_num_pct(cs,is,us);if(is.indexOf("E")!==-1)return write_num_exp(is,us);if(is.charCodeAt(0)===36)return"$"+write_num_flt(cs,is.substr(is.charAt(1)==" "?2:1),us);var lo,co,uo,ga,ba=Math.abs(us),xa=us<0?"-":"";if(is.match(/^00+$/))return xa+pad0r(ba,is.length);if(is.match(/^[#?]+$/))return lo=pad0r(us,0),lo==="0"&&(lo=""),lo.length>is.length?lo:hashq(is.substr(0,is.length-lo.length))+lo;if(co=is.match(frac1))return write_num_f1(co,ba,xa);if(is.match(/^#+0+$/))return xa+pad0r(ba,is.length-is.indexOf("0"));if(co=is.match(dec1))return lo=rnd(us,co[1].length).replace(/^([^\.]+)$/,"$1."+hashq(co[1])).replace(/\.$/,"."+hashq(co[1])).replace(/\.(\d*)$/,function(wl,_l){return"."+_l+fill("0",hashq(co[1]).length-_l.length)}),is.indexOf("0.")!==-1?lo:lo.replace(/^0\./,".");if(is=is.replace(/^#+([0.])/,"$1"),co=is.match(/^(0*)\.(#*)$/))return xa+rnd(ba,co[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,co[1].length?"0.":".");if(co=is.match(/^#{1,3},##0(\.?)$/))return xa+commaify(pad0r(ba,0));if(co=is.match(/^#,##0\.([#0]*0)$/))return us<0?"-"+write_num_flt(cs,is,-us):commaify(""+(Math.floor(us)+carry(us,co[1].length)))+"."+pad0(dec(us,co[1].length),co[1].length);if(co=is.match(/^#,#*,#0/))return write_num_flt(cs,is.replace(/^#,#*,/,""),us);if(co=is.match(/^([0#]+)(\\?-([0#]+))+$/))return lo=_strrev(write_num_flt(cs,is.replace(/[\\-]/g,""),us)),uo=0,_strrev(_strrev(is.replace(/\\/g,"")).replace(/[0#]/g,function(wl){return uo<lo.length?lo.charAt(uo++):wl==="0"?"0":""}));if(is.match(phone))return lo=write_num_flt(cs,"##########",us),"("+lo.substr(0,3)+") "+lo.substr(3,3)+"-"+lo.substr(6);var _a="";if(co=is.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return uo=Math.min(co[4].length,7),ga=SSF_frac(ba,Math.pow(10,uo)-1,!1),lo=""+xa,_a=write_num("n",co[1],ga[1]),_a.charAt(_a.length-1)==" "&&(_a=_a.substr(0,_a.length-1)+"0"),lo+=_a+co[2]+"/"+co[3],_a=rpad_(ga[2],uo),_a.length<co[4].length&&(_a=hashq(co[4].substr(co[4].length-_a.length))+_a),lo+=_a,lo;if(co=is.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return uo=Math.min(Math.max(co[1].length,co[4].length),7),ga=SSF_frac(ba,Math.pow(10,uo)-1,!0),xa+(ga[0]||(ga[1]?"":"0"))+" "+(ga[1]?pad_(ga[1],uo)+co[2]+"/"+co[3]+rpad_(ga[2],uo):fill(" ",2*uo+1+co[2].length+co[3].length));if(co=is.match(/^[#0?]+$/))return lo=pad0r(us,0),is.length<=lo.length?lo:hashq(is.substr(0,is.length-lo.length))+lo;if(co=is.match(/^([#0?]+)\.([#0]+)$/)){lo=""+us.toFixed(Math.min(co[2].length,10)).replace(/([^0])0+$/,"$1"),uo=lo.indexOf(".");var $a=is.indexOf(".")-uo,xl=is.length-lo.length-$a;return hashq(is.substr(0,$a)+lo+is.substr(is.length-xl))}if(co=is.match(/^00,000\.([#0]*0)$/))return uo=dec(us,co[1].length),us<0?"-"+write_num_flt(cs,is,-us):commaify(flr(us)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(wl){return"00,"+(wl.length<3?pad0(0,3-wl.length):"")+wl})+"."+pad0(uo,co[1].length);switch(is){case"###,##0.00":return write_num_flt(cs,"#,##0.00",us);case"###,###":case"##,###":case"#,###":var yl=commaify(pad0r(ba,0));return yl!=="0"?xa+yl:"";case"###,###.00":return write_num_flt(cs,"###,##0.00",us).replace(/^0\./,".");case"#,###.00":return write_num_flt(cs,"#,##0.00",us).replace(/^0\./,".")}throw new Error("unsupported format |"+is+"|")}function write_num_cm2(cs,is,us){for(var hs=is.length-1;is.charCodeAt(hs-1)===44;)--hs;return write_num(cs,is.substr(0,hs),us/Math.pow(10,3*(is.length-hs)))}function write_num_pct2(cs,is,us){var hs=is.replace(pct1,""),lo=is.length-hs.length;return write_num(cs,hs,us*Math.pow(10,2*lo))+fill("%",lo)}function write_num_exp2(cs,is){var us,hs=cs.indexOf("E")-cs.indexOf(".")-1;if(cs.match(/^#+0.0E\+0$/)){if(is==0)return"0.0E+0";if(is<0)return"-"+write_num_exp2(cs,-is);var lo=cs.indexOf(".");lo===-1&&(lo=cs.indexOf("E"));var co=Math.floor(Math.log(is)*Math.LOG10E)%lo;if(co<0&&(co+=lo),us=(is/Math.pow(10,co)).toPrecision(hs+1+(lo+co)%lo),!us.match(/[Ee]/)){var uo=Math.floor(Math.log(is)*Math.LOG10E);us.indexOf(".")===-1?us=us.charAt(0)+"."+us.substr(1)+"E+"+(uo-us.length+co):us+="E+"+(uo-co),us=us.replace(/\+-/,"-")}us=us.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(ga,ba,xa,_a){return ba+xa+_a.substr(0,(lo+co)%lo)+"."+_a.substr(co)+"E"})}else us=is.toExponential(hs);return cs.match(/E\+00$/)&&us.match(/e[+-]\d$/)&&(us=us.substr(0,us.length-1)+"0"+us.charAt(us.length-1)),cs.match(/E\-/)&&us.match(/e\+/)&&(us=us.replace(/e\+/,"e")),us.replace("e","E")}function write_num_int(cs,is,us){if(cs.charCodeAt(0)===40&&!is.match(closeparen)){var hs=is.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return us>=0?write_num_int("n",hs,us):"("+write_num_int("n",hs,-us)+")"}if(is.charCodeAt(is.length-1)===44)return write_num_cm2(cs,is,us);if(is.indexOf("%")!==-1)return write_num_pct2(cs,is,us);if(is.indexOf("E")!==-1)return write_num_exp2(is,us);if(is.charCodeAt(0)===36)return"$"+write_num_int(cs,is.substr(is.charAt(1)==" "?2:1),us);var lo,co,uo,ga,ba=Math.abs(us),xa=us<0?"-":"";if(is.match(/^00+$/))return xa+pad0(ba,is.length);if(is.match(/^[#?]+$/))return lo=""+us,us===0&&(lo=""),lo.length>is.length?lo:hashq(is.substr(0,is.length-lo.length))+lo;if(co=is.match(frac1))return write_num_f2(co,ba,xa);if(is.match(/^#+0+$/))return xa+pad0(ba,is.length-is.indexOf("0"));if(co=is.match(dec1))return lo=(""+us).replace(/^([^\.]+)$/,"$1."+hashq(co[1])).replace(/\.$/,"."+hashq(co[1])),lo=lo.replace(/\.(\d*)$/,function(wl,_l){return"."+_l+fill("0",hashq(co[1]).length-_l.length)}),is.indexOf("0.")!==-1?lo:lo.replace(/^0\./,".");if(is=is.replace(/^#+([0.])/,"$1"),co=is.match(/^(0*)\.(#*)$/))return xa+(""+ba).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,co[1].length?"0.":".");if(co=is.match(/^#{1,3},##0(\.?)$/))return xa+commaify(""+ba);if(co=is.match(/^#,##0\.([#0]*0)$/))return us<0?"-"+write_num_int(cs,is,-us):commaify(""+us)+"."+fill("0",co[1].length);if(co=is.match(/^#,#*,#0/))return write_num_int(cs,is.replace(/^#,#*,/,""),us);if(co=is.match(/^([0#]+)(\\?-([0#]+))+$/))return lo=_strrev(write_num_int(cs,is.replace(/[\\-]/g,""),us)),uo=0,_strrev(_strrev(is.replace(/\\/g,"")).replace(/[0#]/g,function(wl){return uo<lo.length?lo.charAt(uo++):wl==="0"?"0":""}));if(is.match(phone))return lo=write_num_int(cs,"##########",us),"("+lo.substr(0,3)+") "+lo.substr(3,3)+"-"+lo.substr(6);var _a="";if(co=is.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return uo=Math.min(co[4].length,7),ga=SSF_frac(ba,Math.pow(10,uo)-1,!1),lo=""+xa,_a=write_num("n",co[1],ga[1]),_a.charAt(_a.length-1)==" "&&(_a=_a.substr(0,_a.length-1)+"0"),lo+=_a+co[2]+"/"+co[3],_a=rpad_(ga[2],uo),_a.length<co[4].length&&(_a=hashq(co[4].substr(co[4].length-_a.length))+_a),lo+=_a,lo;if(co=is.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return uo=Math.min(Math.max(co[1].length,co[4].length),7),ga=SSF_frac(ba,Math.pow(10,uo)-1,!0),xa+(ga[0]||(ga[1]?"":"0"))+" "+(ga[1]?pad_(ga[1],uo)+co[2]+"/"+co[3]+rpad_(ga[2],uo):fill(" ",2*uo+1+co[2].length+co[3].length));if(co=is.match(/^[#0?]+$/))return lo=""+us,is.length<=lo.length?lo:hashq(is.substr(0,is.length-lo.length))+lo;if(co=is.match(/^([#0]+)\.([#0]+)$/)){lo=""+us.toFixed(Math.min(co[2].length,10)).replace(/([^0])0+$/,"$1"),uo=lo.indexOf(".");var $a=is.indexOf(".")-uo,xl=is.length-lo.length-$a;return hashq(is.substr(0,$a)+lo+is.substr(is.length-xl))}if(co=is.match(/^00,000\.([#0]*0)$/))return us<0?"-"+write_num_int(cs,is,-us):commaify(""+us).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(wl){return"00,"+(wl.length<3?pad0(0,3-wl.length):"")+wl})+"."+pad0(0,co[1].length);switch(is){case"###,###":case"##,###":case"#,###":var yl=commaify(""+ba);return yl!=="0"?xa+yl:"";default:if(is.match(/\.[0#?]*$/))return write_num_int(cs,is.slice(0,is.lastIndexOf(".")),us)+hashq(is.slice(is.lastIndexOf(".")))}throw new Error("unsupported format |"+is+"|")}function write_num(cs,is,us){return(us|0)===us?write_num_int(cs,is,us):write_num_flt(cs,is,us)}function SSF_split_fmt(cs){for(var is=[],us=!1,hs=0,lo=0;hs<cs.length;++hs)switch(cs.charCodeAt(hs)){case 34:us=!us;break;case 95:case 42:case 92:++hs;break;case 59:is[is.length]=cs.substr(lo,hs-lo),lo=hs+1}if(is[is.length]=cs.substr(lo),us===!0)throw new Error("Format |"+cs+"| unterminated string ");return is}var SSF_abstime=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fmt_is_date(cs){for(var is=0,us="",hs="";is<cs.length;)switch(us=cs.charAt(is)){case"G":SSF_isgeneral(cs,is)&&(is+=6),is++;break;case'"':for(;cs.charCodeAt(++is)!==34&&is<cs.length;);++is;break;case"\\":is+=2;break;case"_":is+=2;break;case"@":++is;break;case"B":case"b":if(cs.charAt(is+1)==="1"||cs.charAt(is+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(cs.substr(is,3).toUpperCase()==="A/P"||cs.substr(is,5).toUpperCase()==="AM/PM"||cs.substr(is,5).toUpperCase()==="/")return!0;++is;break;case"[":for(hs=us;cs.charAt(is++)!=="]"&&is<cs.length;)hs+=cs.charAt(is);if(hs.match(SSF_abstime))return!0;break;case".":case"0":case"#":for(;is<cs.length&&("0#?.,E+-%".indexOf(us=cs.charAt(++is))>-1||us=="\\"&&cs.charAt(is+1)=="-"&&"0#".indexOf(cs.charAt(is+2))>-1););break;case"?":for(;cs.charAt(++is)===us;);break;case"*":++is,(cs.charAt(is)==" "||cs.charAt(is)=="*")&&++is;break;case"(":case")":++is;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;is<cs.length&&"0123456789".indexOf(cs.charAt(++is))>-1;);break;case" ":++is;break;default:++is;break}return!1}function eval_fmt(cs,is,us,hs){for(var lo=[],co="",uo=0,ga="",ba="t",xa,_a,$a,xl="H";uo<cs.length;)switch(ga=cs.charAt(uo)){case"G":if(!SSF_isgeneral(cs,uo))throw new Error("unrecognized character "+ga+" in "+cs);lo[lo.length]={t:"G",v:"General"},uo+=7;break;case'"':for(co="";($a=cs.charCodeAt(++uo))!==34&&uo<cs.length;)co+=String.fromCharCode($a);lo[lo.length]={t:"t",v:co},++uo;break;case"\\":var yl=cs.charAt(++uo),wl=yl==="("||yl===")"?yl:"t";lo[lo.length]={t:wl,v:yl},++uo;break;case"_":lo[lo.length]={t:"t",v:" "},uo+=2;break;case"@":lo[lo.length]={t:"T",v:is},++uo;break;case"B":case"b":if(cs.charAt(uo+1)==="1"||cs.charAt(uo+1)==="2"){if(xa==null&&(xa=SSF_parse_date_code(is,us,cs.charAt(uo+1)==="2"),xa==null))return"";lo[lo.length]={t:"X",v:cs.substr(uo,2)},ba=ga,uo+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":ga=ga.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(is<0||xa==null&&(xa=SSF_parse_date_code(is,us),xa==null))return"";for(co=ga;++uo<cs.length&&cs.charAt(uo).toLowerCase()===ga;)co+=ga;ga==="m"&&ba.toLowerCase()==="h"&&(ga="M"),ga==="h"&&(ga=xl),lo[lo.length]={t:ga,v:co},ba=ga;break;case"A":case"a":case"":var _l={t:ga,v:ga};if(xa==null&&(xa=SSF_parse_date_code(is,us)),cs.substr(uo,3).toUpperCase()==="A/P"?(xa!=null&&(_l.v=xa.H>=12?"P":"A"),_l.t="T",xl="h",uo+=3):cs.substr(uo,5).toUpperCase()==="AM/PM"?(xa!=null&&(_l.v=xa.H>=12?"PM":"AM"),_l.t="T",uo+=5,xl="h"):cs.substr(uo,5).toUpperCase()==="/"?(xa!=null&&(_l.v=xa.H>=12?"":""),_l.t="T",uo+=5,xl="h"):(_l.t="t",++uo),xa==null&&_l.t==="T")return"";lo[lo.length]=_l,ba=ga;break;case"[":for(co=ga;cs.charAt(uo++)!=="]"&&uo<cs.length;)co+=cs.charAt(uo);if(co.slice(-1)!=="]")throw'unterminated "[" block: |'+co+"|";if(co.match(SSF_abstime)){if(xa==null&&(xa=SSF_parse_date_code(is,us),xa==null))return"";lo[lo.length]={t:"Z",v:co.toLowerCase()},ba=co.charAt(1)}else co.indexOf("$")>-1&&(co=(co.match(/\$([^-\[\]]*)/)||[])[1]||"$",fmt_is_date(cs)||(lo[lo.length]={t:"t",v:co}));break;case".":if(xa!=null){for(co=ga;++uo<cs.length&&(ga=cs.charAt(uo))==="0";)co+=ga;lo[lo.length]={t:"s",v:co};break}case"0":case"#":for(co=ga;++uo<cs.length&&"0#?.,E+-%".indexOf(ga=cs.charAt(uo))>-1;)co+=ga;lo[lo.length]={t:"n",v:co};break;case"?":for(co=ga;cs.charAt(++uo)===ga;)co+=ga;lo[lo.length]={t:ga,v:co},ba=ga;break;case"*":++uo,(cs.charAt(uo)==" "||cs.charAt(uo)=="*")&&++uo;break;case"(":case")":lo[lo.length]={t:hs===1?"t":ga,v:ga},++uo;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(co=ga;uo<cs.length&&"0123456789".indexOf(cs.charAt(++uo))>-1;)co+=cs.charAt(uo);lo[lo.length]={t:"D",v:co};break;case" ":lo[lo.length]={t:ga,v:ga},++uo;break;case"$":lo[lo.length]={t:"t",v:"$"},++uo;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(ga)===-1)throw new Error("unrecognized character "+ga+" in "+cs);lo[lo.length]={t:"t",v:ga},++uo;break}var El=0,Sl=0,Cl;for(uo=lo.length-1,ba="t";uo>=0;--uo)switch(lo[uo].t){case"h":case"H":lo[uo].t=xl,ba="h",El<1&&(El=1);break;case"s":(Cl=lo[uo].v.match(/\.0+$/))&&(Sl=Math.max(Sl,Cl[0].length-1)),El<3&&(El=3);case"d":case"y":case"M":case"e":ba=lo[uo].t;break;case"m":ba==="s"&&(lo[uo].t="M",El<2&&(El=2));break;case"X":break;case"Z":El<1&&lo[uo].v.match(/[Hh]/)&&(El=1),El<2&&lo[uo].v.match(/[Mm]/)&&(El=2),El<3&&lo[uo].v.match(/[Ss]/)&&(El=3)}switch(El){case 0:break;case 1:xa.u>=.5&&(xa.u=0,++xa.S),xa.S>=60&&(xa.S=0,++xa.M),xa.M>=60&&(xa.M=0,++xa.H);break;case 2:xa.u>=.5&&(xa.u=0,++xa.S),xa.S>=60&&(xa.S=0,++xa.M);break}var Tl="",Dl;for(uo=0;uo<lo.length;++uo)switch(lo[uo].t){case"t":case"T":case" ":case"D":break;case"X":lo[uo].v="",lo[uo].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":lo[uo].v=SSF_write_date(lo[uo].t.charCodeAt(0),lo[uo].v,xa,Sl),lo[uo].t="t";break;case"n":case"?":for(Dl=uo+1;lo[Dl]!=null&&((ga=lo[Dl].t)==="?"||ga==="D"||(ga===" "||ga==="t")&&lo[Dl+1]!=null&&(lo[Dl+1].t==="?"||lo[Dl+1].t==="t"&&lo[Dl+1].v==="/")||lo[uo].t==="("&&(ga===" "||ga==="n"||ga===")")||ga==="t"&&(lo[Dl].v==="/"||lo[Dl].v===" "&&lo[Dl+1]!=null&&lo[Dl+1].t=="?"));)lo[uo].v+=lo[Dl].v,lo[Dl]={v:"",t:";"},++Dl;Tl+=lo[uo].v,uo=Dl-1;break;case"G":lo[uo].t="t",lo[uo].v=SSF_general(is,us);break}var Fl="",Pl,Al;if(Tl.length>0){Tl.charCodeAt(0)==40?(Pl=is<0&&Tl.charCodeAt(0)===45?-is:is,Al=write_num("n",Tl,Pl)):(Pl=is<0&&hs>1?-is:is,Al=write_num("n",Tl,Pl),Pl<0&&lo[0]&&lo[0].t=="t"&&(Al=Al.substr(1),lo[0].v="-"+lo[0].v)),Dl=Al.length-1;var Rl=lo.length;for(uo=0;uo<lo.length;++uo)if(lo[uo]!=null&&lo[uo].t!="t"&&lo[uo].v.indexOf(".")>-1){Rl=uo;break}var Il=lo.length;if(Rl===lo.length&&Al.indexOf("E")===-1){for(uo=lo.length-1;uo>=0;--uo)lo[uo]==null||"n?".indexOf(lo[uo].t)===-1||(Dl>=lo[uo].v.length-1?(Dl-=lo[uo].v.length,lo[uo].v=Al.substr(Dl+1,lo[uo].v.length)):Dl<0?lo[uo].v="":(lo[uo].v=Al.substr(0,Dl+1),Dl=-1),lo[uo].t="t",Il=uo);Dl>=0&&Il<lo.length&&(lo[Il].v=Al.substr(0,Dl+1)+lo[Il].v)}else if(Rl!==lo.length&&Al.indexOf("E")===-1){for(Dl=Al.indexOf(".")-1,uo=Rl;uo>=0;--uo)if(!(lo[uo]==null||"n?".indexOf(lo[uo].t)===-1)){for(_a=lo[uo].v.indexOf(".")>-1&&uo===Rl?lo[uo].v.indexOf(".")-1:lo[uo].v.length-1,Fl=lo[uo].v.substr(_a+1);_a>=0;--_a)Dl>=0&&(lo[uo].v.charAt(_a)==="0"||lo[uo].v.charAt(_a)==="#")&&(Fl=Al.charAt(Dl--)+Fl);lo[uo].v=Fl,lo[uo].t="t",Il=uo}for(Dl>=0&&Il<lo.length&&(lo[Il].v=Al.substr(0,Dl+1)+lo[Il].v),Dl=Al.indexOf(".")+1,uo=Rl;uo<lo.length;++uo)if(!(lo[uo]==null||"n?(".indexOf(lo[uo].t)===-1&&uo!==Rl)){for(_a=lo[uo].v.indexOf(".")>-1&&uo===Rl?lo[uo].v.indexOf(".")+1:0,Fl=lo[uo].v.substr(0,_a);_a<lo[uo].v.length;++_a)Dl<Al.length&&(Fl+=Al.charAt(Dl++));lo[uo].v=Fl,lo[uo].t="t",Il=uo}}}for(uo=0;uo<lo.length;++uo)lo[uo]!=null&&"n?".indexOf(lo[uo].t)>-1&&(Pl=hs>1&&is<0&&uo>0&&lo[uo-1].v==="-"?-is:is,lo[uo].v=write_num(lo[uo].t,lo[uo].v,Pl),lo[uo].t="t");var Bl="";for(uo=0;uo!==lo.length;++uo)lo[uo]!=null&&(Bl+=lo[uo].v);return Bl}var cfregex2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function chkcond(cs,is){if(is==null)return!1;var us=parseFloat(is[2]);switch(is[1]){case"=":if(cs==us)return!0;break;case">":if(cs>us)return!0;break;case"<":if(cs<us)return!0;break;case"<>":if(cs!=us)return!0;break;case">=":if(cs>=us)return!0;break;case"<=":if(cs<=us)return!0;break}return!1}function choose_fmt(cs,is){var us=SSF_split_fmt(cs),hs=us.length,lo=us[hs-1].indexOf("@");if(hs<4&&lo>-1&&--hs,us.length>4)throw new Error("cannot find right format for |"+us.join("|")+"|");if(typeof is!="number")return[4,us.length===4||lo>-1?us[us.length-1]:"@"];switch(us.length){case 1:us=lo>-1?["General","General","General",us[0]]:[us[0],us[0],us[0],"@"];break;case 2:us=lo>-1?[us[0],us[0],us[0],us[1]]:[us[0],us[1],us[0],"@"];break;case 3:us=lo>-1?[us[0],us[1],us[0],us[2]]:[us[0],us[1],us[2],"@"];break}var co=is>0?us[0]:is<0?us[1]:us[2];if(us[0].indexOf("[")===-1&&us[1].indexOf("[")===-1)return[hs,co];if(us[0].match(/\[[=<>]/)!=null||us[1].match(/\[[=<>]/)!=null){var uo=us[0].match(cfregex2),ga=us[1].match(cfregex2);return chkcond(is,uo)?[hs,us[0]]:chkcond(is,ga)?[hs,us[1]]:[hs,us[uo!=null&&ga!=null?2:1]]}return[hs,co]}function SSF_format(cs,is,us){us==null&&(us={});var hs="";switch(typeof cs){case"string":cs=="m/d/yy"&&us.dateNF?hs=us.dateNF:hs=cs;break;case"number":cs==14&&us.dateNF?hs=us.dateNF:hs=(us.table!=null?us.table:table_fmt)[cs],hs==null&&(hs=us.table&&us.table[SSF_default_map[cs]]||table_fmt[SSF_default_map[cs]]),hs==null&&(hs=SSF_default_str[cs]||"General");break}if(SSF_isgeneral(hs,0))return SSF_general(is,us);is instanceof Date&&(is=datenum_local(is,us.date1904));var lo=choose_fmt(hs,is);if(SSF_isgeneral(lo[1]))return SSF_general(is,us);if(is===!0)is="TRUE";else if(is===!1)is="FALSE";else if(is===""||is==null)return"";return eval_fmt(lo[1],is,us,lo[0])}function SSF_load(cs,is){if(typeof is!="number"){is=+is||-1;for(var us=0;us<392;++us){if(table_fmt[us]==null){is<0&&(is=us);continue}if(table_fmt[us]==cs){is=us;break}}is<0&&(is=391)}return table_fmt[is]=cs,is}function SSF_load_table(cs){for(var is=0;is!=392;++is)cs[is]!==void 0&&SSF_load(cs[is],is)}function make_ssf(){table_fmt=SSF_init_table()}var dateNFregex=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function dateNF_regex(cs){var is=typeof cs=="number"?table_fmt[cs]:cs;return is=is.replace(dateNFregex,"(\\d+)"),new RegExp("^"+is+"$")}function dateNF_fix(cs,is,us){var hs=-1,lo=-1,co=-1,uo=-1,ga=-1,ba=-1;(is.match(dateNFregex)||[]).forEach(function($a,xl){var yl=parseInt(us[xl+1],10);switch($a.toLowerCase().charAt(0)){case"y":hs=yl;break;case"d":co=yl;break;case"h":uo=yl;break;case"s":ba=yl;break;case"m":uo>=0?ga=yl:lo=yl;break}}),ba>=0&&ga==-1&&lo>=0&&(ga=lo,lo=-1);var xa=(""+(hs>=0?hs:new Date().getFullYear())).slice(-4)+"-"+("00"+(lo>=1?lo:1)).slice(-2)+"-"+("00"+(co>=1?co:1)).slice(-2);xa.length==7&&(xa="0"+xa),xa.length==8&&(xa="20"+xa);var _a=("00"+(uo>=0?uo:0)).slice(-2)+":"+("00"+(ga>=0?ga:0)).slice(-2)+":"+("00"+(ba>=0?ba:0)).slice(-2);return uo==-1&&ga==-1&&ba==-1?xa:hs==-1&&lo==-1&&co==-1?_a:xa+"T"+_a}var CRC32=function(){var cs={};cs.version="1.2.0";function is(){for(var Al=0,Rl=new Array(256),Il=0;Il!=256;++Il)Al=Il,Al=Al&1?-306674912^Al>>>1:Al>>>1,Al=Al&1?-306674912^Al>>>1:Al>>>1,Al=Al&1?-306674912^Al>>>1:Al>>>1,Al=Al&1?-306674912^Al>>>1:Al>>>1,Al=Al&1?-306674912^Al>>>1:Al>>>1,Al=Al&1?-306674912^Al>>>1:Al>>>1,Al=Al&1?-306674912^Al>>>1:Al>>>1,Al=Al&1?-306674912^Al>>>1:Al>>>1,Rl[Il]=Al;return typeof Int32Array<"u"?new Int32Array(Rl):Rl}var us=is();function hs(Al){var Rl=0,Il=0,Bl=0,Ol=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Bl=0;Bl!=256;++Bl)Ol[Bl]=Al[Bl];for(Bl=0;Bl!=256;++Bl)for(Il=Al[Bl],Rl=256+Bl;Rl<4096;Rl+=256)Il=Ol[Rl]=Il>>>8^Al[Il&255];var zl=[];for(Bl=1;Bl!=16;++Bl)zl[Bl-1]=typeof Int32Array<"u"?Ol.subarray(Bl*256,Bl*256+256):Ol.slice(Bl*256,Bl*256+256);return zl}var lo=hs(us),co=lo[0],uo=lo[1],ga=lo[2],ba=lo[3],xa=lo[4],_a=lo[5],$a=lo[6],xl=lo[7],yl=lo[8],wl=lo[9],_l=lo[10],El=lo[11],Sl=lo[12],Cl=lo[13],Tl=lo[14];function Dl(Al,Rl){for(var Il=Rl^-1,Bl=0,Ol=Al.length;Bl<Ol;)Il=Il>>>8^us[(Il^Al.charCodeAt(Bl++))&255];return~Il}function Fl(Al,Rl){for(var Il=Rl^-1,Bl=Al.length-15,Ol=0;Ol<Bl;)Il=Tl[Al[Ol++]^Il&255]^Cl[Al[Ol++]^Il>>8&255]^Sl[Al[Ol++]^Il>>16&255]^El[Al[Ol++]^Il>>>24]^_l[Al[Ol++]]^wl[Al[Ol++]]^yl[Al[Ol++]]^xl[Al[Ol++]]^$a[Al[Ol++]]^_a[Al[Ol++]]^xa[Al[Ol++]]^ba[Al[Ol++]]^ga[Al[Ol++]]^uo[Al[Ol++]]^co[Al[Ol++]]^us[Al[Ol++]];for(Bl+=15;Ol<Bl;)Il=Il>>>8^us[(Il^Al[Ol++])&255];return~Il}function Pl(Al,Rl){for(var Il=Rl^-1,Bl=0,Ol=Al.length,zl=0,Hl=0;Bl<Ol;)zl=Al.charCodeAt(Bl++),zl<128?Il=Il>>>8^us[(Il^zl)&255]:zl<2048?(Il=Il>>>8^us[(Il^(192|zl>>6&31))&255],Il=Il>>>8^us[(Il^(128|zl&63))&255]):zl>=55296&&zl<57344?(zl=(zl&1023)+64,Hl=Al.charCodeAt(Bl++)&1023,Il=Il>>>8^us[(Il^(240|zl>>8&7))&255],Il=Il>>>8^us[(Il^(128|zl>>2&63))&255],Il=Il>>>8^us[(Il^(128|Hl>>6&15|(zl&3)<<4))&255],Il=Il>>>8^us[(Il^(128|Hl&63))&255]):(Il=Il>>>8^us[(Il^(224|zl>>12&15))&255],Il=Il>>>8^us[(Il^(128|zl>>6&63))&255],Il=Il>>>8^us[(Il^(128|zl&63))&255]);return~Il}return cs.table=us,cs.bstr=Dl,cs.buf=Fl,cs.str=Pl,cs}(),CFB=function cs(){var is={};is.version="1.2.1";function us(Xl,du){for(var su=Xl.split("/"),cu=du.split("/"),hu=0,wu=0,Nu=Math.min(su.length,cu.length);hu<Nu;++hu){if(wu=su[hu].length-cu[hu].length)return wu;if(su[hu]!=cu[hu])return su[hu]<cu[hu]?-1:1}return su.length-cu.length}function hs(Xl){if(Xl.charAt(Xl.length-1)=="/")return Xl.slice(0,-1).indexOf("/")===-1?Xl:hs(Xl.slice(0,-1));var du=Xl.lastIndexOf("/");return du===-1?Xl:Xl.slice(0,du+1)}function lo(Xl){if(Xl.charAt(Xl.length-1)=="/")return lo(Xl.slice(0,-1));var du=Xl.lastIndexOf("/");return du===-1?Xl:Xl.slice(du+1)}function co(Xl,du){typeof du=="string"&&(du=new Date(du));var su=du.getHours();su=su<<6|du.getMinutes(),su=su<<5|du.getSeconds()>>>1,Xl.write_shift(2,su);var cu=du.getFullYear()-1980;cu=cu<<4|du.getMonth()+1,cu=cu<<5|du.getDate(),Xl.write_shift(2,cu)}function uo(Xl){var du=Xl.read_shift(2)&65535,su=Xl.read_shift(2)&65535,cu=new Date,hu=su&31;su>>>=5;var wu=su&15;su>>>=4,cu.setMilliseconds(0),cu.setFullYear(su+1980),cu.setMonth(wu-1),cu.setDate(hu);var Nu=du&31;du>>>=5;var tp=du&63;return du>>>=6,cu.setHours(du),cu.setMinutes(tp),cu.setSeconds(Nu<<1),cu}function ga(Xl){prep_blob(Xl,0);for(var du={},su=0;Xl.l<=Xl.length-4;){var cu=Xl.read_shift(2),hu=Xl.read_shift(2),wu=Xl.l+hu,Nu={};switch(cu){case 21589:su=Xl.read_shift(1),su&1&&(Nu.mtime=Xl.read_shift(4)),hu>5&&(su&2&&(Nu.atime=Xl.read_shift(4)),su&4&&(Nu.ctime=Xl.read_shift(4))),Nu.mtime&&(Nu.mt=new Date(Nu.mtime*1e3));break}Xl.l=wu,du[cu]=Nu}return du}var ba;function xa(){return ba||(ba={})}function _a(Xl,du){if(Xl[0]==80&&Xl[1]==75)return Vp(Xl,du);if((Xl[0]|32)==109&&(Xl[1]|32)==105)return Ou(Xl,du);if(Xl.length<512)throw new Error("CFB file size "+Xl.length+" < 512");var su=3,cu=512,hu=0,wu=0,Nu=0,tp=0,Yu=0,zu=[],rp=Xl.slice(0,512);prep_blob(rp,0);var dp=$a(rp);switch(su=dp[0],su){case 3:cu=512;break;case 4:cu=4096;break;case 0:if(dp[1]==0)return Vp(Xl,du);default:throw new Error("Major Version: Expected 3 or 4 saw "+su)}cu!==512&&(rp=Xl.slice(0,cu),prep_blob(rp,28));var Ku=Xl.slice(0,cu);xl(rp,su);var vp=rp.read_shift(4,"i");if(su===3&&vp!==0)throw new Error("# Directory Sectors: Expected 0 saw "+vp);rp.l+=4,Nu=rp.read_shift(4,"i"),rp.l+=4,rp.chk("00100000","Mini Stream Cutoff Size: "),tp=rp.read_shift(4,"i"),hu=rp.read_shift(4,"i"),Yu=rp.read_shift(4,"i"),wu=rp.read_shift(4,"i");for(var fp=-1,Op=0;Op<109&&(fp=rp.read_shift(4,"i"),!(fp<0));++Op)zu[Op]=fp;var Kp=yl(Xl,cu);El(Yu,wu,Kp,cu,zu);var s0=Cl(Kp,Nu,zu,cu);s0[Nu].name="!Directory",hu>0&&tp!==Hl&&(s0[tp].name="!MiniFAT"),s0[zu[0]].name="!FAT",s0.fat_addrs=zu,s0.ssz=cu;var r0={},u0=[],l0=[],em=[];Tl(Nu,s0,Kp,u0,hu,r0,l0,tp),wl(l0,em,u0),u0.shift();var Wp={FileIndex:l0,FullPaths:em};return du&&du.raw&&(Wp.raw={header:Ku,sectors:Kp}),Wp}function $a(Xl){if(Xl[Xl.l]==80&&Xl[Xl.l+1]==75)return[0,0];Xl.chk(ou,"Header Signature: "),Xl.l+=16;var du=Xl.read_shift(2,"u");return[Xl.read_shift(2,"u"),du]}function xl(Xl,du){var su=9;switch(Xl.l+=2,su=Xl.read_shift(2)){case 9:if(du!=3)throw new Error("Sector Shift: Expected 9 saw "+su);break;case 12:if(du!=4)throw new Error("Sector Shift: Expected 12 saw "+su);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+su)}Xl.chk("0600","Mini Sector Shift: "),Xl.chk("000000000000","Reserved: ")}function yl(Xl,du){for(var su=Math.ceil(Xl.length/du)-1,cu=[],hu=1;hu<su;++hu)cu[hu-1]=Xl.slice(hu*du,(hu+1)*du);return cu[su-1]=Xl.slice(su*du),cu}function wl(Xl,du,su){for(var cu=0,hu=0,wu=0,Nu=0,tp=0,Yu=su.length,zu=[],rp=[];cu<Yu;++cu)zu[cu]=rp[cu]=cu,du[cu]=su[cu];for(;tp<rp.length;++tp)cu=rp[tp],hu=Xl[cu].L,wu=Xl[cu].R,Nu=Xl[cu].C,zu[cu]===cu&&(hu!==-1&&zu[hu]!==hu&&(zu[cu]=zu[hu]),wu!==-1&&zu[wu]!==wu&&(zu[cu]=zu[wu])),Nu!==-1&&(zu[Nu]=cu),hu!==-1&&cu!=zu[cu]&&(zu[hu]=zu[cu],rp.lastIndexOf(hu)<tp&&rp.push(hu)),wu!==-1&&cu!=zu[cu]&&(zu[wu]=zu[cu],rp.lastIndexOf(wu)<tp&&rp.push(wu));for(cu=1;cu<Yu;++cu)zu[cu]===cu&&(wu!==-1&&zu[wu]!==wu?zu[cu]=zu[wu]:hu!==-1&&zu[hu]!==hu&&(zu[cu]=zu[hu]));for(cu=1;cu<Yu;++cu)if(Xl[cu].type!==0){if(tp=cu,tp!=zu[tp])do tp=zu[tp],du[cu]=du[tp]+"/"+du[cu];while(tp!==0&&zu[tp]!==-1&&tp!=zu[tp]);zu[cu]=-1}for(du[0]+="/",cu=1;cu<Yu;++cu)Xl[cu].type!==2&&(du[cu]+="/")}function _l(Xl,du,su){for(var cu=Xl.start,hu=Xl.size,wu=[],Nu=cu;su&&hu>0&&Nu>=0;)wu.push(du.slice(Nu*zl,Nu*zl+zl)),hu-=zl,Nu=__readInt32LE(su,Nu*4);return wu.length===0?new_buf(0):bconcat(wu).slice(0,Xl.size)}function El(Xl,du,su,cu,hu){var wu=Hl;if(Xl===Hl){if(du!==0)throw new Error("DIFAT chain shorter than expected")}else if(Xl!==-1){var Nu=su[Xl],tp=(cu>>>2)-1;if(!Nu)return;for(var Yu=0;Yu<tp&&(wu=__readInt32LE(Nu,Yu*4))!==Hl;++Yu)hu.push(wu);El(__readInt32LE(Nu,cu-4),du-1,su,cu,hu)}}function Sl(Xl,du,su,cu,hu){var wu=[],Nu=[];hu||(hu=[]);var tp=cu-1,Yu=0,zu=0;for(Yu=du;Yu>=0;){hu[Yu]=!0,wu[wu.length]=Yu,Nu.push(Xl[Yu]);var rp=su[Math.floor(Yu*4/cu)];if(zu=Yu*4&tp,cu<4+zu)throw new Error("FAT boundary crossed: "+Yu+" 4 "+cu);if(!Xl[rp])break;Yu=__readInt32LE(Xl[rp],zu)}return{nodes:wu,data:__toBuffer([Nu])}}function Cl(Xl,du,su,cu){var hu=Xl.length,wu=[],Nu=[],tp=[],Yu=[],zu=cu-1,rp=0,dp=0,Ku=0,vp=0;for(rp=0;rp<hu;++rp)if(tp=[],Ku=rp+du,Ku>=hu&&(Ku-=hu),!Nu[Ku]){Yu=[];var fp=[];for(dp=Ku;dp>=0;){fp[dp]=!0,Nu[dp]=!0,tp[tp.length]=dp,Yu.push(Xl[dp]);var Op=su[Math.floor(dp*4/cu)];if(vp=dp*4&zu,cu<4+vp)throw new Error("FAT boundary crossed: "+dp+" 4 "+cu);if(!Xl[Op]||(dp=__readInt32LE(Xl[Op],vp),fp[dp]))break}wu[Ku]={nodes:tp,data:__toBuffer([Yu])}}return wu}function Tl(Xl,du,su,cu,hu,wu,Nu,tp){for(var Yu=0,zu=cu.length?2:0,rp=du[Xl].data,dp=0,Ku=0,vp;dp<rp.length;dp+=128){var fp=rp.slice(dp,dp+128);prep_blob(fp,64),Ku=fp.read_shift(2),vp=__utf16le(fp,0,Ku-zu),cu.push(vp);var Op={name:vp,type:fp.read_shift(1),color:fp.read_shift(1),L:fp.read_shift(4,"i"),R:fp.read_shift(4,"i"),C:fp.read_shift(4,"i"),clsid:fp.read_shift(16),state:fp.read_shift(4,"i"),start:0,size:0},Kp=fp.read_shift(2)+fp.read_shift(2)+fp.read_shift(2)+fp.read_shift(2);Kp!==0&&(Op.ct=Dl(fp,fp.l-8));var s0=fp.read_shift(2)+fp.read_shift(2)+fp.read_shift(2)+fp.read_shift(2);s0!==0&&(Op.mt=Dl(fp,fp.l-8)),Op.start=fp.read_shift(4,"i"),Op.size=fp.read_shift(4,"i"),Op.size<0&&Op.start<0&&(Op.size=Op.type=0,Op.start=Hl,Op.name=""),Op.type===5?(Yu=Op.start,hu>0&&Yu!==Hl&&(du[Yu].name="!StreamData")):Op.size>=4096?(Op.storage="fat",du[Op.start]===void 0&&(du[Op.start]=Sl(su,Op.start,du.fat_addrs,du.ssz)),du[Op.start].name=Op.name,Op.content=du[Op.start].data.slice(0,Op.size)):(Op.storage="minifat",Op.size<0?Op.size=0:Yu!==Hl&&Op.start!==Hl&&du[Yu]&&(Op.content=_l(Op,du[Yu].data,(du[tp]||{}).data))),Op.content&&prep_blob(Op.content,0),wu[vp]=Op,Nu.push(Op)}}function Dl(Xl,du){return new Date((__readUInt32LE(Xl,du+4)/1e7*Math.pow(2,32)+__readUInt32LE(Xl,du)/1e7-11644473600)*1e3)}function Fl(Xl,du){return xa(),_a(ba.readFileSync(Xl),du)}function Pl(Xl,du){var su=du&&du.type;switch(su||has_buf&&Buffer.isBuffer(Xl)&&(su="buffer"),su||"base64"){case"file":return Fl(Xl,du);case"base64":return _a(s2a(Base64_decode(Xl)),du);case"binary":return _a(s2a(Xl),du)}return _a(Xl,du)}function Al(Xl,du){var su=du||{},cu=su.root||"Root Entry";if(Xl.FullPaths||(Xl.FullPaths=[]),Xl.FileIndex||(Xl.FileIndex=[]),Xl.FullPaths.length!==Xl.FileIndex.length)throw new Error("inconsistent CFB structure");Xl.FullPaths.length===0&&(Xl.FullPaths[0]=cu+"/",Xl.FileIndex[0]={name:cu,type:5}),su.CLSID&&(Xl.FileIndex[0].clsid=su.CLSID),Rl(Xl)}function Rl(Xl){var du="Sh33tJ5";if(!CFB.find(Xl,"/"+du)){var su=new_buf(4);su[0]=55,su[1]=su[3]=50,su[2]=54,Xl.FileIndex.push({name:du,type:2,content:su,size:4,L:69,R:69,C:69}),Xl.FullPaths.push(Xl.FullPaths[0]+du),Il(Xl)}}function Il(Xl,du){Al(Xl);for(var su=!1,cu=!1,hu=Xl.FullPaths.length-1;hu>=0;--hu){var wu=Xl.FileIndex[hu];switch(wu.type){case 0:cu?su=!0:(Xl.FileIndex.pop(),Xl.FullPaths.pop());break;case 1:case 2:case 5:cu=!0,isNaN(wu.R*wu.L*wu.C)&&(su=!0),wu.R>-1&&wu.L>-1&&wu.R==wu.L&&(su=!0);break;default:su=!0;break}}if(!(!su&&!du)){var Nu=new Date(1987,1,19),tp=0,Yu=Object.create?Object.create(null):{},zu=[];for(hu=0;hu<Xl.FullPaths.length;++hu)Yu[Xl.FullPaths[hu]]=!0,Xl.FileIndex[hu].type!==0&&zu.push([Xl.FullPaths[hu],Xl.FileIndex[hu]]);for(hu=0;hu<zu.length;++hu){var rp=hs(zu[hu][0]);cu=Yu[rp],cu||(zu.push([rp,{name:lo(rp).replace("/",""),type:1,clsid:_c,ct:Nu,mt:Nu,content:null}]),Yu[rp]=!0)}for(zu.sort(function(vp,fp){return us(vp[0],fp[0])}),Xl.FullPaths=[],Xl.FileIndex=[],hu=0;hu<zu.length;++hu)Xl.FullPaths[hu]=zu[hu][0],Xl.FileIndex[hu]=zu[hu][1];for(hu=0;hu<zu.length;++hu){var dp=Xl.FileIndex[hu],Ku=Xl.FullPaths[hu];if(dp.name=lo(Ku).replace("/",""),dp.L=dp.R=dp.C=-(dp.color=1),dp.size=dp.content?dp.content.length:0,dp.start=0,dp.clsid=dp.clsid||_c,hu===0)dp.C=zu.length>1?1:-1,dp.size=0,dp.type=5;else if(Ku.slice(-1)=="/"){for(tp=hu+1;tp<zu.length&&hs(Xl.FullPaths[tp])!=Ku;++tp);for(dp.C=tp>=zu.length?-1:tp,tp=hu+1;tp<zu.length&&hs(Xl.FullPaths[tp])!=hs(Ku);++tp);dp.R=tp>=zu.length?-1:tp,dp.type=1}else hs(Xl.FullPaths[hu+1]||"")==hs(Ku)&&(dp.R=hu+1),dp.type=2}}}function Bl(Xl,du){var su=du||{};if(su.fileType=="mad")return Du(Xl,su);switch(Il(Xl),su.fileType){case"zip":return Qu(Xl,su)}var cu=function(vp){for(var fp=0,Op=0,Kp=0;Kp<vp.FileIndex.length;++Kp){var s0=vp.FileIndex[Kp];if(s0.content){var r0=s0.content.length;r0>0&&(r0<4096?fp+=r0+63>>6:Op+=r0+511>>9)}}for(var u0=vp.FullPaths.length+3>>2,l0=fp+7>>3,em=fp+127>>7,Wp=l0+Op+u0+em,y0=Wp+127>>7,lm=y0<=109?0:Math.ceil((y0-109)/127);Wp+y0+lm+127>>7>y0;)lm=++y0<=109?0:Math.ceil((y0-109)/127);var d0=[1,lm,y0,em,u0,Op,fp,0];return vp.FileIndex[0].size=fp<<6,d0[7]=(vp.FileIndex[0].start=d0[0]+d0[1]+d0[2]+d0[3]+d0[4]+d0[5])+(d0[6]+7>>3),d0}(Xl),hu=new_buf(cu[7]<<9),wu=0,Nu=0;{for(wu=0;wu<8;++wu)hu.write_shift(1,au[wu]);for(wu=0;wu<8;++wu)hu.write_shift(2,0);for(hu.write_shift(2,62),hu.write_shift(2,3),hu.write_shift(2,65534),hu.write_shift(2,9),hu.write_shift(2,6),wu=0;wu<3;++wu)hu.write_shift(2,0);for(hu.write_shift(4,0),hu.write_shift(4,cu[2]),hu.write_shift(4,cu[0]+cu[1]+cu[2]+cu[3]-1),hu.write_shift(4,0),hu.write_shift(4,4096),hu.write_shift(4,cu[3]?cu[0]+cu[1]+cu[2]-1:Hl),hu.write_shift(4,cu[3]),hu.write_shift(-4,cu[1]?cu[0]-1:Hl),hu.write_shift(4,cu[1]),wu=0;wu<109;++wu)hu.write_shift(-4,wu<cu[2]?cu[1]+wu:-1)}if(cu[1])for(Nu=0;Nu<cu[1];++Nu){for(;wu<236+Nu*127;++wu)hu.write_shift(-4,wu<cu[2]?cu[1]+wu:-1);hu.write_shift(-4,Nu===cu[1]-1?Hl:Nu+1)}var tp=function(vp){for(Nu+=vp;wu<Nu-1;++wu)hu.write_shift(-4,wu+1);vp&&(++wu,hu.write_shift(-4,Hl))};for(Nu=wu=0,Nu+=cu[1];wu<Nu;++wu)hu.write_shift(-4,uu.DIFSECT);for(Nu+=cu[2];wu<Nu;++wu)hu.write_shift(-4,uu.FATSECT);tp(cu[3]),tp(cu[4]);for(var Yu=0,zu=0,rp=Xl.FileIndex[0];Yu<Xl.FileIndex.length;++Yu)rp=Xl.FileIndex[Yu],rp.content&&(zu=rp.content.length,!(zu<4096)&&(rp.start=Nu,tp(zu+511>>9)));for(tp(cu[6]+7>>3);hu.l&511;)hu.write_shift(-4,uu.ENDOFCHAIN);for(Nu=wu=0,Yu=0;Yu<Xl.FileIndex.length;++Yu)rp=Xl.FileIndex[Yu],rp.content&&(zu=rp.content.length,!(!zu||zu>=4096)&&(rp.start=Nu,tp(zu+63>>6)));for(;hu.l&511;)hu.write_shift(-4,uu.ENDOFCHAIN);for(wu=0;wu<cu[4]<<2;++wu){var dp=Xl.FullPaths[wu];if(!dp||dp.length===0){for(Yu=0;Yu<17;++Yu)hu.write_shift(4,0);for(Yu=0;Yu<3;++Yu)hu.write_shift(4,-1);for(Yu=0;Yu<12;++Yu)hu.write_shift(4,0);continue}rp=Xl.FileIndex[wu],wu===0&&(rp.start=rp.size?rp.start-1:Hl);var Ku=wu===0&&su.root||rp.name;if(zu=2*(Ku.length+1),hu.write_shift(64,Ku,"utf16le"),hu.write_shift(2,zu),hu.write_shift(1,rp.type),hu.write_shift(1,rp.color),hu.write_shift(-4,rp.L),hu.write_shift(-4,rp.R),hu.write_shift(-4,rp.C),rp.clsid)hu.write_shift(16,rp.clsid,"hex");else for(Yu=0;Yu<4;++Yu)hu.write_shift(4,0);hu.write_shift(4,rp.state||0),hu.write_shift(4,0),hu.write_shift(4,0),hu.write_shift(4,0),hu.write_shift(4,0),hu.write_shift(4,rp.start),hu.write_shift(4,rp.size),hu.write_shift(4,0)}for(wu=1;wu<Xl.FileIndex.length;++wu)if(rp=Xl.FileIndex[wu],rp.size>=4096)if(hu.l=rp.start+1<<9,has_buf&&Buffer.isBuffer(rp.content))rp.content.copy(hu,hu.l,0,rp.size),hu.l+=rp.size+511&-512;else{for(Yu=0;Yu<rp.size;++Yu)hu.write_shift(1,rp.content[Yu]);for(;Yu&511;++Yu)hu.write_shift(1,0)}for(wu=1;wu<Xl.FileIndex.length;++wu)if(rp=Xl.FileIndex[wu],rp.size>0&&rp.size<4096)if(has_buf&&Buffer.isBuffer(rp.content))rp.content.copy(hu,hu.l,0,rp.size),hu.l+=rp.size+63&-64;else{for(Yu=0;Yu<rp.size;++Yu)hu.write_shift(1,rp.content[Yu]);for(;Yu&63;++Yu)hu.write_shift(1,0)}if(has_buf)hu.l=hu.length;else for(;hu.l<hu.length;)hu.write_shift(1,0);return hu}function Ol(Xl,du){var su=Xl.FullPaths.map(function(Yu){return Yu.toUpperCase()}),cu=su.map(function(Yu){var zu=Yu.split("/");return zu[zu.length-(Yu.slice(-1)=="/"?2:1)]}),hu=!1;du.charCodeAt(0)===47?(hu=!0,du=su[0].slice(0,-1)+du):hu=du.indexOf("/")!==-1;var wu=du.toUpperCase(),Nu=hu===!0?su.indexOf(wu):cu.indexOf(wu);if(Nu!==-1)return Xl.FileIndex[Nu];var tp=!wu.match(chr1);for(wu=wu.replace(chr0,""),tp&&(wu=wu.replace(chr1,"!")),Nu=0;Nu<su.length;++Nu)if((tp?su[Nu].replace(chr1,"!"):su[Nu]).replace(chr0,"")==wu||(tp?cu[Nu].replace(chr1,"!"):cu[Nu]).replace(chr0,"")==wu)return Xl.FileIndex[Nu];return null}var zl=64,Hl=-2,ou="d0cf11e0a1b11ae1",au=[208,207,17,224,161,177,26,225],_c="00000000000000000000000000000000",uu={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Hl,FREESECT:-1,HEADER_SIGNATURE:ou,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:_c,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function lu(Xl,du,su){xa();var cu=Bl(Xl,su);ba.writeFileSync(du,cu)}function Kl(Xl){for(var du=new Array(Xl.length),su=0;su<Xl.length;++su)du[su]=String.fromCharCode(Xl[su]);return du.join("")}function xu(Xl,du){var su=Bl(Xl,du);switch(du&&du.type||"buffer"){case"file":return xa(),ba.writeFileSync(du.filename,su),su;case"binary":return typeof su=="string"?su:Kl(su);case"base64":return Base64_encode(typeof su=="string"?su:Kl(su));case"buffer":if(has_buf)return Buffer.isBuffer(su)?su:Buffer_from(su);case"array":return typeof su=="string"?s2a(su):su}return su}var pu;function Ll(Xl){try{var du=Xl.InflateRaw,su=new du;if(su._processChunk(new Uint8Array([3,0]),su._finishFlushFlag),su.bytesRead)pu=Xl;else throw new Error("zlib does not expose bytesRead")}catch(cu){console.error("cannot use native zlib: "+(cu.message||cu))}}function Nl(Xl,du){if(!pu)return Ap(Xl,du);var su=pu.InflateRaw,cu=new su,hu=cu._processChunk(Xl.slice(Xl.l),cu._finishFlushFlag);return Xl.l+=cu.bytesRead,hu}function Ml(Xl){return pu?pu.deflateRawSync(Xl):Bp(Xl)}var Ul=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Vl=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ql=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Jl(Xl){var du=(Xl<<1|Xl<<11)&139536|(Xl<<5|Xl<<15)&558144;return(du>>16|du>>8|du)&255}for(var iu=typeof Uint8Array<"u",fu=iu?new Uint8Array(256):[],_u=0;_u<256;++_u)fu[_u]=Jl(_u);function bu(Xl,du){var su=fu[Xl&255];return du<=8?su>>>8-du:(su=su<<8|fu[Xl>>8&255],du<=16?su>>>16-du:(su=su<<8|fu[Xl>>16&255],su>>>24-du))}function Cu(Xl,du){var su=du&7,cu=du>>>3;return(Xl[cu]|(su<=6?0:Xl[cu+1]<<8))>>>su&3}function Tu(Xl,du){var su=du&7,cu=du>>>3;return(Xl[cu]|(su<=5?0:Xl[cu+1]<<8))>>>su&7}function Fu(Xl,du){var su=du&7,cu=du>>>3;return(Xl[cu]|(su<=4?0:Xl[cu+1]<<8))>>>su&15}function ku(Xl,du){var su=du&7,cu=du>>>3;return(Xl[cu]|(su<=3?0:Xl[cu+1]<<8))>>>su&31}function tu(Xl,du){var su=du&7,cu=du>>>3;return(Xl[cu]|(su<=1?0:Xl[cu+1]<<8))>>>su&127}function eu(Xl,du,su){var cu=du&7,hu=du>>>3,wu=(1<<su)-1,Nu=Xl[hu]>>>cu;return su<8-cu||(Nu|=Xl[hu+1]<<8-cu,su<16-cu)||(Nu|=Xl[hu+2]<<16-cu,su<24-cu)||(Nu|=Xl[hu+3]<<24-cu),Nu&wu}function gu(Xl,du,su){var cu=du&7,hu=du>>>3;return cu<=5?Xl[hu]|=(su&7)<<cu:(Xl[hu]|=su<<cu&255,Xl[hu+1]=(su&7)>>8-cu),du+3}function ru(Xl,du,su){var cu=du&7,hu=du>>>3;return su=(su&1)<<cu,Xl[hu]|=su,du+1}function Pu(Xl,du,su){var cu=du&7,hu=du>>>3;return su<<=cu,Xl[hu]|=su&255,su>>>=8,Xl[hu+1]=su,du+8}function Lu(Xl,du,su){var cu=du&7,hu=du>>>3;return su<<=cu,Xl[hu]|=su&255,su>>>=8,Xl[hu+1]=su&255,Xl[hu+2]=su>>>8,du+16}function Ju(Xl,du){var su=Xl.length,cu=2*su>du?2*su:du+5,hu=0;if(su>=du)return Xl;if(has_buf){var wu=new_unsafe_buf(cu);if(Xl.copy)Xl.copy(wu);else for(;hu<Xl.length;++hu)wu[hu]=Xl[hu];return wu}else if(iu){var Nu=new Uint8Array(cu);if(Nu.set)Nu.set(Xl);else for(;hu<su;++hu)Nu[hu]=Xl[hu];return Nu}return Xl.length=cu,Xl}function Vu(Xl){for(var du=new Array(Xl),su=0;su<Xl;++su)du[su]=0;return du}function Mu(Xl,du,su){var cu=1,hu=0,wu=0,Nu=0,tp=0,Yu=Xl.length,zu=iu?new Uint16Array(32):Vu(32);for(wu=0;wu<32;++wu)zu[wu]=0;for(wu=Yu;wu<su;++wu)Xl[wu]=0;Yu=Xl.length;var rp=iu?new Uint16Array(Yu):Vu(Yu);for(wu=0;wu<Yu;++wu)zu[hu=Xl[wu]]++,cu<hu&&(cu=hu),rp[wu]=0;for(zu[0]=0,wu=1;wu<=cu;++wu)zu[wu+16]=tp=tp+zu[wu-1]<<1;for(wu=0;wu<Yu;++wu)tp=Xl[wu],tp!=0&&(rp[wu]=zu[tp+16]++);var dp=0;for(wu=0;wu<Yu;++wu)if(dp=Xl[wu],dp!=0)for(tp=bu(rp[wu],cu)>>cu-dp,Nu=(1<<cu+4-dp)-1;Nu>=0;--Nu)du[tp|Nu<<dp]=dp&15|wu<<4;return cu}var hp=iu?new Uint16Array(512):Vu(512),mp=iu?new Uint16Array(32):Vu(32);if(!iu){for(var Rp=0;Rp<512;++Rp)hp[Rp]=0;for(Rp=0;Rp<32;++Rp)mp[Rp]=0}(function(){for(var Xl=[],du=0;du<32;du++)Xl.push(5);Mu(Xl,mp,32);var su=[];for(du=0;du<=143;du++)su.push(8);for(;du<=255;du++)su.push(9);for(;du<=279;du++)su.push(7);for(;du<=287;du++)su.push(8);Mu(su,hp,288)})();var Lp=function(){for(var du=iu?new Uint8Array(32768):[],su=0,cu=0;su<Ql.length-1;++su)for(;cu<Ql[su+1];++cu)du[cu]=su;for(;cu<32768;++cu)du[cu]=29;var hu=iu?new Uint8Array(259):[];for(su=0,cu=0;su<Vl.length-1;++su)for(;cu<Vl[su+1];++cu)hu[cu]=su;function wu(tp,Yu){for(var zu=0;zu<tp.length;){var rp=Math.min(65535,tp.length-zu),dp=zu+rp==tp.length;for(Yu.write_shift(1,+dp),Yu.write_shift(2,rp),Yu.write_shift(2,~rp&65535);rp-- >0;)Yu[Yu.l++]=tp[zu++]}return Yu.l}function Nu(tp,Yu){for(var zu=0,rp=0,dp=iu?new Uint16Array(32768):[];rp<tp.length;){var Ku=Math.min(65535,tp.length-rp);if(Ku<10){for(zu=gu(Yu,zu,+(rp+Ku==tp.length)),zu&7&&(zu+=8-(zu&7)),Yu.l=zu/8|0,Yu.write_shift(2,Ku),Yu.write_shift(2,~Ku&65535);Ku-- >0;)Yu[Yu.l++]=tp[rp++];zu=Yu.l*8;continue}zu=gu(Yu,zu,+(rp+Ku==tp.length)+2);for(var vp=0;Ku-- >0;){var fp=tp[rp];vp=(vp<<5^fp)&32767;var Op=-1,Kp=0;if((Op=dp[vp])&&(Op|=rp&-32768,Op>rp&&(Op-=32768),Op<rp))for(;tp[Op+Kp]==tp[rp+Kp]&&Kp<250;)++Kp;if(Kp>2){fp=hu[Kp],fp<=22?zu=Pu(Yu,zu,fu[fp+1]>>1)-1:(Pu(Yu,zu,3),zu+=5,Pu(Yu,zu,fu[fp-23]>>5),zu+=3);var s0=fp<8?0:fp-4>>2;s0>0&&(Lu(Yu,zu,Kp-Vl[fp]),zu+=s0),fp=du[rp-Op],zu=Pu(Yu,zu,fu[fp]>>3),zu-=3;var r0=fp<4?0:fp-2>>1;r0>0&&(Lu(Yu,zu,rp-Op-Ql[fp]),zu+=r0);for(var u0=0;u0<Kp;++u0)dp[vp]=rp&32767,vp=(vp<<5^tp[rp])&32767,++rp;Ku-=Kp-1}else fp<=143?fp=fp+48:zu=ru(Yu,zu,1),zu=Pu(Yu,zu,fu[fp]),dp[vp]=rp&32767,++rp}zu=Pu(Yu,zu,0)-1}return Yu.l=(zu+7)/8|0,Yu.l}return function(Yu,zu){return Yu.length<8?wu(Yu,zu):Nu(Yu,zu)}}();function Bp(Xl){var du=new_buf(50+Math.floor(Xl.length*1.1)),su=Lp(Xl,du);return du.slice(0,su)}var Tp=iu?new Uint16Array(32768):Vu(32768),Ip=iu?new Uint16Array(32768):Vu(32768),Hp=iu?new Uint16Array(128):Vu(128),qp=1,lp=1;function $u(Xl,du){var su=ku(Xl,du)+257;du+=5;var cu=ku(Xl,du)+1;du+=5;var hu=Fu(Xl,du)+4;du+=4;for(var wu=0,Nu=iu?new Uint8Array(19):Vu(19),tp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Yu=1,zu=iu?new Uint8Array(8):Vu(8),rp=iu?new Uint8Array(8):Vu(8),dp=Nu.length,Ku=0;Ku<hu;++Ku)Nu[Ul[Ku]]=wu=Tu(Xl,du),Yu<wu&&(Yu=wu),zu[wu]++,du+=3;var vp=0;for(zu[0]=0,Ku=1;Ku<=Yu;++Ku)rp[Ku]=vp=vp+zu[Ku-1]<<1;for(Ku=0;Ku<dp;++Ku)(vp=Nu[Ku])!=0&&(tp[Ku]=rp[vp]++);var fp=0;for(Ku=0;Ku<dp;++Ku)if(fp=Nu[Ku],fp!=0){vp=fu[tp[Ku]]>>8-fp;for(var Op=(1<<7-fp)-1;Op>=0;--Op)Hp[vp|Op<<fp]=fp&7|Ku<<3}var Kp=[];for(Yu=1;Kp.length<su+cu;)switch(vp=Hp[tu(Xl,du)],du+=vp&7,vp>>>=3){case 16:for(wu=3+Cu(Xl,du),du+=2,vp=Kp[Kp.length-1];wu-- >0;)Kp.push(vp);break;case 17:for(wu=3+Tu(Xl,du),du+=3;wu-- >0;)Kp.push(0);break;case 18:for(wu=11+tu(Xl,du),du+=7;wu-- >0;)Kp.push(0);break;default:Kp.push(vp),Yu<vp&&(Yu=vp);break}var s0=Kp.slice(0,su),r0=Kp.slice(su);for(Ku=su;Ku<286;++Ku)s0[Ku]=0;for(Ku=cu;Ku<30;++Ku)r0[Ku]=0;return qp=Mu(s0,Tp,286),lp=Mu(r0,Ip,30),du}function Zu(Xl,du){if(Xl[0]==3&&!(Xl[1]&3))return[new_raw_buf(du),2];for(var su=0,cu=0,hu=new_unsafe_buf(du||1<<18),wu=0,Nu=hu.length>>>0,tp=0,Yu=0;!(cu&1);){if(cu=Tu(Xl,su),su+=3,cu>>>1)cu>>1==1?(tp=9,Yu=5):(su=$u(Xl,su),tp=qp,Yu=lp);else{su&7&&(su+=8-(su&7));var zu=Xl[su>>>3]|Xl[(su>>>3)+1]<<8;if(su+=32,zu>0)for(!du&&Nu<wu+zu&&(hu=Ju(hu,wu+zu),Nu=hu.length);zu-- >0;)hu[wu++]=Xl[su>>>3],su+=8;continue}for(;;){!du&&Nu<wu+32767&&(hu=Ju(hu,wu+32767),Nu=hu.length);var rp=eu(Xl,su,tp),dp=cu>>>1==1?hp[rp]:Tp[rp];if(su+=dp&15,dp>>>=4,!(dp>>>8&255))hu[wu++]=dp;else{if(dp==256)break;dp-=257;var Ku=dp<8?0:dp-4>>2;Ku>5&&(Ku=0);var vp=wu+Vl[dp];Ku>0&&(vp+=eu(Xl,su,Ku),su+=Ku),rp=eu(Xl,su,Yu),dp=cu>>>1==1?mp[rp]:Ip[rp],su+=dp&15,dp>>>=4;var fp=dp<4?0:dp-2>>1,Op=Ql[dp];for(fp>0&&(Op+=eu(Xl,su,fp),su+=fp),!du&&Nu<vp&&(hu=Ju(hu,vp+100),Nu=hu.length);wu<vp;)hu[wu]=hu[wu-Op],++wu}}}return du?[hu,su+7>>>3]:[hu.slice(0,wu),su+7>>>3]}function Ap(Xl,du){var su=Xl.slice(Xl.l||0),cu=Zu(su,du);return Xl.l+=cu[1],cu[0]}function Np(Xl,du){if(Xl)typeof console<"u"&&console.error(du);else throw new Error(du)}function Vp(Xl,du){var su=Xl;prep_blob(su,0);var cu=[],hu=[],wu={FileIndex:cu,FullPaths:hu};Al(wu,{root:du.root});for(var Nu=su.length-4;(su[Nu]!=80||su[Nu+1]!=75||su[Nu+2]!=5||su[Nu+3]!=6)&&Nu>=0;)--Nu;su.l=Nu+4,su.l+=4;var tp=su.read_shift(2);su.l+=6;var Yu=su.read_shift(4);for(su.l=Yu,Nu=0;Nu<tp;++Nu){su.l+=20;var zu=su.read_shift(4),rp=su.read_shift(4),dp=su.read_shift(2),Ku=su.read_shift(2),vp=su.read_shift(2);su.l+=8;var fp=su.read_shift(4),Op=ga(su.slice(su.l+dp,su.l+dp+Ku));su.l+=dp+Ku+vp;var Kp=su.l;su.l=fp+4,Ru(su,zu,rp,wu,Op),su.l=Kp}return wu}function Ru(Xl,du,su,cu,hu){Xl.l+=2;var wu=Xl.read_shift(2),Nu=Xl.read_shift(2),tp=uo(Xl);if(wu&8257)throw new Error("Unsupported ZIP encryption");for(var Yu=Xl.read_shift(4),zu=Xl.read_shift(4),rp=Xl.read_shift(4),dp=Xl.read_shift(2),Ku=Xl.read_shift(2),vp="",fp=0;fp<dp;++fp)vp+=String.fromCharCode(Xl[Xl.l++]);if(Ku){var Op=ga(Xl.slice(Xl.l,Xl.l+Ku));(Op[21589]||{}).mt&&(tp=Op[21589].mt),((hu||{})[21589]||{}).mt&&(tp=hu[21589].mt)}Xl.l+=Ku;var Kp=Xl.slice(Xl.l,Xl.l+zu);switch(Nu){case 8:Kp=Nl(Xl,rp);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Nu)}var s0=!1;wu&8&&(Yu=Xl.read_shift(4),Yu==134695760&&(Yu=Xl.read_shift(4),s0=!0),zu=Xl.read_shift(4),rp=Xl.read_shift(4)),zu!=du&&Np(s0,"Bad compressed size: "+du+" != "+zu),rp!=su&&Np(s0,"Bad uncompressed size: "+su+" != "+rp),Au(cu,vp,Kp,{unsafe:!0,mt:tp})}function Qu(Xl,du){var su=du||{},cu=[],hu=[],wu=new_buf(1),Nu=su.compression?8:0,tp=0,Yu=0,zu=0,rp=0,dp=0,Ku=Xl.FullPaths[0],vp=Ku,fp=Xl.FileIndex[0],Op=[],Kp=0;for(Yu=1;Yu<Xl.FullPaths.length;++Yu)if(vp=Xl.FullPaths[Yu].slice(Ku.length),fp=Xl.FileIndex[Yu],!(!fp.size||!fp.content||vp=="Sh33tJ5")){var s0=rp,r0=new_buf(vp.length);for(zu=0;zu<vp.length;++zu)r0.write_shift(1,vp.charCodeAt(zu)&127);r0=r0.slice(0,r0.l),Op[dp]=CRC32.buf(fp.content,0);var u0=fp.content;Nu==8&&(u0=Ml(u0)),wu=new_buf(30),wu.write_shift(4,67324752),wu.write_shift(2,20),wu.write_shift(2,tp),wu.write_shift(2,Nu),fp.mt?co(wu,fp.mt):wu.write_shift(4,0),wu.write_shift(-4,Op[dp]),wu.write_shift(4,u0.length),wu.write_shift(4,fp.content.length),wu.write_shift(2,r0.length),wu.write_shift(2,0),rp+=wu.length,cu.push(wu),rp+=r0.length,cu.push(r0),rp+=u0.length,cu.push(u0),wu=new_buf(46),wu.write_shift(4,33639248),wu.write_shift(2,0),wu.write_shift(2,20),wu.write_shift(2,tp),wu.write_shift(2,Nu),wu.write_shift(4,0),wu.write_shift(-4,Op[dp]),wu.write_shift(4,u0.length),wu.write_shift(4,fp.content.length),wu.write_shift(2,r0.length),wu.write_shift(2,0),wu.write_shift(2,0),wu.write_shift(2,0),wu.write_shift(2,0),wu.write_shift(4,0),wu.write_shift(4,s0),Kp+=wu.l,hu.push(wu),Kp+=r0.length,hu.push(r0),++dp}return wu=new_buf(22),wu.write_shift(4,101010256),wu.write_shift(2,0),wu.write_shift(2,0),wu.write_shift(2,dp),wu.write_shift(2,dp),wu.write_shift(4,Kp),wu.write_shift(4,rp),wu.write_shift(2,0),bconcat([bconcat(cu),bconcat(hu),wu])}var up={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ep(Xl,du){if(Xl.ctype)return Xl.ctype;var su=Xl.name||"",cu=su.match(/\.([^\.]+)$/);return cu&&up[cu[1]]||du&&(cu=(su=du).match(/[\.\\]([^\.\\])+$/),cu&&up[cu[1]])?up[cu[1]]:"application/octet-stream"}function Cp(Xl){for(var du=Base64_encode(Xl),su=[],cu=0;cu<du.length;cu+=76)su.push(du.slice(cu,cu+76));return su.join(`\r
`)+`\r
`}function Sp(Xl){var du=Xl.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(zu){var rp=zu.charCodeAt(0).toString(16).toUpperCase();return"="+(rp.length==1?"0"+rp:rp)});du=du.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),du.charAt(0)==`
`&&(du="=0D"+du.slice(1)),du=du.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var su=[],cu=du.split(`\r
`),hu=0;hu<cu.length;++hu){var wu=cu[hu];if(wu.length==0){su.push("");continue}for(var Nu=0;Nu<wu.length;){var tp=76,Yu=wu.slice(Nu,Nu+tp);Yu.charAt(tp-1)=="="?tp--:Yu.charAt(tp-2)=="="?tp-=2:Yu.charAt(tp-3)=="="&&(tp-=3),Yu=wu.slice(Nu,Nu+tp),Nu+=tp,Nu<wu.length&&(Yu+="="),su.push(Yu)}}return su.join(`\r
`)}function vu(Xl){for(var du=[],su=0;su<Xl.length;++su){for(var cu=Xl[su];su<=Xl.length&&cu.charAt(cu.length-1)=="=";)cu=cu.slice(0,cu.length-1)+Xl[++su];du.push(cu)}for(var hu=0;hu<du.length;++hu)du[hu]=du[hu].replace(/[=][0-9A-Fa-f]{2}/g,function(wu){return String.fromCharCode(parseInt(wu.slice(1),16))});return s2a(du.join(`\r
`))}function Zl(Xl,du,su){for(var cu="",hu="",wu="",Nu,tp=0;tp<10;++tp){var Yu=du[tp];if(!Yu||Yu.match(/^\s*$/))break;var zu=Yu.match(/^(.*?):\s*([^\s].*)$/);if(zu)switch(zu[1].toLowerCase()){case"content-location":cu=zu[2].trim();break;case"content-type":wu=zu[2].trim();break;case"content-transfer-encoding":hu=zu[2].trim();break}}switch(++tp,hu.toLowerCase()){case"base64":Nu=s2a(Base64_decode(du.slice(tp).join("")));break;case"quoted-printable":Nu=vu(du.slice(tp));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+hu)}var rp=Au(Xl,cu.slice(su.length),Nu,{unsafe:!0});wu&&(rp.ctype=wu)}function Ou(Xl,du){if(Kl(Xl.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var su=du&&du.root||"",cu=(has_buf&&Buffer.isBuffer(Xl)?Xl.toString("binary"):Kl(Xl)).split(`\r
`),hu=0,wu="";for(hu=0;hu<cu.length;++hu)if(wu=cu[hu],!!/^Content-Location:/i.test(wu)&&(wu=wu.slice(wu.indexOf("file")),su||(su=wu.slice(0,wu.lastIndexOf("/")+1)),wu.slice(0,su.length)!=su))for(;su.length>0&&(su=su.slice(0,su.length-1),su=su.slice(0,su.lastIndexOf("/")+1),wu.slice(0,su.length)!=su););var Nu=(cu[1]||"").match(/boundary="(.*?)"/);if(!Nu)throw new Error("MAD cannot find boundary");var tp="--"+(Nu[1]||""),Yu=[],zu=[],rp={FileIndex:Yu,FullPaths:zu};Al(rp);var dp,Ku=0;for(hu=0;hu<cu.length;++hu){var vp=cu[hu];vp!==tp&&vp!==tp+"--"||(Ku++&&Zl(rp,cu.slice(dp,hu),su),dp=hu)}return rp}function Du(Xl,du){var su=du||{},cu=su.boundary||"SheetJS";cu="------="+cu;for(var hu=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+cu.slice(2)+'"',"","",""],wu=Xl.FullPaths[0],Nu=wu,tp=Xl.FileIndex[0],Yu=1;Yu<Xl.FullPaths.length;++Yu)if(Nu=Xl.FullPaths[Yu].slice(wu.length),tp=Xl.FileIndex[Yu],!(!tp.size||!tp.content||Nu=="Sh33tJ5")){Nu=Nu.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Kp){return"_x"+Kp.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Kp){return"_u"+Kp.charCodeAt(0).toString(16)+"_"});for(var zu=tp.content,rp=has_buf&&Buffer.isBuffer(zu)?zu.toString("binary"):Kl(zu),dp=0,Ku=Math.min(1024,rp.length),vp=0,fp=0;fp<=Ku;++fp)(vp=rp.charCodeAt(fp))>=32&&vp<128&&++dp;var Op=dp>=Ku*4/5;hu.push(cu),hu.push("Content-Location: "+(su.root||"file:///C:/SheetJS/")+Nu),hu.push("Content-Transfer-Encoding: "+(Op?"quoted-printable":"base64")),hu.push("Content-Type: "+Ep(tp,Nu)),hu.push(""),hu.push(Op?Sp(rp):Cp(rp))}return hu.push(cu+`--\r
`),hu.join(`\r
`)}function $l(Xl){var du={};return Al(du,Xl),du}function Au(Xl,du,su,cu){var hu=cu&&cu.unsafe;hu||Al(Xl);var wu=!hu&&CFB.find(Xl,du);if(!wu){var Nu=Xl.FullPaths[0];du.slice(0,Nu.length)==Nu?Nu=du:(Nu.slice(-1)!="/"&&(Nu+="/"),Nu=(Nu+du).replace("//","/")),wu={name:lo(du),type:2},Xl.FileIndex.push(wu),Xl.FullPaths.push(Nu),hu||CFB.utils.cfb_gc(Xl)}return wu.content=su,wu.size=su?su.length:0,cu&&(cu.CLSID&&(wu.clsid=cu.CLSID),cu.mt&&(wu.mt=cu.mt),cu.ct&&(wu.ct=cu.ct)),wu}function Eu(Xl,du){Al(Xl);var su=CFB.find(Xl,du);if(su){for(var cu=0;cu<Xl.FileIndex.length;++cu)if(Xl.FileIndex[cu]==su)return Xl.FileIndex.splice(cu,1),Xl.FullPaths.splice(cu,1),!0}return!1}function _f(Xl,du,su){Al(Xl);var cu=CFB.find(Xl,du);if(cu){for(var hu=0;hu<Xl.FileIndex.length;++hu)if(Xl.FileIndex[hu]==cu)return Xl.FileIndex[hu].name=lo(su),Xl.FullPaths[hu]=su,!0}return!1}function qu(Xl){Il(Xl,!0)}return is.find=Ol,is.read=Pl,is.parse=_a,is.write=xu,is.writeFile=lu,is.utils={cfb_new:$l,cfb_add:Au,cfb_del:Eu,cfb_mov:_f,cfb_gc:qu,ReadShift,CheckField,prep_blob,bconcat,use_zlib:Ll,_deflateRaw:Bp,_inflateRaw:Ap,consts:uu},is}();function blobify(cs){return typeof cs=="string"?s2ab(cs):Array.isArray(cs)?a2u(cs):cs}function write_dl(cs,is,us){if(typeof Deno<"u"){if(us&&typeof is=="string")switch(us){case"utf8":is=new TextEncoder(us).encode(is);break;case"binary":is=s2ab(is);break;default:throw new Error("Unsupported encoding "+us)}return Deno.writeFileSync(cs,is)}var hs=us=="utf8"?utf8write(is):is;if(typeof IE_SaveFile<"u")return IE_SaveFile(hs,cs);if(typeof Blob<"u"){var lo=new Blob([blobify(hs)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(lo,cs);if(typeof saveAs<"u")return saveAs(lo,cs);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var co=URL.createObjectURL(lo);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(co)},6e4),chrome.downloads.download({url:co,filename:cs,saveAs:!0});var uo=document.createElement("a");if(uo.download!=null)return uo.download=cs,uo.href=co,document.body.appendChild(uo),uo.click(),document.body.removeChild(uo),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(co)},6e4),co}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var ga=File(cs);return ga.open("w"),ga.encoding="binary",Array.isArray(is)&&(is=a2s(is)),ga.write(is),ga.close(),is}catch(ba){if(!ba.message||!ba.message.match(/onstruct/))throw ba}throw new Error("cannot save file "+cs)}function keys(cs){for(var is=Object.keys(cs),us=[],hs=0;hs<is.length;++hs)Object.prototype.hasOwnProperty.call(cs,is[hs])&&us.push(is[hs]);return us}function evert_key(cs,is){for(var us=[],hs=keys(cs),lo=0;lo!==hs.length;++lo)us[cs[hs[lo]][is]]==null&&(us[cs[hs[lo]][is]]=hs[lo]);return us}function evert(cs){for(var is=[],us=keys(cs),hs=0;hs!==us.length;++hs)is[cs[us[hs]]]=us[hs];return is}function evert_num(cs){for(var is=[],us=keys(cs),hs=0;hs!==us.length;++hs)is[cs[us[hs]]]=parseInt(us[hs],10);return is}function evert_arr(cs){for(var is=[],us=keys(cs),hs=0;hs!==us.length;++hs)is[cs[us[hs]]]==null&&(is[cs[us[hs]]]=[]),is[cs[us[hs]]].push(us[hs]);return is}var basedate=new Date(1899,11,30,0,0,0);function datenum(cs,is){var us=cs.getTime(),hs=basedate.getTime()+(cs.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4;return(us-hs)/(24*60*60*1e3)}var refdate=new Date,dnthresh=basedate.getTime()+(refdate.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4,refoffset=refdate.getTimezoneOffset();function numdate(cs){var is=new Date;return is.setTime(cs*24*60*60*1e3+dnthresh),is.getTimezoneOffset()!==refoffset&&is.setTime(is.getTime()+(is.getTimezoneOffset()-refoffset)*6e4),is}var good_pd_date_1=new Date("2017-02-19T19:06:09.000Z"),good_pd_date=isNaN(good_pd_date_1.getFullYear())?new Date("2/19/17"):good_pd_date_1,good_pd=good_pd_date.getFullYear()==2017;function parseDate(cs,is){var us=new Date(cs);if(good_pd)return is>0?us.setTime(us.getTime()+us.getTimezoneOffset()*60*1e3):is<0&&us.setTime(us.getTime()-us.getTimezoneOffset()*60*1e3),us;if(cs instanceof Date)return cs;if(good_pd_date.getFullYear()==1917&&!isNaN(us.getFullYear())){var hs=us.getFullYear();return cs.indexOf(""+hs)>-1||us.setFullYear(us.getFullYear()+100),us}var lo=cs.match(/\d+/g)||["2017","2","19","0","0","0"],co=new Date(+lo[0],+lo[1]-1,+lo[2],+lo[3]||0,+lo[4]||0,+lo[5]||0);return cs.indexOf("Z")>-1&&(co=new Date(co.getTime()-co.getTimezoneOffset()*60*1e3)),co}function cc2str(cs,is){if(has_buf&&Buffer.isBuffer(cs))return cs.toString("binary");if(typeof TextDecoder<"u")try{var us={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(cs)&&(cs=new Uint8Array(cs)),new TextDecoder("latin1").decode(cs).replace(/[]/g,function(co){return us[co]||co})}catch{}for(var hs=[],lo=0;lo!=cs.length;++lo)hs.push(String.fromCharCode(cs[lo]));return hs.join("")}function dup(cs){if(typeof JSON<"u"&&!Array.isArray(cs))return JSON.parse(JSON.stringify(cs));if(typeof cs!="object"||cs==null)return cs;if(cs instanceof Date)return new Date(cs.getTime());var is={};for(var us in cs)Object.prototype.hasOwnProperty.call(cs,us)&&(is[us]=dup(cs[us]));return is}function fill(cs,is){for(var us="";us.length<is;)us+=cs;return us}function fuzzynum(cs){var is=Number(cs);if(!isNaN(is))return isFinite(is)?is:NaN;if(!/\d/.test(cs))return is;var us=1,hs=cs.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return us*=100,""});return!isNaN(is=Number(hs))||(hs=hs.replace(/[(](.*)[)]/,function(lo,co){return us=-us,co}),!isNaN(is=Number(hs)))?is/us:is}var lower_months=["january","february","march","april","may","june","july","august","september","october","november","december"];function fuzzydate(cs){var is=new Date(cs),us=new Date(NaN),hs=is.getYear(),lo=is.getMonth(),co=is.getDate();if(isNaN(co))return us;var uo=cs.toLowerCase();if(uo.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(uo=uo.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),uo.length>3&&lower_months.indexOf(uo)==-1)return us}else if(uo.match(/[a-z]/))return us;return hs<0||hs>8099?us:(lo>0||co>1)&&hs!=101?is:cs.match(/[^-0-9:,\/\\]/)?us:is}function zip_add_file(cs,is,us){if(cs.FullPaths){if(typeof us=="string"){var hs;return has_buf?hs=Buffer_from(us):hs=utf8decode(us),CFB.utils.cfb_add(cs,is,hs)}CFB.utils.cfb_add(cs,is,us)}else cs.file(is,us)}function zip_new(){return CFB.utils.cfb_new()}var XML_HEADER=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,encodings={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},rencoding=evert(encodings),decregex=/[&<>'"]/g,charegex=/[\u0000-\u0008\u000b-\u001f]/g;function escapexml(cs){var is=cs+"";return is.replace(decregex,function(us){return rencoding[us]}).replace(charegex,function(us){return"_x"+("000"+us.charCodeAt(0).toString(16)).slice(-4)+"_"})}function escapexmltag(cs){return escapexml(cs).replace(/ /g,"_x0020_")}var htmlcharegex=/[\u0000-\u001f]/g;function escapehtml(cs){var is=cs+"";return is.replace(decregex,function(us){return rencoding[us]}).replace(/\n/g,"<br/>").replace(htmlcharegex,function(us){return"&#x"+("000"+us.charCodeAt(0).toString(16)).slice(-4)+";"})}function escapexlml(cs){var is=cs+"";return is.replace(decregex,function(us){return rencoding[us]}).replace(htmlcharegex,function(us){return"&#x"+us.charCodeAt(0).toString(16).toUpperCase()+";"})}function xlml_unfixstr(cs){return cs.replace(/(\r\n|[\r\n])/g,"&#10;")}function parsexmlbool(cs){switch(cs){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function utf8reada(cs){for(var is="",us=0,hs=0,lo=0,co=0,uo=0,ga=0;us<cs.length;){if(hs=cs.charCodeAt(us++),hs<128){is+=String.fromCharCode(hs);continue}if(lo=cs.charCodeAt(us++),hs>191&&hs<224){uo=(hs&31)<<6,uo|=lo&63,is+=String.fromCharCode(uo);continue}if(co=cs.charCodeAt(us++),hs<240){is+=String.fromCharCode((hs&15)<<12|(lo&63)<<6|co&63);continue}uo=cs.charCodeAt(us++),ga=((hs&7)<<18|(lo&63)<<12|(co&63)<<6|uo&63)-65536,is+=String.fromCharCode(55296+(ga>>>10&1023)),is+=String.fromCharCode(56320+(ga&1023))}return is}function utf8readb(cs){var is=new_raw_buf(2*cs.length),us,hs,lo=1,co=0,uo=0,ga;for(hs=0;hs<cs.length;hs+=lo)lo=1,(ga=cs.charCodeAt(hs))<128?us=ga:ga<224?(us=(ga&31)*64+(cs.charCodeAt(hs+1)&63),lo=2):ga<240?(us=(ga&15)*4096+(cs.charCodeAt(hs+1)&63)*64+(cs.charCodeAt(hs+2)&63),lo=3):(lo=4,us=(ga&7)*262144+(cs.charCodeAt(hs+1)&63)*4096+(cs.charCodeAt(hs+2)&63)*64+(cs.charCodeAt(hs+3)&63),us-=65536,uo=55296+(us>>>10&1023),us=56320+(us&1023)),uo!==0&&(is[co++]=uo&255,is[co++]=uo>>>8,uo=0),is[co++]=us%256,is[co++]=us>>>8;return is.slice(0,co).toString("ucs2")}function utf8readc(cs){return Buffer_from(cs,"binary").toString("utf8")}var utf8corpus="foo bar baz",utf8read=has_buf&&(utf8readc(utf8corpus)==utf8reada(utf8corpus)&&utf8readc||utf8readb(utf8corpus)==utf8reada(utf8corpus)&&utf8readb)||utf8reada,utf8write=has_buf?function(cs){return Buffer_from(cs,"utf8").toString("binary")}:function(cs){for(var is=[],us=0,hs=0,lo=0;us<cs.length;)switch(hs=cs.charCodeAt(us++),!0){case hs<128:is.push(String.fromCharCode(hs));break;case hs<2048:is.push(String.fromCharCode(192+(hs>>6))),is.push(String.fromCharCode(128+(hs&63)));break;case(hs>=55296&&hs<57344):hs-=55296,lo=cs.charCodeAt(us++)-56320+(hs<<10),is.push(String.fromCharCode(240+(lo>>18&7))),is.push(String.fromCharCode(144+(lo>>12&63))),is.push(String.fromCharCode(128+(lo>>6&63))),is.push(String.fromCharCode(128+(lo&63)));break;default:is.push(String.fromCharCode(224+(hs>>12))),is.push(String.fromCharCode(128+(hs>>6&63))),is.push(String.fromCharCode(128+(hs&63)))}return is.join("")},htmldecode=function(){var cs=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(is){return[new RegExp("&"+is[0]+";","ig"),is[1]]});return function(us){for(var hs=us.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),lo=0;lo<cs.length;++lo)hs=hs.replace(cs[lo][0],cs[lo][1]);return hs}}(),wtregex=/(^\s|\s$|\n)/;function writetag(cs,is){return"<"+cs+(is.match(wtregex)?' xml:space="preserve"':"")+">"+is+"</"+cs+">"}function wxt_helper(cs){return keys(cs).map(function(is){return" "+is+'="'+cs[is]+'"'}).join("")}function writextag(cs,is,us){return"<"+cs+(us!=null?wxt_helper(us):"")+(is!=null?(is.match(wtregex)?' xml:space="preserve"':"")+">"+is+"</"+cs:"/")+">"}function write_w3cdtf(cs,is){try{return cs.toISOString().replace(/\.\d*/,"")}catch(us){if(is)throw us}return""}function write_vt(cs,is){switch(typeof cs){case"string":var us=writextag("vt:lpwstr",escapexml(cs));return us=us.replace(/&quot;/g,"_x0022_"),us;case"number":return writextag((cs|0)==cs?"vt:i4":"vt:r8",escapexml(String(cs)));case"boolean":return writextag("vt:bool",cs?"true":"false")}if(cs instanceof Date)return writextag("vt:filetime",write_w3cdtf(cs));throw new Error("Unable to serialize "+cs)}var XMLNS={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},XMLNS_main=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],XLMLNS={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function read_double_le(cs,is){for(var us=1-2*(cs[is+7]>>>7),hs=((cs[is+7]&127)<<4)+(cs[is+6]>>>4&15),lo=cs[is+6]&15,co=5;co>=0;--co)lo=lo*256+cs[is+co];return hs==2047?lo==0?us*(1/0):NaN:(hs==0?hs=-1022:(hs-=1023,lo+=Math.pow(2,52)),us*Math.pow(2,hs-52)*lo)}function write_double_le(cs,is,us){var hs=(is<0||1/is==-1/0?1:0)<<7,lo=0,co=0,uo=hs?-is:is;isFinite(uo)?uo==0?lo=co=0:(lo=Math.floor(Math.log(uo)/Math.LN2),co=uo*Math.pow(2,52-lo),lo<=-1023&&(!isFinite(co)||co<Math.pow(2,52))?lo=-1022:(co-=Math.pow(2,52),lo+=1023)):(lo=2047,co=isNaN(is)?26985:0);for(var ga=0;ga<=5;++ga,co/=256)cs[us+ga]=co&255;cs[us+6]=(lo&15)<<4|co&15,cs[us+7]=lo>>4|hs}var ___toBuffer=function(cs){for(var is=[],us=10240,hs=0;hs<cs[0].length;++hs)if(cs[0][hs])for(var lo=0,co=cs[0][hs].length;lo<co;lo+=us)is.push.apply(is,cs[0][hs].slice(lo,lo+us));return is},__toBuffer=has_buf?function(cs){return cs[0].length>0&&Buffer.isBuffer(cs[0][0])?Buffer.concat(cs[0].map(function(is){return Buffer.isBuffer(is)?is:Buffer_from(is)})):___toBuffer(cs)}:___toBuffer,___utf16le=function(cs,is,us){for(var hs=[],lo=is;lo<us;lo+=2)hs.push(String.fromCharCode(__readUInt16LE(cs,lo)));return hs.join("").replace(chr0,"")},__utf16le=has_buf?function(cs,is,us){return Buffer.isBuffer(cs)?cs.toString("utf16le",is,us).replace(chr0,""):___utf16le(cs,is,us)}:___utf16le,___hexlify=function(cs,is,us){for(var hs=[],lo=is;lo<is+us;++lo)hs.push(("0"+cs[lo].toString(16)).slice(-2));return hs.join("")},__hexlify=has_buf?function(cs,is,us){return Buffer.isBuffer(cs)?cs.toString("hex",is,is+us):___hexlify(cs,is,us)}:___hexlify,___utf8=function(cs,is,us){for(var hs=[],lo=is;lo<us;lo++)hs.push(String.fromCharCode(__readUInt8(cs,lo)));return hs.join("")},__utf8=has_buf?function cs(is,us,hs){return Buffer.isBuffer(is)?is.toString("utf8",us,hs):___utf8(is,us,hs)}:___utf8,___lpstr=function(cs,is){var us=__readUInt32LE(cs,is);return us>0?__utf8(cs,is+4,is+4+us-1):""},__lpstr=___lpstr,___cpstr=function(cs,is){var us=__readUInt32LE(cs,is);return us>0?__utf8(cs,is+4,is+4+us-1):""},__cpstr=___cpstr,___lpwstr=function(cs,is){var us=2*__readUInt32LE(cs,is);return us>0?__utf8(cs,is+4,is+4+us-1):""},__lpwstr=___lpwstr,___lpp4=function cs(is,us){var hs=__readUInt32LE(is,us);return hs>0?__utf16le(is,us+4,us+4+hs):""},__lpp4=___lpp4,___8lpp4=function(cs,is){var us=__readUInt32LE(cs,is);return us>0?__utf8(cs,is+4,is+4+us):""},__8lpp4=___8lpp4,___double=function(cs,is){return read_double_le(cs,is)},__double=___double,is_buf=function cs(is){return Array.isArray(is)||typeof Uint8Array<"u"&&is instanceof Uint8Array};has_buf&&(__lpstr=function(is,us){if(!Buffer.isBuffer(is))return ___lpstr(is,us);var hs=is.readUInt32LE(us);return hs>0?is.toString("utf8",us+4,us+4+hs-1):""},__cpstr=function(is,us){if(!Buffer.isBuffer(is))return ___cpstr(is,us);var hs=is.readUInt32LE(us);return hs>0?is.toString("utf8",us+4,us+4+hs-1):""},__lpwstr=function(is,us){if(!Buffer.isBuffer(is))return ___lpwstr(is,us);var hs=2*is.readUInt32LE(us);return is.toString("utf16le",us+4,us+4+hs-1)},__lpp4=function(is,us){if(!Buffer.isBuffer(is))return ___lpp4(is,us);var hs=is.readUInt32LE(us);return is.toString("utf16le",us+4,us+4+hs)},__8lpp4=function(is,us){if(!Buffer.isBuffer(is))return ___8lpp4(is,us);var hs=is.readUInt32LE(us);return is.toString("utf8",us+4,us+4+hs)},__double=function(is,us){return Buffer.isBuffer(is)?is.readDoubleLE(us):___double(is,us)},is_buf=function(is){return Buffer.isBuffer(is)||Array.isArray(is)||typeof Uint8Array<"u"&&is instanceof Uint8Array});var __readUInt8=function(cs,is){return cs[is]},__readUInt16LE=function(cs,is){return cs[is+1]*256+cs[is]},__readInt16LE=function(cs,is){var us=cs[is+1]*256+cs[is];return us<32768?us:(65535-us+1)*-1},__readUInt32LE=function(cs,is){return cs[is+3]*(1<<24)+(cs[is+2]<<16)+(cs[is+1]<<8)+cs[is]},__readInt32LE=function(cs,is){return cs[is+3]<<24|cs[is+2]<<16|cs[is+1]<<8|cs[is]},__readInt32BE=function(cs,is){return cs[is]<<24|cs[is+1]<<16|cs[is+2]<<8|cs[is+3]};function ReadShift(cs,is){var us="",hs,lo,co=[],uo,ga,ba,xa;switch(is){case"dbcs":if(xa=this.l,has_buf&&Buffer.isBuffer(this))us=this.slice(this.l,this.l+2*cs).toString("utf16le");else for(ba=0;ba<cs;++ba)us+=String.fromCharCode(__readUInt16LE(this,xa)),xa+=2;cs*=2;break;case"utf8":us=__utf8(this,this.l,this.l+cs);break;case"utf16le":cs*=2,us=__utf16le(this,this.l,this.l+cs);break;case"wstr":return ReadShift.call(this,cs,"dbcs");case"lpstr-ansi":us=__lpstr(this,this.l),cs=4+__readUInt32LE(this,this.l);break;case"lpstr-cp":us=__cpstr(this,this.l),cs=4+__readUInt32LE(this,this.l);break;case"lpwstr":us=__lpwstr(this,this.l),cs=4+2*__readUInt32LE(this,this.l);break;case"lpp4":cs=4+__readUInt32LE(this,this.l),us=__lpp4(this,this.l),cs&2&&(cs+=2);break;case"8lpp4":cs=4+__readUInt32LE(this,this.l),us=__8lpp4(this,this.l),cs&3&&(cs+=4-(cs&3));break;case"cstr":for(cs=0,us="";(uo=__readUInt8(this,this.l+cs++))!==0;)co.push(_getchar(uo));us=co.join("");break;case"_wstr":for(cs=0,us="";(uo=__readUInt16LE(this,this.l+cs))!==0;)co.push(_getchar(uo)),cs+=2;cs+=2,us=co.join("");break;case"dbcs-cont":for(us="",xa=this.l,ba=0;ba<cs;++ba){if(this.lens&&this.lens.indexOf(xa)!==-1)return uo=__readUInt8(this,xa),this.l=xa+1,ga=ReadShift.call(this,cs-ba,uo?"dbcs-cont":"sbcs-cont"),co.join("")+ga;co.push(_getchar(__readUInt16LE(this,xa))),xa+=2}us=co.join(""),cs*=2;break;case"cpstr":case"sbcs-cont":for(us="",xa=this.l,ba=0;ba!=cs;++ba){if(this.lens&&this.lens.indexOf(xa)!==-1)return uo=__readUInt8(this,xa),this.l=xa+1,ga=ReadShift.call(this,cs-ba,uo?"dbcs-cont":"sbcs-cont"),co.join("")+ga;co.push(_getchar(__readUInt8(this,xa))),xa+=1}us=co.join("");break;default:switch(cs){case 1:return hs=__readUInt8(this,this.l),this.l++,hs;case 2:return hs=(is==="i"?__readInt16LE:__readUInt16LE)(this,this.l),this.l+=2,hs;case 4:case-4:return is==="i"||!(this[this.l+3]&128)?(hs=(cs>0?__readInt32LE:__readInt32BE)(this,this.l),this.l+=4,hs):(lo=__readUInt32LE(this,this.l),this.l+=4,lo);case 8:case-8:if(is==="f")return cs==8?lo=__double(this,this.l):lo=__double([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,lo;cs=8;case 16:us=__hexlify(this,this.l,cs);break}}return this.l+=cs,us}var __writeUInt32LE=function(cs,is,us){cs[us]=is&255,cs[us+1]=is>>>8&255,cs[us+2]=is>>>16&255,cs[us+3]=is>>>24&255},__writeInt32LE=function(cs,is,us){cs[us]=is&255,cs[us+1]=is>>8&255,cs[us+2]=is>>16&255,cs[us+3]=is>>24&255},__writeUInt16LE=function(cs,is,us){cs[us]=is&255,cs[us+1]=is>>>8&255};function WriteShift(cs,is,us){var hs=0,lo=0;if(us==="dbcs"){for(lo=0;lo!=is.length;++lo)__writeUInt16LE(this,is.charCodeAt(lo),this.l+2*lo);hs=2*is.length}else if(us==="sbcs"){for(is=is.replace(/[^\x00-\x7F]/g,"_"),lo=0;lo!=is.length;++lo)this[this.l+lo]=is.charCodeAt(lo)&255;hs=is.length}else if(us==="hex"){for(;lo<cs;++lo)this[this.l++]=parseInt(is.slice(2*lo,2*lo+2),16)||0;return this}else if(us==="utf16le"){var co=Math.min(this.l+cs,this.length);for(lo=0;lo<Math.min(is.length,cs);++lo){var uo=is.charCodeAt(lo);this[this.l++]=uo&255,this[this.l++]=uo>>8}for(;this.l<co;)this[this.l++]=0;return this}else switch(cs){case 1:hs=1,this[this.l]=is&255;break;case 2:hs=2,this[this.l]=is&255,is>>>=8,this[this.l+1]=is&255;break;case 3:hs=3,this[this.l]=is&255,is>>>=8,this[this.l+1]=is&255,is>>>=8,this[this.l+2]=is&255;break;case 4:hs=4,__writeUInt32LE(this,is,this.l);break;case 8:if(hs=8,us==="f"){write_double_le(this,is,this.l);break}case 16:break;case-4:hs=4,__writeInt32LE(this,is,this.l);break}return this.l+=hs,this}function CheckField(cs,is){var us=__hexlify(this,this.l,cs.length>>1);if(us!==cs)throw new Error(is+"Expected "+cs+" saw "+us);this.l+=cs.length>>1}function prep_blob(cs,is){cs.l=is,cs.read_shift=ReadShift,cs.chk=CheckField,cs.write_shift=WriteShift}function parsenoop(cs,is){cs.l+=is}function new_buf(cs){var is=new_raw_buf(cs);return prep_blob(is,0),is}function buf_array(){var cs=[],is=has_buf?256:2048,us=function(xa){var _a=new_buf(xa);return prep_blob(_a,0),_a},hs=us(is),lo=function(){hs&&(hs.length>hs.l&&(hs=hs.slice(0,hs.l),hs.l=hs.length),hs.length>0&&cs.push(hs),hs=null)},co=function(xa){return hs&&xa<hs.length-hs.l?hs:(lo(),hs=us(Math.max(xa+1,is)))},uo=function(){return lo(),bconcat(cs)},ga=function(xa){lo(),hs=xa,hs.l==null&&(hs.l=hs.length),co(is)};return{next:co,push:ga,end:uo,_bufs:cs}}function write_record(cs,is,us,hs){var lo=+is,co;if(!isNaN(lo)){hs||(hs=XLSBRecordEnum[lo].p||(us||[]).length||0),co=1+(lo>=128?1:0)+1,hs>=128&&++co,hs>=16384&&++co,hs>=2097152&&++co;var uo=cs.next(co);lo<=127?uo.write_shift(1,lo):(uo.write_shift(1,(lo&127)+128),uo.write_shift(1,lo>>7));for(var ga=0;ga!=4;++ga)if(hs>=128)uo.write_shift(1,(hs&127)+128),hs>>=7;else{uo.write_shift(1,hs);break}hs>0&&is_buf(us)&&cs.push(us)}}function shift_cell_xls(cs,is,us){var hs=dup(cs);if(is.s?(hs.cRel&&(hs.c+=is.s.c),hs.rRel&&(hs.r+=is.s.r)):(hs.cRel&&(hs.c+=is.c),hs.rRel&&(hs.r+=is.r)),!us||us.biff<12){for(;hs.c>=256;)hs.c-=256;for(;hs.r>=65536;)hs.r-=65536}return hs}function shift_range_xls(cs,is,us){var hs=dup(cs);return hs.s=shift_cell_xls(hs.s,is.s,us),hs.e=shift_cell_xls(hs.e,is.s,us),hs}function encode_cell_xls(cs,is){if(cs.cRel&&cs.c<0)for(cs=dup(cs);cs.c<0;)cs.c+=is>8?16384:256;if(cs.rRel&&cs.r<0)for(cs=dup(cs);cs.r<0;)cs.r+=is>8?1048576:is>5?65536:16384;var us=encode_cell(cs);return!cs.cRel&&cs.cRel!=null&&(us=fix_col(us)),!cs.rRel&&cs.rRel!=null&&(us=fix_row(us)),us}function encode_range_xls(cs,is){return cs.s.r==0&&!cs.s.rRel&&cs.e.r==(is.biff>=12?1048575:is.biff>=8?65536:16384)&&!cs.e.rRel?(cs.s.cRel?"":"$")+encode_col(cs.s.c)+":"+(cs.e.cRel?"":"$")+encode_col(cs.e.c):cs.s.c==0&&!cs.s.cRel&&cs.e.c==(is.biff>=12?16383:255)&&!cs.e.cRel?(cs.s.rRel?"":"$")+encode_row(cs.s.r)+":"+(cs.e.rRel?"":"$")+encode_row(cs.e.r):encode_cell_xls(cs.s,is.biff)+":"+encode_cell_xls(cs.e,is.biff)}function decode_row(cs){return parseInt(unfix_row(cs),10)-1}function encode_row(cs){return""+(cs+1)}function fix_row(cs){return cs.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function unfix_row(cs){return cs.replace(/\$(\d+)$/,"$1")}function decode_col(cs){for(var is=unfix_col(cs),us=0,hs=0;hs!==is.length;++hs)us=26*us+is.charCodeAt(hs)-64;return us-1}function encode_col(cs){if(cs<0)throw new Error("invalid column "+cs);var is="";for(++cs;cs;cs=Math.floor((cs-1)/26))is=String.fromCharCode((cs-1)%26+65)+is;return is}function fix_col(cs){return cs.replace(/^([A-Z])/,"$$$1")}function unfix_col(cs){return cs.replace(/^\$([A-Z])/,"$1")}function split_cell(cs){return cs.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function decode_cell(cs){for(var is=0,us=0,hs=0;hs<cs.length;++hs){var lo=cs.charCodeAt(hs);lo>=48&&lo<=57?is=10*is+(lo-48):lo>=65&&lo<=90&&(us=26*us+(lo-64))}return{c:us-1,r:is-1}}function encode_cell(cs){for(var is=cs.c+1,us="";is;is=(is-1)/26|0)us=String.fromCharCode((is-1)%26+65)+us;return us+(cs.r+1)}function decode_range(cs){var is=cs.indexOf(":");return is==-1?{s:decode_cell(cs),e:decode_cell(cs)}:{s:decode_cell(cs.slice(0,is)),e:decode_cell(cs.slice(is+1))}}function encode_range(cs,is){return typeof is>"u"||typeof is=="number"?encode_range(cs.s,cs.e):(typeof cs!="string"&&(cs=encode_cell(cs)),typeof is!="string"&&(is=encode_cell(is)),cs==is?cs:cs+":"+is)}function safe_decode_range(cs){var is={s:{c:0,r:0},e:{c:0,r:0}},us=0,hs=0,lo=0,co=cs.length;for(us=0;hs<co&&!((lo=cs.charCodeAt(hs)-64)<1||lo>26);++hs)us=26*us+lo;for(is.s.c=--us,us=0;hs<co&&!((lo=cs.charCodeAt(hs)-48)<0||lo>9);++hs)us=10*us+lo;if(is.s.r=--us,hs===co||lo!=10)return is.e.c=is.s.c,is.e.r=is.s.r,is;for(++hs,us=0;hs!=co&&!((lo=cs.charCodeAt(hs)-64)<1||lo>26);++hs)us=26*us+lo;for(is.e.c=--us,us=0;hs!=co&&!((lo=cs.charCodeAt(hs)-48)<0||lo>9);++hs)us=10*us+lo;return is.e.r=--us,is}function safe_format_cell(cs,is){var us=cs.t=="d"&&is instanceof Date;if(cs.z!=null)try{return cs.w=SSF_format(cs.z,us?datenum(is):is)}catch{}try{return cs.w=SSF_format((cs.XF||{}).numFmtId||(us?14:0),us?datenum(is):is)}catch{return""+is}}function format_cell(cs,is,us){return cs==null||cs.t==null||cs.t=="z"?"":cs.w!==void 0?cs.w:(cs.t=="d"&&!cs.z&&us&&us.dateNF&&(cs.z=us.dateNF),cs.t=="e"?BErr[cs.v]||cs.v:is==null?safe_format_cell(cs,cs.v):safe_format_cell(cs,is))}function sheet_to_workbook(cs,is){var us=is&&is.sheet?is.sheet:"Sheet1",hs={};return hs[us]=cs,{SheetNames:[us],Sheets:hs}}function sheet_add_aoa(cs,is,us){var hs=us||{},lo=cs?Array.isArray(cs):hs.dense,co=cs||(lo?[]:{}),uo=0,ga=0;if(co&&hs.origin!=null){if(typeof hs.origin=="number")uo=hs.origin;else{var ba=typeof hs.origin=="string"?decode_cell(hs.origin):hs.origin;uo=ba.r,ga=ba.c}co["!ref"]||(co["!ref"]="A1:A1")}var xa={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(co["!ref"]){var _a=safe_decode_range(co["!ref"]);xa.s.c=_a.s.c,xa.s.r=_a.s.r,xa.e.c=Math.max(xa.e.c,_a.e.c),xa.e.r=Math.max(xa.e.r,_a.e.r),uo==-1&&(xa.e.r=uo=_a.e.r+1)}for(var $a=0;$a!=is.length;++$a)if(is[$a]){if(!Array.isArray(is[$a]))throw new Error("aoa_to_sheet expects an array of arrays");for(var xl=0;xl!=is[$a].length;++xl)if(!(typeof is[$a][xl]>"u")){var yl={v:is[$a][xl]},wl=uo+$a,_l=ga+xl;if(xa.s.r>wl&&(xa.s.r=wl),xa.s.c>_l&&(xa.s.c=_l),xa.e.r<wl&&(xa.e.r=wl),xa.e.c<_l&&(xa.e.c=_l),is[$a][xl]&&typeof is[$a][xl]=="object"&&!Array.isArray(is[$a][xl])&&!(is[$a][xl]instanceof Date))yl=is[$a][xl];else if(Array.isArray(yl.v)&&(yl.f=is[$a][xl][1],yl.v=yl.v[0]),yl.v===null)if(yl.f)yl.t="n";else if(hs.nullError)yl.t="e",yl.v=0;else if(hs.sheetStubs)yl.t="z";else continue;else typeof yl.v=="number"?yl.t="n":typeof yl.v=="boolean"?yl.t="b":yl.v instanceof Date?(yl.z=hs.dateNF||table_fmt[14],hs.cellDates?(yl.t="d",yl.w=SSF_format(yl.z,datenum(yl.v))):(yl.t="n",yl.v=datenum(yl.v),yl.w=SSF_format(yl.z,yl.v))):yl.t="s";if(lo)co[wl]||(co[wl]=[]),co[wl][_l]&&co[wl][_l].z&&(yl.z=co[wl][_l].z),co[wl][_l]=yl;else{var El=encode_cell({c:_l,r:wl});co[El]&&co[El].z&&(yl.z=co[El].z),co[El]=yl}}}return xa.s.c<1e7&&(co["!ref"]=encode_range(xa)),co}function aoa_to_sheet(cs,is){return sheet_add_aoa(null,cs,is)}function parse_Int32LE(cs){return cs.read_shift(4,"i")}function write_UInt32LE(cs,is){return is||(is=new_buf(4)),is.write_shift(4,cs),is}function parse_XLWideString(cs){var is=cs.read_shift(4);return is===0?"":cs.read_shift(is,"dbcs")}function write_XLWideString(cs,is){var us=!1;return is==null&&(us=!0,is=new_buf(4+2*cs.length)),is.write_shift(4,cs.length),cs.length>0&&is.write_shift(0,cs,"dbcs"),us?is.slice(0,is.l):is}function parse_StrRun(cs){return{ich:cs.read_shift(2),ifnt:cs.read_shift(2)}}function write_StrRun(cs,is){return is||(is=new_buf(4)),is.write_shift(2,0),is.write_shift(2,0),is}function parse_RichStr(cs,is){var us=cs.l,hs=cs.read_shift(1),lo=parse_XLWideString(cs),co=[],uo={t:lo,h:lo};if(hs&1){for(var ga=cs.read_shift(4),ba=0;ba!=ga;++ba)co.push(parse_StrRun(cs));uo.r=co}else uo.r=[{ich:0,ifnt:0}];return cs.l=us+is,uo}function write_RichStr(cs,is){var us=!1;return is==null&&(us=!0,is=new_buf(15+4*cs.t.length)),is.write_shift(1,0),write_XLWideString(cs.t,is),us?is.slice(0,is.l):is}var parse_BrtCommentText=parse_RichStr;function write_BrtCommentText(cs,is){var us=!1;return is==null&&(us=!0,is=new_buf(23+4*cs.t.length)),is.write_shift(1,1),write_XLWideString(cs.t,is),is.write_shift(4,1),write_StrRun({},is),us?is.slice(0,is.l):is}function parse_XLSBCell(cs){var is=cs.read_shift(4),us=cs.read_shift(2);return us+=cs.read_shift(1)<<16,cs.l++,{c:is,iStyleRef:us}}function write_XLSBCell(cs,is){return is==null&&(is=new_buf(8)),is.write_shift(-4,cs.c),is.write_shift(3,cs.iStyleRef||cs.s),is.write_shift(1,0),is}function parse_XLSBShortCell(cs){var is=cs.read_shift(2);return is+=cs.read_shift(1)<<16,cs.l++,{c:-1,iStyleRef:is}}function write_XLSBShortCell(cs,is){return is==null&&(is=new_buf(4)),is.write_shift(3,cs.iStyleRef||cs.s),is.write_shift(1,0),is}var parse_XLSBCodeName=parse_XLWideString,write_XLSBCodeName=write_XLWideString;function parse_XLNullableWideString(cs){var is=cs.read_shift(4);return is===0||is===4294967295?"":cs.read_shift(is,"dbcs")}function write_XLNullableWideString(cs,is){var us=!1;return is==null&&(us=!0,is=new_buf(127)),is.write_shift(4,cs.length>0?cs.length:4294967295),cs.length>0&&is.write_shift(0,cs,"dbcs"),us?is.slice(0,is.l):is}var parse_XLNameWideString=parse_XLWideString,parse_RelID=parse_XLNullableWideString,write_RelID=write_XLNullableWideString;function parse_RkNumber(cs){var is=cs.slice(cs.l,cs.l+4),us=is[0]&1,hs=is[0]&2;cs.l+=4;var lo=hs===0?__double([0,0,0,0,is[0]&252,is[1],is[2],is[3]],0):__readInt32LE(is,0)>>2;return us?lo/100:lo}function write_RkNumber(cs,is){is==null&&(is=new_buf(4));var us=0,hs=0,lo=cs*100;if(cs==(cs|0)&&cs>=-536870912&&cs<1<<29?hs=1:lo==(lo|0)&&lo>=-536870912&&lo<1<<29&&(hs=1,us=1),hs)is.write_shift(-4,((us?lo:cs)<<2)+(us+2));else throw new Error("unsupported RkNumber "+cs)}function parse_RfX(cs){var is={s:{},e:{}};return is.s.r=cs.read_shift(4),is.e.r=cs.read_shift(4),is.s.c=cs.read_shift(4),is.e.c=cs.read_shift(4),is}function write_RfX(cs,is){return is||(is=new_buf(16)),is.write_shift(4,cs.s.r),is.write_shift(4,cs.e.r),is.write_shift(4,cs.s.c),is.write_shift(4,cs.e.c),is}var parse_UncheckedRfX=parse_RfX,write_UncheckedRfX=write_RfX;function parse_Xnum(cs){if(cs.length-cs.l<8)throw"XLS Xnum Buffer underflow";return cs.read_shift(8,"f")}function write_Xnum(cs,is){return(is||new_buf(8)).write_shift(8,cs,"f")}function parse_BrtColor(cs){var is={},us=cs.read_shift(1),hs=us>>>1,lo=cs.read_shift(1),co=cs.read_shift(2,"i"),uo=cs.read_shift(1),ga=cs.read_shift(1),ba=cs.read_shift(1);switch(cs.l++,hs){case 0:is.auto=1;break;case 1:is.index=lo;var xa=XLSIcv[lo];xa&&(is.rgb=rgb2Hex(xa));break;case 2:is.rgb=rgb2Hex([uo,ga,ba]);break;case 3:is.theme=lo;break}return co!=0&&(is.tint=co>0?co/32767:co/32768),is}function write_BrtColor(cs,is){if(is||(is=new_buf(8)),!cs||cs.auto)return is.write_shift(4,0),is.write_shift(4,0),is;cs.index!=null?(is.write_shift(1,2),is.write_shift(1,cs.index)):cs.theme!=null?(is.write_shift(1,6),is.write_shift(1,cs.theme)):(is.write_shift(1,5),is.write_shift(1,0));var us=cs.tint||0;if(us>0?us*=32767:us<0&&(us*=32768),is.write_shift(2,us),!cs.rgb||cs.theme!=null)is.write_shift(2,0),is.write_shift(1,0),is.write_shift(1,0);else{var hs=cs.rgb||"FFFFFF";typeof hs=="number"&&(hs=("000000"+hs.toString(16)).slice(-6)),is.write_shift(1,parseInt(hs.slice(0,2),16)),is.write_shift(1,parseInt(hs.slice(2,4),16)),is.write_shift(1,parseInt(hs.slice(4,6),16)),is.write_shift(1,255)}return is}function parse_FontFlags(cs){var is=cs.read_shift(1);cs.l++;var us={fBold:is&1,fItalic:is&2,fUnderline:is&4,fStrikeout:is&8,fOutline:is&16,fShadow:is&32,fCondense:is&64,fExtend:is&128};return us}function write_FontFlags(cs,is){is||(is=new_buf(2));var us=(cs.italic?2:0)|(cs.strike?8:0)|(cs.outline?16:0)|(cs.shadow?32:0)|(cs.condense?64:0)|(cs.extend?128:0);return is.write_shift(1,us),is.write_shift(1,0),is}var VT_I2=2,VT_I4=3,VT_BOOL=11,VT_UI4=19,VT_FILETIME=64,VT_BLOB=65,VT_CF=71,VT_VECTOR_VARIANT=4108,VT_VECTOR_LPSTR=4126,VT_STRING=80,DocSummaryPIDDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Category",t:VT_STRING},3:{n:"PresentationFormat",t:VT_STRING},4:{n:"ByteCount",t:VT_I4},5:{n:"LineCount",t:VT_I4},6:{n:"ParagraphCount",t:VT_I4},7:{n:"SlideCount",t:VT_I4},8:{n:"NoteCount",t:VT_I4},9:{n:"HiddenCount",t:VT_I4},10:{n:"MultimediaClipCount",t:VT_I4},11:{n:"ScaleCrop",t:VT_BOOL},12:{n:"HeadingPairs",t:VT_VECTOR_VARIANT},13:{n:"TitlesOfParts",t:VT_VECTOR_LPSTR},14:{n:"Manager",t:VT_STRING},15:{n:"Company",t:VT_STRING},16:{n:"LinksUpToDate",t:VT_BOOL},17:{n:"CharacterCount",t:VT_I4},19:{n:"SharedDoc",t:VT_BOOL},22:{n:"HyperlinksChanged",t:VT_BOOL},23:{n:"AppVersion",t:VT_I4,p:"version"},24:{n:"DigSig",t:VT_BLOB},26:{n:"ContentType",t:VT_STRING},27:{n:"ContentStatus",t:VT_STRING},28:{n:"Language",t:VT_STRING},29:{n:"Version",t:VT_STRING},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},SummaryPIDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Title",t:VT_STRING},3:{n:"Subject",t:VT_STRING},4:{n:"Author",t:VT_STRING},5:{n:"Keywords",t:VT_STRING},6:{n:"Comments",t:VT_STRING},7:{n:"Template",t:VT_STRING},8:{n:"LastAuthor",t:VT_STRING},9:{n:"RevNumber",t:VT_STRING},10:{n:"EditTime",t:VT_FILETIME},11:{n:"LastPrinted",t:VT_FILETIME},12:{n:"CreatedDate",t:VT_FILETIME},13:{n:"ModifiedDate",t:VT_FILETIME},14:{n:"PageCount",t:VT_I4},15:{n:"WordCount",t:VT_I4},16:{n:"CharCount",t:VT_I4},17:{n:"Thumbnail",t:VT_CF},18:{n:"Application",t:VT_STRING},19:{n:"DocSecurity",t:VT_I4},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}};function rgbify(cs){return cs.map(function(is){return[is>>16&255,is>>8&255,is&255]})}var _XLSIcv=rgbify([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),XLSIcv=dup(_XLSIcv),BErr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ct2type={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},CT_LIST={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function new_ct(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function write_ct(cs,is){var us=evert_arr(ct2type),hs=[],lo;hs[hs.length]=XML_HEADER,hs[hs.length]=writextag("Types",null,{xmlns:XMLNS.CT,"xmlns:xsd":XMLNS.xsd,"xmlns:xsi":XMLNS.xsi}),hs=hs.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(ba){return writextag("Default",null,{Extension:ba[0],ContentType:ba[1]})}));var co=function(ba){cs[ba]&&cs[ba].length>0&&(lo=cs[ba][0],hs[hs.length]=writextag("Override",null,{PartName:(lo[0]=="/"?"":"/")+lo,ContentType:CT_LIST[ba][is.bookType]||CT_LIST[ba].xlsx}))},uo=function(ba){(cs[ba]||[]).forEach(function(xa){hs[hs.length]=writextag("Override",null,{PartName:(xa[0]=="/"?"":"/")+xa,ContentType:CT_LIST[ba][is.bookType]||CT_LIST[ba].xlsx})})},ga=function(ba){(cs[ba]||[]).forEach(function(xa){hs[hs.length]=writextag("Override",null,{PartName:(xa[0]=="/"?"":"/")+xa,ContentType:us[ba][0]})})};return co("workbooks"),uo("sheets"),uo("charts"),ga("themes"),["strs","styles"].forEach(co),["coreprops","extprops","custprops"].forEach(ga),ga("vba"),ga("comments"),ga("threadedcomments"),ga("drawings"),uo("metadata"),ga("people"),hs.length>2&&(hs[hs.length]="</Types>",hs[1]=hs[1].replace("/>",">")),hs.join("")}var RELS={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function get_rels_path(cs){var is=cs.lastIndexOf("/");return cs.slice(0,is+1)+"_rels/"+cs.slice(is+1)+".rels"}function write_rels(cs){var is=[XML_HEADER,writextag("Relationships",null,{xmlns:XMLNS.RELS})];return keys(cs["!id"]).forEach(function(us){is[is.length]=writextag("Relationship",null,cs["!id"][us])}),is.length>2&&(is[is.length]="</Relationships>",is[1]=is[1].replace("/>",">")),is.join("")}function add_rels(cs,is,us,hs,lo,co){if(lo||(lo={}),cs["!id"]||(cs["!id"]={}),cs["!idx"]||(cs["!idx"]=1),is<0)for(is=cs["!idx"];cs["!id"]["rId"+is];++is);if(cs["!idx"]=is+1,lo.Id="rId"+is,lo.Type=hs,lo.Target=us,[RELS.HLINK,RELS.XPATH,RELS.XMISS].indexOf(lo.Type)>-1&&(lo.TargetMode="External"),cs["!id"][lo.Id])throw new Error("Cannot rewrite rId "+is);return cs["!id"][lo.Id]=lo,cs[("/"+lo.Target).replace("//","/")]=lo,is}function write_manifest(cs){var is=[XML_HEADER];is.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),is.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var us=0;us<cs.length;++us)is.push('  <manifest:file-entry manifest:full-path="'+cs[us][0]+'" manifest:media-type="'+cs[us][1]+`"/>
`);return is.push("</manifest:manifest>"),is.join("")}function write_rdf_type(cs,is,us){return['  <rdf:Description rdf:about="'+cs+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(us||"odf")+"#"+is+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf_has(cs,is){return['  <rdf:Description rdf:about="'+cs+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+is+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf(cs){var is=[XML_HEADER];is.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var us=0;us!=cs.length;++us)is.push(write_rdf_type(cs[us][0],cs[us][1])),is.push(write_rdf_has("",cs[us][0]));return is.push(write_rdf_type("","Document","pkg")),is.push("</rdf:RDF>"),is.join("")}function write_meta_ods(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+XLSX.version+"</meta:generator></office:meta></office:document-meta>"}var CORE_PROPS=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function cp_doit(cs,is,us,hs,lo){lo[cs]!=null||is==null||is===""||(lo[cs]=is,is=escapexml(is),hs[hs.length]=us?writextag(cs,is,us):writetag(cs,is))}function write_core_props(cs,is){var us=is||{},hs=[XML_HEADER,writextag("cp:coreProperties",null,{"xmlns:cp":XMLNS.CORE_PROPS,"xmlns:dc":XMLNS.dc,"xmlns:dcterms":XMLNS.dcterms,"xmlns:dcmitype":XMLNS.dcmitype,"xmlns:xsi":XMLNS.xsi})],lo={};if(!cs&&!us.Props)return hs.join("");cs&&(cs.CreatedDate!=null&&cp_doit("dcterms:created",typeof cs.CreatedDate=="string"?cs.CreatedDate:write_w3cdtf(cs.CreatedDate,us.WTF),{"xsi:type":"dcterms:W3CDTF"},hs,lo),cs.ModifiedDate!=null&&cp_doit("dcterms:modified",typeof cs.ModifiedDate=="string"?cs.ModifiedDate:write_w3cdtf(cs.ModifiedDate,us.WTF),{"xsi:type":"dcterms:W3CDTF"},hs,lo));for(var co=0;co!=CORE_PROPS.length;++co){var uo=CORE_PROPS[co],ga=us.Props&&us.Props[uo[1]]!=null?us.Props[uo[1]]:cs?cs[uo[1]]:null;ga===!0?ga="1":ga===!1?ga="0":typeof ga=="number"&&(ga=String(ga)),ga!=null&&cp_doit(uo[0],ga,null,hs,lo)}return hs.length>2&&(hs[hs.length]="</cp:coreProperties>",hs[1]=hs[1].replace("/>",">")),hs.join("")}var EXT_PROPS=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],PseudoPropsPairs=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function write_ext_props(cs){var is=[],us=writextag;return cs||(cs={}),cs.Application="SheetJS",is[is.length]=XML_HEADER,is[is.length]=writextag("Properties",null,{xmlns:XMLNS.EXT_PROPS,"xmlns:vt":XMLNS.vt}),EXT_PROPS.forEach(function(hs){if(cs[hs[1]]!==void 0){var lo;switch(hs[2]){case"string":lo=escapexml(String(cs[hs[1]]));break;case"bool":lo=cs[hs[1]]?"true":"false";break}lo!==void 0&&(is[is.length]=us(hs[0],lo))}}),is[is.length]=us("HeadingPairs",us("vt:vector",us("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+us("vt:variant",us("vt:i4",String(cs.Worksheets))),{size:2,baseType:"variant"})),is[is.length]=us("TitlesOfParts",us("vt:vector",cs.SheetNames.map(function(hs){return"<vt:lpstr>"+escapexml(hs)+"</vt:lpstr>"}).join(""),{size:cs.Worksheets,baseType:"lpstr"})),is.length>2&&(is[is.length]="</Properties>",is[1]=is[1].replace("/>",">")),is.join("")}function write_cust_props(cs){var is=[XML_HEADER,writextag("Properties",null,{xmlns:XMLNS.CUST_PROPS,"xmlns:vt":XMLNS.vt})];if(!cs)return is.join("");var us=1;return keys(cs).forEach(function(lo){++us,is[is.length]=writextag("property",write_vt(cs[lo]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:us,name:escapexml(lo)})}),is.length>2&&(is[is.length]="</Properties>",is[1]=is[1].replace("/>",">")),is.join("")}var XLMLDocPropsMap={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function xlml_write_docprops(cs,is){var us=[];return keys(XLMLDocPropsMap).map(function(hs){for(var lo=0;lo<CORE_PROPS.length;++lo)if(CORE_PROPS[lo][1]==hs)return CORE_PROPS[lo];for(lo=0;lo<EXT_PROPS.length;++lo)if(EXT_PROPS[lo][1]==hs)return EXT_PROPS[lo];throw hs}).forEach(function(hs){if(cs[hs[1]]!=null){var lo=is&&is.Props&&is.Props[hs[1]]!=null?is.Props[hs[1]]:cs[hs[1]];switch(hs[2]){case"date":lo=new Date(lo).toISOString().replace(/\.\d*Z/,"Z");break}typeof lo=="number"?lo=String(lo):lo===!0||lo===!1?lo=lo?"1":"0":lo instanceof Date&&(lo=new Date(lo).toISOString().replace(/\.\d*Z/,"")),us.push(writetag(XLMLDocPropsMap[hs[1]]||hs[1],lo))}}),writextag("DocumentProperties",us.join(""),{xmlns:XLMLNS.o})}function xlml_write_custprops(cs,is){var us=["Worksheets","SheetNames"],hs="CustomDocumentProperties",lo=[];return cs&&keys(cs).forEach(function(co){if(Object.prototype.hasOwnProperty.call(cs,co)){for(var uo=0;uo<CORE_PROPS.length;++uo)if(co==CORE_PROPS[uo][1])return;for(uo=0;uo<EXT_PROPS.length;++uo)if(co==EXT_PROPS[uo][1])return;for(uo=0;uo<us.length;++uo)if(co==us[uo])return;var ga=cs[co],ba="string";typeof ga=="number"?(ba="float",ga=String(ga)):ga===!0||ga===!1?(ba="boolean",ga=ga?"1":"0"):ga=String(ga),lo.push(writextag(escapexmltag(co),ga,{"dt:dt":ba}))}}),is&&keys(is).forEach(function(co){if(Object.prototype.hasOwnProperty.call(is,co)&&!(cs&&Object.prototype.hasOwnProperty.call(cs,co))){var uo=is[co],ga="string";typeof uo=="number"?(ga="float",uo=String(uo)):uo===!0||uo===!1?(ga="boolean",uo=uo?"1":"0"):uo instanceof Date?(ga="dateTime.tz",uo=uo.toISOString()):uo=String(uo),lo.push(writextag(escapexmltag(co),uo,{"dt:dt":ga}))}}),"<"+hs+' xmlns="'+XLMLNS.o+'">'+lo.join("")+"</"+hs+">"}function write_FILETIME(cs){var is=typeof cs=="string"?new Date(Date.parse(cs)):cs,us=is.getTime()/1e3+11644473600,hs=us%Math.pow(2,32),lo=(us-hs)/Math.pow(2,32);hs*=1e7,lo*=1e7;var co=hs/Math.pow(2,32)|0;co>0&&(hs=hs%Math.pow(2,32),lo+=co);var uo=new_buf(8);return uo.write_shift(4,hs),uo.write_shift(4,lo),uo}function write_TypedPropertyValue(cs,is){var us=new_buf(4),hs=new_buf(4);switch(us.write_shift(4,cs==80?31:cs),cs){case 3:hs.write_shift(-4,is);break;case 5:hs=new_buf(8),hs.write_shift(8,is,"f");break;case 11:hs.write_shift(4,is?1:0);break;case 64:hs=write_FILETIME(is);break;case 31:case 80:for(hs=new_buf(4+2*(is.length+1)+(is.length%2?0:2)),hs.write_shift(4,is.length+1),hs.write_shift(0,is,"dbcs");hs.l!=hs.length;)hs.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+cs+" "+is)}return bconcat([us,hs])}var XLSPSSkip=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function guess_property_type(cs){switch(typeof cs){case"boolean":return 11;case"number":return(cs|0)==cs?3:5;case"string":return 31;case"object":if(cs instanceof Date)return 64;break}return-1}function write_PropertySet(cs,is,us){var hs=new_buf(8),lo=[],co=[],uo=8,ga=0,ba=new_buf(8),xa=new_buf(8);if(ba.write_shift(4,2),ba.write_shift(4,1200),xa.write_shift(4,1),co.push(ba),lo.push(xa),uo+=8+ba.length,!is){xa=new_buf(8),xa.write_shift(4,0),lo.unshift(xa);var _a=[new_buf(4)];for(_a[0].write_shift(4,cs.length),ga=0;ga<cs.length;++ga){var $a=cs[ga][0];for(ba=new_buf(8+2*($a.length+1)+($a.length%2?0:2)),ba.write_shift(4,ga+2),ba.write_shift(4,$a.length+1),ba.write_shift(0,$a,"dbcs");ba.l!=ba.length;)ba.write_shift(1,0);_a.push(ba)}ba=bconcat(_a),co.unshift(ba),uo+=8+ba.length}for(ga=0;ga<cs.length;++ga)if(!(is&&!is[cs[ga][0]])&&!(XLSPSSkip.indexOf(cs[ga][0])>-1||PseudoPropsPairs.indexOf(cs[ga][0])>-1)&&cs[ga][1]!=null){var xl=cs[ga][1],yl=0;if(is){yl=+is[cs[ga][0]];var wl=us[yl];if(wl.p=="version"&&typeof xl=="string"){var _l=xl.split(".");xl=(+_l[0]<<16)+(+_l[1]||0)}ba=write_TypedPropertyValue(wl.t,xl)}else{var El=guess_property_type(xl);El==-1&&(El=31,xl=String(xl)),ba=write_TypedPropertyValue(El,xl)}co.push(ba),xa=new_buf(8),xa.write_shift(4,is?yl:2+ga),lo.push(xa),uo+=8+ba.length}var Sl=8*(co.length+1);for(ga=0;ga<co.length;++ga)lo[ga].write_shift(4,Sl),Sl+=co[ga].length;return hs.write_shift(4,uo),hs.write_shift(4,co.length),bconcat([hs].concat(lo).concat(co))}function write_PropertySetStream(cs,is,us,hs,lo,co){var uo=new_buf(lo?68:48),ga=[uo];uo.write_shift(2,65534),uo.write_shift(2,0),uo.write_shift(4,842412599),uo.write_shift(16,CFB.utils.consts.HEADER_CLSID,"hex"),uo.write_shift(4,lo?2:1),uo.write_shift(16,is,"hex"),uo.write_shift(4,lo?68:48);var ba=write_PropertySet(cs,us,hs);if(ga.push(ba),lo){var xa=write_PropertySet(lo,null,null);uo.write_shift(16,co,"hex"),uo.write_shift(4,68+ba.length),ga.push(xa)}return bconcat(ga)}function writezeroes(cs,is){is||(is=new_buf(cs));for(var us=0;us<cs;++us)is.write_shift(1,0);return is}function parsebool(cs,is){return cs.read_shift(is)===1}function writebool(cs,is){return is||(is=new_buf(2)),is.write_shift(2,+!!cs),is}function parseuint16(cs){return cs.read_shift(2,"u")}function writeuint16(cs,is){return is||(is=new_buf(2)),is.write_shift(2,cs),is}function write_Bes(cs,is,us){return us||(us=new_buf(2)),us.write_shift(1,is=="e"?+cs:+!!cs),us.write_shift(1,is=="e"?1:0),us}function parse_ShortXLUnicodeString(cs,is,us){var hs=cs.read_shift(us&&us.biff>=12?2:1),lo="sbcs-cont";if(us&&us.biff>=8,!us||us.biff==8){var co=cs.read_shift(1);co&&(lo="dbcs-cont")}else us.biff==12&&(lo="wstr");us.biff>=2&&us.biff<=5&&(lo="cpstr");var uo=hs?cs.read_shift(hs,lo):"";return uo}function write_XLUnicodeRichExtendedString(cs){var is=cs.t||"",us=new_buf(3);us.write_shift(2,is.length),us.write_shift(1,1);var hs=new_buf(2*is.length);hs.write_shift(2*is.length,is,"utf16le");var lo=[us,hs];return bconcat(lo)}function parse_XLUnicodeStringNoCch(cs,is,us){var hs;if(us){if(us.biff>=2&&us.biff<=5)return cs.read_shift(is,"cpstr");if(us.biff>=12)return cs.read_shift(is,"dbcs-cont")}var lo=cs.read_shift(1);return lo===0?hs=cs.read_shift(is,"sbcs-cont"):hs=cs.read_shift(is,"dbcs-cont"),hs}function parse_XLUnicodeString(cs,is,us){var hs=cs.read_shift(us&&us.biff==2?1:2);return hs===0?(cs.l++,""):parse_XLUnicodeStringNoCch(cs,hs,us)}function parse_XLUnicodeString2(cs,is,us){if(us.biff>5)return parse_XLUnicodeString(cs,is,us);var hs=cs.read_shift(1);return hs===0?(cs.l++,""):cs.read_shift(hs,us.biff<=4||!cs.lens?"cpstr":"sbcs-cont")}function write_XLUnicodeString(cs,is,us){return us||(us=new_buf(3+2*cs.length)),us.write_shift(2,cs.length),us.write_shift(1,1),us.write_shift(31,cs,"utf16le"),us}function write_HyperlinkString(cs,is){is||(is=new_buf(6+cs.length*2)),is.write_shift(4,1+cs.length);for(var us=0;us<cs.length;++us)is.write_shift(2,cs.charCodeAt(us));return is.write_shift(2,0),is}function write_Hyperlink(cs){var is=new_buf(512),us=0,hs=cs.Target;hs.slice(0,7)=="file://"&&(hs=hs.slice(7));var lo=hs.indexOf("#"),co=lo>-1?31:23;switch(hs.charAt(0)){case"#":co=28;break;case".":co&=-3;break}is.write_shift(4,2),is.write_shift(4,co);var uo=[8,6815827,6619237,4849780,83];for(us=0;us<uo.length;++us)is.write_shift(4,uo[us]);if(co==28)hs=hs.slice(1),write_HyperlinkString(hs,is);else if(co&2){for(uo="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),us=0;us<uo.length;++us)is.write_shift(1,parseInt(uo[us],16));var ga=lo>-1?hs.slice(0,lo):hs;for(is.write_shift(4,2*(ga.length+1)),us=0;us<ga.length;++us)is.write_shift(2,ga.charCodeAt(us));is.write_shift(2,0),co&8&&write_HyperlinkString(lo>-1?hs.slice(lo+1):"",is)}else{for(uo="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),us=0;us<uo.length;++us)is.write_shift(1,parseInt(uo[us],16));for(var ba=0;hs.slice(ba*3,ba*3+3)=="../"||hs.slice(ba*3,ba*3+3)=="..\\";)++ba;for(is.write_shift(2,ba),is.write_shift(4,hs.length-3*ba+1),us=0;us<hs.length-3*ba;++us)is.write_shift(1,hs.charCodeAt(us+3*ba)&255);for(is.write_shift(1,0),is.write_shift(2,65535),is.write_shift(2,57005),us=0;us<6;++us)is.write_shift(4,0)}return is.slice(0,is.l)}function write_XLSCell(cs,is,us,hs){return hs||(hs=new_buf(6)),hs.write_shift(2,cs),hs.write_shift(2,is),hs.write_shift(2,us||0),hs}function parse_XTI(cs,is,us){var hs=us.biff>8?4:2,lo=cs.read_shift(hs),co=cs.read_shift(hs,"i"),uo=cs.read_shift(hs,"i");return[lo,co,uo]}function parse_Ref8U(cs){var is=cs.read_shift(2),us=cs.read_shift(2),hs=cs.read_shift(2),lo=cs.read_shift(2);return{s:{c:hs,r:is},e:{c:lo,r:us}}}function write_Ref8U(cs,is){return is||(is=new_buf(8)),is.write_shift(2,cs.s.r),is.write_shift(2,cs.e.r),is.write_shift(2,cs.s.c),is.write_shift(2,cs.e.c),is}function write_BOF(cs,is,us){var hs=1536,lo=16;switch(us.bookType){case"biff8":break;case"biff5":hs=1280,lo=8;break;case"biff4":hs=4,lo=6;break;case"biff3":hs=3,lo=6;break;case"biff2":hs=2,lo=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var co=new_buf(lo);return co.write_shift(2,hs),co.write_shift(2,is),lo>4&&co.write_shift(2,29282),lo>6&&co.write_shift(2,1997),lo>8&&(co.write_shift(2,49161),co.write_shift(2,1),co.write_shift(2,1798),co.write_shift(2,0)),co}function write_WriteAccess(cs,is){var us=!is||is.biff==8,hs=new_buf(us?112:54);for(hs.write_shift(is.biff==8?2:1,7),us&&hs.write_shift(1,0),hs.write_shift(4,859007059),hs.write_shift(4,5458548|(us?0:536870912));hs.l<hs.length;)hs.write_shift(1,us?0:32);return hs}function write_BoundSheet8(cs,is){var us=!is||is.biff>=8?2:1,hs=new_buf(8+us*cs.name.length);hs.write_shift(4,cs.pos),hs.write_shift(1,cs.hs||0),hs.write_shift(1,cs.dt),hs.write_shift(1,cs.name.length),is.biff>=8&&hs.write_shift(1,1),hs.write_shift(us*cs.name.length,cs.name,is.biff<8?"sbcs":"utf16le");var lo=hs.slice(0,hs.l);return lo.l=hs.l,lo}function write_SST(cs,is){var us=new_buf(8);us.write_shift(4,cs.Count),us.write_shift(4,cs.Unique);for(var hs=[],lo=0;lo<cs.length;++lo)hs[lo]=write_XLUnicodeRichExtendedString(cs[lo]);var co=bconcat([us].concat(hs));return co.parts=[us.length].concat(hs.map(function(uo){return uo.length})),co}function write_Window1(){var cs=new_buf(18);return cs.write_shift(2,0),cs.write_shift(2,0),cs.write_shift(2,29280),cs.write_shift(2,17600),cs.write_shift(2,56),cs.write_shift(2,0),cs.write_shift(2,0),cs.write_shift(2,1),cs.write_shift(2,500),cs}function write_Window2(cs){var is=new_buf(18),us=1718;return cs&&cs.RTL&&(us|=64),is.write_shift(2,us),is.write_shift(4,0),is.write_shift(4,64),is.write_shift(4,0),is.write_shift(4,0),is}function write_Font(cs,is){var us=cs.name||"Arial",hs=is&&is.biff==5,lo=hs?15+us.length:16+2*us.length,co=new_buf(lo);return co.write_shift(2,cs.sz*20),co.write_shift(4,0),co.write_shift(2,400),co.write_shift(4,0),co.write_shift(2,0),co.write_shift(1,us.length),hs||co.write_shift(1,1),co.write_shift((hs?1:2)*us.length,us,hs?"sbcs":"utf16le"),co}function write_LabelSst(cs,is,us,hs){var lo=new_buf(10);return write_XLSCell(cs,is,hs,lo),lo.write_shift(4,us),lo}function write_Label(cs,is,us,hs,lo){var co=!lo||lo.biff==8,uo=new_buf(8+ +co+(1+co)*us.length);return write_XLSCell(cs,is,hs,uo),uo.write_shift(2,us.length),co&&uo.write_shift(1,1),uo.write_shift((1+co)*us.length,us,co?"utf16le":"sbcs"),uo}function write_Format(cs,is,us,hs){var lo=us&&us.biff==5;hs||(hs=new_buf(lo?3+is.length:5+2*is.length)),hs.write_shift(2,cs),hs.write_shift(lo?1:2,is.length),lo||hs.write_shift(1,1),hs.write_shift((lo?1:2)*is.length,is,lo?"sbcs":"utf16le");var co=hs.length>hs.l?hs.slice(0,hs.l):hs;return co.l==null&&(co.l=co.length),co}function write_Dimensions(cs,is){var us=is.biff==8||!is.biff?4:2,hs=new_buf(2*us+6);return hs.write_shift(us,cs.s.r),hs.write_shift(us,cs.e.r+1),hs.write_shift(2,cs.s.c),hs.write_shift(2,cs.e.c+1),hs.write_shift(2,0),hs}function write_XF(cs,is,us,hs){var lo=us&&us.biff==5;hs||(hs=new_buf(lo?16:20)),hs.write_shift(2,0),cs.style?(hs.write_shift(2,cs.numFmtId||0),hs.write_shift(2,65524)):(hs.write_shift(2,cs.numFmtId||0),hs.write_shift(2,is<<4));var co=0;return cs.numFmtId>0&&lo&&(co|=1024),hs.write_shift(4,co),hs.write_shift(4,0),lo||hs.write_shift(4,0),hs.write_shift(2,0),hs}function write_Guts(cs){var is=new_buf(8);return is.write_shift(4,0),is.write_shift(2,0),is.write_shift(2,0),is}function write_BoolErr(cs,is,us,hs,lo,co){var uo=new_buf(8);return write_XLSCell(cs,is,hs,uo),write_Bes(us,co,uo),uo}function write_Number(cs,is,us,hs){var lo=new_buf(14);return write_XLSCell(cs,is,hs,lo),write_Xnum(us,lo),lo}function parse_ExternSheet(cs,is,us){if(us.biff<8)return parse_BIFF5ExternSheet(cs,is,us);for(var hs=[],lo=cs.l+is,co=cs.read_shift(us.biff>8?4:2);co--!==0;)hs.push(parse_XTI(cs,us.biff>8?12:6,us));if(cs.l!=lo)throw new Error("Bad ExternSheet: "+cs.l+" != "+lo);return hs}function parse_BIFF5ExternSheet(cs,is,us){cs[cs.l+1]==3&&cs[cs.l]++;var hs=parse_ShortXLUnicodeString(cs,is,us);return hs.charCodeAt(0)==3?hs.slice(1):hs}function write_MergeCells(cs){var is=new_buf(2+cs.length*8);is.write_shift(2,cs.length);for(var us=0;us<cs.length;++us)write_Ref8U(cs[us],is);return is}function write_HLink(cs){var is=new_buf(24),us=decode_cell(cs[0]);is.write_shift(2,us.r),is.write_shift(2,us.r),is.write_shift(2,us.c),is.write_shift(2,us.c);for(var hs="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),lo=0;lo<16;++lo)is.write_shift(1,parseInt(hs[lo],16));return bconcat([is,write_Hyperlink(cs[1])])}function write_HLinkTooltip(cs){var is=cs[1].Tooltip,us=new_buf(10+2*(is.length+1));us.write_shift(2,2048);var hs=decode_cell(cs[0]);us.write_shift(2,hs.r),us.write_shift(2,hs.r),us.write_shift(2,hs.c),us.write_shift(2,hs.c);for(var lo=0;lo<is.length;++lo)us.write_shift(2,is.charCodeAt(lo));return us.write_shift(2,0),us}function write_Country(cs){return cs||(cs=new_buf(4)),cs.write_shift(2,1),cs.write_shift(2,1),cs}function parse_ColInfo(cs,is,us){if(!us.cellStyles)return parsenoop(cs,is);var hs=us&&us.biff>=12?4:2,lo=cs.read_shift(hs),co=cs.read_shift(hs),uo=cs.read_shift(hs),ga=cs.read_shift(hs),ba=cs.read_shift(2);hs==2&&(cs.l+=2);var xa={s:lo,e:co,w:uo,ixfe:ga,flags:ba};return(us.biff>=5||!us.biff)&&(xa.level=ba>>8&7),xa}function write_ColInfo(cs,is){var us=new_buf(12);us.write_shift(2,is),us.write_shift(2,is),us.write_shift(2,cs.width*256),us.write_shift(2,0);var hs=0;return cs.hidden&&(hs|=1),us.write_shift(1,hs),hs=cs.level||0,us.write_shift(1,hs),us.write_shift(2,0),us}function write_RRTabId(cs){for(var is=new_buf(2*cs),us=0;us<cs;++us)is.write_shift(2,us+1);return is}function write_BIFF2NUM(cs,is,us){var hs=new_buf(15);return write_BIFF2Cell(hs,cs,is),hs.write_shift(8,us,"f"),hs}function write_BIFF2INT(cs,is,us){var hs=new_buf(9);return write_BIFF2Cell(hs,cs,is),hs.write_shift(2,us),hs}var DBF=function(){var cs={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},is=evert({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function us(ga,ba){var xa=[],_a=new_raw_buf(1);switch(ba.type){case"base64":_a=s2a(Base64_decode(ga));break;case"binary":_a=s2a(ga);break;case"buffer":case"array":_a=ga;break}prep_blob(_a,0);var $a=_a.read_shift(1),xl=!!($a&136),yl=!1,wl=!1;switch($a){case 2:break;case 3:break;case 48:yl=!0,xl=!0;break;case 49:yl=!0,xl=!0;break;case 131:break;case 139:break;case 140:wl=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+$a.toString(16))}var _l=0,El=521;$a==2&&(_l=_a.read_shift(2)),_a.l+=3,$a!=2&&(_l=_a.read_shift(4)),_l>1048576&&(_l=1e6),$a!=2&&(El=_a.read_shift(2));var Sl=_a.read_shift(2),Cl=ba.codepage||1252;$a!=2&&(_a.l+=16,_a.read_shift(1),_a[_a.l]!==0&&(Cl=cs[_a[_a.l]]),_a.l+=1,_a.l+=2),wl&&(_a.l+=36);for(var Tl=[],Dl={},Fl=Math.min(_a.length,$a==2?521:El-10-(yl?264:0)),Pl=wl?32:11;_a.l<Fl&&_a[_a.l]!=13;)switch(Dl={},Dl.name=$cptable.utils.decode(Cl,_a.slice(_a.l,_a.l+Pl)).replace(/[\u0000\r\n].*$/g,""),_a.l+=Pl,Dl.type=String.fromCharCode(_a.read_shift(1)),$a!=2&&!wl&&(Dl.offset=_a.read_shift(4)),Dl.len=_a.read_shift(1),$a==2&&(Dl.offset=_a.read_shift(2)),Dl.dec=_a.read_shift(1),Dl.name.length&&Tl.push(Dl),$a!=2&&(_a.l+=wl?13:14),Dl.type){case"B":(!yl||Dl.len!=8)&&ba.WTF&&console.log("Skipping "+Dl.name+":"+Dl.type);break;case"G":case"P":ba.WTF&&console.log("Skipping "+Dl.name+":"+Dl.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+Dl.type)}if(_a[_a.l]!==13&&(_a.l=El-1),_a.read_shift(1)!==13)throw new Error("DBF Terminator not found "+_a.l+" "+_a[_a.l]);_a.l=El;var Al=0,Rl=0;for(xa[0]=[],Rl=0;Rl!=Tl.length;++Rl)xa[0][Rl]=Tl[Rl].name;for(;_l-- >0;){if(_a[_a.l]===42){_a.l+=Sl;continue}for(++_a.l,xa[++Al]=[],Rl=0,Rl=0;Rl!=Tl.length;++Rl){var Il=_a.slice(_a.l,_a.l+Tl[Rl].len);_a.l+=Tl[Rl].len,prep_blob(Il,0);var Bl=$cptable.utils.decode(Cl,Il);switch(Tl[Rl].type){case"C":Bl.trim().length&&(xa[Al][Rl]=Bl.replace(/\s+$/,""));break;case"D":Bl.length===8?xa[Al][Rl]=new Date(+Bl.slice(0,4),+Bl.slice(4,6)-1,+Bl.slice(6,8)):xa[Al][Rl]=Bl;break;case"F":xa[Al][Rl]=parseFloat(Bl.trim());break;case"+":case"I":xa[Al][Rl]=wl?Il.read_shift(-4,"i")^2147483648:Il.read_shift(4,"i");break;case"L":switch(Bl.trim().toUpperCase()){case"Y":case"T":xa[Al][Rl]=!0;break;case"N":case"F":xa[Al][Rl]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Bl+"|")}break;case"M":if(!xl)throw new Error("DBF Unexpected MEMO for type "+$a.toString(16));xa[Al][Rl]="##MEMO##"+(wl?parseInt(Bl.trim(),10):Il.read_shift(4));break;case"N":Bl=Bl.replace(/\u0000/g,"").trim(),Bl&&Bl!="."&&(xa[Al][Rl]=+Bl||0);break;case"@":xa[Al][Rl]=new Date(Il.read_shift(-8,"f")-621356832e5);break;case"T":xa[Al][Rl]=new Date((Il.read_shift(4)-2440588)*864e5+Il.read_shift(4));break;case"Y":xa[Al][Rl]=Il.read_shift(4,"i")/1e4+Il.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":xa[Al][Rl]=-Il.read_shift(-8,"f");break;case"B":if(yl&&Tl[Rl].len==8){xa[Al][Rl]=Il.read_shift(8,"f");break}case"G":case"P":Il.l+=Tl[Rl].len;break;case"0":if(Tl[Rl].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+Tl[Rl].type)}}}if($a!=2&&_a.l<_a.length&&_a[_a.l++]!=26)throw new Error("DBF EOF Marker missing "+(_a.l-1)+" of "+_a.length+" "+_a[_a.l-1].toString(16));return ba&&ba.sheetRows&&(xa=xa.slice(0,ba.sheetRows)),ba.DBF=Tl,xa}function hs(ga,ba){var xa=ba||{};xa.dateNF||(xa.dateNF="yyyymmdd");var _a=aoa_to_sheet(us(ga,xa),xa);return _a["!cols"]=xa.DBF.map(function($a){return{wch:$a.len,DBF:$a}}),delete xa.DBF,_a}function lo(ga,ba){try{return sheet_to_workbook(hs(ga,ba),ba)}catch(xa){if(ba&&ba.WTF)throw xa}return{SheetNames:[],Sheets:{}}}var co={B:8,C:250,L:1,D:8,"?":0,"":0};function uo(ga,ba){var xa=ba||{};if(+xa.codepage>=0&&set_cp(+xa.codepage),xa.type=="string")throw new Error("Cannot write DBF to JS string");var _a=buf_array(),$a=sheet_to_json(ga,{header:1,raw:!0,cellDates:!0}),xl=$a[0],yl=$a.slice(1),wl=ga["!cols"]||[],_l=0,El=0,Sl=0,Cl=1;for(_l=0;_l<xl.length;++_l){if(((wl[_l]||{}).DBF||{}).name){xl[_l]=wl[_l].DBF.name,++Sl;continue}if(xl[_l]!=null){if(++Sl,typeof xl[_l]=="number"&&(xl[_l]=xl[_l].toString(10)),typeof xl[_l]!="string")throw new Error("DBF Invalid column name "+xl[_l]+" |"+typeof xl[_l]+"|");if(xl.indexOf(xl[_l])!==_l){for(El=0;El<1024;++El)if(xl.indexOf(xl[_l]+"_"+El)==-1){xl[_l]+="_"+El;break}}}}var Tl=safe_decode_range(ga["!ref"]),Dl=[],Fl=[],Pl=[];for(_l=0;_l<=Tl.e.c-Tl.s.c;++_l){var Al="",Rl="",Il=0,Bl=[];for(El=0;El<yl.length;++El)yl[El][_l]!=null&&Bl.push(yl[El][_l]);if(Bl.length==0||xl[_l]==null){Dl[_l]="?";continue}for(El=0;El<Bl.length;++El){switch(typeof Bl[El]){case"number":Rl="B";break;case"string":Rl="C";break;case"boolean":Rl="L";break;case"object":Rl=Bl[El]instanceof Date?"D":"C";break;default:Rl="C"}Il=Math.max(Il,String(Bl[El]).length),Al=Al&&Al!=Rl?"C":Rl}Il>250&&(Il=250),Rl=((wl[_l]||{}).DBF||{}).type,Rl=="C"&&wl[_l].DBF.len>Il&&(Il=wl[_l].DBF.len),Al=="B"&&Rl=="N"&&(Al="N",Pl[_l]=wl[_l].DBF.dec,Il=wl[_l].DBF.len),Fl[_l]=Al=="C"||Rl=="N"?Il:co[Al]||0,Cl+=Fl[_l],Dl[_l]=Al}var Ol=_a.next(32);for(Ol.write_shift(4,318902576),Ol.write_shift(4,yl.length),Ol.write_shift(2,296+32*Sl),Ol.write_shift(2,Cl),_l=0;_l<4;++_l)Ol.write_shift(4,0);for(Ol.write_shift(4,0|(+is[current_ansi]||3)<<8),_l=0,El=0;_l<xl.length;++_l)if(xl[_l]!=null){var zl=_a.next(32),Hl=(xl[_l].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);zl.write_shift(1,Hl,"sbcs"),zl.write_shift(1,Dl[_l]=="?"?"C":Dl[_l],"sbcs"),zl.write_shift(4,El),zl.write_shift(1,Fl[_l]||co[Dl[_l]]||0),zl.write_shift(1,Pl[_l]||0),zl.write_shift(1,2),zl.write_shift(4,0),zl.write_shift(1,0),zl.write_shift(4,0),zl.write_shift(4,0),El+=Fl[_l]||co[Dl[_l]]||0}var ou=_a.next(264);for(ou.write_shift(4,13),_l=0;_l<65;++_l)ou.write_shift(4,0);for(_l=0;_l<yl.length;++_l){var au=_a.next(Cl);for(au.write_shift(1,0),El=0;El<xl.length;++El)if(xl[El]!=null)switch(Dl[El]){case"L":au.write_shift(1,yl[_l][El]==null?63:yl[_l][El]?84:70);break;case"B":au.write_shift(8,yl[_l][El]||0,"f");break;case"N":var _c="0";for(typeof yl[_l][El]=="number"&&(_c=yl[_l][El].toFixed(Pl[El]||0)),Sl=0;Sl<Fl[El]-_c.length;++Sl)au.write_shift(1,32);au.write_shift(1,_c,"sbcs");break;case"D":yl[_l][El]?(au.write_shift(4,("0000"+yl[_l][El].getFullYear()).slice(-4),"sbcs"),au.write_shift(2,("00"+(yl[_l][El].getMonth()+1)).slice(-2),"sbcs"),au.write_shift(2,("00"+yl[_l][El].getDate()).slice(-2),"sbcs")):au.write_shift(8,"00000000","sbcs");break;case"C":var uu=String(yl[_l][El]!=null?yl[_l][El]:"").slice(0,Fl[El]);for(au.write_shift(1,uu,"sbcs"),Sl=0;Sl<Fl[El]-uu.length;++Sl)au.write_shift(1,32);break}}return _a.next(1).write_shift(1,26),_a.end()}return{to_workbook:lo,to_sheet:hs,from_sheet:uo}}(),SYLK=function(){var cs={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},is=new RegExp("\x1BN("+keys(cs).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),us=function(xl,yl){var wl=cs[yl];return typeof wl=="number"?_getansi(wl):wl},hs=function(xl,yl,wl){var _l=yl.charCodeAt(0)-32<<4|wl.charCodeAt(0)-48;return _l==59?xl:_getansi(_l)};cs["|"]=254;function lo(xl,yl){switch(yl.type){case"base64":return co(Base64_decode(xl),yl);case"binary":return co(xl,yl);case"buffer":return co(has_buf&&Buffer.isBuffer(xl)?xl.toString("binary"):a2s(xl),yl);case"array":return co(cc2str(xl),yl)}throw new Error("Unrecognized type "+yl.type)}function co(xl,yl){var wl=xl.split(/[\n\r]+/),_l=-1,El=-1,Sl=0,Cl=0,Tl=[],Dl=[],Fl=null,Pl={},Al=[],Rl=[],Il=[],Bl=0,Ol;for(+yl.codepage>=0&&set_cp(+yl.codepage);Sl!==wl.length;++Sl){Bl=0;var zl=wl[Sl].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,hs).replace(is,us),Hl=zl.replace(/;;/g,"\0").split(";").map(function(Ul){return Ul.replace(/\u0000/g,";")}),ou=Hl[0],au;if(zl.length>0)switch(ou){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Hl[1].charAt(0)=="P"&&Dl.push(zl.slice(3).replace(/;;/g,";"));break;case"C":var _c=!1,uu=!1,lu=!1,Kl=!1,xu=-1,pu=-1;for(Cl=1;Cl<Hl.length;++Cl)switch(Hl[Cl].charAt(0)){case"A":break;case"X":El=parseInt(Hl[Cl].slice(1))-1,uu=!0;break;case"Y":for(_l=parseInt(Hl[Cl].slice(1))-1,uu||(El=0),Ol=Tl.length;Ol<=_l;++Ol)Tl[Ol]=[];break;case"K":au=Hl[Cl].slice(1),au.charAt(0)==='"'?au=au.slice(1,au.length-1):au==="TRUE"?au=!0:au==="FALSE"?au=!1:isNaN(fuzzynum(au))?isNaN(fuzzydate(au).getDate())||(au=parseDate(au)):(au=fuzzynum(au),Fl!==null&&fmt_is_date(Fl)&&(au=numdate(au))),_c=!0;break;case"E":Kl=!0;var Ll=rc_to_a1(Hl[Cl].slice(1),{r:_l,c:El});Tl[_l][El]=[Tl[_l][El],Ll];break;case"S":lu=!0,Tl[_l][El]=[Tl[_l][El],"S5S"];break;case"G":break;case"R":xu=parseInt(Hl[Cl].slice(1))-1;break;case"C":pu=parseInt(Hl[Cl].slice(1))-1;break;default:if(yl&&yl.WTF)throw new Error("SYLK bad record "+zl)}if(_c&&(Tl[_l][El]&&Tl[_l][El].length==2?Tl[_l][El][0]=au:Tl[_l][El]=au,Fl=null),lu){if(Kl)throw new Error("SYLK shared formula cannot have own formula");var Nl=xu>-1&&Tl[xu][pu];if(!Nl||!Nl[1])throw new Error("SYLK shared formula cannot find base");Tl[_l][El][1]=shift_formula_str(Nl[1],{r:_l-xu,c:El-pu})}break;case"F":var Ml=0;for(Cl=1;Cl<Hl.length;++Cl)switch(Hl[Cl].charAt(0)){case"X":El=parseInt(Hl[Cl].slice(1))-1,++Ml;break;case"Y":for(_l=parseInt(Hl[Cl].slice(1))-1,Ol=Tl.length;Ol<=_l;++Ol)Tl[Ol]=[];break;case"M":Bl=parseInt(Hl[Cl].slice(1))/20;break;case"F":break;case"G":break;case"P":Fl=Dl[parseInt(Hl[Cl].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(Il=Hl[Cl].slice(1).split(" "),Ol=parseInt(Il[0],10);Ol<=parseInt(Il[1],10);++Ol)Bl=parseInt(Il[2],10),Rl[Ol-1]=Bl===0?{hidden:!0}:{wch:Bl},process_col(Rl[Ol-1]);break;case"C":El=parseInt(Hl[Cl].slice(1))-1,Rl[El]||(Rl[El]={});break;case"R":_l=parseInt(Hl[Cl].slice(1))-1,Al[_l]||(Al[_l]={}),Bl>0?(Al[_l].hpt=Bl,Al[_l].hpx=pt2px(Bl)):Bl===0&&(Al[_l].hidden=!0);break;default:if(yl&&yl.WTF)throw new Error("SYLK bad record "+zl)}Ml<1&&(Fl=null);break;default:if(yl&&yl.WTF)throw new Error("SYLK bad record "+zl)}}return Al.length>0&&(Pl["!rows"]=Al),Rl.length>0&&(Pl["!cols"]=Rl),yl&&yl.sheetRows&&(Tl=Tl.slice(0,yl.sheetRows)),[Tl,Pl]}function uo(xl,yl){var wl=lo(xl,yl),_l=wl[0],El=wl[1],Sl=aoa_to_sheet(_l,yl);return keys(El).forEach(function(Cl){Sl[Cl]=El[Cl]}),Sl}function ga(xl,yl){return sheet_to_workbook(uo(xl,yl),yl)}function ba(xl,yl,wl,_l){var El="C;Y"+(wl+1)+";X"+(_l+1)+";K";switch(xl.t){case"n":El+=xl.v||0,xl.f&&!xl.F&&(El+=";E"+a1_to_rc(xl.f,{r:wl,c:_l}));break;case"b":El+=xl.v?"TRUE":"FALSE";break;case"e":El+=xl.w||xl.v;break;case"d":El+='"'+(xl.w||xl.v)+'"';break;case"s":El+='"'+xl.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return El}function xa(xl,yl){yl.forEach(function(wl,_l){var El="F;W"+(_l+1)+" "+(_l+1)+" ";wl.hidden?El+="0":(typeof wl.width=="number"&&!wl.wpx&&(wl.wpx=width2px(wl.width)),typeof wl.wpx=="number"&&!wl.wch&&(wl.wch=px2char(wl.wpx)),typeof wl.wch=="number"&&(El+=Math.round(wl.wch))),El.charAt(El.length-1)!=" "&&xl.push(El)})}function _a(xl,yl){yl.forEach(function(wl,_l){var El="F;";wl.hidden?El+="M0;":wl.hpt?El+="M"+20*wl.hpt+";":wl.hpx&&(El+="M"+20*px2pt(wl.hpx)+";"),El.length>2&&xl.push(El+"R"+(_l+1))})}function $a(xl,yl){var wl=["ID;PWXL;N;E"],_l=[],El=safe_decode_range(xl["!ref"]),Sl,Cl=Array.isArray(xl),Tl=`\r
`;wl.push("P;PGeneral"),wl.push("F;P0;DG0G8;M255"),xl["!cols"]&&xa(wl,xl["!cols"]),xl["!rows"]&&_a(wl,xl["!rows"]),wl.push("B;Y"+(El.e.r-El.s.r+1)+";X"+(El.e.c-El.s.c+1)+";D"+[El.s.c,El.s.r,El.e.c,El.e.r].join(" "));for(var Dl=El.s.r;Dl<=El.e.r;++Dl)for(var Fl=El.s.c;Fl<=El.e.c;++Fl){var Pl=encode_cell({r:Dl,c:Fl});Sl=Cl?(xl[Dl]||[])[Fl]:xl[Pl],!(!Sl||Sl.v==null&&(!Sl.f||Sl.F))&&_l.push(ba(Sl,xl,Dl,Fl))}return wl.join(Tl)+Tl+_l.join(Tl)+Tl+"E"+Tl}return{to_workbook:ga,to_sheet:uo,from_sheet:$a}}(),DIF=function(){function cs(co,uo){switch(uo.type){case"base64":return is(Base64_decode(co),uo);case"binary":return is(co,uo);case"buffer":return is(has_buf&&Buffer.isBuffer(co)?co.toString("binary"):a2s(co),uo);case"array":return is(cc2str(co),uo)}throw new Error("Unrecognized type "+uo.type)}function is(co,uo){for(var ga=co.split(`
`),ba=-1,xa=-1,_a=0,$a=[];_a!==ga.length;++_a){if(ga[_a].trim()==="BOT"){$a[++ba]=[],xa=0;continue}if(!(ba<0)){var xl=ga[_a].trim().split(","),yl=xl[0],wl=xl[1];++_a;for(var _l=ga[_a]||"";(_l.match(/["]/g)||[]).length&1&&_a<ga.length-1;)_l+=`
`+ga[++_a];switch(_l=_l.trim(),+yl){case-1:if(_l==="BOT"){$a[++ba]=[],xa=0;continue}else if(_l!=="EOD")throw new Error("Unrecognized DIF special command "+_l);break;case 0:_l==="TRUE"?$a[ba][xa]=!0:_l==="FALSE"?$a[ba][xa]=!1:isNaN(fuzzynum(wl))?isNaN(fuzzydate(wl).getDate())?$a[ba][xa]=wl:$a[ba][xa]=parseDate(wl):$a[ba][xa]=fuzzynum(wl),++xa;break;case 1:_l=_l.slice(1,_l.length-1),_l=_l.replace(/""/g,'"'),_l&&_l.match(/^=".*"$/)&&(_l=_l.slice(2,-1)),$a[ba][xa++]=_l!==""?_l:null;break}if(_l==="EOD")break}}return uo&&uo.sheetRows&&($a=$a.slice(0,uo.sheetRows)),$a}function us(co,uo){return aoa_to_sheet(cs(co,uo),uo)}function hs(co,uo){return sheet_to_workbook(us(co,uo),uo)}var lo=function(){var co=function(ba,xa,_a,$a,xl){ba.push(xa),ba.push(_a+","+$a),ba.push('"'+xl.replace(/"/g,'""')+'"')},uo=function(ba,xa,_a,$a){ba.push(xa+","+_a),ba.push(xa==1?'"'+$a.replace(/"/g,'""')+'"':$a)};return function(ba){var xa=[],_a=safe_decode_range(ba["!ref"]),$a,xl=Array.isArray(ba);co(xa,"TABLE",0,1,"sheetjs"),co(xa,"VECTORS",0,_a.e.r-_a.s.r+1,""),co(xa,"TUPLES",0,_a.e.c-_a.s.c+1,""),co(xa,"DATA",0,0,"");for(var yl=_a.s.r;yl<=_a.e.r;++yl){uo(xa,-1,0,"BOT");for(var wl=_a.s.c;wl<=_a.e.c;++wl){var _l=encode_cell({r:yl,c:wl});if($a=xl?(ba[yl]||[])[wl]:ba[_l],!$a){uo(xa,1,0,"");continue}switch($a.t){case"n":var El=$a.w;!El&&$a.v!=null&&(El=$a.v),El==null?$a.f&&!$a.F?uo(xa,1,0,"="+$a.f):uo(xa,1,0,""):uo(xa,0,El,"V");break;case"b":uo(xa,0,$a.v?1:0,$a.v?"TRUE":"FALSE");break;case"s":uo(xa,1,0,isNaN($a.v)?$a.v:'="'+$a.v+'"');break;case"d":$a.w||($a.w=SSF_format($a.z||table_fmt[14],datenum(parseDate($a.v)))),uo(xa,0,$a.w,"V");break;default:uo(xa,1,0,"")}}}uo(xa,-1,0,"EOD");var Sl=`\r
`,Cl=xa.join(Sl);return Cl}}();return{to_workbook:hs,to_sheet:us,from_sheet:lo}}(),ETH=function(){function cs($a){return $a.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function is($a){return $a.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function us($a,xl){for(var yl=$a.split(`
`),wl=-1,_l=-1,El=0,Sl=[];El!==yl.length;++El){var Cl=yl[El].trim().split(":");if(Cl[0]==="cell"){var Tl=decode_cell(Cl[1]);if(Sl.length<=Tl.r)for(wl=Sl.length;wl<=Tl.r;++wl)Sl[wl]||(Sl[wl]=[]);switch(wl=Tl.r,_l=Tl.c,Cl[2]){case"t":Sl[wl][_l]=cs(Cl[3]);break;case"v":Sl[wl][_l]=+Cl[3];break;case"vtf":var Dl=Cl[Cl.length-1];case"vtc":switch(Cl[3]){case"nl":Sl[wl][_l]=!!+Cl[4];break;default:Sl[wl][_l]=+Cl[4];break}Cl[2]=="vtf"&&(Sl[wl][_l]=[Sl[wl][_l],Dl])}}}return xl&&xl.sheetRows&&(Sl=Sl.slice(0,xl.sheetRows)),Sl}function hs($a,xl){return aoa_to_sheet(us($a,xl),xl)}function lo($a,xl){return sheet_to_workbook(hs($a,xl),xl)}var co=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),uo=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,ga=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),ba="--SocialCalcSpreadsheetControlSave--";function xa($a){if(!$a||!$a["!ref"])return"";for(var xl=[],yl=[],wl,_l="",El=decode_range($a["!ref"]),Sl=Array.isArray($a),Cl=El.s.r;Cl<=El.e.r;++Cl)for(var Tl=El.s.c;Tl<=El.e.c;++Tl)if(_l=encode_cell({r:Cl,c:Tl}),wl=Sl?($a[Cl]||[])[Tl]:$a[_l],!(!wl||wl.v==null||wl.t==="z")){switch(yl=["cell",_l,"t"],wl.t){case"s":case"str":yl.push(is(wl.v));break;case"n":wl.f?(yl[2]="vtf",yl[3]="n",yl[4]=wl.v,yl[5]=is(wl.f)):(yl[2]="v",yl[3]=wl.v);break;case"b":yl[2]="vt"+(wl.f?"f":"c"),yl[3]="nl",yl[4]=wl.v?"1":"0",yl[5]=is(wl.f||(wl.v?"TRUE":"FALSE"));break;case"d":var Dl=datenum(parseDate(wl.v));yl[2]="vtc",yl[3]="nd",yl[4]=""+Dl,yl[5]=wl.w||SSF_format(wl.z||table_fmt[14],Dl);break;case"e":continue}xl.push(yl.join(":"))}return xl.push("sheet:c:"+(El.e.c-El.s.c+1)+":r:"+(El.e.r-El.s.r+1)+":tvf:1"),xl.push("valueformat:1:text-wiki"),xl.join(`
`)}function _a($a){return[co,uo,ga,uo,xa($a),ba].join(`
`)}return{to_workbook:lo,to_sheet:hs,from_sheet:_a}}(),PRN=function(){function cs(_a,$a,xl,yl,wl){wl.raw?$a[xl][yl]=_a:_a===""||(_a==="TRUE"?$a[xl][yl]=!0:_a==="FALSE"?$a[xl][yl]=!1:isNaN(fuzzynum(_a))?isNaN(fuzzydate(_a).getDate())?$a[xl][yl]=_a:$a[xl][yl]=parseDate(_a):$a[xl][yl]=fuzzynum(_a))}function is(_a,$a){var xl=$a||{},yl=[];if(!_a||_a.length===0)return yl;for(var wl=_a.split(/[\r\n]/),_l=wl.length-1;_l>=0&&wl[_l].length===0;)--_l;for(var El=10,Sl=0,Cl=0;Cl<=_l;++Cl)Sl=wl[Cl].indexOf(" "),Sl==-1?Sl=wl[Cl].length:Sl++,El=Math.max(El,Sl);for(Cl=0;Cl<=_l;++Cl){yl[Cl]=[];var Tl=0;for(cs(wl[Cl].slice(0,El).trim(),yl,Cl,Tl,xl),Tl=1;Tl<=(wl[Cl].length-El)/10+1;++Tl)cs(wl[Cl].slice(El+(Tl-1)*10,El+Tl*10).trim(),yl,Cl,Tl,xl)}return xl.sheetRows&&(yl=yl.slice(0,xl.sheetRows)),yl}var us={44:",",9:"	",59:";",124:"|"},hs={44:3,9:2,59:1,124:0};function lo(_a){for(var $a={},xl=!1,yl=0,wl=0;yl<_a.length;++yl)(wl=_a.charCodeAt(yl))==34?xl=!xl:!xl&&wl in us&&($a[wl]=($a[wl]||0)+1);wl=[];for(yl in $a)Object.prototype.hasOwnProperty.call($a,yl)&&wl.push([$a[yl],yl]);if(!wl.length){$a=hs;for(yl in $a)Object.prototype.hasOwnProperty.call($a,yl)&&wl.push([$a[yl],yl])}return wl.sort(function(_l,El){return _l[0]-El[0]||hs[_l[1]]-hs[El[1]]}),us[wl.pop()[1]]||44}function co(_a,$a){var xl=$a||{},yl="",wl=xl.dense?[]:{},_l={s:{c:0,r:0},e:{c:0,r:0}};_a.slice(0,4)=="sep="?_a.charCodeAt(5)==13&&_a.charCodeAt(6)==10?(yl=_a.charAt(4),_a=_a.slice(7)):_a.charCodeAt(5)==13||_a.charCodeAt(5)==10?(yl=_a.charAt(4),_a=_a.slice(6)):yl=lo(_a.slice(0,1024)):xl&&xl.FS?yl=xl.FS:yl=lo(_a.slice(0,1024));var El=0,Sl=0,Cl=0,Tl=0,Dl=0,Fl=yl.charCodeAt(0),Pl=!1,Al=0,Rl=_a.charCodeAt(0);_a=_a.replace(/\r\n/mg,`
`);var Il=xl.dateNF!=null?dateNF_regex(xl.dateNF):null;function Bl(){var Ol=_a.slice(Tl,Dl),zl={};if(Ol.charAt(0)=='"'&&Ol.charAt(Ol.length-1)=='"'&&(Ol=Ol.slice(1,-1).replace(/""/g,'"')),Ol.length===0)zl.t="z";else if(xl.raw)zl.t="s",zl.v=Ol;else if(Ol.trim().length===0)zl.t="s",zl.v=Ol;else if(Ol.charCodeAt(0)==61)Ol.charCodeAt(1)==34&&Ol.charCodeAt(Ol.length-1)==34?(zl.t="s",zl.v=Ol.slice(2,-1).replace(/""/g,'"')):fuzzyfmla(Ol)?(zl.t="n",zl.f=Ol.slice(1)):(zl.t="s",zl.v=Ol);else if(Ol=="TRUE")zl.t="b",zl.v=!0;else if(Ol=="FALSE")zl.t="b",zl.v=!1;else if(!isNaN(Cl=fuzzynum(Ol)))zl.t="n",xl.cellText!==!1&&(zl.w=Ol),zl.v=Cl;else if(!isNaN(fuzzydate(Ol).getDate())||Il&&Ol.match(Il)){zl.z=xl.dateNF||table_fmt[14];var Hl=0;Il&&Ol.match(Il)&&(Ol=dateNF_fix(Ol,xl.dateNF,Ol.match(Il)||[]),Hl=1),xl.cellDates?(zl.t="d",zl.v=parseDate(Ol,Hl)):(zl.t="n",zl.v=datenum(parseDate(Ol,Hl))),xl.cellText!==!1&&(zl.w=SSF_format(zl.z,zl.v instanceof Date?datenum(zl.v):zl.v)),xl.cellNF||delete zl.z}else zl.t="s",zl.v=Ol;if(zl.t=="z"||(xl.dense?(wl[El]||(wl[El]=[]),wl[El][Sl]=zl):wl[encode_cell({c:Sl,r:El})]=zl),Tl=Dl+1,Rl=_a.charCodeAt(Tl),_l.e.c<Sl&&(_l.e.c=Sl),_l.e.r<El&&(_l.e.r=El),Al==Fl)++Sl;else if(Sl=0,++El,xl.sheetRows&&xl.sheetRows<=El)return!0}e:for(;Dl<_a.length;++Dl)switch(Al=_a.charCodeAt(Dl)){case 34:Rl===34&&(Pl=!Pl);break;case Fl:case 10:case 13:if(!Pl&&Bl())break e;break}return Dl-Tl>0&&Bl(),wl["!ref"]=encode_range(_l),wl}function uo(_a,$a){return!($a&&$a.PRN)||$a.FS||_a.slice(0,4)=="sep="||_a.indexOf("	")>=0||_a.indexOf(",")>=0||_a.indexOf(";")>=0?co(_a,$a):aoa_to_sheet(is(_a,$a),$a)}function ga(_a,$a){var xl="",yl=$a.type=="string"?[0,0,0,0]:firstbyte(_a,$a);switch($a.type){case"base64":xl=Base64_decode(_a);break;case"binary":xl=_a;break;case"buffer":$a.codepage==65001?xl=_a.toString("utf8"):$a.codepage&&typeof $cptable<"u"||(xl=has_buf&&Buffer.isBuffer(_a)?_a.toString("binary"):a2s(_a));break;case"array":xl=cc2str(_a);break;case"string":xl=_a;break;default:throw new Error("Unrecognized type "+$a.type)}return yl[0]==239&&yl[1]==187&&yl[2]==191?xl=utf8read(xl.slice(3)):$a.type!="string"&&$a.type!="buffer"&&$a.codepage==65001?xl=utf8read(xl):$a.type=="binary"&&typeof $cptable<"u",xl.slice(0,19)=="socialcalc:version:"?ETH.to_sheet($a.type=="string"?xl:utf8read(xl),$a):uo(xl,$a)}function ba(_a,$a){return sheet_to_workbook(ga(_a,$a),$a)}function xa(_a){for(var $a=[],xl=safe_decode_range(_a["!ref"]),yl,wl=Array.isArray(_a),_l=xl.s.r;_l<=xl.e.r;++_l){for(var El=[],Sl=xl.s.c;Sl<=xl.e.c;++Sl){var Cl=encode_cell({r:_l,c:Sl});if(yl=wl?(_a[_l]||[])[Sl]:_a[Cl],!yl||yl.v==null){El.push("          ");continue}for(var Tl=(yl.w||(format_cell(yl),yl.w)||"").slice(0,10);Tl.length<10;)Tl+=" ";El.push(Tl+(Sl===0?" ":""))}$a.push(El.join(""))}return $a.join(`
`)}return{to_workbook:ba,to_sheet:ga,from_sheet:xa}}(),WK_=function(){function cs(Ll,Nl,Ml){if(Ll){prep_blob(Ll,Ll.l||0);for(var Ul=Ml.Enum||xu;Ll.l<Ll.length;){var Vl=Ll.read_shift(2),Ql=Ul[Vl]||Ul[65535],Jl=Ll.read_shift(2),iu=Ll.l+Jl,fu=Ql.f&&Ql.f(Ll,Jl,Ml);if(Ll.l=iu,Nl(fu,Ql,Vl))return}}}function is(Ll,Nl){switch(Nl.type){case"base64":return us(s2a(Base64_decode(Ll)),Nl);case"binary":return us(s2a(Ll),Nl);case"buffer":case"array":return us(Ll,Nl)}throw"Unsupported type "+Nl.type}function us(Ll,Nl){if(!Ll)return Ll;var Ml=Nl||{},Ul=Ml.dense?[]:{},Vl="Sheet1",Ql="",Jl=0,iu={},fu=[],_u=[],bu={s:{r:0,c:0},e:{r:0,c:0}},Cu=Ml.sheetRows||0;if(Ll[2]==0&&(Ll[3]==8||Ll[3]==9)&&Ll.length>=16&&Ll[14]==5&&Ll[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(Ll[2]==2)Ml.Enum=xu,cs(Ll,function(tu,eu,gu){switch(gu){case 0:Ml.vers=tu,tu>=4096&&(Ml.qpro=!0);break;case 6:bu=tu;break;case 204:tu&&(Ql=tu);break;case 222:Ql=tu;break;case 15:case 51:Ml.qpro||(tu[1].v=tu[1].v.slice(1));case 13:case 14:case 16:gu==14&&(tu[2]&112)==112&&(tu[2]&15)>1&&(tu[2]&15)<15&&(tu[1].z=Ml.dateNF||table_fmt[14],Ml.cellDates&&(tu[1].t="d",tu[1].v=numdate(tu[1].v))),Ml.qpro&&tu[3]>Jl&&(Ul["!ref"]=encode_range(bu),iu[Vl]=Ul,fu.push(Vl),Ul=Ml.dense?[]:{},bu={s:{r:0,c:0},e:{r:0,c:0}},Jl=tu[3],Vl=Ql||"Sheet"+(Jl+1),Ql="");var ru=Ml.dense?(Ul[tu[0].r]||[])[tu[0].c]:Ul[encode_cell(tu[0])];if(ru){ru.t=tu[1].t,ru.v=tu[1].v,tu[1].z!=null&&(ru.z=tu[1].z),tu[1].f!=null&&(ru.f=tu[1].f);break}Ml.dense?(Ul[tu[0].r]||(Ul[tu[0].r]=[]),Ul[tu[0].r][tu[0].c]=tu[1]):Ul[encode_cell(tu[0])]=tu[1];break}},Ml);else if(Ll[2]==26||Ll[2]==14)Ml.Enum=pu,Ll[2]==14&&(Ml.qpro=!0,Ll.l=0),cs(Ll,function(tu,eu,gu){switch(gu){case 204:Vl=tu;break;case 22:tu[1].v=tu[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(tu[3]>Jl&&(Ul["!ref"]=encode_range(bu),iu[Vl]=Ul,fu.push(Vl),Ul=Ml.dense?[]:{},bu={s:{r:0,c:0},e:{r:0,c:0}},Jl=tu[3],Vl="Sheet"+(Jl+1)),Cu>0&&tu[0].r>=Cu)break;Ml.dense?(Ul[tu[0].r]||(Ul[tu[0].r]=[]),Ul[tu[0].r][tu[0].c]=tu[1]):Ul[encode_cell(tu[0])]=tu[1],bu.e.c<tu[0].c&&(bu.e.c=tu[0].c),bu.e.r<tu[0].r&&(bu.e.r=tu[0].r);break;case 27:tu[14e3]&&(_u[tu[14e3][0]]=tu[14e3][1]);break;case 1537:_u[tu[0]]=tu[1],tu[0]==Jl&&(Vl=tu[1]);break}},Ml);else throw new Error("Unrecognized LOTUS BOF "+Ll[2]);if(Ul["!ref"]=encode_range(bu),iu[Ql||Vl]=Ul,fu.push(Ql||Vl),!_u.length)return{SheetNames:fu,Sheets:iu};for(var Tu={},Fu=[],ku=0;ku<_u.length;++ku)iu[fu[ku]]?(Fu.push(_u[ku]||fu[ku]),Tu[_u[ku]]=iu[_u[ku]]||iu[fu[ku]]):(Fu.push(_u[ku]),Tu[_u[ku]]={"!ref":"A1"});return{SheetNames:Fu,Sheets:Tu}}function hs(Ll,Nl){var Ml=Nl||{};if(+Ml.codepage>=0&&set_cp(+Ml.codepage),Ml.type=="string")throw new Error("Cannot write WK1 to JS string");var Ul=buf_array(),Vl=safe_decode_range(Ll["!ref"]),Ql=Array.isArray(Ll),Jl=[];write_biff_rec(Ul,0,co(1030)),write_biff_rec(Ul,6,ba(Vl));for(var iu=Math.min(Vl.e.r,8191),fu=Vl.s.r;fu<=iu;++fu)for(var _u=encode_row(fu),bu=Vl.s.c;bu<=Vl.e.c;++bu){fu===Vl.s.r&&(Jl[bu]=encode_col(bu));var Cu=Jl[bu]+_u,Tu=Ql?(Ll[fu]||[])[bu]:Ll[Cu];if(!(!Tu||Tu.t=="z"))if(Tu.t=="n")(Tu.v|0)==Tu.v&&Tu.v>=-32768&&Tu.v<=32767?write_biff_rec(Ul,13,yl(fu,bu,Tu.v)):write_biff_rec(Ul,14,_l(fu,bu,Tu.v));else{var Fu=format_cell(Tu);write_biff_rec(Ul,15,$a(fu,bu,Fu.slice(0,239)))}}return write_biff_rec(Ul,1),Ul.end()}function lo(Ll,Nl){var Ml=Nl||{};if(+Ml.codepage>=0&&set_cp(+Ml.codepage),Ml.type=="string")throw new Error("Cannot write WK3 to JS string");var Ul=buf_array();write_biff_rec(Ul,0,uo(Ll));for(var Vl=0,Ql=0;Vl<Ll.SheetNames.length;++Vl)(Ll.Sheets[Ll.SheetNames[Vl]]||{})["!ref"]&&write_biff_rec(Ul,27,Kl(Ll.SheetNames[Vl],Ql++));var Jl=0;for(Vl=0;Vl<Ll.SheetNames.length;++Vl){var iu=Ll.Sheets[Ll.SheetNames[Vl]];if(!(!iu||!iu["!ref"])){for(var fu=safe_decode_range(iu["!ref"]),_u=Array.isArray(iu),bu=[],Cu=Math.min(fu.e.r,8191),Tu=fu.s.r;Tu<=Cu;++Tu)for(var Fu=encode_row(Tu),ku=fu.s.c;ku<=fu.e.c;++ku){Tu===fu.s.r&&(bu[ku]=encode_col(ku));var tu=bu[ku]+Fu,eu=_u?(iu[Tu]||[])[ku]:iu[tu];if(!(!eu||eu.t=="z"))if(eu.t=="n")write_biff_rec(Ul,23,Bl(Tu,ku,Jl,eu.v));else{var gu=format_cell(eu);write_biff_rec(Ul,22,Al(Tu,ku,Jl,gu.slice(0,239)))}}++Jl}}return write_biff_rec(Ul,1),Ul.end()}function co(Ll){var Nl=new_buf(2);return Nl.write_shift(2,Ll),Nl}function uo(Ll){var Nl=new_buf(26);Nl.write_shift(2,4096),Nl.write_shift(2,4),Nl.write_shift(4,0);for(var Ml=0,Ul=0,Vl=0,Ql=0;Ql<Ll.SheetNames.length;++Ql){var Jl=Ll.SheetNames[Ql],iu=Ll.Sheets[Jl];if(!(!iu||!iu["!ref"])){++Vl;var fu=decode_range(iu["!ref"]);Ml<fu.e.r&&(Ml=fu.e.r),Ul<fu.e.c&&(Ul=fu.e.c)}}return Ml>8191&&(Ml=8191),Nl.write_shift(2,Ml),Nl.write_shift(1,Vl),Nl.write_shift(1,Ul),Nl.write_shift(2,0),Nl.write_shift(2,0),Nl.write_shift(1,1),Nl.write_shift(1,2),Nl.write_shift(4,0),Nl.write_shift(4,0),Nl}function ga(Ll,Nl,Ml){var Ul={s:{c:0,r:0},e:{c:0,r:0}};return Nl==8&&Ml.qpro?(Ul.s.c=Ll.read_shift(1),Ll.l++,Ul.s.r=Ll.read_shift(2),Ul.e.c=Ll.read_shift(1),Ll.l++,Ul.e.r=Ll.read_shift(2),Ul):(Ul.s.c=Ll.read_shift(2),Ul.s.r=Ll.read_shift(2),Nl==12&&Ml.qpro&&(Ll.l+=2),Ul.e.c=Ll.read_shift(2),Ul.e.r=Ll.read_shift(2),Nl==12&&Ml.qpro&&(Ll.l+=2),Ul.s.c==65535&&(Ul.s.c=Ul.e.c=Ul.s.r=Ul.e.r=0),Ul)}function ba(Ll){var Nl=new_buf(8);return Nl.write_shift(2,Ll.s.c),Nl.write_shift(2,Ll.s.r),Nl.write_shift(2,Ll.e.c),Nl.write_shift(2,Ll.e.r),Nl}function xa(Ll,Nl,Ml){var Ul=[{c:0,r:0},{t:"n",v:0},0,0];return Ml.qpro&&Ml.vers!=20768?(Ul[0].c=Ll.read_shift(1),Ul[3]=Ll.read_shift(1),Ul[0].r=Ll.read_shift(2),Ll.l+=2):(Ul[2]=Ll.read_shift(1),Ul[0].c=Ll.read_shift(2),Ul[0].r=Ll.read_shift(2)),Ul}function _a(Ll,Nl,Ml){var Ul=Ll.l+Nl,Vl=xa(Ll,Nl,Ml);if(Vl[1].t="s",Ml.vers==20768){Ll.l++;var Ql=Ll.read_shift(1);return Vl[1].v=Ll.read_shift(Ql,"utf8"),Vl}return Ml.qpro&&Ll.l++,Vl[1].v=Ll.read_shift(Ul-Ll.l,"cstr"),Vl}function $a(Ll,Nl,Ml){var Ul=new_buf(7+Ml.length);Ul.write_shift(1,255),Ul.write_shift(2,Nl),Ul.write_shift(2,Ll),Ul.write_shift(1,39);for(var Vl=0;Vl<Ul.length;++Vl){var Ql=Ml.charCodeAt(Vl);Ul.write_shift(1,Ql>=128?95:Ql)}return Ul.write_shift(1,0),Ul}function xl(Ll,Nl,Ml){var Ul=xa(Ll,Nl,Ml);return Ul[1].v=Ll.read_shift(2,"i"),Ul}function yl(Ll,Nl,Ml){var Ul=new_buf(7);return Ul.write_shift(1,255),Ul.write_shift(2,Nl),Ul.write_shift(2,Ll),Ul.write_shift(2,Ml,"i"),Ul}function wl(Ll,Nl,Ml){var Ul=xa(Ll,Nl,Ml);return Ul[1].v=Ll.read_shift(8,"f"),Ul}function _l(Ll,Nl,Ml){var Ul=new_buf(13);return Ul.write_shift(1,255),Ul.write_shift(2,Nl),Ul.write_shift(2,Ll),Ul.write_shift(8,Ml,"f"),Ul}function El(Ll,Nl,Ml){var Ul=Ll.l+Nl,Vl=xa(Ll,Nl,Ml);if(Vl[1].v=Ll.read_shift(8,"f"),Ml.qpro)Ll.l=Ul;else{var Ql=Ll.read_shift(2);Dl(Ll.slice(Ll.l,Ll.l+Ql),Vl),Ll.l+=Ql}return Vl}function Sl(Ll,Nl,Ml){var Ul=Nl&32768;return Nl&=-32769,Nl=(Ul?Ll:0)+(Nl>=8192?Nl-16384:Nl),(Ul?"":"$")+(Ml?encode_col(Nl):encode_row(Nl))}var Cl={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},Tl=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function Dl(Ll,Nl){prep_blob(Ll,0);for(var Ml=[],Ul=0,Vl="",Ql="",Jl="",iu="";Ll.l<Ll.length;){var fu=Ll[Ll.l++];switch(fu){case 0:Ml.push(Ll.read_shift(8,"f"));break;case 1:Ql=Sl(Nl[0].c,Ll.read_shift(2),!0),Vl=Sl(Nl[0].r,Ll.read_shift(2),!1),Ml.push(Ql+Vl);break;case 2:{var _u=Sl(Nl[0].c,Ll.read_shift(2),!0),bu=Sl(Nl[0].r,Ll.read_shift(2),!1);Ql=Sl(Nl[0].c,Ll.read_shift(2),!0),Vl=Sl(Nl[0].r,Ll.read_shift(2),!1),Ml.push(_u+bu+":"+Ql+Vl)}break;case 3:if(Ll.l<Ll.length){console.error("WK1 premature formula end");return}break;case 4:Ml.push("("+Ml.pop()+")");break;case 5:Ml.push(Ll.read_shift(2));break;case 6:{for(var Cu="";fu=Ll[Ll.l++];)Cu+=String.fromCharCode(fu);Ml.push('"'+Cu.replace(/"/g,'""')+'"')}break;case 8:Ml.push("-"+Ml.pop());break;case 23:Ml.push("+"+Ml.pop());break;case 22:Ml.push("NOT("+Ml.pop()+")");break;case 20:case 21:iu=Ml.pop(),Jl=Ml.pop(),Ml.push(["AND","OR"][fu-20]+"("+Jl+","+iu+")");break;default:if(fu<32&&Tl[fu])iu=Ml.pop(),Jl=Ml.pop(),Ml.push(Jl+Tl[fu]+iu);else if(Cl[fu]){if(Ul=Cl[fu][1],Ul==69&&(Ul=Ll[Ll.l++]),Ul>Ml.length){console.error("WK1 bad formula parse 0x"+fu.toString(16)+":|"+Ml.join("|")+"|");return}var Tu=Ml.slice(-Ul);Ml.length-=Ul,Ml.push(Cl[fu][0]+"("+Tu.join(",")+")")}else return fu<=7?console.error("WK1 invalid opcode "+fu.toString(16)):fu<=24?console.error("WK1 unsupported op "+fu.toString(16)):fu<=30?console.error("WK1 invalid opcode "+fu.toString(16)):fu<=115?console.error("WK1 unsupported function opcode "+fu.toString(16)):console.error("WK1 unrecognized opcode "+fu.toString(16))}}Ml.length==1?Nl[1].f=""+Ml[0]:console.error("WK1 bad formula parse |"+Ml.join("|")+"|")}function Fl(Ll){var Nl=[{c:0,r:0},{t:"n",v:0},0];return Nl[0].r=Ll.read_shift(2),Nl[3]=Ll[Ll.l++],Nl[0].c=Ll[Ll.l++],Nl}function Pl(Ll,Nl){var Ml=Fl(Ll);return Ml[1].t="s",Ml[1].v=Ll.read_shift(Nl-4,"cstr"),Ml}function Al(Ll,Nl,Ml,Ul){var Vl=new_buf(6+Ul.length);Vl.write_shift(2,Ll),Vl.write_shift(1,Ml),Vl.write_shift(1,Nl),Vl.write_shift(1,39);for(var Ql=0;Ql<Ul.length;++Ql){var Jl=Ul.charCodeAt(Ql);Vl.write_shift(1,Jl>=128?95:Jl)}return Vl.write_shift(1,0),Vl}function Rl(Ll,Nl){var Ml=Fl(Ll);Ml[1].v=Ll.read_shift(2);var Ul=Ml[1].v>>1;if(Ml[1].v&1)switch(Ul&7){case 0:Ul=(Ul>>3)*5e3;break;case 1:Ul=(Ul>>3)*500;break;case 2:Ul=(Ul>>3)/20;break;case 3:Ul=(Ul>>3)/200;break;case 4:Ul=(Ul>>3)/2e3;break;case 5:Ul=(Ul>>3)/2e4;break;case 6:Ul=(Ul>>3)/16;break;case 7:Ul=(Ul>>3)/64;break}return Ml[1].v=Ul,Ml}function Il(Ll,Nl){var Ml=Fl(Ll),Ul=Ll.read_shift(4),Vl=Ll.read_shift(4),Ql=Ll.read_shift(2);if(Ql==65535)return Ul===0&&Vl===3221225472?(Ml[1].t="e",Ml[1].v=15):Ul===0&&Vl===3489660928?(Ml[1].t="e",Ml[1].v=42):Ml[1].v=0,Ml;var Jl=Ql&32768;return Ql=(Ql&32767)-16446,Ml[1].v=(1-Jl*2)*(Vl*Math.pow(2,Ql+32)+Ul*Math.pow(2,Ql)),Ml}function Bl(Ll,Nl,Ml,Ul){var Vl=new_buf(14);if(Vl.write_shift(2,Ll),Vl.write_shift(1,Ml),Vl.write_shift(1,Nl),Ul==0)return Vl.write_shift(4,0),Vl.write_shift(4,0),Vl.write_shift(2,65535),Vl;var Ql=0,Jl=0,iu=0,fu=0;return Ul<0&&(Ql=1,Ul=-Ul),Jl=Math.log2(Ul)|0,Ul/=Math.pow(2,Jl-31),fu=Ul>>>0,fu&2147483648||(Ul/=2,++Jl,fu=Ul>>>0),Ul-=fu,fu|=2147483648,fu>>>=0,Ul*=Math.pow(2,32),iu=Ul>>>0,Vl.write_shift(4,iu),Vl.write_shift(4,fu),Jl+=16383+(Ql?32768:0),Vl.write_shift(2,Jl),Vl}function Ol(Ll,Nl){var Ml=Il(Ll);return Ll.l+=Nl-14,Ml}function zl(Ll,Nl){var Ml=Fl(Ll),Ul=Ll.read_shift(4);return Ml[1].v=Ul>>6,Ml}function Hl(Ll,Nl){var Ml=Fl(Ll),Ul=Ll.read_shift(8,"f");return Ml[1].v=Ul,Ml}function ou(Ll,Nl){var Ml=Hl(Ll);return Ll.l+=Nl-10,Ml}function au(Ll,Nl){return Ll[Ll.l+Nl-1]==0?Ll.read_shift(Nl,"cstr"):""}function _c(Ll,Nl){var Ml=Ll[Ll.l++];Ml>Nl-1&&(Ml=Nl-1);for(var Ul="";Ul.length<Ml;)Ul+=String.fromCharCode(Ll[Ll.l++]);return Ul}function uu(Ll,Nl,Ml){if(!(!Ml.qpro||Nl<21)){var Ul=Ll.read_shift(1);Ll.l+=17,Ll.l+=1,Ll.l+=2;var Vl=Ll.read_shift(Nl-21,"cstr");return[Ul,Vl]}}function lu(Ll,Nl){for(var Ml={},Ul=Ll.l+Nl;Ll.l<Ul;){var Vl=Ll.read_shift(2);if(Vl==14e3){for(Ml[Vl]=[0,""],Ml[Vl][0]=Ll.read_shift(2);Ll[Ll.l];)Ml[Vl][1]+=String.fromCharCode(Ll[Ll.l]),Ll.l++;Ll.l++}}return Ml}function Kl(Ll,Nl){var Ml=new_buf(5+Ll.length);Ml.write_shift(2,14e3),Ml.write_shift(2,Nl);for(var Ul=0;Ul<Ll.length;++Ul){var Vl=Ll.charCodeAt(Ul);Ml[Ml.l++]=Vl>127?95:Vl}return Ml[Ml.l++]=0,Ml}var xu={0:{n:"BOF",f:parseuint16},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:ga},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:xl},14:{n:"NUMBER",f:wl},15:{n:"LABEL",f:_a},16:{n:"FORMULA",f:El},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:_a},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:au},222:{n:"SHEETNAMELP",f:_c},65535:{n:""}},pu={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:Pl},23:{n:"NUMBER17",f:Il},24:{n:"NUMBER18",f:Rl},25:{n:"FORMULA19",f:Ol},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:lu},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:zl},38:{n:"??"},39:{n:"NUMBER27",f:Hl},40:{n:"FORMULA28",f:ou},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:au},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:uu},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:hs,book_to_wk3:lo,to_workbook:is}}(),straywsregex=/^\s|\s$|[\t\n\r]/;function write_sst_xml(cs,is){if(!is.bookSST)return"";var us=[XML_HEADER];us[us.length]=writextag("sst",null,{xmlns:XMLNS_main[0],count:cs.Count,uniqueCount:cs.Unique});for(var hs=0;hs!=cs.length;++hs)if(cs[hs]!=null){var lo=cs[hs],co="<si>";lo.r?co+=lo.r:(co+="<t",lo.t||(lo.t=""),lo.t.match(straywsregex)&&(co+=' xml:space="preserve"'),co+=">"+escapexml(lo.t)+"</t>"),co+="</si>",us[us.length]=co}return us.length>2&&(us[us.length]="</sst>",us[1]=us[1].replace("/>",">")),us.join("")}function parse_BrtBeginSst(cs){return[cs.read_shift(4),cs.read_shift(4)]}function write_BrtBeginSst(cs,is){return is||(is=new_buf(8)),is.write_shift(4,cs.Count),is.write_shift(4,cs.Unique),is}var write_BrtSSTItem=write_RichStr;function write_sst_bin(cs){var is=buf_array();write_record(is,159,write_BrtBeginSst(cs));for(var us=0;us<cs.length;++us)write_record(is,19,write_BrtSSTItem(cs[us]));return write_record(is,160),is.end()}function _JS2ANSI(cs){for(var is=[],us=cs.split(""),hs=0;hs<us.length;++hs)is[hs]=us[hs].charCodeAt(0);return is}function crypto_CreatePasswordVerifier_Method1(cs){var is=0,us,hs=_JS2ANSI(cs),lo=hs.length+1,co,uo,ga,ba,xa;for(us=new_raw_buf(lo),us[0]=hs.length,co=1;co!=lo;++co)us[co]=hs[co-1];for(co=lo-1;co>=0;--co)uo=us[co],ga=is&16384?1:0,ba=is<<1&32767,xa=ga|ba,is=xa^uo;return is^52811}var RTF=function(){function cs(lo,co){switch(co.type){case"base64":return is(Base64_decode(lo),co);case"binary":return is(lo,co);case"buffer":return is(has_buf&&Buffer.isBuffer(lo)?lo.toString("binary"):a2s(lo),co);case"array":return is(cc2str(lo),co)}throw new Error("Unrecognized type "+co.type)}function is(lo,co){var uo=co||{},ga=uo.dense?[]:{},ba=lo.match(/\\trowd.*?\\row\b/g);if(!ba.length)throw new Error("RTF missing table");var xa={s:{c:0,r:0},e:{c:0,r:ba.length-1}};return ba.forEach(function(_a,$a){Array.isArray(ga)&&(ga[$a]=[]);for(var xl=/\\\w+\b/g,yl=0,wl,_l=-1;wl=xl.exec(_a);){switch(wl[0]){case"\\cell":var El=_a.slice(yl,xl.lastIndex-wl[0].length);if(El[0]==" "&&(El=El.slice(1)),++_l,El.length){var Sl={v:El,t:"s"};Array.isArray(ga)?ga[$a][_l]=Sl:ga[encode_cell({r:$a,c:_l})]=Sl}break}yl=xl.lastIndex}_l>xa.e.c&&(xa.e.c=_l)}),ga["!ref"]=encode_range(xa),ga}function us(lo,co){return sheet_to_workbook(cs(lo,co),co)}function hs(lo){for(var co=["{\\rtf1\\ansi"],uo=safe_decode_range(lo["!ref"]),ga,ba=Array.isArray(lo),xa=uo.s.r;xa<=uo.e.r;++xa){co.push("\\trowd\\trautofit1");for(var _a=uo.s.c;_a<=uo.e.c;++_a)co.push("\\cellx"+(_a+1));for(co.push("\\pard\\intbl"),_a=uo.s.c;_a<=uo.e.c;++_a){var $a=encode_cell({r:xa,c:_a});ga=ba?(lo[xa]||[])[_a]:lo[$a],!(!ga||ga.v==null&&(!ga.f||ga.F))&&(co.push(" "+(ga.w||(format_cell(ga),ga.w))),co.push("\\cell"))}co.push("\\pard\\intbl\\row")}return co.join("")+"}"}return{to_workbook:us,to_sheet:cs,from_sheet:hs}}();function rgb2Hex(cs){for(var is=0,us=1;is!=3;++is)us=us*256+(cs[is]>255?255:cs[is]<0?0:cs[is]);return us.toString(16).toUpperCase().slice(1)}var DEF_MDW=6,MDW=DEF_MDW;function width2px(cs){return Math.floor((cs+Math.round(128/MDW)/256)*MDW)}function px2char(cs){return Math.floor((cs-5)/MDW*100+.5)/100}function char2width(cs){return Math.round((cs*MDW+5)/MDW*256)/256}function process_col(cs){cs.width?(cs.wpx=width2px(cs.width),cs.wch=px2char(cs.wpx),cs.MDW=MDW):cs.wpx?(cs.wch=px2char(cs.wpx),cs.width=char2width(cs.wch),cs.MDW=MDW):typeof cs.wch=="number"&&(cs.width=char2width(cs.wch),cs.wpx=width2px(cs.width),cs.MDW=MDW),cs.customWidth&&delete cs.customWidth}var DEF_PPI=96,PPI=DEF_PPI;function px2pt(cs){return cs*96/PPI}function pt2px(cs){return cs*PPI/96}function write_numFmts(cs){var is=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(us){for(var hs=us[0];hs<=us[1];++hs)cs[hs]!=null&&(is[is.length]=writextag("numFmt",null,{numFmtId:hs,formatCode:escapexml(cs[hs])}))}),is.length===1?"":(is[is.length]="</numFmts>",is[0]=writextag("numFmts",null,{count:is.length-2}).replace("/>",">"),is.join(""))}function write_cellXfs(cs){var is=[];return is[is.length]=writextag("cellXfs",null),cs.forEach(function(us){is[is.length]=writextag("xf",null,us)}),is[is.length]="</cellXfs>",is.length===2?"":(is[0]=writextag("cellXfs",null,{count:is.length-2}).replace("/>",">"),is.join(""))}function write_sty_xml(cs,is){var us=[XML_HEADER,writextag("styleSheet",null,{xmlns:XMLNS_main[0],"xmlns:vt":XMLNS.vt})],hs;return cs.SSF&&(hs=write_numFmts(cs.SSF))!=null&&(us[us.length]=hs),us[us.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',us[us.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',us[us.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',us[us.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(hs=write_cellXfs(is.cellXfs))&&(us[us.length]=hs),us[us.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',us[us.length]='<dxfs count="0"/>',us[us.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',us.length>2&&(us[us.length]="</styleSheet>",us[1]=us[1].replace("/>",">")),us.join("")}function parse_BrtFmt(cs,is){var us=cs.read_shift(2),hs=parse_XLWideString(cs);return[us,hs]}function write_BrtFmt(cs,is,us){us||(us=new_buf(6+4*is.length)),us.write_shift(2,cs),write_XLWideString(is,us);var hs=us.length>us.l?us.slice(0,us.l):us;return us.l==null&&(us.l=us.length),hs}function parse_BrtFont(cs,is,us){var hs={};hs.sz=cs.read_shift(2)/20;var lo=parse_FontFlags(cs);lo.fItalic&&(hs.italic=1),lo.fCondense&&(hs.condense=1),lo.fExtend&&(hs.extend=1),lo.fShadow&&(hs.shadow=1),lo.fOutline&&(hs.outline=1),lo.fStrikeout&&(hs.strike=1);var co=cs.read_shift(2);switch(co===700&&(hs.bold=1),cs.read_shift(2)){case 1:hs.vertAlign="superscript";break;case 2:hs.vertAlign="subscript";break}var uo=cs.read_shift(1);uo!=0&&(hs.underline=uo);var ga=cs.read_shift(1);ga>0&&(hs.family=ga);var ba=cs.read_shift(1);switch(ba>0&&(hs.charset=ba),cs.l++,hs.color=parse_BrtColor(cs),cs.read_shift(1)){case 1:hs.scheme="major";break;case 2:hs.scheme="minor";break}return hs.name=parse_XLWideString(cs),hs}function write_BrtFont(cs,is){is||(is=new_buf(25+4*32)),is.write_shift(2,cs.sz*20),write_FontFlags(cs,is),is.write_shift(2,cs.bold?700:400);var us=0;cs.vertAlign=="superscript"?us=1:cs.vertAlign=="subscript"&&(us=2),is.write_shift(2,us),is.write_shift(1,cs.underline||0),is.write_shift(1,cs.family||0),is.write_shift(1,cs.charset||0),is.write_shift(1,0),write_BrtColor(cs.color,is);var hs=0;return hs=2,is.write_shift(1,hs),write_XLWideString(cs.name,is),is.length>is.l?is.slice(0,is.l):is}var XLSBFillPTNames=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],rev_XLSBFillPTNames,parse_BrtFill=parsenoop;function write_BrtFill(cs,is){is||(is=new_buf(4*3+8*7+16*1)),rev_XLSBFillPTNames||(rev_XLSBFillPTNames=evert(XLSBFillPTNames));var us=rev_XLSBFillPTNames[cs.patternType];us==null&&(us=40),is.write_shift(4,us);var hs=0;if(us!=40)for(write_BrtColor({auto:1},is),write_BrtColor({auto:1},is);hs<12;++hs)is.write_shift(4,0);else{for(;hs<4;++hs)is.write_shift(4,0);for(;hs<12;++hs)is.write_shift(4,0)}return is.length>is.l?is.slice(0,is.l):is}function parse_BrtXF(cs,is){var us=cs.l+is,hs=cs.read_shift(2),lo=cs.read_shift(2);return cs.l=us,{ixfe:hs,numFmtId:lo}}function write_BrtXF(cs,is,us){us||(us=new_buf(16)),us.write_shift(2,is||0),us.write_shift(2,cs.numFmtId||0),us.write_shift(2,0),us.write_shift(2,0),us.write_shift(2,0),us.write_shift(1,0),us.write_shift(1,0);var hs=0;return us.write_shift(1,hs),us.write_shift(1,0),us.write_shift(1,0),us.write_shift(1,0),us}function write_Blxf(cs,is){return is||(is=new_buf(10)),is.write_shift(1,0),is.write_shift(1,0),is.write_shift(4,0),is.write_shift(4,0),is}var parse_BrtBorder=parsenoop;function write_BrtBorder(cs,is){return is||(is=new_buf(51)),is.write_shift(1,0),write_Blxf(null,is),write_Blxf(null,is),write_Blxf(null,is),write_Blxf(null,is),write_Blxf(null,is),is.length>is.l?is.slice(0,is.l):is}function write_BrtStyle(cs,is){return is||(is=new_buf(12+4*10)),is.write_shift(4,cs.xfId),is.write_shift(2,1),is.write_shift(1,0),is.write_shift(1,0),write_XLNullableWideString(cs.name||"",is),is.length>is.l?is.slice(0,is.l):is}function write_BrtBeginTableStyles(cs,is,us){var hs=new_buf(2052);return hs.write_shift(4,cs),write_XLNullableWideString(is,hs),write_XLNullableWideString(us,hs),hs.length>hs.l?hs.slice(0,hs.l):hs}function write_FMTS_bin(cs,is){if(is){var us=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(hs){for(var lo=hs[0];lo<=hs[1];++lo)is[lo]!=null&&++us}),us!=0&&(write_record(cs,615,write_UInt32LE(us)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(hs){for(var lo=hs[0];lo<=hs[1];++lo)is[lo]!=null&&write_record(cs,44,write_BrtFmt(lo,is[lo]))}),write_record(cs,616))}}function write_FONTS_bin(cs){var is=1;write_record(cs,611,write_UInt32LE(is)),write_record(cs,43,write_BrtFont({sz:12,color:{theme:1},name:"Calibri",family:2})),write_record(cs,612)}function write_FILLS_bin(cs){var is=2;write_record(cs,603,write_UInt32LE(is)),write_record(cs,45,write_BrtFill({patternType:"none"})),write_record(cs,45,write_BrtFill({patternType:"gray125"})),write_record(cs,604)}function write_BORDERS_bin(cs){var is=1;write_record(cs,613,write_UInt32LE(is)),write_record(cs,46,write_BrtBorder()),write_record(cs,614)}function write_CELLSTYLEXFS_bin(cs){var is=1;write_record(cs,626,write_UInt32LE(is)),write_record(cs,47,write_BrtXF({numFmtId:0},65535)),write_record(cs,627)}function write_CELLXFS_bin(cs,is){write_record(cs,617,write_UInt32LE(is.length)),is.forEach(function(us){write_record(cs,47,write_BrtXF(us,0))}),write_record(cs,618)}function write_STYLES_bin(cs){var is=1;write_record(cs,619,write_UInt32LE(is)),write_record(cs,48,write_BrtStyle({xfId:0,name:"Normal"})),write_record(cs,620)}function write_DXFS_bin(cs){var is=0;write_record(cs,505,write_UInt32LE(is)),write_record(cs,506)}function write_TABLESTYLES_bin(cs){var is=0;write_record(cs,508,write_BrtBeginTableStyles(is,"TableStyleMedium9","PivotStyleMedium4")),write_record(cs,509)}function write_sty_bin(cs,is){var us=buf_array();return write_record(us,278),write_FMTS_bin(us,cs.SSF),write_FONTS_bin(us),write_FILLS_bin(us),write_BORDERS_bin(us),write_CELLSTYLEXFS_bin(us),write_CELLXFS_bin(us,is.cellXfs),write_STYLES_bin(us),write_DXFS_bin(us),write_TABLESTYLES_bin(us),write_record(us,279),us.end()}function write_theme(cs,is){if(is&&is.themeXLSX)return is.themeXLSX;if(cs&&typeof cs.raw=="string")return cs.raw;var us=[XML_HEADER];return us[us.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',us[us.length]="<a:themeElements>",us[us.length]='<a:clrScheme name="Office">',us[us.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',us[us.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',us[us.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',us[us.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',us[us.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',us[us.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',us[us.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',us[us.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',us[us.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',us[us.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',us[us.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',us[us.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',us[us.length]="</a:clrScheme>",us[us.length]='<a:fontScheme name="Office">',us[us.length]="<a:majorFont>",us[us.length]='<a:latin typeface="Cambria"/>',us[us.length]='<a:ea typeface=""/>',us[us.length]='<a:cs typeface=""/>',us[us.length]='<a:font script="Jpan" typeface=" "/>',us[us.length]='<a:font script="Hang" typeface=" "/>',us[us.length]='<a:font script="Hans" typeface=""/>',us[us.length]='<a:font script="Hant" typeface=""/>',us[us.length]='<a:font script="Arab" typeface="Times New Roman"/>',us[us.length]='<a:font script="Hebr" typeface="Times New Roman"/>',us[us.length]='<a:font script="Thai" typeface="Tahoma"/>',us[us.length]='<a:font script="Ethi" typeface="Nyala"/>',us[us.length]='<a:font script="Beng" typeface="Vrinda"/>',us[us.length]='<a:font script="Gujr" typeface="Shruti"/>',us[us.length]='<a:font script="Khmr" typeface="MoolBoran"/>',us[us.length]='<a:font script="Knda" typeface="Tunga"/>',us[us.length]='<a:font script="Guru" typeface="Raavi"/>',us[us.length]='<a:font script="Cans" typeface="Euphemia"/>',us[us.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',us[us.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',us[us.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',us[us.length]='<a:font script="Thaa" typeface="MV Boli"/>',us[us.length]='<a:font script="Deva" typeface="Mangal"/>',us[us.length]='<a:font script="Telu" typeface="Gautami"/>',us[us.length]='<a:font script="Taml" typeface="Latha"/>',us[us.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',us[us.length]='<a:font script="Orya" typeface="Kalinga"/>',us[us.length]='<a:font script="Mlym" typeface="Kartika"/>',us[us.length]='<a:font script="Laoo" typeface="DokChampa"/>',us[us.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',us[us.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',us[us.length]='<a:font script="Viet" typeface="Times New Roman"/>',us[us.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',us[us.length]='<a:font script="Geor" typeface="Sylfaen"/>',us[us.length]="</a:majorFont>",us[us.length]="<a:minorFont>",us[us.length]='<a:latin typeface="Calibri"/>',us[us.length]='<a:ea typeface=""/>',us[us.length]='<a:cs typeface=""/>',us[us.length]='<a:font script="Jpan" typeface=" "/>',us[us.length]='<a:font script="Hang" typeface=" "/>',us[us.length]='<a:font script="Hans" typeface=""/>',us[us.length]='<a:font script="Hant" typeface=""/>',us[us.length]='<a:font script="Arab" typeface="Arial"/>',us[us.length]='<a:font script="Hebr" typeface="Arial"/>',us[us.length]='<a:font script="Thai" typeface="Tahoma"/>',us[us.length]='<a:font script="Ethi" typeface="Nyala"/>',us[us.length]='<a:font script="Beng" typeface="Vrinda"/>',us[us.length]='<a:font script="Gujr" typeface="Shruti"/>',us[us.length]='<a:font script="Khmr" typeface="DaunPenh"/>',us[us.length]='<a:font script="Knda" typeface="Tunga"/>',us[us.length]='<a:font script="Guru" typeface="Raavi"/>',us[us.length]='<a:font script="Cans" typeface="Euphemia"/>',us[us.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',us[us.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',us[us.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',us[us.length]='<a:font script="Thaa" typeface="MV Boli"/>',us[us.length]='<a:font script="Deva" typeface="Mangal"/>',us[us.length]='<a:font script="Telu" typeface="Gautami"/>',us[us.length]='<a:font script="Taml" typeface="Latha"/>',us[us.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',us[us.length]='<a:font script="Orya" typeface="Kalinga"/>',us[us.length]='<a:font script="Mlym" typeface="Kartika"/>',us[us.length]='<a:font script="Laoo" typeface="DokChampa"/>',us[us.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',us[us.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',us[us.length]='<a:font script="Viet" typeface="Arial"/>',us[us.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',us[us.length]='<a:font script="Geor" typeface="Sylfaen"/>',us[us.length]="</a:minorFont>",us[us.length]="</a:fontScheme>",us[us.length]='<a:fmtScheme name="Office">',us[us.length]="<a:fillStyleLst>",us[us.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',us[us.length]='<a:gradFill rotWithShape="1">',us[us.length]="<a:gsLst>",us[us.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',us[us.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',us[us.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',us[us.length]="</a:gsLst>",us[us.length]='<a:lin ang="16200000" scaled="1"/>',us[us.length]="</a:gradFill>",us[us.length]='<a:gradFill rotWithShape="1">',us[us.length]="<a:gsLst>",us[us.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',us[us.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',us[us.length]="</a:gsLst>",us[us.length]='<a:lin ang="16200000" scaled="0"/>',us[us.length]="</a:gradFill>",us[us.length]="</a:fillStyleLst>",us[us.length]="<a:lnStyleLst>",us[us.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',us[us.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',us[us.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',us[us.length]="</a:lnStyleLst>",us[us.length]="<a:effectStyleLst>",us[us.length]="<a:effectStyle>",us[us.length]="<a:effectLst>",us[us.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',us[us.length]="</a:effectLst>",us[us.length]="</a:effectStyle>",us[us.length]="<a:effectStyle>",us[us.length]="<a:effectLst>",us[us.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',us[us.length]="</a:effectLst>",us[us.length]="</a:effectStyle>",us[us.length]="<a:effectStyle>",us[us.length]="<a:effectLst>",us[us.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',us[us.length]="</a:effectLst>",us[us.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',us[us.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',us[us.length]="</a:effectStyle>",us[us.length]="</a:effectStyleLst>",us[us.length]="<a:bgFillStyleLst>",us[us.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',us[us.length]='<a:gradFill rotWithShape="1">',us[us.length]="<a:gsLst>",us[us.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',us[us.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',us[us.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',us[us.length]="</a:gsLst>",us[us.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',us[us.length]="</a:gradFill>",us[us.length]='<a:gradFill rotWithShape="1">',us[us.length]="<a:gsLst>",us[us.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',us[us.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',us[us.length]="</a:gsLst>",us[us.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',us[us.length]="</a:gradFill>",us[us.length]="</a:bgFillStyleLst>",us[us.length]="</a:fmtScheme>",us[us.length]="</a:themeElements>",us[us.length]="<a:objectDefaults>",us[us.length]="<a:spDef>",us[us.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',us[us.length]="</a:spDef>",us[us.length]="<a:lnDef>",us[us.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',us[us.length]="</a:lnDef>",us[us.length]="</a:objectDefaults>",us[us.length]="<a:extraClrSchemeLst/>",us[us.length]="</a:theme>",us.join("")}function parse_BrtMdtinfo(cs,is){return{flags:cs.read_shift(4),version:cs.read_shift(4),name:parse_XLWideString(cs)}}function write_BrtMdtinfo(cs){var is=new_buf(12+2*cs.name.length);return is.write_shift(4,cs.flags),is.write_shift(4,cs.version),write_XLWideString(cs.name,is),is.slice(0,is.l)}function parse_BrtMdb(cs){for(var is=[],us=cs.read_shift(4);us-- >0;)is.push([cs.read_shift(4),cs.read_shift(4)]);return is}function write_BrtMdb(cs){var is=new_buf(4+8*cs.length);is.write_shift(4,cs.length);for(var us=0;us<cs.length;++us)is.write_shift(4,cs[us][0]),is.write_shift(4,cs[us][1]);return is}function write_BrtBeginEsfmd(cs,is){var us=new_buf(8+2*is.length);return us.write_shift(4,cs),write_XLWideString(is,us),us.slice(0,us.l)}function parse_BrtBeginEsmdb(cs){return cs.l+=4,cs.read_shift(4)!=0}function write_BrtBeginEsmdb(cs,is){var us=new_buf(8);return us.write_shift(4,cs),us.write_shift(4,1),us}function write_xlmeta_bin(){var cs=buf_array();return write_record(cs,332),write_record(cs,334,write_UInt32LE(1)),write_record(cs,335,write_BrtMdtinfo({name:"XLDAPR",version:12e4,flags:3496657072})),write_record(cs,336),write_record(cs,339,write_BrtBeginEsfmd(1,"XLDAPR")),write_record(cs,52),write_record(cs,35,write_UInt32LE(514)),write_record(cs,4096,write_UInt32LE(0)),write_record(cs,4097,writeuint16(1)),write_record(cs,36),write_record(cs,53),write_record(cs,340),write_record(cs,337,write_BrtBeginEsmdb(1)),write_record(cs,51,write_BrtMdb([[1,0]])),write_record(cs,338),write_record(cs,333),cs.end()}function write_xlmeta_xml(){var cs=[XML_HEADER];return cs.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),cs.join("")}function parse_BrtCalcChainItem$(cs){var is={};is.i=cs.read_shift(4);var us={};us.r=cs.read_shift(4),us.c=cs.read_shift(4),is.r=encode_cell(us);var hs=cs.read_shift(1);return hs&2&&(is.l="1"),hs&8&&(is.a="1"),is}var _shapeid=1024;function write_comments_vml(cs,is){for(var us=[21600,21600],hs=["m0,0l0",us[1],us[0],us[1],us[0],"0xe"].join(","),lo=[writextag("xml",null,{"xmlns:v":XLMLNS.v,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:mv":XLMLNS.mv}).replace(/\/>/,">"),writextag("o:shapelayout",writextag("o:idmap",null,{"v:ext":"edit",data:cs}),{"v:ext":"edit"}),writextag("v:shapetype",[writextag("v:stroke",null,{joinstyle:"miter"}),writextag("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:us.join(","),path:hs})];_shapeid<cs*1e3;)_shapeid+=1e3;return is.forEach(function(co){var uo=decode_cell(co[0]),ga={color2:"#BEFF82",type:"gradient"};ga.type=="gradient"&&(ga.angle="-180");var ba=ga.type=="gradient"?writextag("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,xa=writextag("v:fill",ba,ga),_a={on:"t",obscured:"t"};++_shapeid,lo=lo.concat(["<v:shape"+wxt_helper({id:"_x0000_s"+_shapeid,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(co[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",xa,writextag("v:shadow",null,_a),writextag("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",writetag("x:Anchor",[uo.c+1,0,uo.r+1,0,uo.c+3,20,uo.r+5,20].join(",")),writetag("x:AutoFill","False"),writetag("x:Row",String(uo.r)),writetag("x:Column",String(uo.c)),co[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),lo.push("</xml>"),lo.join("")}function write_comments_xml(cs){var is=[XML_HEADER,writextag("comments",null,{xmlns:XMLNS_main[0]})],us=[];return is.push("<authors>"),cs.forEach(function(hs){hs[1].forEach(function(lo){var co=escapexml(lo.a);us.indexOf(co)==-1&&(us.push(co),is.push("<author>"+co+"</author>")),lo.T&&lo.ID&&us.indexOf("tc="+lo.ID)==-1&&(us.push("tc="+lo.ID),is.push("<author>tc="+lo.ID+"</author>"))})}),us.length==0&&(us.push("SheetJ5"),is.push("<author>SheetJ5</author>")),is.push("</authors>"),is.push("<commentList>"),cs.forEach(function(hs){var lo=0,co=[];if(hs[1][0]&&hs[1][0].T&&hs[1][0].ID?lo=us.indexOf("tc="+hs[1][0].ID):hs[1].forEach(function(ba){ba.a&&(lo=us.indexOf(escapexml(ba.a))),co.push(ba.t||"")}),is.push('<comment ref="'+hs[0]+'" authorId="'+lo+'"><text>'),co.length<=1)is.push(writetag("t",escapexml(co[0]||"")));else{for(var uo=`Comment:
    `+co[0]+`
`,ga=1;ga<co.length;++ga)uo+=`Reply:
    `+co[ga]+`
`;is.push(writetag("t",escapexml(uo)))}is.push("</text></comment>")}),is.push("</commentList>"),is.length>2&&(is[is.length]="</comments>",is[1]=is[1].replace("/>",">")),is.join("")}function write_tcmnt_xml(cs,is,us){var hs=[XML_HEADER,writextag("ThreadedComments",null,{xmlns:XMLNS.TCMNT}).replace(/[\/]>/,">")];return cs.forEach(function(lo){var co="";(lo[1]||[]).forEach(function(uo,ga){if(!uo.T){delete uo.ID;return}uo.a&&is.indexOf(uo.a)==-1&&is.push(uo.a);var ba={ref:lo[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+us.tcid++).slice(-12)+"}"};ga==0?co=ba.id:ba.parentId=co,uo.ID=ba.id,uo.a&&(ba.personId="{54EE7950-7262-4200-6969-"+("000000000000"+is.indexOf(uo.a)).slice(-12)+"}"),hs.push(writextag("threadedComment",writetag("text",uo.t||""),ba))})}),hs.push("</ThreadedComments>"),hs.join("")}function write_people_xml(cs){var is=[XML_HEADER,writextag("personList",null,{xmlns:XMLNS.TCMNT,"xmlns:x":XMLNS_main[0]}).replace(/[\/]>/,">")];return cs.forEach(function(us,hs){is.push(writextag("person",null,{displayName:us,id:"{54EE7950-7262-4200-6969-"+("000000000000"+hs).slice(-12)+"}",userId:us,providerId:"None"}))}),is.push("</personList>"),is.join("")}function parse_BrtBeginComment(cs){var is={};is.iauthor=cs.read_shift(4);var us=parse_UncheckedRfX(cs);return is.rfx=us.s,is.ref=encode_cell(us.s),cs.l+=16,is}function write_BrtBeginComment(cs,is){return is==null&&(is=new_buf(36)),is.write_shift(4,cs[1].iauthor),write_UncheckedRfX(cs[0],is),is.write_shift(4,0),is.write_shift(4,0),is.write_shift(4,0),is.write_shift(4,0),is}var parse_BrtCommentAuthor=parse_XLWideString;function write_BrtCommentAuthor(cs){return write_XLWideString(cs.slice(0,54))}function write_comments_bin(cs){var is=buf_array(),us=[];return write_record(is,628),write_record(is,630),cs.forEach(function(hs){hs[1].forEach(function(lo){us.indexOf(lo.a)>-1||(us.push(lo.a.slice(0,54)),write_record(is,632,write_BrtCommentAuthor(lo.a)))})}),write_record(is,631),write_record(is,633),cs.forEach(function(hs){hs[1].forEach(function(lo){lo.iauthor=us.indexOf(lo.a);var co={s:decode_cell(hs[0]),e:decode_cell(hs[0])};write_record(is,635,write_BrtBeginComment([co,lo])),lo.t&&lo.t.length>0&&write_record(is,637,write_BrtCommentText(lo)),write_record(is,636),delete lo.iauthor})}),write_record(is,634),write_record(is,629),is.end()}function fill_vba_xls(cs,is){is.FullPaths.forEach(function(us,hs){if(hs!=0){var lo=us.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");lo.slice(-1)!=="/"&&CFB.utils.cfb_add(cs,lo,is.FileIndex[hs].content)}})}var VBAFMTS=["xlsb","xlsm","xlam","biff8","xla"],rc_to_a1=function(){var cs=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,is={r:0,c:0};function us(hs,lo,co,uo){var ga=!1,ba=!1;co.length==0?ba=!0:co.charAt(0)=="["&&(ba=!0,co=co.slice(1,-1)),uo.length==0?ga=!0:uo.charAt(0)=="["&&(ga=!0,uo=uo.slice(1,-1));var xa=co.length>0?parseInt(co,10)|0:0,_a=uo.length>0?parseInt(uo,10)|0:0;return ga?_a+=is.c:--_a,ba?xa+=is.r:--xa,lo+(ga?"":"$")+encode_col(_a)+(ba?"":"$")+encode_row(xa)}return function(lo,co){return is=co,lo.replace(cs,us)}}(),crefregex=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,a1_to_rc=function(){return function(is,us){return is.replace(crefregex,function(hs,lo,co,uo,ga,ba){var xa=decode_col(uo)-(co?0:us.c),_a=decode_row(ba)-(ga?0:us.r),$a=_a==0?"":ga?_a+1:"["+_a+"]",xl=xa==0?"":co?xa+1:"["+xa+"]";return lo+"R"+$a+"C"+xl})}}();function shift_formula_str(cs,is){return cs.replace(crefregex,function(us,hs,lo,co,uo,ga){return hs+(lo=="$"?lo+co:encode_col(decode_col(co)+is.c))+(uo=="$"?uo+ga:encode_row(decode_row(ga)+is.r))})}function fuzzyfmla(cs){return cs.length!=1}function parseread1(cs){cs.l+=1}function parse_ColRelU(cs,is){var us=cs.read_shift(2);return[us&16383,us>>14&1,us>>15&1]}function parse_RgceArea(cs,is,us){var hs=2;if(us){if(us.biff>=2&&us.biff<=5)return parse_RgceArea_BIFF2(cs);us.biff==12&&(hs=4)}var lo=cs.read_shift(hs),co=cs.read_shift(hs),uo=parse_ColRelU(cs),ga=parse_ColRelU(cs);return{s:{r:lo,c:uo[0],cRel:uo[1],rRel:uo[2]},e:{r:co,c:ga[0],cRel:ga[1],rRel:ga[2]}}}function parse_RgceArea_BIFF2(cs){var is=parse_ColRelU(cs),us=parse_ColRelU(cs),hs=cs.read_shift(1),lo=cs.read_shift(1);return{s:{r:is[0],c:hs,cRel:is[1],rRel:is[2]},e:{r:us[0],c:lo,cRel:us[1],rRel:us[2]}}}function parse_RgceAreaRel(cs,is,us){if(us.biff<8)return parse_RgceArea_BIFF2(cs);var hs=cs.read_shift(us.biff==12?4:2),lo=cs.read_shift(us.biff==12?4:2),co=parse_ColRelU(cs),uo=parse_ColRelU(cs);return{s:{r:hs,c:co[0],cRel:co[1],rRel:co[2]},e:{r:lo,c:uo[0],cRel:uo[1],rRel:uo[2]}}}function parse_RgceLoc(cs,is,us){if(us&&us.biff>=2&&us.biff<=5)return parse_RgceLoc_BIFF2(cs);var hs=cs.read_shift(us&&us.biff==12?4:2),lo=parse_ColRelU(cs);return{r:hs,c:lo[0],cRel:lo[1],rRel:lo[2]}}function parse_RgceLoc_BIFF2(cs){var is=parse_ColRelU(cs),us=cs.read_shift(1);return{r:is[0],c:us,cRel:is[1],rRel:is[2]}}function parse_RgceElfLoc(cs){var is=cs.read_shift(2),us=cs.read_shift(2);return{r:is,c:us&255,fQuoted:!!(us&16384),cRel:us>>15,rRel:us>>15}}function parse_RgceLocRel(cs,is,us){var hs=us&&us.biff?us.biff:8;if(hs>=2&&hs<=5)return parse_RgceLocRel_BIFF2(cs);var lo=cs.read_shift(hs>=12?4:2),co=cs.read_shift(2),uo=(co&16384)>>14,ga=(co&32768)>>15;if(co&=16383,ga==1)for(;lo>524287;)lo-=1048576;if(uo==1)for(;co>8191;)co=co-16384;return{r:lo,c:co,cRel:uo,rRel:ga}}function parse_RgceLocRel_BIFF2(cs){var is=cs.read_shift(2),us=cs.read_shift(1),hs=(is&32768)>>15,lo=(is&16384)>>14;return is&=16383,hs==1&&is>=8192&&(is=is-16384),lo==1&&us>=128&&(us=us-256),{r:is,c:us,cRel:lo,rRel:hs}}function parse_PtgArea(cs,is,us){var hs=(cs[cs.l++]&96)>>5,lo=parse_RgceArea(cs,us.biff>=2&&us.biff<=5?6:8,us);return[hs,lo]}function parse_PtgArea3d(cs,is,us){var hs=(cs[cs.l++]&96)>>5,lo=cs.read_shift(2,"i"),co=8;if(us)switch(us.biff){case 5:cs.l+=12,co=6;break;case 12:co=12;break}var uo=parse_RgceArea(cs,co,us);return[hs,lo,uo]}function parse_PtgAreaErr(cs,is,us){var hs=(cs[cs.l++]&96)>>5;return cs.l+=us&&us.biff>8?12:us.biff<8?6:8,[hs]}function parse_PtgAreaErr3d(cs,is,us){var hs=(cs[cs.l++]&96)>>5,lo=cs.read_shift(2),co=8;if(us)switch(us.biff){case 5:cs.l+=12,co=6;break;case 12:co=12;break}return cs.l+=co,[hs,lo]}function parse_PtgAreaN(cs,is,us){var hs=(cs[cs.l++]&96)>>5,lo=parse_RgceAreaRel(cs,is-1,us);return[hs,lo]}function parse_PtgArray(cs,is,us){var hs=(cs[cs.l++]&96)>>5;return cs.l+=us.biff==2?6:us.biff==12?14:7,[hs]}function parse_PtgAttrBaxcel(cs){var is=cs[cs.l+1]&1,us=1;return cs.l+=4,[is,us]}function parse_PtgAttrChoose(cs,is,us){cs.l+=2;for(var hs=cs.read_shift(us&&us.biff==2?1:2),lo=[],co=0;co<=hs;++co)lo.push(cs.read_shift(us&&us.biff==2?1:2));return lo}function parse_PtgAttrGoto(cs,is,us){var hs=cs[cs.l+1]&255?1:0;return cs.l+=2,[hs,cs.read_shift(us&&us.biff==2?1:2)]}function parse_PtgAttrIf(cs,is,us){var hs=cs[cs.l+1]&255?1:0;return cs.l+=2,[hs,cs.read_shift(us&&us.biff==2?1:2)]}function parse_PtgAttrIfError(cs){var is=cs[cs.l+1]&255?1:0;return cs.l+=2,[is,cs.read_shift(2)]}function parse_PtgAttrSemi(cs,is,us){var hs=cs[cs.l+1]&255?1:0;return cs.l+=us&&us.biff==2?3:4,[hs]}function parse_PtgAttrSpaceType(cs){var is=cs.read_shift(1),us=cs.read_shift(1);return[is,us]}function parse_PtgAttrSpace(cs){return cs.read_shift(2),parse_PtgAttrSpaceType(cs)}function parse_PtgAttrSpaceSemi(cs){return cs.read_shift(2),parse_PtgAttrSpaceType(cs)}function parse_PtgRef(cs,is,us){var hs=(cs[cs.l]&96)>>5;cs.l+=1;var lo=parse_RgceLoc(cs,0,us);return[hs,lo]}function parse_PtgRefN(cs,is,us){var hs=(cs[cs.l]&96)>>5;cs.l+=1;var lo=parse_RgceLocRel(cs,0,us);return[hs,lo]}function parse_PtgRef3d(cs,is,us){var hs=(cs[cs.l]&96)>>5;cs.l+=1;var lo=cs.read_shift(2);us&&us.biff==5&&(cs.l+=12);var co=parse_RgceLoc(cs,0,us);return[hs,lo,co]}function parse_PtgFunc(cs,is,us){var hs=(cs[cs.l]&96)>>5;cs.l+=1;var lo=cs.read_shift(us&&us.biff<=3?1:2);return[FtabArgc[lo],Ftab[lo],hs]}function parse_PtgFuncVar(cs,is,us){var hs=cs[cs.l++],lo=cs.read_shift(1),co=us&&us.biff<=3?[hs==88?-1:0,cs.read_shift(1)]:parsetab(cs);return[lo,(co[0]===0?Ftab:Cetab)[co[1]]]}function parsetab(cs){return[cs[cs.l+1]>>7,cs.read_shift(2)&32767]}function parse_PtgAttrSum(cs,is,us){cs.l+=us&&us.biff==2?3:4}function parse_PtgExp(cs,is,us){if(cs.l++,us&&us.biff==12)return[cs.read_shift(4,"i"),0];var hs=cs.read_shift(2),lo=cs.read_shift(us&&us.biff==2?1:2);return[hs,lo]}function parse_PtgErr(cs){return cs.l++,BErr[cs.read_shift(1)]}function parse_PtgInt(cs){return cs.l++,cs.read_shift(2)}function parse_PtgBool(cs){return cs.l++,cs.read_shift(1)!==0}function parse_PtgNum(cs){return cs.l++,parse_Xnum(cs)}function parse_PtgStr(cs,is,us){return cs.l++,parse_ShortXLUnicodeString(cs,is-1,us)}function parse_SerAr(cs,is){var us=[cs.read_shift(1)];if(is==12)switch(us[0]){case 2:us[0]=4;break;case 4:us[0]=16;break;case 0:us[0]=1;break;case 1:us[0]=2;break}switch(us[0]){case 4:us[1]=parsebool(cs,1)?"TRUE":"FALSE",is!=12&&(cs.l+=7);break;case 37:case 16:us[1]=BErr[cs[cs.l]],cs.l+=is==12?4:8;break;case 0:cs.l+=8;break;case 1:us[1]=parse_Xnum(cs);break;case 2:us[1]=parse_XLUnicodeString2(cs,0,{biff:is>0&&is<8?2:is});break;default:throw new Error("Bad SerAr: "+us[0])}return us}function parse_PtgExtraMem(cs,is,us){for(var hs=cs.read_shift(us.biff==12?4:2),lo=[],co=0;co!=hs;++co)lo.push((us.biff==12?parse_UncheckedRfX:parse_Ref8U)(cs));return lo}function parse_PtgExtraArray(cs,is,us){var hs=0,lo=0;us.biff==12?(hs=cs.read_shift(4),lo=cs.read_shift(4)):(lo=1+cs.read_shift(1),hs=1+cs.read_shift(2)),us.biff>=2&&us.biff<8&&(--hs,--lo==0&&(lo=256));for(var co=0,uo=[];co!=hs&&(uo[co]=[]);++co)for(var ga=0;ga!=lo;++ga)uo[co][ga]=parse_SerAr(cs,us.biff);return uo}function parse_PtgName(cs,is,us){var hs=cs.read_shift(1)>>>5&3,lo=!us||us.biff>=8?4:2,co=cs.read_shift(lo);switch(us.biff){case 2:cs.l+=5;break;case 3:case 4:cs.l+=8;break;case 5:cs.l+=12;break}return[hs,0,co]}function parse_PtgNameX(cs,is,us){if(us.biff==5)return parse_PtgNameX_BIFF5(cs);var hs=cs.read_shift(1)>>>5&3,lo=cs.read_shift(2),co=cs.read_shift(4);return[hs,lo,co]}function parse_PtgNameX_BIFF5(cs){var is=cs.read_shift(1)>>>5&3,us=cs.read_shift(2,"i");cs.l+=8;var hs=cs.read_shift(2);return cs.l+=12,[is,us,hs]}function parse_PtgMemArea(cs,is,us){var hs=cs.read_shift(1)>>>5&3;cs.l+=us&&us.biff==2?3:4;var lo=cs.read_shift(us&&us.biff==2?1:2);return[hs,lo]}function parse_PtgMemFunc(cs,is,us){var hs=cs.read_shift(1)>>>5&3,lo=cs.read_shift(us&&us.biff==2?1:2);return[hs,lo]}function parse_PtgRefErr(cs,is,us){var hs=cs.read_shift(1)>>>5&3;return cs.l+=4,us.biff<8&&cs.l--,us.biff==12&&(cs.l+=2),[hs]}function parse_PtgRefErr3d(cs,is,us){var hs=(cs[cs.l++]&96)>>5,lo=cs.read_shift(2),co=4;if(us)switch(us.biff){case 5:co=15;break;case 12:co=6;break}return cs.l+=co,[hs,lo]}var parse_PtgMemErr=parsenoop,parse_PtgMemNoMem=parsenoop,parse_PtgTbl=parsenoop;function parse_PtgElfLoc(cs,is,us){return cs.l+=2,[parse_RgceElfLoc(cs)]}function parse_PtgElfNoop(cs){return cs.l+=6,[]}var parse_PtgElfCol=parse_PtgElfLoc,parse_PtgElfColS=parse_PtgElfNoop,parse_PtgElfColSV=parse_PtgElfNoop,parse_PtgElfColV=parse_PtgElfLoc;function parse_PtgElfLel(cs){return cs.l+=2,[parseuint16(cs),cs.read_shift(2)&1]}var parse_PtgElfRadical=parse_PtgElfLoc,parse_PtgElfRadicalLel=parse_PtgElfLel,parse_PtgElfRadicalS=parse_PtgElfNoop,parse_PtgElfRw=parse_PtgElfLoc,parse_PtgElfRwV=parse_PtgElfLoc,PtgListRT=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function parse_PtgList(cs){cs.l+=2;var is=cs.read_shift(2),us=cs.read_shift(2),hs=cs.read_shift(4),lo=cs.read_shift(2),co=cs.read_shift(2),uo=PtgListRT[us>>2&31];return{ixti:is,coltype:us&3,rt:uo,idx:hs,c:lo,C:co}}function parse_PtgSxName(cs){return cs.l+=2,[cs.read_shift(4)]}function parse_PtgSheet(cs,is,us){return cs.l+=5,cs.l+=2,cs.l+=us.biff==2?1:4,["PTGSHEET"]}function parse_PtgEndSheet(cs,is,us){return cs.l+=us.biff==2?4:5,["PTGENDSHEET"]}function parse_PtgMemAreaN(cs){var is=cs.read_shift(1)>>>5&3,us=cs.read_shift(2);return[is,us]}function parse_PtgMemNoMemN(cs){var is=cs.read_shift(1)>>>5&3,us=cs.read_shift(2);return[is,us]}function parse_PtgAttrNoop(cs){return cs.l+=4,[0,0]}var PtgTypes={1:{n:"PtgExp",f:parse_PtgExp},2:{n:"PtgTbl",f:parse_PtgTbl},3:{n:"PtgAdd",f:parseread1},4:{n:"PtgSub",f:parseread1},5:{n:"PtgMul",f:parseread1},6:{n:"PtgDiv",f:parseread1},7:{n:"PtgPower",f:parseread1},8:{n:"PtgConcat",f:parseread1},9:{n:"PtgLt",f:parseread1},10:{n:"PtgLe",f:parseread1},11:{n:"PtgEq",f:parseread1},12:{n:"PtgGe",f:parseread1},13:{n:"PtgGt",f:parseread1},14:{n:"PtgNe",f:parseread1},15:{n:"PtgIsect",f:parseread1},16:{n:"PtgUnion",f:parseread1},17:{n:"PtgRange",f:parseread1},18:{n:"PtgUplus",f:parseread1},19:{n:"PtgUminus",f:parseread1},20:{n:"PtgPercent",f:parseread1},21:{n:"PtgParen",f:parseread1},22:{n:"PtgMissArg",f:parseread1},23:{n:"PtgStr",f:parse_PtgStr},26:{n:"PtgSheet",f:parse_PtgSheet},27:{n:"PtgEndSheet",f:parse_PtgEndSheet},28:{n:"PtgErr",f:parse_PtgErr},29:{n:"PtgBool",f:parse_PtgBool},30:{n:"PtgInt",f:parse_PtgInt},31:{n:"PtgNum",f:parse_PtgNum},32:{n:"PtgArray",f:parse_PtgArray},33:{n:"PtgFunc",f:parse_PtgFunc},34:{n:"PtgFuncVar",f:parse_PtgFuncVar},35:{n:"PtgName",f:parse_PtgName},36:{n:"PtgRef",f:parse_PtgRef},37:{n:"PtgArea",f:parse_PtgArea},38:{n:"PtgMemArea",f:parse_PtgMemArea},39:{n:"PtgMemErr",f:parse_PtgMemErr},40:{n:"PtgMemNoMem",f:parse_PtgMemNoMem},41:{n:"PtgMemFunc",f:parse_PtgMemFunc},42:{n:"PtgRefErr",f:parse_PtgRefErr},43:{n:"PtgAreaErr",f:parse_PtgAreaErr},44:{n:"PtgRefN",f:parse_PtgRefN},45:{n:"PtgAreaN",f:parse_PtgAreaN},46:{n:"PtgMemAreaN",f:parse_PtgMemAreaN},47:{n:"PtgMemNoMemN",f:parse_PtgMemNoMemN},57:{n:"PtgNameX",f:parse_PtgNameX},58:{n:"PtgRef3d",f:parse_PtgRef3d},59:{n:"PtgArea3d",f:parse_PtgArea3d},60:{n:"PtgRefErr3d",f:parse_PtgRefErr3d},61:{n:"PtgAreaErr3d",f:parse_PtgAreaErr3d},255:{}},PtgDupes={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ptg18={1:{n:"PtgElfLel",f:parse_PtgElfLel},2:{n:"PtgElfRw",f:parse_PtgElfRw},3:{n:"PtgElfCol",f:parse_PtgElfCol},6:{n:"PtgElfRwV",f:parse_PtgElfRwV},7:{n:"PtgElfColV",f:parse_PtgElfColV},10:{n:"PtgElfRadical",f:parse_PtgElfRadical},11:{n:"PtgElfRadicalS",f:parse_PtgElfRadicalS},13:{n:"PtgElfColS",f:parse_PtgElfColS},15:{n:"PtgElfColSV",f:parse_PtgElfColSV},16:{n:"PtgElfRadicalLel",f:parse_PtgElfRadicalLel},25:{n:"PtgList",f:parse_PtgList},29:{n:"PtgSxName",f:parse_PtgSxName},255:{}},Ptg19={0:{n:"PtgAttrNoop",f:parse_PtgAttrNoop},1:{n:"PtgAttrSemi",f:parse_PtgAttrSemi},2:{n:"PtgAttrIf",f:parse_PtgAttrIf},4:{n:"PtgAttrChoose",f:parse_PtgAttrChoose},8:{n:"PtgAttrGoto",f:parse_PtgAttrGoto},16:{n:"PtgAttrSum",f:parse_PtgAttrSum},32:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},33:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},64:{n:"PtgAttrSpace",f:parse_PtgAttrSpace},65:{n:"PtgAttrSpaceSemi",f:parse_PtgAttrSpaceSemi},128:{n:"PtgAttrIfError",f:parse_PtgAttrIfError},255:{}};function parse_RgbExtra(cs,is,us,hs){if(hs.biff<8)return parsenoop(cs,is);for(var lo=cs.l+is,co=[],uo=0;uo!==us.length;++uo)switch(us[uo][0]){case"PtgArray":us[uo][1]=parse_PtgExtraArray(cs,0,hs),co.push(us[uo][1]);break;case"PtgMemArea":us[uo][2]=parse_PtgExtraMem(cs,us[uo][1],hs),co.push(us[uo][2]);break;case"PtgExp":hs&&hs.biff==12&&(us[uo][1][1]=cs.read_shift(4),co.push(us[uo][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+us[uo][0]}return is=lo-cs.l,is!==0&&co.push(parsenoop(cs,is)),co}function parse_Rgce(cs,is,us){for(var hs=cs.l+is,lo,co,uo=[];hs!=cs.l;)is=hs-cs.l,co=cs[cs.l],lo=PtgTypes[co]||PtgTypes[PtgDupes[co]],(co===24||co===25)&&(lo=(co===24?Ptg18:Ptg19)[cs[cs.l+1]]),!lo||!lo.f?parsenoop(cs,is):uo.push([lo.n,lo.f(cs,is,us)]);return uo}function stringify_array(cs){for(var is=[],us=0;us<cs.length;++us){for(var hs=cs[us],lo=[],co=0;co<hs.length;++co){var uo=hs[co];if(uo)switch(uo[0]){case 2:lo.push('"'+uo[1].replace(/"/g,'""')+'"');break;default:lo.push(uo[1])}else lo.push("")}is.push(lo.join(","))}return is.join(";")}var PtgBinOp={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function formula_quote_sheet_name(cs,is){if(!cs&&!(is&&is.biff<=5&&is.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(cs)?"'"+cs+"'":cs}function get_ixti_raw(cs,is,us){if(!cs)return"SH33TJSERR0";if(us.biff>8&&(!cs.XTI||!cs.XTI[is]))return cs.SheetNames[is];if(!cs.XTI)return"SH33TJSERR6";var hs=cs.XTI[is];if(us.biff<8)return is>1e4&&(is-=65536),is<0&&(is=-is),is==0?"":cs.XTI[is-1];if(!hs)return"SH33TJSERR1";var lo="";if(us.biff>8)switch(cs[hs[0]][0]){case 357:return lo=hs[1]==-1?"#REF":cs.SheetNames[hs[1]],hs[1]==hs[2]?lo:lo+":"+cs.SheetNames[hs[2]];case 358:return us.SID!=null?cs.SheetNames[us.SID]:"SH33TJSSAME"+cs[hs[0]][0];case 355:default:return"SH33TJSSRC"+cs[hs[0]][0]}switch(cs[hs[0]][0][0]){case 1025:return lo=hs[1]==-1?"#REF":cs.SheetNames[hs[1]]||"SH33TJSERR3",hs[1]==hs[2]?lo:lo+":"+cs.SheetNames[hs[2]];case 14849:return cs[hs[0]].slice(1).map(function(co){return co.Name}).join(";;");default:return cs[hs[0]][0][3]?(lo=hs[1]==-1?"#REF":cs[hs[0]][0][3][hs[1]]||"SH33TJSERR4",hs[1]==hs[2]?lo:lo+":"+cs[hs[0]][0][3][hs[2]]):"SH33TJSERR2"}}function get_ixti(cs,is,us){var hs=get_ixti_raw(cs,is,us);return hs=="#REF"?hs:formula_quote_sheet_name(hs,us)}function stringify_formula(cs,is,us,hs,lo){var co=lo&&lo.biff||8,uo={s:{c:0,r:0}},ga=[],ba,xa,_a,$a=0,xl=0,yl,wl="";if(!cs[0]||!cs[0][0])return"";for(var _l=-1,El="",Sl=0,Cl=cs[0].length;Sl<Cl;++Sl){var Tl=cs[0][Sl];switch(Tl[0]){case"PtgUminus":ga.push("-"+ga.pop());break;case"PtgUplus":ga.push("+"+ga.pop());break;case"PtgPercent":ga.push(ga.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(ba=ga.pop(),xa=ga.pop(),_l>=0){switch(cs[0][_l][1][0]){case 0:El=fill(" ",cs[0][_l][1][1]);break;case 1:El=fill("\r",cs[0][_l][1][1]);break;default:if(El="",lo.WTF)throw new Error("Unexpected PtgAttrSpaceType "+cs[0][_l][1][0])}xa=xa+El,_l=-1}ga.push(xa+PtgBinOp[Tl[0]]+ba);break;case"PtgIsect":ba=ga.pop(),xa=ga.pop(),ga.push(xa+" "+ba);break;case"PtgUnion":ba=ga.pop(),xa=ga.pop(),ga.push(xa+","+ba);break;case"PtgRange":ba=ga.pop(),xa=ga.pop(),ga.push(xa+":"+ba);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":_a=shift_cell_xls(Tl[1][1],uo,lo),ga.push(encode_cell_xls(_a,co));break;case"PtgRefN":_a=us?shift_cell_xls(Tl[1][1],us,lo):Tl[1][1],ga.push(encode_cell_xls(_a,co));break;case"PtgRef3d":$a=Tl[1][1],_a=shift_cell_xls(Tl[1][2],uo,lo),wl=get_ixti(hs,$a,lo),ga.push(wl+"!"+encode_cell_xls(_a,co));break;case"PtgFunc":case"PtgFuncVar":var Dl=Tl[1][0],Fl=Tl[1][1];Dl||(Dl=0),Dl&=127;var Pl=Dl==0?[]:ga.slice(-Dl);ga.length-=Dl,Fl==="User"&&(Fl=Pl.shift()),ga.push(Fl+"("+Pl.join(",")+")");break;case"PtgBool":ga.push(Tl[1]?"TRUE":"FALSE");break;case"PtgInt":ga.push(Tl[1]);break;case"PtgNum":ga.push(String(Tl[1]));break;case"PtgStr":ga.push('"'+Tl[1].replace(/"/g,'""')+'"');break;case"PtgErr":ga.push(Tl[1]);break;case"PtgAreaN":yl=shift_range_xls(Tl[1][1],us?{s:us}:uo,lo),ga.push(encode_range_xls(yl,lo));break;case"PtgArea":yl=shift_range_xls(Tl[1][1],uo,lo),ga.push(encode_range_xls(yl,lo));break;case"PtgArea3d":$a=Tl[1][1],yl=Tl[1][2],wl=get_ixti(hs,$a,lo),ga.push(wl+"!"+encode_range_xls(yl,lo));break;case"PtgAttrSum":ga.push("SUM("+ga.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":xl=Tl[1][2];var Al=(hs.names||[])[xl-1]||(hs[0]||[])[xl],Rl=Al?Al.Name:"SH33TJSNAME"+String(xl);Rl&&Rl.slice(0,6)=="_xlfn."&&!lo.xlfn&&(Rl=Rl.slice(6)),ga.push(Rl);break;case"PtgNameX":var Il=Tl[1][1];xl=Tl[1][2];var Bl;if(lo.biff<=5)Il<0&&(Il=-Il),hs[Il]&&(Bl=hs[Il][xl]);else{var Ol="";if(((hs[Il]||[])[0]||[])[0]==14849||(((hs[Il]||[])[0]||[])[0]==1025?hs[Il][xl]&&hs[Il][xl].itab>0&&(Ol=hs.SheetNames[hs[Il][xl].itab-1]+"!"):Ol=hs.SheetNames[xl-1]+"!"),hs[Il]&&hs[Il][xl])Ol+=hs[Il][xl].Name;else if(hs[0]&&hs[0][xl])Ol+=hs[0][xl].Name;else{var zl=(get_ixti_raw(hs,Il,lo)||"").split(";;");zl[xl-1]?Ol=zl[xl-1]:Ol+="SH33TJSERRX"}ga.push(Ol);break}Bl||(Bl={Name:"SH33TJSERRY"}),ga.push(Bl.Name);break;case"PtgParen":var Hl="(",ou=")";if(_l>=0){switch(El="",cs[0][_l][1][0]){case 2:Hl=fill(" ",cs[0][_l][1][1])+Hl;break;case 3:Hl=fill("\r",cs[0][_l][1][1])+Hl;break;case 4:ou=fill(" ",cs[0][_l][1][1])+ou;break;case 5:ou=fill("\r",cs[0][_l][1][1])+ou;break;default:if(lo.WTF)throw new Error("Unexpected PtgAttrSpaceType "+cs[0][_l][1][0])}_l=-1}ga.push(Hl+ga.pop()+ou);break;case"PtgRefErr":ga.push("#REF!");break;case"PtgRefErr3d":ga.push("#REF!");break;case"PtgExp":_a={c:Tl[1][1],r:Tl[1][0]};var au={c:us.c,r:us.r};if(hs.sharedf[encode_cell(_a)]){var _c=hs.sharedf[encode_cell(_a)];ga.push(stringify_formula(_c,uo,au,hs,lo))}else{var uu=!1;for(ba=0;ba!=hs.arrayf.length;++ba)if(xa=hs.arrayf[ba],!(_a.c<xa[0].s.c||_a.c>xa[0].e.c)&&!(_a.r<xa[0].s.r||_a.r>xa[0].e.r)){ga.push(stringify_formula(xa[1],uo,au,hs,lo)),uu=!0;break}uu||ga.push(Tl[1])}break;case"PtgArray":ga.push("{"+stringify_array(Tl[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_l=Sl;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":ga.push("");break;case"PtgAreaErr":ga.push("#REF!");break;case"PtgAreaErr3d":ga.push("#REF!");break;case"PtgList":ga.push("Table"+Tl[1].idx+"[#"+Tl[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(Tl));default:throw new Error("Unrecognized Formula Token: "+String(Tl))}var lu=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(lo.biff!=3&&_l>=0&&lu.indexOf(cs[0][Sl][0])==-1){Tl=cs[0][_l];var Kl=!0;switch(Tl[1][0]){case 4:Kl=!1;case 0:El=fill(" ",Tl[1][1]);break;case 5:Kl=!1;case 1:El=fill("\r",Tl[1][1]);break;default:if(El="",lo.WTF)throw new Error("Unexpected PtgAttrSpaceType "+Tl[1][0])}ga.push((Kl?El:"")+ga.pop()+(Kl?"":El)),_l=-1}}if(ga.length>1&&lo.WTF)throw new Error("bad formula stack");return ga[0]}function write_FormulaValue(cs){if(cs==null){var is=new_buf(8);return is.write_shift(1,3),is.write_shift(1,0),is.write_shift(2,0),is.write_shift(2,0),is.write_shift(2,65535),is}else if(typeof cs=="number")return write_Xnum(cs);return write_Xnum(0)}function write_Formula(cs,is,us,hs,lo){var co=write_XLSCell(is,us,lo),uo=write_FormulaValue(cs.v),ga=new_buf(6),ba=33;ga.write_shift(2,ba),ga.write_shift(4,0);for(var xa=new_buf(cs.bf.length),_a=0;_a<cs.bf.length;++_a)xa[_a]=cs.bf[_a];var $a=bconcat([co,uo,ga,xa]);return $a}function parse_XLSBParsedFormula(cs,is,us){var hs=cs.read_shift(4),lo=parse_Rgce(cs,hs,us),co=cs.read_shift(4),uo=co>0?parse_RgbExtra(cs,co,lo,us):null;return[lo,uo]}var parse_XLSBArrayParsedFormula=parse_XLSBParsedFormula,parse_XLSBCellParsedFormula=parse_XLSBParsedFormula,parse_XLSBNameParsedFormula=parse_XLSBParsedFormula,parse_XLSBSharedParsedFormula=parse_XLSBParsedFormula,Cetab={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Ftab={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},FtabArgc={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function csf_to_ods_formula(cs){var is="of:="+cs.replace(crefregex,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return is.replace(/;/g,"|").replace(/,/g,";")}function csf_to_ods_3D(cs){return cs.replace(/\./,"!")}var browser_has_Map=typeof Map<"u";function get_sst_id(cs,is,us){var hs=0,lo=cs.length;if(us){if(browser_has_Map?us.has(is):Object.prototype.hasOwnProperty.call(us,is)){for(var co=browser_has_Map?us.get(is):us[is];hs<co.length;++hs)if(cs[co[hs]].t===is)return cs.Count++,co[hs]}}else for(;hs<lo;++hs)if(cs[hs].t===is)return cs.Count++,hs;return cs[lo]={t:is},cs.Count++,cs.Unique++,us&&(browser_has_Map?(us.has(is)||us.set(is,[]),us.get(is).push(lo)):(Object.prototype.hasOwnProperty.call(us,is)||(us[is]=[]),us[is].push(lo))),lo}function col_obj_w(cs,is){var us={min:cs+1,max:cs+1},hs=-1;return is.MDW&&(MDW=is.MDW),is.width!=null?us.customWidth=1:is.wpx!=null?hs=px2char(is.wpx):is.wch!=null&&(hs=is.wch),hs>-1?(us.width=char2width(hs),us.customWidth=1):is.width!=null&&(us.width=is.width),is.hidden&&(us.hidden=!0),is.level!=null&&(us.outlineLevel=us.level=is.level),us}function default_margins(cs,is){if(cs){var us=[.7,.7,.75,.75,.3,.3];cs.left==null&&(cs.left=us[0]),cs.right==null&&(cs.right=us[1]),cs.top==null&&(cs.top=us[2]),cs.bottom==null&&(cs.bottom=us[3]),cs.header==null&&(cs.header=us[4]),cs.footer==null&&(cs.footer=us[5])}}function get_cell_style(cs,is,us){var hs=us.revssf[is.z!=null?is.z:"General"],lo=60,co=cs.length;if(hs==null&&us.ssf){for(;lo<392;++lo)if(us.ssf[lo]==null){SSF_load(is.z,lo),us.ssf[lo]=is.z,us.revssf[is.z]=hs=lo;break}}for(lo=0;lo!=co;++lo)if(cs[lo].numFmtId===hs)return lo;return cs[co]={numFmtId:hs,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},co}function check_ws(cs,is,us){if(cs&&cs["!ref"]){var hs=safe_decode_range(cs["!ref"]);if(hs.e.c<hs.s.c||hs.e.r<hs.s.r)throw new Error("Bad range ("+us+"): "+cs["!ref"])}}function write_ws_xml_merges(cs){if(cs.length===0)return"";for(var is='<mergeCells count="'+cs.length+'">',us=0;us!=cs.length;++us)is+='<mergeCell ref="'+encode_range(cs[us])+'"/>';return is+"</mergeCells>"}function write_ws_xml_sheetpr(cs,is,us,hs,lo){var co=!1,uo={},ga=null;if(hs.bookType!=="xlsx"&&is.vbaraw){var ba=is.SheetNames[us];try{is.Workbook&&(ba=is.Workbook.Sheets[us].CodeName||ba)}catch{}co=!0,uo.codeName=utf8write(escapexml(ba))}if(cs&&cs["!outline"]){var xa={summaryBelow:1,summaryRight:1};cs["!outline"].above&&(xa.summaryBelow=0),cs["!outline"].left&&(xa.summaryRight=0),ga=(ga||"")+writextag("outlinePr",null,xa)}!co&&!ga||(lo[lo.length]=writextag("sheetPr",ga,uo))}var sheetprot_deffalse=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sheetprot_deftrue=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function write_ws_xml_protection(cs){var is={sheet:1};return sheetprot_deffalse.forEach(function(us){cs[us]!=null&&cs[us]&&(is[us]="1")}),sheetprot_deftrue.forEach(function(us){cs[us]!=null&&!cs[us]&&(is[us]="0")}),cs.password&&(is.password=crypto_CreatePasswordVerifier_Method1(cs.password).toString(16).toUpperCase()),writextag("sheetProtection",null,is)}function write_ws_xml_margins(cs){return default_margins(cs),writextag("pageMargins",null,cs)}function write_ws_xml_cols(cs,is){for(var us=["<cols>"],hs,lo=0;lo!=is.length;++lo)(hs=is[lo])&&(us[us.length]=writextag("col",null,col_obj_w(lo,hs)));return us[us.length]="</cols>",us.join("")}function write_ws_xml_autofilter(cs,is,us,hs){var lo=typeof cs.ref=="string"?cs.ref:encode_range(cs.ref);us.Workbook||(us.Workbook={Sheets:[]}),us.Workbook.Names||(us.Workbook.Names=[]);var co=us.Workbook.Names,uo=decode_range(lo);uo.s.r==uo.e.r&&(uo.e.r=decode_range(is["!ref"]).e.r,lo=encode_range(uo));for(var ga=0;ga<co.length;++ga){var ba=co[ga];if(ba.Name=="_xlnm._FilterDatabase"&&ba.Sheet==hs){ba.Ref="'"+us.SheetNames[hs]+"'!"+lo;break}}return ga==co.length&&co.push({Name:"_xlnm._FilterDatabase",Sheet:hs,Ref:"'"+us.SheetNames[hs]+"'!"+lo}),writextag("autoFilter",null,{ref:lo})}function write_ws_xml_sheetviews(cs,is,us,hs){var lo={workbookViewId:"0"};return(((hs||{}).Workbook||{}).Views||[])[0]&&(lo.rightToLeft=hs.Workbook.Views[0].RTL?"1":"0"),writextag("sheetViews",writextag("sheetView",null,lo),{})}function write_ws_xml_cell(cs,is,us,hs){if(cs.c&&us["!comments"].push([is,cs.c]),cs.v===void 0&&typeof cs.f!="string"||cs.t==="z"&&!cs.f)return"";var lo="",co=cs.t,uo=cs.v;if(cs.t!=="z")switch(cs.t){case"b":lo=cs.v?"1":"0";break;case"n":lo=""+cs.v;break;case"e":lo=BErr[cs.v];break;case"d":hs&&hs.cellDates?lo=parseDate(cs.v,-1).toISOString():(cs=dup(cs),cs.t="n",lo=""+(cs.v=datenum(parseDate(cs.v)))),typeof cs.z>"u"&&(cs.z=table_fmt[14]);break;default:lo=cs.v;break}var ga=writetag("v",escapexml(lo)),ba={r:is},xa=get_cell_style(hs.cellXfs,cs,hs);switch(xa!==0&&(ba.s=xa),cs.t){case"n":break;case"d":ba.t="d";break;case"b":ba.t="b";break;case"e":ba.t="e";break;case"z":break;default:if(cs.v==null){delete cs.t;break}if(cs.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(hs&&hs.bookSST){ga=writetag("v",""+get_sst_id(hs.Strings,cs.v,hs.revStrings)),ba.t="s";break}ba.t="str";break}if(cs.t!=co&&(cs.t=co,cs.v=uo),typeof cs.f=="string"&&cs.f){var _a=cs.F&&cs.F.slice(0,is.length)==is?{t:"array",ref:cs.F}:null;ga=writextag("f",escapexml(cs.f),_a)+(cs.v!=null?ga:"")}return cs.l&&us["!links"].push([is,cs.l]),cs.D&&(ba.cm=1),writextag("c",ga,ba)}function write_ws_xml_data(cs,is,us,hs){var lo=[],co=[],uo=safe_decode_range(cs["!ref"]),ga="",ba,xa="",_a=[],$a=0,xl=0,yl=cs["!rows"],wl=Array.isArray(cs),_l={r:xa},El,Sl=-1;for(xl=uo.s.c;xl<=uo.e.c;++xl)_a[xl]=encode_col(xl);for($a=uo.s.r;$a<=uo.e.r;++$a){for(co=[],xa=encode_row($a),xl=uo.s.c;xl<=uo.e.c;++xl){ba=_a[xl]+xa;var Cl=wl?(cs[$a]||[])[xl]:cs[ba];Cl!==void 0&&(ga=write_ws_xml_cell(Cl,ba,cs,is))!=null&&co.push(ga)}(co.length>0||yl&&yl[$a])&&(_l={r:xa},yl&&yl[$a]&&(El=yl[$a],El.hidden&&(_l.hidden=1),Sl=-1,El.hpx?Sl=px2pt(El.hpx):El.hpt&&(Sl=El.hpt),Sl>-1&&(_l.ht=Sl,_l.customHeight=1),El.level&&(_l.outlineLevel=El.level)),lo[lo.length]=writextag("row",co.join(""),_l))}if(yl)for(;$a<yl.length;++$a)yl&&yl[$a]&&(_l={r:$a+1},El=yl[$a],El.hidden&&(_l.hidden=1),Sl=-1,El.hpx?Sl=px2pt(El.hpx):El.hpt&&(Sl=El.hpt),Sl>-1&&(_l.ht=Sl,_l.customHeight=1),El.level&&(_l.outlineLevel=El.level),lo[lo.length]=writextag("row","",_l));return lo.join("")}function write_ws_xml(cs,is,us,hs){var lo=[XML_HEADER,writextag("worksheet",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r})],co=us.SheetNames[cs],uo=0,ga="",ba=us.Sheets[co];ba==null&&(ba={});var xa=ba["!ref"]||"A1",_a=safe_decode_range(xa);if(_a.e.c>16383||_a.e.r>1048575){if(is.WTF)throw new Error("Range "+xa+" exceeds format limit A1:XFD1048576");_a.e.c=Math.min(_a.e.c,16383),_a.e.r=Math.min(_a.e.c,1048575),xa=encode_range(_a)}hs||(hs={}),ba["!comments"]=[];var $a=[];write_ws_xml_sheetpr(ba,us,cs,is,lo),lo[lo.length]=writextag("dimension",null,{ref:xa}),lo[lo.length]=write_ws_xml_sheetviews(ba,is,cs,us),is.sheetFormat&&(lo[lo.length]=writextag("sheetFormatPr",null,{defaultRowHeight:is.sheetFormat.defaultRowHeight||"16",baseColWidth:is.sheetFormat.baseColWidth||"10",outlineLevelRow:is.sheetFormat.outlineLevelRow||"7"})),ba["!cols"]!=null&&ba["!cols"].length>0&&(lo[lo.length]=write_ws_xml_cols(ba,ba["!cols"])),lo[uo=lo.length]="<sheetData/>",ba["!links"]=[],ba["!ref"]!=null&&(ga=write_ws_xml_data(ba,is),ga.length>0&&(lo[lo.length]=ga)),lo.length>uo+1&&(lo[lo.length]="</sheetData>",lo[uo]=lo[uo].replace("/>",">")),ba["!protect"]&&(lo[lo.length]=write_ws_xml_protection(ba["!protect"])),ba["!autofilter"]!=null&&(lo[lo.length]=write_ws_xml_autofilter(ba["!autofilter"],ba,us,cs)),ba["!merges"]!=null&&ba["!merges"].length>0&&(lo[lo.length]=write_ws_xml_merges(ba["!merges"]));var xl=-1,yl,wl=-1;return ba["!links"].length>0&&(lo[lo.length]="<hyperlinks>",ba["!links"].forEach(function(_l){_l[1].Target&&(yl={ref:_l[0]},_l[1].Target.charAt(0)!="#"&&(wl=add_rels(hs,-1,escapexml(_l[1].Target).replace(/#.*$/,""),RELS.HLINK),yl["r:id"]="rId"+wl),(xl=_l[1].Target.indexOf("#"))>-1&&(yl.location=escapexml(_l[1].Target.slice(xl+1))),_l[1].Tooltip&&(yl.tooltip=escapexml(_l[1].Tooltip)),lo[lo.length]=writextag("hyperlink",null,yl))}),lo[lo.length]="</hyperlinks>"),delete ba["!links"],ba["!margins"]!=null&&(lo[lo.length]=write_ws_xml_margins(ba["!margins"])),(!is||is.ignoreEC||is.ignoreEC==null)&&(lo[lo.length]=writetag("ignoredErrors",writextag("ignoredError",null,{numberStoredAsText:1,sqref:xa}))),$a.length>0&&(wl=add_rels(hs,-1,"../drawings/drawing"+(cs+1)+".xml",RELS.DRAW),lo[lo.length]=writextag("drawing",null,{"r:id":"rId"+wl}),ba["!drawing"]=$a),ba["!comments"].length>0&&(wl=add_rels(hs,-1,"../drawings/vmlDrawing"+(cs+1)+".vml",RELS.VML),lo[lo.length]=writextag("legacyDrawing",null,{"r:id":"rId"+wl}),ba["!legacy"]=wl),lo.length>1&&(lo[lo.length]="</worksheet>",lo[1]=lo[1].replace("/>",">")),lo.join("")}function parse_BrtRowHdr(cs,is){var us={},hs=cs.l+is;us.r=cs.read_shift(4),cs.l+=4;var lo=cs.read_shift(2);cs.l+=1;var co=cs.read_shift(1);return cs.l=hs,co&7&&(us.level=co&7),co&16&&(us.hidden=!0),co&32&&(us.hpt=lo/20),us}function write_BrtRowHdr(cs,is,us){var hs=new_buf(145),lo=(us["!rows"]||[])[cs]||{};hs.write_shift(4,cs),hs.write_shift(4,0);var co=320;lo.hpx?co=px2pt(lo.hpx)*20:lo.hpt&&(co=lo.hpt*20),hs.write_shift(2,co),hs.write_shift(1,0);var uo=0;lo.level&&(uo|=lo.level),lo.hidden&&(uo|=16),(lo.hpx||lo.hpt)&&(uo|=32),hs.write_shift(1,uo),hs.write_shift(1,0);var ga=0,ba=hs.l;hs.l+=4;for(var xa={r:cs,c:0},_a=0;_a<16;++_a)if(!(is.s.c>_a+1<<10||is.e.c<_a<<10)){for(var $a=-1,xl=-1,yl=_a<<10;yl<_a+1<<10;++yl){xa.c=yl;var wl=Array.isArray(us)?(us[xa.r]||[])[xa.c]:us[encode_cell(xa)];wl&&($a<0&&($a=yl),xl=yl)}$a<0||(++ga,hs.write_shift(4,$a),hs.write_shift(4,xl))}var _l=hs.l;return hs.l=ba,hs.write_shift(4,ga),hs.l=_l,hs.length>hs.l?hs.slice(0,hs.l):hs}function write_row_header(cs,is,us,hs){var lo=write_BrtRowHdr(hs,us,is);(lo.length>17||(is["!rows"]||[])[hs])&&write_record(cs,0,lo)}var parse_BrtWsDim=parse_UncheckedRfX,write_BrtWsDim=write_UncheckedRfX;function parse_BrtWsFmtInfo(){}function parse_BrtWsProp(cs,is){var us={},hs=cs[cs.l];return++cs.l,us.above=!(hs&64),us.left=!(hs&128),cs.l+=18,us.name=parse_XLSBCodeName(cs),us}function write_BrtWsProp(cs,is,us){us==null&&(us=new_buf(84+4*cs.length));var hs=192;is&&(is.above&&(hs&=-65),is.left&&(hs&=-129)),us.write_shift(1,hs);for(var lo=1;lo<3;++lo)us.write_shift(1,0);return write_BrtColor({auto:1},us),us.write_shift(-4,-1),us.write_shift(-4,-1),write_XLSBCodeName(cs,us),us.slice(0,us.l)}function parse_BrtCellBlank(cs){var is=parse_XLSBCell(cs);return[is]}function write_BrtCellBlank(cs,is,us){return us==null&&(us=new_buf(8)),write_XLSBCell(is,us)}function parse_BrtShortBlank(cs){var is=parse_XLSBShortCell(cs);return[is]}function write_BrtShortBlank(cs,is,us){return us==null&&(us=new_buf(4)),write_XLSBShortCell(is,us)}function parse_BrtCellBool(cs){var is=parse_XLSBCell(cs),us=cs.read_shift(1);return[is,us,"b"]}function write_BrtCellBool(cs,is,us){return us==null&&(us=new_buf(9)),write_XLSBCell(is,us),us.write_shift(1,cs.v?1:0),us}function parse_BrtShortBool(cs){var is=parse_XLSBShortCell(cs),us=cs.read_shift(1);return[is,us,"b"]}function write_BrtShortBool(cs,is,us){return us==null&&(us=new_buf(5)),write_XLSBShortCell(is,us),us.write_shift(1,cs.v?1:0),us}function parse_BrtCellError(cs){var is=parse_XLSBCell(cs),us=cs.read_shift(1);return[is,us,"e"]}function write_BrtCellError(cs,is,us){return us==null&&(us=new_buf(9)),write_XLSBCell(is,us),us.write_shift(1,cs.v),us}function parse_BrtShortError(cs){var is=parse_XLSBShortCell(cs),us=cs.read_shift(1);return[is,us,"e"]}function write_BrtShortError(cs,is,us){return us==null&&(us=new_buf(8)),write_XLSBShortCell(is,us),us.write_shift(1,cs.v),us.write_shift(2,0),us.write_shift(1,0),us}function parse_BrtCellIsst(cs){var is=parse_XLSBCell(cs),us=cs.read_shift(4);return[is,us,"s"]}function write_BrtCellIsst(cs,is,us){return us==null&&(us=new_buf(12)),write_XLSBCell(is,us),us.write_shift(4,is.v),us}function parse_BrtShortIsst(cs){var is=parse_XLSBShortCell(cs),us=cs.read_shift(4);return[is,us,"s"]}function write_BrtShortIsst(cs,is,us){return us==null&&(us=new_buf(8)),write_XLSBShortCell(is,us),us.write_shift(4,is.v),us}function parse_BrtCellReal(cs){var is=parse_XLSBCell(cs),us=parse_Xnum(cs);return[is,us,"n"]}function write_BrtCellReal(cs,is,us){return us==null&&(us=new_buf(16)),write_XLSBCell(is,us),write_Xnum(cs.v,us),us}function parse_BrtShortReal(cs){var is=parse_XLSBShortCell(cs),us=parse_Xnum(cs);return[is,us,"n"]}function write_BrtShortReal(cs,is,us){return us==null&&(us=new_buf(12)),write_XLSBShortCell(is,us),write_Xnum(cs.v,us),us}function parse_BrtCellRk(cs){var is=parse_XLSBCell(cs),us=parse_RkNumber(cs);return[is,us,"n"]}function write_BrtCellRk(cs,is,us){return us==null&&(us=new_buf(12)),write_XLSBCell(is,us),write_RkNumber(cs.v,us),us}function parse_BrtShortRk(cs){var is=parse_XLSBShortCell(cs),us=parse_RkNumber(cs);return[is,us,"n"]}function write_BrtShortRk(cs,is,us){return us==null&&(us=new_buf(8)),write_XLSBShortCell(is,us),write_RkNumber(cs.v,us),us}function parse_BrtCellRString(cs){var is=parse_XLSBCell(cs),us=parse_RichStr(cs);return[is,us,"is"]}function parse_BrtCellSt(cs){var is=parse_XLSBCell(cs),us=parse_XLWideString(cs);return[is,us,"str"]}function write_BrtCellSt(cs,is,us){return us==null&&(us=new_buf(12+4*cs.v.length)),write_XLSBCell(is,us),write_XLWideString(cs.v,us),us.length>us.l?us.slice(0,us.l):us}function parse_BrtShortSt(cs){var is=parse_XLSBShortCell(cs),us=parse_XLWideString(cs);return[is,us,"str"]}function write_BrtShortSt(cs,is,us){return us==null&&(us=new_buf(8+4*cs.v.length)),write_XLSBShortCell(is,us),write_XLWideString(cs.v,us),us.length>us.l?us.slice(0,us.l):us}function parse_BrtFmlaBool(cs,is,us){var hs=cs.l+is,lo=parse_XLSBCell(cs);lo.r=us["!row"];var co=cs.read_shift(1),uo=[lo,co,"b"];if(us.cellFormula){cs.l+=2;var ga=parse_XLSBCellParsedFormula(cs,hs-cs.l,us);uo[3]=stringify_formula(ga,null,lo,us.supbooks,us)}else cs.l=hs;return uo}function parse_BrtFmlaError(cs,is,us){var hs=cs.l+is,lo=parse_XLSBCell(cs);lo.r=us["!row"];var co=cs.read_shift(1),uo=[lo,co,"e"];if(us.cellFormula){cs.l+=2;var ga=parse_XLSBCellParsedFormula(cs,hs-cs.l,us);uo[3]=stringify_formula(ga,null,lo,us.supbooks,us)}else cs.l=hs;return uo}function parse_BrtFmlaNum(cs,is,us){var hs=cs.l+is,lo=parse_XLSBCell(cs);lo.r=us["!row"];var co=parse_Xnum(cs),uo=[lo,co,"n"];if(us.cellFormula){cs.l+=2;var ga=parse_XLSBCellParsedFormula(cs,hs-cs.l,us);uo[3]=stringify_formula(ga,null,lo,us.supbooks,us)}else cs.l=hs;return uo}function parse_BrtFmlaString(cs,is,us){var hs=cs.l+is,lo=parse_XLSBCell(cs);lo.r=us["!row"];var co=parse_XLWideString(cs),uo=[lo,co,"str"];if(us.cellFormula){cs.l+=2;var ga=parse_XLSBCellParsedFormula(cs,hs-cs.l,us);uo[3]=stringify_formula(ga,null,lo,us.supbooks,us)}else cs.l=hs;return uo}var parse_BrtMergeCell=parse_UncheckedRfX,write_BrtMergeCell=write_UncheckedRfX;function write_BrtBeginMergeCells(cs,is){return is==null&&(is=new_buf(4)),is.write_shift(4,cs),is}function parse_BrtHLink(cs,is){var us=cs.l+is,hs=parse_UncheckedRfX(cs),lo=parse_XLNullableWideString(cs),co=parse_XLWideString(cs),uo=parse_XLWideString(cs),ga=parse_XLWideString(cs);cs.l=us;var ba={rfx:hs,relId:lo,loc:co,display:ga};return uo&&(ba.Tooltip=uo),ba}function write_BrtHLink(cs,is){var us=new_buf(50+4*(cs[1].Target.length+(cs[1].Tooltip||"").length));write_UncheckedRfX({s:decode_cell(cs[0]),e:decode_cell(cs[0])},us),write_RelID("rId"+is,us);var hs=cs[1].Target.indexOf("#"),lo=hs==-1?"":cs[1].Target.slice(hs+1);return write_XLWideString(lo||"",us),write_XLWideString(cs[1].Tooltip||"",us),write_XLWideString("",us),us.slice(0,us.l)}function parse_BrtPane(){}function parse_BrtArrFmla(cs,is,us){var hs=cs.l+is,lo=parse_RfX(cs),co=cs.read_shift(1),uo=[lo];if(uo[2]=co,us.cellFormula){var ga=parse_XLSBArrayParsedFormula(cs,hs-cs.l,us);uo[1]=ga}else cs.l=hs;return uo}function parse_BrtShrFmla(cs,is,us){var hs=cs.l+is,lo=parse_UncheckedRfX(cs),co=[lo];if(us.cellFormula){var uo=parse_XLSBSharedParsedFormula(cs,hs-cs.l,us);co[1]=uo,cs.l=hs}else cs.l=hs;return co}function write_BrtColInfo(cs,is,us){us==null&&(us=new_buf(18));var hs=col_obj_w(cs,is);us.write_shift(-4,cs),us.write_shift(-4,cs),us.write_shift(4,(hs.width||10)*256),us.write_shift(4,0);var lo=0;return is.hidden&&(lo|=1),typeof hs.width=="number"&&(lo|=2),is.level&&(lo|=is.level<<8),us.write_shift(2,lo),us}var BrtMarginKeys=["left","right","top","bottom","header","footer"];function parse_BrtMargins(cs){var is={};return BrtMarginKeys.forEach(function(us){is[us]=parse_Xnum(cs)}),is}function write_BrtMargins(cs,is){return is==null&&(is=new_buf(6*8)),default_margins(cs),BrtMarginKeys.forEach(function(us){write_Xnum(cs[us],is)}),is}function parse_BrtBeginWsView(cs){var is=cs.read_shift(2);return cs.l+=28,{RTL:is&32}}function write_BrtBeginWsView(cs,is,us){us==null&&(us=new_buf(30));var hs=924;return(((is||{}).Views||[])[0]||{}).RTL&&(hs|=32),us.write_shift(2,hs),us.write_shift(4,0),us.write_shift(4,0),us.write_shift(4,0),us.write_shift(1,0),us.write_shift(1,0),us.write_shift(2,0),us.write_shift(2,100),us.write_shift(2,0),us.write_shift(2,0),us.write_shift(2,0),us.write_shift(4,0),us}function write_BrtCellIgnoreEC(cs){var is=new_buf(24);return is.write_shift(4,4),is.write_shift(4,1),write_UncheckedRfX(cs,is),is}function write_BrtSheetProtection(cs,is){return is==null&&(is=new_buf(16*4+2)),is.write_shift(2,cs.password?crypto_CreatePasswordVerifier_Method1(cs.password):0),is.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(us){us[1]?is.write_shift(4,cs[us[0]]!=null&&!cs[us[0]]?1:0):is.write_shift(4,cs[us[0]]!=null&&cs[us[0]]?0:1)}),is}function parse_BrtDVal(){}function parse_BrtDVal14(){}function write_ws_bin_cell(cs,is,us,hs,lo,co,uo){if(is.v===void 0)return!1;var ga="";switch(is.t){case"b":ga=is.v?"1":"0";break;case"d":is=dup(is),is.z=is.z||table_fmt[14],is.v=datenum(parseDate(is.v)),is.t="n";break;case"n":case"e":ga=""+is.v;break;default:ga=is.v;break}var ba={r:us,c:hs};switch(ba.s=get_cell_style(lo.cellXfs,is,lo),is.l&&co["!links"].push([encode_cell(ba),is.l]),is.c&&co["!comments"].push([encode_cell(ba),is.c]),is.t){case"s":case"str":return lo.bookSST?(ga=get_sst_id(lo.Strings,is.v,lo.revStrings),ba.t="s",ba.v=ga,uo?write_record(cs,18,write_BrtShortIsst(is,ba)):write_record(cs,7,write_BrtCellIsst(is,ba))):(ba.t="str",uo?write_record(cs,17,write_BrtShortSt(is,ba)):write_record(cs,6,write_BrtCellSt(is,ba))),!0;case"n":return is.v==(is.v|0)&&is.v>-1e3&&is.v<1e3?uo?write_record(cs,13,write_BrtShortRk(is,ba)):write_record(cs,2,write_BrtCellRk(is,ba)):uo?write_record(cs,16,write_BrtShortReal(is,ba)):write_record(cs,5,write_BrtCellReal(is,ba)),!0;case"b":return ba.t="b",uo?write_record(cs,15,write_BrtShortBool(is,ba)):write_record(cs,4,write_BrtCellBool(is,ba)),!0;case"e":return ba.t="e",uo?write_record(cs,14,write_BrtShortError(is,ba)):write_record(cs,3,write_BrtCellError(is,ba)),!0}return uo?write_record(cs,12,write_BrtShortBlank(is,ba)):write_record(cs,1,write_BrtCellBlank(is,ba)),!0}function write_CELLTABLE(cs,is,us,hs){var lo=safe_decode_range(is["!ref"]||"A1"),co,uo="",ga=[];write_record(cs,145);var ba=Array.isArray(is),xa=lo.e.r;is["!rows"]&&(xa=Math.max(lo.e.r,is["!rows"].length-1));for(var _a=lo.s.r;_a<=xa;++_a){uo=encode_row(_a),write_row_header(cs,is,lo,_a);var $a=!1;if(_a<=lo.e.r)for(var xl=lo.s.c;xl<=lo.e.c;++xl){_a===lo.s.r&&(ga[xl]=encode_col(xl)),co=ga[xl]+uo;var yl=ba?(is[_a]||[])[xl]:is[co];if(!yl){$a=!1;continue}$a=write_ws_bin_cell(cs,yl,_a,xl,hs,is,$a)}}write_record(cs,146)}function write_MERGECELLS(cs,is){!is||!is["!merges"]||(write_record(cs,177,write_BrtBeginMergeCells(is["!merges"].length)),is["!merges"].forEach(function(us){write_record(cs,176,write_BrtMergeCell(us))}),write_record(cs,178))}function write_COLINFOS(cs,is){!is||!is["!cols"]||(write_record(cs,390),is["!cols"].forEach(function(us,hs){us&&write_record(cs,60,write_BrtColInfo(hs,us))}),write_record(cs,391))}function write_IGNOREECS(cs,is){!is||!is["!ref"]||(write_record(cs,648),write_record(cs,649,write_BrtCellIgnoreEC(safe_decode_range(is["!ref"]))),write_record(cs,650))}function write_HLINKS(cs,is,us){is["!links"].forEach(function(hs){if(hs[1].Target){var lo=add_rels(us,-1,hs[1].Target.replace(/#.*$/,""),RELS.HLINK);write_record(cs,494,write_BrtHLink(hs,lo))}}),delete is["!links"]}function write_LEGACYDRAWING(cs,is,us,hs){if(is["!comments"].length>0){var lo=add_rels(hs,-1,"../drawings/vmlDrawing"+(us+1)+".vml",RELS.VML);write_record(cs,551,write_RelID("rId"+lo)),is["!legacy"]=lo}}function write_AUTOFILTER(cs,is,us,hs){if(is["!autofilter"]){var lo=is["!autofilter"],co=typeof lo.ref=="string"?lo.ref:encode_range(lo.ref);us.Workbook||(us.Workbook={Sheets:[]}),us.Workbook.Names||(us.Workbook.Names=[]);var uo=us.Workbook.Names,ga=decode_range(co);ga.s.r==ga.e.r&&(ga.e.r=decode_range(is["!ref"]).e.r,co=encode_range(ga));for(var ba=0;ba<uo.length;++ba){var xa=uo[ba];if(xa.Name=="_xlnm._FilterDatabase"&&xa.Sheet==hs){xa.Ref="'"+us.SheetNames[hs]+"'!"+co;break}}ba==uo.length&&uo.push({Name:"_xlnm._FilterDatabase",Sheet:hs,Ref:"'"+us.SheetNames[hs]+"'!"+co}),write_record(cs,161,write_UncheckedRfX(safe_decode_range(co))),write_record(cs,162)}}function write_WSVIEWS2(cs,is,us){write_record(cs,133),write_record(cs,137,write_BrtBeginWsView(is,us)),write_record(cs,138),write_record(cs,134)}function write_SHEETPROTECT(cs,is){is["!protect"]&&write_record(cs,535,write_BrtSheetProtection(is["!protect"]))}function write_ws_bin(cs,is,us,hs){var lo=buf_array(),co=us.SheetNames[cs],uo=us.Sheets[co]||{},ga=co;try{us&&us.Workbook&&(ga=us.Workbook.Sheets[cs].CodeName||ga)}catch{}var ba=safe_decode_range(uo["!ref"]||"A1");if(ba.e.c>16383||ba.e.r>1048575){if(is.WTF)throw new Error("Range "+(uo["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");ba.e.c=Math.min(ba.e.c,16383),ba.e.r=Math.min(ba.e.c,1048575)}return uo["!links"]=[],uo["!comments"]=[],write_record(lo,129),(us.vbaraw||uo["!outline"])&&write_record(lo,147,write_BrtWsProp(ga,uo["!outline"])),write_record(lo,148,write_BrtWsDim(ba)),write_WSVIEWS2(lo,uo,us.Workbook),write_COLINFOS(lo,uo),write_CELLTABLE(lo,uo,cs,is),write_SHEETPROTECT(lo,uo),write_AUTOFILTER(lo,uo,us,cs),write_MERGECELLS(lo,uo),write_HLINKS(lo,uo,hs),uo["!margins"]&&write_record(lo,476,write_BrtMargins(uo["!margins"])),(!is||is.ignoreEC||is.ignoreEC==null)&&write_IGNOREECS(lo,uo),write_LEGACYDRAWING(lo,uo,cs,hs),write_record(lo,130),lo.end()}function parse_BrtCsProp(cs,is){cs.l+=10;var us=parse_XLWideString(cs);return{name:us}}var WBPropsDef=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function safe1904(cs){return!cs.Workbook||!cs.Workbook.WBProps?"false":parsexmlbool(cs.Workbook.WBProps.date1904)?"true":"false"}var badchars="][*?/\\".split("");function check_ws_name(cs,is){if(cs.length>31)throw new Error("Sheet names cannot exceed 31 chars");var us=!0;return badchars.forEach(function(hs){if(cs.indexOf(hs)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),us}function check_wb_names(cs,is,us){cs.forEach(function(hs,lo){check_ws_name(hs);for(var co=0;co<lo;++co)if(hs==cs[co])throw new Error("Duplicate Sheet Name: "+hs);if(us){var uo=is&&is[lo]&&is[lo].CodeName||hs;if(uo.charCodeAt(0)==95&&uo.length>22)throw new Error("Bad Code Name: Worksheet"+uo)}})}function check_wb(cs){if(!cs||!cs.SheetNames||!cs.Sheets)throw new Error("Invalid Workbook");if(!cs.SheetNames.length)throw new Error("Workbook is empty");var is=cs.Workbook&&cs.Workbook.Sheets||[];check_wb_names(cs.SheetNames,is,!!cs.vbaraw);for(var us=0;us<cs.SheetNames.length;++us)check_ws(cs.Sheets[cs.SheetNames[us]],cs.SheetNames[us],us)}function write_wb_xml(cs){var is=[XML_HEADER];is[is.length]=writextag("workbook",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r});var us=cs.Workbook&&(cs.Workbook.Names||[]).length>0,hs={codeName:"ThisWorkbook"};cs.Workbook&&cs.Workbook.WBProps&&(WBPropsDef.forEach(function(ga){cs.Workbook.WBProps[ga[0]]!=null&&cs.Workbook.WBProps[ga[0]]!=ga[1]&&(hs[ga[0]]=cs.Workbook.WBProps[ga[0]])}),cs.Workbook.WBProps.CodeName&&(hs.codeName=cs.Workbook.WBProps.CodeName,delete hs.CodeName)),is[is.length]=writextag("workbookPr",null,hs);var lo=cs.Workbook&&cs.Workbook.Sheets||[],co=0;if(lo&&lo[0]&&lo[0].Hidden){for(is[is.length]="<bookViews>",co=0;co!=cs.SheetNames.length&&!(!lo[co]||!lo[co].Hidden);++co);co==cs.SheetNames.length&&(co=0),is[is.length]='<workbookView firstSheet="'+co+'" activeTab="'+co+'"/>',is[is.length]="</bookViews>"}for(is[is.length]="<sheets>",co=0;co!=cs.SheetNames.length;++co){var uo={name:escapexml(cs.SheetNames[co].slice(0,31))};if(uo.sheetId=""+(co+1),uo["r:id"]="rId"+(co+1),lo[co])switch(lo[co].Hidden){case 1:uo.state="hidden";break;case 2:uo.state="veryHidden";break}is[is.length]=writextag("sheet",null,uo)}return is[is.length]="</sheets>",us&&(is[is.length]="<definedNames>",cs.Workbook&&cs.Workbook.Names&&cs.Workbook.Names.forEach(function(ga){var ba={name:ga.Name};ga.Comment&&(ba.comment=ga.Comment),ga.Sheet!=null&&(ba.localSheetId=""+ga.Sheet),ga.Hidden&&(ba.hidden="1"),ga.Ref&&(is[is.length]=writextag("definedName",escapexml(ga.Ref),ba))}),is[is.length]="</definedNames>"),is.length>2&&(is[is.length]="</workbook>",is[1]=is[1].replace("/>",">")),is.join("")}function parse_BrtBundleSh(cs,is){var us={};return us.Hidden=cs.read_shift(4),us.iTabID=cs.read_shift(4),us.strRelID=parse_RelID(cs),us.name=parse_XLWideString(cs),us}function write_BrtBundleSh(cs,is){return is||(is=new_buf(127)),is.write_shift(4,cs.Hidden),is.write_shift(4,cs.iTabID),write_RelID(cs.strRelID,is),write_XLWideString(cs.name.slice(0,31),is),is.length>is.l?is.slice(0,is.l):is}function parse_BrtWbProp(cs,is){var us={},hs=cs.read_shift(4);us.defaultThemeVersion=cs.read_shift(4);var lo=is>8?parse_XLWideString(cs):"";return lo.length>0&&(us.CodeName=lo),us.autoCompressPictures=!!(hs&65536),us.backupFile=!!(hs&64),us.checkCompatibility=!!(hs&4096),us.date1904=!!(hs&1),us.filterPrivacy=!!(hs&8),us.hidePivotFieldList=!!(hs&1024),us.promptedSolutions=!!(hs&16),us.publishItems=!!(hs&2048),us.refreshAllConnections=!!(hs&262144),us.saveExternalLinkValues=!!(hs&128),us.showBorderUnselectedTables=!!(hs&4),us.showInkAnnotation=!!(hs&32),us.showObjects=["all","placeholders","none"][hs>>13&3],us.showPivotChartFilter=!!(hs&32768),us.updateLinks=["userSet","never","always"][hs>>8&3],us}function write_BrtWbProp(cs,is){is||(is=new_buf(72));var us=0;return cs&&cs.filterPrivacy&&(us|=8),is.write_shift(4,us),is.write_shift(4,0),write_XLSBCodeName(cs&&cs.CodeName||"ThisWorkbook",is),is.slice(0,is.l)}function parse_BrtName(cs,is,us){var hs=cs.l+is;cs.l+=4,cs.l+=1;var lo=cs.read_shift(4),co=parse_XLNameWideString(cs),uo=parse_XLSBNameParsedFormula(cs,0,us),ga=parse_XLNullableWideString(cs);cs.l=hs;var ba={Name:co,Ptg:uo};return lo<268435455&&(ba.Sheet=lo),ga&&(ba.Comment=ga),ba}function write_BUNDLESHS(cs,is){write_record(cs,143);for(var us=0;us!=is.SheetNames.length;++us){var hs=is.Workbook&&is.Workbook.Sheets&&is.Workbook.Sheets[us]&&is.Workbook.Sheets[us].Hidden||0,lo={Hidden:hs,iTabID:us+1,strRelID:"rId"+(us+1),name:is.SheetNames[us]};write_record(cs,156,write_BrtBundleSh(lo))}write_record(cs,144)}function write_BrtFileVersion(cs,is){is||(is=new_buf(127));for(var us=0;us!=4;++us)is.write_shift(4,0);return write_XLWideString("SheetJS",is),write_XLWideString(XLSX.version,is),write_XLWideString(XLSX.version,is),write_XLWideString("7262",is),is.length>is.l?is.slice(0,is.l):is}function write_BrtBookView(cs,is){is||(is=new_buf(29)),is.write_shift(-4,0),is.write_shift(-4,460),is.write_shift(4,28800),is.write_shift(4,17600),is.write_shift(4,500),is.write_shift(4,cs),is.write_shift(4,cs);var us=120;return is.write_shift(1,us),is.length>is.l?is.slice(0,is.l):is}function write_BOOKVIEWS(cs,is){if(!(!is.Workbook||!is.Workbook.Sheets)){for(var us=is.Workbook.Sheets,hs=0,lo=-1,co=-1;hs<us.length;++hs)!us[hs]||!us[hs].Hidden&&lo==-1?lo=hs:us[hs].Hidden==1&&co==-1&&(co=hs);co>lo||(write_record(cs,135),write_record(cs,158,write_BrtBookView(lo)),write_record(cs,136))}}function write_wb_bin(cs,is){var us=buf_array();return write_record(us,131),write_record(us,128,write_BrtFileVersion()),write_record(us,153,write_BrtWbProp(cs.Workbook&&cs.Workbook.WBProps||null)),write_BOOKVIEWS(us,cs),write_BUNDLESHS(us,cs),write_record(us,132),us.end()}function write_wb(cs,is,us){return(is.slice(-4)===".bin"?write_wb_bin:write_wb_xml)(cs)}function write_ws(cs,is,us,hs,lo){return(is.slice(-4)===".bin"?write_ws_bin:write_ws_xml)(cs,us,hs,lo)}function write_sty(cs,is,us){return(is.slice(-4)===".bin"?write_sty_bin:write_sty_xml)(cs,us)}function write_sst(cs,is,us){return(is.slice(-4)===".bin"?write_sst_bin:write_sst_xml)(cs,us)}function write_cmnt(cs,is,us){return(is.slice(-4)===".bin"?write_comments_bin:write_comments_xml)(cs)}function write_xlmeta(cs){return(cs.slice(-4)===".bin"?write_xlmeta_bin:write_xlmeta_xml)()}function write_props_xlml(cs,is){var us=[];return cs.Props&&us.push(xlml_write_docprops(cs.Props,is)),cs.Custprops&&us.push(xlml_write_custprops(cs.Props,cs.Custprops)),us.join("")}function write_wb_xlml(){return""}function write_sty_xlml(cs,is){var us=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return is.cellXfs.forEach(function(hs,lo){var co=[];co.push(writextag("NumberFormat",null,{"ss:Format":escapexml(table_fmt[hs.numFmtId])}));var uo={"ss:ID":"s"+(21+lo)};us.push(writextag("Style",co.join(""),uo))}),writextag("Styles",us.join(""))}function write_name_xlml(cs){return writextag("NamedRange",null,{"ss:Name":cs.Name,"ss:RefersTo":"="+a1_to_rc(cs.Ref,{r:0,c:0})})}function write_names_xlml(cs){if(!((cs||{}).Workbook||{}).Names)return"";for(var is=cs.Workbook.Names,us=[],hs=0;hs<is.length;++hs){var lo=is[hs];lo.Sheet==null&&(lo.Name.match(/^_xlfn\./)||us.push(write_name_xlml(lo)))}return writextag("Names",us.join(""))}function write_ws_xlml_names(cs,is,us,hs){if(!cs||!((hs||{}).Workbook||{}).Names)return"";for(var lo=hs.Workbook.Names,co=[],uo=0;uo<lo.length;++uo){var ga=lo[uo];ga.Sheet==us&&(ga.Name.match(/^_xlfn\./)||co.push(write_name_xlml(ga)))}return co.join("")}function write_ws_xlml_wsopts(cs,is,us,hs){if(!cs)return"";var lo=[];if(cs["!margins"]&&(lo.push("<PageSetup>"),cs["!margins"].header&&lo.push(writextag("Header",null,{"x:Margin":cs["!margins"].header})),cs["!margins"].footer&&lo.push(writextag("Footer",null,{"x:Margin":cs["!margins"].footer})),lo.push(writextag("PageMargins",null,{"x:Bottom":cs["!margins"].bottom||"0.75","x:Left":cs["!margins"].left||"0.7","x:Right":cs["!margins"].right||"0.7","x:Top":cs["!margins"].top||"0.75"})),lo.push("</PageSetup>")),hs&&hs.Workbook&&hs.Workbook.Sheets&&hs.Workbook.Sheets[us])if(hs.Workbook.Sheets[us].Hidden)lo.push(writextag("Visible",hs.Workbook.Sheets[us].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var co=0;co<us&&!(hs.Workbook.Sheets[co]&&!hs.Workbook.Sheets[co].Hidden);++co);co==us&&lo.push("<Selected/>")}return((((hs||{}).Workbook||{}).Views||[])[0]||{}).RTL&&lo.push("<DisplayRightToLeft/>"),cs["!protect"]&&(lo.push(writetag("ProtectContents","True")),cs["!protect"].objects&&lo.push(writetag("ProtectObjects","True")),cs["!protect"].scenarios&&lo.push(writetag("ProtectScenarios","True")),cs["!protect"].selectLockedCells!=null&&!cs["!protect"].selectLockedCells?lo.push(writetag("EnableSelection","NoSelection")):cs["!protect"].selectUnlockedCells!=null&&!cs["!protect"].selectUnlockedCells&&lo.push(writetag("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(uo){cs["!protect"][uo[0]]&&lo.push("<"+uo[1]+"/>")})),lo.length==0?"":writextag("WorksheetOptions",lo.join(""),{xmlns:XLMLNS.x})}function write_ws_xlml_comment(cs){return cs.map(function(is){var us=xlml_unfixstr(is.t||""),hs=writextag("ss:Data",us,{xmlns:"http://www.w3.org/TR/REC-html40"});return writextag("Comment",hs,{"ss:Author":is.a})}).join("")}function write_ws_xlml_cell(cs,is,us,hs,lo,co,uo){if(!cs||cs.v==null&&cs.f==null)return"";var ga={};if(cs.f&&(ga["ss:Formula"]="="+escapexml(a1_to_rc(cs.f,uo))),cs.F&&cs.F.slice(0,is.length)==is){var ba=decode_cell(cs.F.slice(is.length+1));ga["ss:ArrayRange"]="RC:R"+(ba.r==uo.r?"":"["+(ba.r-uo.r)+"]")+"C"+(ba.c==uo.c?"":"["+(ba.c-uo.c)+"]")}if(cs.l&&cs.l.Target&&(ga["ss:HRef"]=escapexml(cs.l.Target),cs.l.Tooltip&&(ga["x:HRefScreenTip"]=escapexml(cs.l.Tooltip))),us["!merges"])for(var xa=us["!merges"],_a=0;_a!=xa.length;++_a)xa[_a].s.c!=uo.c||xa[_a].s.r!=uo.r||(xa[_a].e.c>xa[_a].s.c&&(ga["ss:MergeAcross"]=xa[_a].e.c-xa[_a].s.c),xa[_a].e.r>xa[_a].s.r&&(ga["ss:MergeDown"]=xa[_a].e.r-xa[_a].s.r));var $a="",xl="";switch(cs.t){case"z":if(!hs.sheetStubs)return"";break;case"n":$a="Number",xl=String(cs.v);break;case"b":$a="Boolean",xl=cs.v?"1":"0";break;case"e":$a="Error",xl=BErr[cs.v];break;case"d":$a="DateTime",xl=new Date(cs.v).toISOString(),cs.z==null&&(cs.z=cs.z||table_fmt[14]);break;case"s":$a="String",xl=escapexlml(cs.v||"");break}var yl=get_cell_style(hs.cellXfs,cs,hs);ga["ss:StyleID"]="s"+(21+yl),ga["ss:Index"]=uo.c+1;var wl=cs.v!=null?xl:"",_l=cs.t=="z"?"":'<Data ss:Type="'+$a+'">'+wl+"</Data>";return(cs.c||[]).length>0&&(_l+=write_ws_xlml_comment(cs.c)),writextag("Cell",_l,ga)}function write_ws_xlml_row(cs,is){var us='<Row ss:Index="'+(cs+1)+'"';return is&&(is.hpt&&!is.hpx&&(is.hpx=pt2px(is.hpt)),is.hpx&&(us+=' ss:AutoFitHeight="0" ss:Height="'+is.hpx+'"'),is.hidden&&(us+=' ss:Hidden="1"')),us+">"}function write_ws_xlml_table(cs,is,us,hs){if(!cs["!ref"])return"";var lo=safe_decode_range(cs["!ref"]),co=cs["!merges"]||[],uo=0,ga=[];cs["!cols"]&&cs["!cols"].forEach(function(El,Sl){process_col(El);var Cl=!!El.width,Tl=col_obj_w(Sl,El),Dl={"ss:Index":Sl+1};Cl&&(Dl["ss:Width"]=width2px(Tl.width)),El.hidden&&(Dl["ss:Hidden"]="1"),ga.push(writextag("Column",null,Dl))});for(var ba=Array.isArray(cs),xa=lo.s.r;xa<=lo.e.r;++xa){for(var _a=[write_ws_xlml_row(xa,(cs["!rows"]||[])[xa])],$a=lo.s.c;$a<=lo.e.c;++$a){var xl=!1;for(uo=0;uo!=co.length;++uo)if(!(co[uo].s.c>$a)&&!(co[uo].s.r>xa)&&!(co[uo].e.c<$a)&&!(co[uo].e.r<xa)){(co[uo].s.c!=$a||co[uo].s.r!=xa)&&(xl=!0);break}if(!xl){var yl={r:xa,c:$a},wl=encode_cell(yl),_l=ba?(cs[xa]||[])[$a]:cs[wl];_a.push(write_ws_xlml_cell(_l,wl,cs,is,us,hs,yl))}}_a.push("</Row>"),_a.length>2&&ga.push(_a.join(""))}return ga.join("")}function write_ws_xlml(cs,is,us){var hs=[],lo=us.SheetNames[cs],co=us.Sheets[lo],uo=co?write_ws_xlml_names(co,is,cs,us):"";return uo.length>0&&hs.push("<Names>"+uo+"</Names>"),uo=co?write_ws_xlml_table(co,is,cs,us):"",uo.length>0&&hs.push("<Table>"+uo+"</Table>"),hs.push(write_ws_xlml_wsopts(co,is,cs,us)),hs.join("")}function write_xlml(cs,is){is||(is={}),cs.SSF||(cs.SSF=dup(table_fmt)),cs.SSF&&(make_ssf(),SSF_load_table(cs.SSF),is.revssf=evert_num(cs.SSF),is.revssf[cs.SSF[65535]]=0,is.ssf=cs.SSF,is.cellXfs=[],get_cell_style(is.cellXfs,{},{revssf:{General:0}}));var us=[];us.push(write_props_xlml(cs,is)),us.push(write_wb_xlml()),us.push(""),us.push("");for(var hs=0;hs<cs.SheetNames.length;++hs)us.push(writextag("Worksheet",write_ws_xlml(hs,is,cs),{"ss:Name":escapexml(cs.SheetNames[hs])}));return us[2]=write_sty_xlml(cs,is),us[3]=write_names_xlml(cs),XML_HEADER+writextag("Workbook",us.join(""),{xmlns:XLMLNS.ss,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:ss":XLMLNS.ss,"xmlns:dt":XLMLNS.dt,"xmlns:html":XLMLNS.html})}var PSCLSID={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function write_xls_props(cs,is){var us=[],hs=[],lo=[],co=0,uo,ga=evert_key(DocSummaryPIDDSI,"n"),ba=evert_key(SummaryPIDSI,"n");if(cs.Props)for(uo=keys(cs.Props),co=0;co<uo.length;++co)(Object.prototype.hasOwnProperty.call(ga,uo[co])?us:Object.prototype.hasOwnProperty.call(ba,uo[co])?hs:lo).push([uo[co],cs.Props[uo[co]]]);if(cs.Custprops)for(uo=keys(cs.Custprops),co=0;co<uo.length;++co)Object.prototype.hasOwnProperty.call(cs.Props||{},uo[co])||(Object.prototype.hasOwnProperty.call(ga,uo[co])?us:Object.prototype.hasOwnProperty.call(ba,uo[co])?hs:lo).push([uo[co],cs.Custprops[uo[co]]]);var xa=[];for(co=0;co<lo.length;++co)XLSPSSkip.indexOf(lo[co][0])>-1||PseudoPropsPairs.indexOf(lo[co][0])>-1||lo[co][1]!=null&&xa.push(lo[co]);hs.length&&CFB.utils.cfb_add(is,"/SummaryInformation",write_PropertySetStream(hs,PSCLSID.SI,ba,SummaryPIDSI)),(us.length||xa.length)&&CFB.utils.cfb_add(is,"/DocumentSummaryInformation",write_PropertySetStream(us,PSCLSID.DSI,ga,DocSummaryPIDDSI,xa.length?xa:null,PSCLSID.UDI))}function write_xlscfb(cs,is){var us=is||{},hs=CFB.utils.cfb_new({root:"R"}),lo="/Workbook";switch(us.bookType||"xls"){case"xls":us.bookType="biff8";case"xla":us.bookType||(us.bookType="xla");case"biff8":lo="/Workbook",us.biff=8;break;case"biff5":lo="/Book",us.biff=5;break;default:throw new Error("invalid type "+us.bookType+" for XLS CFB")}return CFB.utils.cfb_add(hs,lo,write_biff_buf(cs,us)),us.biff==8&&(cs.Props||cs.Custprops)&&write_xls_props(cs,hs),us.biff==8&&cs.vbaraw&&fill_vba_xls(hs,CFB.read(cs.vbaraw,{type:typeof cs.vbaraw=="string"?"binary":"buffer"})),hs}var XLSBRecordEnum={0:{f:parse_BrtRowHdr},1:{f:parse_BrtCellBlank},2:{f:parse_BrtCellRk},3:{f:parse_BrtCellError},4:{f:parse_BrtCellBool},5:{f:parse_BrtCellReal},6:{f:parse_BrtCellSt},7:{f:parse_BrtCellIsst},8:{f:parse_BrtFmlaString},9:{f:parse_BrtFmlaNum},10:{f:parse_BrtFmlaBool},11:{f:parse_BrtFmlaError},12:{f:parse_BrtShortBlank},13:{f:parse_BrtShortRk},14:{f:parse_BrtShortError},15:{f:parse_BrtShortBool},16:{f:parse_BrtShortReal},17:{f:parse_BrtShortSt},18:{f:parse_BrtShortIsst},19:{f:parse_RichStr},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:parse_BrtName},40:{},42:{},43:{f:parse_BrtFont},44:{f:parse_BrtFmt},45:{f:parse_BrtFill},46:{f:parse_BrtBorder},47:{f:parse_BrtXF},48:{},49:{f:parse_Int32LE},50:{},51:{f:parse_BrtMdb},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:parse_ColInfo},62:{f:parse_BrtCellRString},63:{f:parse_BrtCalcChainItem$},64:{f:parse_BrtDVal},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:parsenoop,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:parse_BrtBeginWsView},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:parse_BrtWsProp},148:{f:parse_BrtWsDim,p:16},151:{f:parse_BrtPane},152:{},153:{f:parse_BrtWbProp},154:{},155:{},156:{f:parse_BrtBundleSh},157:{},158:{},159:{T:1,f:parse_BrtBeginSst},160:{T:-1},161:{T:1,f:parse_UncheckedRfX},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:parse_BrtMergeCell},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:parse_BrtMdtinfo},336:{T:-1},337:{f:parse_BrtBeginEsmdb,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:parse_RelID},357:{},358:{},359:{},360:{T:1},361:{},362:{f:parse_ExternSheet},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:parse_BrtArrFmla},427:{f:parse_BrtShrFmla},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:parse_BrtMargins},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:parse_BrtWsFmtInfo},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:parse_BrtHLink},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:parse_RelID},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:parse_BrtCommentAuthor},633:{T:1},634:{T:-1},635:{T:1,f:parse_BrtBeginComment},636:{T:-1},637:{f:parse_BrtCommentText},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:parse_BrtCsProp},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:parse_BrtDVal14},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function write_biff_rec(cs,is,us,hs){var lo=is;if(!isNaN(lo)){var co=hs||(us||[]).length||0,uo=cs.next(4);uo.write_shift(2,lo),uo.write_shift(2,co),co>0&&is_buf(us)&&cs.push(us)}}function write_biff_continue(cs,is,us,hs){var lo=(us||[]).length||0;if(lo<=8224)return write_biff_rec(cs,is,us,lo);var co=is;if(!isNaN(co)){for(var uo=us.parts||[],ga=0,ba=0,xa=0;xa+(uo[ga]||8224)<=8224;)xa+=uo[ga]||8224,ga++;var _a=cs.next(4);for(_a.write_shift(2,co),_a.write_shift(2,xa),cs.push(us.slice(ba,ba+xa)),ba+=xa;ba<lo;){for(_a=cs.next(4),_a.write_shift(2,60),xa=0;xa+(uo[ga]||8224)<=8224;)xa+=uo[ga]||8224,ga++;_a.write_shift(2,xa),cs.push(us.slice(ba,ba+xa)),ba+=xa}}}function write_BIFF2Cell(cs,is,us){return cs||(cs=new_buf(7)),cs.write_shift(2,is),cs.write_shift(2,us),cs.write_shift(2,0),cs.write_shift(1,0),cs}function write_BIFF2BERR(cs,is,us,hs){var lo=new_buf(9);return write_BIFF2Cell(lo,cs,is),write_Bes(us,hs||"b",lo),lo}function write_BIFF2LABEL(cs,is,us){var hs=new_buf(8+2*us.length);return write_BIFF2Cell(hs,cs,is),hs.write_shift(1,us.length),hs.write_shift(us.length,us,"sbcs"),hs.l<hs.length?hs.slice(0,hs.l):hs}function write_ws_biff2_cell(cs,is,us,hs){if(is.v!=null)switch(is.t){case"d":case"n":var lo=is.t=="d"?datenum(parseDate(is.v)):is.v;lo==(lo|0)&&lo>=0&&lo<65536?write_biff_rec(cs,2,write_BIFF2INT(us,hs,lo)):write_biff_rec(cs,3,write_BIFF2NUM(us,hs,lo));return;case"b":case"e":write_biff_rec(cs,5,write_BIFF2BERR(us,hs,is.v,is.t));return;case"s":case"str":write_biff_rec(cs,4,write_BIFF2LABEL(us,hs,(is.v||"").slice(0,255)));return}write_biff_rec(cs,1,write_BIFF2Cell(null,us,hs))}function write_ws_biff2(cs,is,us,hs){var lo=Array.isArray(is),co=safe_decode_range(is["!ref"]||"A1"),uo,ga="",ba=[];if(co.e.c>255||co.e.r>16383){if(hs.WTF)throw new Error("Range "+(is["!ref"]||"A1")+" exceeds format limit A1:IV16384");co.e.c=Math.min(co.e.c,255),co.e.r=Math.min(co.e.c,16383),uo=encode_range(co)}for(var xa=co.s.r;xa<=co.e.r;++xa){ga=encode_row(xa);for(var _a=co.s.c;_a<=co.e.c;++_a){xa===co.s.r&&(ba[_a]=encode_col(_a)),uo=ba[_a]+ga;var $a=lo?(is[xa]||[])[_a]:is[uo];$a&&write_ws_biff2_cell(cs,$a,xa,_a)}}}function write_biff2_buf(cs,is){for(var us=is||{},hs=buf_array(),lo=0,co=0;co<cs.SheetNames.length;++co)cs.SheetNames[co]==us.sheet&&(lo=co);if(lo==0&&us.sheet&&cs.SheetNames[0]!=us.sheet)throw new Error("Sheet not found: "+us.sheet);return write_biff_rec(hs,us.biff==4?1033:us.biff==3?521:9,write_BOF(cs,16,us)),write_ws_biff2(hs,cs.Sheets[cs.SheetNames[lo]],lo,us),write_biff_rec(hs,10),hs.end()}function write_FONTS_biff8(cs,is,us){write_biff_rec(cs,49,write_Font({sz:12,name:"Arial"},us))}function write_FMTS_biff8(cs,is,us){is&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(hs){for(var lo=hs[0];lo<=hs[1];++lo)is[lo]!=null&&write_biff_rec(cs,1054,write_Format(lo,is[lo],us))})}function write_FEAT(cs,is){var us=new_buf(19);us.write_shift(4,2151),us.write_shift(4,0),us.write_shift(4,0),us.write_shift(2,3),us.write_shift(1,1),us.write_shift(4,0),write_biff_rec(cs,2151,us),us=new_buf(39),us.write_shift(4,2152),us.write_shift(4,0),us.write_shift(4,0),us.write_shift(2,3),us.write_shift(1,0),us.write_shift(4,0),us.write_shift(2,1),us.write_shift(4,4),us.write_shift(2,0),write_Ref8U(safe_decode_range(is["!ref"]||"A1"),us),us.write_shift(4,4),write_biff_rec(cs,2152,us)}function write_CELLXFS_biff8(cs,is){for(var us=0;us<16;++us)write_biff_rec(cs,224,write_XF({numFmtId:0,style:!0},0,is));is.cellXfs.forEach(function(hs){write_biff_rec(cs,224,write_XF(hs,0,is))})}function write_ws_biff8_hlinks(cs,is){for(var us=0;us<is["!links"].length;++us){var hs=is["!links"][us];write_biff_rec(cs,440,write_HLink(hs)),hs[1].Tooltip&&write_biff_rec(cs,2048,write_HLinkTooltip(hs))}delete is["!links"]}function write_ws_cols_biff8(cs,is){if(is){var us=0;is.forEach(function(hs,lo){++us<=256&&hs&&write_biff_rec(cs,125,write_ColInfo(col_obj_w(lo,hs),lo))})}}function write_ws_biff8_cell(cs,is,us,hs,lo){var co=16+get_cell_style(lo.cellXfs,is,lo);if(is.v==null&&!is.bf){write_biff_rec(cs,513,write_XLSCell(us,hs,co));return}if(is.bf)write_biff_rec(cs,6,write_Formula(is,us,hs,lo,co));else switch(is.t){case"d":case"n":var uo=is.t=="d"?datenum(parseDate(is.v)):is.v;write_biff_rec(cs,515,write_Number(us,hs,uo,co));break;case"b":case"e":write_biff_rec(cs,517,write_BoolErr(us,hs,is.v,co,lo,is.t));break;case"s":case"str":if(lo.bookSST){var ga=get_sst_id(lo.Strings,is.v,lo.revStrings);write_biff_rec(cs,253,write_LabelSst(us,hs,ga,co))}else write_biff_rec(cs,516,write_Label(us,hs,(is.v||"").slice(0,255),co,lo));break;default:write_biff_rec(cs,513,write_XLSCell(us,hs,co))}}function write_ws_biff8(cs,is,us){var hs=buf_array(),lo=us.SheetNames[cs],co=us.Sheets[lo]||{},uo=(us||{}).Workbook||{},ga=(uo.Sheets||[])[cs]||{},ba=Array.isArray(co),xa=is.biff==8,_a,$a="",xl=[],yl=safe_decode_range(co["!ref"]||"A1"),wl=xa?65536:16384;if(yl.e.c>255||yl.e.r>=wl){if(is.WTF)throw new Error("Range "+(co["!ref"]||"A1")+" exceeds format limit A1:IV16384");yl.e.c=Math.min(yl.e.c,255),yl.e.r=Math.min(yl.e.c,wl-1)}write_biff_rec(hs,2057,write_BOF(us,16,is)),write_biff_rec(hs,13,writeuint16(1)),write_biff_rec(hs,12,writeuint16(100)),write_biff_rec(hs,15,writebool(!0)),write_biff_rec(hs,17,writebool(!1)),write_biff_rec(hs,16,write_Xnum(.001)),write_biff_rec(hs,95,writebool(!0)),write_biff_rec(hs,42,writebool(!1)),write_biff_rec(hs,43,writebool(!1)),write_biff_rec(hs,130,writeuint16(1)),write_biff_rec(hs,128,write_Guts()),write_biff_rec(hs,131,writebool(!1)),write_biff_rec(hs,132,writebool(!1)),xa&&write_ws_cols_biff8(hs,co["!cols"]),write_biff_rec(hs,512,write_Dimensions(yl,is)),xa&&(co["!links"]=[]);for(var _l=yl.s.r;_l<=yl.e.r;++_l){$a=encode_row(_l);for(var El=yl.s.c;El<=yl.e.c;++El){_l===yl.s.r&&(xl[El]=encode_col(El)),_a=xl[El]+$a;var Sl=ba?(co[_l]||[])[El]:co[_a];Sl&&(write_ws_biff8_cell(hs,Sl,_l,El,is),xa&&Sl.l&&co["!links"].push([_a,Sl.l]))}}var Cl=ga.CodeName||ga.name||lo;return xa&&write_biff_rec(hs,574,write_Window2((uo.Views||[])[0])),xa&&(co["!merges"]||[]).length&&write_biff_rec(hs,229,write_MergeCells(co["!merges"])),xa&&write_ws_biff8_hlinks(hs,co),write_biff_rec(hs,442,write_XLUnicodeString(Cl)),xa&&write_FEAT(hs,co),write_biff_rec(hs,10),hs.end()}function write_biff8_global(cs,is,us){var hs=buf_array(),lo=(cs||{}).Workbook||{},co=lo.Sheets||[],uo=lo.WBProps||{},ga=us.biff==8,ba=us.biff==5;if(write_biff_rec(hs,2057,write_BOF(cs,5,us)),us.bookType=="xla"&&write_biff_rec(hs,135),write_biff_rec(hs,225,ga?writeuint16(1200):null),write_biff_rec(hs,193,writezeroes(2)),ba&&write_biff_rec(hs,191),ba&&write_biff_rec(hs,192),write_biff_rec(hs,226),write_biff_rec(hs,92,write_WriteAccess("SheetJS",us)),write_biff_rec(hs,66,writeuint16(ga?1200:1252)),ga&&write_biff_rec(hs,353,writeuint16(0)),ga&&write_biff_rec(hs,448),write_biff_rec(hs,317,write_RRTabId(cs.SheetNames.length)),ga&&cs.vbaraw&&write_biff_rec(hs,211),ga&&cs.vbaraw){var xa=uo.CodeName||"ThisWorkbook";write_biff_rec(hs,442,write_XLUnicodeString(xa))}write_biff_rec(hs,156,writeuint16(17)),write_biff_rec(hs,25,writebool(!1)),write_biff_rec(hs,18,writebool(!1)),write_biff_rec(hs,19,writeuint16(0)),ga&&write_biff_rec(hs,431,writebool(!1)),ga&&write_biff_rec(hs,444,writeuint16(0)),write_biff_rec(hs,61,write_Window1()),write_biff_rec(hs,64,writebool(!1)),write_biff_rec(hs,141,writeuint16(0)),write_biff_rec(hs,34,writebool(safe1904(cs)=="true")),write_biff_rec(hs,14,writebool(!0)),ga&&write_biff_rec(hs,439,writebool(!1)),write_biff_rec(hs,218,writeuint16(0)),write_FONTS_biff8(hs,cs,us),write_FMTS_biff8(hs,cs.SSF,us),write_CELLXFS_biff8(hs,us),ga&&write_biff_rec(hs,352,writebool(!1));var _a=hs.end(),$a=buf_array();ga&&write_biff_rec($a,140,write_Country()),ga&&us.Strings&&write_biff_continue($a,252,write_SST(us.Strings)),write_biff_rec($a,10);var xl=$a.end(),yl=buf_array(),wl=0,_l=0;for(_l=0;_l<cs.SheetNames.length;++_l)wl+=(ga?12:11)+(ga?2:1)*cs.SheetNames[_l].length;var El=_a.length+wl+xl.length;for(_l=0;_l<cs.SheetNames.length;++_l){var Sl=co[_l]||{};write_biff_rec(yl,133,write_BoundSheet8({pos:El,hs:Sl.Hidden||0,dt:0,name:cs.SheetNames[_l]},us)),El+=is[_l].length}var Cl=yl.end();if(wl!=Cl.length)throw new Error("BS8 "+wl+" != "+Cl.length);var Tl=[];return _a.length&&Tl.push(_a),Cl.length&&Tl.push(Cl),xl.length&&Tl.push(xl),bconcat(Tl)}function write_biff8_buf(cs,is){var us=is||{},hs=[];cs&&!cs.SSF&&(cs.SSF=dup(table_fmt)),cs&&cs.SSF&&(make_ssf(),SSF_load_table(cs.SSF),us.revssf=evert_num(cs.SSF),us.revssf[cs.SSF[65535]]=0,us.ssf=cs.SSF),us.Strings=[],us.Strings.Count=0,us.Strings.Unique=0,fix_write_opts(us),us.cellXfs=[],get_cell_style(us.cellXfs,{},{revssf:{General:0}}),cs.Props||(cs.Props={});for(var lo=0;lo<cs.SheetNames.length;++lo)hs[hs.length]=write_ws_biff8(lo,us,cs);return hs.unshift(write_biff8_global(cs,hs,us)),bconcat(hs)}function write_biff_buf(cs,is){for(var us=0;us<=cs.SheetNames.length;++us){var hs=cs.Sheets[cs.SheetNames[us]];if(!(!hs||!hs["!ref"])){var lo=decode_range(hs["!ref"]);lo.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+cs.SheetNames[us]+"' extends beyond column IV (255).  Data may be lost.")}}var co=is||{};switch(co.biff||2){case 8:case 5:return write_biff8_buf(cs,is);case 4:case 3:case 2:return write_biff2_buf(cs,is)}throw new Error("invalid type "+co.bookType+" for BIFF")}function make_html_row(cs,is,us,hs){for(var lo=cs["!merges"]||[],co=[],uo=is.s.c;uo<=is.e.c;++uo){for(var ga=0,ba=0,xa=0;xa<lo.length;++xa)if(!(lo[xa].s.r>us||lo[xa].s.c>uo)&&!(lo[xa].e.r<us||lo[xa].e.c<uo)){if(lo[xa].s.r<us||lo[xa].s.c<uo){ga=-1;break}ga=lo[xa].e.r-lo[xa].s.r+1,ba=lo[xa].e.c-lo[xa].s.c+1;break}if(!(ga<0)){var _a=encode_cell({r:us,c:uo}),$a=hs.dense?(cs[us]||[])[uo]:cs[_a],xl=$a&&$a.v!=null&&($a.h||escapehtml($a.w||(format_cell($a),$a.w)||""))||"",yl={};ga>1&&(yl.rowspan=ga),ba>1&&(yl.colspan=ba),hs.editable?xl='<span contenteditable="true">'+xl+"</span>":$a&&(yl["data-t"]=$a&&$a.t||"z",$a.v!=null&&(yl["data-v"]=$a.v),$a.z!=null&&(yl["data-z"]=$a.z),$a.l&&($a.l.Target||"#").charAt(0)!="#"&&(xl='<a href="'+$a.l.Target+'">'+xl+"</a>")),yl.id=(hs.id||"sjs")+"-"+_a,co.push(writextag("td",xl,yl))}}var wl="<tr>";return wl+co.join("")+"</tr>"}var HTML_BEGIN='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',HTML_END="</body></html>";function make_html_preamble(cs,is,us){var hs=[];return hs.join("")+"<table"+(us&&us.id?' id="'+us.id+'"':"")+">"}function sheet_to_html(cs,is){var us=is||{},hs=us.header!=null?us.header:HTML_BEGIN,lo=us.footer!=null?us.footer:HTML_END,co=[hs],uo=decode_range(cs["!ref"]);us.dense=Array.isArray(cs),co.push(make_html_preamble(cs,uo,us));for(var ga=uo.s.r;ga<=uo.e.r;++ga)co.push(make_html_row(cs,uo,ga,us));return co.push("</table>"+lo),co.join("")}function sheet_add_dom(cs,is,us){var hs=us||{},lo=0,co=0;if(hs.origin!=null)if(typeof hs.origin=="number")lo=hs.origin;else{var uo=typeof hs.origin=="string"?decode_cell(hs.origin):hs.origin;lo=uo.r,co=uo.c}var ga=is.getElementsByTagName("tr"),ba=Math.min(hs.sheetRows||1e7,ga.length),xa={s:{r:0,c:0},e:{r:lo,c:co}};if(cs["!ref"]){var _a=decode_range(cs["!ref"]);xa.s.r=Math.min(xa.s.r,_a.s.r),xa.s.c=Math.min(xa.s.c,_a.s.c),xa.e.r=Math.max(xa.e.r,_a.e.r),xa.e.c=Math.max(xa.e.c,_a.e.c),lo==-1&&(xa.e.r=lo=_a.e.r+1)}var $a=[],xl=0,yl=cs["!rows"]||(cs["!rows"]=[]),wl=0,_l=0,El=0,Sl=0,Cl=0,Tl=0;for(cs["!cols"]||(cs["!cols"]=[]);wl<ga.length&&_l<ba;++wl){var Dl=ga[wl];if(is_dom_element_hidden(Dl)){if(hs.display)continue;yl[_l]={hidden:!0}}var Fl=Dl.children;for(El=Sl=0;El<Fl.length;++El){var Pl=Fl[El];if(!(hs.display&&is_dom_element_hidden(Pl))){var Al=Pl.hasAttribute("data-v")?Pl.getAttribute("data-v"):Pl.hasAttribute("v")?Pl.getAttribute("v"):htmldecode(Pl.innerHTML),Rl=Pl.getAttribute("data-z")||Pl.getAttribute("z");for(xl=0;xl<$a.length;++xl){var Il=$a[xl];Il.s.c==Sl+co&&Il.s.r<_l+lo&&_l+lo<=Il.e.r&&(Sl=Il.e.c+1-co,xl=-1)}Tl=+Pl.getAttribute("colspan")||1,((Cl=+Pl.getAttribute("rowspan")||1)>1||Tl>1)&&$a.push({s:{r:_l+lo,c:Sl+co},e:{r:_l+lo+(Cl||1)-1,c:Sl+co+(Tl||1)-1}});var Bl={t:"s",v:Al},Ol=Pl.getAttribute("data-t")||Pl.getAttribute("t")||"";Al!=null&&(Al.length==0?Bl.t=Ol||"z":hs.raw||Al.trim().length==0||Ol=="s"||(Al==="TRUE"?Bl={t:"b",v:!0}:Al==="FALSE"?Bl={t:"b",v:!1}:isNaN(fuzzynum(Al))?isNaN(fuzzydate(Al).getDate())||(Bl={t:"d",v:parseDate(Al)},hs.cellDates||(Bl={t:"n",v:datenum(Bl.v)}),Bl.z=hs.dateNF||table_fmt[14]):Bl={t:"n",v:fuzzynum(Al)})),Bl.z===void 0&&Rl!=null&&(Bl.z=Rl);var zl="",Hl=Pl.getElementsByTagName("A");if(Hl&&Hl.length)for(var ou=0;ou<Hl.length&&!(Hl[ou].hasAttribute("href")&&(zl=Hl[ou].getAttribute("href"),zl.charAt(0)!="#"));++ou);zl&&zl.charAt(0)!="#"&&(Bl.l={Target:zl}),hs.dense?(cs[_l+lo]||(cs[_l+lo]=[]),cs[_l+lo][Sl+co]=Bl):cs[encode_cell({c:Sl+co,r:_l+lo})]=Bl,xa.e.c<Sl+co&&(xa.e.c=Sl+co),Sl+=Tl}}++_l}return $a.length&&(cs["!merges"]=(cs["!merges"]||[]).concat($a)),xa.e.r=Math.max(xa.e.r,_l-1+lo),cs["!ref"]=encode_range(xa),_l>=ba&&(cs["!fullref"]=encode_range((xa.e.r=ga.length-wl+_l-1+lo,xa))),cs}function parse_dom_table(cs,is){var us=is||{},hs=us.dense?[]:{};return sheet_add_dom(hs,cs,is)}function table_to_book(cs,is){return sheet_to_workbook(parse_dom_table(cs,is),is)}function is_dom_element_hidden(cs){var is="",us=get_get_computed_style_function(cs);return us&&(is=us(cs).getPropertyValue("display")),is||(is=cs.style&&cs.style.display),is==="none"}function get_get_computed_style_function(cs){return cs.ownerDocument.defaultView&&typeof cs.ownerDocument.defaultView.getComputedStyle=="function"?cs.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var write_styles_ods=function(){var cs=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),is="<office:document-styles "+wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+cs+"</office:document-styles>";return function(){return XML_HEADER+is}}(),write_content_ods=function(){var cs=function(co){return escapexml(co).replace(/  +/g,function(uo){return'<text:s text:c="'+uo.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},is=`          <table:table-cell />
`,us=`          <table:covered-table-cell/>
`,hs=function(co,uo,ga){var ba=[];ba.push('      <table:table table:name="'+escapexml(uo.SheetNames[ga])+`" table:style-name="ta1">
`);var xa=0,_a=0,$a=decode_range(co["!ref"]||"A1"),xl=co["!merges"]||[],yl=0,wl=Array.isArray(co);if(co["!cols"])for(_a=0;_a<=$a.e.c;++_a)ba.push("        <table:table-column"+(co["!cols"][_a]?' table:style-name="co'+co["!cols"][_a].ods+'"':"")+`></table:table-column>
`);var _l="",El=co["!rows"]||[];for(xa=0;xa<$a.s.r;++xa)_l=El[xa]?' table:style-name="ro'+El[xa].ods+'"':"",ba.push("        <table:table-row"+_l+`></table:table-row>
`);for(;xa<=$a.e.r;++xa){for(_l=El[xa]?' table:style-name="ro'+El[xa].ods+'"':"",ba.push("        <table:table-row"+_l+`>
`),_a=0;_a<$a.s.c;++_a)ba.push(is);for(;_a<=$a.e.c;++_a){var Sl=!1,Cl={},Tl="";for(yl=0;yl!=xl.length;++yl)if(!(xl[yl].s.c>_a)&&!(xl[yl].s.r>xa)&&!(xl[yl].e.c<_a)&&!(xl[yl].e.r<xa)){(xl[yl].s.c!=_a||xl[yl].s.r!=xa)&&(Sl=!0),Cl["table:number-columns-spanned"]=xl[yl].e.c-xl[yl].s.c+1,Cl["table:number-rows-spanned"]=xl[yl].e.r-xl[yl].s.r+1;break}if(Sl){ba.push(us);continue}var Dl=encode_cell({r:xa,c:_a}),Fl=wl?(co[xa]||[])[_a]:co[Dl];if(Fl&&Fl.f&&(Cl["table:formula"]=escapexml(csf_to_ods_formula(Fl.f)),Fl.F&&Fl.F.slice(0,Dl.length)==Dl)){var Pl=decode_range(Fl.F);Cl["table:number-matrix-columns-spanned"]=Pl.e.c-Pl.s.c+1,Cl["table:number-matrix-rows-spanned"]=Pl.e.r-Pl.s.r+1}if(!Fl){ba.push(is);continue}switch(Fl.t){case"b":Tl=Fl.v?"TRUE":"FALSE",Cl["office:value-type"]="boolean",Cl["office:boolean-value"]=Fl.v?"true":"false";break;case"n":Tl=Fl.w||String(Fl.v||0),Cl["office:value-type"]="float",Cl["office:value"]=Fl.v||0;break;case"s":case"str":Tl=Fl.v==null?"":Fl.v,Cl["office:value-type"]="string";break;case"d":Tl=Fl.w||parseDate(Fl.v).toISOString(),Cl["office:value-type"]="date",Cl["office:date-value"]=parseDate(Fl.v).toISOString(),Cl["table:style-name"]="ce1";break;default:ba.push(is);continue}var Al=cs(Tl);if(Fl.l&&Fl.l.Target){var Rl=Fl.l.Target;Rl=Rl.charAt(0)=="#"?"#"+csf_to_ods_3D(Rl.slice(1)):Rl,Rl.charAt(0)!="#"&&!Rl.match(/^\w+:/)&&(Rl="../"+Rl),Al=writextag("text:a",Al,{"xlink:href":Rl.replace(/&/g,"&amp;")})}ba.push("          "+writextag("table:table-cell",writextag("text:p",Al,{}),Cl)+`
`)}ba.push(`        </table:table-row>
`)}return ba.push(`      </table:table>
`),ba.join("")},lo=function(co,uo){co.push(` <office:automatic-styles>
`),co.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),co.push(`   <number:month number:style="long"/>
`),co.push(`   <number:text>/</number:text>
`),co.push(`   <number:day number:style="long"/>
`),co.push(`   <number:text>/</number:text>
`),co.push(`   <number:year/>
`),co.push(`  </number:date-style>
`);var ga=0;uo.SheetNames.map(function(xa){return uo.Sheets[xa]}).forEach(function(xa){if(xa&&xa["!cols"]){for(var _a=0;_a<xa["!cols"].length;++_a)if(xa["!cols"][_a]){var $a=xa["!cols"][_a];if($a.width==null&&$a.wpx==null&&$a.wch==null)continue;process_col($a),$a.ods=ga;var xl=xa["!cols"][_a].wpx+"px";co.push('  <style:style style:name="co'+ga+`" style:family="table-column">
`),co.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+xl+`"/>
`),co.push(`  </style:style>
`),++ga}}});var ba=0;uo.SheetNames.map(function(xa){return uo.Sheets[xa]}).forEach(function(xa){if(xa&&xa["!rows"]){for(var _a=0;_a<xa["!rows"].length;++_a)if(xa["!rows"][_a]){xa["!rows"][_a].ods=ba;var $a=xa["!rows"][_a].hpx+"px";co.push('  <style:style style:name="ro'+ba+`" style:family="table-row">
`),co.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+$a+`"/>
`),co.push(`  </style:style>
`),++ba}}}),co.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),co.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),co.push(`  </style:style>
`),co.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),co.push(` </office:automatic-styles>
`)};return function(uo,ga){var ba=[XML_HEADER],xa=wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),_a=wxt_helper({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});ga.bookType=="fods"?(ba.push("<office:document"+xa+_a+`>
`),ba.push(write_meta_ods().replace(/office:document-meta/g,"office:meta"))):ba.push("<office:document-content"+xa+`>
`),lo(ba,uo),ba.push(`  <office:body>
`),ba.push(`    <office:spreadsheet>
`);for(var $a=0;$a!=uo.SheetNames.length;++$a)ba.push(hs(uo.Sheets[uo.SheetNames[$a]],uo,$a));return ba.push(`    </office:spreadsheet>
`),ba.push(`  </office:body>
`),ga.bookType=="fods"?ba.push("</office:document>"):ba.push("</office:document-content>"),ba.join("")}}();function write_ods(cs,is){if(is.bookType=="fods")return write_content_ods(cs,is);var us=zip_new(),hs="",lo=[],co=[];return hs="mimetype",zip_add_file(us,hs,"application/vnd.oasis.opendocument.spreadsheet"),hs="content.xml",zip_add_file(us,hs,write_content_ods(cs,is)),lo.push([hs,"text/xml"]),co.push([hs,"ContentFile"]),hs="styles.xml",zip_add_file(us,hs,write_styles_ods(cs,is)),lo.push([hs,"text/xml"]),co.push([hs,"StylesFile"]),hs="meta.xml",zip_add_file(us,hs,XML_HEADER+write_meta_ods()),lo.push([hs,"text/xml"]),co.push([hs,"MetadataFile"]),hs="manifest.rdf",zip_add_file(us,hs,write_rdf(co)),lo.push([hs,"application/rdf+xml"]),hs="META-INF/manifest.xml",zip_add_file(us,hs,write_manifest(lo)),us}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function u8_to_dataview(cs){return new DataView(cs.buffer,cs.byteOffset,cs.byteLength)}function stru8(cs){return typeof TextEncoder<"u"?new TextEncoder().encode(cs):s2a(utf8write(cs))}function u8contains(cs,is){e:for(var us=0;us<=cs.length-is.length;++us){for(var hs=0;hs<is.length;++hs)if(cs[us+hs]!=is[hs])continue e;return!0}return!1}function u8concat(cs){var is=cs.reduce(function(lo,co){return lo+co.length},0),us=new Uint8Array(is),hs=0;return cs.forEach(function(lo){us.set(lo,hs),hs+=lo.length}),us}function writeDecimal128LE(cs,is,us){var hs=Math.floor(us==0?0:Math.LOG10E*Math.log(Math.abs(us)))+6176-20,lo=us/Math.pow(10,hs-6176);cs[is+15]|=hs>>7,cs[is+14]|=(hs&127)<<1;for(var co=0;lo>=1;++co,lo/=256)cs[is+co]=lo&255;cs[is+15]|=us>=0?0:128}function parse_varint49(cs,is){var us=is?is[0]:0,hs=cs[us]&127;e:if(cs[us++]>=128&&(hs|=(cs[us]&127)<<7,cs[us++]<128||(hs|=(cs[us]&127)<<14,cs[us++]<128)||(hs|=(cs[us]&127)<<21,cs[us++]<128)||(hs+=(cs[us]&127)*Math.pow(2,28),++us,cs[us++]<128)||(hs+=(cs[us]&127)*Math.pow(2,35),++us,cs[us++]<128)||(hs+=(cs[us]&127)*Math.pow(2,42),++us,cs[us++]<128)))break e;return is&&(is[0]=us),hs}function write_varint49(cs){var is=new Uint8Array(7);is[0]=cs&127;var us=1;e:if(cs>127){if(is[us-1]|=128,is[us]=cs>>7&127,++us,cs<=16383||(is[us-1]|=128,is[us]=cs>>14&127,++us,cs<=2097151)||(is[us-1]|=128,is[us]=cs>>21&127,++us,cs<=268435455)||(is[us-1]|=128,is[us]=cs/256>>>21&127,++us,cs<=34359738367)||(is[us-1]|=128,is[us]=cs/65536>>>21&127,++us,cs<=4398046511103))break e;is[us-1]|=128,is[us]=cs/16777216>>>21&127,++us}return is.slice(0,us)}function varint_to_i32(cs){var is=0,us=cs[is]&127;e:if(cs[is++]>=128){if(us|=(cs[is]&127)<<7,cs[is++]<128||(us|=(cs[is]&127)<<14,cs[is++]<128)||(us|=(cs[is]&127)<<21,cs[is++]<128))break e;us|=(cs[is]&127)<<28}return us}function parse_shallow(cs){for(var is=[],us=[0];us[0]<cs.length;){var hs=us[0],lo=parse_varint49(cs,us),co=lo&7;lo=Math.floor(lo/8);var uo=0,ga;if(lo==0)break;switch(co){case 0:{for(var ba=us[0];cs[us[0]++]>=128;);ga=cs.slice(ba,us[0])}break;case 5:uo=4,ga=cs.slice(us[0],us[0]+uo),us[0]+=uo;break;case 1:uo=8,ga=cs.slice(us[0],us[0]+uo),us[0]+=uo;break;case 2:uo=parse_varint49(cs,us),ga=cs.slice(us[0],us[0]+uo),us[0]+=uo;break;case 3:case 4:default:throw new Error("PB Type ".concat(co," for Field ").concat(lo," at offset ").concat(hs))}var xa={data:ga,type:co};is[lo]==null?is[lo]=[xa]:is[lo].push(xa)}return is}function write_shallow(cs){var is=[];return cs.forEach(function(us,hs){us.forEach(function(lo){lo.data&&(is.push(write_varint49(hs*8+lo.type)),lo.type==2&&is.push(write_varint49(lo.data.length)),is.push(lo.data))})}),u8concat(is)}function parse_iwa_file(cs){for(var is,us=[],hs=[0];hs[0]<cs.length;){var lo=parse_varint49(cs,hs),co=parse_shallow(cs.slice(hs[0],hs[0]+lo));hs[0]+=lo;var uo={id:varint_to_i32(co[1][0].data),messages:[]};co[2].forEach(function(ga){var ba=parse_shallow(ga.data),xa=varint_to_i32(ba[3][0].data);uo.messages.push({meta:ba,data:cs.slice(hs[0],hs[0]+xa)}),hs[0]+=xa}),(is=co[3])!=null&&is[0]&&(uo.merge=varint_to_i32(co[3][0].data)>>>0>0),us.push(uo)}return us}function write_iwa_file(cs){var is=[];return cs.forEach(function(us){var hs=[];hs[1]=[{data:write_varint49(us.id),type:0}],hs[2]=[],us.merge!=null&&(hs[3]=[{data:write_varint49(+!!us.merge),type:0}]);var lo=[];us.messages.forEach(function(uo){lo.push(uo.data),uo.meta[3]=[{type:0,data:write_varint49(uo.data.length)}],hs[2].push({data:write_shallow(uo.meta),type:2})});var co=write_shallow(hs);is.push(write_varint49(co.length)),is.push(co),lo.forEach(function(uo){return is.push(uo)})}),u8concat(is)}function parse_snappy_chunk(cs,is){if(cs!=0)throw new Error("Unexpected Snappy chunk type ".concat(cs));for(var us=[0],hs=parse_varint49(is,us),lo=[];us[0]<is.length;){var co=is[us[0]]&3;if(co==0){var uo=is[us[0]++]>>2;if(uo<60)++uo;else{var ga=uo-59;uo=is[us[0]],ga>1&&(uo|=is[us[0]+1]<<8),ga>2&&(uo|=is[us[0]+2]<<16),ga>3&&(uo|=is[us[0]+3]<<24),uo>>>=0,uo++,us[0]+=ga}lo.push(is.slice(us[0],us[0]+uo)),us[0]+=uo;continue}else{var ba=0,xa=0;if(co==1?(xa=(is[us[0]]>>2&7)+4,ba=(is[us[0]++]&224)<<3,ba|=is[us[0]++]):(xa=(is[us[0]++]>>2)+1,co==2?(ba=is[us[0]]|is[us[0]+1]<<8,us[0]+=2):(ba=(is[us[0]]|is[us[0]+1]<<8|is[us[0]+2]<<16|is[us[0]+3]<<24)>>>0,us[0]+=4)),lo=[u8concat(lo)],ba==0)throw new Error("Invalid offset 0");if(ba>lo[0].length)throw new Error("Invalid offset beyond length");if(xa>=ba)for(lo.push(lo[0].slice(-ba)),xa-=ba;xa>=lo[lo.length-1].length;)lo.push(lo[lo.length-1]),xa-=lo[lo.length-1].length;lo.push(lo[0].slice(-ba,-ba+xa))}}var _a=u8concat(lo);if(_a.length!=hs)throw new Error("Unexpected length: ".concat(_a.length," != ").concat(hs));return _a}function decompress_iwa_file(cs){for(var is=[],us=0;us<cs.length;){var hs=cs[us++],lo=cs[us]|cs[us+1]<<8|cs[us+2]<<16;us+=3,is.push(parse_snappy_chunk(hs,cs.slice(us,us+lo))),us+=lo}if(us!==cs.length)throw new Error("data is not a valid framed stream!");return u8concat(is)}function compress_iwa_file(cs){for(var is=[],us=0;us<cs.length;){var hs=Math.min(cs.length-us,268435455),lo=new Uint8Array(4);is.push(lo);var co=write_varint49(hs),uo=co.length;is.push(co),hs<=60?(uo++,is.push(new Uint8Array([hs-1<<2]))):hs<=256?(uo+=2,is.push(new Uint8Array([240,hs-1&255]))):hs<=65536?(uo+=3,is.push(new Uint8Array([244,hs-1&255,hs-1>>8&255]))):hs<=16777216?(uo+=4,is.push(new Uint8Array([248,hs-1&255,hs-1>>8&255,hs-1>>16&255]))):hs<=4294967296&&(uo+=5,is.push(new Uint8Array([252,hs-1&255,hs-1>>8&255,hs-1>>16&255,hs-1>>>24&255]))),is.push(cs.slice(us,us+hs)),uo+=hs,lo[0]=0,lo[1]=uo&255,lo[2]=uo>>8&255,lo[3]=uo>>16&255,us+=hs}return u8concat(is)}function write_new_storage(cs,is){var us=new Uint8Array(32),hs=u8_to_dataview(us),lo=12,co=0;switch(us[0]=5,cs.t){case"n":us[1]=2,writeDecimal128LE(us,lo,cs.v),co|=1,lo+=16;break;case"b":us[1]=6,hs.setFloat64(lo,cs.v?1:0,!0),co|=2,lo+=8;break;case"s":if(is.indexOf(cs.v)==-1)throw new Error("Value ".concat(cs.v," missing from SST!"));us[1]=3,hs.setUint32(lo,is.indexOf(cs.v),!0),co|=8,lo+=4;break;default:throw"unsupported cell type "+cs.t}return hs.setUint32(8,co,!0),us.slice(0,lo)}function write_old_storage(cs,is){var us=new Uint8Array(32),hs=u8_to_dataview(us),lo=12,co=0;switch(us[0]=3,cs.t){case"n":us[2]=2,hs.setFloat64(lo,cs.v,!0),co|=32,lo+=8;break;case"b":us[2]=6,hs.setFloat64(lo,cs.v?1:0,!0),co|=32,lo+=8;break;case"s":if(is.indexOf(cs.v)==-1)throw new Error("Value ".concat(cs.v," missing from SST!"));us[2]=3,hs.setUint32(lo,is.indexOf(cs.v),!0),co|=16,lo+=4;break;default:throw"unsupported cell type "+cs.t}return hs.setUint32(4,co,!0),us.slice(0,lo)}function parse_TSP_Reference(cs){var is=parse_shallow(cs);return parse_varint49(is[1][0].data)}function write_tile_row(cs,is,us){var hs,lo,co,uo;if(!((hs=cs[6])!=null&&hs[0])||!((lo=cs[7])!=null&&lo[0]))throw"Mutation only works on post-BNC storages!";var ga=((uo=(co=cs[8])==null?void 0:co[0])==null?void 0:uo.data)&&varint_to_i32(cs[8][0].data)>0||!1;if(ga)throw"Math only works with normal offsets";for(var ba=0,xa=u8_to_dataview(cs[7][0].data),_a=0,$a=[],xl=u8_to_dataview(cs[4][0].data),yl=0,wl=[],_l=0;_l<is.length;++_l){if(is[_l]==null){xa.setUint16(_l*2,65535,!0),xl.setUint16(_l*2,65535);continue}xa.setUint16(_l*2,_a,!0),xl.setUint16(_l*2,yl,!0);var El,Sl;switch(typeof is[_l]){case"string":El=write_new_storage({t:"s",v:is[_l]},us),Sl=write_old_storage({t:"s",v:is[_l]},us);break;case"number":El=write_new_storage({t:"n",v:is[_l]},us),Sl=write_old_storage({t:"n",v:is[_l]},us);break;case"boolean":El=write_new_storage({t:"b",v:is[_l]},us),Sl=write_old_storage({t:"b",v:is[_l]},us);break;default:throw new Error("Unsupported value "+is[_l])}$a.push(El),_a+=El.length,wl.push(Sl),yl+=Sl.length,++ba}for(cs[2][0].data=write_varint49(ba);_l<cs[7][0].data.length/2;++_l)xa.setUint16(_l*2,65535,!0),xl.setUint16(_l*2,65535,!0);return cs[6][0].data=u8concat($a),cs[3][0].data=u8concat(wl),ba}function write_numbers_iwa(cs,is){if(!is||!is.numbers)throw new Error("Must pass a `numbers` option -- check the README");var us=cs.Sheets[cs.SheetNames[0]];cs.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var hs=decode_range(us["!ref"]);hs.s.r=hs.s.c=0;var lo=!1;hs.e.c>9&&(lo=!0,hs.e.c=9),hs.e.r>49&&(lo=!0,hs.e.r=49),lo&&console.error("The Numbers writer is currently limited to ".concat(encode_range(hs)));var co=sheet_to_json(us,{range:hs,header:1}),uo=["~Sh33tJ5~"];co.forEach(function(Nl){return Nl.forEach(function(Ml){typeof Ml=="string"&&uo.push(Ml)})});var ga={},ba=[],xa=CFB.read(is.numbers,{type:"base64"});xa.FileIndex.map(function(Nl,Ml){return[Nl,xa.FullPaths[Ml]]}).forEach(function(Nl){var Ml=Nl[0],Ul=Nl[1];if(Ml.type==2&&Ml.name.match(/\.iwa/)){var Vl=Ml.content,Ql=decompress_iwa_file(Vl),Jl=parse_iwa_file(Ql);Jl.forEach(function(iu){ba.push(iu.id),ga[iu.id]={deps:[],location:Ul,type:varint_to_i32(iu.messages[0].meta[1][0].data)}})}}),ba.sort(function(Nl,Ml){return Nl-Ml});var _a=ba.filter(function(Nl){return Nl>1}).map(function(Nl){return[Nl,write_varint49(Nl)]});xa.FileIndex.map(function(Nl,Ml){return[Nl,xa.FullPaths[Ml]]}).forEach(function(Nl){var Ml=Nl[0];if(Nl[1],!!Ml.name.match(/\.iwa/)){var Ul=parse_iwa_file(decompress_iwa_file(Ml.content));Ul.forEach(function(Vl){Vl.messages.forEach(function(Ql){_a.forEach(function(Jl){Vl.messages.some(function(iu){return varint_to_i32(iu.meta[1][0].data)!=11006&&u8contains(iu.data,Jl[1])})&&ga[Jl[0]].deps.push(Vl.id)})})})}});for(var $a=CFB.find(xa,ga[1].location),xl=parse_iwa_file(decompress_iwa_file($a.content)),yl,wl=0;wl<xl.length;++wl){var _l=xl[wl];_l.id==1&&(yl=_l)}var El=parse_TSP_Reference(parse_shallow(yl.messages[0].data)[1][0].data);for($a=CFB.find(xa,ga[El].location),xl=parse_iwa_file(decompress_iwa_file($a.content)),wl=0;wl<xl.length;++wl)_l=xl[wl],_l.id==El&&(yl=_l);for(El=parse_TSP_Reference(parse_shallow(yl.messages[0].data)[2][0].data),$a=CFB.find(xa,ga[El].location),xl=parse_iwa_file(decompress_iwa_file($a.content)),wl=0;wl<xl.length;++wl)_l=xl[wl],_l.id==El&&(yl=_l);for(El=parse_TSP_Reference(parse_shallow(yl.messages[0].data)[2][0].data),$a=CFB.find(xa,ga[El].location),xl=parse_iwa_file(decompress_iwa_file($a.content)),wl=0;wl<xl.length;++wl)_l=xl[wl],_l.id==El&&(yl=_l);var Sl=parse_shallow(yl.messages[0].data);{Sl[6][0].data=write_varint49(hs.e.r+1),Sl[7][0].data=write_varint49(hs.e.c+1);var Cl=parse_TSP_Reference(Sl[46][0].data),Tl=CFB.find(xa,ga[Cl].location),Dl=parse_iwa_file(decompress_iwa_file(Tl.content));{for(var Fl=0;Fl<Dl.length&&Dl[Fl].id!=Cl;++Fl);if(Dl[Fl].id!=Cl)throw"Bad ColumnRowUIDMapArchive";var Pl=parse_shallow(Dl[Fl].messages[0].data);Pl[1]=[],Pl[2]=[],Pl[3]=[];for(var Al=0;Al<=hs.e.c;++Al){var Rl=[];Rl[1]=Rl[2]=[{type:0,data:write_varint49(Al+420690)}],Pl[1].push({type:2,data:write_shallow(Rl)}),Pl[2].push({type:0,data:write_varint49(Al)}),Pl[3].push({type:0,data:write_varint49(Al)})}Pl[4]=[],Pl[5]=[],Pl[6]=[];for(var Il=0;Il<=hs.e.r;++Il)Rl=[],Rl[1]=Rl[2]=[{type:0,data:write_varint49(Il+726270)}],Pl[4].push({type:2,data:write_shallow(Rl)}),Pl[5].push({type:0,data:write_varint49(Il)}),Pl[6].push({type:0,data:write_varint49(Il)});Dl[Fl].messages[0].data=write_shallow(Pl)}Tl.content=compress_iwa_file(write_iwa_file(Dl)),Tl.size=Tl.content.length,delete Sl[46];var Bl=parse_shallow(Sl[4][0].data);{Bl[7][0].data=write_varint49(hs.e.r+1);var Ol=parse_shallow(Bl[1][0].data),zl=parse_TSP_Reference(Ol[2][0].data);Tl=CFB.find(xa,ga[zl].location),Dl=parse_iwa_file(decompress_iwa_file(Tl.content));{if(Dl[0].id!=zl)throw"Bad HeaderStorageBucket";var Hl=parse_shallow(Dl[0].messages[0].data);for(Il=0;Il<co.length;++Il){var ou=parse_shallow(Hl[2][0].data);ou[1][0].data=write_varint49(Il),ou[4][0].data=write_varint49(co[Il].length),Hl[2][Il]={type:Hl[2][0].type,data:write_shallow(ou)}}Dl[0].messages[0].data=write_shallow(Hl)}Tl.content=compress_iwa_file(write_iwa_file(Dl)),Tl.size=Tl.content.length;var au=parse_TSP_Reference(Bl[2][0].data);Tl=CFB.find(xa,ga[au].location),Dl=parse_iwa_file(decompress_iwa_file(Tl.content));{if(Dl[0].id!=au)throw"Bad HeaderStorageBucket";for(Hl=parse_shallow(Dl[0].messages[0].data),Al=0;Al<=hs.e.c;++Al)ou=parse_shallow(Hl[2][0].data),ou[1][0].data=write_varint49(Al),ou[4][0].data=write_varint49(hs.e.r+1),Hl[2][Al]={type:Hl[2][0].type,data:write_shallow(ou)};Dl[0].messages[0].data=write_shallow(Hl)}Tl.content=compress_iwa_file(write_iwa_file(Dl)),Tl.size=Tl.content.length;var _c=parse_TSP_Reference(Bl[4][0].data);(function(){for(var Nl=CFB.find(xa,ga[_c].location),Ml=parse_iwa_file(decompress_iwa_file(Nl.content)),Ul,Vl=0;Vl<Ml.length;++Vl){var Ql=Ml[Vl];Ql.id==_c&&(Ul=Ql)}var Jl=parse_shallow(Ul.messages[0].data);{Jl[3]=[];var iu=[];uo.forEach(function(bu,Cu){iu[1]=[{type:0,data:write_varint49(Cu)}],iu[2]=[{type:0,data:write_varint49(1)}],iu[3]=[{type:2,data:stru8(bu)}],Jl[3].push({type:2,data:write_shallow(iu)})})}Ul.messages[0].data=write_shallow(Jl);var fu=write_iwa_file(Ml),_u=compress_iwa_file(fu);Nl.content=_u,Nl.size=Nl.content.length})();var uu=parse_shallow(Bl[3][0].data);{var lu=uu[1][0];delete uu[2];var Kl=parse_shallow(lu.data);{var xu=parse_TSP_Reference(Kl[2][0].data);(function(){for(var Nl=CFB.find(xa,ga[xu].location),Ml=parse_iwa_file(decompress_iwa_file(Nl.content)),Ul,Vl=0;Vl<Ml.length;++Vl){var Ql=Ml[Vl];Ql.id==xu&&(Ul=Ql)}var Jl=parse_shallow(Ul.messages[0].data);{delete Jl[6],delete uu[7];var iu=new Uint8Array(Jl[5][0].data);Jl[5]=[];for(var fu=0,_u=0;_u<=hs.e.r;++_u){var bu=parse_shallow(iu);fu+=write_tile_row(bu,co[_u],uo),bu[1][0].data=write_varint49(_u),Jl[5].push({data:write_shallow(bu),type:2})}Jl[1]=[{type:0,data:write_varint49(hs.e.c+1)}],Jl[2]=[{type:0,data:write_varint49(hs.e.r+1)}],Jl[3]=[{type:0,data:write_varint49(fu)}],Jl[4]=[{type:0,data:write_varint49(hs.e.r+1)}]}Ul.messages[0].data=write_shallow(Jl);var Cu=write_iwa_file(Ml),Tu=compress_iwa_file(Cu);Nl.content=Tu,Nl.size=Nl.content.length})()}lu.data=write_shallow(Kl)}Bl[3][0].data=write_shallow(uu)}Sl[4][0].data=write_shallow(Bl)}yl.messages[0].data=write_shallow(Sl);var pu=write_iwa_file(xl),Ll=compress_iwa_file(pu);return $a.content=Ll,$a.size=$a.content.length,xa}function fix_opts_func(cs){return function(us){for(var hs=0;hs!=cs.length;++hs){var lo=cs[hs];us[lo[0]]===void 0&&(us[lo[0]]=lo[1]),lo[2]==="n"&&(us[lo[0]]=Number(us[lo[0]]))}}}function fix_write_opts(cs){fix_opts_func([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(cs)}function write_zip(cs,is){return is.bookType=="ods"?write_ods(cs,is):is.bookType=="numbers"?write_numbers_iwa(cs,is):is.bookType=="xlsb"?write_zip_xlsxb(cs,is):write_zip_xlsx(cs,is)}function write_zip_xlsxb(cs,is){_shapeid=1024,cs&&!cs.SSF&&(cs.SSF=dup(table_fmt)),cs&&cs.SSF&&(make_ssf(),SSF_load_table(cs.SSF),is.revssf=evert_num(cs.SSF),is.revssf[cs.SSF[65535]]=0,is.ssf=cs.SSF),is.rels={},is.wbrels={},is.Strings=[],is.Strings.Count=0,is.Strings.Unique=0,browser_has_Map?is.revStrings=new Map:(is.revStrings={},is.revStrings.foo=[],delete is.revStrings.foo);var us=is.bookType=="xlsb"?"bin":"xml",hs=VBAFMTS.indexOf(is.bookType)>-1,lo=new_ct();fix_write_opts(is=is||{});var co=zip_new(),uo="",ga=0;if(is.cellXfs=[],get_cell_style(is.cellXfs,{},{revssf:{General:0}}),cs.Props||(cs.Props={}),uo="docProps/core.xml",zip_add_file(co,uo,write_core_props(cs.Props,is)),lo.coreprops.push(uo),add_rels(is.rels,2,uo,RELS.CORE_PROPS),uo="docProps/app.xml",!(cs.Props&&cs.Props.SheetNames))if(!cs.Workbook||!cs.Workbook.Sheets)cs.Props.SheetNames=cs.SheetNames;else{for(var ba=[],xa=0;xa<cs.SheetNames.length;++xa)(cs.Workbook.Sheets[xa]||{}).Hidden!=2&&ba.push(cs.SheetNames[xa]);cs.Props.SheetNames=ba}for(cs.Props.Worksheets=cs.Props.SheetNames.length,zip_add_file(co,uo,write_ext_props(cs.Props)),lo.extprops.push(uo),add_rels(is.rels,3,uo,RELS.EXT_PROPS),cs.Custprops!==cs.Props&&keys(cs.Custprops||{}).length>0&&(uo="docProps/custom.xml",zip_add_file(co,uo,write_cust_props(cs.Custprops)),lo.custprops.push(uo),add_rels(is.rels,4,uo,RELS.CUST_PROPS)),ga=1;ga<=cs.SheetNames.length;++ga){var _a={"!id":{}},$a=cs.Sheets[cs.SheetNames[ga-1]],xl=($a||{})["!type"]||"sheet";switch(xl){case"chart":default:uo="xl/worksheets/sheet"+ga+"."+us,zip_add_file(co,uo,write_ws(ga-1,uo,is,cs,_a)),lo.sheets.push(uo),add_rels(is.wbrels,-1,"worksheets/sheet"+ga+"."+us,RELS.WS[0])}if($a){var yl=$a["!comments"],wl=!1,_l="";yl&&yl.length>0&&(_l="xl/comments"+ga+"."+us,zip_add_file(co,_l,write_cmnt(yl,_l)),lo.comments.push(_l),add_rels(_a,-1,"../comments"+ga+"."+us,RELS.CMNT),wl=!0),$a["!legacy"]&&wl&&zip_add_file(co,"xl/drawings/vmlDrawing"+ga+".vml",write_comments_vml(ga,$a["!comments"])),delete $a["!comments"],delete $a["!legacy"]}_a["!id"].rId1&&zip_add_file(co,get_rels_path(uo),write_rels(_a))}return is.Strings!=null&&is.Strings.length>0&&(uo="xl/sharedStrings."+us,zip_add_file(co,uo,write_sst(is.Strings,uo,is)),lo.strs.push(uo),add_rels(is.wbrels,-1,"sharedStrings."+us,RELS.SST)),uo="xl/workbook."+us,zip_add_file(co,uo,write_wb(cs,uo)),lo.workbooks.push(uo),add_rels(is.rels,1,uo,RELS.WB),uo="xl/theme/theme1.xml",zip_add_file(co,uo,write_theme(cs.Themes,is)),lo.themes.push(uo),add_rels(is.wbrels,-1,"theme/theme1.xml",RELS.THEME),uo="xl/styles."+us,zip_add_file(co,uo,write_sty(cs,uo,is)),lo.styles.push(uo),add_rels(is.wbrels,-1,"styles."+us,RELS.STY),cs.vbaraw&&hs&&(uo="xl/vbaProject.bin",zip_add_file(co,uo,cs.vbaraw),lo.vba.push(uo),add_rels(is.wbrels,-1,"vbaProject.bin",RELS.VBA)),uo="xl/metadata."+us,zip_add_file(co,uo,write_xlmeta(uo)),lo.metadata.push(uo),add_rels(is.wbrels,-1,"metadata."+us,RELS.XLMETA),zip_add_file(co,"[Content_Types].xml",write_ct(lo,is)),zip_add_file(co,"_rels/.rels",write_rels(is.rels)),zip_add_file(co,"xl/_rels/workbook."+us+".rels",write_rels(is.wbrels)),delete is.revssf,delete is.ssf,co}function write_zip_xlsx(cs,is){_shapeid=1024,cs&&!cs.SSF&&(cs.SSF=dup(table_fmt)),cs&&cs.SSF&&(make_ssf(),SSF_load_table(cs.SSF),is.revssf=evert_num(cs.SSF),is.revssf[cs.SSF[65535]]=0,is.ssf=cs.SSF),is.rels={},is.wbrels={},is.Strings=[],is.Strings.Count=0,is.Strings.Unique=0,browser_has_Map?is.revStrings=new Map:(is.revStrings={},is.revStrings.foo=[],delete is.revStrings.foo);var us="xml",hs=VBAFMTS.indexOf(is.bookType)>-1,lo=new_ct();fix_write_opts(is=is||{});var co=zip_new(),uo="",ga=0;if(is.cellXfs=[],get_cell_style(is.cellXfs,{},{revssf:{General:0}}),cs.Props||(cs.Props={}),uo="docProps/core.xml",zip_add_file(co,uo,write_core_props(cs.Props,is)),lo.coreprops.push(uo),add_rels(is.rels,2,uo,RELS.CORE_PROPS),uo="docProps/app.xml",!(cs.Props&&cs.Props.SheetNames))if(!cs.Workbook||!cs.Workbook.Sheets)cs.Props.SheetNames=cs.SheetNames;else{for(var ba=[],xa=0;xa<cs.SheetNames.length;++xa)(cs.Workbook.Sheets[xa]||{}).Hidden!=2&&ba.push(cs.SheetNames[xa]);cs.Props.SheetNames=ba}cs.Props.Worksheets=cs.Props.SheetNames.length,zip_add_file(co,uo,write_ext_props(cs.Props)),lo.extprops.push(uo),add_rels(is.rels,3,uo,RELS.EXT_PROPS),cs.Custprops!==cs.Props&&keys(cs.Custprops||{}).length>0&&(uo="docProps/custom.xml",zip_add_file(co,uo,write_cust_props(cs.Custprops)),lo.custprops.push(uo),add_rels(is.rels,4,uo,RELS.CUST_PROPS));var _a=["SheetJ5"];for(is.tcid=0,ga=1;ga<=cs.SheetNames.length;++ga){var $a={"!id":{}},xl=cs.Sheets[cs.SheetNames[ga-1]],yl=(xl||{})["!type"]||"sheet";switch(yl){case"chart":default:uo="xl/worksheets/sheet"+ga+"."+us,zip_add_file(co,uo,write_ws_xml(ga-1,is,cs,$a)),lo.sheets.push(uo),add_rels(is.wbrels,-1,"worksheets/sheet"+ga+"."+us,RELS.WS[0])}if(xl){var wl=xl["!comments"],_l=!1,El="";if(wl&&wl.length>0){var Sl=!1;wl.forEach(function(Cl){Cl[1].forEach(function(Tl){Tl.T==!0&&(Sl=!0)})}),Sl&&(El="xl/threadedComments/threadedComment"+ga+"."+us,zip_add_file(co,El,write_tcmnt_xml(wl,_a,is)),lo.threadedcomments.push(El),add_rels($a,-1,"../threadedComments/threadedComment"+ga+"."+us,RELS.TCMNT)),El="xl/comments"+ga+"."+us,zip_add_file(co,El,write_comments_xml(wl)),lo.comments.push(El),add_rels($a,-1,"../comments"+ga+"."+us,RELS.CMNT),_l=!0}xl["!legacy"]&&_l&&zip_add_file(co,"xl/drawings/vmlDrawing"+ga+".vml",write_comments_vml(ga,xl["!comments"])),delete xl["!comments"],delete xl["!legacy"]}$a["!id"].rId1&&zip_add_file(co,get_rels_path(uo),write_rels($a))}return is.Strings!=null&&is.Strings.length>0&&(uo="xl/sharedStrings."+us,zip_add_file(co,uo,write_sst_xml(is.Strings,is)),lo.strs.push(uo),add_rels(is.wbrels,-1,"sharedStrings."+us,RELS.SST)),uo="xl/workbook."+us,zip_add_file(co,uo,write_wb_xml(cs)),lo.workbooks.push(uo),add_rels(is.rels,1,uo,RELS.WB),uo="xl/theme/theme1.xml",zip_add_file(co,uo,write_theme(cs.Themes,is)),lo.themes.push(uo),add_rels(is.wbrels,-1,"theme/theme1.xml",RELS.THEME),uo="xl/styles."+us,zip_add_file(co,uo,write_sty_xml(cs,is)),lo.styles.push(uo),add_rels(is.wbrels,-1,"styles."+us,RELS.STY),cs.vbaraw&&hs&&(uo="xl/vbaProject.bin",zip_add_file(co,uo,cs.vbaraw),lo.vba.push(uo),add_rels(is.wbrels,-1,"vbaProject.bin",RELS.VBA)),uo="xl/metadata."+us,zip_add_file(co,uo,write_xlmeta_xml()),lo.metadata.push(uo),add_rels(is.wbrels,-1,"metadata."+us,RELS.XLMETA),_a.length>1&&(uo="xl/persons/person.xml",zip_add_file(co,uo,write_people_xml(_a)),lo.people.push(uo),add_rels(is.wbrels,-1,"persons/person.xml",RELS.PEOPLE)),zip_add_file(co,"[Content_Types].xml",write_ct(lo,is)),zip_add_file(co,"_rels/.rels",write_rels(is.rels)),zip_add_file(co,"xl/_rels/workbook."+us+".rels",write_rels(is.wbrels)),delete is.revssf,delete is.ssf,co}function firstbyte(cs,is){var us="";switch((is||{}).type||"base64"){case"buffer":return[cs[0],cs[1],cs[2],cs[3],cs[4],cs[5],cs[6],cs[7]];case"base64":us=Base64_decode(cs.slice(0,12));break;case"binary":us=cs;break;case"array":return[cs[0],cs[1],cs[2],cs[3],cs[4],cs[5],cs[6],cs[7]];default:throw new Error("Unrecognized type "+(is&&is.type||"undefined"))}return[us.charCodeAt(0),us.charCodeAt(1),us.charCodeAt(2),us.charCodeAt(3),us.charCodeAt(4),us.charCodeAt(5),us.charCodeAt(6),us.charCodeAt(7)]}function write_cfb_ctr(cs,is){switch(is.type){case"base64":case"binary":break;case"buffer":case"array":is.type="";break;case"file":return write_dl(is.file,CFB.write(cs,{type:has_buf?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+is.bookType+"' files");default:throw new Error("Unrecognized type "+is.type)}return CFB.write(cs,is)}function write_zip_type(cs,is){var us=dup(is||{}),hs=write_zip(cs,us);return write_zip_denouement(hs,us)}function write_zip_denouement(cs,is){var us={},hs=has_buf?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(is.compression&&(us.compression="DEFLATE"),is.password)us.type=hs;else switch(is.type){case"base64":us.type="base64";break;case"binary":us.type="string";break;case"string":throw new Error("'string' output type invalid for '"+is.bookType+"' files");case"buffer":case"file":us.type=hs;break;default:throw new Error("Unrecognized type "+is.type)}var lo=cs.FullPaths?CFB.write(cs,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[us.type]||us.type,compression:!!is.compression}):cs.generate(us);if(typeof Deno<"u"&&typeof lo=="string"){if(is.type=="binary"||is.type=="base64")return lo;lo=new Uint8Array(s2ab(lo))}return is.password&&typeof encrypt_agile<"u"?write_cfb_ctr(encrypt_agile(lo,is.password),is):is.type==="file"?write_dl(is.file,lo):is.type=="string"?utf8read(lo):lo}function write_cfb_type(cs,is){var us=is||{},hs=write_xlscfb(cs,us);return write_cfb_ctr(hs,us)}function write_string_type(cs,is,us){us||(us="");var hs=us+cs;switch(is.type){case"base64":return Base64_encode(utf8write(hs));case"binary":return utf8write(hs);case"string":return cs;case"file":return write_dl(is.file,hs,"utf8");case"buffer":return has_buf?Buffer_from(hs,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(hs):write_string_type(hs,{type:"binary"}).split("").map(function(lo){return lo.charCodeAt(0)})}throw new Error("Unrecognized type "+is.type)}function write_stxt_type(cs,is){switch(is.type){case"base64":return Base64_encode(cs);case"binary":return cs;case"string":return cs;case"file":return write_dl(is.file,cs,"binary");case"buffer":return has_buf?Buffer_from(cs,"binary"):cs.split("").map(function(us){return us.charCodeAt(0)})}throw new Error("Unrecognized type "+is.type)}function write_binary_type(cs,is){switch(is.type){case"string":case"base64":case"binary":for(var us="",hs=0;hs<cs.length;++hs)us+=String.fromCharCode(cs[hs]);return is.type=="base64"?Base64_encode(us):is.type=="string"?utf8read(us):us;case"file":return write_dl(is.file,cs);case"buffer":return cs;default:throw new Error("Unrecognized type "+is.type)}}function writeSync(cs,is){reset_cp(),check_wb(cs);var us=dup(is||{});if(us.cellStyles&&(us.cellNF=!0,us.sheetStubs=!0),us.type=="array"){us.type="binary";var hs=writeSync(cs,us);return us.type="array",s2ab(hs)}var lo=0;if(us.sheet&&(typeof us.sheet=="number"?lo=us.sheet:lo=cs.SheetNames.indexOf(us.sheet),!cs.SheetNames[lo]))throw new Error("Sheet not found: "+us.sheet+" : "+typeof us.sheet);switch(us.bookType||"xlsb"){case"xml":case"xlml":return write_string_type(write_xlml(cs,us),us);case"slk":case"sylk":return write_string_type(SYLK.from_sheet(cs.Sheets[cs.SheetNames[lo]],us),us);case"htm":case"html":return write_string_type(sheet_to_html(cs.Sheets[cs.SheetNames[lo]],us),us);case"txt":return write_stxt_type(sheet_to_txt(cs.Sheets[cs.SheetNames[lo]],us),us);case"csv":return write_string_type(sheet_to_csv(cs.Sheets[cs.SheetNames[lo]],us),us,"\uFEFF");case"dif":return write_string_type(DIF.from_sheet(cs.Sheets[cs.SheetNames[lo]],us),us);case"dbf":return write_binary_type(DBF.from_sheet(cs.Sheets[cs.SheetNames[lo]],us),us);case"prn":return write_string_type(PRN.from_sheet(cs.Sheets[cs.SheetNames[lo]],us),us);case"rtf":return write_string_type(RTF.from_sheet(cs.Sheets[cs.SheetNames[lo]],us),us);case"eth":return write_string_type(ETH.from_sheet(cs.Sheets[cs.SheetNames[lo]],us),us);case"fods":return write_string_type(write_ods(cs,us),us);case"wk1":return write_binary_type(WK_.sheet_to_wk1(cs.Sheets[cs.SheetNames[lo]],us),us);case"wk3":return write_binary_type(WK_.book_to_wk3(cs,us),us);case"biff2":us.biff||(us.biff=2);case"biff3":us.biff||(us.biff=3);case"biff4":return us.biff||(us.biff=4),write_binary_type(write_biff_buf(cs,us),us);case"biff5":us.biff||(us.biff=5);case"biff8":case"xla":case"xls":return us.biff||(us.biff=8),write_cfb_type(cs,us);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return write_zip_type(cs,us);default:throw new Error("Unrecognized bookType |"+us.bookType+"|")}}function make_json_row(cs,is,us,hs,lo,co,uo,ga){var ba=encode_row(us),xa=ga.defval,_a=ga.raw||!Object.prototype.hasOwnProperty.call(ga,"raw"),$a=!0,xl=lo===1?[]:{};if(lo!==1)if(Object.defineProperty)try{Object.defineProperty(xl,"__rowNum__",{value:us,enumerable:!1})}catch{xl.__rowNum__=us}else xl.__rowNum__=us;if(!uo||cs[us])for(var yl=is.s.c;yl<=is.e.c;++yl){var wl=uo?cs[us][yl]:cs[hs[yl]+ba];if(wl===void 0||wl.t===void 0){if(xa===void 0)continue;co[yl]!=null&&(xl[co[yl]]=xa);continue}var _l=wl.v;switch(wl.t){case"z":if(_l==null)break;continue;case"e":_l=_l==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+wl.t)}if(co[yl]!=null){if(_l==null)if(wl.t=="e"&&_l===null)xl[co[yl]]=null;else if(xa!==void 0)xl[co[yl]]=xa;else if(_a&&_l===null)xl[co[yl]]=null;else continue;else xl[co[yl]]=_a&&(wl.t!=="n"||wl.t==="n"&&ga.rawNumbers!==!1)?_l:format_cell(wl,_l,ga);_l!=null&&($a=!1)}}return{row:xl,isempty:$a}}function sheet_to_json(cs,is){if(cs==null||cs["!ref"]==null)return[];var us={t:"n",v:0},hs=0,lo=1,co=[],uo=0,ga="",ba={s:{r:0,c:0},e:{r:0,c:0}},xa=is||{},_a=xa.range!=null?xa.range:cs["!ref"];switch(xa.header===1?hs=1:xa.header==="A"?hs=2:Array.isArray(xa.header)?hs=3:xa.header==null&&(hs=0),typeof _a){case"string":ba=safe_decode_range(_a);break;case"number":ba=safe_decode_range(cs["!ref"]),ba.s.r=_a;break;default:ba=_a}hs>0&&(lo=0);var $a=encode_row(ba.s.r),xl=[],yl=[],wl=0,_l=0,El=Array.isArray(cs),Sl=ba.s.r,Cl=0,Tl={};El&&!cs[Sl]&&(cs[Sl]=[]);var Dl=xa.skipHidden&&cs["!cols"]||[],Fl=xa.skipHidden&&cs["!rows"]||[];for(Cl=ba.s.c;Cl<=ba.e.c;++Cl)if(!(Dl[Cl]||{}).hidden)switch(xl[Cl]=encode_col(Cl),us=El?cs[Sl][Cl]:cs[xl[Cl]+$a],hs){case 1:co[Cl]=Cl-ba.s.c;break;case 2:co[Cl]=xl[Cl];break;case 3:co[Cl]=xa.header[Cl-ba.s.c];break;default:if(us==null&&(us={w:"__EMPTY",t:"s"}),ga=uo=format_cell(us,null,xa),_l=Tl[uo]||0,!_l)Tl[uo]=1;else{do ga=uo+"_"+_l++;while(Tl[ga]);Tl[uo]=_l,Tl[ga]=1}co[Cl]=ga}for(Sl=ba.s.r+lo;Sl<=ba.e.r;++Sl)if(!(Fl[Sl]||{}).hidden){var Pl=make_json_row(cs,ba,Sl,xl,hs,co,El,xa);(Pl.isempty===!1||(hs===1?xa.blankrows!==!1:xa.blankrows))&&(yl[wl++]=Pl.row)}return yl.length=wl,yl}var qreg=/"/g;function make_csv_row(cs,is,us,hs,lo,co,uo,ga){for(var ba=!0,xa=[],_a="",$a=encode_row(us),xl=is.s.c;xl<=is.e.c;++xl)if(hs[xl]){var yl=ga.dense?(cs[us]||[])[xl]:cs[hs[xl]+$a];if(yl==null)_a="";else if(yl.v!=null){ba=!1,_a=""+(ga.rawNumbers&&yl.t=="n"?yl.v:format_cell(yl,null,ga));for(var wl=0,_l=0;wl!==_a.length;++wl)if((_l=_a.charCodeAt(wl))===lo||_l===co||_l===34||ga.forceQuotes){_a='"'+_a.replace(qreg,'""')+'"';break}_a=="ID"&&(_a='"ID"')}else yl.f!=null&&!yl.F?(ba=!1,_a="="+yl.f,_a.indexOf(",")>=0&&(_a='"'+_a.replace(qreg,'""')+'"')):_a="";xa.push(_a)}return ga.blankrows===!1&&ba?null:xa.join(uo)}function sheet_to_csv(cs,is){var us=[],hs=is??{};if(cs==null||cs["!ref"]==null)return"";var lo=safe_decode_range(cs["!ref"]),co=hs.FS!==void 0?hs.FS:",",uo=co.charCodeAt(0),ga=hs.RS!==void 0?hs.RS:`
`,ba=ga.charCodeAt(0),xa=new RegExp((co=="|"?"\\|":co)+"+$"),_a="",$a=[];hs.dense=Array.isArray(cs);for(var xl=hs.skipHidden&&cs["!cols"]||[],yl=hs.skipHidden&&cs["!rows"]||[],wl=lo.s.c;wl<=lo.e.c;++wl)(xl[wl]||{}).hidden||($a[wl]=encode_col(wl));for(var _l=0,El=lo.s.r;El<=lo.e.r;++El)(yl[El]||{}).hidden||(_a=make_csv_row(cs,lo,El,$a,uo,ba,co,hs),_a!=null&&(hs.strip&&(_a=_a.replace(xa,"")),(_a||hs.blankrows!==!1)&&us.push((_l++?ga:"")+_a)));return delete hs.dense,us.join("")}function sheet_to_txt(cs,is){is||(is={}),is.FS="	",is.RS=`
`;var us=sheet_to_csv(cs,is);return us}function sheet_to_formulae(cs){var is="",us,hs="";if(cs==null||cs["!ref"]==null)return[];var lo=safe_decode_range(cs["!ref"]),co="",uo=[],ga,ba=[],xa=Array.isArray(cs);for(ga=lo.s.c;ga<=lo.e.c;++ga)uo[ga]=encode_col(ga);for(var _a=lo.s.r;_a<=lo.e.r;++_a)for(co=encode_row(_a),ga=lo.s.c;ga<=lo.e.c;++ga)if(is=uo[ga]+co,us=xa?(cs[_a]||[])[ga]:cs[is],hs="",us!==void 0){if(us.F!=null){if(is=us.F,!us.f)continue;hs=us.f,is.indexOf(":")==-1&&(is=is+":"+is)}if(us.f!=null)hs=us.f;else{if(us.t=="z")continue;if(us.t=="n"&&us.v!=null)hs=""+us.v;else if(us.t=="b")hs=us.v?"TRUE":"FALSE";else if(us.w!==void 0)hs="'"+us.w;else{if(us.v===void 0)continue;us.t=="s"?hs="'"+us.v:hs=""+us.v}}ba[ba.length]=is+"="+hs}return ba}function sheet_add_json(cs,is,us){var hs=us||{},lo=+!hs.skipHeader,co=cs||{},uo=0,ga=0;if(co&&hs.origin!=null)if(typeof hs.origin=="number")uo=hs.origin;else{var ba=typeof hs.origin=="string"?decode_cell(hs.origin):hs.origin;uo=ba.r,ga=ba.c}var xa,_a={s:{c:0,r:0},e:{c:ga,r:uo+is.length-1+lo}};if(co["!ref"]){var $a=safe_decode_range(co["!ref"]);_a.e.c=Math.max(_a.e.c,$a.e.c),_a.e.r=Math.max(_a.e.r,$a.e.r),uo==-1&&(uo=$a.e.r+1,_a.e.r=uo+is.length-1+lo)}else uo==-1&&(uo=0,_a.e.r=is.length-1+lo);var xl=hs.header||[],yl=0;is.forEach(function(_l,El){keys(_l).forEach(function(Sl){(yl=xl.indexOf(Sl))==-1&&(xl[yl=xl.length]=Sl);var Cl=_l[Sl],Tl="z",Dl="",Fl=encode_cell({c:ga+yl,r:uo+El+lo});xa=ws_get_cell_stub(co,Fl),Cl&&typeof Cl=="object"&&!(Cl instanceof Date)?co[Fl]=Cl:(typeof Cl=="number"?Tl="n":typeof Cl=="boolean"?Tl="b":typeof Cl=="string"?Tl="s":Cl instanceof Date?(Tl="d",hs.cellDates||(Tl="n",Cl=datenum(Cl)),Dl=hs.dateNF||table_fmt[14]):Cl===null&&hs.nullError&&(Tl="e",Cl=0),xa?(xa.t=Tl,xa.v=Cl,delete xa.w,delete xa.R,Dl&&(xa.z=Dl)):co[Fl]=xa={t:Tl,v:Cl},Dl&&(xa.z=Dl))})}),_a.e.c=Math.max(_a.e.c,ga+xl.length-1);var wl=encode_row(uo);if(lo)for(yl=0;yl<xl.length;++yl)co[encode_col(yl+ga)+wl]={t:"s",v:xl[yl]};return co["!ref"]=encode_range(_a),co}function json_to_sheet(cs,is){return sheet_add_json(null,cs,is)}function ws_get_cell_stub(cs,is,us){if(typeof is=="string"){if(Array.isArray(cs)){var hs=decode_cell(is);return cs[hs.r]||(cs[hs.r]=[]),cs[hs.r][hs.c]||(cs[hs.r][hs.c]={t:"z"})}return cs[is]||(cs[is]={t:"z"})}return typeof is!="number"?ws_get_cell_stub(cs,encode_cell(is)):ws_get_cell_stub(cs,encode_cell({r:is,c:us||0}))}function wb_sheet_idx(cs,is){if(typeof is=="number"){if(is>=0&&cs.SheetNames.length>is)return is;throw new Error("Cannot find sheet # "+is)}else if(typeof is=="string"){var us=cs.SheetNames.indexOf(is);if(us>-1)return us;throw new Error("Cannot find sheet name |"+is+"|")}else throw new Error("Cannot find sheet |"+is+"|")}function book_new(){return{SheetNames:[],Sheets:{}}}function book_append_sheet(cs,is,us,hs){var lo=1;if(!us)for(;lo<=65535&&cs.SheetNames.indexOf(us="Sheet"+lo)!=-1;++lo,us=void 0);if(!us||cs.SheetNames.length>=65535)throw new Error("Too many worksheets");if(hs&&cs.SheetNames.indexOf(us)>=0){var co=us.match(/(^.*?)(\d+)$/);lo=co&&+co[2]||0;var uo=co&&co[1]||us;for(++lo;lo<=65535&&cs.SheetNames.indexOf(us=uo+lo)!=-1;++lo);}if(check_ws_name(us),cs.SheetNames.indexOf(us)>=0)throw new Error("Worksheet with name |"+us+"| already exists!");return cs.SheetNames.push(us),cs.Sheets[us]=is,us}function book_set_sheet_visibility(cs,is,us){cs.Workbook||(cs.Workbook={}),cs.Workbook.Sheets||(cs.Workbook.Sheets=[]);var hs=wb_sheet_idx(cs,is);switch(cs.Workbook.Sheets[hs]||(cs.Workbook.Sheets[hs]={}),us){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+us)}cs.Workbook.Sheets[hs].Hidden=us}function cell_set_number_format(cs,is){return cs.z=is,cs}function cell_set_hyperlink(cs,is,us){return is?(cs.l={Target:is},us&&(cs.l.Tooltip=us)):delete cs.l,cs}function cell_set_internal_link(cs,is,us){return cell_set_hyperlink(cs,"#"+is,us)}function cell_add_comment(cs,is,us){cs.c||(cs.c=[]),cs.c.push({t:is,a:us||"SheetJS"})}function sheet_set_array_formula(cs,is,us,hs){for(var lo=typeof is!="string"?is:safe_decode_range(is),co=typeof is=="string"?is:encode_range(is),uo=lo.s.r;uo<=lo.e.r;++uo)for(var ga=lo.s.c;ga<=lo.e.c;++ga){var ba=ws_get_cell_stub(cs,uo,ga);ba.t="n",ba.F=co,delete ba.v,uo==lo.s.r&&ga==lo.s.c&&(ba.f=us,hs&&(ba.D=!0))}return cs}var utils={encode_col,encode_row,encode_cell,encode_range,decode_col,decode_row,split_cell,decode_cell,decode_range,format_cell,sheet_add_aoa,sheet_add_json,sheet_add_dom,aoa_to_sheet,json_to_sheet,table_to_sheet:parse_dom_table,table_to_book,sheet_to_csv,sheet_to_txt,sheet_to_json,sheet_to_html,sheet_to_formulae,sheet_to_row_object_array:sheet_to_json,sheet_get_cell:ws_get_cell_stub,book_new,book_append_sheet,book_set_sheet_visibility,cell_set_number_format,cell_set_hyperlink,cell_set_internal_link,cell_add_comment,sheet_set_array_formula,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function t(cs,is,us){return(is=function(hs){var lo=function(co,uo){if(typeof co!="object"||!co)return co;var ga=co[Symbol.toPrimitive];if(ga!==void 0){var ba=ga.call(co,uo);if(typeof ba!="object")return ba;throw new TypeError("@@toPrimitive must return a primitive value.")}return(uo==="string"?String:Number)(co)}(hs,"string");return typeof lo=="symbol"?lo:lo+""}(is))in cs?Object.defineProperty(cs,is,{value:us,enumerable:!0,configurable:!0,writable:!0}):cs[is]=us,cs}function e(cs,is){var us=Object.keys(cs);if(Object.getOwnPropertySymbols){var hs=Object.getOwnPropertySymbols(cs);is&&(hs=hs.filter(function(lo){return Object.getOwnPropertyDescriptor(cs,lo).enumerable})),us.push.apply(us,hs)}return us}function s(cs){for(var is=1;is<arguments.length;is++){var us=arguments[is]!=null?arguments[is]:{};is%2?e(Object(us),!0).forEach(function(hs){t(cs,hs,us[hs])}):Object.getOwnPropertyDescriptors?Object.defineProperties(cs,Object.getOwnPropertyDescriptors(us)):e(Object(us)).forEach(function(hs){Object.defineProperty(cs,hs,Object.getOwnPropertyDescriptor(us,hs))})}return cs}function i(cs,is){if(cs==null)return{};var us,hs,lo=function(uo,ga){if(uo==null)return{};var ba={};for(var xa in uo)if({}.hasOwnProperty.call(uo,xa)){if(ga.indexOf(xa)>=0)continue;ba[xa]=uo[xa]}return ba}(cs,is);if(Object.getOwnPropertySymbols){var co=Object.getOwnPropertySymbols(cs);for(hs=0;hs<co.length;hs++)us=co[hs],is.indexOf(us)>=0||{}.propertyIsEnumerable.call(cs,us)&&(lo[us]=cs[us])}return lo}function r(cs,is){return is||(is=cs.slice(0)),Object.freeze(Object.defineProperties(cs,{raw:{value:Object.freeze(is)}}))}class n{constructor(){t(this,"browserShadowBlurConstant",1),t(this,"DPI",96),t(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),t(this,"perfLimitSizeTotal",2097152),t(this,"maxCacheSideLimit",4096),t(this,"minCacheSideLimit",256),t(this,"disableStyleCopyPaste",!1),t(this,"enableGLFiltering",!0),t(this,"textureSize",4096),t(this,"forceGLPutImageData",!1),t(this,"cachesBoundsOfCurve",!1),t(this,"fontPaths",{}),t(this,"NUM_FRACTION_DIGITS",4)}}const o=new class extends n{constructor(cs){super(),this.configure(cs)}configure(){let cs=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,cs)}addFonts(){let cs=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=s(s({},this.fontPaths),cs)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(cs=>{delete this.fontPaths[cs]})}clearFonts(){this.fontPaths={}}restoreDefaults(cs){const is=new n,us=(cs==null?void 0:cs.reduce((hs,lo)=>(hs[lo]=is[lo],hs),{}))||is;this.configure(us)}},a=function(cs){for(var is=arguments.length,us=new Array(is>1?is-1:0),hs=1;hs<is;hs++)us[hs-1]=arguments[hs];return console[cs]("fabric",...us)};class h extends Error{constructor(is,us){super("fabric: ".concat(is),us)}}class c extends h{constructor(is){super("".concat(is," 'options.signal' is in 'aborted' state"))}}class l{}class u extends l{testPrecision(is,us){const hs="precision ".concat(us,` float;
void main(){}`),lo=is.createShader(is.FRAGMENT_SHADER);return!!lo&&(is.shaderSource(lo,hs),is.compileShader(lo),!!is.getShaderParameter(lo,is.COMPILE_STATUS))}queryWebGL(is){const us=is.getContext("webgl");us&&(this.maxTextureSize=us.getParameter(us.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(hs=>this.testPrecision(us,hs)),us.getExtension("WEBGL_lose_context").loseContext(),a("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(is){return!!this.maxTextureSize&&this.maxTextureSize>=is}}const d={};let g;const p=()=>g||(g={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new u,dispose(){},copyPasteData:d}),m=()=>p().document,v=()=>p().window,y=()=>{var cs;return Math.max((cs=o.devicePixelRatio)!==null&&cs!==void 0?cs:v().devicePixelRatio,1)},_=new class{constructor(){t(this,"charWidthsCache",{}),t(this,"boundsOfCurveCache",{})}getFontCache(cs){let{fontFamily:is,fontStyle:us,fontWeight:hs}=cs;is=is.toLowerCase(),this.charWidthsCache[is]||(this.charWidthsCache[is]={});const lo=this.charWidthsCache[is],co="".concat(us.toLowerCase(),"_").concat((hs+"").toLowerCase());return lo[co]||(lo[co]={}),lo[co]}clearFontCache(cs){(cs=(cs||"").toLowerCase())?this.charWidthsCache[cs]&&delete this.charWidthsCache[cs]:this.charWidthsCache={}}limitDimsByArea(cs){const{perfLimitSizeTotal:is}=o,us=Math.sqrt(is*cs);return[Math.floor(us),Math.floor(is/us)]}},x="6.7.1";function C(){}const b=Math.PI/2,S=2*Math.PI,w=Math.PI/180,T=Object.freeze([1,0,0,1,0,0]),O=16,k=.4477152502,D="center",M="left",P="top",E="bottom",A="right",j="none",F=/\r?\n/,L="moving",R="scaling",I="rotating",B="rotate",X="skewing",Y="resizing",W="modifyPoly",V="modifyPath",z="changed",G="scale",H="scaleX",N="scaleY",U="skewX",q="skewY",K="fill",J="stroke",Q="modified",Z="json",$$1="svg",tt=new class{constructor(){this[Z]=new Map,this[$$1]=new Map}has(cs){return this[Z].has(cs)}getClass(cs){const is=this[Z].get(cs);if(!is)throw new h("No class registered for ".concat(cs));return is}setClass(cs,is){is?this[Z].set(is,cs):(this[Z].set(cs.type,cs),this[Z].set(cs.type.toLowerCase(),cs))}getSVGClass(cs){return this[$$1].get(cs)}setSVGClass(cs,is){this[$$1].set(is??cs.type.toLowerCase(),cs)}},et=new class extends Array{remove(cs){const is=this.indexOf(cs);is>-1&&this.splice(is,1)}cancelAll(){const cs=this.splice(0);return cs.forEach(is=>is.abort()),cs}cancelByCanvas(cs){if(!cs)return[];const is=this.filter(us=>{var hs;return us.target===cs||typeof us.target=="object"&&((hs=us.target)===null||hs===void 0?void 0:hs.canvas)===cs});return is.forEach(us=>us.abort()),is}cancelByTarget(cs){if(!cs)return[];const is=this.filter(us=>us.target===cs);return is.forEach(us=>us.abort()),is}};class st{constructor(){t(this,"__eventListeners",{})}on(is,us){if(this.__eventListeners||(this.__eventListeners={}),typeof is=="object")return Object.entries(is).forEach(hs=>{let[lo,co]=hs;this.on(lo,co)}),()=>this.off(is);if(us){const hs=is;return this.__eventListeners[hs]||(this.__eventListeners[hs]=[]),this.__eventListeners[hs].push(us),()=>this.off(hs,us)}return()=>!1}once(is,us){if(typeof is=="object"){const hs=[];return Object.entries(is).forEach(lo=>{let[co,uo]=lo;hs.push(this.once(co,uo))}),()=>hs.forEach(lo=>lo())}if(us){const hs=this.on(is,function(){for(var lo=arguments.length,co=new Array(lo),uo=0;uo<lo;uo++)co[uo]=arguments[uo];us.call(this,...co),hs()});return hs}return()=>!1}_removeEventListener(is,us){if(this.__eventListeners[is])if(us){const hs=this.__eventListeners[is],lo=hs.indexOf(us);lo>-1&&hs.splice(lo,1)}else this.__eventListeners[is]=[]}off(is,us){if(this.__eventListeners)if(is===void 0)for(const hs in this.__eventListeners)this._removeEventListener(hs);else typeof is=="object"?Object.entries(is).forEach(hs=>{let[lo,co]=hs;this._removeEventListener(lo,co)}):this._removeEventListener(is,us)}fire(is,us){var hs;if(!this.__eventListeners)return;const lo=(hs=this.__eventListeners[is])===null||hs===void 0?void 0:hs.concat();if(lo)for(let co=0;co<lo.length;co++)lo[co].call(this,us||{})}}const it=(cs,is)=>{const us=cs.indexOf(is);return us!==-1&&cs.splice(us,1),cs},rt=cs=>{if(cs===0)return 1;switch(Math.abs(cs)/b){case 1:case 3:return 0;case 2:return-1}return Math.cos(cs)},nt=cs=>{if(cs===0)return 0;const is=cs/b,us=Math.sign(cs);switch(is){case 1:return us;case 2:return 0;case 3:return-us}return Math.sin(cs)};class ot{constructor(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof is=="object"?(this.x=is.x,this.y=is.y):(this.x=is,this.y=us)}add(is){return new ot(this.x+is.x,this.y+is.y)}addEquals(is){return this.x+=is.x,this.y+=is.y,this}scalarAdd(is){return new ot(this.x+is,this.y+is)}scalarAddEquals(is){return this.x+=is,this.y+=is,this}subtract(is){return new ot(this.x-is.x,this.y-is.y)}subtractEquals(is){return this.x-=is.x,this.y-=is.y,this}scalarSubtract(is){return new ot(this.x-is,this.y-is)}scalarSubtractEquals(is){return this.x-=is,this.y-=is,this}multiply(is){return new ot(this.x*is.x,this.y*is.y)}scalarMultiply(is){return new ot(this.x*is,this.y*is)}scalarMultiplyEquals(is){return this.x*=is,this.y*=is,this}divide(is){return new ot(this.x/is.x,this.y/is.y)}scalarDivide(is){return new ot(this.x/is,this.y/is)}scalarDivideEquals(is){return this.x/=is,this.y/=is,this}eq(is){return this.x===is.x&&this.y===is.y}lt(is){return this.x<is.x&&this.y<is.y}lte(is){return this.x<=is.x&&this.y<=is.y}gt(is){return this.x>is.x&&this.y>is.y}gte(is){return this.x>=is.x&&this.y>=is.y}lerp(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return us=Math.max(Math.min(1,us),0),new ot(this.x+(is.x-this.x)*us,this.y+(is.y-this.y)*us)}distanceFrom(is){const us=this.x-is.x,hs=this.y-is.y;return Math.sqrt(us*us+hs*hs)}midPointFrom(is){return this.lerp(is)}min(is){return new ot(Math.min(this.x,is.x),Math.min(this.y,is.y))}max(is){return new ot(Math.max(this.x,is.x),Math.max(this.y,is.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(is,us){return this.x=is,this.y=us,this}setX(is){return this.x=is,this}setY(is){return this.y=is,this}setFromPoint(is){return this.x=is.x,this.y=is.y,this}swap(is){const us=this.x,hs=this.y;this.x=is.x,this.y=is.y,is.x=us,is.y=hs}clone(){return new ot(this.x,this.y)}rotate(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at;const hs=nt(is),lo=rt(is),co=this.subtract(us);return new ot(co.x*lo-co.y*hs,co.x*hs+co.y*lo).add(us)}transform(is){let us=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new ot(is[0]*this.x+is[2]*this.y+(us?0:is[4]),is[1]*this.x+is[3]*this.y+(us?0:is[5]))}}const at=new ot(0,0),ht=cs=>!!cs&&Array.isArray(cs._objects);function ct(cs){class is extends cs{constructor(){super(...arguments),t(this,"_objects",[])}_onObjectAdded(hs){}_onObjectRemoved(hs){}_onStackOrderChanged(hs){}add(){for(var hs=arguments.length,lo=new Array(hs),co=0;co<hs;co++)lo[co]=arguments[co];const uo=this._objects.push(...lo);return lo.forEach(ga=>this._onObjectAdded(ga)),uo}insertAt(hs){for(var lo=arguments.length,co=new Array(lo>1?lo-1:0),uo=1;uo<lo;uo++)co[uo-1]=arguments[uo];return this._objects.splice(hs,0,...co),co.forEach(ga=>this._onObjectAdded(ga)),this._objects.length}remove(){const hs=this._objects,lo=[];for(var co=arguments.length,uo=new Array(co),ga=0;ga<co;ga++)uo[ga]=arguments[ga];return uo.forEach(ba=>{const xa=hs.indexOf(ba);xa!==-1&&(hs.splice(xa,1),lo.push(ba),this._onObjectRemoved(ba))}),lo}forEachObject(hs){this.getObjects().forEach((lo,co,uo)=>hs(lo,co,uo))}getObjects(){for(var hs=arguments.length,lo=new Array(hs),co=0;co<hs;co++)lo[co]=arguments[co];return lo.length===0?[...this._objects]:this._objects.filter(uo=>uo.isType(...lo))}item(hs){return this._objects[hs]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(hs,lo){return!!this._objects.includes(hs)||!!lo&&this._objects.some(co=>co instanceof is&&co.contains(hs,!0))}complexity(){return this._objects.reduce((hs,lo)=>hs+=lo.complexity?lo.complexity():0,0)}sendObjectToBack(hs){return!(!hs||hs===this._objects[0])&&(it(this._objects,hs),this._objects.unshift(hs),this._onStackOrderChanged(hs),!0)}bringObjectToFront(hs){return!(!hs||hs===this._objects[this._objects.length-1])&&(it(this._objects,hs),this._objects.push(hs),this._onStackOrderChanged(hs),!0)}sendObjectBackwards(hs,lo){if(!hs)return!1;const co=this._objects.indexOf(hs);if(co!==0){const uo=this.findNewLowerIndex(hs,co,lo);return it(this._objects,hs),this._objects.splice(uo,0,hs),this._onStackOrderChanged(hs),!0}return!1}bringObjectForward(hs,lo){if(!hs)return!1;const co=this._objects.indexOf(hs);if(co!==this._objects.length-1){const uo=this.findNewUpperIndex(hs,co,lo);return it(this._objects,hs),this._objects.splice(uo,0,hs),this._onStackOrderChanged(hs),!0}return!1}moveObjectTo(hs,lo){return hs!==this._objects[lo]&&(it(this._objects,hs),this._objects.splice(lo,0,hs),this._onStackOrderChanged(hs),!0)}findNewLowerIndex(hs,lo,co){let uo;if(co){uo=lo;for(let ga=lo-1;ga>=0;--ga)if(hs.isOverlapping(this._objects[ga])){uo=ga;break}}else uo=lo-1;return uo}findNewUpperIndex(hs,lo,co){let uo;if(co){uo=lo;for(let ga=lo+1;ga<this._objects.length;++ga)if(hs.isOverlapping(this._objects[ga])){uo=ga;break}}else uo=lo+1;return uo}collectObjects(hs){let{left:lo,top:co,width:uo,height:ga}=hs,{includeIntersecting:ba=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const xa=[],_a=new ot(lo,co),$a=_a.add(new ot(uo,ga));for(let xl=this._objects.length-1;xl>=0;xl--){const yl=this._objects[xl];yl.selectable&&yl.visible&&(ba&&yl.intersectsWithRect(_a,$a)||yl.isContainedWithinRect(_a,$a)||ba&&yl.containsPoint(_a)||ba&&yl.containsPoint($a))&&xa.push(yl)}return xa}}return is}class lt extends st{_setOptions(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const us in is)this.set(us,is[us])}_setObject(is){for(const us in is)this._set(us,is[us])}set(is,us){return typeof is=="object"?this._setObject(is):this._set(is,us),this}_set(is,us){this[is]=us}toggle(is){const us=this.get(is);return typeof us=="boolean"&&this.set(is,!us),this}get(is){return this[is]}}function ut(cs){return v().requestAnimationFrame(cs)}function dt(cs){return v().cancelAnimationFrame(cs)}let gt=0;const ft=()=>gt++,pt=()=>{const cs=m().createElement("canvas");if(!cs||cs.getContext===void 0)throw new h("Failed to create `canvas` element");return cs},mt=()=>m().createElement("img"),vt=cs=>{const is=pt();return is.width=cs.width,is.height=cs.height,is},yt=(cs,is,us)=>cs.toDataURL("image/".concat(is),us),_t=(cs,is,us)=>new Promise((hs,lo)=>{cs.toBlob(hs,"image/".concat(is),us)}),xt=cs=>cs*w,Ct=cs=>cs/w,bt=cs=>cs.every((is,us)=>is===T[us]),St=(cs,is,us)=>new ot(cs).transform(is,us),wt=cs=>{const is=1/(cs[0]*cs[3]-cs[1]*cs[2]),us=[is*cs[3],-is*cs[1],-is*cs[2],is*cs[0],0,0],{x:hs,y:lo}=new ot(cs[4],cs[5]).transform(us,!0);return us[4]=-hs,us[5]=-lo,us},Tt=(cs,is,us)=>[cs[0]*is[0]+cs[2]*is[1],cs[1]*is[0]+cs[3]*is[1],cs[0]*is[2]+cs[2]*is[3],cs[1]*is[2]+cs[3]*is[3],us?0:cs[0]*is[4]+cs[2]*is[5]+cs[4],us?0:cs[1]*is[4]+cs[3]*is[5]+cs[5]],Ot=(cs,is)=>cs.reduceRight((us,hs)=>hs&&us?Tt(hs,us,is):hs||us,void 0)||T.concat(),kt=cs=>{let[is,us]=cs;return Math.atan2(us,is)},Dt=cs=>{const is=kt(cs),us=Math.pow(cs[0],2)+Math.pow(cs[1],2),hs=Math.sqrt(us),lo=(cs[0]*cs[3]-cs[2]*cs[1])/hs,co=Math.atan2(cs[0]*cs[2]+cs[1]*cs[3],us);return{angle:Ct(is),scaleX:hs,scaleY:lo,skewX:Ct(co),skewY:0,translateX:cs[4]||0,translateY:cs[5]||0}},Mt=function(cs){return[1,0,0,1,cs,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Pt(){let{angle:cs=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:is=0,y:us=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const hs=xt(cs),lo=rt(hs),co=nt(hs);return[lo,co,-co,lo,is?is-(lo*is-co*us):0,us?us-(co*is+lo*us):0]}const Et=function(cs){return[cs,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:cs,0,0]},At=cs=>Math.tan(xt(cs)),jt=cs=>[1,0,At(cs),1,0,0],Ft=cs=>[1,At(cs),0,1,0,0],Lt=cs=>{let{scaleX:is=1,scaleY:us=1,flipX:hs=!1,flipY:lo=!1,skewX:co=0,skewY:uo=0}=cs,ga=Et(hs?-is:is,lo?-us:us);return co&&(ga=Tt(ga,jt(co),!0)),uo&&(ga=Tt(ga,Ft(uo),!0)),ga},Rt=cs=>{const{translateX:is=0,translateY:us=0,angle:hs=0}=cs;let lo=Mt(is,us);hs&&(lo=Tt(lo,Pt({angle:hs})));const co=Lt(cs);return bt(co)||(lo=Tt(lo,co)),lo},It=function(cs){let{signal:is,crossOrigin:us=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(hs,lo){if(is&&is.aborted)return lo(new c("loadImage"));const co=mt();let uo;is&&(uo=function(ba){co.src="",lo(ba)},is.addEventListener("abort",uo,{once:!0}));const ga=function(){co.onload=co.onerror=null,uo&&(is==null||is.removeEventListener("abort",uo)),hs(co)};cs?(co.onload=ga,co.onerror=function(){uo&&(is==null||is.removeEventListener("abort",uo)),lo(new h("Error loading ".concat(co.src)))},us&&(co.crossOrigin=us),co.src=cs):ga()})},Bt=function(cs){let{signal:is,reviver:us=C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((hs,lo)=>{const co=[];is&&is.addEventListener("abort",lo,{once:!0}),Promise.all(cs.map(uo=>tt.getClass(uo.type).fromObject(uo,{signal:is}).then(ga=>(us(uo,ga),co.push(ga),ga)))).then(hs).catch(uo=>{co.forEach(ga=>{ga.dispose&&ga.dispose()}),lo(uo)}).finally(()=>{is&&is.removeEventListener("abort",lo)})})},Xt=function(cs){let{signal:is}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((us,hs)=>{const lo=[];is&&is.addEventListener("abort",hs,{once:!0});const co=Object.values(cs).map(ga=>ga&&ga.type&&tt.has(ga.type)?Bt([ga],{signal:is}).then(ba=>{let[xa]=ba;return lo.push(xa),xa}):ga),uo=Object.keys(cs);Promise.all(co).then(ga=>ga.reduce((ba,xa,_a)=>(ba[uo[_a]]=xa,ba),{})).then(us).catch(ga=>{lo.forEach(ba=>{ba.dispose&&ba.dispose()}),hs(ga)}).finally(()=>{is&&is.removeEventListener("abort",hs)})})},Yt=function(cs){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((is,us)=>(us in cs&&(is[us]=cs[us]),is),{})},Wt=(cs,is)=>Object.keys(cs).reduce((us,hs)=>(is(cs[hs],hs,cs)&&(us[hs]=cs[hs]),us),{}),Vt=(cs,is)=>parseFloat(Number(cs).toFixed(is)),zt=cs=>"matrix("+cs.map(is=>Vt(is,o.NUM_FRACTION_DIGITS)).join(" ")+")",Gt=cs=>!!cs&&cs.toLive!==void 0,Ht=cs=>!!cs&&typeof cs.toObject=="function",Nt=cs=>!!cs&&cs.offsetX!==void 0&&"source"in cs,Ut=cs=>!!cs&&"multiSelectionStacking"in cs;function qt(cs){const is=cs&&Kt(cs);let us=0,hs=0;if(!cs||!is)return{left:us,top:hs};let lo=cs;const co=is.documentElement,uo=is.body||{scrollLeft:0,scrollTop:0};for(;lo&&(lo.parentNode||lo.host)&&(lo=lo.parentNode||lo.host,lo===is?(us=uo.scrollLeft||co.scrollLeft||0,hs=uo.scrollTop||co.scrollTop||0):(us+=lo.scrollLeft||0,hs+=lo.scrollTop||0),lo.nodeType!==1||lo.style.position!=="fixed"););return{left:us,top:hs}}const Kt=cs=>cs.ownerDocument||null,Jt=cs=>{var is;return((is=cs.ownerDocument)===null||is===void 0?void 0:is.defaultView)||null},Qt=function(cs,is,us){let{width:hs,height:lo}=us,co=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;cs.width=hs,cs.height=lo,co>1&&(cs.setAttribute("width",(hs*co).toString()),cs.setAttribute("height",(lo*co).toString()),is.scale(co,co))},Zt=(cs,is)=>{let{width:us,height:hs}=is;us&&(cs.style.width=typeof us=="number"?"".concat(us,"px"):us),hs&&(cs.style.height=typeof hs=="number"?"".concat(hs,"px"):hs)};function $t(cs){return cs.onselectstart!==void 0&&(cs.onselectstart=()=>!1),cs.style.userSelect=j,cs}class te{constructor(is){t(this,"_originalCanvasStyle",void 0),t(this,"lower",void 0);const us=this.createLowerCanvas(is);this.lower={el:us,ctx:us.getContext("2d")}}createLowerCanvas(is){const us=(hs=is)&&hs.getContext!==void 0?is:is&&m().getElementById(is)||pt();var hs;if(us.hasAttribute("data-fabric"))throw new h("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=us.style.cssText,us.setAttribute("data-fabric","main"),us.classList.add("lower-canvas"),us}cleanupDOM(is){let{width:us,height:hs}=is;const{el:lo}=this.lower;lo.classList.remove("lower-canvas"),lo.removeAttribute("data-fabric"),lo.setAttribute("width","".concat(us)),lo.setAttribute("height","".concat(hs)),lo.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(is,us){const{el:hs,ctx:lo}=this.lower;Qt(hs,lo,is,us)}setCSSDimensions(is){Zt(this.lower.el,is)}calcOffset(){return function(is){var us;const hs=is&&Kt(is),lo={left:0,top:0};if(!hs)return lo;const co=((us=Jt(is))===null||us===void 0?void 0:us.getComputedStyle(is,null))||{};lo.left+=parseInt(co.borderLeftWidth,10)||0,lo.top+=parseInt(co.borderTopWidth,10)||0,lo.left+=parseInt(co.paddingLeft,10)||0,lo.top+=parseInt(co.paddingTop,10)||0;let uo={left:0,top:0};const ga=hs.documentElement;is.getBoundingClientRect!==void 0&&(uo=is.getBoundingClientRect());const ba=qt(is);return{left:uo.left+ba.left-(ga.clientLeft||0)+lo.left,top:uo.top+ba.top-(ga.clientTop||0)+lo.top}}(this.lower.el)}dispose(){p().dispose(this.lower.el),delete this.lower}}const ee={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...T]};class se extends ct(lt){get lowerCanvasEl(){var is;return(is=this.elements.lower)===null||is===void 0?void 0:is.el}get contextContainer(){var is;return(is=this.elements.lower)===null||is===void 0?void 0:is.ctx}static getDefaults(){return se.ownDefaults}constructor(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(us),this.initElements(is),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(is){this.elements=new te(is)}add(){const is=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),is}insertAt(is){for(var us=arguments.length,hs=new Array(us>1?us-1:0),lo=1;lo<us;lo++)hs[lo-1]=arguments[lo];const co=super.insertAt(is,...hs);return hs.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),co}remove(){const is=super.remove(...arguments);return is.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),is}_onObjectAdded(is){is.canvas&&is.canvas!==this&&(a("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),is.canvas.remove(is)),is._set("canvas",this),is.setCoords(),this.fire("object:added",{target:is}),is.fire("added",{target:this})}_onObjectRemoved(is){is._set("canvas",void 0),this.fire("object:removed",{target:is}),is.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?y():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(is,us){return this.setDimensions({width:is},us)}setHeight(is,us){return this.setDimensions({height:is},us)}_setDimensionsImpl(is){let{cssOnly:us=!1,backstoreOnly:hs=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!us){const lo=s({width:this.width,height:this.height},is);this.elements.setDimensions(lo,this.getRetinaScaling()),this.hasLostContext=!0,this.width=lo.width,this.height=lo.height}hs||this.elements.setCSSDimensions(is),this.calcOffset()}setDimensions(is,us){this._setDimensionsImpl(is,us),us&&us.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(is){this.viewportTransform=is,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(is,us){const hs=is,lo=[...this.viewportTransform],co=St(is,wt(lo));lo[0]=us,lo[3]=us;const uo=St(co,lo);lo[4]+=hs.x-uo.x,lo[5]+=hs.y-uo.y,this.setViewportTransform(lo)}setZoom(is){this.zoomToPoint(new ot(0,0),is)}absolutePan(is){const us=[...this.viewportTransform];return us[4]=-is.x,us[5]=-is.y,this.setViewportTransform(us)}relativePan(is){return this.absolutePan(new ot(-is.x-this.viewportTransform[4],-is.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(is){is.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ut(()=>this.renderAndReset()))}calcViewportBoundaries(){const is=this.width,us=this.height,hs=wt(this.viewportTransform),lo=St({x:0,y:0},hs),co=St({x:is,y:us},hs),uo=lo.min(co),ga=lo.max(co);return this.vptCoords={tl:uo,tr:new ot(ga.x,uo.y),bl:new ot(uo.x,ga.y),br:ga}}cancelRequestedRender(){this.nextRenderHandle&&(dt(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(is){}renderCanvas(is,us){if(this.destroyed)return;const hs=this.viewportTransform,lo=this.clipPath;this.calcViewportBoundaries(),this.clearContext(is),is.imageSmoothingEnabled=this.imageSmoothingEnabled,is.patternQuality="best",this.fire("before:render",{ctx:is}),this._renderBackground(is),is.save(),is.transform(hs[0],hs[1],hs[2],hs[3],hs[4],hs[5]),this._renderObjects(is,us),is.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(is),lo&&(lo._set("canvas",this),lo.shouldCache(),lo._transformDone=!0,lo.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(is,lo)),this._renderOverlay(is),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(is),this.fire("after:render",{ctx:is}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(is,us){const hs=this.viewportTransform;is.save(),is.transform(...hs),is.globalCompositeOperation="destination-in",us.transform(is),is.scale(1/us.zoomX,1/us.zoomY),is.drawImage(us._cacheCanvas,-us.cacheTranslationX,-us.cacheTranslationY),is.restore()}_renderObjects(is,us){for(let hs=0,lo=us.length;hs<lo;++hs)us[hs]&&us[hs].render(is)}_renderBackgroundOrOverlay(is,us){const hs=this["".concat(us,"Color")],lo=this["".concat(us,"Image")],co=this.viewportTransform,uo=this["".concat(us,"Vpt")];if(!hs&&!lo)return;const ga=Gt(hs);if(hs){if(is.save(),is.beginPath(),is.moveTo(0,0),is.lineTo(this.width,0),is.lineTo(this.width,this.height),is.lineTo(0,this.height),is.closePath(),is.fillStyle=ga?hs.toLive(is):hs,uo&&is.transform(...co),ga){is.transform(1,0,0,1,hs.offsetX||0,hs.offsetY||0);const ba=hs.gradientTransform||hs.patternTransform;ba&&is.transform(...ba)}is.fill(),is.restore()}if(lo){is.save();const{skipOffscreen:ba}=this;this.skipOffscreen=uo,uo&&is.transform(...co),lo.render(is),this.skipOffscreen=ba,is.restore()}}_renderBackground(is){this._renderBackgroundOrOverlay(is,"background")}_renderOverlay(is){this._renderBackgroundOrOverlay(is,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new ot(this.width/2,this.height/2)}centerObjectH(is){return this._centerObject(is,new ot(this.getCenterPoint().x,is.getCenterPoint().y))}centerObjectV(is){return this._centerObject(is,new ot(is.getCenterPoint().x,this.getCenterPoint().y))}centerObject(is){return this._centerObject(is,this.getCenterPoint())}viewportCenterObject(is){return this._centerObject(is,this.getVpCenter())}viewportCenterObjectH(is){return this._centerObject(is,new ot(this.getVpCenter().x,is.getCenterPoint().y))}viewportCenterObjectV(is){return this._centerObject(is,new ot(is.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return St(this.getCenterPoint(),wt(this.viewportTransform))}_centerObject(is,us){is.setXY(us,D,D),is.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(is){return this.toDatalessObject(is)}toObject(is){return this._toObjectMethod("toObject",is)}toJSON(){return this.toObject()}toDatalessObject(is){return this._toObjectMethod("toDatalessObject",is)}_toObjectMethod(is,us){const hs=this.clipPath,lo=hs&&!hs.excludeFromExport?this._toObject(hs,is,us):null;return s(s(s({version:x},Yt(this,us)),{},{objects:this._objects.filter(co=>!co.excludeFromExport).map(co=>this._toObject(co,is,us))},this.__serializeBgOverlay(is,us)),lo?{clipPath:lo}:null)}_toObject(is,us,hs){let lo;this.includeDefaultValues||(lo=is.includeDefaultValues,is.includeDefaultValues=!1);const co=is[us](hs);return this.includeDefaultValues||(is.includeDefaultValues=!!lo),co}__serializeBgOverlay(is,us){const hs={},lo=this.backgroundImage,co=this.overlayImage,uo=this.backgroundColor,ga=this.overlayColor;return Gt(uo)?uo.excludeFromExport||(hs.background=uo.toObject(us)):uo&&(hs.background=uo),Gt(ga)?ga.excludeFromExport||(hs.overlay=ga.toObject(us)):ga&&(hs.overlay=ga),lo&&!lo.excludeFromExport&&(hs.backgroundImage=this._toObject(lo,is,us)),co&&!co.excludeFromExport&&(hs.overlayImage=this._toObject(co,is,us)),hs}toSVG(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},us=arguments.length>1?arguments[1]:void 0;is.reviver=us;const hs=[];return this._setSVGPreamble(hs,is),this._setSVGHeader(hs,is),this.clipPath&&hs.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(hs,"background"),this._setSVGBgOverlayImage(hs,"backgroundImage",us),this._setSVGObjects(hs,us),this.clipPath&&hs.push(`</g>
`),this._setSVGBgOverlayColor(hs,"overlay"),this._setSVGBgOverlayImage(hs,"overlayImage",us),hs.push("</svg>"),hs.join("")}_setSVGPreamble(is,us){us.suppressPreamble||is.push('<?xml version="1.0" encoding="',us.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(is,us){const hs=us.width||"".concat(this.width),lo=us.height||"".concat(this.height),co=o.NUM_FRACTION_DIGITS,uo=us.viewBox;let ga;if(uo)ga='viewBox="'.concat(uo.x," ").concat(uo.y," ").concat(uo.width," ").concat(uo.height,'" ');else if(this.svgViewportTransformation){const ba=this.viewportTransform;ga='viewBox="'.concat(Vt(-ba[4]/ba[0],co)," ").concat(Vt(-ba[5]/ba[3],co)," ").concat(Vt(this.width/ba[0],co)," ").concat(Vt(this.height/ba[3],co),'" ')}else ga='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');is.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',hs,'" ','height="',lo,'" ',ga,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",x,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(us),`</defs>
`)}createSVGClipPathMarkup(is){const us=this.clipPath;return us?(us.clipPathId="CLIPPATH_".concat(ft()),'<clipPath id="'.concat(us.clipPathId,`" >
`).concat(us.toClipPathSVG(is.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(is=>{const us=this["".concat(is,"Color")];if(Gt(us)){const hs=this["".concat(is,"Vpt")],lo=this.viewportTransform,co={isType:()=>!1,width:this.width/(hs?lo[0]:1),height:this.height/(hs?lo[3]:1)};return us.toSVG(co,{additionalTransform:hs?zt(lo):""})}}).join("")}createSVGFontFacesMarkup(){const is=[],us={},hs=o.fontPaths;this._objects.forEach(function co(uo){is.push(uo),ht(uo)&&uo._objects.forEach(co)}),is.forEach(co=>{if(!(uo=co)||typeof uo._renderText!="function")return;var uo;const{styles:ga,fontFamily:ba}=co;!us[ba]&&hs[ba]&&(us[ba]=!0,ga&&Object.values(ga).forEach(xa=>{Object.values(xa).forEach(_a=>{let{fontFamily:$a=""}=_a;!us[$a]&&hs[$a]&&(us[$a]=!0)})}))});const lo=Object.keys(us).map(co=>`		@font-face {
			font-family: '`.concat(co,`';
			src: url('`).concat(hs[co],`');
		}
`)).join("");return lo?`	<style type="text/css"><![CDATA[
`.concat(lo,`]]></style>
`):""}_setSVGObjects(is,us){this.forEachObject(hs=>{hs.excludeFromExport||this._setSVGObject(is,hs,us)})}_setSVGObject(is,us,hs){is.push(us.toSVG(hs))}_setSVGBgOverlayImage(is,us,hs){const lo=this[us];lo&&!lo.excludeFromExport&&lo.toSVG&&is.push(lo.toSVG(hs))}_setSVGBgOverlayColor(is,us){const hs=this["".concat(us,"Color")];if(hs)if(Gt(hs)){const lo=hs.repeat||"",co=this.width,uo=this.height,ga=this["".concat(us,"Vpt")]?zt(wt(this.viewportTransform)):"";is.push('<rect transform="'.concat(ga," translate(").concat(co/2,",").concat(uo/2,')" x="').concat(hs.offsetX-co/2,'" y="').concat(hs.offsetY-uo/2,'" width="').concat(lo!=="repeat-y"&&lo!=="no-repeat"||!Nt(hs)?co:hs.source.width,'" height="').concat(lo!=="repeat-x"&&lo!=="no-repeat"||!Nt(hs)?uo:hs.source.height,'" fill="url(#SVGID_').concat(hs.id,`)"></rect>
`))}else is.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',hs,'"',`></rect>
`)}loadFromJSON(is,us){let{signal:hs}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!is)return Promise.reject(new h("`json` is undefined"));const lo=typeof is=="string"?JSON.parse(is):is,{objects:co=[],backgroundImage:uo,background:ga,overlayImage:ba,overlay:xa,clipPath:_a}=lo,$a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Bt(co,{reviver:us,signal:hs}),Xt({backgroundImage:uo,backgroundColor:ga,overlayImage:ba,overlayColor:xa,clipPath:_a},{signal:hs})]).then(xl=>{let[yl,wl]=xl;return this.clear(),this.add(...yl),this.set(lo),this.set(wl),this.renderOnAddRemove=$a,this})}clone(is){const us=this.toObject(is);return this.cloneWithoutData().loadFromJSON(us)}cloneWithoutData(){const is=vt(this);return new this.constructor(is)}toDataURL(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:us="png",quality:hs=1,multiplier:lo=1,enableRetinaScaling:co=!1}=is,uo=lo*(co?this.getRetinaScaling():1);return yt(this.toCanvasElement(uo,is),us,hs)}toBlob(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:us="png",quality:hs=1,multiplier:lo=1,enableRetinaScaling:co=!1}=is,uo=lo*(co?this.getRetinaScaling():1);return _t(this.toCanvasElement(uo,is),us,hs)}toCanvasElement(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:us,height:hs,left:lo,top:co,filter:uo}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const ga=(us||this.width)*is,ba=(hs||this.height)*is,xa=this.getZoom(),_a=this.width,$a=this.height,xl=this.skipControlsDrawing,yl=xa*is,wl=this.viewportTransform,_l=[yl,0,0,yl,(wl[4]-(lo||0))*is,(wl[5]-(co||0))*is],El=this.enableRetinaScaling,Sl=vt({width:ga,height:ba}),Cl=uo?this._objects.filter(Tl=>uo(Tl)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=_l,this.width=ga,this.height=ba,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(Sl.getContext("2d"),Cl),this.viewportTransform=wl,this.width=_a,this.height=$a,this.calcViewportBoundaries(),this.enableRetinaScaling=El,this.skipControlsDrawing=xl,Sl}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),et.cancelByCanvas(this),this.disposed=!0,new Promise((is,us)=>{const hs=()=>{this.destroy(),is(!0)};hs.kill=us,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?is(!1):this.nextRenderHandle?this.__cleanupTask=hs:hs()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(is=>is.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}t(se,"ownDefaults",ee);const ie=["touchstart","touchmove","touchend"],re=cs=>{const is=qt(cs.target),us=function(hs){const lo=hs.changedTouches;return lo&&lo[0]?lo[0]:hs}(cs);return new ot(us.clientX+is.left,us.clientY+is.top)},ne=cs=>ie.includes(cs.type)||cs.pointerType==="touch",oe=cs=>{cs.preventDefault(),cs.stopPropagation()},ae=cs=>{let is=0,us=0,hs=0,lo=0;for(let co=0,uo=cs.length;co<uo;co++){const{x:ga,y:ba}=cs[co];(ga>hs||!co)&&(hs=ga),(ga<is||!co)&&(is=ga),(ba>lo||!co)&&(lo=ba),(ba<us||!co)&&(us=ba)}return{left:is,top:us,width:hs-is,height:lo-us}},he=["translateX","translateY","scaleX","scaleY"],ce=(cs,is)=>le(cs,Tt(is,cs.calcOwnMatrix())),le=(cs,is)=>{const us=Dt(is),{translateX:hs,translateY:lo,scaleX:co,scaleY:uo}=us,ga=i(us,he),ba=new ot(hs,lo);cs.flipX=!1,cs.flipY=!1,Object.assign(cs,ga),cs.set({scaleX:co,scaleY:uo}),cs.setPositionByOrigin(ba,D,D)},ue=cs=>{cs.scaleX=1,cs.scaleY=1,cs.skewX=0,cs.skewY=0,cs.flipX=!1,cs.flipY=!1,cs.rotate(0)},de=cs=>({scaleX:cs.scaleX,scaleY:cs.scaleY,skewX:cs.skewX,skewY:cs.skewY,angle:cs.angle,left:cs.left,flipX:cs.flipX,flipY:cs.flipY,top:cs.top}),ge=(cs,is,us)=>{const hs=cs/2,lo=is/2,co=[new ot(-hs,-lo),new ot(hs,-lo),new ot(-hs,lo),new ot(hs,lo)].map(ga=>ga.transform(us)),uo=ae(co);return new ot(uo.width,uo.height)},fe=function(){let cs=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T;return Tt(wt(arguments.length>1&&arguments[1]!==void 0?arguments[1]:T),cs)},pe=function(cs){let is=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T,us=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T;return cs.transform(fe(is,us))},me=function(cs){let is=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T,us=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T;return cs.transform(fe(is,us),!0)},ve=(cs,is,us)=>{const hs=fe(is,us);return le(cs,Tt(hs,cs.calcOwnMatrix())),hs},ye=(cs,is)=>{var us;const{transform:{target:hs}}=is;(us=hs.canvas)===null||us===void 0||us.fire("object:".concat(cs),s(s({},is),{},{target:hs})),hs.fire(cs,is)},_e={left:-.5,top:-.5,center:0,bottom:.5,right:.5},xe=cs=>typeof cs=="string"?_e[cs]:cs-.5,Ce="not-allowed";function be(cs){return xe(cs.originX)===xe(D)&&xe(cs.originY)===xe(D)}function Se(cs){return .5-xe(cs)}const we=(cs,is)=>cs[is],Te=(cs,is,us,hs)=>({e:cs,transform:is,pointer:new ot(us,hs)});function Oe(cs,is){const us=cs.getTotalAngle()+Ct(Math.atan2(is.y,is.x))+360;return Math.round(us%360/45)}function ke(cs,is,us,hs,lo){var co;let{target:uo,corner:ga}=cs;const ba=uo.controls[ga],xa=((co=uo.canvas)===null||co===void 0?void 0:co.getZoom())||1,_a=uo.padding/xa,$a=function(xl,yl,wl,_l){const El=xl.getRelativeCenterPoint(),Sl=wl!==void 0&&_l!==void 0?xl.translateToGivenOrigin(El,D,D,wl,_l):new ot(xl.left,xl.top);return(xl.angle?yl.rotate(-xt(xl.angle),El):yl).subtract(Sl)}(uo,new ot(hs,lo),is,us);return $a.x>=_a&&($a.x-=_a),$a.x<=-_a&&($a.x+=_a),$a.y>=_a&&($a.y-=_a),$a.y<=_a&&($a.y+=_a),$a.x-=ba.offsetX,$a.y-=ba.offsetY,$a}const De=(cs,is,us,hs)=>{const{target:lo,offsetX:co,offsetY:uo}=is,ga=us-co,ba=hs-uo,xa=!we(lo,"lockMovementX")&&lo.left!==ga,_a=!we(lo,"lockMovementY")&&lo.top!==ba;return xa&&lo.set(M,ga),_a&&lo.set(P,ba),(xa||_a)&&ye(L,Te(cs,is,us,hs)),xa||_a},Me={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Pe=(cs,is,us)=>(us<0&&(us+=1),us>1&&(us-=1),us<1/6?cs+6*(is-cs)*us:us<.5?is:us<2/3?cs+(is-cs)*(2/3-us)*6:cs),Ee=(cs,is,us,hs)=>{cs/=255,is/=255,us/=255;const lo=Math.max(cs,is,us),co=Math.min(cs,is,us);let uo,ga;const ba=(lo+co)/2;if(lo===co)uo=ga=0;else{const xa=lo-co;switch(ga=ba>.5?xa/(2-lo-co):xa/(lo+co),lo){case cs:uo=(is-us)/xa+(is<us?6:0);break;case is:uo=(us-cs)/xa+2;break;case us:uo=(cs-is)/xa+4}uo/=6}return[Math.round(360*uo),Math.round(100*ga),Math.round(100*ba),hs]},Ae=function(){let cs=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(cs)/(cs.endsWith("%")?100:1)},je=cs=>Math.min(Math.round(cs),255).toString(16).toUpperCase().padStart(2,"0"),Fe=cs=>{let[is,us,hs,lo=1]=cs;const co=Math.round(.3*is+.59*us+.11*hs);return[co,co,co,lo]};class Le{constructor(is){if(t(this,"isUnrecognised",!1),is)if(is instanceof Le)this.setSource([...is._source]);else if(Array.isArray(is)){const[us,hs,lo,co=1]=is;this.setSource([us,hs,lo,co])}else this.setSource(this._tryParsingColor(is));else this.setSource([0,0,0,1])}_tryParsingColor(is){return(is=is.toLowerCase())in Me&&(is=Me[is]),is==="transparent"?[255,255,255,0]:Le.sourceFromHex(is)||Le.sourceFromRgb(is)||Le.sourceFromHsl(is)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(is){this._source=is}toRgb(){const[is,us,hs]=this.getSource();return"rgb(".concat(is,",").concat(us,",").concat(hs,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[is,us,hs]=Ee(...this.getSource());return"hsl(".concat(is,",").concat(us,"%,").concat(hs,"%)")}toHsla(){const[is,us,hs,lo]=Ee(...this.getSource());return"hsla(".concat(is,",").concat(us,"%,").concat(hs,"%,").concat(lo,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[is,us,hs,lo]=this.getSource();return"".concat(je(is)).concat(je(us)).concat(je(hs)).concat(je(Math.round(255*lo)))}getAlpha(){return this.getSource()[3]}setAlpha(is){return this._source[3]=is,this}toGrayscale(){return this.setSource(Fe(this.getSource())),this}toBlackWhite(is){const[us,,,hs]=Fe(this.getSource()),lo=us<(is||127)?0:255;return this.setSource([lo,lo,lo,hs]),this}overlayWith(is){is instanceof Le||(is=new Le(is));const us=this.getSource(),hs=is.getSource(),[lo,co,uo]=us.map((ga,ba)=>Math.round(.5*ga+.5*hs[ba]));return this.setSource([lo,co,uo,us[3]]),this}static fromRgb(is){return Le.fromRgba(is)}static fromRgba(is){return new Le(Le.sourceFromRgb(is))}static sourceFromRgb(is){const us=is.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(us){const[hs,lo,co]=us.slice(1,4).map(uo=>{const ga=parseFloat(uo);return uo.endsWith("%")?Math.round(2.55*ga):ga});return[hs,lo,co,Ae(us[4])]}}static fromHsl(is){return Le.fromHsla(is)}static fromHsla(is){return new Le(Le.sourceFromHsl(is))}static sourceFromHsl(is){const us=is.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!us)return;const hs=(Le.parseAngletoDegrees(us[1])%360+360)%360/360,lo=parseFloat(us[2])/100,co=parseFloat(us[3])/100;let uo,ga,ba;if(lo===0)uo=ga=ba=co;else{const xa=co<=.5?co*(lo+1):co+lo-co*lo,_a=2*co-xa;uo=Pe(_a,xa,hs+1/3),ga=Pe(_a,xa,hs),ba=Pe(_a,xa,hs-1/3)}return[Math.round(255*uo),Math.round(255*ga),Math.round(255*ba),Ae(us[4])]}static fromHex(is){return new Le(Le.sourceFromHex(is))}static sourceFromHex(is){if(is.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const us=is.slice(is.indexOf("#")+1);let hs;hs=us.length<=4?us.split("").map(ba=>ba+ba):us.match(/.{2}/g);const[lo,co,uo,ga=255]=hs.map(ba=>parseInt(ba,16));return[lo,co,uo,ga/255]}}static parseAngletoDegrees(is){const us=is.toLowerCase(),hs=parseFloat(us);return us.includes("rad")?Ct(hs):us.includes("turn")?360*hs:hs}}const Re=function(cs){let is=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O;const us=/\D{0,2}$/.exec(cs),hs=parseFloat(cs),lo=o.DPI;switch(us==null?void 0:us[0]){case"mm":return hs*lo/25.4;case"cm":return hs*lo/2.54;case"in":return hs*lo;case"pt":return hs*lo/72;case"pc":return hs*lo/72*12;case"em":return hs*is;default:return hs}},Ie=cs=>{const[is,us]=cs.trim().split(" "),[hs,lo]=(co=is)&&co!==j?[co.slice(1,4),co.slice(5,8)]:co===j?[co,co]:["Mid","Mid"];var co;return{meetOrSlice:us||"meet",alignX:hs,alignY:lo}},Be=function(cs,is){let us,hs,lo=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(is)if(is.toLive)us="url(#SVGID_".concat(is.id,")");else{const co=new Le(is),uo=co.getAlpha();us=co.toRgb(),uo!==1&&(hs=uo.toString())}else us="none";return lo?"".concat(cs,": ").concat(us,"; ").concat(hs?"".concat(cs,"-opacity: ").concat(hs,"; "):""):"".concat(cs,'="').concat(us,'" ').concat(hs?"".concat(cs,'-opacity="').concat(hs,'" '):"")};class Xe{getSvgStyles(is){const us=this.fillRule?this.fillRule:"nonzero",hs=this.strokeWidth?this.strokeWidth:"0",lo=this.strokeDashArray?this.strokeDashArray.join(" "):j,co=this.strokeDashOffset?this.strokeDashOffset:"0",uo=this.strokeLineCap?this.strokeLineCap:"butt",ga=this.strokeLineJoin?this.strokeLineJoin:"miter",ba=this.strokeMiterLimit?this.strokeMiterLimit:"4",xa=this.opacity!==void 0?this.opacity:"1",_a=this.visible?"":" visibility: hidden;",$a=is?"":this.getSvgFilter(),xl=Be(K,this.fill);return[Be(J,this.stroke),"stroke-width: ",hs,"; ","stroke-dasharray: ",lo,"; ","stroke-linecap: ",uo,"; ","stroke-dashoffset: ",co,"; ","stroke-linejoin: ",ga,"; ","stroke-miterlimit: ",ba,"; ",xl,"fill-rule: ",us,"; ","opacity: ",xa,";",$a,_a].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const hs=is?this.calcTransformMatrix():this.calcOwnMatrix(),lo='transform="'.concat(zt(hs));return"".concat(lo).concat(us,'" ')}_toSVG(is){return[""]}toSVG(is){return this._createBaseSVGMarkup(this._toSVG(is),{reviver:is})}toClipPathSVG(is){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(is),{reviver:is})}_createBaseClipPathSVGMarkup(is){let{reviver:us,additionalTransform:hs=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const lo=[this.getSvgTransform(!0,hs),this.getSvgCommons()].join(""),co=is.indexOf("COMMON_PARTS");return is[co]=lo,us?us(is.join("")):is.join("")}_createBaseSVGMarkup(is){let{noStyle:us,reviver:hs,withShadow:lo,additionalTransform:co}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const uo=us?"":'style="'.concat(this.getSvgStyles(),'" '),ga=lo?'style="'.concat(this.getSvgFilter(),'" '):"",ba=this.clipPath,xa=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",_a=ba&&ba.absolutePositioned,$a=this.stroke,xl=this.fill,yl=this.shadow,wl=[],_l=is.indexOf("COMMON_PARTS");let El;ba&&(ba.clipPathId="CLIPPATH_".concat(ft()),El='<clipPath id="'.concat(ba.clipPathId,`" >
`).concat(ba.toClipPathSVG(hs),`</clipPath>
`)),_a&&wl.push("<g ",ga,this.getSvgCommons(),` >
`),wl.push("<g ",this.getSvgTransform(!1),_a?"":ga+this.getSvgCommons(),` >
`);const Sl=[uo,xa,us?"":this.addPaintOrder()," ",co?'transform="'.concat(co,'" '):""].join("");return is[_l]=Sl,Gt(xl)&&wl.push(xl.toSVG(this)),Gt($a)&&wl.push($a.toSVG(this)),yl&&wl.push(yl.toSVG(this)),ba&&wl.push(El),wl.push(is.join("")),wl.push(`</g>
`),_a&&wl.push(`</g>
`),hs?hs(wl.join("")):wl.join("")}addPaintOrder(){return this.paintFirst!==K?' paint-order="'.concat(this.paintFirst,'" '):""}}function Ye(cs){return new RegExp("^("+cs.join("|")+")\\b","i")}const We="textDecorationThickness",Ve=["fontSize","fontWeight","fontFamily","fontStyle"],ze=["underline","overline","linethrough"],Ge=[...Ve,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],He=[...Ge,...ze,"textBackgroundColor","direction",We],Ne=[...Ve,...ze,J,"strokeWidth",K,"deltaY","textBackgroundColor",We],Ue={_reNewline:F,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:M,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:M,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[We]:66.667},qe="justify",Ke="justify-left",Je="justify-right",Qe="justify-center";var Ze,$e,ts;const es=String.raw(Ze||(Ze=r(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),ss=String.raw($e||($e=r(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),rs=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+es+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+es+"))?\\s+(.*)"),ns={cx:M,x:M,r:"radius",cy:P,y:P,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":We},os="font-size",as="clip-path";Ye(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Ye(["symbol","image","marker","pattern","view","svg"]);const ls=Ye(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(ts||(ts=r(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),es,ss,es,ss,es,ss,es));const ds=new ot(1,0),gs=new ot,fs=(cs,is)=>cs.rotate(is),ps=(cs,is)=>new ot(is).subtract(cs),ms=cs=>cs.distanceFrom(gs),vs=(cs,is)=>Math.atan2(Cs(cs,is),bs(cs,is)),ys=cs=>vs(ds,cs),_s=cs=>cs.eq(gs)?cs:cs.scalarDivide(ms(cs)),xs=function(cs){let is=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return _s(new ot(-cs.y,cs.x).scalarMultiply(is?1:-1))},Cs=(cs,is)=>cs.x*is.y-cs.y*is.x,bs=(cs,is)=>cs.x*is.x+cs.y*is.y,Ss=(cs,is,us)=>{if(cs.eq(is)||cs.eq(us))return!0;const hs=Cs(is,us),lo=Cs(is,cs),co=Cs(us,cs);return hs>=0?lo>=0&&co<=0:!(lo<=0&&co>=0)},ws="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Ts=new RegExp("(?:\\s|^)"+ws+ws+"("+es+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Os{constructor(is){const us=typeof is=="string"?Os.parseShadow(is):is;Object.assign(this,Os.ownDefaults,us),this.id=ft()}static parseShadow(is){const us=is.trim(),[,hs=0,lo=0,co=0]=(Ts.exec(us)||[]).map(uo=>parseFloat(uo)||0);return{color:(us.replace(Ts,"")||"rgb(0,0,0)").trim(),offsetX:hs,offsetY:lo,blur:co}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(is){const us=fs(new ot(this.offsetX,this.offsetY),xt(-is.angle)),hs=new Le(this.color);let lo=40,co=40;return is.width&&is.height&&(lo=100*Vt((Math.abs(us.x)+this.blur)/is.width,o.NUM_FRACTION_DIGITS)+20,co=100*Vt((Math.abs(us.y)+this.blur)/is.height,o.NUM_FRACTION_DIGITS)+20),is.flipX&&(us.x*=-1),is.flipY&&(us.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(co,'%" height="').concat(100+2*co,'%" x="-').concat(lo,'%" width="').concat(100+2*lo,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Vt(this.blur?this.blur/2:0,o.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Vt(us.x,o.NUM_FRACTION_DIGITS),'" dy="').concat(Vt(us.y,o.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(hs.toRgb(),'" flood-opacity="').concat(hs.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const is={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},us=Os.ownDefaults;return this.includeDefaultValues?is:Wt(is,(hs,lo)=>hs!==us[lo])}static async fromObject(is){return new this(is)}}t(Os,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),t(Os,"type","shadow"),tt.setClass(Os,"shadow");const ks=(cs,is,us)=>Math.max(cs,Math.min(is,us)),Ds=[P,M,H,N,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",U,q],Ms=[K,J,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],Ps={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:M,originY:P,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:K,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Es=(cs,is,us,hs)=>(cs<Math.abs(is)?(cs=is,hs=us/4):hs=is===0&&cs===0?us/S*Math.asin(1):us/S*Math.asin(is/cs),{a:cs,c:is,p:us,s:hs}),As=(cs,is,us,hs,lo)=>cs*Math.pow(2,10*(hs-=1))*Math.sin((hs*lo-is)*S/us),js=(cs,is,us,hs)=>-us*Math.cos(cs/hs*b)+us+is,Fs=(cs,is,us,hs)=>(cs/=hs)<1/2.75?us*(7.5625*cs*cs)+is:cs<2/2.75?us*(7.5625*(cs-=1.5/2.75)*cs+.75)+is:cs<2.5/2.75?us*(7.5625*(cs-=2.25/2.75)*cs+.9375)+is:us*(7.5625*(cs-=2.625/2.75)*cs+.984375)+is,Ls=(cs,is,us,hs)=>us-Fs(hs-cs,0,us,hs)+is;var Rs=Object.freeze({__proto__:null,defaultEasing:js,easeInBack:function(cs,is,us,hs){let lo=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return us*(cs/=hs)*cs*((lo+1)*cs-lo)+is},easeInBounce:Ls,easeInCirc:(cs,is,us,hs)=>-us*(Math.sqrt(1-(cs/=hs)*cs)-1)+is,easeInCubic:(cs,is,us,hs)=>us*(cs/hs)**3+is,easeInElastic:(cs,is,us,hs)=>{const lo=us;let co=0;if(cs===0)return is;if((cs/=hs)===1)return is+us;co||(co=.3*hs);const{a:uo,s:ga,p:ba}=Es(lo,us,co,1.70158);return-As(uo,ga,ba,cs,hs)+is},easeInExpo:(cs,is,us,hs)=>cs===0?is:us*2**(10*(cs/hs-1))+is,easeInOutBack:function(cs,is,us,hs){let lo=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(cs/=hs/2)<1?us/2*(cs*cs*((1+(lo*=1.525))*cs-lo))+is:us/2*((cs-=2)*cs*((1+(lo*=1.525))*cs+lo)+2)+is},easeInOutBounce:(cs,is,us,hs)=>cs<hs/2?.5*Ls(2*cs,0,us,hs)+is:.5*Fs(2*cs-hs,0,us,hs)+.5*us+is,easeInOutCirc:(cs,is,us,hs)=>(cs/=hs/2)<1?-us/2*(Math.sqrt(1-cs**2)-1)+is:us/2*(Math.sqrt(1-(cs-=2)*cs)+1)+is,easeInOutCubic:(cs,is,us,hs)=>(cs/=hs/2)<1?us/2*cs**3+is:us/2*((cs-2)**3+2)+is,easeInOutElastic:(cs,is,us,hs)=>{const lo=us;let co=0;if(cs===0)return is;if((cs/=hs/2)===2)return is+us;co||(co=hs*(.3*1.5));const{a:uo,s:ga,p:ba,c:xa}=Es(lo,us,co,1.70158);return cs<1?-.5*As(uo,ga,ba,cs,hs)+is:uo*Math.pow(2,-10*(cs-=1))*Math.sin((cs*hs-ga)*S/ba)*.5+xa+is},easeInOutExpo:(cs,is,us,hs)=>cs===0?is:cs===hs?is+us:(cs/=hs/2)<1?us/2*2**(10*(cs-1))+is:us/2*-(2**(-10*--cs)+2)+is,easeInOutQuad:(cs,is,us,hs)=>(cs/=hs/2)<1?us/2*cs**2+is:-us/2*(--cs*(cs-2)-1)+is,easeInOutQuart:(cs,is,us,hs)=>(cs/=hs/2)<1?us/2*cs**4+is:-us/2*((cs-=2)*cs**3-2)+is,easeInOutQuint:(cs,is,us,hs)=>(cs/=hs/2)<1?us/2*cs**5+is:us/2*((cs-2)**5+2)+is,easeInOutSine:(cs,is,us,hs)=>-us/2*(Math.cos(Math.PI*cs/hs)-1)+is,easeInQuad:(cs,is,us,hs)=>us*(cs/=hs)*cs+is,easeInQuart:(cs,is,us,hs)=>us*(cs/=hs)*cs**3+is,easeInQuint:(cs,is,us,hs)=>us*(cs/hs)**5+is,easeInSine:(cs,is,us,hs)=>-us*Math.cos(cs/hs*b)+us+is,easeOutBack:function(cs,is,us,hs){let lo=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return us*((cs=cs/hs-1)*cs*((lo+1)*cs+lo)+1)+is},easeOutBounce:Fs,easeOutCirc:(cs,is,us,hs)=>us*Math.sqrt(1-(cs=cs/hs-1)*cs)+is,easeOutCubic:(cs,is,us,hs)=>us*((cs/hs-1)**3+1)+is,easeOutElastic:(cs,is,us,hs)=>{const lo=us;let co=0;if(cs===0)return is;if((cs/=hs)===1)return is+us;co||(co=.3*hs);const{a:uo,s:ga,p:ba,c:xa}=Es(lo,us,co,1.70158);return uo*2**(-10*cs)*Math.sin((cs*hs-ga)*S/ba)+xa+is},easeOutExpo:(cs,is,us,hs)=>cs===hs?is+us:us*-(2**(-10*cs/hs)+1)+is,easeOutQuad:(cs,is,us,hs)=>-us*(cs/=hs)*(cs-2)+is,easeOutQuart:(cs,is,us,hs)=>-us*((cs=cs/hs-1)*cs**3-1)+is,easeOutQuint:(cs,is,us,hs)=>us*((cs/hs-1)**5+1)+is,easeOutSine:(cs,is,us,hs)=>us*Math.sin(cs/hs*b)+is});const Is=()=>!1;class Bs{constructor(is){let{startValue:us,byValue:hs,duration:lo=500,delay:co=0,easing:uo=js,onStart:ga=C,onChange:ba=C,onComplete:xa=C,abort:_a=Is,target:$a}=is;t(this,"_state","pending"),t(this,"durationProgress",0),t(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=lo,this.delay=co,this.easing=uo,this._onStart=ga,this._onChange=ba,this._onComplete=xa,this._abort=_a,this.target=$a,this.startValue=us,this.byValue=hs,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const is=us=>{this._state==="pending"&&(this.startTime=us||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>ut(is),this.delay):ut(is)}tick(is){const us=(is||+new Date)-this.startTime,hs=Math.min(us,this.duration);this.durationProgress=hs/this.duration;const{value:lo,valueProgress:co}=this.calculate(hs);this.value=Object.freeze(lo),this.valueProgress=co,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):us>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ut(this.tick)))}register(){et.push(this)}unregister(){et.remove(this)}abort(){this._state="aborted",this.unregister()}}const Xs=["startValue","endValue"];class Ys extends Bs{constructor(is){let{startValue:us=0,endValue:hs=100}=is;super(s(s({},i(is,Xs)),{},{startValue:us,byValue:hs-us}))}calculate(is){const us=this.easing(is,this.startValue,this.byValue,this.duration);return{value:us,valueProgress:Math.abs((us-this.startValue)/this.byValue)}}}const Ws=["startValue","endValue"];class Vs extends Bs{constructor(is){let{startValue:us=[0],endValue:hs=[100]}=is;super(s(s({},i(is,Ws)),{},{startValue:us,byValue:hs.map((lo,co)=>lo-us[co])}))}calculate(is){const us=this.startValue.map((hs,lo)=>this.easing(is,hs,this.byValue[lo],this.duration,lo));return{value:us,valueProgress:Math.abs((us[0]-this.startValue[0])/this.byValue[0])}}}const zs=["startValue","endValue","easing","onChange","onComplete","abort"],Gs=(cs,is,us,hs)=>is+us*(1-Math.cos(cs/hs*b)),Hs=cs=>cs&&((is,us,hs)=>cs(new Le(is).toRgba(),us,hs));class Ns extends Bs{constructor(is){let{startValue:us,endValue:hs,easing:lo=Gs,onChange:co,onComplete:uo,abort:ga}=is,ba=i(is,zs);const xa=new Le(us).getSource(),_a=new Le(hs).getSource();super(s(s({},ba),{},{startValue:xa,byValue:_a.map(($a,xl)=>$a-xa[xl]),easing:lo,onChange:Hs(co),onComplete:Hs(uo),abort:Hs(ga)}))}calculate(is){const[us,hs,lo,co]=this.startValue.map((ga,ba)=>this.easing(is,ga,this.byValue[ba],this.duration,ba)),uo=[...[us,hs,lo].map(Math.round),ks(0,co,1)];return{value:uo,valueProgress:uo.map((ga,ba)=>this.byValue[ba]!==0?Math.abs((ga-this.startValue[ba])/this.byValue[ba]):0).find(ga=>ga!==0)||0}}}function Us(cs){const is=(us=>Array.isArray(us.startValue)||Array.isArray(us.endValue))(cs)?new Vs(cs):new Ys(cs);return is.start(),is}function qs(cs){const is=new Ns(cs);return is.start(),is}class Ks{constructor(is){this.status=is,this.points=[]}includes(is){return this.points.some(us=>us.eq(is))}append(){for(var is=arguments.length,us=new Array(is),hs=0;hs<is;hs++)us[hs]=arguments[hs];return this.points=this.points.concat(us.filter(lo=>!this.includes(lo))),this}static isPointContained(is,us,hs){let lo=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(us.eq(hs))return is.eq(us);if(us.x===hs.x)return is.x===us.x&&(lo||is.y>=Math.min(us.y,hs.y)&&is.y<=Math.max(us.y,hs.y));if(us.y===hs.y)return is.y===us.y&&(lo||is.x>=Math.min(us.x,hs.x)&&is.x<=Math.max(us.x,hs.x));{const co=ps(us,hs),uo=ps(us,is).divide(co);return lo?Math.abs(uo.x)===Math.abs(uo.y):uo.x===uo.y&&uo.x>=0&&uo.x<=1}}static isPointInPolygon(is,us){const hs=new ot(is).setX(Math.min(is.x-1,...us.map(co=>co.x)));let lo=0;for(let co=0;co<us.length;co++){const uo=this.intersectSegmentSegment(us[co],us[(co+1)%us.length],is,hs);if(uo.includes(is))return!0;lo+=+(uo.status==="Intersection")}return lo%2==1}static intersectLineLine(is,us,hs,lo){let co=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],uo=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const ga=us.x-is.x,ba=us.y-is.y,xa=lo.x-hs.x,_a=lo.y-hs.y,$a=is.x-hs.x,xl=is.y-hs.y,yl=xa*xl-_a*$a,wl=ga*xl-ba*$a,_l=_a*ga-xa*ba;if(_l!==0){const El=yl/_l,Sl=wl/_l;return(co||0<=El&&El<=1)&&(uo||0<=Sl&&Sl<=1)?new Ks("Intersection").append(new ot(is.x+El*ga,is.y+El*ba)):new Ks}if(yl===0||wl===0){const El=co||uo||Ks.isPointContained(is,hs,lo)||Ks.isPointContained(us,hs,lo)||Ks.isPointContained(hs,is,us)||Ks.isPointContained(lo,is,us);return new Ks(El?"Coincident":void 0)}return new Ks("Parallel")}static intersectSegmentLine(is,us,hs,lo){return Ks.intersectLineLine(is,us,hs,lo,!1,!0)}static intersectSegmentSegment(is,us,hs,lo){return Ks.intersectLineLine(is,us,hs,lo,!1,!1)}static intersectLinePolygon(is,us,hs){let lo=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const co=new Ks,uo=hs.length;for(let ga,ba,xa,_a=0;_a<uo;_a++){if(ga=hs[_a],ba=hs[(_a+1)%uo],xa=Ks.intersectLineLine(is,us,ga,ba,lo,!1),xa.status==="Coincident")return xa;co.append(...xa.points)}return co.points.length>0&&(co.status="Intersection"),co}static intersectSegmentPolygon(is,us,hs){return Ks.intersectLinePolygon(is,us,hs,!1)}static intersectPolygonPolygon(is,us){const hs=new Ks,lo=is.length,co=[];for(let uo=0;uo<lo;uo++){const ga=is[uo],ba=is[(uo+1)%lo],xa=Ks.intersectSegmentPolygon(ga,ba,us);xa.status==="Coincident"?(co.push(xa),hs.append(ga,ba)):hs.append(...xa.points)}return co.length>0&&co.length===is.length?new Ks("Coincident"):(hs.points.length>0&&(hs.status="Intersection"),hs)}static intersectPolygonRectangle(is,us,hs){const lo=us.min(hs),co=us.max(hs),uo=new ot(co.x,lo.y),ga=new ot(lo.x,co.y);return Ks.intersectPolygonPolygon(is,[lo,uo,co,ga])}}class Js extends lt{getX(){return this.getXY().x}setX(is){this.setXY(this.getXY().setX(is))}getY(){return this.getXY().y}setY(is){this.setXY(this.getXY().setY(is))}getRelativeX(){return this.left}setRelativeX(is){this.left=is}getRelativeY(){return this.top}setRelativeY(is){this.top=is}getXY(){const is=this.getRelativeXY();return this.group?St(is,this.group.calcTransformMatrix()):is}setXY(is,us,hs){this.group&&(is=St(is,wt(this.group.calcTransformMatrix()))),this.setRelativeXY(is,us,hs)}getRelativeXY(){return new ot(this.left,this.top)}setRelativeXY(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,hs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(is,us,hs)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:is,tr:us,br:hs,bl:lo}=this.aCoords||(this.aCoords=this.calcACoords()),co=[is,us,hs,lo];if(this.group){const uo=this.group.calcTransformMatrix();return co.map(ga=>St(ga,uo))}return co}intersectsWithRect(is,us){return Ks.intersectPolygonRectangle(this.getCoords(),is,us).status==="Intersection"}intersectsWithObject(is){const us=Ks.intersectPolygonPolygon(this.getCoords(),is.getCoords());return us.status==="Intersection"||us.status==="Coincident"||is.isContainedWithinObject(this)||this.isContainedWithinObject(is)}isContainedWithinObject(is){return this.getCoords().every(us=>is.containsPoint(us))}isContainedWithinRect(is,us){const{left:hs,top:lo,width:co,height:uo}=this.getBoundingRect();return hs>=is.x&&hs+co<=us.x&&lo>=is.y&&lo+uo<=us.y}isOverlapping(is){return this.intersectsWithObject(is)||this.isContainedWithinObject(is)||is.isContainedWithinObject(this)}containsPoint(is){return Ks.isPointInPolygon(is,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:is,br:us}=this.canvas.vptCoords;return!!this.getCoords().some(hs=>hs.x<=us.x&&hs.x>=is.x&&hs.y<=us.y&&hs.y>=is.y)||!!this.intersectsWithRect(is,us)||this.containsPoint(is.midPointFrom(us))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:is,br:us}=this.canvas.vptCoords;return this.intersectsWithRect(is,us)?!0:this.getCoords().every(hs=>(hs.x>=us.x||hs.x<=is.x)&&(hs.y>=us.y||hs.y<=is.y))&&this.containsPoint(is.midPointFrom(us))}getBoundingRect(){return ae(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(is){this._set(H,is),this._set(N,is),this.setCoords()}scaleToWidth(is){const us=this.getBoundingRect().width/this.getScaledWidth();return this.scale(is/this.width/us)}scaleToHeight(is){const us=this.getBoundingRect().height/this.getScaledHeight();return this.scale(is/this.height/us)}getCanvasRetinaScaling(){var is;return((is=this.canvas)===null||is===void 0?void 0:is.getRetinaScaling())||1}getTotalAngle(){return this.group?Ct(kt(this.calcTransformMatrix())):this.angle}getViewportTransform(){var is;return((is=this.canvas)===null||is===void 0?void 0:is.viewportTransform)||T.concat()}calcACoords(){const is=Pt({angle:this.angle}),{x:us,y:hs}=this.getRelativeCenterPoint(),lo=Mt(us,hs),co=Tt(lo,is),uo=this._getTransformedDimensions(),ga=uo.x/2,ba=uo.y/2;return{tl:St({x:-ga,y:-ba},co),tr:St({x:ga,y:-ba},co),bl:St({x:-ga,y:ba},co),br:St({x:ga,y:ba},co)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let is=arguments.length>0&&arguments[0]!==void 0&&arguments[0],us=[];return!is&&this.group&&(us=this.group.transformMatrixKey(is)),us.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,xe(this.originX),xe(this.originY)),us}calcTransformMatrix(){let is=arguments.length>0&&arguments[0]!==void 0&&arguments[0],us=this.calcOwnMatrix();if(is||!this.group)return us;const hs=this.transformMatrixKey(is),lo=this.matrixCache;return lo&&lo.key.every((co,uo)=>co===hs[uo])?lo.value:(this.group&&(us=Tt(this.group.calcTransformMatrix(!1),us)),this.matrixCache={key:hs,value:us},us)}calcOwnMatrix(){const is=this.transformMatrixKey(!0),us=this.ownMatrixCache;if(us&&us.key===is)return us.value;const hs=this.getRelativeCenterPoint(),lo={angle:this.angle,translateX:hs.x,translateY:hs.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},co=Rt(lo);return this.ownMatrixCache={key:is,value:co},co}_getNonTransformedDimensions(){return new ot(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(is){return this._getTransformedDimensions(is).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const us=s({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},is),hs=us.strokeWidth;let lo=hs,co=0;this.strokeUniform&&(lo=0,co=hs);const uo=us.width+lo,ga=us.height+lo;let ba;return ba=us.skewX===0&&us.skewY===0?new ot(uo*us.scaleX,ga*us.scaleY):ge(uo,ga,Lt(us)),ba.scalarAdd(co)}translateToGivenOrigin(is,us,hs,lo,co){let uo=is.x,ga=is.y;const ba=xe(lo)-xe(us),xa=xe(co)-xe(hs);if(ba||xa){const _a=this._getTransformedDimensions();uo+=ba*_a.x,ga+=xa*_a.y}return new ot(uo,ga)}translateToCenterPoint(is,us,hs){if(us===D&&hs===D)return is;const lo=this.translateToGivenOrigin(is,us,hs,D,D);return this.angle?lo.rotate(xt(this.angle),is):lo}translateToOriginPoint(is,us,hs){const lo=this.translateToGivenOrigin(is,D,D,us,hs);return this.angle?lo.rotate(xt(this.angle),is):lo}getCenterPoint(){const is=this.getRelativeCenterPoint();return this.group?St(is,this.group.calcTransformMatrix()):is}getRelativeCenterPoint(){return this.translateToCenterPoint(new ot(this.left,this.top),this.originX,this.originY)}getPointByOrigin(is,us){return this.translateToOriginPoint(this.getRelativeCenterPoint(),is,us)}setPositionByOrigin(is,us,hs){const lo=this.translateToCenterPoint(is,us,hs),co=this.translateToOriginPoint(lo,this.originX,this.originY);this.set({left:co.x,top:co.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),M,P)}}const Qs=["type"],Zs=["extraParam"];let $s=class n1 extends Js{static getDefaults(){return n1.ownDefaults}get type(){const is=this.constructor.type;return is==="FabricObject"?"object":is.toLowerCase()}set type(is){a("warn","Setting type has no effect",is)}constructor(is){super(),t(this,"_cacheContext",null),Object.assign(this,n1.ownDefaults),this.setOptions(is)}_createCacheCanvas(){this._cacheCanvas=pt(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(is){const us=is.width,hs=is.height,lo=o.maxCacheSideLimit,co=o.minCacheSideLimit;if(us<=lo&&hs<=lo&&us*hs<=o.perfLimitSizeTotal)return us<co&&(is.width=co),hs<co&&(is.height=co),is;const uo=us/hs,[ga,ba]=_.limitDimsByArea(uo),xa=ks(co,ga,lo),_a=ks(co,ba,lo);return us>xa&&(is.zoomX/=us/xa,is.width=xa,is.capped=!0),hs>_a&&(is.zoomY/=hs/_a,is.height=_a,is.capped=!0),is}_getCacheCanvasDimensions(){const is=this.getTotalObjectScaling(),us=this._getTransformedDimensions({skewX:0,skewY:0}),hs=us.x*is.x/this.scaleX,lo=us.y*is.y/this.scaleY;return{width:Math.ceil(hs+2),height:Math.ceil(lo+2),zoomX:is.x,zoomY:is.y,x:hs,y:lo}}_updateCacheCanvas(){const is=this._cacheCanvas,us=this._cacheContext,{width:hs,height:lo,zoomX:co,zoomY:uo,x:ga,y:ba}=this._limitCacheSize(this._getCacheCanvasDimensions()),xa=hs!==is.width||lo!==is.height,_a=this.zoomX!==co||this.zoomY!==uo;if(!is||!us)return!1;if(xa||_a){hs!==is.width||lo!==is.height?(is.width=hs,is.height=lo):(us.setTransform(1,0,0,1,0,0),us.clearRect(0,0,is.width,is.height));const $a=ga/2,xl=ba/2;return this.cacheTranslationX=Math.round(is.width/2-$a)+$a,this.cacheTranslationY=Math.round(is.height/2-xl)+xl,us.translate(this.cacheTranslationX,this.cacheTranslationY),us.scale(co,uo),this.zoomX=co,this.zoomY=uo,!0}return!1}setOptions(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(is)}transform(is){const us=this.group&&!this.group._transformDone||this.group&&this.canvas&&is===this.canvas.contextTop,hs=this.calcTransformMatrix(!us);is.transform(hs[0],hs[1],hs[2],hs[3],hs[4],hs[5])}getObjectScaling(){if(!this.group)return new ot(Math.abs(this.scaleX),Math.abs(this.scaleY));const is=Dt(this.calcTransformMatrix());return new ot(Math.abs(is.scaleX),Math.abs(is.scaleY))}getTotalObjectScaling(){const is=this.getObjectScaling();if(this.canvas){const us=this.canvas.getZoom(),hs=this.getCanvasRetinaScaling();return is.scalarMultiply(us*hs)}return is}getObjectOpacity(){let is=this.opacity;return this.group&&(is*=this.group.getObjectOpacity()),is}_constrainScale(is){return Math.abs(is)<this.minScaleLimit?is<0?-this.minScaleLimit:this.minScaleLimit:is===0?1e-4:is}_set(is,us){is!==H&&is!==N||(us=this._constrainScale(us)),is===H&&us<0?(this.flipX=!this.flipX,us*=-1):is==="scaleY"&&us<0?(this.flipY=!this.flipY,us*=-1):is!=="shadow"||!us||us instanceof Os||(us=new Os(us));const hs=this[is]!==us;return this[is]=us,hs&&this.constructor.cacheProperties.includes(is)&&(this.dirty=!0),this.parent&&(this.dirty||hs&&this.constructor.stateProperties.includes(is))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(is){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(is.save(),this._setupCompositeOperation(is),this.drawSelectionBackground(is),this.transform(is),this._setOpacity(is),this._setShadow(is),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(is)):(this._removeCacheCanvas(),this.drawObject(is,!1,{}),this.dirty=!1),is.restore())}drawSelectionBackground(is){}renderCache(is){if(is=is||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:us,zoomY:hs,cacheTranslationX:lo,cacheTranslationY:co}=this,{width:uo,height:ga}=this._cacheCanvas;this.drawObject(this._cacheContext,is.forClipping,{zoomX:us,zoomY:hs,cacheTranslationX:lo,cacheTranslationY:co,width:uo,height:ga,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===J&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(is,us,hs){is.save(),us.inverted?is.globalCompositeOperation="destination-out":is.globalCompositeOperation="destination-in",is.setTransform(1,0,0,1,0,0),is.drawImage(hs,0,0),is.restore()}drawObject(is,us,hs){const lo=this.fill,co=this.stroke;us?(this.fill="black",this.stroke="",this._setClippingProperties(is)):this._renderBackground(is),this._render(is),this._drawClipPath(is,this.clipPath,hs),this.fill=lo,this.stroke=co}createClipPathLayer(is,us){const hs=vt(us),lo=hs.getContext("2d");if(lo.translate(us.cacheTranslationX,us.cacheTranslationY),lo.scale(us.zoomX,us.zoomY),is._cacheCanvas=hs,us.parentClipPaths.forEach(co=>{co.transform(lo)}),us.parentClipPaths.push(is),is.absolutePositioned){const co=wt(this.calcTransformMatrix());lo.transform(co[0],co[1],co[2],co[3],co[4],co[5])}return is.transform(lo),is.drawObject(lo,!0,us),hs}_drawClipPath(is,us,hs){if(!us)return;us._transformDone=!0;const lo=this.createClipPathLayer(us,hs);this.drawClipPathOnCache(is,us,lo)}drawCacheOnCanvas(is){is.scale(1/this.zoomX,1/this.zoomY),is.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let is=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const us=this._cacheCanvas,hs=this._cacheContext;return!(!us||!hs||is||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(us&&hs&&!is&&(hs.save(),hs.setTransform(1,0,0,1,0,0),hs.clearRect(0,0,us.width,us.height),hs.restore()),!0)}_renderBackground(is){if(!this.backgroundColor)return;const us=this._getNonTransformedDimensions();is.fillStyle=this.backgroundColor,is.fillRect(-us.x/2,-us.y/2,us.x,us.y),this._removeShadow(is)}_setOpacity(is){this.group&&!this.group._transformDone?is.globalAlpha=this.getObjectOpacity():is.globalAlpha*=this.opacity}_setStrokeStyles(is,us){const hs=us.stroke;hs&&(is.lineWidth=us.strokeWidth,is.lineCap=us.strokeLineCap,is.lineDashOffset=us.strokeDashOffset,is.lineJoin=us.strokeLineJoin,is.miterLimit=us.strokeMiterLimit,Gt(hs)?hs.gradientUnits==="percentage"||hs.gradientTransform||hs.patternTransform?this._applyPatternForTransformedGradient(is,hs):(is.strokeStyle=hs.toLive(is),this._applyPatternGradientTransform(is,hs)):is.strokeStyle=us.stroke)}_setFillStyles(is,us){let{fill:hs}=us;hs&&(Gt(hs)?(is.fillStyle=hs.toLive(is),this._applyPatternGradientTransform(is,hs)):is.fillStyle=hs)}_setClippingProperties(is){is.globalAlpha=1,is.strokeStyle="transparent",is.fillStyle="#000000"}_setLineDash(is,us){us&&us.length!==0&&is.setLineDash(us)}_setShadow(is){if(!this.shadow)return;const us=this.shadow,hs=this.canvas,lo=this.getCanvasRetinaScaling(),[co,,,uo]=(hs==null?void 0:hs.viewportTransform)||T,ga=co*lo,ba=uo*lo,xa=us.nonScaling?new ot(1,1):this.getObjectScaling();is.shadowColor=us.color,is.shadowBlur=us.blur*o.browserShadowBlurConstant*(ga+ba)*(xa.x+xa.y)/4,is.shadowOffsetX=us.offsetX*ga*xa.x,is.shadowOffsetY=us.offsetY*ba*xa.y}_removeShadow(is){this.shadow&&(is.shadowColor="",is.shadowBlur=is.shadowOffsetX=is.shadowOffsetY=0)}_applyPatternGradientTransform(is,us){if(!Gt(us))return{offsetX:0,offsetY:0};const hs=us.gradientTransform||us.patternTransform,lo=-this.width/2+us.offsetX||0,co=-this.height/2+us.offsetY||0;return us.gradientUnits==="percentage"?is.transform(this.width,0,0,this.height,lo,co):is.transform(1,0,0,1,lo,co),hs&&is.transform(hs[0],hs[1],hs[2],hs[3],hs[4],hs[5]),{offsetX:lo,offsetY:co}}_renderPaintInOrder(is){this.paintFirst===J?(this._renderStroke(is),this._renderFill(is)):(this._renderFill(is),this._renderStroke(is))}_render(is){}_renderFill(is){this.fill&&(is.save(),this._setFillStyles(is,this),this.fillRule==="evenodd"?is.fill("evenodd"):is.fill(),is.restore())}_renderStroke(is){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(is),is.save(),this.strokeUniform){const us=this.getObjectScaling();is.scale(1/us.x,1/us.y)}this._setLineDash(is,this.strokeDashArray),this._setStrokeStyles(is,this),is.stroke(),is.restore()}}_applyPatternForTransformedGradient(is,us){var hs;const lo=this._limitCacheSize(this._getCacheCanvasDimensions()),co=this.getCanvasRetinaScaling(),uo=lo.x/this.scaleX/co,ga=lo.y/this.scaleY/co,ba=vt({width:Math.ceil(uo),height:Math.ceil(ga)}),xa=ba.getContext("2d");xa&&(xa.beginPath(),xa.moveTo(0,0),xa.lineTo(uo,0),xa.lineTo(uo,ga),xa.lineTo(0,ga),xa.closePath(),xa.translate(uo/2,ga/2),xa.scale(lo.zoomX/this.scaleX/co,lo.zoomY/this.scaleY/co),this._applyPatternGradientTransform(xa,us),xa.fillStyle=us.toLive(is),xa.fill(),is.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),is.scale(co*this.scaleX/lo.zoomX,co*this.scaleY/lo.zoomY),is.strokeStyle=(hs=xa.createPattern(ba,"no-repeat"))!==null&&hs!==void 0?hs:"")}_findCenterFromElement(){return new ot(this.left+this.width/2,this.top+this.height/2)}clone(is){const us=this.toObject(is);return this.constructor.fromObject(us)}cloneAsImage(is){const us=this.toCanvasElement(is);return new(tt.getClass("image"))(us)}toCanvasElement(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const us=de(this),hs=this.group,lo=this.shadow,co=Math.abs,uo=is.enableRetinaScaling?y():1,ga=(is.multiplier||1)*uo,ba=is.canvasProvider||(Cl=>new se(Cl,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,is.withoutTransform&&ue(this),is.withoutShadow&&(this.shadow=null),is.viewportTransform&&ve(this,this.getViewportTransform()),this.setCoords();const xa=pt(),_a=this.getBoundingRect(),$a=this.shadow,xl=new ot;if($a){const Cl=$a.blur,Tl=$a.nonScaling?new ot(1,1):this.getObjectScaling();xl.x=2*Math.round(co($a.offsetX)+Cl)*co(Tl.x),xl.y=2*Math.round(co($a.offsetY)+Cl)*co(Tl.y)}const yl=_a.width+xl.x,wl=_a.height+xl.y;xa.width=Math.ceil(yl),xa.height=Math.ceil(wl);const _l=ba(xa);is.format==="jpeg"&&(_l.backgroundColor="#fff"),this.setPositionByOrigin(new ot(_l.width/2,_l.height/2),D,D);const El=this.canvas;_l._objects=[this],this.set("canvas",_l),this.setCoords();const Sl=_l.toCanvasElement(ga||1,is);return this.set("canvas",El),this.shadow=lo,hs&&(this.group=hs),this.set(us),this.setCoords(),_l._objects=[],_l.destroy(),Sl}toDataURL(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return yt(this.toCanvasElement(is),is.format||"png",is.quality||1)}toBlob(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return _t(this.toCanvasElement(is),is.format||"png",is.quality||1)}isType(){for(var is=arguments.length,us=new Array(is),hs=0;hs<is;hs++)us[hs]=arguments[hs];return us.includes(this.constructor.type)||us.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(is){const{centeredRotation:us,originX:hs,originY:lo}=this;if(us){const{x:co,y:uo}=this.getRelativeCenterPoint();this.originX=D,this.originY=D,this.left=co,this.top=uo}if(this.set("angle",is),us){const{x:co,y:uo}=this.translateToOriginPoint(this.getRelativeCenterPoint(),hs,lo);this.left=co,this.top=uo,this.originX=hs,this.originY=lo}}setOnGroup(){}_setupCompositeOperation(is){this.globalCompositeOperation&&(is.globalCompositeOperation=this.globalCompositeOperation)}dispose(){et.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&p().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(is,us){return Object.entries(is).reduce((hs,lo)=>{let[co,uo]=lo;return hs[co]=this._animate(co,uo,us),hs},{})}_animate(is,us){let hs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const lo=is.split("."),co=this.constructor.colorProperties.includes(lo[lo.length-1]),{abort:uo,startValue:ga,onChange:ba,onComplete:xa}=hs,_a=s(s({},hs),{},{target:this,startValue:ga??lo.reduce(($a,xl)=>$a[xl],this),endValue:us,abort:uo==null?void 0:uo.bind(this),onChange:($a,xl,yl)=>{lo.reduce((wl,_l,El)=>(El===lo.length-1&&(wl[_l]=$a),wl[_l]),this),ba&&ba($a,xl,yl)},onComplete:($a,xl,yl)=>{this.setCoords(),xa&&xa($a,xl,yl)}});return co?qs(_a):Us(_a)}isDescendantOf(is){const{parent:us,group:hs}=this;return us===is||hs===is||!!us&&us.isDescendantOf(is)||!!hs&&hs!==us&&hs.isDescendantOf(is)}getAncestors(){const is=[];let us=this;do us=us.parent,us&&is.push(us);while(us);return is}findCommonAncestors(is){if(this===is)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const us=this.getAncestors(),hs=is.getAncestors();if(us.length===0&&hs.length>0&&this===hs[hs.length-1])return{fork:[],otherFork:[is,...hs.slice(0,hs.length-1)],common:[this]};for(let lo,co=0;co<us.length;co++){if(lo=us[co],lo===is)return{fork:[this,...us.slice(0,co)],otherFork:[],common:us.slice(co)};for(let uo=0;uo<hs.length;uo++){if(this===hs[uo])return{fork:[],otherFork:[is,...hs.slice(0,uo)],common:[this,...us]};if(lo===hs[uo])return{fork:[this,...us.slice(0,co)],otherFork:[is,...hs.slice(0,uo)],common:us.slice(co)}}}return{fork:[this,...us],otherFork:[is,...hs],common:[]}}hasCommonAncestors(is){const us=this.findCommonAncestors(is);return us&&!!us.common.length}isInFrontOf(is){if(this===is)return;const us=this.findCommonAncestors(is);if(us.fork.includes(is))return!0;if(us.otherFork.includes(this))return!1;const hs=us.common[0]||this.canvas;if(!hs)return;const lo=us.fork.pop(),co=us.otherFork.pop(),uo=hs._objects.indexOf(lo),ga=hs._objects.indexOf(co);return uo>-1&&uo>ga}toObject(){const is=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(n1.customProperties,this.constructor.customProperties||[]);let us;const hs=o.NUM_FRACTION_DIGITS,{clipPath:lo,fill:co,stroke:uo,shadow:ga,strokeDashArray:ba,left:xa,top:_a,originX:$a,originY:xl,width:yl,height:wl,strokeWidth:_l,strokeLineCap:El,strokeDashOffset:Sl,strokeLineJoin:Cl,strokeUniform:Tl,strokeMiterLimit:Dl,scaleX:Fl,scaleY:Pl,angle:Al,flipX:Rl,flipY:Il,opacity:Bl,visible:Ol,backgroundColor:zl,fillRule:Hl,paintFirst:ou,globalCompositeOperation:au,skewX:_c,skewY:uu}=this;lo&&!lo.excludeFromExport&&(us=lo.toObject(is.concat("inverted","absolutePositioned")));const lu=xu=>Vt(xu,hs),Kl=s(s({},Yt(this,is)),{},{type:this.constructor.type,version:x,originX:$a,originY:xl,left:lu(xa),top:lu(_a),width:lu(yl),height:lu(wl),fill:Ht(co)?co.toObject():co,stroke:Ht(uo)?uo.toObject():uo,strokeWidth:lu(_l),strokeDashArray:ba&&ba.concat(),strokeLineCap:El,strokeDashOffset:Sl,strokeLineJoin:Cl,strokeUniform:Tl,strokeMiterLimit:lu(Dl),scaleX:lu(Fl),scaleY:lu(Pl),angle:lu(Al),flipX:Rl,flipY:Il,opacity:lu(Bl),shadow:ga&&ga.toObject(),visible:Ol,backgroundColor:zl,fillRule:Hl,paintFirst:ou,globalCompositeOperation:au,skewX:lu(_c),skewY:lu(uu)},us?{clipPath:us}:null);return this.includeDefaultValues?Kl:this._removeDefaultValues(Kl)}toDatalessObject(is){return this.toObject(is)}_removeDefaultValues(is){const us=this.constructor.getDefaults(),hs=Object.keys(us).length>0?us:Object.getPrototypeOf(this);return Wt(is,(lo,co)=>{if(co===M||co===P||co==="type")return!0;const uo=hs[co];return lo!==uo&&!(Array.isArray(lo)&&Array.isArray(uo)&&lo.length===0&&uo.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(is){let us=i(is,Qs),hs=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:lo}=hs,co=i(hs,Zs);return Xt(us,co).then(uo=>lo?(delete uo[lo],new this(us[lo],uo)):new this(uo))}static fromObject(is,us){return this._fromObject(is,us)}};t($s,"stateProperties",Ds),t($s,"cacheProperties",Ms),t($s,"ownDefaults",Ps),t($s,"type","FabricObject"),t($s,"colorProperties",[K,J,"backgroundColor"]),t($s,"customProperties",[]),tt.setClass($s),tt.setClass($s,"object");const ti=(cs,is,us)=>(hs,lo,co,uo)=>{const ga=is(hs,lo,co,uo);return ga&&ye(cs,s(s({},Te(hs,lo,co,uo)),us)),ga};function ei(cs){return(is,us,hs,lo)=>{const{target:co,originX:uo,originY:ga}=us,ba=co.getRelativeCenterPoint(),xa=co.translateToOriginPoint(ba,uo,ga),_a=cs(is,us,hs,lo);return co.setPositionByOrigin(xa,us.originX,us.originY),_a}}const si=ti(Y,ei((cs,is,us,hs)=>{const lo=ke(is,is.originX,is.originY,us,hs);if(xe(is.originX)===xe(D)||xe(is.originX)===xe(A)&&lo.x<0||xe(is.originX)===xe(M)&&lo.x>0){const{target:co}=is,uo=co.strokeWidth/(co.strokeUniform?co.scaleX:1),ga=be(is)?2:1,ba=co.width,xa=Math.abs(lo.x*ga/co.scaleX)-uo;return co.set("width",Math.max(xa,1)),ba!==co.width}return!1}));function ii(cs,is,us,hs,lo){hs=hs||{};const co=this.sizeX||hs.cornerSize||lo.cornerSize,uo=this.sizeY||hs.cornerSize||lo.cornerSize,ga=hs.transparentCorners!==void 0?hs.transparentCorners:lo.transparentCorners,ba=ga?J:K,xa=!ga&&(hs.cornerStrokeColor||lo.cornerStrokeColor);let _a,$a=is,xl=us;cs.save(),cs.fillStyle=hs.cornerColor||lo.cornerColor||"",cs.strokeStyle=hs.cornerStrokeColor||lo.cornerStrokeColor||"",co>uo?(_a=co,cs.scale(1,uo/co),xl=us*co/uo):uo>co?(_a=uo,cs.scale(co/uo,1),$a=is*uo/co):_a=co,cs.beginPath(),cs.arc($a,xl,_a/2,0,S,!1),cs[ba](),xa&&cs.stroke(),cs.restore()}function ri(cs,is,us,hs,lo){hs=hs||{};const co=this.sizeX||hs.cornerSize||lo.cornerSize,uo=this.sizeY||hs.cornerSize||lo.cornerSize,ga=hs.transparentCorners!==void 0?hs.transparentCorners:lo.transparentCorners,ba=ga?J:K,xa=!ga&&(hs.cornerStrokeColor||lo.cornerStrokeColor),_a=co/2,$a=uo/2;cs.save(),cs.fillStyle=hs.cornerColor||lo.cornerColor||"",cs.strokeStyle=hs.cornerStrokeColor||lo.cornerStrokeColor||"",cs.translate(is,us);const xl=lo.getTotalAngle();cs.rotate(xt(xl)),cs["".concat(ba,"Rect")](-_a,-$a,co,uo),xa&&cs.strokeRect(-_a,-$a,co,uo),cs.restore()}class ni{constructor(is){t(this,"visible",!0),t(this,"actionName",G),t(this,"angle",0),t(this,"x",0),t(this,"y",0),t(this,"offsetX",0),t(this,"offsetY",0),t(this,"sizeX",0),t(this,"sizeY",0),t(this,"touchSizeX",0),t(this,"touchSizeY",0),t(this,"cursorStyle","crosshair"),t(this,"withConnection",!1),Object.assign(this,is)}shouldActivate(is,us,hs,lo){var co;let{tl:uo,tr:ga,br:ba,bl:xa}=lo;return((co=us.canvas)===null||co===void 0?void 0:co.getActiveObject())===us&&us.isControlVisible(is)&&Ks.isPointInPolygon(hs,[uo,ga,ba,xa])}getActionHandler(is,us,hs){return this.actionHandler}getMouseDownHandler(is,us,hs){return this.mouseDownHandler}getMouseUpHandler(is,us,hs){return this.mouseUpHandler}cursorStyleHandler(is,us,hs){return us.cursorStyle}getActionName(is,us,hs){return us.actionName}getVisibility(is,us){var hs,lo;return(hs=(lo=is._controlsVisibility)===null||lo===void 0?void 0:lo[us])!==null&&hs!==void 0?hs:this.visible}setVisibility(is,us,hs){this.visible=is}positionHandler(is,us,hs,lo){return new ot(this.x*is.x+this.offsetX,this.y*is.y+this.offsetY).transform(us)}calcCornerCoords(is,us,hs,lo,co,uo){const ga=Ot([Mt(hs,lo),Pt({angle:is}),Et((co?this.touchSizeX:this.sizeX)||us,(co?this.touchSizeY:this.sizeY)||us)]);return{tl:new ot(-.5,-.5).transform(ga),tr:new ot(.5,-.5).transform(ga),br:new ot(.5,.5).transform(ga),bl:new ot(-.5,.5).transform(ga)}}render(is,us,hs,lo,co){((lo=lo||{}).cornerStyle||co.cornerStyle)==="circle"?ii.call(this,is,us,hs,lo,co):ri.call(this,is,us,hs,lo,co)}}const oi=(cs,is,us)=>us.lockRotation?Ce:is.cursorStyle,ai=ti(I,ei((cs,is,us,hs)=>{let{target:lo,ex:co,ey:uo,theta:ga,originX:ba,originY:xa}=is;const _a=lo.translateToOriginPoint(lo.getRelativeCenterPoint(),ba,xa);if(we(lo,"lockRotation"))return!1;const $a=Math.atan2(uo-_a.y,co-_a.x),xl=Math.atan2(hs-_a.y,us-_a.x);let yl=Ct(xl-$a+ga);if(lo.snapAngle&&lo.snapAngle>0){const _l=lo.snapAngle,El=lo.snapThreshold||_l,Sl=Math.ceil(yl/_l)*_l,Cl=Math.floor(yl/_l)*_l;Math.abs(yl-Cl)<El?yl=Cl:Math.abs(yl-Sl)<El&&(yl=Sl)}yl<0&&(yl=360+yl),yl%=360;const wl=lo.angle!==yl;return lo.angle=yl,wl}));function hi(cs,is){const us=is.canvas,hs=cs[us.uniScaleKey];return us.uniformScaling&&!hs||!us.uniformScaling&&hs}function ci(cs,is,us){const hs=we(cs,"lockScalingX"),lo=we(cs,"lockScalingY");if(hs&&lo||!is&&(hs||lo)&&us||hs&&is==="x"||lo&&is==="y")return!0;const{width:co,height:uo,strokeWidth:ga}=cs;return co===0&&ga===0&&is!=="y"||uo===0&&ga===0&&is!=="x"}const li=["e","se","s","sw","w","nw","n","ne","e"],ui=(cs,is,us)=>{const hs=hi(cs,us);if(ci(us,is.x!==0&&is.y===0?"x":is.x===0&&is.y!==0?"y":"",hs))return Ce;const lo=Oe(us,is);return"".concat(li[lo],"-resize")};function di(cs,is,us,hs){let lo=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const co=is.target,uo=lo.by,ga=hi(cs,co);let ba,xa,_a,$a,xl,yl;if(ci(co,uo,ga))return!1;if(is.gestureScale)xa=is.scaleX*is.gestureScale,_a=is.scaleY*is.gestureScale;else{if(ba=ke(is,is.originX,is.originY,us,hs),xl=uo!=="y"?Math.sign(ba.x||is.signX||1):1,yl=uo!=="x"?Math.sign(ba.y||is.signY||1):1,is.signX||(is.signX=xl),is.signY||(is.signY=yl),we(co,"lockScalingFlip")&&(is.signX!==xl||is.signY!==yl))return!1;if($a=co._getTransformedDimensions(),ga&&!uo){const El=Math.abs(ba.x)+Math.abs(ba.y),{original:Sl}=is,Cl=El/(Math.abs($a.x*Sl.scaleX/co.scaleX)+Math.abs($a.y*Sl.scaleY/co.scaleY));xa=Sl.scaleX*Cl,_a=Sl.scaleY*Cl}else xa=Math.abs(ba.x*co.scaleX/$a.x),_a=Math.abs(ba.y*co.scaleY/$a.y);be(is)&&(xa*=2,_a*=2),is.signX!==xl&&uo!=="y"&&(is.originX=Se(is.originX),xa*=-1,is.signX=xl),is.signY!==yl&&uo!=="x"&&(is.originY=Se(is.originY),_a*=-1,is.signY=yl)}const wl=co.scaleX,_l=co.scaleY;return uo?(uo==="x"&&co.set(H,xa),uo==="y"&&co.set(N,_a)):(!we(co,"lockScalingX")&&co.set(H,xa),!we(co,"lockScalingY")&&co.set(N,_a)),wl!==co.scaleX||_l!==co.scaleY}const gi=ti(R,ei((cs,is,us,hs)=>di(cs,is,us,hs))),fi=ti(R,ei((cs,is,us,hs)=>di(cs,is,us,hs,{by:"x"}))),pi=ti(R,ei((cs,is,us,hs)=>di(cs,is,us,hs,{by:"y"}))),mi=["target","ex","ey","skewingSide"],vi={x:{counterAxis:"y",scale:H,skew:U,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:N,skew:q,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},yi=["ns","nesw","ew","nwse"],_i=(cs,is,us)=>{if(is.x!==0&&we(us,"lockSkewingY")||is.y!==0&&we(us,"lockSkewingX"))return Ce;const hs=Oe(us,is)%4;return"".concat(yi[hs],"-resize")};function xi(cs,is,us,hs,lo){const{target:co}=us,{counterAxis:uo,origin:ga,lockSkewing:ba,skew:xa,flip:_a}=vi[cs];if(we(co,ba))return!1;const{origin:$a,flip:xl}=vi[uo],yl=xe(us[$a])*(co[xl]?-1:1),wl=-Math.sign(yl)*(co[_a]?-1:1),_l=.5*-((co[xa]===0&&ke(us,D,D,hs,lo)[cs]>0||co[xa]>0?1:-1)*wl)+.5;return ti(X,ei((Sl,Cl,Tl,Dl)=>function(Fl,Pl,Al){let{target:Rl,ex:Il,ey:Bl,skewingSide:Ol}=Pl,zl=i(Pl,mi);const{skew:Hl}=vi[Fl],ou=Al.subtract(new ot(Il,Bl)).divide(new ot(Rl.scaleX,Rl.scaleY))[Fl],au=Rl[Hl],_c=zl[Hl],uu=Math.tan(xt(_c)),lu=Fl==="y"?Rl._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:Rl._getTransformedDimensions({scaleX:1,scaleY:1}).y,Kl=2*ou*Ol/Math.max(lu,1)+uu,xu=Ct(Math.atan(Kl));Rl.set(Hl,xu);const pu=au!==Rl[Hl];if(pu&&Fl==="y"){const{skewX:Ll,scaleX:Nl}=Rl,Ml=Rl._getTransformedDimensions({skewY:au}),Ul=Rl._getTransformedDimensions(),Vl=Ll!==0?Ml.x/Ul.x:1;Vl!==1&&Rl.set(H,Vl*Nl)}return pu}(cs,Cl,new ot(Tl,Dl))))(is,s(s({},us),{},{[ga]:_l,skewingSide:wl}),hs,lo)}const Ci=(cs,is,us,hs)=>xi("x",cs,is,us,hs),bi=(cs,is,us,hs)=>xi("y",cs,is,us,hs);function Si(cs,is){return cs[is.canvas.altActionKey]}const wi=(cs,is,us)=>{const hs=Si(cs,us);return is.x===0?hs?U:N:is.y===0?hs?q:H:""},Ti=(cs,is,us)=>Si(cs,us)?_i(0,is,us):ui(cs,is,us),Oi=(cs,is,us,hs)=>Si(cs,is.target)?bi(cs,is,us,hs):fi(cs,is,us,hs),ki=(cs,is,us,hs)=>Si(cs,is.target)?Ci(cs,is,us,hs):pi(cs,is,us,hs),Di=()=>({ml:new ni({x:-.5,y:0,cursorStyleHandler:Ti,actionHandler:Oi,getActionName:wi}),mr:new ni({x:.5,y:0,cursorStyleHandler:Ti,actionHandler:Oi,getActionName:wi}),mb:new ni({x:0,y:.5,cursorStyleHandler:Ti,actionHandler:ki,getActionName:wi}),mt:new ni({x:0,y:-.5,cursorStyleHandler:Ti,actionHandler:ki,getActionName:wi}),tl:new ni({x:-.5,y:-.5,cursorStyleHandler:ui,actionHandler:gi}),tr:new ni({x:.5,y:-.5,cursorStyleHandler:ui,actionHandler:gi}),bl:new ni({x:-.5,y:.5,cursorStyleHandler:ui,actionHandler:gi}),br:new ni({x:.5,y:.5,cursorStyleHandler:ui,actionHandler:gi}),mtr:new ni({x:0,y:-.5,actionHandler:ai,cursorStyleHandler:oi,offsetY:-40,withConnection:!0,actionName:B})}),Mi=()=>({mr:new ni({x:.5,y:0,actionHandler:si,cursorStyleHandler:Ti,actionName:Y}),ml:new ni({x:-.5,y:0,actionHandler:si,cursorStyleHandler:Ti,actionName:Y})}),Pi=()=>s(s({},Di()),Mi());class Ei extends $s{static getDefaults(){return s(s({},super.getDefaults()),Ei.ownDefaults)}constructor(is){super(),Object.assign(this,this.constructor.createControls(),Ei.ownDefaults),this.setOptions(is)}static createControls(){return{controls:Di()}}_updateCacheCanvas(){const is=this.canvas;if(this.noScaleCache&&is&&is._currentTransform){const us=is._currentTransform,hs=us.target,lo=us.action;if(this===hs&&lo&&lo.startsWith(G))return!1}return super._updateCacheCanvas()}getActiveControl(){const is=this.__corner;return is?{key:is,control:this.controls[is],coord:this.oCoords[is]}:void 0}findControl(is){let us=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const hs=Object.entries(this.oCoords);for(let lo=hs.length-1;lo>=0;lo--){const[co,uo]=hs[lo],ga=this.controls[co];if(ga.shouldActivate(co,this,is,us?uo.touchCorner:uo.corner))return this.__corner=co,{key:co,control:ga,coord:this.oCoords[co]}}}calcOCoords(){const is=this.getViewportTransform(),us=this.getCenterPoint(),hs=Mt(us.x,us.y),lo=Pt({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),co=Tt(hs,lo),uo=Tt(is,co),ga=Tt(uo,[1/is[0],0,0,1/is[3],0,0]),ba=this.group?Dt(this.calcTransformMatrix()):void 0;ba&&(ba.scaleX=Math.abs(ba.scaleX),ba.scaleY=Math.abs(ba.scaleY));const xa=this._calculateCurrentDimensions(ba),_a={};return this.forEachControl(($a,xl)=>{const yl=$a.positionHandler(xa,ga,this,$a);_a[xl]=Object.assign(yl,this._calcCornerCoords($a,yl))}),_a}_calcCornerCoords(is,us){const hs=this.getTotalAngle();return{corner:is.calcCornerCoords(hs,this.cornerSize,us.x,us.y,!1,this),touchCorner:is.calcCornerCoords(hs,this.touchCornerSize,us.x,us.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(is){for(const us in this.controls)is(this.controls[us],us,this)}drawSelectionBackground(is){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;is.save();const us=this.getRelativeCenterPoint(),hs=this._calculateCurrentDimensions(),lo=this.getViewportTransform();is.translate(us.x,us.y),is.scale(1/lo[0],1/lo[3]),is.rotate(xt(this.angle)),is.fillStyle=this.selectionBackgroundColor,is.fillRect(-hs.x/2,-hs.y/2,hs.x,hs.y),is.restore()}strokeBorders(is,us){is.strokeRect(-us.x/2,-us.y/2,us.x,us.y)}_drawBorders(is,us){let hs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const lo=s({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},hs);is.save(),is.strokeStyle=lo.borderColor,this._setLineDash(is,lo.borderDashArray),this.strokeBorders(is,us),lo.hasControls&&this.drawControlsConnectingLines(is,us),is.restore()}_renderControls(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:hs,hasControls:lo}=this,co=s({hasBorders:hs,hasControls:lo},us),uo=this.getViewportTransform(),ga=co.hasBorders,ba=co.hasControls,xa=Tt(uo,this.calcTransformMatrix()),_a=Dt(xa);is.save(),is.translate(_a.translateX,_a.translateY),is.lineWidth=this.borderScaleFactor,this.group===this.parent&&(is.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(_a.angle-=180),is.rotate(xt(this.group?_a.angle:this.angle)),ga&&this.drawBorders(is,_a,us),ba&&this.drawControls(is,us),is.restore()}drawBorders(is,us,hs){let lo;if(hs&&hs.forActiveSelection||this.group){const co=ge(this.width,this.height,Lt(us)),uo=this.isStrokeAccountedForInDimensions()?at:(this.strokeUniform?new ot().scalarAdd(this.canvas?this.canvas.getZoom():1):new ot(us.scaleX,us.scaleY)).scalarMultiply(this.strokeWidth);lo=co.add(uo).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else lo=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(is,lo,hs)}drawControlsConnectingLines(is,us){let hs=!1;is.beginPath(),this.forEachControl((lo,co)=>{lo.withConnection&&lo.getVisibility(this,co)&&(hs=!0,is.moveTo(lo.x*us.x,lo.y*us.y),is.lineTo(lo.x*us.x+lo.offsetX,lo.y*us.y+lo.offsetY))}),hs&&is.stroke()}drawControls(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};is.save();const hs=this.getCanvasRetinaScaling(),{cornerStrokeColor:lo,cornerDashArray:co,cornerColor:uo}=this,ga=s({cornerStrokeColor:lo,cornerDashArray:co,cornerColor:uo},us);is.setTransform(hs,0,0,hs,0,0),is.strokeStyle=is.fillStyle=ga.cornerColor,this.transparentCorners||(is.strokeStyle=ga.cornerStrokeColor),this._setLineDash(is,ga.cornerDashArray),this.forEachControl((ba,xa)=>{if(ba.getVisibility(this,xa)){const _a=this.oCoords[xa];ba.render(is,_a.x,_a.y,ga,this)}}),is.restore()}isControlVisible(is){return this.controls[is]&&this.controls[is].getVisibility(this,is)}setControlVisible(is,us){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[is]=us}setControlsVisibility(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(is).forEach(us=>{let[hs,lo]=us;return this.setControlVisible(hs,lo)})}clearContextTop(is){if(!this.canvas)return;const us=this.canvas.contextTop;if(!us)return;const hs=this.canvas.viewportTransform;us.save(),us.transform(hs[0],hs[1],hs[2],hs[3],hs[4],hs[5]),this.transform(us);const lo=this.width+4,co=this.height+4;return us.clearRect(-lo/2,-co/2,lo,co),is||us.restore(),us}onDeselect(is){return!1}onSelect(is){return!1}shouldStartDragging(is){return!1}onDragStart(is){return!1}canDrop(is){return!1}renderDragSourceEffect(is){}renderDropTargetEffect(is){}}function Ai(cs,is){return is.forEach(us=>{Object.getOwnPropertyNames(us.prototype).forEach(hs=>{hs!=="constructor"&&Object.defineProperty(cs.prototype,hs,Object.getOwnPropertyDescriptor(us.prototype,hs)||Object.create(null))})}),cs}t(Ei,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class ji extends Ei{}Ai(ji,[Xe]),tt.setClass(ji),tt.setClass(ji,"object");const Fi=(cs,is,us,hs)=>{const lo=2*(hs=Math.round(hs))+1,{data:co}=cs.getImageData(is-hs,us-hs,lo,lo);for(let uo=3;uo<co.length;uo+=4)if(co[uo]>0)return!1;return!0};class Li{constructor(is){this.options=is,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new ot(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new ot(1/this.options.scaleX,1/this.options.scaleY):new ot(1,1)}createSideVector(is,us){const hs=ps(is,us);return this.options.strokeUniform?hs.multiply(this.scale):hs}projectOrthogonally(is,us,hs){return this.applySkew(is.add(this.calcOrthogonalProjection(is,us,hs)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(is){const us=new ot(is);return us.y+=us.x*Math.tan(xt(this.options.skewY)),us.x+=us.y*Math.tan(xt(this.options.skewX)),us}scaleUnitVector(is,us){return is.multiply(this.strokeUniformScalar).scalarMultiply(us)}}const Ri=new ot;class Ii extends Li{static getOrthogonalRotationFactor(is,us){const hs=us?vs(is,us):ys(is);return Math.abs(hs)<b?-1:1}constructor(is,us,hs,lo){super(lo),t(this,"AB",void 0),t(this,"AC",void 0),t(this,"alpha",void 0),t(this,"bisector",void 0),this.A=new ot(is),this.B=new ot(us),this.C=new ot(hs),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=vs(this.AB,this.AC),this.bisector=_s(fs(this.AB.eq(Ri)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(is,us){let hs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const lo=this.createSideVector(is,us),co=xs(lo),uo=Ii.getOrthogonalRotationFactor(co,this.bisector);return this.scaleUnitVector(co,hs*uo)}projectBevel(){const is=[];return(this.alpha%S==0?[this.B]:[this.B,this.C]).forEach(us=>{is.push(this.projectOrthogonally(this.A,us)),is.push(this.projectOrthogonally(this.A,us,-this.strokeProjectionMagnitude))}),is}projectMiter(){const is=[],us=Math.abs(this.alpha),hs=1/Math.sin(us/2),lo=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*hs),co=this.options.strokeUniform?ms(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return ms(lo)/this.strokeProjectionMagnitude<=co&&is.push(this.applySkew(this.A.add(lo))),is.push(...this.projectBevel()),is}projectRoundNoSkew(is,us){const hs=[],lo=new ot(Ii.getOrthogonalRotationFactor(this.bisector),Ii.getOrthogonalRotationFactor(new ot(this.bisector.y,this.bisector.x)));return[new ot(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(lo),new ot(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(lo)].forEach(co=>{Ss(co,is,us)&&hs.push(this.A.add(co))}),hs}projectRoundWithSkew(is,us){const hs=[],{skewX:lo,skewY:co,scaleX:uo,scaleY:ga,strokeUniform:ba}=this.options,xa=new ot(Math.tan(xt(lo)),Math.tan(xt(co))),_a=this.strokeProjectionMagnitude,$a=ba?_a/ga/Math.sqrt(1/ga**2+1/uo**2*xa.y**2):_a/Math.sqrt(1+xa.y**2),xl=new ot(Math.sqrt(Math.max(_a**2-$a**2,0)),$a),yl=ba?_a/Math.sqrt(1+xa.x**2*(1/ga)**2/(1/uo+1/uo*xa.x*xa.y)**2):_a/Math.sqrt(1+xa.x**2/(1+xa.x*xa.y)**2),wl=new ot(yl,Math.sqrt(Math.max(_a**2-yl**2,0)));return[wl,wl.scalarMultiply(-1),xl,xl.scalarMultiply(-1)].map(_l=>this.applySkew(ba?_l.multiply(this.strokeUniformScalar):_l)).forEach(_l=>{Ss(_l,is,us)&&hs.push(this.applySkew(this.A).add(_l))}),hs}projectRound(){const is=[];is.push(...this.projectBevel());const us=this.alpha%S==0,hs=this.applySkew(this.A),lo=is[us?0:2].subtract(hs),co=is[us?1:0].subtract(hs),uo=us?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),ga=Cs(lo,uo)>0,ba=ga?lo:co,xa=ga?co:lo;return this.isSkewed()?is.push(...this.projectRoundWithSkew(ba,xa)):is.push(...this.projectRoundNoSkew(ba,xa)),is}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(is=>({originPoint:this.A,projectedPoint:is,angle:this.alpha,bisector:this.bisector}))}}class Bi extends Li{constructor(is,us,hs){super(hs),this.A=new ot(is),this.T=new ot(us)}calcOrthogonalProjection(is,us){let hs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const lo=this.createSideVector(is,us);return this.scaleUnitVector(xs(lo),hs)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const is=[];if(!this.isSkewed()&&this.A.eq(this.T)){const us=new ot(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);is.push(this.applySkew(this.A.add(us)),this.applySkew(this.A.subtract(us)))}else is.push(...new Ii(this.A,this.T,this.T,this.options).projectRound());return is}projectSquare(){const is=[];if(this.A.eq(this.T)){const us=new ot(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);is.push(this.A.add(us),this.A.subtract(us))}else{const us=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),hs=this.scaleUnitVector(_s(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),lo=this.A.add(hs);is.push(lo.add(us),lo.subtract(us))}return is.map(us=>this.applySkew(us))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(is=>({originPoint:this.A,projectedPoint:is}))}}const Xi=function(cs,is){let us=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const hs=[];if(cs.length===0)return hs;const lo=cs.reduce((co,uo)=>(co[co.length-1].eq(uo)||co.push(new ot(uo)),co),[new ot(cs[0])]);if(lo.length===1)us=!0;else if(!us){const co=lo[0],uo=((ga,ba)=>{for(let xa=ga.length-1;xa>=0;xa--)if(ba(ga[xa],xa,ga))return xa;return-1})(lo,ga=>!ga.eq(co));lo.splice(uo+1)}return lo.forEach((co,uo,ga)=>{let ba,xa;uo===0?(xa=ga[1],ba=us?co:ga[ga.length-1]):uo===ga.length-1?(ba=ga[uo-1],xa=us?co:ga[0]):(ba=ga[uo-1],xa=ga[uo+1]),us&&ga.length===1?hs.push(...new Bi(co,co,is).project()):!us||uo!==0&&uo!==ga.length-1?hs.push(...new Ii(co,ba,xa,is).project()):hs.push(...new Bi(co,uo===0?xa:ba,is).project())}),hs},Yi=cs=>{const is={};return Object.keys(cs).forEach(us=>{is[us]={},Object.keys(cs[us]).forEach(hs=>{is[us][hs]=s({},cs[us][hs])})}),is},Wi=cs=>cs.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Vi;const zi=cs=>{if(Vi||Vi||(Vi="Intl"in v()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Vi){const is=Vi.segment(cs);return Array.from(is).map(us=>{let{segment:hs}=us;return hs})}return Gi(cs)},Gi=cs=>{const is=[];for(let us,hs=0;hs<cs.length;hs++)(us=Hi(cs,hs))!==!1&&is.push(us);return is},Hi=(cs,is)=>{const us=cs.charCodeAt(is);if(isNaN(us))return"";if(us<55296||us>57343)return cs.charAt(is);if(55296<=us&&us<=56319){if(cs.length<=is+1)throw"High surrogate without following low surrogate";const lo=cs.charCodeAt(is+1);if(56320>lo||lo>57343)throw"High surrogate without following low surrogate";return cs.charAt(is)+cs.charAt(is+1)}if(is===0)throw"Low surrogate without preceding high surrogate";const hs=cs.charCodeAt(is-1);if(55296>hs||hs>56319)throw"Low surrogate without preceding high surrogate";return!1};var Ni=Object.freeze({__proto__:null,capitalize:function(cs){let is=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(cs.charAt(0).toUpperCase()).concat(is?cs.slice(1):cs.slice(1).toLowerCase())},escapeXml:Wi,graphemeSplit:zi});const Ui=function(cs,is){let us=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return cs.fill!==is.fill||cs.stroke!==is.stroke||cs.strokeWidth!==is.strokeWidth||cs.fontSize!==is.fontSize||cs.fontFamily!==is.fontFamily||cs.fontWeight!==is.fontWeight||cs.fontStyle!==is.fontStyle||cs.textDecorationThickness!==is.textDecorationThickness||cs.textBackgroundColor!==is.textBackgroundColor||cs.deltaY!==is.deltaY||us&&(cs.overline!==is.overline||cs.underline!==is.underline||cs.linethrough!==is.linethrough)},qi=(cs,is)=>{const us=is.split(`
`),hs=[];let lo=-1,co={};cs=Yi(cs);for(let uo=0;uo<us.length;uo++){const ga=zi(us[uo]);if(cs[uo])for(let ba=0;ba<ga.length;ba++){lo++;const xa=cs[uo][ba];xa&&Object.keys(xa).length>0&&(Ui(co,xa,!0)?hs.push({start:lo,end:lo+1,style:xa}):hs[hs.length-1].end++),co=xa||{}}else lo+=ga.length,co={}}return hs},Ki=(cs,is)=>{if(!Array.isArray(cs))return Yi(cs);const us=is.split(F),hs={};let lo=-1,co=0;for(let uo=0;uo<us.length;uo++){const ga=zi(us[uo]);for(let ba=0;ba<ga.length;ba++)lo++,cs[co]&&cs[co].start<=lo&&lo<cs[co].end&&(hs[uo]=hs[uo]||{},hs[uo][ba]=s({},cs[co].style),lo===cs[co].end-1&&co++)}return hs},Ji=["display","transform",K,"fill-opacity","fill-rule","opacity",J,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Qi(cs,is){const us=cs.nodeName,hs=cs.getAttribute("class"),lo=cs.getAttribute("id"),co="(?![a-zA-Z\\-]+)";let uo;if(uo=new RegExp("^"+us,"i"),is=is.replace(uo,""),lo&&is.length&&(uo=new RegExp("#"+lo+co,"i"),is=is.replace(uo,"")),hs&&is.length){const ga=hs.split(" ");for(let ba=ga.length;ba--;)uo=new RegExp("\\."+ga[ba]+co,"i"),is=is.replace(uo,"")}return is.length===0}function Zi(cs,is){let us=!0;const hs=Qi(cs,is.pop());return hs&&is.length&&(us=function(lo,co){let uo,ga=!0;for(;lo.parentElement&&lo.parentElement.nodeType===1&&co.length;)ga&&(uo=co.pop()),ga=Qi(lo=lo.parentElement,uo);return co.length===0}(cs,is)),hs&&us&&is.length===0}const $i=cs=>{var is;return(is=ns[cs])!==null&&is!==void 0?is:cs},tr=new RegExp("(".concat(es,")"),"gi"),er=cs=>cs.replace(tr," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var sr,ir,rr,nr,or,ar,hr;const cr="(".concat(es,")"),lr=String.raw(sr||(sr=r(["(skewX)(",")"],["(skewX)\\(","\\)"])),cr),ur=String.raw(ir||(ir=r(["(skewY)(",")"],["(skewY)\\(","\\)"])),cr),dr=String.raw(rr||(rr=r(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),cr,cr,cr),gr=String.raw(nr||(nr=r(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),cr,cr),fr=String.raw(or||(or=r(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),cr,cr),pr=String.raw(ar||(ar=r(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),cr,cr,cr,cr,cr,cr),mr="(?:".concat(pr,"|").concat(fr,"|").concat(dr,"|").concat(gr,"|").concat(lr,"|").concat(ur,")"),vr="(?:".concat(mr,"*)"),yr=String.raw(hr||(hr=r(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),vr),_r=new RegExp(yr),xr=new RegExp(mr),Cr=new RegExp(mr,"g");function br(cs){const is=[];if(!(cs=er(cs).replace(/\s*([()])\s*/gi,"$1"))||cs&&!_r.test(cs))return[...T];for(const us of cs.matchAll(Cr)){const hs=xr.exec(us[0]);if(!hs)continue;let lo=T;const co=hs.filter(wl=>!!wl),[,uo,...ga]=co,[ba,xa,_a,$a,xl,yl]=ga.map(wl=>parseFloat(wl));switch(uo){case"translate":lo=Mt(ba,xa);break;case B:lo=Pt({angle:ba},{x:xa,y:_a});break;case G:lo=Et(ba,xa);break;case U:lo=jt(ba);break;case q:lo=Ft(ba);break;case"matrix":lo=[ba,xa,_a,$a,xl,yl]}is.push(lo)}return Ot(is)}function Sr(cs,is,us,hs){const lo=Array.isArray(is);let co,uo=is;if(cs!==K&&cs!==J||is!==j){if(cs==="strokeUniform")return is==="non-scaling-stroke";if(cs==="strokeDashArray")uo=is===j?null:is.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(cs==="transformMatrix")uo=us&&us.transformMatrix?Tt(us.transformMatrix,br(is)):br(is);else if(cs==="visible")uo=is!==j&&is!=="hidden",us&&us.visible===!1&&(uo=!1);else if(cs==="opacity")uo=parseFloat(is),us&&us.opacity!==void 0&&(uo*=us.opacity);else if(cs==="textAnchor")uo=is==="start"?M:is==="end"?A:D;else if(cs==="charSpacing"||cs===We)co=Re(is,hs)/hs*1e3;else if(cs==="paintFirst"){const ga=is.indexOf(K),ba=is.indexOf(J);uo=K,(ga>-1&&ba>-1&&ba<ga||ga===-1&&ba>-1)&&(uo=J)}else{if(cs==="href"||cs==="xlink:href"||cs==="font"||cs==="id")return is;if(cs==="imageSmoothing")return is==="optimizeQuality";co=lo?is.map(Re):Re(is,hs)}}else uo="";return!lo&&isNaN(co)?uo:co}function wr(cs,is){const us=cs.match(rs);if(!us)return;const hs=us[1],lo=us[3],co=us[4],uo=us[5],ga=us[6];hs&&(is.fontStyle=hs),lo&&(is.fontWeight=isNaN(parseFloat(lo))?lo:parseFloat(lo)),co&&(is.fontSize=Re(co)),ga&&(is.fontFamily=ga),uo&&(is.lineHeight=uo==="normal"?1:uo)}function Tr(cs,is){cs.replace(/;\s*$/,"").split(";").forEach(us=>{if(!us)return;const[hs,lo]=us.split(":");is[hs.trim().toLowerCase()]=lo.trim()})}function Or(cs){const is={},us=cs.getAttribute("style");return us&&(typeof us=="string"?Tr(us,is):function(hs,lo){Object.entries(hs).forEach(co=>{let[uo,ga]=co;ga!==void 0&&(lo[uo.toLowerCase()]=ga)})}(us,is)),is}const kr={stroke:"strokeOpacity",fill:"fillOpacity"};function Dr(cs,is,us){if(!cs)return{};let hs,lo={},co=O;cs.parentNode&&ls.test(cs.parentNode.nodeName)&&(lo=Dr(cs.parentElement,is,us),lo.fontSize&&(hs=co=Re(lo.fontSize)));const uo=s(s(s({},is.reduce((xa,_a)=>{const $a=cs.getAttribute(_a);return $a&&(xa[_a]=$a),xa},{})),function(xa){let _a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$a={};for(const xl in _a)Zi(xa,xl.split(" "))&&($a=s(s({},$a),_a[xl]));return $a}(cs,us)),Or(cs));uo[as]&&cs.setAttribute(as,uo[as]),uo[os]&&(hs=Re(uo[os],co),uo[os]="".concat(hs));const ga={};for(const xa in uo){const _a=$i(xa),$a=Sr(_a,uo[xa],lo,hs);ga[_a]=$a}ga&&ga.font&&wr(ga.font,ga);const ba=s(s({},lo),ga);return ls.test(cs.nodeName)?ba:function(xa){const _a=ji.getDefaults();return Object.entries(kr).forEach($a=>{let[xl,yl]=$a;if(xa[yl]===void 0||xa[xl]==="")return;if(xa[xl]===void 0){if(!_a[xl])return;xa[xl]=_a[xl]}if(xa[xl].indexOf("url(")===0)return;const wl=new Le(xa[xl]);xa[xl]=wl.setAlpha(Vt(wl.getAlpha()*xa[yl],2)).toRgba()}),xa}(ba)}const Mr=["left","top","width","height","visible"],Pr=["rx","ry"];class Er extends ji{static getDefaults(){return s(s({},super.getDefaults()),Er.ownDefaults)}constructor(is){super(),Object.assign(this,Er.ownDefaults),this.setOptions(is),this._initRxRy()}_initRxRy(){const{rx:is,ry:us}=this;is&&!us?this.ry=is:us&&!is&&(this.rx=us)}_render(is){const{width:us,height:hs}=this,lo=-us/2,co=-hs/2,uo=this.rx?Math.min(this.rx,us/2):0,ga=this.ry?Math.min(this.ry,hs/2):0,ba=uo!==0||ga!==0;is.beginPath(),is.moveTo(lo+uo,co),is.lineTo(lo+us-uo,co),ba&&is.bezierCurveTo(lo+us-k*uo,co,lo+us,co+k*ga,lo+us,co+ga),is.lineTo(lo+us,co+hs-ga),ba&&is.bezierCurveTo(lo+us,co+hs-k*ga,lo+us-k*uo,co+hs,lo+us-uo,co+hs),is.lineTo(lo+uo,co+hs),ba&&is.bezierCurveTo(lo+k*uo,co+hs,lo,co+hs-k*ga,lo,co+hs-ga),is.lineTo(lo,co+ga),ba&&is.bezierCurveTo(lo,co+k*ga,lo+k*uo,co,lo+uo,co),is.closePath(),this._renderPaintInOrder(is)}toObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Pr,...is])}_toSVG(){const{width:is,height:us,rx:hs,ry:lo}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-is/2,'" y="').concat(-us/2,'" rx="').concat(hs,'" ry="').concat(lo,'" width="').concat(is,'" height="').concat(us,`" />
`)]}static async fromElement(is,us,hs){const lo=Dr(is,this.ATTRIBUTE_NAMES,hs),{left:co=0,top:uo=0,width:ga=0,height:ba=0,visible:xa=!0}=lo,_a=i(lo,Mr);return new this(s(s(s({},us),_a),{},{left:co,top:uo,width:ga,height:ba,visible:!!(xa&&ga&&ba)}))}}t(Er,"type","Rect"),t(Er,"cacheProperties",[...Ms,...Pr]),t(Er,"ownDefaults",{rx:0,ry:0}),t(Er,"ATTRIBUTE_NAMES",[...Ji,"x","y","rx","ry","width","height"]),tt.setClass(Er),tt.setSVGClass(Er);const Ar="initialization",jr="added",Fr="removed",Lr="imperative",Rr=(cs,is)=>{const{strokeUniform:us,strokeWidth:hs,width:lo,height:co,group:uo}=is,ga=uo&&uo!==cs?fe(uo.calcTransformMatrix(),cs.calcTransformMatrix()):null,ba=ga?is.getRelativeCenterPoint().transform(ga):is.getRelativeCenterPoint(),xa=!is.isStrokeAccountedForInDimensions(),_a=us&&xa?me(new ot(hs,hs),void 0,cs.calcTransformMatrix()):at,$a=!us&&xa?hs:0,xl=ge(lo+$a,co+$a,Ot([ga,is.calcOwnMatrix()],!0)).add(_a).scalarDivide(2);return[ba.subtract(xl),ba.add(xl)]};class Ir{calcLayoutResult(is,us){if(this.shouldPerformLayout(is))return this.calcBoundingBox(us,is)}shouldPerformLayout(is){let{type:us,prevStrategy:hs,strategy:lo}=is;return us===Ar||us===Lr||!!hs&&lo!==hs}shouldLayoutClipPath(is){let{type:us,target:{clipPath:hs}}=is;return us!==Ar&&hs&&!hs.absolutePositioned}getInitialSize(is,us){return us.size}calcBoundingBox(is,us){const{type:hs,target:lo}=us;if(hs===Lr&&us.overrides)return us.overrides;if(is.length===0)return;const{left:co,top:uo,width:ga,height:ba}=ae(is.map($a=>Rr(lo,$a)).reduce(($a,xl)=>$a.concat(xl),[])),xa=new ot(ga,ba),_a=new ot(co,uo).add(xa.scalarDivide(2));if(hs===Ar){const $a=this.getInitialSize(us,{size:xa,center:_a});return{center:_a,relativeCorrection:new ot(0,0),size:$a}}return{center:_a.transform(lo.calcOwnMatrix()),size:xa}}}t(Ir,"type","strategy");class Br extends Ir{shouldPerformLayout(is){return!0}}t(Br,"type","fit-content"),tt.setClass(Br);const Xr=["strategy"],Yr=["target","strategy","bubbles","prevStrategy"],Wr="layoutManager";class Vr{constructor(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Br;t(this,"strategy",void 0),this.strategy=is,this._subscriptions=new Map}performLayout(is){const us=s(s({bubbles:!0,strategy:this.strategy},is),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(us);const hs=this.getLayoutResult(us);hs&&this.commitLayout(us,hs),this.onAfterLayout(us,hs),this._prevLayoutStrategy=us.strategy}attachHandlers(is,us){const{target:hs}=us;return[Q,L,Y,I,R,X,z,W,V].map(lo=>is.on(lo,co=>this.performLayout(lo===Q?{type:"object_modified",trigger:lo,e:co,target:hs}:{type:"object_modifying",trigger:lo,e:co,target:hs})))}subscribe(is,us){this.unsubscribe(is,us);const hs=this.attachHandlers(is,us);this._subscriptions.set(is,hs)}unsubscribe(is,us){(this._subscriptions.get(is)||[]).forEach(hs=>hs()),this._subscriptions.delete(is)}unsubscribeTargets(is){is.targets.forEach(us=>this.unsubscribe(us,is))}subscribeTargets(is){is.targets.forEach(us=>this.subscribe(us,is))}onBeforeLayout(is){const{target:us,type:hs}=is,{canvas:lo}=us;if(hs===Ar||hs===jr?this.subscribeTargets(is):hs===Fr&&this.unsubscribeTargets(is),us.fire("layout:before",{context:is}),lo&&lo.fire("object:layout:before",{target:us,context:is}),hs===Lr&&is.deep){const co=i(is,Xr);us.forEachObject(uo=>uo.layoutManager&&uo.layoutManager.performLayout(s(s({},co),{},{bubbles:!1,target:uo})))}}getLayoutResult(is){const{target:us,strategy:hs,type:lo}=is,co=hs.calcLayoutResult(is,us.getObjects());if(!co)return;const uo=lo===Ar?new ot:us.getRelativeCenterPoint(),{center:ga,correction:ba=new ot,relativeCorrection:xa=new ot}=co,_a=uo.subtract(ga).add(ba).transform(lo===Ar?T:wt(us.calcOwnMatrix()),!0).add(xa);return{result:co,prevCenter:uo,nextCenter:ga,offset:_a}}commitLayout(is,us){const{target:hs}=is,{result:{size:lo},nextCenter:co}=us;var uo,ga;hs.set({width:lo.x,height:lo.y}),this.layoutObjects(is,us),is.type===Ar?hs.set({left:(uo=is.x)!==null&&uo!==void 0?uo:co.x+lo.x*xe(hs.originX),top:(ga=is.y)!==null&&ga!==void 0?ga:co.y+lo.y*xe(hs.originY)}):(hs.setPositionByOrigin(co,D,D),hs.setCoords(),hs.set("dirty",!0))}layoutObjects(is,us){const{target:hs}=is;hs.forEachObject(lo=>{lo.group===hs&&this.layoutObject(is,us,lo)}),is.strategy.shouldLayoutClipPath(is)&&this.layoutObject(is,us,hs.clipPath)}layoutObject(is,us,hs){let{offset:lo}=us;hs.set({left:hs.left+lo.x,top:hs.top+lo.y})}onAfterLayout(is,us){const{target:hs,strategy:lo,bubbles:co,prevStrategy:uo}=is,ga=i(is,Yr),{canvas:ba}=hs;hs.fire("layout:after",{context:is,result:us}),ba&&ba.fire("object:layout:after",{context:is,result:us,target:hs});const xa=hs.parent;co&&xa!=null&&xa.layoutManager&&((ga.path||(ga.path=[])).push(hs),xa.layoutManager.performLayout(s(s({},ga),{},{target:xa}))),hs.set("dirty",!0)}dispose(){const{_subscriptions:is}=this;is.forEach(us=>us.forEach(hs=>hs())),is.clear()}toObject(){return{type:Wr,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}tt.setClass(Vr,Wr);const zr=["type","objects","layoutManager"];class Gr extends Vr{performLayout(){}}class Hr extends ct(ji){static getDefaults(){return s(s({},super.getDefaults()),Hr.ownDefaults)}constructor(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),t(this,"_activeObjects",[]),t(this,"__objectSelectionTracker",void 0),t(this,"__objectSelectionDisposer",void 0),Object.assign(this,Hr.ownDefaults),this.setOptions(us),this.groupInit(is,us)}groupInit(is,us){var hs;this._objects=[...is],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(lo=>{this.enterGroup(lo,!1)}),this.layoutManager=(hs=us.layoutManager)!==null&&hs!==void 0?hs:new Vr,this.layoutManager.performLayout({type:Ar,target:this,targets:[...is],x:us.left,y:us.top})}canEnterGroup(is){return is===this||this.isDescendantOf(is)?(a("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(is)===-1||(a("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(is){return is.filter((us,hs,lo)=>this.canEnterGroup(us)&&lo.indexOf(us)===hs)}add(){for(var is=arguments.length,us=new Array(is),hs=0;hs<is;hs++)us[hs]=arguments[hs];const lo=this._filterObjectsBeforeEnteringGroup(us),co=super.add(...lo);return this._onAfterObjectsChange(jr,lo),co}insertAt(is){for(var us=arguments.length,hs=new Array(us>1?us-1:0),lo=1;lo<us;lo++)hs[lo-1]=arguments[lo];const co=this._filterObjectsBeforeEnteringGroup(hs),uo=super.insertAt(is,...co);return this._onAfterObjectsChange(jr,co),uo}remove(){const is=super.remove(...arguments);return this._onAfterObjectsChange(Fr,is),is}_onObjectAdded(is){this.enterGroup(is,!0),this.fire("object:added",{target:is}),is.fire("added",{target:this})}_onObjectRemoved(is,us){this.exitGroup(is,us),this.fire("object:removed",{target:is}),is.fire("removed",{target:this})}_onAfterObjectsChange(is,us){this.layoutManager.performLayout({type:is,targets:us,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(is,us){const hs=this[is];return super._set(is,us),is==="canvas"&&hs!==us&&(this._objects||[]).forEach(lo=>{lo._set(is,us)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(is,us){let{target:hs}=us;const lo=this._activeObjects;if(is)lo.push(hs),this._set("dirty",!0);else if(lo.length>0){const co=lo.indexOf(hs);co>-1&&(lo.splice(co,1),this._set("dirty",!0))}}_watchObject(is,us){is&&this._watchObject(!1,us),is?(us.on("selected",this.__objectSelectionTracker),us.on("deselected",this.__objectSelectionDisposer)):(us.off("selected",this.__objectSelectionTracker),us.off("deselected",this.__objectSelectionDisposer))}enterGroup(is,us){is.group&&is.group.remove(is),is._set("parent",this),this._enterGroup(is,us)}_enterGroup(is,us){us&&le(is,Tt(wt(this.calcTransformMatrix()),is.calcTransformMatrix())),this._shouldSetNestedCoords()&&is.setCoords(),is._set("group",this),is._set("canvas",this.canvas),this._watchObject(!0,is);const hs=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();hs&&(hs===is||is.isDescendantOf(hs))&&this._activeObjects.push(is)}exitGroup(is,us){this._exitGroup(is,us),is._set("parent",void 0),is._set("canvas",void 0)}_exitGroup(is,us){is._set("group",void 0),us||(le(is,Tt(this.calcTransformMatrix(),is.calcTransformMatrix())),is.setCoords()),this._watchObject(!1,is);const hs=this._activeObjects.length>0?this._activeObjects.indexOf(is):-1;hs>-1&&this._activeObjects.splice(hs,1)}shouldCache(){const is=ji.prototype.shouldCache.call(this);if(is){for(let us=0;us<this._objects.length;us++)if(this._objects[us].willDrawShadow())return this.ownCaching=!1,!1}return is}willDrawShadow(){if(super.willDrawShadow())return!0;for(let is=0;is<this._objects.length;is++)if(this._objects[is].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(is,us,hs){this._renderBackground(is);for(let co=0;co<this._objects.length;co++){var lo;const uo=this._objects[co];(lo=this.canvas)!==null&&lo!==void 0&&lo.preserveObjectStacking&&uo.group!==this?(is.save(),is.transform(...wt(this.calcTransformMatrix())),uo.render(is),is.restore()):uo.group===this&&uo.render(is)}this._drawClipPath(is,this.clipPath,hs)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(is=>is.setCoords())}triggerLayout(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(s({target:this,type:Lr},is))}render(is){this._transformDone=!0,super.render(is),this._transformDone=!1}__serializeObjects(is,us){const hs=this.includeDefaultValues;return this._objects.filter(function(lo){return!lo.excludeFromExport}).map(function(lo){const co=lo.includeDefaultValues;lo.includeDefaultValues=hs;const uo=lo[is||"toObject"](us);return lo.includeDefaultValues=co,uo})}toObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const us=this.layoutManager.toObject();return s(s(s({},super.toObject(["subTargetCheck","interactive",...is])),us.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:us}:{}),{},{objects:this.__serializeObjects("toObject",is)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(is=>{this._watchObject(!1,is),is.dispose()}),super.dispose()}_createSVGBgRect(is){if(!this.backgroundColor)return"";const us=Er.prototype._toSVG.call(this),hs=us.indexOf("COMMON_PARTS");us[hs]='for="group" ';const lo=us.join("");return is?is(lo):lo}_toSVG(is){const us=["<g ","COMMON_PARTS",` >
`],hs=this._createSVGBgRect(is);hs&&us.push("		",hs);for(let lo=0;lo<this._objects.length;lo++)us.push("		",this._objects[lo].toSVG(is));return us.push(`</g>
`),us}getSvgStyles(){const is=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",us=this.visible?"":" visibility: hidden;";return[is,this.getSvgFilter(),us].join("")}toClipPathSVG(is){const us=[],hs=this._createSVGBgRect(is);hs&&us.push("	",hs);for(let lo=0;lo<this._objects.length;lo++)us.push("	",this._objects[lo].toClipPathSVG(is));return this._createBaseClipPathSVGMarkup(us,{reviver:is})}static fromObject(is,us){let{type:hs,objects:lo=[],layoutManager:co}=is,uo=i(is,zr);return Promise.all([Bt(lo,us),Xt(uo,us)]).then(ga=>{let[ba,xa]=ga;const _a=new this(ba,s(s(s({},uo),xa),{},{layoutManager:new Gr}));if(co){const $a=tt.getClass(co.type),xl=tt.getClass(co.strategy);_a.layoutManager=new $a(new xl)}else _a.layoutManager=new Vr;return _a.layoutManager.subscribeTargets({type:Ar,target:_a,targets:_a.getObjects()}),_a.setCoords(),_a})}}t(Hr,"type","Group"),t(Hr,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),tt.setClass(Hr);const Nr=(cs,is)=>Math.min(is.width/cs.width,is.height/cs.height),Ur=(cs,is)=>Math.max(is.width/cs.width,is.height/cs.height),qr="\\s*,?\\s*",Kr="".concat(qr,"(").concat(es,")"),Jr="".concat(Kr).concat(Kr).concat(Kr).concat(qr,"([01])").concat(qr,"([01])").concat(Kr).concat(Kr),Qr={m:"l",M:"L"},Zr=(cs,is,us,hs,lo,co,uo,ga,ba,xa,_a)=>{const $a=rt(cs),xl=nt(cs),yl=rt(is),wl=nt(is),_l=us*lo*yl-hs*co*wl+uo,El=hs*lo*yl+us*co*wl+ga;return["C",xa+ba*(-us*lo*xl-hs*co*$a),_a+ba*(-hs*lo*xl+us*co*$a),_l+ba*(us*lo*wl+hs*co*yl),El+ba*(hs*lo*wl-us*co*yl),_l,El]},$r=(cs,is,us,hs)=>{const lo=Math.atan2(is,cs),co=Math.atan2(hs,us);return co>=lo?co-lo:2*Math.PI-(lo-co)};function tn(cs,is,us,hs,lo,co,uo,ga){let ba;if(o.cachesBoundsOfCurve&&(ba=[...arguments].join(),_.boundsOfCurveCache[ba]))return _.boundsOfCurveCache[ba];const xa=Math.sqrt,_a=Math.abs,$a=[],xl=[[0,0],[0,0]];let yl=6*cs-12*us+6*lo,wl=-3*cs+9*us-9*lo+3*uo,_l=3*us-3*cs;for(let Dl=0;Dl<2;++Dl){if(Dl>0&&(yl=6*is-12*hs+6*co,wl=-3*is+9*hs-9*co+3*ga,_l=3*hs-3*is),_a(wl)<1e-12){if(_a(yl)<1e-12)continue;const Il=-_l/yl;0<Il&&Il<1&&$a.push(Il);continue}const Fl=yl*yl-4*_l*wl;if(Fl<0)continue;const Pl=xa(Fl),Al=(-yl+Pl)/(2*wl);0<Al&&Al<1&&$a.push(Al);const Rl=(-yl-Pl)/(2*wl);0<Rl&&Rl<1&&$a.push(Rl)}let El=$a.length;const Sl=El,Cl=nn(cs,is,us,hs,lo,co,uo,ga);for(;El--;){const{x:Dl,y:Fl}=Cl($a[El]);xl[0][El]=Dl,xl[1][El]=Fl}xl[0][Sl]=cs,xl[1][Sl]=is,xl[0][Sl+1]=uo,xl[1][Sl+1]=ga;const Tl=[new ot(Math.min(...xl[0]),Math.min(...xl[1])),new ot(Math.max(...xl[0]),Math.max(...xl[1]))];return o.cachesBoundsOfCurve&&(_.boundsOfCurveCache[ba]=Tl),Tl}const en=(cs,is,us)=>{let[hs,lo,co,uo,ga,ba,xa,_a]=us;const $a=((xl,yl,wl,_l,El,Sl,Cl)=>{if(wl===0||_l===0)return[];let Tl=0,Dl=0,Fl=0;const Pl=Math.PI,Al=Cl*w,Rl=nt(Al),Il=rt(Al),Bl=.5*(-Il*xl-Rl*yl),Ol=.5*(-Il*yl+Rl*xl),zl=wl**2,Hl=_l**2,ou=Ol**2,au=Bl**2,_c=zl*Hl-zl*ou-Hl*au;let uu=Math.abs(wl),lu=Math.abs(_l);if(_c<0){const fu=Math.sqrt(1-_c/(zl*Hl));uu*=fu,lu*=fu}else Fl=(El===Sl?-1:1)*Math.sqrt(_c/(zl*ou+Hl*au));const Kl=Fl*uu*Ol/lu,xu=-Fl*lu*Bl/uu,pu=Il*Kl-Rl*xu+.5*xl,Ll=Rl*Kl+Il*xu+.5*yl;let Nl=$r(1,0,(Bl-Kl)/uu,(Ol-xu)/lu),Ml=$r((Bl-Kl)/uu,(Ol-xu)/lu,(-Bl-Kl)/uu,(-Ol-xu)/lu);Sl===0&&Ml>0?Ml-=2*Pl:Sl===1&&Ml<0&&(Ml+=2*Pl);const Ul=Math.ceil(Math.abs(Ml/Pl*2)),Vl=[],Ql=Ml/Ul,Jl=8/3*Math.sin(Ql/4)*Math.sin(Ql/4)/Math.sin(Ql/2);let iu=Nl+Ql;for(let fu=0;fu<Ul;fu++)Vl[fu]=Zr(Nl,iu,Il,Rl,uu,lu,pu,Ll,Jl,Tl,Dl),Tl=Vl[fu][5],Dl=Vl[fu][6],Nl=iu,iu+=Ql;return Vl})(xa-cs,_a-is,lo,co,ga,ba,uo);for(let xl=0,yl=$a.length;xl<yl;xl++)$a[xl][1]+=cs,$a[xl][2]+=is,$a[xl][3]+=cs,$a[xl][4]+=is,$a[xl][5]+=cs,$a[xl][6]+=is;return $a},sn=cs=>{let is=0,us=0,hs=0,lo=0;const co=[];let uo,ga=0,ba=0;for(const xa of cs){const _a=[...xa];let $a;switch(_a[0]){case"l":_a[1]+=is,_a[2]+=us;case"L":is=_a[1],us=_a[2],$a=["L",is,us];break;case"h":_a[1]+=is;case"H":is=_a[1],$a=["L",is,us];break;case"v":_a[1]+=us;case"V":us=_a[1],$a=["L",is,us];break;case"m":_a[1]+=is,_a[2]+=us;case"M":is=_a[1],us=_a[2],hs=_a[1],lo=_a[2],$a=["M",is,us];break;case"c":_a[1]+=is,_a[2]+=us,_a[3]+=is,_a[4]+=us,_a[5]+=is,_a[6]+=us;case"C":ga=_a[3],ba=_a[4],is=_a[5],us=_a[6],$a=["C",_a[1],_a[2],ga,ba,is,us];break;case"s":_a[1]+=is,_a[2]+=us,_a[3]+=is,_a[4]+=us;case"S":uo==="C"?(ga=2*is-ga,ba=2*us-ba):(ga=is,ba=us),is=_a[3],us=_a[4],$a=["C",ga,ba,_a[1],_a[2],is,us],ga=$a[3],ba=$a[4];break;case"q":_a[1]+=is,_a[2]+=us,_a[3]+=is,_a[4]+=us;case"Q":ga=_a[1],ba=_a[2],is=_a[3],us=_a[4],$a=["Q",ga,ba,is,us];break;case"t":_a[1]+=is,_a[2]+=us;case"T":uo==="Q"?(ga=2*is-ga,ba=2*us-ba):(ga=is,ba=us),is=_a[1],us=_a[2],$a=["Q",ga,ba,is,us];break;case"a":_a[6]+=is,_a[7]+=us;case"A":en(is,us,_a).forEach(xl=>co.push(xl)),is=_a[6],us=_a[7];break;case"z":case"Z":is=hs,us=lo,$a=["Z"]}$a?(co.push($a),uo=$a[0]):uo=""}return co},rn=(cs,is,us,hs)=>Math.sqrt((us-cs)**2+(hs-is)**2),nn=(cs,is,us,hs,lo,co,uo,ga)=>ba=>{const xa=ba**3,_a=(yl=>3*yl**2*(1-yl))(ba),$a=(yl=>3*yl*(1-yl)**2)(ba),xl=(yl=>(1-yl)**3)(ba);return new ot(uo*xa+lo*_a+us*$a+cs*xl,ga*xa+co*_a+hs*$a+is*xl)},on=cs=>cs**2,an=cs=>2*cs*(1-cs),hn=cs=>(1-cs)**2,cn=(cs,is,us,hs,lo,co,uo,ga)=>ba=>{const xa=on(ba),_a=an(ba),$a=hn(ba),xl=3*($a*(us-cs)+_a*(lo-us)+xa*(uo-lo)),yl=3*($a*(hs-is)+_a*(co-hs)+xa*(ga-co));return Math.atan2(yl,xl)},ln=(cs,is,us,hs,lo,co)=>uo=>{const ga=on(uo),ba=an(uo),xa=hn(uo);return new ot(lo*ga+us*ba+cs*xa,co*ga+hs*ba+is*xa)},un=(cs,is,us,hs,lo,co)=>uo=>{const ga=1-uo,ba=2*(ga*(us-cs)+uo*(lo-us)),xa=2*(ga*(hs-is)+uo*(co-hs));return Math.atan2(xa,ba)},dn=(cs,is,us)=>{let hs=new ot(is,us),lo=0;for(let co=1;co<=100;co+=1){const uo=cs(co/100);lo+=rn(hs.x,hs.y,uo.x,uo.y),hs=uo}return lo},gn=(cs,is)=>{let us,hs=0,lo=0,co={x:cs.x,y:cs.y},uo=s({},co),ga=.01,ba=0;const xa=cs.iterator,_a=cs.angleFinder;for(;lo<is&&ga>1e-4;)uo=xa(hs),ba=hs,us=rn(co.x,co.y,uo.x,uo.y),us+lo>is?(hs-=ga,ga/=2):(co=uo,hs+=ga,lo+=us);return s(s({},uo),{},{angle:_a(ba)})},fn=cs=>{let is,us,hs=0,lo=0,co=0,uo=0,ga=0;const ba=[];for(const xa of cs){const _a={x:lo,y:co,command:xa[0],length:0};switch(xa[0]){case"M":us=_a,us.x=uo=lo=xa[1],us.y=ga=co=xa[2];break;case"L":us=_a,us.length=rn(lo,co,xa[1],xa[2]),lo=xa[1],co=xa[2];break;case"C":is=nn(lo,co,xa[1],xa[2],xa[3],xa[4],xa[5],xa[6]),us=_a,us.iterator=is,us.angleFinder=cn(lo,co,xa[1],xa[2],xa[3],xa[4],xa[5],xa[6]),us.length=dn(is,lo,co),lo=xa[5],co=xa[6];break;case"Q":is=ln(lo,co,xa[1],xa[2],xa[3],xa[4]),us=_a,us.iterator=is,us.angleFinder=un(lo,co,xa[1],xa[2],xa[3],xa[4]),us.length=dn(is,lo,co),lo=xa[3],co=xa[4];break;case"Z":us=_a,us.destX=uo,us.destY=ga,us.length=rn(lo,co,uo,ga),lo=uo,co=ga}hs+=us.length,ba.push(us)}return ba.push({length:hs,x:lo,y:co}),ba},pn=function(cs,is){let us=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fn(cs),hs=0;for(;is-us[hs].length>0&&hs<us.length-2;)is-=us[hs].length,hs++;const lo=us[hs],co=is/lo.length,uo=cs[hs];switch(lo.command){case"M":return{x:lo.x,y:lo.y,angle:0};case"Z":return s(s({},new ot(lo.x,lo.y).lerp(new ot(lo.destX,lo.destY),co)),{},{angle:Math.atan2(lo.destY-lo.y,lo.destX-lo.x)});case"L":return s(s({},new ot(lo.x,lo.y).lerp(new ot(uo[1],uo[2]),co)),{},{angle:Math.atan2(uo[2]-lo.y,uo[1]-lo.x)});case"C":case"Q":return gn(lo,is)}},mn=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),vn=new RegExp(Jr,"g"),yn=new RegExp(es,"gi"),_n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},xn=cs=>{var is;const us=[],hs=(is=cs.match(mn))!==null&&is!==void 0?is:[];for(const lo of hs){const co=lo[0];if(co==="z"||co==="Z"){us.push([co]);continue}const uo=_n[co.toLowerCase()];let ga=[];if(co==="a"||co==="A"){vn.lastIndex=0;for(let ba=null;ba=vn.exec(lo);)ga.push(...ba.slice(1))}else ga=lo.match(yn)||[];for(let ba=0;ba<ga.length;ba+=uo){const xa=new Array(uo),_a=Qr[co];xa[0]=ba>0&&_a?_a:co;for(let $a=0;$a<uo;$a++)xa[$a+1]=parseFloat(ga[ba+$a]);us.push(xa)}}return us},Cn=function(cs){let is=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,us=new ot(cs[0]),hs=new ot(cs[1]),lo=1,co=0;const uo=[],ga=cs.length,ba=ga>2;let xa;for(ba&&(lo=cs[2].x<hs.x?-1:cs[2].x===hs.x?0:1,co=cs[2].y<hs.y?-1:cs[2].y===hs.y?0:1),uo.push(["M",us.x-lo*is,us.y-co*is]),xa=1;xa<ga;xa++){if(!us.eq(hs)){const _a=us.midPointFrom(hs);uo.push(["Q",us.x,us.y,_a.x,_a.y])}us=cs[xa],xa+1<cs.length&&(hs=cs[xa+1])}return ba&&(lo=us.x>cs[xa-2].x?1:us.x===cs[xa-2].x?0:-1,co=us.y>cs[xa-2].y?1:us.y===cs[xa-2].y?0:-1),uo.push(["L",us.x+lo*is,us.y+co*is]),uo},bn=(cs,is)=>cs.map(us=>us.map((hs,lo)=>lo===0||is===void 0?hs:Vt(hs,is)).join(" ")).join(" ");function Sn(cs,is){const us=cs.style;us&&is&&(typeof is=="string"?us.cssText+=";"+is:Object.entries(is).forEach(hs=>{let[lo,co]=hs;return us.setProperty(lo,co)}))}const wn=(cs,is)=>Math.floor(Math.random()*(is-cs+1))+cs;function Tn(cs){let is=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const us=is.onComplete||C,hs=new(v()).XMLHttpRequest,lo=is.signal,co=function(){hs.abort()},uo=function(){lo&&lo.removeEventListener("abort",co),hs.onerror=hs.ontimeout=C};if(lo&&lo.aborted)throw new c("request");return lo&&lo.addEventListener("abort",co,{once:!0}),hs.onreadystatechange=function(){hs.readyState===4&&(uo(),us(hs),hs.onreadystatechange=C)},hs.onerror=hs.ontimeout=uo,hs.open("get",cs,!0),hs.send(),hs}const On=(cs,is)=>{let us=cs._findCenterFromElement();cs.transformMatrix&&((hs=>{if(hs.transformMatrix){const{scaleX:lo,scaleY:co,angle:uo,skewX:ga}=Dt(hs.transformMatrix);hs.flipX=!1,hs.flipY=!1,hs.set(H,lo),hs.set(N,co),hs.angle=uo,hs.skewX=ga,hs.skewY=0}})(cs),us=us.transform(cs.transformMatrix)),delete cs.transformMatrix,is&&(cs.scaleX*=is.scaleX,cs.scaleY*=is.scaleY,cs.cropX=is.cropX,cs.cropY=is.cropY,us.x+=is.offsetLeft,us.y+=is.offsetTop,cs.width=is.width,cs.height=is.height),cs.setPositionByOrigin(us,D,D)};var kn=Object.freeze({__proto__:null,addTransformToObject:ce,animate:Us,animateColor:qs,applyTransformToObject:le,calcAngleBetweenVectors:vs,calcDimensionsMatrix:Lt,calcPlaneChangeMatrix:fe,calcVectorRotation:ys,cancelAnimFrame:dt,capValue:ks,composeMatrix:Rt,copyCanvasElement:cs=>{var is;const us=vt(cs);return(is=us.getContext("2d"))===null||is===void 0||is.drawImage(cs,0,0),us},cos:rt,createCanvasElement:pt,createImage:mt,createRotateMatrix:Pt,createScaleMatrix:Et,createSkewXMatrix:jt,createSkewYMatrix:Ft,createTranslateMatrix:Mt,createVector:ps,crossProduct:Cs,degreesToRadians:xt,dotProduct:bs,ease:Rs,enlivenObjectEnlivables:Xt,enlivenObjects:Bt,findScaleToCover:Ur,findScaleToFit:Nr,getBoundsOfCurve:tn,getOrthonormalVector:xs,getPathSegmentsInfo:fn,getPointOnPath:pn,getPointer:re,getRandomInt:wn,getRegularPolygonPath:(cs,is)=>{const us=2*Math.PI/cs;let hs=-b;cs%2==0&&(hs+=us/2);const lo=new Array(cs+1);for(let co=0;co<cs;co++){const uo=co*us+hs,{x:ga,y:ba}=new ot(rt(uo),nt(uo)).scalarMultiply(is);lo[co]=[co===0?"M":"L",ga,ba]}return lo[cs]=["Z"],lo},getSmoothPathFromPoints:Cn,getSvgAttributes:cs=>{const is=["instantiated_by_use","style","id","class"];switch(cs){case"linearGradient":return is.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return is.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return is.concat(["offset","stop-color","stop-opacity"])}return is},getUnitVector:_s,groupSVGElements:(cs,is)=>cs&&cs.length===1?cs[0]:new Hr(cs,is),hasStyleChanged:Ui,invertTransform:wt,isBetweenVectors:Ss,isIdentityMatrix:bt,isTouchEvent:ne,isTransparent:Fi,joinPath:bn,loadImage:It,magnitude:ms,makeBoundingBoxFromPoints:ae,makePathSimpler:sn,matrixToSVG:zt,mergeClipPaths:(cs,is)=>{var us;let hs=cs,lo=is;hs.inverted&&!lo.inverted&&(hs=is,lo=cs),ve(lo,(us=lo.group)===null||us===void 0?void 0:us.calcTransformMatrix(),hs.calcTransformMatrix());const co=hs.inverted&&lo.inverted;return co&&(hs.inverted=lo.inverted=!1),new Hr([hs],{clipPath:lo,inverted:co})},multiplyTransformMatrices:Tt,multiplyTransformMatrixArray:Ot,parsePath:xn,parsePreserveAspectRatioAttribute:Ie,parseUnit:Re,pick:Yt,projectStrokeOnPoints:Xi,qrDecompose:Dt,radiansToDegrees:Ct,removeFromArray:it,removeTransformFromObject:(cs,is)=>{const us=wt(is),hs=Tt(us,cs.calcOwnMatrix());le(cs,hs)},removeTransformMatrixForSvgParsing:On,request:Tn,requestAnimFrame:ut,resetObjectTransform:ue,rotatePoint:(cs,is,us)=>cs.rotate(us,is),rotateVector:fs,saveObjectTransform:de,sendObjectToPlane:ve,sendPointToPlane:pe,sendVectorToPlane:me,setStyle:Sn,sin:nt,sizeAfterTransform:ge,string:Ni,stylesFromArray:Ki,stylesToArray:qi,toBlob:_t,toDataURL:yt,toFixed:Vt,transformPath:(cs,is,us)=>(us&&(is=Tt(is,[1,0,0,1,-us.x,-us.y])),cs.map(hs=>{const lo=[...hs];for(let co=1;co<hs.length-1;co+=2){const{x:uo,y:ga}=St({x:hs[co],y:hs[co+1]},is);lo[co]=uo,lo[co+1]=ga}return lo})),transformPoint:St});class Dn extends te{constructor(is){let{allowTouchScrolling:us=!1,containerClass:hs=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(is),t(this,"upper",void 0),t(this,"container",void 0);const{el:lo}=this.lower,co=this.createUpperCanvas();this.upper={el:co,ctx:co.getContext("2d")},this.applyCanvasStyle(lo,{allowTouchScrolling:us}),this.applyCanvasStyle(co,{allowTouchScrolling:us,styles:{position:"absolute",left:"0",top:"0"}});const uo=this.createContainerElement();uo.classList.add(hs),lo.parentNode&&lo.parentNode.replaceChild(uo,lo),uo.append(lo,co),this.container=uo}createUpperCanvas(){const{el:is}=this.lower,us=pt();return us.className=is.className,us.classList.remove("lower-canvas"),us.classList.add("upper-canvas"),us.setAttribute("data-fabric","top"),us.style.cssText=is.style.cssText,us.setAttribute("draggable","true"),us}createContainerElement(){const is=m().createElement("div");return is.setAttribute("data-fabric","wrapper"),Sn(is,{position:"relative"}),$t(is),is}applyCanvasStyle(is,us){const{styles:hs,allowTouchScrolling:lo}=us;Sn(is,s(s({},hs),{},{"touch-action":lo?"manipulation":j})),$t(is)}setDimensions(is,us){super.setDimensions(is,us);const{el:hs,ctx:lo}=this.upper;Qt(hs,lo,is,us)}setCSSDimensions(is){super.setCSSDimensions(is),Zt(this.upper.el,is),Zt(this.container,is)}cleanupDOM(is){const us=this.container,{el:hs}=this.lower,{el:lo}=this.upper;super.cleanupDOM(is),us.removeChild(lo),us.removeChild(hs),us.parentNode&&us.parentNode.replaceChild(hs,us)}dispose(){super.dispose(),p().dispose(this.upper.el),delete this.upper,delete this.container}}class Mn extends se{constructor(){super(...arguments),t(this,"targets",[]),t(this,"_hoveredTargets",[]),t(this,"_objectsToRender",void 0),t(this,"_currentTransform",null),t(this,"_groupSelector",null),t(this,"contextTopDirty",!1)}static getDefaults(){return s(s({},super.getDefaults()),Mn.ownDefaults)}get upperCanvasEl(){var is;return(is=this.elements.upper)===null||is===void 0?void 0:is.el}get contextTop(){var is;return(is=this.elements.upper)===null||is===void 0?void 0:is.ctx}get wrapperEl(){return this.elements.container}initElements(is){this.elements=new Dn(is,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(is){this._objectsToRender=void 0,super._onObjectAdded(is)}_onObjectRemoved(is){this._objectsToRender=void 0,is===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[is]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[is]}),is.fire("deselected",{target:is})),is===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(is)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const is=this._activeObject;return!this.preserveObjectStacking&&is?this._objects.filter(us=>!us.group&&us!==is).concat(is):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(is){is.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(is),this.contextTopDirty=!0),is.restore()}renderTop(){const is=this.contextTop;this.clearContext(is),this.renderTopLayer(is),this.fire("after:render",{ctx:is})}setTargetFindTolerance(is){is=Math.round(is),this.targetFindTolerance=is;const us=this.getRetinaScaling(),hs=Math.ceil((2*is+1)*us);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=hs,this.pixelFindContext.scale(us,us)}isTargetTransparent(is,us,hs){const lo=this.targetFindTolerance,co=this.pixelFindContext;this.clearContext(co),co.save(),co.translate(-us+lo,-hs+lo),co.transform(...this.viewportTransform);const uo=is.selectionBackgroundColor;is.selectionBackgroundColor="",is.render(co),is.selectionBackgroundColor=uo,co.restore();const ga=Math.round(lo*this.getRetinaScaling());return Fi(co,ga,ga,ga)}_isSelectionKeyPressed(is){const us=this.selectionKey;return!!us&&(Array.isArray(us)?!!us.find(hs=>!!hs&&is[hs]===!0):is[us])}_shouldClearSelection(is,us){const hs=this.getActiveObjects(),lo=this._activeObject;return!!(!us||us&&lo&&hs.length>1&&hs.indexOf(us)===-1&&lo!==us&&!this._isSelectionKeyPressed(is)||us&&!us.evented||us&&!us.selectable&&lo&&lo!==us)}_shouldCenterTransform(is,us,hs){if(!is)return;let lo;return us===G||us===H||us===N||us===Y?lo=this.centeredScaling||is.centeredScaling:us===B&&(lo=this.centeredRotation||is.centeredRotation),lo?!hs:hs}_getOriginFromCorner(is,us){const hs={x:is.originX,y:is.originY};return us&&(["ml","tl","bl"].includes(us)?hs.x=A:["mr","tr","br"].includes(us)&&(hs.x=M),["tl","mt","tr"].includes(us)?hs.y=E:["bl","mb","br"].includes(us)&&(hs.y=P)),hs}_setupCurrentTransform(is,us,hs){var lo;const co=us.group?pe(this.getScenePoint(is),void 0,us.group.calcTransformMatrix()):this.getScenePoint(is),{key:uo="",control:ga}=us.getActiveControl()||{},ba=hs&&ga?(lo=ga.getActionHandler(is,us,ga))===null||lo===void 0?void 0:lo.bind(ga):De,xa=((yl,wl,_l,El)=>{if(!wl||!yl)return"drag";const Sl=El.controls[wl];return Sl.getActionName(_l,Sl,El)})(hs,uo,is,us),_a=is[this.centeredKey],$a=this._shouldCenterTransform(us,xa,_a)?{x:D,y:D}:this._getOriginFromCorner(us,uo),xl={target:us,action:xa,actionHandler:ba,actionPerformed:!1,corner:uo,scaleX:us.scaleX,scaleY:us.scaleY,skewX:us.skewX,skewY:us.skewY,offsetX:co.x-us.left,offsetY:co.y-us.top,originX:$a.x,originY:$a.y,ex:co.x,ey:co.y,lastX:co.x,lastY:co.y,theta:xt(us.angle),width:us.width,height:us.height,shiftKey:is.shiftKey,altKey:_a,original:s(s({},de(us)),{},{originX:$a.x,originY:$a.y})};this._currentTransform=xl,this.fire("before:transform",{e:is,transform:xl})}setCursor(is){this.upperCanvasEl.style.cursor=is}_drawSelection(is){const{x:us,y:hs,deltaX:lo,deltaY:co}=this._groupSelector,uo=new ot(us,hs).transform(this.viewportTransform),ga=new ot(us+lo,hs+co).transform(this.viewportTransform),ba=this.selectionLineWidth/2;let xa=Math.min(uo.x,ga.x),_a=Math.min(uo.y,ga.y),$a=Math.max(uo.x,ga.x),xl=Math.max(uo.y,ga.y);this.selectionColor&&(is.fillStyle=this.selectionColor,is.fillRect(xa,_a,$a-xa,xl-_a)),this.selectionLineWidth&&this.selectionBorderColor&&(is.lineWidth=this.selectionLineWidth,is.strokeStyle=this.selectionBorderColor,xa+=ba,_a+=ba,$a-=ba,xl-=ba,ji.prototype._setLineDash.call(this,is,this.selectionDashArray),is.strokeRect(xa,_a,$a-xa,xl-_a))}findTarget(is){if(this.skipTargetFind)return;const us=this.getViewportPoint(is),hs=this._activeObject,lo=this.getActiveObjects();if(this.targets=[],hs&&lo.length>=1){if(hs.findControl(us,ne(is))||lo.length>1&&this.searchPossibleTargets([hs],us))return hs;if(hs===this.searchPossibleTargets([hs],us)){if(this.preserveObjectStacking){const co=this.targets;this.targets=[];const uo=this.searchPossibleTargets(this._objects,us);return is[this.altSelectionKey]&&uo&&uo!==hs?(this.targets=co,hs):uo}return hs}}return this.searchPossibleTargets(this._objects,us)}_pointIsInObjectSelectionArea(is,us){let hs=is.getCoords();const lo=this.getZoom(),co=is.padding/lo;if(co){const[uo,ga,ba,xa]=hs,_a=Math.atan2(ga.y-uo.y,ga.x-uo.x),$a=rt(_a)*co,xl=nt(_a)*co,yl=$a+xl,wl=$a-xl;hs=[new ot(uo.x-wl,uo.y-yl),new ot(ga.x+yl,ga.y-wl),new ot(ba.x+wl,ba.y+yl),new ot(xa.x-yl,xa.y+wl)]}return Ks.isPointInPolygon(us,hs)}_checkTarget(is,us){return!!(is&&is.visible&&is.evented&&this._pointIsInObjectSelectionArea(is,pe(us,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!is.perPixelTargetFind||is.isEditing||!this.isTargetTransparent(is,us.x,us.y)))}_searchPossibleTargets(is,us){let hs=is.length;for(;hs--;){const lo=is[hs];if(this._checkTarget(lo,us)){if(ht(lo)&&lo.subTargetCheck){const co=this._searchPossibleTargets(lo._objects,us);co&&this.targets.push(co)}return lo}}}searchPossibleTargets(is,us){const hs=this._searchPossibleTargets(is,us);if(hs&&ht(hs)&&hs.interactive&&this.targets[0]){const lo=this.targets;for(let co=lo.length-1;co>0;co--){const uo=lo[co];if(!ht(uo)||!uo.interactive)return uo}return lo[0]}return hs}getViewportPoint(is){return this._pointer?this._pointer:this.getPointer(is,!0)}getScenePoint(is){return this._absolutePointer?this._absolutePointer:this.getPointer(is)}getPointer(is){let us=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const hs=this.upperCanvasEl,lo=hs.getBoundingClientRect();let co=re(is),uo=lo.width||0,ga=lo.height||0;uo&&ga||(P in lo&&E in lo&&(ga=Math.abs(lo.top-lo.bottom)),A in lo&&M in lo&&(uo=Math.abs(lo.right-lo.left))),this.calcOffset(),co.x=co.x-this._offset.left,co.y=co.y-this._offset.top,us||(co=pe(co,void 0,this.viewportTransform));const ba=this.getRetinaScaling();ba!==1&&(co.x/=ba,co.y/=ba);const xa=uo===0||ga===0?new ot(1,1):new ot(hs.width/uo,hs.height/ga);return co.multiply(xa)}_setDimensionsImpl(is,us){this._resetTransformEventData(),super._setDimensionsImpl(is,us),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=pt(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const is=this._activeObject;return Ut(is)?is.getObjects():is?[is]:[]}_fireSelectionEvents(is,us){let hs=!1,lo=!1;const co=this.getActiveObjects(),uo=[],ga=[];is.forEach(ba=>{co.includes(ba)||(hs=!0,ba.fire("deselected",{e:us,target:ba}),ga.push(ba))}),co.forEach(ba=>{is.includes(ba)||(hs=!0,ba.fire("selected",{e:us,target:ba}),uo.push(ba))}),is.length>0&&co.length>0?(lo=!0,hs&&this.fire("selection:updated",{e:us,selected:uo,deselected:ga})):co.length>0?(lo=!0,this.fire("selection:created",{e:us,selected:uo})):is.length>0&&(lo=!0,this.fire("selection:cleared",{e:us,deselected:ga})),lo&&(this._objectsToRender=void 0)}setActiveObject(is,us){const hs=this.getActiveObjects(),lo=this._setActiveObject(is,us);return this._fireSelectionEvents(hs,us),lo}_setActiveObject(is,us){const hs=this._activeObject;return hs!==is&&!(!this._discardActiveObject(us,is)&&this._activeObject)&&!is.onSelect({e:us})&&(this._activeObject=is,Ut(is)&&hs!==is&&is.set("canvas",this),is.setCoords(),!0)}_discardActiveObject(is,us){const hs=this._activeObject;return!!hs&&!hs.onDeselect({e:is,object:us})&&(this._currentTransform&&this._currentTransform.target===hs&&this.endCurrentTransform(is),Ut(hs)&&hs===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(is){const us=this.getActiveObjects(),hs=this.getActiveObject();us.length&&this.fire("before:selection:cleared",{e:is,deselected:[hs]});const lo=this._discardActiveObject(is);return this._fireSelectionEvents(us,is),lo}endCurrentTransform(is){const us=this._currentTransform;this._finalizeCurrentTransform(is),us&&us.target&&(us.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(is){const us=this._currentTransform,hs=us.target,lo={e:is,target:hs,transform:us,action:us.action};hs._scaling&&(hs._scaling=!1),hs.setCoords(),us.actionPerformed&&(this.fire("object:modified",lo),hs.fire(Q,lo))}setViewportTransform(is){super.setViewportTransform(is);const us=this._activeObject;us&&us.setCoords()}destroy(){const is=this._activeObject;Ut(is)&&(is.removeAll(),is.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(is){const us=this._activeObject;us&&us._renderControls(is)}_toObject(is,us,hs){const lo=this._realizeGroupTransformOnObject(is),co=super._toObject(is,us,hs);return is.set(lo),co}_realizeGroupTransformOnObject(is){const{group:us}=is;if(us&&Ut(us)&&this._activeObject===us){const hs=Yt(is,["angle","flipX","flipY",M,H,N,U,q,P]);return ce(is,us.calcOwnMatrix()),hs}return{}}_setSVGObject(is,us,hs){const lo=this._realizeGroupTransformOnObject(us);super._setSVGObject(is,us,hs),us.set(lo)}}t(Mn,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Pn{constructor(is){t(this,"targets",[]),t(this,"__disposer",void 0);const us=()=>{const{hiddenTextarea:lo}=is.getActiveObject()||{};lo&&lo.focus()},hs=is.upperCanvasEl;hs.addEventListener("click",us),this.__disposer=()=>hs.removeEventListener("click",us)}exitTextEditing(){this.target=void 0,this.targets.forEach(is=>{is.isEditing&&is.exitEditing()})}add(is){this.targets.push(is)}remove(is){this.unregister(is),it(this.targets,is)}register(is){this.target=is}unregister(is){is===this.target&&(this.target=void 0)}onMouseMove(is){var us;!((us=this.target)===null||us===void 0)&&us.isEditing&&this.target.updateSelectionOnMouseMove(is)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const En=["target","oldTarget","fireCanvas","e"],An={passive:!1},jn=(cs,is)=>{const us=cs.getViewportPoint(is),hs=cs.getScenePoint(is);return{viewportPoint:us,scenePoint:hs,pointer:us,absolutePointer:hs}},Fn=function(cs){for(var is=arguments.length,us=new Array(is>1?is-1:0),hs=1;hs<is;hs++)us[hs-1]=arguments[hs];return cs.addEventListener(...us)},Ln=function(cs){for(var is=arguments.length,us=new Array(is>1?is-1:0),hs=1;hs<is;hs++)us[hs-1]=arguments[hs];return cs.removeEventListener(...us)},Rn={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class In extends Mn{constructor(is){super(is,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),t(this,"_isClick",void 0),t(this,"textEditingManager",new Pn(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(us=>{this[us]=this[us].bind(this)}),this.addOrRemove(Fn,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(is,us){const hs=this.upperCanvasEl,lo=this._getEventPrefix();is(Jt(hs),"resize",this._onResize),is(hs,lo+"down",this._onMouseDown),is(hs,"".concat(lo,"move"),this._onMouseMove,An),is(hs,"".concat(lo,"out"),this._onMouseOut),is(hs,"".concat(lo,"enter"),this._onMouseEnter),is(hs,"wheel",this._onMouseWheel),is(hs,"contextmenu",this._onContextMenu),is(hs,"click",this._onClick),is(hs,"dblclick",this._onClick),is(hs,"dragstart",this._onDragStart),is(hs,"dragend",this._onDragEnd),is(hs,"dragover",this._onDragOver),is(hs,"dragenter",this._onDragEnter),is(hs,"dragleave",this._onDragLeave),is(hs,"drop",this._onDrop),this.enablePointerEvents||is(hs,"touchstart",this._onTouchStart,An)}removeListeners(){this.addOrRemove(Ln,"remove");const is=this._getEventPrefix(),us=Kt(this.upperCanvasEl);Ln(us,"".concat(is,"up"),this._onMouseUp),Ln(us,"touchend",this._onTouchEnd,An),Ln(us,"".concat(is,"move"),this._onMouseMove,An),Ln(us,"touchmove",this._onMouseMove,An),clearTimeout(this._willAddMouseDown)}_onMouseWheel(is){this.__onMouseWheel(is)}_onMouseOut(is){const us=this._hoveredTarget,hs=s({e:is},jn(this,is));this.fire("mouse:out",s(s({},hs),{},{target:us})),this._hoveredTarget=void 0,us&&us.fire("mouseout",s({},hs)),this._hoveredTargets.forEach(lo=>{this.fire("mouse:out",s(s({},hs),{},{target:lo})),lo&&lo.fire("mouseout",s({},hs))}),this._hoveredTargets=[]}_onMouseEnter(is){this._currentTransform||this.findTarget(is)||(this.fire("mouse:over",s({e:is},jn(this,is))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(is){this._isClick=!1;const us=this.getActiveObject();if(us&&us.onDragStart(is)){this._dragSource=us;const hs={e:is,target:us};return this.fire("dragstart",hs),us.fire("dragstart",hs),void Fn(this.upperCanvasEl,"drag",this._onDragProgress)}oe(is)}_renderDragEffects(is,us,hs){let lo=!1;const co=this._dropTarget;co&&co!==us&&co!==hs&&(co.clearContextTop(),lo=!0),us==null||us.clearContextTop(),hs!==us&&(hs==null||hs.clearContextTop());const uo=this.contextTop;uo.save(),uo.transform(...this.viewportTransform),us&&(uo.save(),us.transform(uo),us.renderDragSourceEffect(is),uo.restore(),lo=!0),hs&&(uo.save(),hs.transform(uo),hs.renderDropTargetEffect(is),uo.restore(),lo=!0),uo.restore(),lo&&(this.contextTopDirty=!0)}_onDragEnd(is){const us=!!is.dataTransfer&&is.dataTransfer.dropEffect!==j,hs=us?this._activeObject:void 0,lo={e:is,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:us,dropTarget:hs};Ln(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",lo),this._dragSource&&this._dragSource.fire("dragend",lo),delete this._dragSource,this._onMouseUp(is)}_onDragProgress(is){const us={e:is,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",us),this._dragSource&&this._dragSource.fire("drag",us)}findDragTargets(is){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(is)),targets:[...this.targets]}}_onDragOver(is){const us="dragover",{target:hs,targets:lo}=this.findDragTargets(is),co=this._dragSource,uo={e:is,target:hs,subTargets:lo,dragSource:co,canDrop:!1,dropTarget:void 0};let ga;this.fire(us,uo),this._fireEnterLeaveEvents(hs,uo),hs&&(hs.canDrop(is)&&(ga=hs),hs.fire(us,uo));for(let ba=0;ba<lo.length;ba++){const xa=lo[ba];xa.canDrop(is)&&(ga=xa),xa.fire(us,uo)}this._renderDragEffects(is,co,ga),this._dropTarget=ga}_onDragEnter(is){const{target:us,targets:hs}=this.findDragTargets(is),lo={e:is,target:us,subTargets:hs,dragSource:this._dragSource};this.fire("dragenter",lo),this._fireEnterLeaveEvents(us,lo)}_onDragLeave(is){const us={e:is,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",us),this._fireEnterLeaveEvents(void 0,us),this._renderDragEffects(is,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(is){const{target:us,targets:hs}=this.findDragTargets(is),lo=this._basicEventHandler("drop:before",s({e:is,target:us,subTargets:hs,dragSource:this._dragSource},jn(this,is)));lo.didDrop=!1,lo.dropTarget=void 0,this._basicEventHandler("drop",lo),this.fire("drop:after",lo)}_onContextMenu(is){const us=this.findTarget(is),hs=this.targets||[],lo=this._basicEventHandler("contextmenu:before",{e:is,target:us,subTargets:hs});return this.stopContextMenu&&oe(is),this._basicEventHandler("contextmenu",lo),!1}_onClick(is){const us=is.detail;us>3||us<2||(this._cacheTransformEventData(is),us==2&&is.type==="dblclick"&&this._handleEvent(is,"dblclick"),us==3&&this._handleEvent(is,"tripleclick"),this._resetTransformEventData())}getPointerId(is){const us=is.changedTouches;return us?us[0]&&us[0].identifier:this.enablePointerEvents?is.pointerId:-1}_isMainEvent(is){return is.isPrimary===!0||is.isPrimary!==!1&&(is.type==="touchend"&&is.touches.length===0||!is.changedTouches||is.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(is){let us=!this.allowTouchScrolling;const hs=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(is)),this.__onMouseDown(is),(this.isDrawingMode||hs&&this._target===hs)&&(us=!0),us&&is.preventDefault(),this._resetTransformEventData();const lo=this.upperCanvasEl,co=this._getEventPrefix(),uo=Kt(lo);Fn(uo,"touchend",this._onTouchEnd,An),us&&Fn(uo,"touchmove",this._onMouseMove,An),Ln(lo,"".concat(co,"down"),this._onMouseDown)}_onMouseDown(is){this.__onMouseDown(is),this._resetTransformEventData();const us=this.upperCanvasEl,hs=this._getEventPrefix();Ln(us,"".concat(hs,"move"),this._onMouseMove,An);const lo=Kt(us);Fn(lo,"".concat(hs,"up"),this._onMouseUp),Fn(lo,"".concat(hs,"move"),this._onMouseMove,An)}_onTouchEnd(is){if(is.touches.length>0)return;this.__onMouseUp(is),this._resetTransformEventData(),delete this.mainTouchId;const us=this._getEventPrefix(),hs=Kt(this.upperCanvasEl);Ln(hs,"touchend",this._onTouchEnd,An),Ln(hs,"touchmove",this._onMouseMove,An),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Fn(this.upperCanvasEl,"".concat(us,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(is){this.__onMouseUp(is),this._resetTransformEventData();const us=this.upperCanvasEl,hs=this._getEventPrefix();if(this._isMainEvent(is)){const lo=Kt(this.upperCanvasEl);Ln(lo,"".concat(hs,"up"),this._onMouseUp),Ln(lo,"".concat(hs,"move"),this._onMouseMove,An),Fn(us,"".concat(hs,"move"),this._onMouseMove,An)}}_onMouseMove(is){const us=this.getActiveObject();!this.allowTouchScrolling&&(!us||!us.shouldStartDragging(is))&&is.preventDefault&&is.preventDefault(),this.__onMouseMove(is)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(is){const us=this.getActiveObject();return!!us!=!!is||us&&is&&us!==is}__onMouseUp(is){var us;this._cacheTransformEventData(is),this._handleEvent(is,"up:before");const hs=this._currentTransform,lo=this._isClick,co=this._target,{button:uo}=is;if(uo)return(this.fireMiddleClick&&uo===1||this.fireRightClick&&uo===2)&&this._handleEvent(is,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(is);if(!this._isMainEvent(is))return;let ga,ba,xa=!1;if(hs&&(this._finalizeCurrentTransform(is),xa=hs.actionPerformed),!lo){const _a=co===this._activeObject;this.handleSelection(is),xa||(xa=this._shouldRender(co)||!_a&&co===this._activeObject)}if(co){const _a=co.findControl(this.getViewportPoint(is),ne(is)),{key:$a,control:xl}=_a||{};if(ba=$a,co.selectable&&co!==this._activeObject&&co.activeOn==="up")this.setActiveObject(co,is),xa=!0;else if(xl){const yl=xl.getMouseUpHandler(is,co,xl);yl&&(ga=this.getScenePoint(is),yl.call(xl,is,hs,ga.x,ga.y))}co.isMoving=!1}if(hs&&(hs.target!==co||hs.corner!==ba)){const _a=hs.target&&hs.target.controls[hs.corner],$a=_a&&_a.getMouseUpHandler(is,hs.target,_a);ga=ga||this.getScenePoint(is),$a&&$a.call(_a,is,hs,ga.x,ga.y)}this._setCursorFromEvent(is,co),this._handleEvent(is,"up"),this._groupSelector=null,this._currentTransform=null,co&&(co.__corner=void 0),xa?this.requestRenderAll():lo||(us=this._activeObject)!==null&&us!==void 0&&us.isEditing||this.renderTop()}_basicEventHandler(is,us){const{target:hs,subTargets:lo=[]}=us;this.fire(is,us),hs&&hs.fire(is,us);for(let co=0;co<lo.length;co++)lo[co]!==hs&&lo[co].fire(is,us);return us}_handleEvent(is,us,hs){const lo=this._target,co=this.targets||[],uo=s(s(s({e:is,target:lo,subTargets:co},jn(this,is)),{},{transform:this._currentTransform},us==="up:before"||us==="up"?{isClick:this._isClick,currentTarget:this.findTarget(is),currentSubTargets:this.targets}:{}),us==="down:before"||us==="down"?hs:{});this.fire("mouse:".concat(us),uo),lo&&lo.fire("mouse".concat(us),uo);for(let ga=0;ga<co.length;ga++)co[ga]!==lo&&co[ga].fire("mouse".concat(us),uo)}_onMouseDownInDrawingMode(is){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(is),this.requestRenderAll());const us=this.getScenePoint(is);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(us,{e:is,pointer:us}),this._handleEvent(is,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(is){if(this._isCurrentlyDrawing){const us=this.getScenePoint(is);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(us,{e:is,pointer:us})}this.setCursor(this.freeDrawingCursor),this._handleEvent(is,"move")}_onMouseUpInDrawingMode(is){const us=this.getScenePoint(is);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:is,pointer:us}):this._isCurrentlyDrawing=!1,this._handleEvent(is,"up")}__onMouseDown(is){this._isClick=!0,this._cacheTransformEventData(is),this._handleEvent(is,"down:before");let us=this._target,hs=!!us&&us===this._activeObject;const{button:lo}=is;if(lo)return(this.fireMiddleClick&&lo===1||this.fireRightClick&&lo===2)&&this._handleEvent(is,"down",{alreadySelected:hs}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(is);if(!this._isMainEvent(is)||this._currentTransform)return;let co=this._shouldRender(us),uo=!1;if(this.handleMultiSelection(is,us)?(us=this._activeObject,uo=!0,co=!0):this._shouldClearSelection(is,us)&&this.discardActiveObject(is),this.selection&&(!us||!us.selectable&&!us.isEditing&&us!==this._activeObject)){const ga=this.getScenePoint(is);this._groupSelector={x:ga.x,y:ga.y,deltaY:0,deltaX:0}}if(hs=!!us&&us===this._activeObject,us){us.selectable&&us.activeOn==="down"&&this.setActiveObject(us,is);const ga=us.findControl(this.getViewportPoint(is),ne(is));if(us===this._activeObject&&(ga||!uo)){this._setupCurrentTransform(is,us,hs);const ba=ga?ga.control:void 0,xa=this.getScenePoint(is),_a=ba&&ba.getMouseDownHandler(is,us,ba);_a&&_a.call(ba,is,this._currentTransform,xa.x,xa.y)}}co&&(this._objectsToRender=void 0),this._handleEvent(is,"down",{alreadySelected:hs}),co&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(is){this._resetTransformEventData(),this._pointer=this.getViewportPoint(is),this._absolutePointer=pe(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(is)}__onMouseMove(is){if(this._isClick=!1,this._cacheTransformEventData(is),this._handleEvent(is,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(is);if(!this._isMainEvent(is))return;const us=this._groupSelector;if(us){const hs=this.getScenePoint(is);us.deltaX=hs.x-us.x,us.deltaY=hs.y-us.y,this.renderTop()}else if(this._currentTransform)this._transformObject(is);else{const hs=this.findTarget(is);this._setCursorFromEvent(is,hs),this._fireOverOutEvents(is,hs)}this.textEditingManager.onMouseMove(is),this._handleEvent(is,"move"),this._resetTransformEventData()}_fireOverOutEvents(is,us){const hs=this._hoveredTarget,lo=this._hoveredTargets,co=this.targets,uo=Math.max(lo.length,co.length);this.fireSyntheticInOutEvents("mouse",{e:is,target:us,oldTarget:hs,fireCanvas:!0});for(let ga=0;ga<uo;ga++)this.fireSyntheticInOutEvents("mouse",{e:is,target:co[ga],oldTarget:lo[ga]});this._hoveredTarget=us,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(is,us){const hs=this._draggedoverTarget,lo=this._hoveredTargets,co=this.targets,uo=Math.max(lo.length,co.length);this.fireSyntheticInOutEvents("drag",s(s({},us),{},{target:is,oldTarget:hs,fireCanvas:!0}));for(let ga=0;ga<uo;ga++)this.fireSyntheticInOutEvents("drag",s(s({},us),{},{target:co[ga],oldTarget:lo[ga]}));this._draggedoverTarget=is}fireSyntheticInOutEvents(is,us){let{target:hs,oldTarget:lo,fireCanvas:co,e:uo}=us,ga=i(us,En);const{targetIn:ba,targetOut:xa,canvasIn:_a,canvasOut:$a}=Rn[is],xl=lo!==hs;if(lo&&xl){const yl=s(s({},ga),{},{e:uo,target:lo,nextTarget:hs},jn(this,uo));co&&this.fire($a,yl),lo.fire(xa,yl)}if(hs&&xl){const yl=s(s({},ga),{},{e:uo,target:hs,previousTarget:lo},jn(this,uo));co&&this.fire(_a,yl),hs.fire(ba,yl)}}__onMouseWheel(is){this._cacheTransformEventData(is),this._handleEvent(is,"wheel"),this._resetTransformEventData()}_transformObject(is){const us=this.getScenePoint(is),hs=this._currentTransform,lo=hs.target,co=lo.group?pe(us,void 0,lo.group.calcTransformMatrix()):us;hs.shiftKey=is.shiftKey,hs.altKey=!!this.centeredKey&&is[this.centeredKey],this._performTransformAction(is,hs,co),hs.actionPerformed&&this.requestRenderAll()}_performTransformAction(is,us,hs){const{action:lo,actionHandler:co,target:uo}=us,ga=!!co&&co(is,us,hs.x,hs.y);ga&&uo.setCoords(),lo==="drag"&&ga&&(us.target.isMoving=!0,this.setCursor(us.target.moveCursor||this.moveCursor)),us.actionPerformed=us.actionPerformed||ga}_setCursorFromEvent(is,us){if(!us)return void this.setCursor(this.defaultCursor);let hs=us.hoverCursor||this.hoverCursor;const lo=Ut(this._activeObject)?this._activeObject:null,co=(!lo||us.group!==lo)&&us.findControl(this.getViewportPoint(is));if(co){const uo=co.control;this.setCursor(uo.cursorStyleHandler(is,uo,us))}else us.subTargetCheck&&this.targets.concat().reverse().map(uo=>{hs=uo.hoverCursor||hs}),this.setCursor(hs)}handleMultiSelection(is,us){const hs=this._activeObject,lo=Ut(hs);if(hs&&this._isSelectionKeyPressed(is)&&this.selection&&us&&us.selectable&&(hs!==us||lo)&&(lo||!us.isDescendantOf(hs)&&!hs.isDescendantOf(us))&&!us.onSelect({e:is})&&!hs.getActiveControl()){if(lo){const co=hs.getObjects();if(us===hs){const uo=this.getViewportPoint(is);if(!(us=this.searchPossibleTargets(co,uo)||this.searchPossibleTargets(this._objects,uo))||!us.selectable)return!1}us.group===hs?(hs.remove(us),this._hoveredTarget=us,this._hoveredTargets=[...this.targets],hs.size()===1&&this._setActiveObject(hs.item(0),is)):(hs.multiSelectAdd(us),this._hoveredTarget=hs,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(co,is)}else{hs.isEditing&&hs.exitEditing();const co=new(tt.getClass("ActiveSelection"))([],{canvas:this});co.multiSelectAdd(hs,us),this._hoveredTarget=co,this._setActiveObject(co,is),this._fireSelectionEvents([hs],is)}return!0}return!1}handleSelection(is){if(!this.selection||!this._groupSelector)return!1;const{x:us,y:hs,deltaX:lo,deltaY:co}=this._groupSelector,uo=new ot(us,hs),ga=uo.add(new ot(lo,co)),ba=uo.min(ga),xa=uo.max(ga).subtract(ba),_a=this.collectObjects({left:ba.x,top:ba.y,width:xa.x,height:xa.y},{includeIntersecting:!this.selectionFullyContained}),$a=uo.eq(ga)?_a[0]?[_a[0]]:[]:_a.length>1?_a.filter(xl=>!xl.onSelect({e:is})).reverse():_a;if($a.length===1)this.setActiveObject($a[0],is);else if($a.length>1){const xl=tt.getClass("ActiveSelection");this.setActiveObject(new xl($a,{canvas:this}),is)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Bn={x1:0,y1:0,x2:0,y2:0},Xn=s(s({},Bn),{},{r1:0,r2:0}),Yn=(cs,is)=>isNaN(cs)&&typeof is=="number"?is:cs,Wn=/^(\d+\.\d+)%|(\d+)%$/;function Vn(cs){return cs&&Wn.test(cs)}function zn(cs,is){const us=typeof cs=="number"?cs:typeof cs=="string"?parseFloat(cs)/(Vn(cs)?100:1):NaN;return ks(0,Yn(us,is),1)}const Gn=/\s*;\s*/,Hn=/\s*:\s*/;function Nn(cs,is){let us,hs;const lo=cs.getAttribute("style");if(lo){const uo=lo.split(Gn);uo[uo.length-1]===""&&uo.pop();for(let ga=uo.length;ga--;){const[ba,xa]=uo[ga].split(Hn).map(_a=>_a.trim());ba==="stop-color"?us=xa:ba==="stop-opacity"&&(hs=xa)}}const co=new Le(us||cs.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:zn(cs.getAttribute("offset"),0),color:co.toRgb(),opacity:Yn(parseFloat(hs||cs.getAttribute("stop-opacity")||""),1)*co.getAlpha()*is}}function Un(cs,is){const us=[],hs=cs.getElementsByTagName("stop"),lo=zn(is,1);for(let co=hs.length;co--;)us.push(Nn(hs[co],lo));return us}function qn(cs){return cs.nodeName==="linearGradient"||cs.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Kn(cs){return cs.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Jn(cs,is){return cs.getAttribute(is)}function Qn(cs,is){return function(us,hs){let lo,{width:co,height:uo,gradientUnits:ga}=hs;return Object.keys(us).reduce((ba,xa)=>{const _a=us[xa];return _a==="Infinity"?lo=1:_a==="-Infinity"?lo=0:(lo=typeof _a=="string"?parseFloat(_a):_a,typeof _a=="string"&&Vn(_a)&&(lo*=.01,ga==="pixels"&&(xa!=="x1"&&xa!=="x2"&&xa!=="r2"||(lo*=co),xa!=="y1"&&xa!=="y2"||(lo*=uo)))),ba[xa]=lo,ba},{})}(qn(cs)==="linear"?function(us){return{x1:Jn(us,"x1")||0,y1:Jn(us,"y1")||0,x2:Jn(us,"x2")||"100%",y2:Jn(us,"y2")||0}}(cs):function(us){return{x1:Jn(us,"fx")||Jn(us,"cx")||"50%",y1:Jn(us,"fy")||Jn(us,"cy")||"50%",r1:0,x2:Jn(us,"cx")||"50%",y2:Jn(us,"cy")||"50%",r2:Jn(us,"r")||"50%"}}(cs),s(s({},is),{},{gradientUnits:Kn(cs)}))}class Zn{constructor(is){const{type:us="linear",gradientUnits:hs="pixels",coords:lo={},colorStops:co=[],offsetX:uo=0,offsetY:ga=0,gradientTransform:ba,id:xa}=is||{};Object.assign(this,{type:us,gradientUnits:hs,coords:s(s({},us==="radial"?Xn:Bn),lo),colorStops:co,offsetX:uo,offsetY:ga,gradientTransform:ba,id:xa?"".concat(xa,"_").concat(ft()):ft()})}addColorStop(is){for(const us in is){const hs=new Le(is[us]);this.colorStops.push({offset:parseFloat(us),color:hs.toRgb(),opacity:hs.getAlpha()})}return this}toObject(is){return s(s({},Yt(this,is)),{},{type:this.type,coords:s({},this.coords),colorStops:this.colorStops.map(us=>s({},us)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(is){let{additionalTransform:us}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const hs=[],lo=this.gradientTransform?this.gradientTransform.concat():T.concat(),co=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",uo=this.colorStops.map($a=>s({},$a)).sort(($a,xl)=>$a.offset-xl.offset);let ga=-this.offsetX,ba=-this.offsetY;var xa;co==="objectBoundingBox"?(ga/=is.width,ba/=is.height):(ga+=is.width/2,ba+=is.height/2),(xa=is)&&typeof xa._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(ga-=is.pathOffset.x,ba-=is.pathOffset.y),lo[4]-=ga,lo[5]-=ba;const _a=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(co,'"'),'gradientTransform="'.concat(us?us+" ":"").concat(zt(lo),'"'),""].join(" ");if(this.type==="linear"){const{x1:$a,y1:xl,x2:yl,y2:wl}=this.coords;hs.push("<linearGradient ",_a,' x1="',$a,'" y1="',xl,'" x2="',yl,'" y2="',wl,`">
`)}else if(this.type==="radial"){const{x1:$a,y1:xl,x2:yl,y2:wl,r1:_l,r2:El}=this.coords,Sl=_l>El;hs.push("<radialGradient ",_a,' cx="',Sl?$a:yl,'" cy="',Sl?xl:wl,'" r="',Sl?_l:El,'" fx="',Sl?yl:$a,'" fy="',Sl?wl:xl,`">
`),Sl&&(uo.reverse(),uo.forEach(Tl=>{Tl.offset=1-Tl.offset}));const Cl=Math.min(_l,El);if(Cl>0){const Tl=Cl/Math.max(_l,El);uo.forEach(Dl=>{Dl.offset+=Tl*(1-Dl.offset)})}}return uo.forEach($a=>{let{color:xl,offset:yl,opacity:wl}=$a;hs.push("<stop ",'offset="',100*yl+"%",'" style="stop-color:',xl,wl!==void 0?";stop-opacity: "+wl:";",`"/>
`)}),hs.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),hs.join("")}toLive(is){const{x1:us,y1:hs,x2:lo,y2:co,r1:uo,r2:ga}=this.coords,ba=this.type==="linear"?is.createLinearGradient(us,hs,lo,co):is.createRadialGradient(us,hs,uo,lo,co,ga);return this.colorStops.forEach(xa=>{let{color:_a,opacity:$a,offset:xl}=xa;ba.addColorStop(xl,$a!==void 0?new Le(_a).setAlpha($a).toRgba():_a)}),ba}static async fromObject(is){const{colorStops:us,gradientTransform:hs}=is;return new this(s(s({},is),{},{colorStops:us?us.map(lo=>s({},lo)):void 0,gradientTransform:hs?[...hs]:void 0}))}static fromElement(is,us,hs){const lo=Kn(is),co=us._findCenterFromElement();return new this(s({id:is.getAttribute("id")||void 0,type:qn(is),coords:Qn(is,{width:hs.viewBoxWidth||hs.width,height:hs.viewBoxHeight||hs.height}),colorStops:Un(is,hs.opacity),gradientUnits:lo,gradientTransform:br(is.getAttribute("gradientTransform")||"")},lo==="pixels"?{offsetX:us.width/2-co.x,offsetY:us.height/2-co.y}:{offsetX:0,offsetY:0}))}}t(Zn,"type","Gradient"),tt.setClass(Zn,"gradient"),tt.setClass(Zn,"linear"),tt.setClass(Zn,"radial");const $n=["type","source","patternTransform"];class to{get type(){return"pattern"}set type(is){a("warn","Setting type has no effect",is)}constructor(is){t(this,"repeat","repeat"),t(this,"offsetX",0),t(this,"offsetY",0),t(this,"crossOrigin",""),this.id=ft(),Object.assign(this,is)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(is){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?is.createPattern(this.source,this.repeat):null}toObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:us,crossOrigin:hs}=this;return s(s({},Yt(this,is)),{},{type:"pattern",source:this.sourceToString(),repeat:us,crossOrigin:hs,offsetX:Vt(this.offsetX,o.NUM_FRACTION_DIGITS),offsetY:Vt(this.offsetY,o.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(is){let{width:us,height:hs}=is;const{source:lo,repeat:co,id:uo}=this,ga=Yn(this.offsetX/us,0),ba=Yn(this.offsetY/hs,0),xa=co==="repeat-y"||co==="no-repeat"?1+Math.abs(ga||0):Yn(lo.width/us,0),_a=co==="repeat-x"||co==="no-repeat"?1+Math.abs(ba||0):Yn(lo.height/hs,0);return['<pattern id="SVGID_'.concat(uo,'" x="').concat(ga,'" y="').concat(ba,'" width="').concat(xa,'" height="').concat(_a,'">'),'<image x="0" y="0" width="'.concat(lo.width,'" height="').concat(lo.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(is,us){let{type:hs,source:lo,patternTransform:co}=is,uo=i(is,$n);const ga=await It(lo,s(s({},us),{},{crossOrigin:uo.crossOrigin}));return new this(s(s({},uo),{},{patternTransform:co&&co.slice(0),source:ga}))}}t(to,"type","Pattern"),tt.setClass(to),tt.setClass(to,"pattern");class eo{constructor(is){t(this,"color","rgb(0, 0, 0)"),t(this,"width",1),t(this,"shadow",null),t(this,"strokeLineCap","round"),t(this,"strokeLineJoin","round"),t(this,"strokeMiterLimit",10),t(this,"strokeDashArray",null),t(this,"limitedToCanvasSize",!1),this.canvas=is}_setBrushStyles(is){is.strokeStyle=this.color,is.lineWidth=this.width,is.lineCap=this.strokeLineCap,is.miterLimit=this.strokeMiterLimit,is.lineJoin=this.strokeLineJoin,is.setLineDash(this.strokeDashArray||[])}_saveAndTransform(is){const us=this.canvas.viewportTransform;is.save(),is.transform(us[0],us[1],us[2],us[3],us[4],us[5])}needsFullRender(){return new Le(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const is=this.canvas,us=this.shadow,hs=is.contextTop,lo=is.getZoom()*is.getRetinaScaling();hs.shadowColor=us.color,hs.shadowBlur=us.blur*lo,hs.shadowOffsetX=us.offsetX*lo,hs.shadowOffsetY=us.offsetY*lo}_resetShadow(){const is=this.canvas.contextTop;is.shadowColor="",is.shadowBlur=is.shadowOffsetX=is.shadowOffsetY=0}_isOutSideCanvas(is){return is.x<0||is.x>this.canvas.getWidth()||is.y<0||is.y>this.canvas.getHeight()}}const so=["path","left","top"],io=["d"];class ro extends ji{constructor(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:hs,left:lo,top:co}=us,uo=i(us,so);super(),Object.assign(this,ro.ownDefaults),this.setOptions(uo),this._setPath(is||[],!0),typeof lo=="number"&&this.set(M,lo),typeof co=="number"&&this.set(P,co)}_setPath(is,us){this.path=sn(Array.isArray(is)?is:xn(is)),this.setBoundingBox(us)}_findCenterFromElement(){const is=this._calcBoundsFromPath();return new ot(is.left+is.width/2,is.top+is.height/2)}_renderPathCommands(is){const us=-this.pathOffset.x,hs=-this.pathOffset.y;is.beginPath();for(const lo of this.path)switch(lo[0]){case"L":is.lineTo(lo[1]+us,lo[2]+hs);break;case"M":is.moveTo(lo[1]+us,lo[2]+hs);break;case"C":is.bezierCurveTo(lo[1]+us,lo[2]+hs,lo[3]+us,lo[4]+hs,lo[5]+us,lo[6]+hs);break;case"Q":is.quadraticCurveTo(lo[1]+us,lo[2]+hs,lo[3]+us,lo[4]+hs);break;case"Z":is.closePath()}}_render(is){this._renderPathCommands(is),this._renderPaintInOrder(is)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return s(s({},super.toObject(is)),{},{path:this.path.map(us=>us.slice())})}toDatalessObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const us=this.toObject(is);return this.sourcePath&&(delete us.path,us.sourcePath=this.sourcePath),us}_toSVG(){const is=bn(this.path,o.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(is,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const is=o.NUM_FRACTION_DIGITS;return" translate(".concat(Vt(-this.pathOffset.x,is),", ").concat(Vt(-this.pathOffset.y,is),")")}toClipPathSVG(is){const us=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:is,additionalTransform:us})}toSVG(is){const us=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:is,additionalTransform:us})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(is){const{width:us,height:hs,pathOffset:lo}=this._calcDimensions();this.set({width:us,height:hs,pathOffset:lo}),is&&this.setPositionByOrigin(lo,D,D)}_calcBoundsFromPath(){const is=[];let us=0,hs=0,lo=0,co=0;for(const uo of this.path)switch(uo[0]){case"L":lo=uo[1],co=uo[2],is.push({x:us,y:hs},{x:lo,y:co});break;case"M":lo=uo[1],co=uo[2],us=lo,hs=co;break;case"C":is.push(...tn(lo,co,uo[1],uo[2],uo[3],uo[4],uo[5],uo[6])),lo=uo[5],co=uo[6];break;case"Q":is.push(...tn(lo,co,uo[1],uo[2],uo[1],uo[2],uo[3],uo[4])),lo=uo[3],co=uo[4];break;case"Z":lo=us,co=hs}return ae(is)}_calcDimensions(){const is=this._calcBoundsFromPath();return s(s({},is),{},{pathOffset:new ot(is.left+is.width/2,is.top+is.height/2)})}static fromObject(is){return this._fromObject(is,{extraParam:"path"})}static async fromElement(is,us,hs){const lo=Dr(is,this.ATTRIBUTE_NAMES,hs),{d:co}=lo;return new this(co,s(s(s({},i(lo,io)),us),{},{left:void 0,top:void 0}))}}t(ro,"type","Path"),t(ro,"cacheProperties",[...Ms,"path","fillRule"]),t(ro,"ATTRIBUTE_NAMES",[...Ji,"d"]),tt.setClass(ro),tt.setSVGClass(ro);class no extends eo{constructor(is){super(is),t(this,"decimate",.4),t(this,"drawStraightLine",!1),t(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(is,us,hs){const lo=us.midPointFrom(hs);return is.quadraticCurveTo(us.x,us.y,lo.x,lo.y),lo}onMouseDown(is,us){let{e:hs}=us;this.canvas._isMainEvent(hs)&&(this.drawStraightLine=!!this.straightLineKey&&hs[this.straightLineKey],this._prepareForDrawing(is),this._addPoint(is),this._render())}onMouseMove(is,us){let{e:hs}=us;if(this.canvas._isMainEvent(hs)&&(this.drawStraightLine=!!this.straightLineKey&&hs[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(is))&&this._addPoint(is)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const lo=this._points,co=lo.length,uo=this.canvas.contextTop;this._saveAndTransform(uo),this.oldEnd&&(uo.beginPath(),uo.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=no.drawSegment(uo,lo[co-2],lo[co-1]),uo.stroke(),uo.restore()}}onMouseUp(is){let{e:us}=is;return!this.canvas._isMainEvent(us)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(is){this._reset(),this._addPoint(is),this.canvas.contextTop.moveTo(is.x,is.y)}_addPoint(is){return!(this._points.length>1&&is.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(is),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,us=this._points[0],hs=this._points[1];if(this._saveAndTransform(is),is.beginPath(),this._points.length===2&&us.x===hs.x&&us.y===hs.y){const lo=this.width/1e3;us.x-=lo,hs.x+=lo}is.moveTo(us.x,us.y);for(let lo=1;lo<this._points.length;lo++)no.drawSegment(is,us,hs),us=this._points[lo],hs=this._points[lo+1];is.lineTo(us.x,us.y),is.stroke(),is.restore()}convertPointsToSVGPath(is){const us=this.width/1e3;return Cn(is,us)}createPath(is){const us=new ro(is,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,us.shadow=new Os(this.shadow)),us}decimatePoints(is,us){if(is.length<=2)return is;let hs,lo=is[0];const co=this.canvas.getZoom(),uo=Math.pow(us/co,2),ga=is.length-1,ba=[lo];for(let xa=1;xa<ga-1;xa++)hs=Math.pow(lo.x-is[xa].x,2)+Math.pow(lo.y-is[xa].y,2),hs>=uo&&(lo=is[xa],ba.push(lo));return ba.push(is[ga]),ba}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const is=this.convertPointsToSVGPath(this._points);if(function(hs){return bn(hs)==="M 0 0 Q 0 0 0 0 L 0 0"}(is))return void this.canvas.requestRenderAll();const us=this.createPath(is);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:us}),this.canvas.add(us),this.canvas.requestRenderAll(),us.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:us})}}const oo=["left","top","radius"],ao=["radius","startAngle","endAngle","counterClockwise"];class ho extends ji{static getDefaults(){return s(s({},super.getDefaults()),ho.ownDefaults)}constructor(is){super(),Object.assign(this,ho.ownDefaults),this.setOptions(is)}_set(is,us){return super._set(is,us),is==="radius"&&this.setRadius(us),this}_render(is){is.beginPath(),is.arc(0,0,this.radius,xt(this.startAngle),xt(this.endAngle),this.counterClockwise),this._renderPaintInOrder(is)}getRadiusX(){return this.get("radius")*this.get(H)}getRadiusY(){return this.get("radius")*this.get(N)}setRadius(is){this.radius=is,this.set({width:2*is,height:2*is})}toObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...ao,...is])}_toSVG(){const is=(this.endAngle-this.startAngle)%360;if(is===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:us}=this,hs=xt(this.startAngle),lo=xt(this.endAngle),co=rt(hs)*us,uo=nt(hs)*us,ga=rt(lo)*us,ba=nt(lo)*us,xa=is>180?1:0,_a=this.counterClockwise?0:1;return['<path d="M '.concat(co," ").concat(uo," A ").concat(us," ").concat(us," 0 ").concat(xa," ").concat(_a," ").concat(ga," ").concat(ba,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(is,us,hs){const lo=Dr(is,this.ATTRIBUTE_NAMES,hs),{left:co=0,top:uo=0,radius:ga=0}=lo;return new this(s(s({},i(lo,oo)),{},{radius:ga,left:co-ga,top:uo-ga}))}static fromObject(is){return super._fromObject(is)}}t(ho,"type","Circle"),t(ho,"cacheProperties",[...Ms,...ao]),t(ho,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),t(ho,"ATTRIBUTE_NAMES",["cx","cy","r",...Ji]),tt.setClass(ho),tt.setSVGClass(ho);const go=["x1","y1","x2","y2"],fo=["x1","y1","x2","y2"],po=["x1","x2","y1","y2"];class mo extends ji{constructor(){let[is,us,hs,lo]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],co=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,mo.ownDefaults),this.setOptions(co),this.x1=is,this.x2=hs,this.y1=us,this.y2=lo,this._setWidthHeight();const{left:uo,top:ga}=co;typeof uo=="number"&&this.set(M,uo),typeof ga=="number"&&this.set(P,ga)}_setWidthHeight(){const{x1:is,y1:us,x2:hs,y2:lo}=this;this.width=Math.abs(hs-is),this.height=Math.abs(lo-us);const{left:co,top:uo,width:ga,height:ba}=ae([{x:is,y:us},{x:hs,y:lo}]),xa=new ot(co+ga/2,uo+ba/2);this.setPositionByOrigin(xa,D,D)}_set(is,us){return super._set(is,us),po.includes(is)&&this._setWidthHeight(),this}_render(is){is.beginPath();const us=this.calcLinePoints();is.moveTo(us.x1,us.y1),is.lineTo(us.x2,us.y2),is.lineWidth=this.strokeWidth;const hs=is.strokeStyle;var lo;Gt(this.stroke)?is.strokeStyle=this.stroke.toLive(is):is.strokeStyle=(lo=this.stroke)!==null&&lo!==void 0?lo:is.fillStyle,this.stroke&&this._renderStroke(is),is.strokeStyle=hs}_findCenterFromElement(){return new ot((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return s(s({},super.toObject(is)),this.calcLinePoints())}_getNonTransformedDimensions(){const is=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(is.y-=this.strokeWidth),this.height===0&&(is.x-=this.strokeWidth)),is}calcLinePoints(){const{x1:is,x2:us,y1:hs,y2:lo,width:co,height:uo}=this,ga=is<=us?-1:1,ba=hs<=lo?-1:1;return{x1:ga*co/2,x2:ga*-co/2,y1:ba*uo/2,y2:ba*-uo/2}}_toSVG(){const{x1:is,x2:us,y1:hs,y2:lo}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(is,'" y1="').concat(hs,'" x2="').concat(us,'" y2="').concat(lo,`" />
`)]}static async fromElement(is,us,hs){const lo=Dr(is,this.ATTRIBUTE_NAMES,hs),{x1:co=0,y1:uo=0,x2:ga=0,y2:ba=0}=lo;return new this([co,uo,ga,ba],i(lo,go))}static fromObject(is){let{x1:us,y1:hs,x2:lo,y2:co}=is,uo=i(is,fo);return this._fromObject(s(s({},uo),{},{points:[us,hs,lo,co]}),{extraParam:"points"})}}t(mo,"type","Line"),t(mo,"cacheProperties",[...Ms,...po]),t(mo,"ATTRIBUTE_NAMES",Ji.concat(po)),tt.setClass(mo),tt.setSVGClass(mo);class vo extends ji{static getDefaults(){return s(s({},super.getDefaults()),vo.ownDefaults)}constructor(is){super(),Object.assign(this,vo.ownDefaults),this.setOptions(is)}_render(is){const us=this.width/2,hs=this.height/2;is.beginPath(),is.moveTo(-us,hs),is.lineTo(0,-hs),is.lineTo(us,hs),is.closePath(),this._renderPaintInOrder(is)}_toSVG(){const is=this.width/2,us=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-is," ").concat(us,",0 ").concat(-us,",").concat(is," ").concat(us),'" />']}}t(vo,"type","Triangle"),t(vo,"ownDefaults",{width:100,height:100}),tt.setClass(vo),tt.setSVGClass(vo);const yo=["rx","ry"];class _o extends ji{static getDefaults(){return s(s({},super.getDefaults()),_o.ownDefaults)}constructor(is){super(),Object.assign(this,_o.ownDefaults),this.setOptions(is)}_set(is,us){switch(super._set(is,us),is){case"rx":this.rx=us,this.set("width",2*us);break;case"ry":this.ry=us,this.set("height",2*us)}return this}getRx(){return this.get("rx")*this.get(H)}getRy(){return this.get("ry")*this.get(N)}toObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...yo,...is])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(is){is.beginPath(),is.save(),is.transform(1,0,0,this.ry/this.rx,0,0),is.arc(0,0,this.rx,0,S,!1),is.restore(),this._renderPaintInOrder(is)}static async fromElement(is,us,hs){const lo=Dr(is,this.ATTRIBUTE_NAMES,hs);return lo.left=(lo.left||0)-lo.rx,lo.top=(lo.top||0)-lo.ry,new this(lo)}}function xo(cs){if(!cs)return[];const is=cs.replace(/,/g," ").trim().split(/\s+/),us=[];for(let hs=0;hs<is.length;hs+=2)us.push({x:parseFloat(is[hs]),y:parseFloat(is[hs+1])});return us}t(_o,"type","Ellipse"),t(_o,"cacheProperties",[...Ms,...yo]),t(_o,"ownDefaults",{rx:0,ry:0}),t(_o,"ATTRIBUTE_NAMES",[...Ji,"cx","cy","rx","ry"]),tt.setClass(_o),tt.setSVGClass(_o);const Co=["left","top"],bo={exactBoundingBox:!1};class So extends ji{static getDefaults(){return s(s({},super.getDefaults()),So.ownDefaults)}constructor(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),t(this,"strokeDiff",void 0),Object.assign(this,So.ownDefaults),this.setOptions(us),this.points=is;const{left:hs,top:lo}=us;this.initialized=!0,this.setBoundingBox(!0),typeof hs=="number"&&this.set(M,hs),typeof lo=="number"&&this.set(P,lo)}isOpen(){return!0}_projectStrokeOnPoints(is){return Xi(this.points,is,this.isOpen())}_calcDimensions(is){is=s({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},is||{});const us=this.exactBoundingBox?this._projectStrokeOnPoints(is).map(xa=>xa.projectedPoint):this.points;if(us.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new ot,strokeOffset:new ot,strokeDiff:new ot};const hs=ae(us),lo=Lt(s(s({},is),{},{scaleX:1,scaleY:1})),co=ae(this.points.map(xa=>St(xa,lo,!0))),uo=new ot(this.scaleX,this.scaleY);let ga=hs.left+hs.width/2,ba=hs.top+hs.height/2;return this.exactBoundingBox&&(ga-=ba*Math.tan(xt(this.skewX)),ba-=ga*Math.tan(xt(this.skewY))),s(s({},hs),{},{pathOffset:new ot(ga,ba),strokeOffset:new ot(co.left,co.top).subtract(new ot(hs.left,hs.top)).multiply(uo),strokeDiff:new ot(hs.width,hs.height).subtract(new ot(co.width,co.height)).multiply(uo)})}_findCenterFromElement(){const is=ae(this.points);return new ot(is.left+is.width/2,is.top+is.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(is){const{left:us,top:hs,width:lo,height:co,pathOffset:uo,strokeOffset:ga,strokeDiff:ba}=this._calcDimensions();this.set({width:lo,height:co,pathOffset:uo,strokeOffset:ga,strokeDiff:ba}),is&&this.setPositionByOrigin(new ot(us+lo/2,hs+co/2),D,D)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new ot(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let uo;if(Object.keys(is).some(ga=>this.strokeUniform||this.constructor.layoutProperties.includes(ga))){var us,hs;const{width:ga,height:ba}=this._calcDimensions(is);uo=new ot((us=is.width)!==null&&us!==void 0?us:ga,(hs=is.height)!==null&&hs!==void 0?hs:ba)}else{var lo,co;uo=new ot((lo=is.width)!==null&&lo!==void 0?lo:this.width,(co=is.height)!==null&&co!==void 0?co:this.height)}return uo.multiply(new ot(is.scaleX||this.scaleX,is.scaleY||this.scaleY))}return super._getTransformedDimensions(is)}_set(is,us){const hs=this.initialized&&this[is]!==us,lo=super._set(is,us);return this.exactBoundingBox&&hs&&((is===H||is===N)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(is))&&this.setDimensions(),lo}toObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return s(s({},super.toObject(is)),{},{points:this.points.map(us=>{let{x:hs,y:lo}=us;return{x:hs,y:lo}})})}_toSVG(){const is=[],us=this.pathOffset.x,hs=this.pathOffset.y,lo=o.NUM_FRACTION_DIGITS;for(let co=0,uo=this.points.length;co<uo;co++)is.push(Vt(this.points[co].x-us,lo),",",Vt(this.points[co].y-hs,lo)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(is.join(""),`" />
`)]}_render(is){const us=this.points.length,hs=this.pathOffset.x,lo=this.pathOffset.y;if(us&&!isNaN(this.points[us-1].y)){is.beginPath(),is.moveTo(this.points[0].x-hs,this.points[0].y-lo);for(let co=0;co<us;co++){const uo=this.points[co];is.lineTo(uo.x-hs,uo.y-lo)}!this.isOpen()&&is.closePath(),this._renderPaintInOrder(is)}}complexity(){return this.points.length}static async fromElement(is,us,hs){return new this(xo(is.getAttribute("points")),s(s({},i(Dr(is,this.ATTRIBUTE_NAMES,hs),Co)),us))}static fromObject(is){return this._fromObject(is,{extraParam:"points"})}}t(So,"ownDefaults",bo),t(So,"type","Polyline"),t(So,"layoutProperties",[U,q,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),t(So,"cacheProperties",[...Ms,"points"]),t(So,"ATTRIBUTE_NAMES",[...Ji]),tt.setClass(So),tt.setSVGClass(So);class wo extends So{isOpen(){return!1}}t(wo,"ownDefaults",bo),t(wo,"type","Polygon"),tt.setClass(wo),tt.setSVGClass(wo);class To extends ji{isEmptyStyles(is){if(!this.styles||is!==void 0&&!this.styles[is])return!0;const us=is===void 0?this.styles:{line:this.styles[is]};for(const hs in us)for(const lo in us[hs])for(const co in us[hs][lo])return!1;return!0}styleHas(is,us){if(!this.styles||us!==void 0&&!this.styles[us])return!1;const hs=us===void 0?this.styles:{0:this.styles[us]};for(const lo in hs)for(const co in hs[lo])if(hs[lo][co][is]!==void 0)return!0;return!1}cleanStyle(is){if(!this.styles)return!1;const us=this.styles;let hs,lo,co=0,uo=!0,ga=0;for(const ba in us){hs=0;for(const xa in us[ba]){const _a=us[ba][xa]||{};co++,_a[is]!==void 0?(lo?_a[is]!==lo&&(uo=!1):lo=_a[is],_a[is]===this[is]&&delete _a[is]):uo=!1,Object.keys(_a).length!==0?hs++:delete us[ba][xa]}hs===0&&delete us[ba]}for(let ba=0;ba<this._textLines.length;ba++)ga+=this._textLines[ba].length;uo&&co===ga&&(this[is]=lo,this.removeStyle(is))}removeStyle(is){if(!this.styles)return;const us=this.styles;let hs,lo,co;for(lo in us){for(co in hs=us[lo],hs)delete hs[co][is],Object.keys(hs[co]).length===0&&delete hs[co];Object.keys(hs).length===0&&delete us[lo]}}_extendStyles(is,us){const{lineIndex:hs,charIndex:lo}=this.get2DCursorLocation(is);this._getLineStyle(hs)||this._setLineStyle(hs);const co=Wt(s(s({},this._getStyleDeclaration(hs,lo)),us),uo=>uo!==void 0);this._setStyleDeclaration(hs,lo,co)}getSelectionStyles(is,us,hs){const lo=[];for(let co=is;co<(us||is);co++)lo.push(this.getStyleAtPosition(co,hs));return lo}getStyleAtPosition(is,us){const{lineIndex:hs,charIndex:lo}=this.get2DCursorLocation(is);return us?this.getCompleteStyleDeclaration(hs,lo):this._getStyleDeclaration(hs,lo)}setSelectionStyles(is,us,hs){for(let lo=us;lo<(hs||us);lo++)this._extendStyles(lo,is);this._forceClearCache=!0}_getStyleDeclaration(is,us){var hs;const lo=this.styles&&this.styles[is];return lo&&(hs=lo[us])!==null&&hs!==void 0?hs:{}}getCompleteStyleDeclaration(is,us){return s(s({},Yt(this,this.constructor._styleProperties)),this._getStyleDeclaration(is,us))}_setStyleDeclaration(is,us,hs){this.styles[is][us]=hs}_deleteStyleDeclaration(is,us){delete this.styles[is][us]}_getLineStyle(is){return!!this.styles[is]}_setLineStyle(is){this.styles[is]={}}_deleteLineStyle(is){delete this.styles[is]}}t(To,"_styleProperties",Ne);const Oo=/  +/g,ko=/"/g;function Do(cs,is,us,hs,lo){return"		".concat(function(co,uo){let{left:ga,top:ba,width:xa,height:_a}=uo,$a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o.NUM_FRACTION_DIGITS;const xl=Be(K,co,!1),[yl,wl,_l,El]=[ga,ba,xa,_a].map(Sl=>Vt(Sl,$a));return"<rect ".concat(xl,' x="').concat(yl,'" y="').concat(wl,'" width="').concat(_l,'" height="').concat(El,'"></rect>')}(cs,{left:is,top:us,width:hs,height:lo}),`
`)}const Mo=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Po;class Eo extends To{static getDefaults(){return s(s({},super.getDefaults()),Eo.ownDefaults)}constructor(is,us){super(),t(this,"__charBounds",[]),Object.assign(this,Eo.ownDefaults),this.setOptions(us),this.styles||(this.styles={}),this.text=is,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const is=this.path;is&&(is.segmentsInfo=fn(is.path))}_splitText(){const is=this._splitTextIntoLines(this.text);return this.textLines=is.lines,this._textLines=is.graphemeLines,this._unwrappedTextLines=is._unwrappedLines,this._text=is.graphemeText,is}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(qe)&&this.enlargeSpaces()}enlargeSpaces(){let is,us,hs,lo,co,uo,ga;for(let ba=0,xa=this._textLines.length;ba<xa;ba++)if((this.textAlign===qe||ba!==xa-1&&!this.isEndOfWrapping(ba))&&(lo=0,co=this._textLines[ba],us=this.getLineWidth(ba),us<this.width&&(ga=this.textLines[ba].match(this._reSpacesAndTabs)))){hs=ga.length,is=(this.width-us)/hs;for(let _a=0;_a<=co.length;_a++)uo=this.__charBounds[ba][_a],this._reSpaceAndTab.test(co[_a])?(uo.width+=is,uo.kernedWidth+=is,uo.left+=lo,lo+=is):uo.left+=lo}}isEndOfWrapping(is){return is===this._textLines.length-1}missingNewlineOffset(is){return 1}get2DCursorLocation(is,us){const hs=us?this._unwrappedTextLines:this._textLines;let lo;for(lo=0;lo<hs.length;lo++){if(is<=hs[lo].length)return{lineIndex:lo,charIndex:is};is-=hs[lo].length+this.missingNewlineOffset(lo,us)}return{lineIndex:lo-1,charIndex:hs[lo-1].length<is?hs[lo-1].length:is}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const is=super._getCacheCanvasDimensions(),us=this.fontSize;return is.width+=us*is.zoomX,is.height+=us*is.zoomY,is}_render(is){const us=this.path;us&&!us.isNotVisible()&&us._render(is),this._setTextStyles(is),this._renderTextLinesBackground(is),this._renderTextDecoration(is,"underline"),this._renderText(is),this._renderTextDecoration(is,"overline"),this._renderTextDecoration(is,"linethrough")}_renderText(is){this.paintFirst===J?(this._renderTextStroke(is),this._renderTextFill(is)):(this._renderTextFill(is),this._renderTextStroke(is))}_setTextStyles(is,us,hs){if(is.textBaseline="alphabetic",this.path)switch(this.pathAlign){case D:is.textBaseline="middle";break;case"ascender":is.textBaseline=P;break;case"descender":is.textBaseline=E}is.font=this._getFontDeclaration(us,hs)}calcTextWidth(){let is=this.getLineWidth(0);for(let us=1,hs=this._textLines.length;us<hs;us++){const lo=this.getLineWidth(us);lo>is&&(is=lo)}return is}_renderTextLine(is,us,hs,lo,co,uo){this._renderChars(is,us,hs,lo,co,uo)}_renderTextLinesBackground(is){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const us=is.fillStyle,hs=this._getLeftOffset();let lo=this._getTopOffset();for(let co=0,uo=this._textLines.length;co<uo;co++){const ga=this.getHeightOfLine(co);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",co)){lo+=ga;continue}const ba=this._textLines[co].length,xa=this._getLineLeftOffset(co);let _a,$a,xl=0,yl=0,wl=this.getValueOfPropertyAt(co,0,"textBackgroundColor");for(let _l=0;_l<ba;_l++){const El=this.__charBounds[co][_l];$a=this.getValueOfPropertyAt(co,_l,"textBackgroundColor"),this.path?(is.save(),is.translate(El.renderLeft,El.renderTop),is.rotate(El.angle),is.fillStyle=$a,$a&&is.fillRect(-El.width/2,-ga/this.lineHeight*(1-this._fontSizeFraction),El.width,ga/this.lineHeight),is.restore()):$a!==wl?(_a=hs+xa+yl,this.direction==="rtl"&&(_a=this.width-_a-xl),is.fillStyle=wl,wl&&is.fillRect(_a,lo,xl,ga/this.lineHeight),yl=El.left,xl=El.width,wl=$a):xl+=El.kernedWidth}$a&&!this.path&&(_a=hs+xa+yl,this.direction==="rtl"&&(_a=this.width-_a-xl),is.fillStyle=$a,is.fillRect(_a,lo,xl,ga/this.lineHeight)),lo+=ga}is.fillStyle=us,this._removeShadow(is)}_measureChar(is,us,hs,lo){const co=_.getFontCache(us),uo=this._getFontDeclaration(us),ga=hs+is,ba=hs&&uo===this._getFontDeclaration(lo),xa=us.fontSize/this.CACHE_FONT_SIZE;let _a,$a,xl,yl;if(hs&&co[hs]!==void 0&&(xl=co[hs]),co[is]!==void 0&&(yl=_a=co[is]),ba&&co[ga]!==void 0&&($a=co[ga],yl=$a-xl),_a===void 0||xl===void 0||$a===void 0){const wl=function(){return Po||(Po=vt({width:0,height:0}).getContext("2d")),Po}();this._setTextStyles(wl,us,!0),_a===void 0&&(yl=_a=wl.measureText(is).width,co[is]=_a),xl===void 0&&ba&&hs&&(xl=wl.measureText(hs).width,co[hs]=xl),ba&&$a===void 0&&($a=wl.measureText(ga).width,co[ga]=$a,yl=$a-xl)}return{width:_a*xa,kernedWidth:yl*xa}}getHeightOfChar(is,us){return this.getValueOfPropertyAt(is,us,"fontSize")}measureLine(is){const us=this._measureLine(is);return this.charSpacing!==0&&(us.width-=this._getWidthOfCharSpacing()),us.width<0&&(us.width=0),us}_measureLine(is){let us,hs,lo=0;const co=this.pathSide===A,uo=this.path,ga=this._textLines[is],ba=ga.length,xa=new Array(ba);this.__charBounds[is]=xa;for(let _a=0;_a<ba;_a++){const $a=ga[_a];hs=this._getGraphemeBox($a,is,_a,us),xa[_a]=hs,lo+=hs.kernedWidth,us=$a}if(xa[ba]={left:hs?hs.left+hs.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},uo&&uo.segmentsInfo){let _a=0;const $a=uo.segmentsInfo[uo.segmentsInfo.length-1].length;switch(this.textAlign){case M:_a=co?$a-lo:0;break;case D:_a=($a-lo)/2;break;case A:_a=co?0:$a-lo}_a+=this.pathStartOffset*(co?-1:1);for(let xl=co?ba-1:0;co?xl>=0:xl<ba;co?xl--:xl++)hs=xa[xl],_a>$a?_a%=$a:_a<0&&(_a+=$a),this._setGraphemeOnPath(_a,hs),_a+=hs.kernedWidth}return{width:lo,numOfSpaces:0}}_setGraphemeOnPath(is,us){const hs=is+us.kernedWidth/2,lo=this.path,co=pn(lo.path,hs,lo.segmentsInfo);us.renderLeft=co.x-lo.pathOffset.x,us.renderTop=co.y-lo.pathOffset.y,us.angle=co.angle+(this.pathSide===A?Math.PI:0)}_getGraphemeBox(is,us,hs,lo,co){const uo=this.getCompleteStyleDeclaration(us,hs),ga=lo?this.getCompleteStyleDeclaration(us,hs-1):{},ba=this._measureChar(is,uo,lo,ga);let xa,_a=ba.kernedWidth,$a=ba.width;this.charSpacing!==0&&(xa=this._getWidthOfCharSpacing(),$a+=xa,_a+=xa);const xl={width:$a,left:0,height:uo.fontSize,kernedWidth:_a,deltaY:uo.deltaY};if(hs>0&&!co){const yl=this.__charBounds[us][hs-1];xl.left=yl.left+yl.width+ba.kernedWidth-ba.width}return xl}getHeightOfLine(is){if(this.__lineHeights[is])return this.__lineHeights[is];let us=this.getHeightOfChar(is,0);for(let hs=1,lo=this._textLines[is].length;hs<lo;hs++)us=Math.max(this.getHeightOfChar(is,hs),us);return this.__lineHeights[is]=us*this.lineHeight*this._fontSizeMult}calcTextHeight(){let is,us=0;for(let hs=0,lo=this._textLines.length;hs<lo;hs++)is=this.getHeightOfLine(hs),us+=hs===lo-1?is/this.lineHeight:is;return us}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(is,us){is.save();let hs=0;const lo=this._getLeftOffset(),co=this._getTopOffset();for(let uo=0,ga=this._textLines.length;uo<ga;uo++){const ba=this.getHeightOfLine(uo),xa=ba/this.lineHeight,_a=this._getLineLeftOffset(uo);this._renderTextLine(us,is,this._textLines[uo],lo+_a,co+hs+xa,uo),hs+=ba}is.restore()}_renderTextFill(is){(this.fill||this.styleHas(K))&&this._renderTextCommon(is,"fillText")}_renderTextStroke(is){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(is),is.save(),this._setLineDash(is,this.strokeDashArray),is.beginPath(),this._renderTextCommon(is,"strokeText"),is.closePath(),is.restore())}_renderChars(is,us,hs,lo,co,uo){const ga=this.getHeightOfLine(uo),ba=this.textAlign.includes(qe),xa=this.path,_a=!ba&&this.charSpacing===0&&this.isEmptyStyles(uo)&&!xa,$a=this.direction==="ltr",xl=this.direction==="ltr"?1:-1,yl=us.direction;let wl,_l,El,Sl,Cl,Tl="",Dl=0;if(us.save(),yl!==this.direction&&(us.canvas.setAttribute("dir",$a?"ltr":"rtl"),us.direction=$a?"ltr":"rtl",us.textAlign=$a?M:A),co-=ga*this._fontSizeFraction/this.lineHeight,_a)return this._renderChar(is,us,uo,0,hs.join(""),lo,co),void us.restore();for(let Fl=0,Pl=hs.length-1;Fl<=Pl;Fl++)Sl=Fl===Pl||this.charSpacing||xa,Tl+=hs[Fl],El=this.__charBounds[uo][Fl],Dl===0?(lo+=xl*(El.kernedWidth-El.width),Dl+=El.width):Dl+=El.kernedWidth,ba&&!Sl&&this._reSpaceAndTab.test(hs[Fl])&&(Sl=!0),Sl||(wl=wl||this.getCompleteStyleDeclaration(uo,Fl),_l=this.getCompleteStyleDeclaration(uo,Fl+1),Sl=Ui(wl,_l,!1)),Sl&&(xa?(us.save(),us.translate(El.renderLeft,El.renderTop),us.rotate(El.angle),this._renderChar(is,us,uo,Fl,Tl,-Dl/2,0),us.restore()):(Cl=lo,this._renderChar(is,us,uo,Fl,Tl,Cl,co)),Tl="",wl=_l,lo+=xl*Dl,Dl=0);us.restore()}_applyPatternGradientTransformText(is){const us=this.width+this.strokeWidth,hs=this.height+this.strokeWidth,lo=vt({width:us,height:hs}),co=lo.getContext("2d");return lo.width=us,lo.height=hs,co.beginPath(),co.moveTo(0,0),co.lineTo(us,0),co.lineTo(us,hs),co.lineTo(0,hs),co.closePath(),co.translate(us/2,hs/2),co.fillStyle=is.toLive(co),this._applyPatternGradientTransform(co,is),co.fill(),co.createPattern(lo,"no-repeat")}handleFiller(is,us,hs){let lo,co;return Gt(hs)?hs.gradientUnits==="percentage"||hs.gradientTransform||hs.patternTransform?(lo=-this.width/2,co=-this.height/2,is.translate(lo,co),is[us]=this._applyPatternGradientTransformText(hs),{offsetX:lo,offsetY:co}):(is[us]=hs.toLive(is),this._applyPatternGradientTransform(is,hs)):(is[us]=hs,{offsetX:0,offsetY:0})}_setStrokeStyles(is,us){let{stroke:hs,strokeWidth:lo}=us;return is.lineWidth=lo,is.lineCap=this.strokeLineCap,is.lineDashOffset=this.strokeDashOffset,is.lineJoin=this.strokeLineJoin,is.miterLimit=this.strokeMiterLimit,this.handleFiller(is,"strokeStyle",hs)}_setFillStyles(is,us){let{fill:hs}=us;return this.handleFiller(is,"fillStyle",hs)}_renderChar(is,us,hs,lo,co,uo,ga){const ba=this._getStyleDeclaration(hs,lo),xa=this.getCompleteStyleDeclaration(hs,lo),_a=is==="fillText"&&xa.fill,$a=is==="strokeText"&&xa.stroke&&xa.strokeWidth;if($a||_a){if(us.save(),us.font=this._getFontDeclaration(xa),ba.textBackgroundColor&&this._removeShadow(us),ba.deltaY&&(ga+=ba.deltaY),_a){const xl=this._setFillStyles(us,xa);us.fillText(co,uo-xl.offsetX,ga-xl.offsetY)}if($a){const xl=this._setStrokeStyles(us,xa);us.strokeText(co,uo-xl.offsetX,ga-xl.offsetY)}us.restore()}}setSuperscript(is,us){this._setScript(is,us,this.superscript)}setSubscript(is,us){this._setScript(is,us,this.subscript)}_setScript(is,us,hs){const lo=this.get2DCursorLocation(is,!0),co=this.getValueOfPropertyAt(lo.lineIndex,lo.charIndex,"fontSize"),uo=this.getValueOfPropertyAt(lo.lineIndex,lo.charIndex,"deltaY"),ga={fontSize:co*hs.size,deltaY:uo+co*hs.baseline};this.setSelectionStyles(ga,is,us)}_getLineLeftOffset(is){const us=this.getLineWidth(is),hs=this.width-us,lo=this.textAlign,co=this.direction,uo=this.isEndOfWrapping(is);let ga=0;return lo===qe||lo===Qe&&!uo||lo===Je&&!uo||lo===Ke&&!uo?0:(lo===D&&(ga=hs/2),lo===A&&(ga=hs),lo===Qe&&(ga=hs/2),lo===Je&&(ga=hs),co==="rtl"&&(lo===A||lo===qe||lo===Je?ga=0:lo===M||lo===Ke?ga=-hs:lo!==D&&lo!==Qe||(ga=-hs/2)),ga)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(is){if(this.__lineWidths[is]!==void 0)return this.__lineWidths[is];const{width:us}=this.measureLine(is);return this.__lineWidths[is]=us,us}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(is,us,hs){var lo;return(lo=this._getStyleDeclaration(is,us)[hs])!==null&&lo!==void 0?lo:this[hs]}_renderTextDecoration(is,us){if(!this[us]&&!this.styleHas(us))return;let hs=this._getTopOffset();const lo=this._getLeftOffset(),co=this.path,uo=this._getWidthOfCharSpacing(),ga=us==="linethrough"?.5:us==="overline"?1:0,ba=this.offsets[us];for(let xa=0,_a=this._textLines.length;xa<_a;xa++){const $a=this.getHeightOfLine(xa);if(!this[us]&&!this.styleHas(us,xa)){hs+=$a;continue}const xl=this._textLines[xa],yl=$a/this.lineHeight,wl=this._getLineLeftOffset(xa);let _l=0,El=0,Sl=this.getValueOfPropertyAt(xa,0,us),Cl=this.getValueOfPropertyAt(xa,0,K),Tl=this.getValueOfPropertyAt(xa,0,We),Dl=Sl,Fl=Cl,Pl=Tl;const Al=hs+yl*(1-this._fontSizeFraction);let Rl=this.getHeightOfChar(xa,0),Il=this.getValueOfPropertyAt(xa,0,"deltaY");for(let zl=0,Hl=xl.length;zl<Hl;zl++){const ou=this.__charBounds[xa][zl];Dl=this.getValueOfPropertyAt(xa,zl,us),Fl=this.getValueOfPropertyAt(xa,zl,K),Pl=this.getValueOfPropertyAt(xa,zl,We);const au=this.getHeightOfChar(xa,zl),_c=this.getValueOfPropertyAt(xa,zl,"deltaY");if(co&&Dl&&Fl){const uu=this.fontSize*Pl/1e3;is.save(),is.fillStyle=Cl,is.translate(ou.renderLeft,ou.renderTop),is.rotate(ou.angle),is.fillRect(-ou.kernedWidth/2,ba*au+_c-ga*uu,ou.kernedWidth,uu),is.restore()}else if((Dl!==Sl||Fl!==Cl||au!==Rl||Pl!==Tl||_c!==Il)&&El>0){const uu=this.fontSize*Tl/1e3;let lu=lo+wl+_l;this.direction==="rtl"&&(lu=this.width-lu-El),Sl&&Cl&&Tl&&(is.fillStyle=Cl,is.fillRect(lu,Al+ba*Rl+Il-ga*uu,El,uu)),_l=ou.left,El=ou.width,Sl=Dl,Tl=Pl,Cl=Fl,Rl=au,Il=_c}else El+=ou.kernedWidth}let Bl=lo+wl+_l;this.direction==="rtl"&&(Bl=this.width-Bl-El),is.fillStyle=Fl;const Ol=this.fontSize*Pl/1e3;Dl&&Fl&&Pl&&is.fillRect(Bl,Al+ba*Rl+Il-ga*Ol,El-uo,Ol),hs+=$a}this._removeShadow(is)}_getFontDeclaration(){let{fontFamily:is=this.fontFamily,fontStyle:us=this.fontStyle,fontWeight:hs=this.fontWeight,fontSize:lo=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},co=arguments.length>1?arguments[1]:void 0;const uo=is.includes("'")||is.includes('"')||is.includes(",")||Eo.genericFonts.includes(is.toLowerCase())?is:'"'.concat(is,'"');return[us,hs,"".concat(co?this.CACHE_FONT_SIZE:lo,"px"),uo].join(" ")}render(is){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(is)))}graphemeSplit(is){return zi(is)}_splitTextIntoLines(is){const us=is.split(this._reNewline),hs=new Array(us.length),lo=[`
`];let co=[];for(let uo=0;uo<us.length;uo++)hs[uo]=this.graphemeSplit(us[uo]),co=co.concat(hs[uo],lo);return co.pop(),{_unwrappedLines:hs,lines:us,graphemeText:co,graphemeLines:hs}}toObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return s(s({},super.toObject([...He,...is])),{},{styles:qi(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(is,us){const{textLayoutProperties:hs}=this.constructor;super.set(is,us);let lo=!1,co=!1;if(typeof is=="object")for(const uo in is)uo==="path"&&this.setPathInfo(),lo=lo||hs.includes(uo),co=co||uo==="path";else lo=hs.includes(is),co=is==="path";return co&&this.setPathInfo(),lo&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(is,us,hs){const lo=Dr(is,Eo.ATTRIBUTE_NAMES,hs),co=s(s({},us),lo),{textAnchor:uo=M,textDecoration:ga="",dx:ba=0,dy:xa=0,top:_a=0,left:$a=0,fontSize:xl=O,strokeWidth:yl=1}=co,wl=i(co,Mo),_l=new this((is.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),s({left:$a+ba,top:_a+xa,underline:ga.includes("underline"),overline:ga.includes("overline"),linethrough:ga.includes("line-through"),strokeWidth:0,fontSize:xl},wl)),El=_l.getScaledHeight()/_l.height,Sl=((_l.height+_l.strokeWidth)*_l.lineHeight-_l.height)*El,Cl=_l.getScaledHeight()+Sl;let Tl=0;return uo===D&&(Tl=_l.getScaledWidth()/2),uo===A&&(Tl=_l.getScaledWidth()),_l.set({left:_l.left-Tl,top:_l.top-(Cl-_l.fontSize*(.07+_l._fontSizeFraction))/_l.lineHeight,strokeWidth:yl}),_l}static fromObject(is){return this._fromObject(s(s({},is),{},{styles:Ki(is.styles||{},is.text)}),{extraParam:"text"})}}t(Eo,"textLayoutProperties",Ge),t(Eo,"cacheProperties",[...Ms,...He]),t(Eo,"ownDefaults",Ue),t(Eo,"type","Text"),t(Eo,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),t(Eo,"ATTRIBUTE_NAMES",Ji.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Ai(Eo,[class extends Xe{_toSVG(){const cs=this._getSVGLeftTopOffsets(),is=this._getSVGTextAndBg(cs.textTop,cs.textLeft);return this._wrapSVGTextAndBg(is)}toSVG(cs){const is=this._createBaseSVGMarkup(this._toSVG(),{reviver:cs,noStyle:!0,withShadow:!0}),us=this.path;return us?is+us._createBaseSVGMarkup(us._toSVG(),{reviver:cs,withShadow:!0,additionalTransform:zt(this.calcOwnMatrix())}):is}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(cs){let{textBgRects:is,textSpans:us}=cs;const hs=this.getSvgTextDecoration(this);return[is.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(ko,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",hs?'text-decoration="'.concat(hs,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",us.join(""),`</text>
`]}_getSVGTextAndBg(cs,is){const us=[],hs=[];let lo,co=cs;this.backgroundColor&&hs.push(...Do(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let uo=0,ga=this._textLines.length;uo<ga;uo++)lo=this._getLineLeftOffset(uo),this.direction==="rtl"&&(lo+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",uo))&&this._setSVGTextLineBg(hs,uo,is+lo,co),this._setSVGTextLineText(us,uo,is+lo,co),co+=this.getHeightOfLine(uo);return{textSpans:us,textBgRects:hs}}_createTextCharSpan(cs,is,us,hs,lo){const co=o.NUM_FRACTION_DIGITS,uo=this.getSvgSpanStyles(is,cs!==cs.trim()||!!cs.match(Oo)),ga=uo?'style="'.concat(uo,'"'):"",ba=is.deltaY,xa=ba?' dy="'.concat(Vt(ba,co),'" '):"",{angle:_a,renderLeft:$a,renderTop:xl,width:yl}=lo;let wl="";if($a!==void 0){const _l=yl/2;_a&&(wl=' rotate="'.concat(Vt(Ct(_a),co),'"'));const El=Pt({angle:Ct(_a)});El[4]=$a,El[5]=xl;const Sl=new ot(-_l,0).transform(El);us=Sl.x,hs=Sl.y}return'<tspan x="'.concat(Vt(us,co),'" y="').concat(Vt(hs,co),'" ').concat(xa).concat(wl).concat(ga,">").concat(Wi(cs),"</tspan>")}_setSVGTextLineText(cs,is,us,hs){const lo=this.getHeightOfLine(is),co=this.textAlign.includes(qe),uo=this._textLines[is];let ga,ba,xa,_a,$a,xl="",yl=0;hs+=lo*(1-this._fontSizeFraction)/this.lineHeight;for(let wl=0,_l=uo.length-1;wl<=_l;wl++)$a=wl===_l||this.charSpacing||this.path,xl+=uo[wl],xa=this.__charBounds[is][wl],yl===0?(us+=xa.kernedWidth-xa.width,yl+=xa.width):yl+=xa.kernedWidth,co&&!$a&&this._reSpaceAndTab.test(uo[wl])&&($a=!0),$a||(ga=ga||this.getCompleteStyleDeclaration(is,wl),ba=this.getCompleteStyleDeclaration(is,wl+1),$a=Ui(ga,ba,!0)),$a&&(_a=this._getStyleDeclaration(is,wl),cs.push(this._createTextCharSpan(xl,_a,us,hs,xa)),xl="",ga=ba,this.direction==="rtl"?us-=yl:us+=yl,yl=0)}_setSVGTextLineBg(cs,is,us,hs){const lo=this._textLines[is],co=this.getHeightOfLine(is)/this.lineHeight;let uo,ga=0,ba=0,xa=this.getValueOfPropertyAt(is,0,"textBackgroundColor");for(let _a=0;_a<lo.length;_a++){const{left:$a,width:xl,kernedWidth:yl}=this.__charBounds[is][_a];uo=this.getValueOfPropertyAt(is,_a,"textBackgroundColor"),uo!==xa?(xa&&cs.push(...Do(xa,us+ba,hs,ga,co)),ba=$a,ga=xl,xa=uo):ga+=yl}uo&&cs.push(...Do(xa,us+ba,hs,ga,co))}_getSVGLineTopOffset(cs){let is,us=0;for(is=0;is<cs;is++)us+=this.getHeightOfLine(is);const hs=this.getHeightOfLine(is);return{lineTop:us,offset:(this._fontSizeMult-this._fontSizeFraction)*hs/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(cs){return"".concat(super.getSvgStyles(cs)," text-decoration-thickness: ").concat(Vt(this.textDecorationThickness*this.getObjectScaling().y/10,o.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(cs,is){const{fontFamily:us,strokeWidth:hs,stroke:lo,fill:co,fontSize:uo,fontStyle:ga,fontWeight:ba,deltaY:xa,textDecorationThickness:_a,linethrough:$a,overline:xl,underline:yl}=cs,wl=this.getSvgTextDecoration({underline:yl??this.underline,overline:xl??this.overline,linethrough:$a??this.linethrough}),_l=_a||this.textDecorationThickness;return[lo?Be(J,lo):"",hs?"stroke-width: ".concat(hs,"; "):"",us?"font-family: ".concat(us.includes("'")||us.includes('"')?us:"'".concat(us,"'"),"; "):"",uo?"font-size: ".concat(uo,"px; "):"",ga?"font-style: ".concat(ga,"; "):"",ba?"font-weight: ".concat(ba,"; "):"",wl?"text-decoration: ".concat(wl,"; text-decoration-thickness: ").concat(Vt(_l*this.getObjectScaling().y/10,o.NUM_FRACTION_DIGITS),"%; "):"",co?Be(K,co):"",xa?"baseline-shift: ".concat(-xa,"; "):"",is?"white-space: pre; ":""].join("")}getSvgTextDecoration(cs){return["overline","underline","line-through"].filter(is=>cs[is.replace("-","")]).join(" ")}}]),tt.setClass(Eo),tt.setSVGClass(Eo);class Ao{constructor(is){t(this,"target",void 0),t(this,"__mouseDownInPlace",!1),t(this,"__dragStartFired",!1),t(this,"__isDraggingOver",!1),t(this,"__dragStartSelection",void 0),t(this,"__dragImageDisposer",void 0),t(this,"_dispose",void 0),this.target=is;const us=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{us.forEach(hs=>hs()),this._dispose=void 0}}isPointerOverSelection(is){const us=this.target,hs=us.getSelectionStartFromPointer(is);return us.isEditing&&hs>=us.selectionStart&&hs<=us.selectionEnd&&us.selectionStart<us.selectionEnd}start(is){return this.__mouseDownInPlace=this.isPointerOverSelection(is)}isActive(){return this.__mouseDownInPlace}end(is){const us=this.isActive();return us&&!this.__dragStartFired&&(this.target.setCursorByClick(is),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,us}getDragStartSelection(){return this.__dragStartSelection}setDragImage(is,us){var hs;let{selectionStart:lo,selectionEnd:co}=us;const uo=this.target,ga=uo.canvas,ba=new ot(uo.flipX?-1:1,uo.flipY?-1:1),xa=uo._getCursorBoundaries(lo),_a=new ot(xa.left+xa.leftOffset,xa.top+xa.topOffset).multiply(ba).transform(uo.calcTransformMatrix()),$a=ga.getScenePoint(is).subtract(_a),xl=uo.getCanvasRetinaScaling(),yl=uo.getBoundingRect(),wl=_a.subtract(new ot(yl.left,yl.top)),_l=ga.viewportTransform,El=wl.add($a).transform(_l,!0),Sl=uo.backgroundColor,Cl=Yi(uo.styles);uo.backgroundColor="";const Tl={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};uo.setSelectionStyles(Tl,0,lo),uo.setSelectionStyles(Tl,co,uo.text.length),uo.dirty=!0;const Dl=uo.toCanvasElement({enableRetinaScaling:ga.enableRetinaScaling,viewportTransform:!0});uo.backgroundColor=Sl,uo.styles=Cl,uo.dirty=!0,Sn(Dl,{position:"fixed",left:"".concat(-Dl.width,"px"),border:j,width:"".concat(Dl.width/xl,"px"),height:"".concat(Dl.height/xl,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{Dl.remove()},Kt(is.target||this.target.hiddenTextarea).body.appendChild(Dl),(hs=is.dataTransfer)===null||hs===void 0||hs.setDragImage(Dl,El.x,El.y)}onDragStart(is){this.__dragStartFired=!0;const us=this.target,hs=this.isActive();if(hs&&is.dataTransfer){const lo=this.__dragStartSelection={selectionStart:us.selectionStart,selectionEnd:us.selectionEnd},co=us._text.slice(lo.selectionStart,lo.selectionEnd).join(""),uo=s({text:us.text,value:co},lo);is.dataTransfer.setData("text/plain",co),is.dataTransfer.setData("application/fabric",JSON.stringify({value:co,styles:us.getSelectionStyles(lo.selectionStart,lo.selectionEnd,!0)})),is.dataTransfer.effectAllowed="copyMove",this.setDragImage(is,uo)}return us.abortCursorAnimation(),hs}canDrop(is){if(this.target.editable&&!this.target.getActiveControl()&&!is.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const us=this.target.getSelectionStartFromPointer(is),hs=this.__dragStartSelection;return us<hs.selectionStart||us>hs.selectionEnd}return!0}return!1}targetCanDrop(is){return this.target.canDrop(is)}dragEnterHandler(is){let{e:us}=is;const hs=this.targetCanDrop(us);!this.__isDraggingOver&&hs&&(this.__isDraggingOver=!0)}dragOverHandler(is){const{e:us}=is,hs=this.targetCanDrop(us);!this.__isDraggingOver&&hs?this.__isDraggingOver=!0:this.__isDraggingOver&&!hs&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(us.preventDefault(),is.canDrop=!0,is.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(is){var us;const{e:hs}=is,lo=hs.defaultPrevented;this.__isDraggingOver=!1,hs.preventDefault();let co=(us=hs.dataTransfer)===null||us===void 0?void 0:us.getData("text/plain");if(co&&!lo){const uo=this.target,ga=uo.canvas;let ba=uo.getSelectionStartFromPointer(hs);const{styles:xa}=hs.dataTransfer.types.includes("application/fabric")?JSON.parse(hs.dataTransfer.getData("application/fabric")):{},_a=co[Math.max(0,co.length-1)],$a=0;if(this.__dragStartSelection){const xl=this.__dragStartSelection.selectionStart,yl=this.__dragStartSelection.selectionEnd;ba>xl&&ba<=yl?ba=xl:ba>yl&&(ba-=yl-xl),uo.removeChars(xl,yl),delete this.__dragStartSelection}uo._reNewline.test(_a)&&(uo._reNewline.test(uo._text[ba])||ba===uo._text.length)&&(co=co.trimEnd()),is.didDrop=!0,is.dropTarget=uo,uo.insertChars(co,xa,ba),ga.setActiveObject(uo),uo.enterEditing(hs),uo.selectionStart=Math.min(ba+$a,uo._text.length),uo.selectionEnd=Math.min(uo.selectionStart+co.length,uo._text.length),uo.hiddenTextarea.value=uo.text,uo._updateTextarea(),uo.hiddenTextarea.focus(),uo.fire(z,{index:ba+$a,action:"drop"}),ga.fire("text:changed",{target:uo}),ga.contextTopDirty=!0,ga.requestRenderAll()}}dragEndHandler(is){let{e:us}=is;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var hs;const lo=this.target,co=this.target.canvas,{selectionStart:uo,selectionEnd:ga}=this.__dragStartSelection,ba=((hs=us.dataTransfer)===null||hs===void 0?void 0:hs.dropEffect)||j;ba===j?(lo.selectionStart=uo,lo.selectionEnd=ga,lo._updateTextarea(),lo.hiddenTextarea.focus()):(lo.clearContextTop(),ba==="move"&&(lo.removeChars(uo,ga),lo.selectionStart=lo.selectionEnd=uo,lo.hiddenTextarea&&(lo.hiddenTextarea.value=lo.text),lo._updateTextarea(),lo.fire(z,{index:uo,action:"dragend"}),co.fire("text:changed",{target:lo}),co.requestRenderAll()),lo.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const jo=/[ \n\.,;!\?\-]/;class Fo extends Eo{constructor(){super(...arguments),t(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(is){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(is)}_animateCursor(is){let{toValue:us,duration:hs,delay:lo,onComplete:co}=is;return Us({startValue:this._currentCursorOpacity,endValue:us,duration:hs,delay:lo,onComplete:co,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:uo=>{this._currentCursorOpacity=uo,this.renderCursorOrSelection()}})}_tick(is){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(is||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var is;(is=this._currentTickCompleteState)===null||is===void 0||is.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(is){this.abortCursorAnimation(),this._tick(is?0:this.cursorDelay)}abortCursorAnimation(){let is=!1;[this._currentTickState,this._currentTickCompleteState].forEach(us=>{us&&!us.isDone()&&(is=!0,us.abort())}),this._currentCursorOpacity=1,is&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(is=>!is||is.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(is){let us=0,hs=is-1;if(this._reSpace.test(this._text[hs]))for(;this._reSpace.test(this._text[hs]);)us++,hs--;for(;/\S/.test(this._text[hs])&&hs>-1;)us++,hs--;return is-us}findWordBoundaryRight(is){let us=0,hs=is;if(this._reSpace.test(this._text[hs]))for(;this._reSpace.test(this._text[hs]);)us++,hs++;for(;/\S/.test(this._text[hs])&&hs<this._text.length;)us++,hs++;return is+us}findLineBoundaryLeft(is){let us=0,hs=is-1;for(;!/\n/.test(this._text[hs])&&hs>-1;)us++,hs--;return is-us}findLineBoundaryRight(is){let us=0,hs=is;for(;!/\n/.test(this._text[hs])&&hs<this._text.length;)us++,hs++;return is+us}searchWordBoundary(is,us){const hs=this._text;let lo=is>0&&this._reSpace.test(hs[is])&&(us===-1||!F.test(hs[is-1]))?is-1:is,co=hs[lo];for(;lo>0&&lo<hs.length&&!jo.test(co);)lo+=us,co=hs[lo];return us===-1&&jo.test(co)&&lo++,lo}selectWord(is){var us;is=(us=is)!==null&&us!==void 0?us:this.selectionStart;const hs=this.searchWordBoundary(is,-1),lo=Math.max(hs,this.searchWordBoundary(is,1));this.selectionStart=hs,this.selectionEnd=lo,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(is){var us;is=(us=is)!==null&&us!==void 0?us:this.selectionStart;const hs=this.findLineBoundaryLeft(is),lo=this.findLineBoundaryRight(is);this.selectionStart=hs,this.selectionEnd=lo,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(is){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",is?{e:is}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:is}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(is){if(this.getActiveControl())return;const us=this.hiddenTextarea;Kt(us).activeElement!==us&&us.focus();const hs=this.getSelectionStartFromPointer(is),lo=this.selectionStart,co=this.selectionEnd;(hs===this.__selectionStartOnMouseDown&&lo!==co||lo!==hs&&co!==hs)&&(hs>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=hs):(this.selectionStart=hs,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===lo&&this.selectionEnd===co||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(is,us,hs){const lo=hs.slice(0,is),co=this.graphemeSplit(lo).length;if(is===us)return{selectionStart:co,selectionEnd:co};const uo=hs.slice(is,us);return{selectionStart:co,selectionEnd:co+this.graphemeSplit(uo).length}}fromGraphemeToStringSelection(is,us,hs){const lo=hs.slice(0,is).join("").length;return is===us?{selectionStart:lo,selectionEnd:lo}:{selectionStart:lo,selectionEnd:lo+hs.slice(is,us).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const is=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=is.selectionStart,this.hiddenTextarea.selectionEnd=is.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const is=this.hiddenTextarea;this.text=is.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const us=this.fromStringToGraphemeSelection(is.selectionStart,is.selectionEnd,is.value);this.selectionEnd=this.selectionStart=us.selectionEnd,this.inCompositionMode||(this.selectionStart=us.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const is=this._calcTextareaPosition();this.hiddenTextarea.style.left=is.left,this.hiddenTextarea.style.top=is.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const is=this.inCompositionMode?this.compositionStart:this.selectionStart,us=this._getCursorBoundaries(is),hs=this.get2DCursorLocation(is),lo=hs.lineIndex,co=hs.charIndex,uo=this.getValueOfPropertyAt(lo,co,"fontSize")*this.lineHeight,ga=us.leftOffset,ba=this.getCanvasRetinaScaling(),xa=this.canvas.upperCanvasEl,_a=xa.width/ba,$a=xa.height/ba,xl=_a-uo,yl=$a-uo,wl=new ot(us.left+ga,us.top+us.topOffset+uo).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new ot(xa.clientWidth/_a,xa.clientHeight/$a));return wl.x<0&&(wl.x=0),wl.x>xl&&(wl.x=xl),wl.y<0&&(wl.y=0),wl.y>yl&&(wl.y=yl),wl.x+=this.canvas._offset.left,wl.y+=this.canvas._offset.top,{left:"".concat(wl.x,"px"),top:"".concat(wl.y,"px"),fontSize:"".concat(uo,"px"),charHeight:uo}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const is=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,is&&(is.blur&&is.blur(),is.parentNode&&is.parentNode.removeChild(is)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const is=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),is&&this.fire(Q),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),is&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const is in this.styles)this._textLines[is]||delete this.styles[is]}removeStyleFromTo(is,us){const{lineIndex:hs,charIndex:lo}=this.get2DCursorLocation(is,!0),{lineIndex:co,charIndex:uo}=this.get2DCursorLocation(us,!0);if(hs!==co){if(this.styles[hs])for(let ga=lo;ga<this._unwrappedTextLines[hs].length;ga++)delete this.styles[hs][ga];if(this.styles[co])for(let ga=uo;ga<this._unwrappedTextLines[co].length;ga++){const ba=this.styles[co][ga];ba&&(this.styles[hs]||(this.styles[hs]={}),this.styles[hs][lo+ga-uo]=ba)}for(let ga=hs+1;ga<=co;ga++)delete this.styles[ga];this.shiftLineStyles(co,hs-co)}else if(this.styles[hs]){const ga=this.styles[hs],ba=uo-lo;for(let xa=lo;xa<uo;xa++)delete ga[xa];for(const xa in this.styles[hs]){const _a=parseInt(xa,10);_a>=uo&&(ga[_a-ba]=ga[xa],delete ga[xa])}}}shiftLineStyles(is,us){const hs=Object.assign({},this.styles);for(const lo in this.styles){const co=parseInt(lo,10);co>is&&(this.styles[co+us]=hs[co],hs[co-us]||delete this.styles[co])}}insertNewlineStyleObject(is,us,hs,lo){const co={},uo=this._unwrappedTextLines[is].length,ga=uo===us;let ba=!1;hs||(hs=1),this.shiftLineStyles(is,hs);const xa=this.styles[is]?this.styles[is][us===0?us:us-1]:void 0;for(const $a in this.styles[is]){const xl=parseInt($a,10);xl>=us&&(ba=!0,co[xl-us]=this.styles[is][$a],ga&&us===0||delete this.styles[is][$a])}let _a=!1;for(ba&&!ga&&(this.styles[is+hs]=co,_a=!0),(_a||uo>us)&&hs--;hs>0;)lo&&lo[hs-1]?this.styles[is+hs]={0:s({},lo[hs-1])}:xa?this.styles[is+hs]={0:s({},xa)}:delete this.styles[is+hs],hs--;this._forceClearCache=!0}insertCharStyleObject(is,us,hs,lo){this.styles||(this.styles={});const co=this.styles[is],uo=co?s({},co):{};hs||(hs=1);for(const ba in uo){const xa=parseInt(ba,10);xa>=us&&(co[xa+hs]=uo[xa],uo[xa-hs]||delete co[xa])}if(this._forceClearCache=!0,lo){for(;hs--;)Object.keys(lo[hs]).length&&(this.styles[is]||(this.styles[is]={}),this.styles[is][us+hs]=s({},lo[hs]));return}if(!co)return;const ga=co[us?us-1:1];for(;ga&&hs--;)this.styles[is][us+hs]=s({},ga)}insertNewStyleBlock(is,us,hs){const lo=this.get2DCursorLocation(us,!0),co=[0];let uo,ga=0;for(let ba=0;ba<is.length;ba++)is[ba]===`
`?(ga++,co[ga]=0):co[ga]++;for(co[0]>0&&(this.insertCharStyleObject(lo.lineIndex,lo.charIndex,co[0],hs),hs=hs&&hs.slice(co[0]+1)),ga&&this.insertNewlineStyleObject(lo.lineIndex,lo.charIndex+co[0],ga),uo=1;uo<ga;uo++)co[uo]>0?this.insertCharStyleObject(lo.lineIndex+uo,0,co[uo],hs):hs&&this.styles[lo.lineIndex+uo]&&hs[0]&&(this.styles[lo.lineIndex+uo][0]=hs[0]),hs=hs&&hs.slice(co[uo]+1);co[uo]>0&&this.insertCharStyleObject(lo.lineIndex+uo,0,co[uo],hs)}removeChars(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:is+1;this.removeStyleFromTo(is,us),this._text.splice(is,us-is),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(is,us,hs){let lo=arguments.length>3&&arguments[3]!==void 0?arguments[3]:hs;lo>hs&&this.removeStyleFromTo(hs,lo);const co=this.graphemeSplit(is);this.insertNewStyleBlock(co,hs,us),this._text=[...this._text.slice(0,hs),...co,...this._text.slice(lo)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(is,us,hs){hs<=is?(us===is?this._selectionDirection=M:this._selectionDirection===A&&(this._selectionDirection=M,this.selectionEnd=is),this.selectionStart=hs):hs>is&&hs<us?this._selectionDirection===A?this.selectionEnd=hs:this.selectionStart=hs:(us===is?this._selectionDirection=A:this._selectionDirection===M&&(this._selectionDirection=A,this.selectionStart=us),this.selectionEnd=hs)}}class Lo extends Fo{initHiddenTextarea(){const is=this.canvas&&Kt(this.canvas.getElement())||m(),us=is.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(uo=>{let[ga,ba]=uo;return us.setAttribute(ga,ba)});const{top:hs,left:lo,fontSize:co}=this._calcTextareaPosition();us.style.cssText="position: absolute; top: ".concat(hs,"; left: ").concat(lo,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(co,";"),(this.hiddenTextareaContainer||is.body).appendChild(us),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(uo=>{let[ga,ba]=uo;return us.addEventListener(ga,this[ba].bind(this))}),this.hiddenTextarea=us}blur(){this.abortCursorAnimation()}onKeyDown(is){if(!this.isEditing)return;const us=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(is.keyCode in us)this[us[is.keyCode]](is);else{if(!(is.keyCode in this.ctrlKeysMapDown)||!is.ctrlKey&&!is.metaKey)return;this[this.ctrlKeysMapDown[is.keyCode]](is)}is.stopImmediatePropagation(),is.preventDefault(),is.keyCode>=33&&is.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(is){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:is.keyCode in this.ctrlKeysMapUp&&(is.ctrlKey||is.metaKey)&&(this[this.ctrlKeysMapUp[is.keyCode]](is),is.stopImmediatePropagation(),is.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(is){const us=this.fromPaste,{value:hs,selectionStart:lo,selectionEnd:co}=this.hiddenTextarea;if(this.fromPaste=!1,is&&is.stopPropagation(),!this.isEditing)return;const uo=()=>{this.updateFromTextArea(),this.fire(z),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void uo();const ga=this._splitTextIntoLines(hs).graphemeText,ba=this._text.length,xa=ga.length,_a=this.selectionStart,$a=this.selectionEnd,xl=_a!==$a;let yl,wl,_l,El,Sl=xa-ba;const Cl=this.fromStringToGraphemeSelection(lo,co,hs),Tl=_a>Cl.selectionStart;xl?(wl=this._text.slice(_a,$a),Sl+=$a-_a):xa<ba&&(wl=Tl?this._text.slice($a+Sl,$a):this._text.slice(_a,_a-Sl));const Dl=ga.slice(Cl.selectionEnd-Sl,Cl.selectionEnd);if(wl&&wl.length&&(Dl.length&&(yl=this.getSelectionStyles(_a,_a+1,!1),yl=Dl.map(()=>yl[0])),xl?(_l=_a,El=$a):Tl?(_l=$a-wl.length,El=$a):(_l=$a,El=$a+wl.length),this.removeStyleFromTo(_l,El)),Dl.length){const{copyPasteData:Fl}=p();us&&Dl.join("")===Fl.copiedText&&!o.disableStyleCopyPaste&&(yl=Fl.copiedTextStyle),this.insertNewStyleBlock(Dl,_a,yl)}uo()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(is){let{target:us}=is;const{selectionStart:hs,selectionEnd:lo}=us;this.compositionStart=hs,this.compositionEnd=lo,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:is}=p();is.copiedText=this.getSelectedText(),o.disableStyleCopyPaste?is.copiedTextStyle=void 0:is.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(is,us){let hs,lo=this._getLineLeftOffset(is);return us>0&&(hs=this.__charBounds[is][us-1],lo+=hs.left+hs.width),lo}getDownCursorOffset(is,us){const hs=this._getSelectionForOffset(is,us),lo=this.get2DCursorLocation(hs),co=lo.lineIndex;if(co===this._textLines.length-1||is.metaKey||is.keyCode===34)return this._text.length-hs;const uo=lo.charIndex,ga=this._getWidthBeforeCursor(co,uo),ba=this._getIndexOnLine(co+1,ga);return this._textLines[co].slice(uo).length+ba+1+this.missingNewlineOffset(co)}_getSelectionForOffset(is,us){return is.shiftKey&&this.selectionStart!==this.selectionEnd&&us?this.selectionEnd:this.selectionStart}getUpCursorOffset(is,us){const hs=this._getSelectionForOffset(is,us),lo=this.get2DCursorLocation(hs),co=lo.lineIndex;if(co===0||is.metaKey||is.keyCode===33)return-hs;const uo=lo.charIndex,ga=this._getWidthBeforeCursor(co,uo),ba=this._getIndexOnLine(co-1,ga),xa=this._textLines[co].slice(0,uo),_a=this.missingNewlineOffset(co-1);return-this._textLines[co-1].length+ba-xa.length+(1-_a)}_getIndexOnLine(is,us){const hs=this._textLines[is];let lo,co,uo=this._getLineLeftOffset(is),ga=0;for(let ba=0,xa=hs.length;ba<xa;ba++)if(lo=this.__charBounds[is][ba].width,uo+=lo,uo>us){co=!0;const _a=uo-lo,$a=uo,xl=Math.abs(_a-us);ga=Math.abs($a-us)<xl?ba:ba-1;break}return co||(ga=hs.length-1),ga}moveCursorDown(is){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",is)}moveCursorUp(is){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",is)}_moveCursorUpOrDown(is,us){const hs=this["get".concat(is,"CursorOffset")](us,this._selectionDirection===A);if(us.shiftKey?this.moveCursorWithShift(hs):this.moveCursorWithoutShift(hs),hs!==0){const lo=this.text.length;this.selectionStart=ks(0,this.selectionStart,lo),this.selectionEnd=ks(0,this.selectionEnd,lo),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(is){const us=this._selectionDirection===M?this.selectionStart+is:this.selectionEnd+is;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,us),is!==0}moveCursorWithoutShift(is){return is<0?(this.selectionStart+=is,this.selectionEnd=this.selectionStart):(this.selectionEnd+=is,this.selectionStart=this.selectionEnd),is!==0}moveCursorLeft(is){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",is)}_move(is,us,hs){let lo;if(is.altKey)lo=this["findWordBoundary".concat(hs)](this[us]);else{if(!is.metaKey&&is.keyCode!==35&&is.keyCode!==36)return this[us]+=hs==="Left"?-1:1,!0;lo=this["findLineBoundary".concat(hs)](this[us])}return lo!==void 0&&this[us]!==lo&&(this[us]=lo,!0)}_moveLeft(is,us){return this._move(is,us,"Left")}_moveRight(is,us){return this._move(is,us,"Right")}moveCursorLeftWithoutShift(is){let us=!0;return this._selectionDirection=M,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(us=this._moveLeft(is,"selectionStart")),this.selectionEnd=this.selectionStart,us}moveCursorLeftWithShift(is){return this._selectionDirection===A&&this.selectionStart!==this.selectionEnd?this._moveLeft(is,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=M,this._moveLeft(is,"selectionStart")):void 0}moveCursorRight(is){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",is)}_moveCursorLeftOrRight(is,us){const hs="moveCursor".concat(is).concat(us.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[hs](us)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(is){return this._selectionDirection===M&&this.selectionStart!==this.selectionEnd?this._moveRight(is,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=A,this._moveRight(is,"selectionEnd")):void 0}moveCursorRightWithoutShift(is){let us=!0;return this._selectionDirection=A,this.selectionStart===this.selectionEnd?(us=this._moveRight(is,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,us}}const Ro=cs=>!!cs.button;class Io extends Lo{constructor(){super(...arguments),t(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new Ao(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(is){return this.draggableTextDelegate.onDragStart(is)}canDrop(is){return this.draggableTextDelegate.canDrop(is)}doubleClickHandler(is){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(is.e)),this.renderCursorOrSelection())}tripleClickHandler(is){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(is.e)),this.renderCursorOrSelection())}_mouseDownHandler(is){let{e:us,alreadySelected:hs}=is;this.canvas&&this.editable&&!Ro(us)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(us)||(this.canvas.textEditingManager.register(this),hs&&(this.inCompositionMode=!1,this.setCursorByClick(us)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=hs||this.isEditing)))}mouseUpHandler(is){let{e:us,transform:hs}=is;const lo=this.draggableTextDelegate.end(us);if(this.canvas){this.canvas.textEditingManager.unregister(this);const co=this.canvas._activeObject;if(co&&co!==this)return}!this.editable||this.group&&!this.group.interactive||hs&&hs.actionPerformed||Ro(us)||lo||this.selected&&!this.getActiveControl()&&(this.enterEditing(us),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(is){const us=this.getSelectionStartFromPointer(is),hs=this.selectionStart,lo=this.selectionEnd;is.shiftKey?this.setSelectionStartEndWithShift(hs,lo,us):(this.selectionStart=us,this.selectionEnd=us),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(is){const us=this.canvas.getScenePoint(is).transform(wt(this.calcTransformMatrix())).add(new ot(-this._getLeftOffset(),-this._getTopOffset()));let hs=0,lo=0,co=0;for(let xa=0;xa<this._textLines.length&&hs<=us.y;xa++)hs+=this.getHeightOfLine(xa),co=xa,xa>0&&(lo+=this._textLines[xa-1].length+this.missingNewlineOffset(xa-1));let uo=Math.abs(this._getLineLeftOffset(co));const ga=this._textLines[co].length,ba=this.__charBounds[co];for(let xa=0;xa<ga;xa++){const _a=uo+ba[xa].kernedWidth;if(us.x<=_a){Math.abs(us.x-_a)<=Math.abs(us.x-uo)&&lo++;break}uo=_a,lo++}return Math.min(this.flipX?ga-lo:lo,this._text.length)}}const Bo="moveCursorUp",Xo="moveCursorDown",Yo="moveCursorLeft",Wo="moveCursorRight",Vo="exitEditing",zo=(cs,is)=>{const us=is.getRetinaScaling();cs.setTransform(us,0,0,us,0,0);const hs=is.viewportTransform;cs.transform(hs[0],hs[1],hs[2],hs[3],hs[4],hs[5])},Go=s({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Vo,27:Vo,33:Bo,34:Xo,35:Wo,36:Yo,37:Yo,38:Bo,39:Wo,40:Xo},keysMapRtl:{9:Vo,27:Vo,33:Bo,34:Xo,35:Yo,36:Wo,37:Wo,38:Bo,39:Yo,40:Xo},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Ho extends Io{static getDefaults(){return s(s({},super.getDefaults()),Ho.ownDefaults)}get type(){const is=super.type;return is==="itext"?"i-text":is}constructor(is,us){super(is,s(s({},Ho.ownDefaults),us)),this.initBehavior()}_set(is,us){return this.isEditing&&this._savedProps&&is in this._savedProps?(this._savedProps[is]=us,this):(is==="canvas"&&(this.canvas instanceof In&&this.canvas.textEditingManager.remove(this),us instanceof In&&us.textEditingManager.add(this)),super._set(is,us))}setSelectionStart(is){is=Math.max(is,0),this._updateAndFire("selectionStart",is)}setSelectionEnd(is){is=Math.min(is,this.text.length),this._updateAndFire("selectionEnd",is)}_updateAndFire(is,us){this[is]!==us&&(this._fireSelectionChanged(),this[is]=us),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,hs=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(is,us,hs)}setSelectionStyles(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,hs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(is,us,hs)}get2DCursorLocation(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,us=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(is,us)}render(is){super.render(is),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(is){const us=this.isEditing;this.isEditing=!1;const hs=super.toCanvasElement(is);return this.isEditing=us,hs}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const is=this.clearContextTop(!0);if(!is)return;const us=this._getCursorBoundaries(),hs=this.findAncestorsWithClipPath(),lo=hs.length>0;let co,uo=is;if(lo){co=vt(is.canvas),uo=co.getContext("2d"),zo(uo,this.canvas);const ga=this.calcTransformMatrix();uo.transform(ga[0],ga[1],ga[2],ga[3],ga[4],ga[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(uo,us):this.renderCursor(uo,us),lo)for(const ga of hs){const ba=ga.clipPath,xa=vt(is.canvas),_a=xa.getContext("2d");if(zo(_a,this.canvas),!ba.absolutePositioned){const $a=ga.calcTransformMatrix();_a.transform($a[0],$a[1],$a[2],$a[3],$a[4],$a[5])}ba.transform(_a),ba.drawObject(_a,!0,{}),this.drawClipPathOnCache(uo,ba,xa)}lo&&(is.setTransform(1,0,0,1,0,0),is.drawImage(co,0,0)),this.canvas.contextTopDirty=!0,is.restore()}findAncestorsWithClipPath(){const is=[];let us=this;for(;us;)us.clipPath&&is.push(us),us=us.parent;return is}_getCursorBoundaries(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,us=arguments.length>1?arguments[1]:void 0;const hs=this._getLeftOffset(),lo=this._getTopOffset(),co=this._getCursorBoundariesOffsets(is,us);return{left:hs,top:lo,leftOffset:co.left,topOffset:co.top}}_getCursorBoundariesOffsets(is,us){return us?this.__getCursorBoundariesOffsets(is):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(is)}__getCursorBoundariesOffsets(is){let us=0,hs=0;const{charIndex:lo,lineIndex:co}=this.get2DCursorLocation(is);for(let xa=0;xa<co;xa++)us+=this.getHeightOfLine(xa);const uo=this._getLineLeftOffset(co),ga=this.__charBounds[co][lo];ga&&(hs=ga.left),this.charSpacing!==0&&lo===this._textLines[co].length&&(hs-=this._getWidthOfCharSpacing());const ba={top:us,left:uo+(hs>0?hs:0)};return this.direction==="rtl"&&(this.textAlign===A||this.textAlign===qe||this.textAlign===Je?ba.left*=-1:this.textAlign===M||this.textAlign===Ke?ba.left=uo-(hs>0?hs:0):this.textAlign!==D&&this.textAlign!==Qe||(ba.left=uo-(hs>0?hs:0))),ba}renderCursorAt(is){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(is,!0),is)}renderCursor(is,us){this._renderCursor(is,us,this.selectionStart)}getCursorRenderingData(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(is);const hs=this.get2DCursorLocation(is),lo=hs.lineIndex,co=hs.charIndex>0?hs.charIndex-1:0,uo=this.getValueOfPropertyAt(lo,co,"fontSize"),ga=this.getObjectScaling().x*this.canvas.getZoom(),ba=this.cursorWidth/ga,xa=this.getValueOfPropertyAt(lo,co,"deltaY"),_a=us.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(lo)/this.lineHeight-uo*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(lo,co,"fill"),opacity:this._currentCursorOpacity,left:us.left+us.leftOffset-ba/2,top:_a+us.top+xa,width:ba,height:uo}}_renderCursor(is,us,hs){const{color:lo,opacity:co,left:uo,top:ga,width:ba,height:xa}=this.getCursorRenderingData(hs,us);is.fillStyle=lo,is.globalAlpha=co,is.fillRect(uo,ga,ba,xa)}renderSelection(is,us){const hs={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(is,hs,us)}renderDragSourceEffect(){const is=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,is,this._getCursorBoundaries(is.selectionStart,!0))}renderDropTargetEffect(is){const us=this.getSelectionStartFromPointer(is);this.renderCursorAt(us)}_renderSelection(is,us,hs){const lo=us.selectionStart,co=us.selectionEnd,uo=this.textAlign.includes(qe),ga=this.get2DCursorLocation(lo),ba=this.get2DCursorLocation(co),xa=ga.lineIndex,_a=ba.lineIndex,$a=ga.charIndex<0?0:ga.charIndex,xl=ba.charIndex<0?0:ba.charIndex;for(let yl=xa;yl<=_a;yl++){const wl=this._getLineLeftOffset(yl)||0;let _l=this.getHeightOfLine(yl),El=0,Sl=0,Cl=0;if(yl===xa&&(Sl=this.__charBounds[xa][$a].left),yl>=xa&&yl<_a)Cl=uo&&!this.isEndOfWrapping(yl)?this.width:this.getLineWidth(yl)||5;else if(yl===_a)if(xl===0)Cl=this.__charBounds[_a][xl].left;else{const Al=this._getWidthOfCharSpacing();Cl=this.__charBounds[_a][xl-1].left+this.__charBounds[_a][xl-1].width-Al}El=_l,(this.lineHeight<1||yl===_a&&this.lineHeight>1)&&(_l/=this.lineHeight);let Tl=hs.left+wl+Sl,Dl=_l,Fl=0;const Pl=Cl-Sl;this.inCompositionMode?(is.fillStyle=this.compositionColor||"black",Dl=1,Fl=_l):is.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===A||this.textAlign===qe||this.textAlign===Je?Tl=this.width-Tl-Pl:this.textAlign===M||this.textAlign===Ke?Tl=hs.left+wl-Cl:this.textAlign!==D&&this.textAlign!==Qe||(Tl=hs.left+wl-Cl)),is.fillRect(Tl,hs.top+hs.topOffset+Fl,Pl,Dl),hs.topOffset+=El}}getCurrentCharFontSize(){const is=this._getCurrentCharIndex();return this.getValueOfPropertyAt(is.l,is.c,"fontSize")}getCurrentCharColor(){const is=this._getCurrentCharIndex();return this.getValueOfPropertyAt(is.l,is.c,K)}_getCurrentCharIndex(){const is=this.get2DCursorLocation(this.selectionStart,!0),us=is.charIndex>0?is.charIndex-1:0;return{l:is.lineIndex,c:us}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}t(Ho,"ownDefaults",Go),t(Ho,"type","IText"),tt.setClass(Ho),tt.setClass(Ho,"i-text");class No extends Ho{static getDefaults(){return s(s({},super.getDefaults()),No.ownDefaults)}constructor(is,us){super(is,s(s({},No.ownDefaults),us))}static createControls(){return{controls:Pi()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(qe)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(is){let us=0,hs=0,lo=0;const co={};for(let uo=0;uo<is.graphemeLines.length;uo++)is.graphemeText[lo]===`
`&&uo>0?(hs=0,lo++,us++):!this.splitByGrapheme&&this._reSpaceAndTab.test(is.graphemeText[lo])&&uo>0&&(hs++,lo++),co[uo]={line:us,offset:hs},lo+=is.graphemeLines[uo].length,hs+=is.graphemeLines[uo].length;return co}styleHas(is,us){if(this._styleMap&&!this.isWrapping){const hs=this._styleMap[us];hs&&(us=hs.line)}return super.styleHas(is,us)}isEmptyStyles(is){if(!this.styles)return!0;let us,hs=0,lo=is+1,co=!1;const uo=this._styleMap[is],ga=this._styleMap[is+1];uo&&(is=uo.line,hs=uo.offset),ga&&(lo=ga.line,co=lo===is,us=ga.offset);const ba=is===void 0?this.styles:{line:this.styles[is]};for(const xa in ba)for(const _a in ba[xa]){const $a=parseInt(_a,10);if($a>=hs&&(!co||$a<us))for(const xl in ba[xa][_a])return!1}return!0}_getStyleDeclaration(is,us){if(this._styleMap&&!this.isWrapping){const hs=this._styleMap[is];if(!hs)return{};is=hs.line,us=hs.offset+us}return super._getStyleDeclaration(is,us)}_setStyleDeclaration(is,us,hs){const lo=this._styleMap[is];super._setStyleDeclaration(lo.line,lo.offset+us,hs)}_deleteStyleDeclaration(is,us){const hs=this._styleMap[is];super._deleteStyleDeclaration(hs.line,hs.offset+us)}_getLineStyle(is){const us=this._styleMap[is];return!!this.styles[us.line]}_setLineStyle(is){const us=this._styleMap[is];super._setLineStyle(us.line)}_wrapText(is,us){this.isWrapping=!0;const hs=this.getGraphemeDataForRender(is),lo=[];for(let co=0;co<hs.wordsData.length;co++)lo.push(...this._wrapLine(co,us,hs));return this.isWrapping=!1,lo}getGraphemeDataForRender(is){const us=this.splitByGrapheme,hs=us?"":" ";let lo=0;return{wordsData:is.map((co,uo)=>{let ga=0;const ba=us?this.graphemeSplit(co):this.wordSplit(co);return ba.length===0?[{word:[],width:0}]:ba.map(xa=>{const _a=us?[xa]:this.graphemeSplit(xa),$a=this._measureWord(_a,uo,ga);return lo=Math.max($a,lo),ga+=_a.length+hs.length,{word:_a,width:$a}})}),largestWordWidth:lo}}_measureWord(is,us){let hs,lo=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,co=0;for(let uo=0,ga=is.length;uo<ga;uo++)co+=this._getGraphemeBox(is[uo],us,uo+lo,hs,!0).kernedWidth,hs=is[uo];return co}wordSplit(is){return is.split(this._wordJoiners)}_wrapLine(is,us,hs){let{largestWordWidth:lo,wordsData:co}=hs,uo=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const ga=this._getWidthOfCharSpacing(),ba=this.splitByGrapheme,xa=[],_a=ba?"":" ";let $a=0,xl=[],yl=0,wl=0,_l=!0;us-=uo;const El=Math.max(us,lo,this.dynamicMinWidth),Sl=co[is];let Cl;for(yl=0,Cl=0;Cl<Sl.length;Cl++){const{word:Tl,width:Dl}=Sl[Cl];yl+=Tl.length,$a+=wl+Dl-ga,$a>El&&!_l?(xa.push(xl),xl=[],$a=Dl,_l=!0):$a+=ga,_l||ba||xl.push(_a),xl=xl.concat(Tl),wl=ba?0:this._measureWord([_a],is,yl),yl++,_l=!1}return Cl&&xa.push(xl),lo+uo>this.dynamicMinWidth&&(this.dynamicMinWidth=lo-ga+uo),xa}isEndOfWrapping(is){return!this._styleMap[is+1]||this._styleMap[is+1].line!==this._styleMap[is].line}missingNewlineOffset(is,us){return this.splitByGrapheme&&!us?this.isEndOfWrapping(is)?1:0:1}_splitTextIntoLines(is){const us=super._splitTextIntoLines(is),hs=this._wrapText(us.lines,this.width),lo=new Array(hs.length);for(let co=0;co<hs.length;co++)lo[co]=hs[co].join("");return us.lines=lo,us.graphemeLines=hs,us}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const is=new Map;for(const us in this._styleMap){const hs=parseInt(us,10);if(this._textLines[hs]){const lo=this._styleMap[us].line;is.set("".concat(lo),!0)}}for(const us in this.styles)is.has(us)||delete this.styles[us]}toObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...is])}}t(No,"type","Textbox"),t(No,"textLayoutProperties",[...Ho.textLayoutProperties,"width"]),t(No,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),tt.setClass(No);class Uo extends Ir{shouldPerformLayout(is){return!!is.target.clipPath&&super.shouldPerformLayout(is)}shouldLayoutClipPath(){return!1}calcLayoutResult(is,us){const{target:hs}=is,{clipPath:lo,group:co}=hs;if(!lo||!this.shouldPerformLayout(is))return;const{width:uo,height:ga}=ae(Rr(hs,lo)),ba=new ot(uo,ga);if(lo.absolutePositioned)return{center:pe(lo.getRelativeCenterPoint(),void 0,co?co.calcTransformMatrix():void 0),size:ba};{const xa=lo.getRelativeCenterPoint().transform(hs.calcOwnMatrix(),!0);if(this.shouldPerformLayout(is)){const{center:_a=new ot,correction:$a=new ot}=this.calcBoundingBox(us,is)||{};return{center:_a.add(xa),correction:$a.subtract(xa),size:ba}}return{center:hs.getRelativeCenterPoint().add(xa),size:ba}}}}t(Uo,"type","clip-path"),tt.setClass(Uo);class qo extends Ir{getInitialSize(is,us){let{target:hs}=is,{size:lo}=us;return new ot(hs.width||lo.x,hs.height||lo.y)}}t(qo,"type","fixed"),tt.setClass(qo);class Ko extends Vr{subscribeTargets(is){const us=is.target;is.targets.reduce((hs,lo)=>(lo.parent&&hs.add(lo.parent),hs),new Set).forEach(hs=>{hs.layoutManager.subscribeTargets({target:hs,targets:[us]})})}unsubscribeTargets(is){const us=is.target,hs=us.getObjects();is.targets.reduce((lo,co)=>(co.parent&&lo.add(co.parent),lo),new Set).forEach(lo=>{!hs.some(co=>co.parent===lo)&&lo.layoutManager.unsubscribeTargets({target:lo,targets:[us]})})}}class Jo extends Hr{static getDefaults(){return s(s({},super.getDefaults()),Jo.ownDefaults)}constructor(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Jo.ownDefaults),this.setOptions(us);const{left:hs,top:lo,layoutManager:co}=us;this.groupInit(is,{left:hs,top:lo,layoutManager:co??new Ko})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var is=arguments.length,us=new Array(is),hs=0;hs<is;hs++)us[hs]=arguments[hs];this.multiSelectionStacking==="selection-order"?this.add(...us):us.forEach(lo=>{const co=this._objects.findIndex(ga=>ga.isInFrontOf(lo)),uo=co===-1?this.size():co;this.insertAt(uo,lo)})}canEnterGroup(is){return this.getObjects().some(us=>us.isDescendantOf(is)||is.isDescendantOf(us))?(a("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(is)}enterGroup(is,us){is.parent&&is.parent===is.group?is.parent._exitGroup(is):is.group&&is.parent!==is.group&&is.group.remove(is),this._enterGroup(is,us)}exitGroup(is,us){this._exitGroup(is,us),is.parent&&is.parent._enterGroup(is,!0)}_onAfterObjectsChange(is,us){super._onAfterObjectsChange(is,us);const hs=new Set;us.forEach(lo=>{const{parent:co}=lo;co&&hs.add(co)}),is===Fr?hs.forEach(lo=>{lo._onAfterObjectsChange(jr,us)}):hs.forEach(lo=>{lo._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(is,us,hs){is.save(),is.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const lo=s(s({hasControls:!1},hs),{},{forActiveSelection:!0});for(let co=0;co<this._objects.length;co++)this._objects[co]._renderControls(is,lo);super._renderControls(is,us),is.restore()}}t(Jo,"type","ActiveSelection"),t(Jo,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),tt.setClass(Jo),tt.setClass(Jo,"activeSelection");class Qo{constructor(){t(this,"resources",{})}applyFilters(is,us,hs,lo,co){const uo=co.getContext("2d");if(!uo)return;uo.drawImage(us,0,0,hs,lo);const ga={sourceWidth:hs,sourceHeight:lo,imageData:uo.getImageData(0,0,hs,lo),originalEl:us,originalImageData:uo.getImageData(0,0,hs,lo),canvasEl:co,ctx:uo,filterBackend:this};is.forEach(xa=>{xa.applyTo(ga)});const{imageData:ba}=ga;return ba.width===hs&&ba.height===lo||(co.width=ba.width,co.height=ba.height),uo.putImageData(ba,0,0),ga}}class Zo{constructor(){let{tileSize:is=o.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),t(this,"resources",{}),this.tileSize=is,this.setupGLContext(is,is),this.captureGPUInfo()}setupGLContext(is,us){this.dispose(),this.createWebGLCanvas(is,us)}createWebGLCanvas(is,us){const hs=vt({width:is,height:us}),lo=hs.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});lo&&(lo.clearColor(0,0,0,0),this.canvas=hs,this.gl=lo)}applyFilters(is,us,hs,lo,co,uo){const ga=this.gl,ba=co.getContext("2d");if(!ga||!ba)return;let xa;uo&&(xa=this.getCachedTexture(uo,us));const _a={originalWidth:us.width||us.naturalWidth||0,originalHeight:us.height||us.naturalHeight||0,sourceWidth:hs,sourceHeight:lo,destinationWidth:hs,destinationHeight:lo,context:ga,sourceTexture:this.createTexture(ga,hs,lo,xa?void 0:us),targetTexture:this.createTexture(ga,hs,lo),originalTexture:xa||this.createTexture(ga,hs,lo,xa?void 0:us),passes:is.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:co},$a=ga.createFramebuffer();return ga.bindFramebuffer(ga.FRAMEBUFFER,$a),is.forEach(xl=>{xl&&xl.applyTo(_a)}),function(xl){const yl=xl.targetCanvas,wl=yl.width,_l=yl.height,El=xl.destinationWidth,Sl=xl.destinationHeight;wl===El&&_l===Sl||(yl.width=El,yl.height=Sl)}(_a),this.copyGLTo2D(ga,_a),ga.bindTexture(ga.TEXTURE_2D,null),ga.deleteTexture(_a.sourceTexture),ga.deleteTexture(_a.targetTexture),ga.deleteFramebuffer($a),ba.setTransform(1,0,0,1,0,0),_a}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(is,us,hs,lo,co){const{NEAREST:uo,TEXTURE_2D:ga,RGBA:ba,UNSIGNED_BYTE:xa,CLAMP_TO_EDGE:_a,TEXTURE_MAG_FILTER:$a,TEXTURE_MIN_FILTER:xl,TEXTURE_WRAP_S:yl,TEXTURE_WRAP_T:wl}=is,_l=is.createTexture();return is.bindTexture(ga,_l),is.texParameteri(ga,$a,co||uo),is.texParameteri(ga,xl,co||uo),is.texParameteri(ga,yl,_a),is.texParameteri(ga,wl,_a),lo?is.texImage2D(ga,0,ba,ba,xa,lo):is.texImage2D(ga,0,ba,us,hs,0,ba,xa,null),_l}getCachedTexture(is,us,hs){const{textureCache:lo}=this;if(lo[is])return lo[is];{const co=this.createTexture(this.gl,us.width,us.height,us,hs);return co&&(lo[is]=co),co}}evictCachesForKey(is){this.textureCache[is]&&(this.gl.deleteTexture(this.textureCache[is]),delete this.textureCache[is])}copyGLTo2D(is,us){const hs=is.canvas,lo=us.targetCanvas,co=lo.getContext("2d");if(!co)return;co.translate(0,lo.height),co.scale(1,-1);const uo=hs.height-lo.height;co.drawImage(hs,0,uo,lo.width,lo.height,0,0,lo.width,lo.height)}copyGLTo2DPutImageData(is,us){const hs=us.targetCanvas.getContext("2d"),lo=us.destinationWidth,co=us.destinationHeight,uo=lo*co*4;if(!hs)return;const ga=new Uint8Array(this.imageBuffer,0,uo),ba=new Uint8ClampedArray(this.imageBuffer,0,uo);is.readPixels(0,0,lo,co,is.RGBA,is.UNSIGNED_BYTE,ga);const xa=new ImageData(ba,lo,co);hs.putImageData(xa,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const is=this.gl,us={renderer:"",vendor:""};if(!is)return us;const hs=is.getExtension("WEBGL_debug_renderer_info");if(hs){const lo=is.getParameter(hs.UNMASKED_RENDERER_WEBGL),co=is.getParameter(hs.UNMASKED_VENDOR_WEBGL);lo&&(us.renderer=lo.toLowerCase()),co&&(us.vendor=co.toLowerCase())}return this.gpuInfo=us,us}}let $o;function ta(){const{WebGLProbe:cs}=p();return cs.queryWebGL(pt()),o.enableGLFiltering&&cs.isSupported(o.textureSize)?new Zo({tileSize:o.textureSize}):new Qo}function ea(){return!$o&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&($o=ta()),$o}const ia=["filters","resizeFilter","src","crossOrigin","type"],ra=["cropX","cropY"];class na extends ji{static getDefaults(){return s(s({},super.getDefaults()),na.ownDefaults)}constructor(is,us){super(),t(this,"_lastScaleX",1),t(this,"_lastScaleY",1),t(this,"_filterScalingX",1),t(this,"_filterScalingY",1),this.filters=[],Object.assign(this,na.ownDefaults),this.setOptions(us),this.cacheKey="texture".concat(ft()),this.setElement(typeof is=="string"?(this.canvas&&Kt(this.canvas.getElement())||m()).getElementById(is):is,us)}getElement(){return this._element}setElement(is){var us;let hs=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=is,this._originalElement=is,this._setWidthHeight(hs),(us=is.classList)===null||us===void 0||us.add(na.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(is){const us=ea(!1);us instanceof Zo&&us.evictCachesForKey(is)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(is=>{const us=this[is];us&&p().dispose(us),this[is]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const is=this.getElement();return is?{width:is.naturalWidth||is.width,height:is.naturalHeight||is.height}:{width:0,height:0}}_stroke(is){if(!this.stroke||this.strokeWidth===0)return;const us=this.width/2,hs=this.height/2;is.beginPath(),is.moveTo(-us,-hs),is.lineTo(us,-hs),is.lineTo(us,hs),is.lineTo(-us,hs),is.lineTo(-us,-hs),is.closePath()}toObject(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const us=[];return this.filters.forEach(hs=>{hs&&us.push(hs.toObject())}),s(s({},super.toObject([...ra,...is])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:us},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const is=[],us=this._element,hs=-this.width/2,lo=-this.height/2;let co=[],uo=[],ga="",ba="";if(!us)return[];if(this.hasCrop()){const xa=ft();co.push('<clipPath id="imageCrop_'+xa+`">
`,'	<rect x="'+hs+'" y="'+lo+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),ga=' clip-path="url(#imageCrop_'+xa+')" '}if(this.imageSmoothing||(ba=' image-rendering="optimizeSpeed"'),is.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(hs-this.cropX,'" y="').concat(lo-this.cropY,'" width="').concat(us.width||us.naturalWidth,'" height="').concat(us.height||us.naturalHeight,'"').concat(ba).concat(ga,`></image>
`)),this.stroke||this.strokeDashArray){const xa=this.fill;this.fill=null,uo=['	<rect x="'.concat(hs,'" y="').concat(lo,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=xa}return co=this.paintFirst!==K?co.concat(uo,is):co.concat(is,uo),co}getSrc(is){const us=is?this._element:this._originalElement;return us?us.toDataURL?us.toDataURL():this.srcFromAttribute?us.getAttribute("src")||"":us.src:this.src||""}getSvgSrc(is){return this.getSrc(is)}setSrc(is){let{crossOrigin:us,signal:hs}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return It(is,{crossOrigin:us,signal:hs}).then(lo=>{us!==void 0&&this.set({crossOrigin:us}),this.setElement(lo)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const is=this.resizeFilter,us=this.minimumScaleTrigger,hs=this.getTotalObjectScaling(),lo=hs.x,co=hs.y,uo=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!is||lo>us&&co>us)return this._element=uo,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=lo,void(this._lastScaleY=co);const ga=vt(uo),{width:ba,height:xa}=uo;this._element=ga,this._lastScaleX=is.scaleX=lo,this._lastScaleY=is.scaleY=co,ea().applyFilters([is],uo,ba,xa,this._element),this._filterScalingX=ga.width/this._originalElement.width,this._filterScalingY=ga.height/this._originalElement.height}applyFilters(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(is=is.filter(co=>co&&!co.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),is.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const us=this._originalElement,hs=us.naturalWidth||us.width,lo=us.naturalHeight||us.height;if(this._element===this._originalElement){const co=vt({width:hs,height:lo});this._element=co,this._filteredEl=co}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,hs,lo),this._lastScaleX=1,this._lastScaleY=1);ea().applyFilters(is,this._originalElement,hs,lo,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(is){is.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(is),this._renderPaintInOrder(is)}drawCacheOnCanvas(is){is.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(is)}shouldCache(){return this.needsItsOwnCache()}_renderFill(is){const us=this._element;if(!us)return;const hs=this._filterScalingX,lo=this._filterScalingY,co=this.width,uo=this.height,ga=Math.max(this.cropX,0),ba=Math.max(this.cropY,0),xa=us.naturalWidth||us.width,_a=us.naturalHeight||us.height,$a=ga*hs,xl=ba*lo,yl=Math.min(co*hs,xa-$a),wl=Math.min(uo*lo,_a-xl),_l=-co/2,El=-uo/2,Sl=Math.min(co,xa/hs-ga),Cl=Math.min(uo,_a/lo-ba);us&&is.drawImage(us,$a,xl,yl,wl,_l,El,Sl,Cl)}_needsResize(){const is=this.getTotalObjectScaling();return is.x!==this._lastScaleX||is.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:is,height:us}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const hs=this.getOriginalSize();this.width=is||hs.width,this.height=us||hs.height}parsePreserveAspectRatioAttribute(){const is=Ie(this.preserveAspectRatio||""),us=this.width,hs=this.height,lo={width:us,height:hs};let co,uo=this._element.width,ga=this._element.height,ba=1,xa=1,_a=0,$a=0,xl=0,yl=0;return!is||is.alignX===j&&is.alignY===j?(ba=us/uo,xa=hs/ga):(is.meetOrSlice==="meet"&&(ba=xa=Nr(this._element,lo),co=(us-uo*ba)/2,is.alignX==="Min"&&(_a=-co),is.alignX==="Max"&&(_a=co),co=(hs-ga*xa)/2,is.alignY==="Min"&&($a=-co),is.alignY==="Max"&&($a=co)),is.meetOrSlice==="slice"&&(ba=xa=Ur(this._element,lo),co=uo-us/ba,is.alignX==="Mid"&&(xl=co/2),is.alignX==="Max"&&(xl=co),co=ga-hs/xa,is.alignY==="Mid"&&(yl=co/2),is.alignY==="Max"&&(yl=co),uo=us/ba,ga=hs/xa)),{width:uo,height:ga,scaleX:ba,scaleY:xa,offsetLeft:_a,offsetTop:$a,cropX:xl,cropY:yl}}static fromObject(is,us){let{filters:hs,resizeFilter:lo,src:co,crossOrigin:uo,type:ga}=is,ba=i(is,ia);return Promise.all([It(co,s(s({},us),{},{crossOrigin:uo})),hs&&Bt(hs,us),lo&&Bt([lo],us),Xt(ba,us)]).then(xa=>{let[_a,$a=[],[xl]=[],yl={}]=xa;return new this(_a,s(s({},ba),{},{src:co,filters:$a,resizeFilter:xl},yl))})}static fromURL(is){let{crossOrigin:us=null,signal:hs}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},lo=arguments.length>2?arguments[2]:void 0;return It(is,{crossOrigin:us,signal:hs}).then(co=>new this(co,lo))}static async fromElement(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},hs=arguments.length>2?arguments[2]:void 0;const lo=Dr(is,this.ATTRIBUTE_NAMES,hs);return this.fromURL(lo["xlink:href"]||lo.href,us,lo).catch(co=>(a("log","Unable to parse Image",co),null))}}t(na,"type","Image"),t(na,"cacheProperties",[...Ms,...ra]),t(na,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),t(na,"CSS_CANVAS","canvas-img"),t(na,"ATTRIBUTE_NAMES",[...Ji,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),tt.setClass(na),tt.setSVGClass(na);Ye(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Fa=cs=>cs.webgl!==void 0,Ra="precision highp float",Ia=`
    `.concat(Ra,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),Ba=["type"],Xa=["type"],Ya=new RegExp(Ra,"g");class Wa{get type(){return this.constructor.type}constructor(){let is=i(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ba);Object.assign(this,this.constructor.defaults,is)}getFragmentSource(){return Ia}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(is){let us=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),hs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:lo="highp"}}=p();lo!=="highp"&&(us=us.replace(Ya,Ra.replace("highp",lo)));const co=is.createShader(is.VERTEX_SHADER),uo=is.createShader(is.FRAGMENT_SHADER),ga=is.createProgram();if(!co||!uo||!ga)throw new h("Vertex, fragment shader or program creation error");if(is.shaderSource(co,hs),is.compileShader(co),!is.getShaderParameter(co,is.COMPILE_STATUS))throw new h("Vertex shader compile error for ".concat(this.type,": ").concat(is.getShaderInfoLog(co)));if(is.shaderSource(uo,us),is.compileShader(uo),!is.getShaderParameter(uo,is.COMPILE_STATUS))throw new h("Fragment shader compile error for ".concat(this.type,": ").concat(is.getShaderInfoLog(uo)));if(is.attachShader(ga,co),is.attachShader(ga,uo),is.linkProgram(ga),!is.getProgramParameter(ga,is.LINK_STATUS))throw new h('Shader link error for "'.concat(this.type,'" ').concat(is.getProgramInfoLog(ga)));const ba=this.getUniformLocations(is,ga)||{};return ba.uStepW=is.getUniformLocation(ga,"uStepW"),ba.uStepH=is.getUniformLocation(ga,"uStepH"),{program:ga,attributeLocations:this.getAttributeLocations(is,ga),uniformLocations:ba}}getAttributeLocations(is,us){return{aPosition:is.getAttribLocation(us,"aPosition")}}getUniformLocations(is,us){const hs=this.constructor.uniformLocations,lo={};for(let co=0;co<hs.length;co++)lo[hs[co]]=is.getUniformLocation(us,hs[co]);return lo}sendAttributeData(is,us,hs){const lo=us.aPosition,co=is.createBuffer();is.bindBuffer(is.ARRAY_BUFFER,co),is.enableVertexAttribArray(lo),is.vertexAttribPointer(lo,2,is.FLOAT,!1,0,0),is.bufferData(is.ARRAY_BUFFER,hs,is.STATIC_DRAW)}_setupFrameBuffer(is){const us=is.context;if(is.passes>1){const hs=is.destinationWidth,lo=is.destinationHeight;is.sourceWidth===hs&&is.sourceHeight===lo||(us.deleteTexture(is.targetTexture),is.targetTexture=is.filterBackend.createTexture(us,hs,lo)),us.framebufferTexture2D(us.FRAMEBUFFER,us.COLOR_ATTACHMENT0,us.TEXTURE_2D,is.targetTexture,0)}else us.bindFramebuffer(us.FRAMEBUFFER,null),us.finish()}_swapTextures(is){is.passes--,is.pass++;const us=is.targetTexture;is.targetTexture=is.sourceTexture,is.sourceTexture=us}isNeutralState(is){return!1}applyTo(is){Fa(is)?(this._setupFrameBuffer(is),this.applyToWebGL(is),this._swapTextures(is)):this.applyTo2d(is)}applyTo2d(is){}getCacheKey(){return this.type}retrieveShader(is){const us=this.getCacheKey();return is.programCache[us]||(is.programCache[us]=this.createProgram(is.context)),is.programCache[us]}applyToWebGL(is){const us=is.context,hs=this.retrieveShader(is);is.pass===0&&is.originalTexture?us.bindTexture(us.TEXTURE_2D,is.originalTexture):us.bindTexture(us.TEXTURE_2D,is.sourceTexture),us.useProgram(hs.program),this.sendAttributeData(us,hs.attributeLocations,is.aPosition),us.uniform1f(hs.uniformLocations.uStepW,1/is.sourceWidth),us.uniform1f(hs.uniformLocations.uStepH,1/is.sourceHeight),this.sendUniformData(us,hs.uniformLocations),us.viewport(0,0,is.destinationWidth,is.destinationHeight),us.drawArrays(us.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(is,us,hs){is.activeTexture(hs),is.bindTexture(is.TEXTURE_2D,us),is.activeTexture(is.TEXTURE0)}unbindAdditionalTexture(is,us){is.activeTexture(us),is.bindTexture(is.TEXTURE_2D,null),is.activeTexture(is.TEXTURE0)}sendUniformData(is,us){}createHelpLayer(is){if(!is.helpLayer){const{sourceWidth:us,sourceHeight:hs}=is,lo=vt({width:us,height:hs});is.helpLayer=lo}}toObject(){const is=Object.keys(this.constructor.defaults||{});return s({type:this.type},is.reduce((us,hs)=>(us[hs]=this[hs],us),{}))}toJSON(){return this.toObject()}static async fromObject(is,us){return new this(i(is,Xa))}}t(Wa,"type","BaseFilter"),t(Wa,"uniformLocations",[]);const Va={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class za extends Wa{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(Va[this.mode],`
        }
      }
      `)}applyTo2d(is){let{imageData:{data:us}}=is;const hs=new Le(this.color).getSource(),lo=this.alpha,co=hs[0]*lo,uo=hs[1]*lo,ga=hs[2]*lo,ba=1-lo;for(let xa=0;xa<us.length;xa+=4){const _a=us[xa],$a=us[xa+1],xl=us[xa+2];let yl,wl,_l;switch(this.mode){case"multiply":yl=_a*co/255,wl=$a*uo/255,_l=xl*ga/255;break;case"screen":yl=255-(255-_a)*(255-co)/255,wl=255-(255-$a)*(255-uo)/255,_l=255-(255-xl)*(255-ga)/255;break;case"add":yl=_a+co,wl=$a+uo,_l=xl+ga;break;case"difference":yl=Math.abs(_a-co),wl=Math.abs($a-uo),_l=Math.abs(xl-ga);break;case"subtract":yl=_a-co,wl=$a-uo,_l=xl-ga;break;case"darken":yl=Math.min(_a,co),wl=Math.min($a,uo),_l=Math.min(xl,ga);break;case"lighten":yl=Math.max(_a,co),wl=Math.max($a,uo),_l=Math.max(xl,ga);break;case"overlay":yl=co<128?2*_a*co/255:255-2*(255-_a)*(255-co)/255,wl=uo<128?2*$a*uo/255:255-2*(255-$a)*(255-uo)/255,_l=ga<128?2*xl*ga/255:255-2*(255-xl)*(255-ga)/255;break;case"exclusion":yl=co+_a-2*co*_a/255,wl=uo+$a-2*uo*$a/255,_l=ga+xl-2*ga*xl/255;break;case"tint":yl=co+_a*ba,wl=uo+$a*ba,_l=ga+xl*ba}us[xa]=yl,us[xa+1]=wl,us[xa+2]=_l}}sendUniformData(is,us){const hs=new Le(this.color).getSource();hs[0]=this.alpha*hs[0]/255,hs[1]=this.alpha*hs[1]/255,hs[2]=this.alpha*hs[2]/255,hs[3]=this.alpha,is.uniform4fv(us.uColor,hs)}}t(za,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),t(za,"type","BlendColor"),t(za,"uniformLocations",["uColor"]),tt.setClass(za);const Ga={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},Ha=["type","image"];class Na extends Wa{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Ga[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(is){const us=is.context,hs=this.createTexture(is.filterBackend,this.image);this.bindAdditionalTexture(us,hs,us.TEXTURE1),super.applyToWebGL(is),this.unbindAdditionalTexture(us,us.TEXTURE1)}createTexture(is,us){return is.getCachedTexture(us.cacheKey,us.getElement())}calculateMatrix(){const is=this.image,{width:us,height:hs}=is.getElement();return[1/is.scaleX,0,0,0,1/is.scaleY,0,-is.left/us,-is.top/hs,1]}applyTo2d(is){let{imageData:{data:us,width:hs,height:lo},filterBackend:{resources:co}}=is;const uo=this.image;co.blendImage||(co.blendImage=pt());const ga=co.blendImage,ba=ga.getContext("2d");ga.width!==hs||ga.height!==lo?(ga.width=hs,ga.height=lo):ba.clearRect(0,0,hs,lo),ba.setTransform(uo.scaleX,0,0,uo.scaleY,uo.left,uo.top),ba.drawImage(uo.getElement(),0,0,hs,lo);const xa=ba.getImageData(0,0,hs,lo).data;for(let _a=0;_a<us.length;_a+=4){const $a=us[_a],xl=us[_a+1],yl=us[_a+2],wl=us[_a+3],_l=xa[_a],El=xa[_a+1],Sl=xa[_a+2],Cl=xa[_a+3];switch(this.mode){case"multiply":us[_a]=$a*_l/255,us[_a+1]=xl*El/255,us[_a+2]=yl*Sl/255,us[_a+3]=wl*Cl/255;break;case"mask":us[_a+3]=Cl}}}sendUniformData(is,us){const hs=this.calculateMatrix();is.uniform1i(us.uImage,1),is.uniformMatrix3fv(us.uTransformMatrix,!1,hs)}toObject(){return s(s({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(is,us){let{type:hs,image:lo}=is,co=i(is,Ha);return na.fromObject(lo,us).then(uo=>new this(s(s({},co),{},{image:uo})))}}t(Na,"type","BlendImage"),t(Na,"defaults",{mode:"multiply",alpha:1}),t(Na,"uniformLocations",["uTransformMatrix","uImage"]),tt.setClass(Na);class Ua extends Wa{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(is){Fa(is)?(this.aspectRatio=is.sourceWidth/is.sourceHeight,is.passes++,this._setupFrameBuffer(is),this.horizontal=!0,this.applyToWebGL(is),this._swapTextures(is),this._setupFrameBuffer(is),this.horizontal=!1,this.applyToWebGL(is),this._swapTextures(is)):this.applyTo2d(is)}applyTo2d(is){let{imageData:{data:us,width:hs,height:lo}}=is;this.aspectRatio=hs/lo,this.horizontal=!0;let co=this.getBlurValue()*hs;const uo=new Uint8ClampedArray(us),ga=15,ba=4*hs;for(let xa=0;xa<us.length;xa+=4){let _a=0,$a=0,xl=0,yl=0,wl=0;const _l=xa-xa%ba,El=_l+ba;for(let Sl=-14;Sl<ga;Sl++){const Cl=Sl/ga,Tl=4*Math.floor(co*Cl),Dl=1-Math.abs(Cl);let Fl=xa+Tl;Fl<_l?Fl=_l:Fl>El&&(Fl=El);const Pl=us[Fl+3]*Dl;_a+=us[Fl]*Pl,$a+=us[Fl+1]*Pl,xl+=us[Fl+2]*Pl,yl+=Pl,wl+=Dl}uo[xa]=_a/yl,uo[xa+1]=$a/yl,uo[xa+2]=xl/yl,uo[xa+3]=yl/wl}this.horizontal=!1,co=this.getBlurValue()*lo;for(let xa=0;xa<uo.length;xa+=4){let _a=0,$a=0,xl=0,yl=0,wl=0;const _l=xa%ba,El=uo.length-ba+_l;for(let Sl=-14;Sl<ga;Sl++){const Cl=Sl/ga,Tl=Math.floor(co*Cl)*ba,Dl=1-Math.abs(Cl);let Fl=xa+Tl;Fl<_l?Fl=_l:Fl>El&&(Fl=El);const Pl=uo[Fl+3]*Dl;_a+=uo[Fl]*Pl,$a+=uo[Fl+1]*Pl,xl+=uo[Fl+2]*Pl,yl+=Pl,wl+=Dl}us[xa]=_a/yl,us[xa+1]=$a/yl,us[xa+2]=xl/yl,us[xa+3]=yl/wl}}sendUniformData(is,us){const hs=this.chooseRightDelta();is.uniform2fv(us.uDelta,hs)}isNeutralState(){return this.blur===0}getBlurValue(){let is=1;const{horizontal:us,aspectRatio:hs}=this;return us?hs>1&&(is=1/hs):hs<1&&(is=hs),is*this.blur*.12}chooseRightDelta(){const is=this.getBlurValue();return this.horizontal?[is,0]:[0,is]}}t(Ua,"type","Blur"),t(Ua,"defaults",{blur:0}),t(Ua,"uniformLocations",["uDelta"]),tt.setClass(Ua);class qa extends Wa{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(is){let{imageData:{data:us}}=is;const hs=Math.round(255*this.brightness);for(let lo=0;lo<us.length;lo+=4)us[lo]+=hs,us[lo+1]+=hs,us[lo+2]+=hs}isNeutralState(){return this.brightness===0}sendUniformData(is,us){is.uniform1f(us.uBrightness,this.brightness)}}t(qa,"type","Brightness"),t(qa,"defaults",{brightness:0}),t(qa,"uniformLocations",["uBrightness"]),tt.setClass(qa);const Ka={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Ja extends Wa{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(is){const us=is.imageData.data,hs=this.matrix,lo=this.colorsOnly;for(let co=0;co<us.length;co+=4){const uo=us[co],ga=us[co+1],ba=us[co+2];if(us[co]=uo*hs[0]+ga*hs[1]+ba*hs[2]+255*hs[4],us[co+1]=uo*hs[5]+ga*hs[6]+ba*hs[7]+255*hs[9],us[co+2]=uo*hs[10]+ga*hs[11]+ba*hs[12]+255*hs[14],!lo){const xa=us[co+3];us[co]+=xa*hs[3],us[co+1]+=xa*hs[8],us[co+2]+=xa*hs[13],us[co+3]=uo*hs[15]+ga*hs[16]+ba*hs[17]+xa*hs[18]+255*hs[19]}}}sendUniformData(is,us){const hs=this.matrix,lo=[hs[0],hs[1],hs[2],hs[3],hs[5],hs[6],hs[7],hs[8],hs[10],hs[11],hs[12],hs[13],hs[15],hs[16],hs[17],hs[18]],co=[hs[4],hs[9],hs[14],hs[19]];is.uniformMatrix4fv(us.uColorMatrix,!1,lo),is.uniform4fv(us.uConstants,co)}toObject(){return s(s({},super.toObject()),{},{matrix:[...this.matrix]})}}function Qa(cs,is){var us;const hs=(t(us=class extends Ja{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",cs),t(us,"defaults",{colorsOnly:!1,matrix:is}),us);return tt.setClass(hs,cs),hs}t(Ja,"type","ColorMatrix"),t(Ja,"defaults",Ka),t(Ja,"uniformLocations",["uColorMatrix","uConstants"]),tt.setClass(Ja);Qa("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Qa("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Qa("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Qa("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Qa("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Qa("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Qa("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class nh extends Wa{constructor(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(is),this.subFilters=is.subFilters||[]}applyTo(is){Fa(is)&&(is.passes+=this.subFilters.length-1),this.subFilters.forEach(us=>{us.applyTo(is)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(is=>is.toObject())}}isNeutralState(){return!this.subFilters.some(is=>!is.isNeutralState())}static fromObject(is,us){return Promise.all((is.subFilters||[]).map(hs=>tt.getClass(hs.type).fromObject(hs,us))).then(hs=>new this({subFilters:hs}))}}t(nh,"type","Composed"),tt.setClass(nh);class oh extends Wa{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(is){let{imageData:{data:us}}=is;const hs=Math.floor(255*this.contrast),lo=259*(hs+255)/(255*(259-hs));for(let co=0;co<us.length;co+=4)us[co]=lo*(us[co]-128)+128,us[co+1]=lo*(us[co+1]-128)+128,us[co+2]=lo*(us[co+2]-128)+128}sendUniformData(is,us){is.uniform1f(us.uContrast,this.contrast)}}t(oh,"type","Contrast"),t(oh,"defaults",{contrast:0}),t(oh,"uniformLocations",["uContrast"]),tt.setClass(oh);const ah={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class hh extends Wa{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return ah[this.getCacheKey()]}applyTo2d(is){const us=is.imageData,hs=us.data,lo=this.matrix,co=Math.round(Math.sqrt(lo.length)),uo=Math.floor(co/2),ga=us.width,ba=us.height,xa=is.ctx.createImageData(ga,ba),_a=xa.data,$a=this.opaque?1:0;let xl,yl,wl,_l,El,Sl,Cl,Tl,Dl,Fl,Pl,Al,Rl;for(Pl=0;Pl<ba;Pl++)for(Fl=0;Fl<ga;Fl++){for(El=4*(Pl*ga+Fl),xl=0,yl=0,wl=0,_l=0,Rl=0;Rl<co;Rl++)for(Al=0;Al<co;Al++)Cl=Pl+Rl-uo,Sl=Fl+Al-uo,Cl<0||Cl>=ba||Sl<0||Sl>=ga||(Tl=4*(Cl*ga+Sl),Dl=lo[Rl*co+Al],xl+=hs[Tl]*Dl,yl+=hs[Tl+1]*Dl,wl+=hs[Tl+2]*Dl,$a||(_l+=hs[Tl+3]*Dl));_a[El]=xl,_a[El+1]=yl,_a[El+2]=wl,_a[El+3]=$a?hs[El+3]:_l}is.imageData=xa}sendUniformData(is,us){is.uniform1fv(us.uMatrix,this.matrix)}toObject(){return s(s({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}t(hh,"type","Convolute"),t(hh,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),t(hh,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),tt.setClass(hh);const ch="Gamma";class lh extends Wa{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let is=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(is),this.gamma=is.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(is){let{imageData:{data:us}}=is;const hs=this.gamma,lo=1/hs[0],co=1/hs[1],uo=1/hs[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const ga=this.rgbValues;for(let ba=0;ba<256;ba++)ga.r[ba]=255*Math.pow(ba/255,lo),ga.g[ba]=255*Math.pow(ba/255,co),ga.b[ba]=255*Math.pow(ba/255,uo);for(let ba=0;ba<us.length;ba+=4)us[ba]=ga.r[us[ba]],us[ba+1]=ga.g[us[ba+1]],us[ba+2]=ga.b[us[ba+2]]}sendUniformData(is,us){is.uniform3fv(us.uGamma,this.gamma)}isNeutralState(){const{gamma:is}=this;return is[0]===1&&is[1]===1&&is[2]===1}toObject(){return{type:ch,gamma:this.gamma.concat()}}}t(lh,"type",ch),t(lh,"defaults",{gamma:[1,1,1]}),t(lh,"uniformLocations",["uGamma"]),tt.setClass(lh);const uh={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class dh extends Wa{applyTo2d(is){let{imageData:{data:us}}=is;for(let hs,lo=0;lo<us.length;lo+=4){const co=us[lo],uo=us[lo+1],ga=us[lo+2];switch(this.mode){case"average":hs=(co+uo+ga)/3;break;case"lightness":hs=(Math.min(co,uo,ga)+Math.max(co,uo,ga))/2;break;case"luminosity":hs=.21*co+.72*uo+.07*ga}us[lo+2]=us[lo+1]=us[lo]=hs}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return uh[this.mode]}sendUniformData(is,us){is.uniform1i(us.uMode,1)}isNeutralState(){return!1}}t(dh,"type","Grayscale"),t(dh,"defaults",{mode:"average"}),t(dh,"uniformLocations",["uMode"]),tt.setClass(dh);const gh=s(s({},Ka),{},{rotation:0});class fh extends Ja{calculateMatrix(){const is=this.rotation*Math.PI,us=rt(is),hs=nt(is),lo=1/3,co=Math.sqrt(lo)*hs,uo=1-us;this.matrix=[us+uo/3,lo*uo-co,lo*uo+co,0,0,lo*uo+co,us+lo*uo,lo*uo-co,0,0,lo*uo-co,lo*uo+co,us+lo*uo,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(is){this.calculateMatrix(),super.applyTo(is)}toObject(){return{type:this.type,rotation:this.rotation}}}t(fh,"type","HueRotation"),t(fh,"defaults",gh),tt.setClass(fh);class ph extends Wa{applyTo2d(is){let{imageData:{data:us}}=is;for(let hs=0;hs<us.length;hs+=4)us[hs]=255-us[hs],us[hs+1]=255-us[hs+1],us[hs+2]=255-us[hs+2],this.alpha&&(us[hs+3]=255-us[hs+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(is,us){is.uniform1i(us.uInvert,Number(this.invert)),is.uniform1i(us.uAlpha,Number(this.alpha))}}t(ph,"type","Invert"),t(ph,"defaults",{alpha:!1,invert:!0}),t(ph,"uniformLocations",["uInvert","uAlpha"]),tt.setClass(ph);class mh extends Wa{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(is){let{imageData:{data:us}}=is;const hs=this.noise;for(let lo=0;lo<us.length;lo+=4){const co=(.5-Math.random())*hs;us[lo]+=co,us[lo+1]+=co,us[lo+2]+=co}}sendUniformData(is,us){is.uniform1f(us.uNoise,this.noise/255),is.uniform1f(us.uSeed,Math.random())}isNeutralState(){return this.noise===0}}t(mh,"type","Noise"),t(mh,"defaults",{noise:0}),t(mh,"uniformLocations",["uNoise","uSeed"]),tt.setClass(mh);class vh extends Wa{applyTo2d(is){let{imageData:{data:us,width:hs,height:lo}}=is;for(let co=0;co<lo;co+=this.blocksize)for(let uo=0;uo<hs;uo+=this.blocksize){const ga=4*co*hs+4*uo,ba=us[ga],xa=us[ga+1],_a=us[ga+2],$a=us[ga+3];for(let xl=co;xl<Math.min(co+this.blocksize,lo);xl++)for(let yl=uo;yl<Math.min(uo+this.blocksize,hs);yl++){const wl=4*xl*hs+4*yl;us[wl]=ba,us[wl+1]=xa,us[wl+2]=_a,us[wl+3]=$a}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(is,us){is.uniform1f(us.uBlocksize,this.blocksize)}}t(vh,"type","Pixelate"),t(vh,"defaults",{blocksize:4}),t(vh,"uniformLocations",["uBlocksize"]),tt.setClass(vh);class yh extends Wa{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(is){let{imageData:{data:us}}=is;const hs=255*this.distance,lo=new Le(this.color).getSource(),co=[lo[0]-hs,lo[1]-hs,lo[2]-hs],uo=[lo[0]+hs,lo[1]+hs,lo[2]+hs];for(let ga=0;ga<us.length;ga+=4){const ba=us[ga],xa=us[ga+1],_a=us[ga+2];ba>co[0]&&xa>co[1]&&_a>co[2]&&ba<uo[0]&&xa<uo[1]&&_a<uo[2]&&(us[ga+3]=0)}}sendUniformData(is,us){const hs=new Le(this.color).getSource(),lo=this.distance,co=[0+hs[0]/255-lo,0+hs[1]/255-lo,0+hs[2]/255-lo,1],uo=[hs[0]/255+lo,hs[1]/255+lo,hs[2]/255+lo,1];is.uniform4fv(us.uLow,co),is.uniform4fv(us.uHigh,uo)}}t(yh,"type","RemoveColor"),t(yh,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),t(yh,"uniformLocations",["uLow","uHigh"]),tt.setClass(yh);class _h extends Wa{sendUniformData(is,us){is.uniform2fv(us.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),is.uniform1fv(us.uTaps,this.taps)}getFilterWindow(){const is=this.tempScale;return Math.ceil(this.lanczosLobes/is)}getCacheKey(){const is=this.getFilterWindow();return"".concat(this.type,"_").concat(is)}getFragmentSource(){const is=this.getFilterWindow();return this.generateShader(is)}getTaps(){const is=this.lanczosCreate(this.lanczosLobes),us=this.tempScale,hs=this.getFilterWindow(),lo=new Array(hs);for(let co=1;co<=hs;co++)lo[co-1]=is(co*us);return lo}generateShader(is){const us=new Array(is);for(let hs=1;hs<=is;hs++)us[hs-1]="".concat(hs,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(is,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(us.map((hs,lo)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(hs,") * uTaps[").concat(lo,"] + texture2D(uTexture, vTexCoord - ").concat(hs,") * uTaps[").concat(lo,`];
              sum += 2.0 * uTaps[`).concat(lo,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(is){is.passes++,this.width=is.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=is.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),is.destinationWidth=this.dW,super.applyTo(is),is.sourceWidth=is.destinationWidth,this.height=is.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),is.destinationHeight=this.dH,super.applyTo(is),is.sourceHeight=is.destinationHeight}applyTo(is){Fa(is)?this.applyToForWebgl(is):this.applyTo2d(is)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(is){return us=>{if(us>=is||us<=-is)return 0;if(us<11920929e-14&&us>-11920929e-14)return 1;const hs=(us*=Math.PI)/is;return Math.sin(us)/us*Math.sin(hs)/hs}}applyTo2d(is){const us=is.imageData,hs=this.scaleX,lo=this.scaleY;this.rcpScaleX=1/hs,this.rcpScaleY=1/lo;const co=us.width,uo=us.height,ga=Math.round(co*hs),ba=Math.round(uo*lo);let xa;xa=this.resizeType==="sliceHack"?this.sliceByTwo(is,co,uo,ga,ba):this.resizeType==="hermite"?this.hermiteFastResize(is,co,uo,ga,ba):this.resizeType==="bilinear"?this.bilinearFiltering(is,co,uo,ga,ba):this.resizeType==="lanczos"?this.lanczosResize(is,co,uo,ga,ba):new ImageData(ga,ba),is.imageData=xa}sliceByTwo(is,us,hs,lo,co){const uo=is.imageData,ga=.5;let ba=!1,xa=!1,_a=us*ga,$a=hs*ga;const xl=is.filterBackend.resources;let yl=0,wl=0;const _l=us;let El=0;xl.sliceByTwo||(xl.sliceByTwo=pt());const Sl=xl.sliceByTwo;(Sl.width<1.5*us||Sl.height<hs)&&(Sl.width=1.5*us,Sl.height=hs);const Cl=Sl.getContext("2d");for(Cl.clearRect(0,0,1.5*us,hs),Cl.putImageData(uo,0,0),lo=Math.floor(lo),co=Math.floor(co);!ba||!xa;)us=_a,hs=$a,lo<Math.floor(_a*ga)?_a=Math.floor(_a*ga):(_a=lo,ba=!0),co<Math.floor($a*ga)?$a=Math.floor($a*ga):($a=co,xa=!0),Cl.drawImage(Sl,yl,wl,us,hs,_l,El,_a,$a),yl=_l,wl=El,El+=$a;return Cl.getImageData(yl,wl,lo,co)}lanczosResize(is,us,hs,lo,co){const uo=is.imageData.data,ga=is.ctx.createImageData(lo,co),ba=ga.data,xa=this.lanczosCreate(this.lanczosLobes),_a=this.rcpScaleX,$a=this.rcpScaleY,xl=2/this.rcpScaleX,yl=2/this.rcpScaleY,wl=Math.ceil(_a*this.lanczosLobes/2),_l=Math.ceil($a*this.lanczosLobes/2),El={},Sl={x:0,y:0},Cl={x:0,y:0};return function Tl(Dl){let Fl,Pl,Al,Rl,Il,Bl,Ol,zl,Hl,ou,au;for(Sl.x=(Dl+.5)*_a,Cl.x=Math.floor(Sl.x),Fl=0;Fl<co;Fl++){for(Sl.y=(Fl+.5)*$a,Cl.y=Math.floor(Sl.y),Il=0,Bl=0,Ol=0,zl=0,Hl=0,Pl=Cl.x-wl;Pl<=Cl.x+wl;Pl++)if(!(Pl<0||Pl>=us)){ou=Math.floor(1e3*Math.abs(Pl-Sl.x)),El[ou]||(El[ou]={});for(let _c=Cl.y-_l;_c<=Cl.y+_l;_c++)_c<0||_c>=hs||(au=Math.floor(1e3*Math.abs(_c-Sl.y)),El[ou][au]||(El[ou][au]=xa(Math.sqrt(Math.pow(ou*xl,2)+Math.pow(au*yl,2))/1e3)),Al=El[ou][au],Al>0&&(Rl=4*(_c*us+Pl),Il+=Al,Bl+=Al*uo[Rl],Ol+=Al*uo[Rl+1],zl+=Al*uo[Rl+2],Hl+=Al*uo[Rl+3]))}Rl=4*(Fl*lo+Dl),ba[Rl]=Bl/Il,ba[Rl+1]=Ol/Il,ba[Rl+2]=zl/Il,ba[Rl+3]=Hl/Il}return++Dl<lo?Tl(Dl):ga}(0)}bilinearFiltering(is,us,hs,lo,co){let uo,ga,ba,xa,_a,$a,xl,yl,wl,_l,El,Sl,Cl,Tl=0;const Dl=this.rcpScaleX,Fl=this.rcpScaleY,Pl=4*(us-1),Al=is.imageData.data,Rl=is.ctx.createImageData(lo,co),Il=Rl.data;for(xl=0;xl<co;xl++)for(yl=0;yl<lo;yl++)for(_a=Math.floor(Dl*yl),$a=Math.floor(Fl*xl),wl=Dl*yl-_a,_l=Fl*xl-$a,Cl=4*($a*us+_a),El=0;El<4;El++)uo=Al[Cl+El],ga=Al[Cl+4+El],ba=Al[Cl+Pl+El],xa=Al[Cl+Pl+4+El],Sl=uo*(1-wl)*(1-_l)+ga*wl*(1-_l)+ba*_l*(1-wl)+xa*wl*_l,Il[Tl++]=Sl;return Rl}hermiteFastResize(is,us,hs,lo,co){const uo=this.rcpScaleX,ga=this.rcpScaleY,ba=Math.ceil(uo/2),xa=Math.ceil(ga/2),_a=is.imageData.data,$a=is.ctx.createImageData(lo,co),xl=$a.data;for(let yl=0;yl<co;yl++)for(let wl=0;wl<lo;wl++){const _l=4*(wl+yl*lo);let El=0,Sl=0,Cl=0,Tl=0,Dl=0,Fl=0,Pl=0;const Al=(yl+.5)*ga;for(let Rl=Math.floor(yl*ga);Rl<(yl+1)*ga;Rl++){const Il=Math.abs(Al-(Rl+.5))/xa,Bl=(wl+.5)*uo,Ol=Il*Il;for(let zl=Math.floor(wl*uo);zl<(wl+1)*uo;zl++){let Hl=Math.abs(Bl-(zl+.5))/ba;const ou=Math.sqrt(Ol+Hl*Hl);ou>1&&ou<-1||(El=2*ou*ou*ou-3*ou*ou+1,El>0&&(Hl=4*(zl+Rl*us),Pl+=El*_a[Hl+3],Cl+=El,_a[Hl+3]<255&&(El=El*_a[Hl+3]/250),Tl+=El*_a[Hl],Dl+=El*_a[Hl+1],Fl+=El*_a[Hl+2],Sl+=El))}}xl[_l]=Tl/Sl,xl[_l+1]=Dl/Sl,xl[_l+2]=Fl/Sl,xl[_l+3]=Pl/Cl}return $a}}t(_h,"type","Resize"),t(_h,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),t(_h,"uniformLocations",["uDelta","uTaps"]),tt.setClass(_h);class xh extends Wa{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(is){let{imageData:{data:us}}=is;const hs=-this.saturation;for(let lo=0;lo<us.length;lo+=4){const co=us[lo],uo=us[lo+1],ga=us[lo+2],ba=Math.max(co,uo,ga);us[lo]+=ba!==co?(ba-co)*hs:0,us[lo+1]+=ba!==uo?(ba-uo)*hs:0,us[lo+2]+=ba!==ga?(ba-ga)*hs:0}}sendUniformData(is,us){is.uniform1f(us.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}t(xh,"type","Saturation"),t(xh,"defaults",{saturation:0}),t(xh,"uniformLocations",["uSaturation"]),tt.setClass(xh);class Ch extends Wa{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(is){let{imageData:{data:us}}=is;const hs=-this.vibrance;for(let lo=0;lo<us.length;lo+=4){const co=us[lo],uo=us[lo+1],ga=us[lo+2],ba=Math.max(co,uo,ga),xa=(co+uo+ga)/3,_a=2*Math.abs(ba-xa)/255*hs;us[lo]+=ba!==co?(ba-co)*_a:0,us[lo+1]+=ba!==uo?(ba-uo)*_a:0,us[lo+2]+=ba!==ga?(ba-ga)*_a:0}}sendUniformData(is,us){is.uniform1f(us.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}t(Ch,"type","Vibrance"),t(Ch,"defaults",{vibrance:0}),t(Ch,"uniformLocations",["uVibrance"]),tt.setClass(Ch);const polygonContainsPoint=(cs,is,us,hs=1)=>{if(!Array.isArray(us)||us.length<6)return!1;let lo=!1;for(let co=0,uo=us.length-2;co<us.length;co+=2){const ga=us[co]*hs,ba=us[co+1]*hs,xa=us[uo]*hs,_a=us[uo+1]*hs,$a=_a-ba||1e-6;ba>is!=_a>is&&cs<(xa-ga)*(is-ba)/$a+ga&&(lo=!lo),uo=co}return lo},rectangleContainsPoint=(cs,is,us,hs=1)=>{if(!Array.isArray(us)||us.length<8)return!1;const lo=[us[0],us[2],us[4],us[6]].map(_a=>_a*hs),co=[us[1],us[3],us[5],us[7]].map(_a=>_a*hs),uo=Math.min(...lo),ga=Math.max(...lo),ba=Math.min(...co),xa=Math.max(...co);return cs>=uo&&cs<=ga&&is>=ba&&is<=xa},regionContainsPoint=(cs,is,us,hs=1)=>!us||!Array.isArray(us.coordinates)?!1:us.shapeType==="rectangular"?rectangleContainsPoint(cs,is,us.coordinates,hs):polygonContainsPoint(cs,is,us.coordinates,hs),ensureRgbaOpacity$1=(cs,is=.2)=>{if(!cs)return`rgba(255, 193, 7, ${is})`;if(cs.startsWith("rgba")){const us=cs.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(us)return`rgba(${us[1]}, ${us[2]}, ${us[3]}, ${is})`}if(cs.startsWith("#")){const us=cs.replace("#",""),hs=parseInt(us.substring(0,2),16),lo=parseInt(us.substring(2,4),16),co=parseInt(us.substring(4,6),16);return`rgba(${hs}, ${lo}, ${co}, ${is})`}return cs},PageAnnotationLayer=reactExports.memo(({pageNumber:cs,width:is,height:us,scale:hs,tool:lo="pan",strokeColor:co="#DC3545",strokeWidth:uo=3,annotations:ga=null,onSaveAnnotations:ba=()=>{},highlightColor:xa="rgba(255, 193, 7, 0.3)",newHighlights:_a=null,highlightsToRemove:$a=null,onHighlightCreated:xl=null,onHighlightDeleted:yl=null,selectedSpaceId:wl=null,selectedModuleId:_l=null,activeRegions:El=null})=>{const Sl=reactExports.useRef(null),Cl=reactExports.useRef(null),Tl=reactExports.useRef(new Set),Dl=reactExports.useRef(!1),Fl=reactExports.useRef({isDrawingShape:!1,startX:0,startY:0,tempObj:null}),Pl=reactExports.useRef(lo),Al=reactExports.useRef(co),Rl=reactExports.useRef(uo),Il=reactExports.useRef(xl),Bl=reactExports.useRef(yl),Ol=reactExports.useRef(wl),zl=reactExports.useRef(_l);reactExports.useEffect(()=>{Il.current=xl},[xl]),reactExports.useEffect(()=>{Bl.current=yl},[yl]),reactExports.useEffect(()=>{Ol.current=wl},[wl]),reactExports.useEffect(()=>{zl.current=_l},[_l]),reactExports.useEffect(()=>{if(!Sl.current||!is||!us||Dl.current)return;console.log(`[Page ${cs}] Initializing canvas`),Dl.current=!0;const _c=new In(Sl.current,{width:is*hs,height:us*hs,backgroundColor:"transparent",selection:lo==="pan"||lo==="eraser",isDrawingMode:lo==="pen"||lo==="highlighter"}),uu=new no(_c);uu.color=co,uu.width=uo,_c.freeDrawingBrush=uu,Cl.current=_c,ga&&ga.objects&&ga.objects.length>0&&(console.log(`[Page ${cs}] Loading ${ga.objects.length} annotations`),ga.objects.forEach(Vl=>{kn.enlivenObjects([Vl],Ql=>{Ql.forEach(Jl=>{Jl.set({strokeUniform:!0}),Jl.spaceId||(Jl.spaceId=Vl.spaceId||null),Jl.moduleId||(Jl.moduleId=Vl.moduleId||null),_c.add(Jl)}),_c.getObjects().forEach(Jl=>{const iu=Jl.spaceId||null,fu=Jl.moduleId||null,_u=Ol.current,bu=zl.current,Fu=(_u===null||iu===_u)&&(bu===null||fu===bu);Jl.set({visible:Fu}),Fu||Jl.set({selectable:!1,evented:!1})}),_c.renderAll()})}));const lu=()=>{if(Cl.current)try{const Vl=Cl.current.toJSON(["strokeUniform","spaceId","moduleId","highlightId","needsBIC"]);ba(cs,Vl)}catch(Vl){console.error(`[Page ${cs}] Save error:`,Vl)}};(()=>{_c.isDrawingMode=lo==="pen"||lo==="highlighter",_c.selection=lo==="pan"||lo==="eraser",_c.defaultCursor=lo==="text"?"text":lo==="highlight"||_c.isDrawingMode?"crosshair":"default",_c.hoverCursor=_c.defaultCursor;const Vl=lo==="highlighter"?xa:co,Ql=lo==="highlighter"?Math.max(uo,8):uo;_c.freeDrawingBrush.color=Vl,_c.freeDrawingBrush.width=Ql})();const xu=Vl=>{Vl.path&&(Vl.path.set({strokeUniform:!0}),Ol.current&&Vl.path.set({spaceId:Ol.current}),zl.current&&Vl.path.set({moduleId:zl.current})),lu()},pu=()=>lu(),Ll=Vl=>{const Ql=Pl.current,Jl=Al.current,iu=Rl.current,{x:fu,y:_u}=_c.getPointer(Vl.e);if(Ql==="eraser"){const Tu=_c.findTarget(Vl.e,!0);if(Tu){const Fu=Tu.spaceId||null;if(Ol.current!==null&&Fu!==Ol.current)return;const ku=Tu.highlightId!=null,tu=Tu.needsBIC===!0,eu=Tu.type==="rect"&&(Tu.fill&&typeof Tu.fill=="string"&&Tu.fill.includes("rgba")||Tu.fill&&typeof Tu.fill=="string"&&Tu.fill.match(/rgba\(\d+,\s*\d+,\s*\d+,\s*[\d.]+\)/)),gu=!Tu.fill||Tu.fill==="transparent"||typeof Tu.fill=="string"&&Tu.fill==="transparent",ru=Tu.stroke&&typeof Tu.stroke=="string"&&Tu.stroke!=="transparent",Pu=Tu.type==="rect"&&gu&&ru;if((ku||tu||eu||Pu)&&Bl.current){const Ju=_c.getZoom?_c.getZoom():hs,Vu={x:Tu.left/Ju,y:Tu.top/Ju,width:Tu.width/Ju,height:Tu.height/Ju,pageNumber:cs},Mu=Tu.highlightId||null;Mu&&ou.current.has(Mu)&&ou.current.delete(Mu);const hp=Mu||`${Vu.x}-${Vu.y}-${Vu.width}-${Vu.height}`;Tl.current.delete(hp),_c.discardActiveObject(),_c.remove(Tu),_c.requestRenderAll(),lu(),Bl.current&&Bl.current(cs,Vu,Mu)}else _c.remove(Tu),_c.discardActiveObject(),_c.requestRenderAll(),lu()}return}if(Ql==="text"){const Tu=new No("Text",{left:fu,top:_u,fontSize:16,fill:Jl,editable:!0,backgroundColor:"transparent"});Ol.current&&Tu.set({spaceId:Ol.current}),zl.current&&Tu.set({moduleId:zl.current}),_c.add(Tu),_c.setActiveObject(Tu),_c.requestRenderAll(),lu();return}const bu=Fl.current;bu.isDrawingShape=!1;let Cu=null;if(Ql==="highlight"){Cu=new Er({left:fu,top:_u,width:1,height:1,fill:"transparent",stroke:"#4A90E2",strokeWidth:2,strokeDashArray:[5,5],strokeUniform:!0,selectable:!1,evented:!1}),bu.isDrawingShape=!0,bu.startX=fu,bu.startY=_u,bu.tempObj=Cu,zl.current&&Cu.set({moduleId:zl.current}),_c.add(Cu);return}else if(Ql==="rect")Cu=new Er({left:fu,top:_u,width:1,height:1,fill:"rgba(0,0,0,0)",stroke:Jl,strokeWidth:iu,strokeUniform:!0});else if(Ql==="ellipse")Cu=new ho({left:fu,top:_u,radius:1,fill:"rgba(0,0,0,0)",stroke:Jl,strokeWidth:iu,strokeUniform:!0,originX:"left",originY:"top"});else if(Ql==="line"||Ql==="underline"||Ql==="strikeout")Cu=new mo([fu,_u,fu,_u],{stroke:Jl,strokeWidth:iu,strokeUniform:!0});else if(Ql==="arrow")Cu=new mo([fu,_u,fu,_u],{stroke:Jl,strokeWidth:iu,strokeUniform:!0});else if(Ql==="squiggly")Cu=new So([[fu,_u]],{stroke:Jl,strokeWidth:iu,fill:"transparent",strokeUniform:!0});else if(Ql==="note"){const Tu=new Hr([new Er({width:18,height:18,fill:"#ffeb3b",rx:4,ry:4}),new mo([4,9,14,9],{stroke:"#333",strokeWidth:2})],{left:fu,top:_u,hasControls:!1,hasBorders:!1});Tu.set("noteText",""),Ol.current&&Tu.set({spaceId:Ol.current}),zl.current&&Tu.set({moduleId:zl.current}),Tu.on("mousedblclick",()=>{const Fu=window.prompt("Note:",Tu.get("noteText")||"");Fu!==null&&(Tu.set("noteText",Fu),lu())}),_c.add(Tu),_c.requestRenderAll(),lu();return}Cu&&(Ol.current&&Cu.set({spaceId:Ol.current}),zl.current&&Cu.set({moduleId:zl.current}),bu.isDrawingShape=!0,bu.startX=fu,bu.startY=_u,bu.tempObj=Cu,_c.add(Cu))},Nl=Vl=>{const Ql=Fl.current;if(!Ql.isDrawingShape||!Ql.tempObj)return;const{x:Jl,y:iu}=_c.getPointer(Vl.e),fu=Ql.startX,_u=Ql.startY;if(Ql.tempObj.type==="rect")Ql.tempObj.set({left:Math.min(fu,Jl),top:Math.min(_u,iu),width:Math.abs(Jl-fu),height:Math.abs(iu-_u)});else if(Ql.tempObj.type==="circle")Ql.tempObj.set({left:Math.min(fu,Jl),top:Math.min(_u,iu),radius:Math.max(Math.abs(Jl-fu),Math.abs(iu-_u))/2});else if(Ql.tempObj.type==="line")Ql.tempObj.set({x2:Jl,y2:iu});else if(Ql.tempObj.type==="polyline"){const bu=Ql.tempObj.get("points")||[];bu.push({x:Jl,y:iu}),Ql.tempObj.set({points:bu})}_c.requestRenderAll()},Ml=Vl=>{const Ql=Pl.current,Jl=Al.current,iu=Fl.current;if(!(!iu.isDrawingShape||!iu.tempObj)){if(Ql==="highlight"&&iu.tempObj.type==="rect"){const fu=iu.tempObj,_u=fu.left,bu=fu.top,Cu=fu.width,Tu=fu.height,Fu=_c.getZoom?_c.getZoom():hs;console.log("[Survey Debug] Highlight drag capture",{pageNumber:cs,rectLeft:_u,rectTop:bu,rectWidth:Cu,rectHeight:Tu,scale:hs,canvasZoom:Fu,viewportTransform:_c.viewportTransform,selectedModuleId:zl.current,selectedSpaceId:Ol.current}),_c.remove(iu.tempObj),Cu>5&&Tu>5&&Il.current&&Il.current(cs,{x:_u/Fu,y:bu/Fu,width:Cu/Fu,height:Tu/Fu})}else if(Ql==="arrow"&&iu.tempObj.type==="line"){const{x1:fu,y1:_u,x2:bu,y2:Cu}=iu.tempObj,Tu=Math.atan2(Cu-_u,bu-fu),Fu=new vo({left:bu,top:Cu,originX:"center",originY:"center",width:12,height:12,fill:Jl,angle:Tu*180/Math.PI+90}),ku=new Hr([iu.tempObj,Fu],{selectable:!0});Ol.current&&ku.set({spaceId:Ol.current}),zl.current&&ku.set({moduleId:zl.current}),_c.add(ku),_c.remove(iu.tempObj)}iu.isDrawingShape=!1,iu.tempObj=null,lu()}},Ul=Vl=>{Pl.current};return _c.on("object:modified",pu),_c.on("path:created",xu),_c.on("mouse:down",Ll),_c.on("mouse:move",Nl),_c.on("mouse:up",Ml),_c.on("mouse:dblclick",Ul),()=>{if(console.log(`[Page ${cs}] Cleanup`),Dl.current=!1,Cl.current){Cl.current.off();try{Cl.current.dispose()}catch(Vl){console.error(`[Page ${cs}] Disposal error:`,Vl)}Cl.current=null}}},[cs,is,us]);const Hl=reactExports.useRef(null);reactExports.useEffect(()=>{if(!(!Cl.current||!is||!us))return Hl.current&&clearTimeout(Hl.current),Hl.current=setTimeout(()=>{Cl.current&&(Cl.current.setWidth(is*hs),Cl.current.setHeight(us*hs),Cl.current.setZoom(hs),Cl.current.renderAll()),Hl.current=null},50),()=>{Hl.current&&clearTimeout(Hl.current)}},[hs,is,us]),reactExports.useEffect(()=>{if(Pl.current=lo,Al.current=co,Rl.current=uo,!Cl.current)return;const _c=Cl.current;_c.isDrawingMode=lo==="pen"||lo==="highlighter",_c.selection=lo==="pan"||lo==="eraser",_c.defaultCursor=lo==="text"?"text":lo==="highlight"||_c.isDrawingMode?"crosshair":"default",_c.hoverCursor=_c.defaultCursor;const uu=lo==="highlighter"?"rgba(255, 235, 59, 0.35)":co,lu=lo==="highlighter"?Math.max(uo,8):uo;_c.freeDrawingBrush&&(_c.freeDrawingBrush.color=uu,_c.freeDrawingBrush.width=lu),_c.getObjects().forEach(Kl=>{const xu=Kl.spaceId||null,pu=Kl.moduleId||null,Ll=Ol.current===null||xu===Ol.current,Nl=zl.current===null||pu===zl.current;Ll&&Nl?Kl.set({visible:!0,selectable:lo!=="pen"&&lo!=="highlighter"&&lo!=="highlight",evented:lo!=="pen"&&lo!=="highlighter"&&lo!=="highlight"}):Kl.set({visible:!1,selectable:!1,evented:!1})}),_c.renderAll()},[lo,co,uo,_l,wl]);const ou=reactExports.useRef(new Map);reactExports.useEffect(()=>{if(!Cl.current||!_a||_a.length===0)return;const _c=Cl.current,uu=_c.getZoom();let lu=!1;if(_a.forEach((Kl,xu)=>{const pu=Kl.highlightId||`${Kl.x}-${Kl.y}-${Kl.width}-${Kl.height}`;if(console.log("[Survey Debug] Applying highlight to canvas",{pageNumber:cs,highlightId:Kl.highlightId||null,highlightKey:pu,bounds:{x:Kl.x,y:Kl.y,width:Kl.width,height:Kl.height},needsBIC:!!Kl.needsBIC,color:Kl.color||null,canvasSpaceId:Ol.current,canvasModuleId:Kl.moduleId||zl.current||null,canvasZoom:uu}),Kl.highlightId){const iu=ou.current.get(Kl.highlightId);iu&&_c.getObjects().includes(iu)&&(_c.remove(iu),ou.current.delete(Kl.highlightId),Tl.current.delete(pu))}const Ll=1,Nl=uu||hs,Ml=Kl.x*Nl,Ul=Kl.y*Nl,Vl=Kl.width*Nl,Ql=Kl.height*Nl;if(_c.getObjects("rect").filter(iu=>iu.fill&&typeof iu.fill=="string"&&(iu.fill.includes("rgba")||iu.fill.includes("transparent"))||iu.stroke&&typeof iu.stroke=="string"&&iu.stroke!=="transparent"?Math.abs(iu.left-Ml)<Ll&&Math.abs(iu.top-Ul)<Ll&&Math.abs(iu.width-Vl)<Ll&&Math.abs(iu.height-Ql)<Ll:!1).forEach(iu=>{if(Kl.highlightId&&iu.highlightId===Kl.highlightId)return;_c.remove(iu),iu.highlightId&&ou.current.delete(iu.highlightId);const fu=iu.highlightId||`${iu.left}-${iu.top}-${iu.width}-${iu.height}`;Tl.current.delete(fu)}),!Tl.current.has(pu))if(Kl.needsBIC){const iu=uu||hs,fu=new Er({left:Kl.x*iu,top:Kl.y*iu,width:Kl.width*iu,height:Kl.height*iu,fill:"transparent",stroke:"#4A90E2",strokeWidth:2,strokeDashArray:[5,5],selectable:Pl.current!=="pen"&&Pl.current!=="highlighter"&&Pl.current!=="highlight",evented:Pl.current!=="pen"&&Pl.current!=="highlighter"&&Pl.current!=="highlight",excludeFromExport:!1,strokeUniform:!0});fu.set({highlightId:Kl.highlightId,needsBIC:!0}),Ol.current&&fu.set({spaceId:Ol.current}),(Kl.moduleId||zl.current)&&fu.set({moduleId:Kl.moduleId||zl.current}),_c.add(fu),Kl.highlightId&&ou.current.set(Kl.highlightId,fu),Tl.current.add(pu),lu=!0}else{const iu=Kl.color||xa,fu=ensureRgbaOpacity$1(iu,1),_u=uu||hs,bu=new Er({left:Kl.x*_u,top:Kl.y*_u,width:Kl.width*_u,height:Kl.height*_u,fill:fu,stroke:"transparent",selectable:Pl.current!=="pen"&&Pl.current!=="highlighter"&&Pl.current!=="highlight",evented:Pl.current!=="pen"&&Pl.current!=="highlighter"&&Pl.current!=="highlight",excludeFromExport:!1,strokeUniform:!0});Kl.highlightId&&(bu.set({highlightId:Kl.highlightId}),ou.current.set(Kl.highlightId,bu)),Ol.current&&bu.set({spaceId:Ol.current}),(Kl.moduleId||zl.current)&&bu.set({moduleId:Kl.moduleId||zl.current}),_c.add(bu),Tl.current.add(pu),lu=!0}}),lu){_c.renderAll();try{const Kl=_c.toJSON(["strokeUniform","spaceId","moduleId","highlightId","needsBIC"]);ba(cs,Kl)}catch(Kl){console.error(`[Page ${cs}] Save error:`,Kl)}}},[_a,xa,cs,ba,hs]);const au=reactExports.useRef(new Set);return reactExports.useEffect(()=>{if(!Cl.current||!$a||$a.length===0)return;const _c=Cl.current;let uu=!1;if($a.forEach(lu=>{const Kl=`${lu.x}-${lu.y}-${lu.width}-${lu.height}`;if(au.current.has(Kl))return;const xu=lu.x*hs,pu=lu.y*hs,Ll=lu.width*hs,Nl=lu.height*hs,Ml=[];_c.getObjects("rect").forEach(Ul=>{Ul.fill&&typeof Ul.fill=="string"&&(Ul.fill.includes("rgba")||Ul.fill.startsWith("#"))&&Math.abs(Ul.left-xu)<1&&Math.abs(Ul.top-pu)<1&&Math.abs(Ul.width-Ll)<1&&Math.abs(Ul.height-Nl)<1&&Ml.push(Ul)}),Ml.forEach(Ul=>{_c.remove(Ul),uu=!0}),au.current.add(Kl)}),uu){_c.requestRenderAll();try{const lu=_c.toJSON(["strokeUniform","spaceId","moduleId"]);ba(cs,lu)}catch(lu){console.error(`[Page ${cs}] Save error after removal:`,lu)}}},[$a,cs,ba,hs]),reactExports.useEffect(()=>{if(!Cl.current)return;const _c=Cl.current,uu=_c.getObjects(),lu=Array.isArray(El)&&El.length>0?El:null;let Kl=0,xu=0;uu.forEach(pu=>{const Ll=pu.spaceId||null,Nl=pu.moduleId||null,Ml=wl===null||Ll===wl,Ul=_l===null||Nl===_l;let Vl=!0;if(lu){const iu=pu.getBoundingRect(!0,!0),fu=iu.left+(iu.width||0)/2,_u=iu.top+(iu.height||0)/2;Vl=lu.some(bu=>regionContainsPoint(fu,_u,bu,hs))}const Ql=Ml&&Ul&&Vl,Jl=Ql&&(wl===null||Ll===wl)&&(_l===null||Nl===_l);pu.set({visible:Ql,selectable:Jl,evented:Jl}),Ql?Kl+=1:xu+=1}),console.log("[Survey Debug] Canvas visibility update",{pageNumber:cs,selectedSpaceId:wl,selectedModuleId:_l,regionCount:lu?lu.length:0,totalObjects:uu.length,visibleObjects:Kl,hiddenObjects:xu,objectBreakdown:uu.map(pu=>({type:pu.type,spaceId:pu.spaceId||null,moduleId:pu.moduleId||null,visible:pu.visible}))}),_c.renderAll()},[wl,_l,El,hs]),jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:lo==="pen"||lo==="highlighter"||lo==="eraser"||lo==="text"||lo==="rect"||lo==="ellipse"||lo==="line"||lo==="arrow"||lo==="underline"||lo==="strikeout"||lo==="squiggly"||lo==="note"||lo==="highlight"?"auto":"none",zIndex:10},children:jsxRuntimeExports.jsx("canvas",{ref:Sl,style:{position:"absolute",top:0,left:0,cursor:lo==="pen"||lo==="highlighter"||lo==="highlight"?"crosshair":"default"}})})},(cs,is)=>cs.pageNumber===is.pageNumber&&cs.width===is.width&&cs.height===is.height&&Math.abs(cs.scale-is.scale)<.01&&cs.tool===is.tool&&cs.strokeColor===is.strokeColor&&cs.strokeWidth===is.strokeWidth&&cs.annotations===is.annotations&&cs.newHighlights===is.newHighlights&&cs.highlightsToRemove===is.highlightsToRemove&&cs.onHighlightCreated===is.onHighlightCreated&&cs.selectedSpaceId===is.selectedSpaceId&&cs.activeRegions===is.activeRegions);PageAnnotationLayer.displayName="PageAnnotationLayer";const TextLayer=reactExports.memo(({pageNumber:cs,page:is,scale:us,width:hs,height:lo,onTextSelected:co,isSelectionMode:uo=!0})=>{const ga=reactExports.useRef(null),ba=reactExports.useRef([]),xa=reactExports.useRef(null),_a=reactExports.useRef(us);return reactExports.useEffect(()=>{if(!is||!ga.current)return;(async()=>{try{const xl=Math.abs(us-_a.current)>.01;(!xa.current||xl)&&(xa.current=await is.getTextContent(),_a.current=us);const yl=xa.current,wl=is.getViewport({scale:us}),_l=ga.current;xl&&(_l.innerHTML="",ba.current=[]),_l.style.width=`${wl.width}px`,_l.style.height=`${wl.height}px`,_l.style.transform=`scale(${us})`,_l.style.transformOrigin="top left",ba.current.length===0&&yl.items.length>0&&yl.items.forEach(Sl=>{const Cl=Sl.transform,Tl=Math.atan2(Cl[1],Cl[0]),Dl=Math.hypot(Cl[2],Cl[3]),Fl=Cl[4],Pl=Cl[5],Al=Dl,Rl=Sl.width,Il=Sl.height||Al,Bl=document.createElement("span");Bl.style.position="absolute",Bl.style.left=`${Fl}px`,Bl.style.top=`${Pl}px`,Bl.style.fontSize=`${Al}px`,Bl.style.fontFamily=Sl.fontName||"sans-serif",Bl.style.color="transparent",Bl.style.whiteSpace="pre",Bl.style.cursor="text",Bl.style.userSelect="text",Bl.style.webkitUserSelect="text",Bl.textContent=Sl.str,Tl!==0&&(Bl.style.transform=`rotate(${Tl}rad)`,Bl.style.transformOrigin="0 0"),_l.appendChild(Bl),ba.current.push(Bl)}),uo&&(_l.style.userSelect="text",_l.style.webkitUserSelect="text")}catch(xl){console.error(`Error loading text content for page ${cs}:`,xl)}})()},[is,cs,us,uo]),reactExports.useEffect(()=>{const $a=ga.current;if(!$a||!co||!uo)return;const xl=()=>{setTimeout(()=>{const yl=window.getSelection();if(yl.rangeCount>0&&!yl.isCollapsed){const wl=yl.getRangeAt(0),_l=yl.toString().trim();if(_l&&$a.contains(wl.commonAncestorContainer)){const El=wl.getClientRects(),Sl=$a.getBoundingClientRect(),Cl=Array.from(El).map(Tl=>{const Dl=(Tl.left-Sl.left)/us,Fl=(Tl.top-Sl.top)/us,Pl=Tl.width/us,Al=Tl.height/us;return{x:Dl,y:Fl,width:Pl,height:Al}});Cl.length>0&&co(cs,_l,Cl),setTimeout(()=>{yl.removeAllRanges()},50)}}},10)};return $a.addEventListener("mouseup",xl),()=>{$a.removeEventListener("mouseup",xl)}},[ga,co,cs,us,uo]),is?jsxRuntimeExports.jsx("div",{ref:ga,style:{position:"absolute",top:0,left:0,width:`${hs}px`,height:`${lo}px`,pointerEvents:uo?"auto":"none",zIndex:8,userSelect:uo?"text":"none",WebkitUserSelect:uo?"text":"none",overflow:"hidden"},className:"textLayer"}):null});TextLayer.displayName="TextLayer";const Icon=({name:cs,size:is=16,color:us="currentColor",style:hs,className:lo})=>({document:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M14 2V8H20",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),upload:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M7 10L12 5L17 10",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M12 5V15",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),folder:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("path",{d:"M3 7C3 6.46957 3.21071 5.96086 3.58579 5.58579C3.96086 5.21071 4.46957 5 5 5H9L11 7H19C19.5304 7 20.0391 7.21071 20.4142 7.58579C20.7893 7.96086 21 8.46957 21 9V17C21 17.5304 20.7893 18.0391 20.4142 18.4142C20.0391 18.7893 19.5304 19 19 19H5C4.46957 19 3.96086 18.7893 3.58579 18.4142C3.21071 18.0391 3 17.5304 3 17V7Z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),template:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("rect",{x:"5",y:"4",width:"14",height:"16",rx:"1",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M9 4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4V6H9V4Z",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M7 10H17",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M7 13H17",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M7 16H15",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M7 19H16",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"})]}),search:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M20 20L16 16",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),close:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M18 6L6 18",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M6 6L18 18",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),check:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("path",{d:"M20 6L9 17L4 12",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),circle:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"4",fill:us})}),arrowLeft:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M19 12H5",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M12 19L5 12L12 5",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),chevronLeft:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("path",{d:"M15 18L9 12L15 6",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),chevronRight:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("path",{d:"M9 18L15 12L9 6",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),chevronDown:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("path",{d:"M6 9L12 15L18 9",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),chevronUp:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("path",{d:"M18 15L12 9L6 15",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),minus:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("path",{d:"M5 12H19",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"})}),plus:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M12 5V19",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M5 12H19",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"})]}),pages:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"3",width:"9",height:"13",rx:"1",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"12",y:"3",width:"9",height:"13",rx:"1",stroke:us,strokeWidth:"1.5",fill:"none"})]}),pageSingle:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"1",stroke:us,strokeWidth:"1.5",fill:"none"})}),pan:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M12 2V6M12 18V22M22 12H18M6 12H2",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M19.07 4.93L16.24 7.76M7.76 16.24L4.93 19.07M19.07 19.07L16.24 16.24M7.76 7.76L4.93 4.93",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"})]}),pen:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M18.5 2.5C18.8978 2.10217 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.10217 21.5 2.5C21.8978 2.89782 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.10217 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),highlighter:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M3 21H21",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.3"}),jsxRuntimeExports.jsx("path",{d:"M13 3L5 11V16H10L18 8V3H13Z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",opacity:"0.4"}),jsxRuntimeExports.jsx("path",{d:"M13 3H18V8L10 16H5V11L13 3Z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),eraser:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M16.5 3L21 7.5L12 16.5L6.5 11L16.5 3Z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M12 16.5L7.5 21H3V16.5L7.5 12",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),text:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M4 7H20",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M4 12H14",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M4 17H20",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"})]}),rect:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"1",stroke:us,strokeWidth:"1.5",fill:"none"})}),ellipse:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("ellipse",{cx:"12",cy:"12",rx:"8",ry:"6",stroke:us,strokeWidth:"1.5",fill:"none"})}),line:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("path",{d:"M5 12H19",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"})}),arrow:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M5 12H19",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M12 5L19 12L12 19",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),underline:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M6 3V12C6 14.1217 7.87827 16 10 16C12.1217 16 14 14.1217 14 12V3",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M4 21H20",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"})]}),strikeout:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M4 12H20",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M6 3V12C6 14.1217 7.87827 16 10 16C12.1217 16 14 14.1217 14 12V3",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"})]}),squiggly:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("path",{d:"M4 12C4 12 6 10 8 12C10 14 12 10 14 12C16 14 18 10 20 12",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",fill:"none"})}),note:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M14 2V8H20",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M8 13H16",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M8 17H12",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"})]}),settings:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M19.875 6.27a2.225 2.225 0 0 1 1.125 1.948v7.284c0 .809 -.443 1.555 -1.158 1.948l-6.75 4.27a2.269 2.269 0 0 1 -2.184 0l-6.75 -4.27a2.225 2.225 0 0 1 -1.158 -1.948v-7.285c0 -.809 .443 -1.554 1.158 -1.947l6.75 -3.98a2.33 2.33 0 0 1 2.25 0l6.75 3.98h-.033z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:us,strokeWidth:"1.5",fill:"none"})]}),survey:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M9 12H15",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M9 8H15",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M9 16H12",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M12 3V6",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M21 12H18",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M12 18V21",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M6 12H3",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"})]}),bookmark:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("path",{d:"M19 21L12 16L5 21V5C5 4.46957 5.21071 3.96086 5.58579 3.58579C5.96086 3.21071 6.46957 3 7 3H17C17.5304 3 18.0391 3.21071 18.4142 3.58579C18.7893 3.96086 19 4.46957 19 5V21Z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})}),duplicate:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"5",width:"14",height:"14",rx:"2",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"7",y:"1",width:"14",height:"14",rx:"2",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M14 8V14M11 11H17",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"})]}),edit:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M18.5 2.5C18.8978 2.10217 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.10217 21.5 2.5C21.8978 2.89782 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.10217 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),trash:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M3 6H5H21",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M10 11V17",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M14 11V17",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),more:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"5",r:"1.5",fill:us}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:us}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"19",r:"1.5",fill:us})]}),grip:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("circle",{cx:"9",cy:"5",r:"1.5",fill:us}),jsxRuntimeExports.jsx("circle",{cx:"15",cy:"5",r:"1.5",fill:us}),jsxRuntimeExports.jsx("circle",{cx:"9",cy:"12",r:"1.5",fill:us}),jsxRuntimeExports.jsx("circle",{cx:"15",cy:"12",r:"1.5",fill:us}),jsxRuntimeExports.jsx("circle",{cx:"9",cy:"19",r:"1.5",fill:us}),jsxRuntimeExports.jsx("circle",{cx:"15",cy:"19",r:"1.5",fill:us})]}),home:jsxRuntimeExports.jsx("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:jsxRuntimeExports.jsx("path",{d:"M3 12L5 10M5 10L12 3L19 10M5 10V20C5 20.5304 5.21071 21.0391 5.58579 21.4142C5.96086 21.7893 6.46957 22 7 22H9M19 10L21 12M19 10V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H15M9 22C9.53043 22 10.0391 21.7893 10.4142 21.4142C10.7893 21.0391 11 20.5304 11 20V16C11 15.4696 11.2107 14.9609 11.5858 14.5858C11.9609 14.2107 12.4696 14 13 14H15C15.5304 14 16.0391 14.2107 16.4142 14.5858C16.7893 14.9609 17 15.4696 17 16V20C17 20.5304 17.2107 21.0391 17.5858 21.4142C17.9609 21.7893 18.4696 22 19 22H9Z",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})}),scissors:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("circle",{cx:"6",cy:"6",r:"3",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"18",cy:"6",r:"3",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M8.12 8.12L15.88 15.88",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M8.12 15.88L15.88 8.12",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("circle",{cx:"6",cy:"18",r:"3",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"18",cy:"18",r:"3",stroke:us,strokeWidth:"1.5",fill:"none"})]}),copy:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M5 15H4C2.93913 15 1.92172 14.5786 1.17157 13.8284C0.421427 13.0783 0 12.0609 0 11V4C0 2.93913 0.421427 1.92172 1.17157 1.17157C1.92172 0.421427 2.93913 0 4 0H11C12.0609 0 13.0783 0.421427 13.8284 1.17157C14.5786 1.92172 15 2.93913 15 4V5",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),paste:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("rect",{x:"6",y:"4",width:"12",height:"16",rx:"1",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"8",y:"6",width:"8",height:"12",rx:"0.5",stroke:us,strokeWidth:"1.2",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M10 9H14",stroke:us,strokeWidth:"1",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M10 11H14",stroke:us,strokeWidth:"1",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M10 13H13",stroke:us,strokeWidth:"1",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M10 15H14",stroke:us,strokeWidth:"1",strokeLinecap:"round"})]}),rotate:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M1 4V10H7",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M23 20V14H17",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M20.49 9C19.7967 7.04557 18.4615 5.36328 16.6618 4.21405C14.8621 3.06482 12.6915 2.51013 10.5 2.63024C8.30846 2.75035 6.19479 3.53998 4.5 4.9M3.51 15C4.20334 16.9544 5.53847 18.6367 7.33818 19.786C9.13789 20.9352 11.3085 21.4899 13.5 21.3698C15.6915 21.2496 17.8052 20.46 19.5 19.1",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),flipHorizontal:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M8 3H3C2.44772 3 2 3.44772 2 4V20C2 20.5523 2.44772 21 3 21H8",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M16 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H16",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M12 2V22",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M8 7L12 3L16 7",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M8 17L12 21L16 17",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),flipVertical:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("path",{d:"M3 8V3C3 2.44772 3.44772 2 4 2H20C20.5523 2 21 2.44772 21 3V8",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M3 16V21C3 21.5523 3.44772 22 4 22H20C20.5523 22 21 21.5523 21 21V16",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M2 12H22",stroke:us,strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M7 8L3 12L7 16",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M17 8L21 12L17 16",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),reset:jsxRuntimeExports.jsxs("svg",{width:is,height:is,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hs,className:lo,children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:us,strokeWidth:"1.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M8 12L11 15L16 9",stroke:us,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})[cs]||null,FONT_FAMILY$9='-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Segoe UI", Roboto, Ubuntu, "Noto Sans", Arial, sans-serif',PagesPanel=({pdfDoc:cs,numPages:is,pageNum:us,onNavigateToPage:hs,onDuplicatePage:lo,onDeletePage:co,onCutPage:uo,onCopyPage:ga,onPastePage:ba,clipboardPage:xa,clipboardType:_a,onRotatePage:$a,onMirrorPage:xl,onResetPage:yl,onReorderPages:wl,pageTransformations:_l={},shouldShowPage:El,activeSpacePages:Sl,scale:Cl,onPageDragStart:Tl,tabId:Dl})=>{const[Fl,Pl]=reactExports.useState({}),[Al,Rl]=reactExports.useState({}),[Il,Bl]=reactExports.useState(null),[Ol,zl]=reactExports.useState(us),[Hl,ou]=reactExports.useState(null),[au,_c]=reactExports.useState(null),uu=reactExports.useRef(null),lu=reactExports.useRef({}),Kl=reactExports.useRef(null),xu=reactExports.useRef(null),pu=reactExports.useMemo(()=>Array.isArray(Sl)&&Sl.length>0?Sl:typeof El=="function"?Array.from({length:is},(ru,Pu)=>Pu+1).filter(ru=>El(ru)):Array.from({length:is},(ru,Pu)=>Pu+1),[Sl,El,is]);reactExports.useEffect(()=>{pu.includes(us)?zl(us):pu.length>0?zl(pu[0]):zl(null)},[us,pu]),reactExports.useEffect(()=>{if(!cs)return;(async()=>{const Pu={};for(let Lu=1;Lu<=is;Lu++)try{const Vu=(await cs.getPage(Lu)).getViewport({scale:1});Pu[Lu]=Vu.height/Vu.width*100}catch(Ju){console.error(`Error getting aspect ratio for page ${Lu}:`,Ju),Pu[Lu]=129}Rl(Pu)})()},[cs,is]);const Ll=reactExports.useCallback(async ru=>{if(!(!cs||Fl[ru]))try{const Pu=await cs.getPage(ru),Ju=Pu.getViewport({scale:.4}),Vu=document.createElement("canvas"),Mu=Vu.getContext("2d"),hp=window.devicePixelRatio||1;Vu.width=Ju.width*hp,Vu.height=Ju.height*hp,Vu.style.width=`${Ju.width}px`,Vu.style.height=`${Ju.height}px`,Mu.scale(hp,hp),await Pu.render({canvasContext:Mu,viewport:Ju}).promise,Pl(mp=>({...mp,[ru]:Vu.toDataURL("image/jpeg",.85)}))}catch(Pu){console.error(`Error generating thumbnail for page ${ru}:`,Pu)}},[cs,Fl]);reactExports.useEffect(()=>{if(!(!cs||Object.keys(Al).length===0))return Kl.current&&Kl.current.disconnect(),Kl.current=new IntersectionObserver(ru=>{ru.forEach(Pu=>{if(Pu.isIntersecting){const Lu=parseInt(Pu.target.dataset.pageNumber);Ll(Lu)}})},{root:null,rootMargin:"200px",threshold:.01}),Object.values(lu.current).forEach(ru=>{ru&&Kl.current.observe(ru)}),()=>{Kl.current&&Kl.current.disconnect()}},[cs,Al,Ll]),reactExports.useEffect(()=>{const ru=Pu=>{uu.current&&!uu.current.contains(Pu.target)&&Bl(null)};if(Il)return document.addEventListener("mousedown",ru),()=>document.removeEventListener("mousedown",ru)},[Il]),reactExports.useEffect(()=>{Ol&&lu.current[Ol]&&lu.current[Ol].scrollIntoView({behavior:"smooth",block:"center"})},[Ol]);const Nl=reactExports.useCallback((ru,Pu)=>{ru.preventDefault(),ru.stopPropagation(),Bl({pageNumber:Pu,x:ru.clientX,y:ru.clientY})},[]),Ml=reactExports.useCallback(ru=>{zl(ru),hs&&hs(ru)},[hs]),Ul=reactExports.useCallback(ru=>{hs&&hs(ru)},[hs]),Vl=reactExports.useCallback(ru=>{lo&&lo(ru),Bl(null)},[lo]),Ql=reactExports.useCallback(ru=>{co&&window.confirm(`Delete page ${ru}?`)&&co(ru),Bl(null)},[co]),Jl=reactExports.useCallback(ru=>{uo&&uo(ru),Bl(null)},[uo]),iu=reactExports.useCallback(ru=>{ga&&ga(ru),Bl(null)},[ga]),fu=reactExports.useCallback(ru=>{ba&&xa&&ba(ru,xa,_a),Bl(null)},[ba,xa,_a]),_u=reactExports.useCallback(ru=>{$a&&$a(ru),Bl(null)},[$a]),bu=reactExports.useCallback(ru=>{xl&&xl(ru,"horizontal"),Bl(null)},[xl]),Cu=reactExports.useCallback(ru=>{xl&&xl(ru,"vertical"),Bl(null)},[xl]),Tu=reactExports.useCallback(ru=>{yl&&yl(ru),Bl(null)},[yl]),Fu=reactExports.useCallback((ru,Pu)=>{ou(Pu),ru.dataTransfer.effectAllowed="move",ru.dataTransfer.setData("application/pdf-page-internal",Pu.toString()),Tl&&Dl&&ru.dataTransfer.setData("application/pdf-page",JSON.stringify({tabId:Dl,pageNumber:Pu,pdfDoc:null}))},[Tl,Dl]),ku=reactExports.useCallback((ru,Pu)=>{ru.preventDefault(),ru.stopPropagation();const Lu=Array.from(ru.dataTransfer.types||[]);Lu.includes("application/pdf-page-internal")?(ru.dataTransfer.dropEffect="move",Hl!==null&&Hl!==Pu&&_c(Pu)):Lu.includes("application/pdf-page")&&(ru.dataTransfer.dropEffect="move")},[Hl]),tu=reactExports.useCallback(ru=>{const Pu=ru.relatedTarget;(!Pu||!ru.currentTarget.contains(Pu))&&_c(null)},[]),eu=reactExports.useCallback((ru,Pu)=>{if(ru.preventDefault(),ru.stopPropagation(),Array.from(ru.dataTransfer.types||[]).includes("application/pdf-page-internal")){const Ju=parseInt(ru.dataTransfer.getData("application/pdf-page-internal"));Ju&&Ju!==Pu&&wl&&wl(Ju,Pu)}ou(null),_c(null)},[wl]),gu=reactExports.useCallback(()=>{ou(null),_c(null)},[]);return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",fontFamily:FONT_FAMILY$9,background:"#252525"},children:[jsxRuntimeExports.jsxs("div",{ref:xu,style:{flex:1,overflowY:"auto",padding:"6px",display:"flex",flexDirection:"column",gap:"4px"},children:[pu.map(ru=>{const Pu=ru===Ol;return jsxRuntimeExports.jsxs("div",{ref:Lu=>{lu.current[ru]=Lu},"data-page-number":ru,draggable:!0,onDragStart:Lu=>{Fu(Lu,ru),Tl&&Dl&&Tl(Dl,ru)},onDragOver:Lu=>ku(Lu,ru),onDragLeave:tu,onDragEnd:gu,onDrop:Lu=>eu(Lu,ru),onContextMenu:Lu=>Nl(Lu,ru),onClick:()=>Ml(ru),onDoubleClick:()=>Ul(ru),style:{position:"relative",padding:"4px",background:Pu?"#3a3a3a":au===ru?"#2b4a5a":"transparent",border:Pu||au===ru?"1px solid #4A90E2":"1px solid transparent",borderRadius:"4px",cursor:Hl===ru?"grabbing":"grab",opacity:Hl===ru?.5:1,transition:Hl===ru?"none":"all 0.15s ease"},onMouseEnter:Lu=>{Pu||(Lu.currentTarget.style.background="#2b2b2b")},onMouseLeave:Lu=>{Pu||(Lu.currentTarget.style.background="transparent")},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"6px",right:"6px",width:"20px",height:"20px",borderRadius:"50%",background:"#4a4a4a",color:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"600",fontFamily:FONT_FAMILY$9,zIndex:1,boxShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:ru}),jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${Al[ru]||129}%`,background:"#ffffff",borderRadius:"2px",overflow:"hidden"},children:Fl[ru]?jsxRuntimeExports.jsx("img",{src:Fl[ru],alt:`Page ${ru}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",display:"block",transform:(()=>{const Lu=_l[ru]||{rotation:0,mirrorH:!1,mirrorV:!1},Ju=[];return Lu.rotation&&Ju.push(`rotate(${Lu.rotation}deg)`),Lu.mirrorH&&Ju.push("scaleX(-1)"),Lu.mirrorV&&Ju.push("scaleY(-1)"),Ju.length>0?Ju.join(" "):"none"})(),transformOrigin:"center center"}}):jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#666",fontSize:"10px"},children:"Loading..."})})]},ru)}),pu.length===0&&jsxRuntimeExports.jsx("div",{style:{padding:"32px 16px",textAlign:"center",color:"#777",fontSize:"12px"},children:"No pages are visible in this space. Add pages to the active space to see them here."})]}),Il&&jsxRuntimeExports.jsxs("div",{ref:uu,style:{position:"fixed",left:Il.x,top:Il.y,background:"#333",border:"1px solid #444",borderRadius:"6px",padding:"4px",zIndex:1e4,minWidth:"180px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",fontFamily:FONT_FAMILY$9},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Jl(Il.pageNumber),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"13px",textAlign:"left",cursor:"pointer",color:"#ddd",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ru=>ru.currentTarget.style.background="#3a3a3a",onMouseLeave:ru=>ru.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx(Icon,{name:"scissors",size:14,color:"#999"}),"Cut"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>iu(Il.pageNumber),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"13px",textAlign:"left",cursor:"pointer",color:"#ddd",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ru=>ru.currentTarget.style.background="#3a3a3a",onMouseLeave:ru=>ru.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx(Icon,{name:"copy",size:14,color:"#999"}),"Copy"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>fu(Il.pageNumber),disabled:!xa,style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"13px",textAlign:"left",cursor:xa?"pointer":"not-allowed",color:xa?"#ddd":"#666",display:"flex",alignItems:"center",gap:"8px",opacity:xa?1:.5},onMouseEnter:ru=>{xa&&(ru.currentTarget.style.background="#3a3a3a")},onMouseLeave:ru=>{ru.currentTarget.style.background="transparent"},children:[jsxRuntimeExports.jsx(Icon,{name:"paste",size:14,color:xa?"#999":"#555"}),"Paste"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Vl(Il.pageNumber),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"13px",textAlign:"left",cursor:"pointer",color:"#ddd",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ru=>ru.currentTarget.style.background="#3a3a3a",onMouseLeave:ru=>ru.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx(Icon,{name:"duplicate",size:14,color:"#999"}),"Duplicate"]}),jsxRuntimeExports.jsx("div",{style:{height:"1px",background:"#444",margin:"4px 0"}}),jsxRuntimeExports.jsxs("button",{onClick:()=>_u(Il.pageNumber),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"13px",textAlign:"left",cursor:"pointer",color:"#ddd",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ru=>ru.currentTarget.style.background="#3a3a3a",onMouseLeave:ru=>ru.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx(Icon,{name:"rotate",size:14,color:"#999"}),"Rotate"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>bu(Il.pageNumber),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"13px",textAlign:"left",cursor:"pointer",color:"#ddd",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ru=>ru.currentTarget.style.background="#3a3a3a",onMouseLeave:ru=>ru.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx(Icon,{name:"flipHorizontal",size:14,color:"#999"}),"Mirror Horizontally"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Cu(Il.pageNumber),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"13px",textAlign:"left",cursor:"pointer",color:"#ddd",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ru=>ru.currentTarget.style.background="#3a3a3a",onMouseLeave:ru=>ru.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx(Icon,{name:"flipVertical",size:14,color:"#999"}),"Mirror Vertically"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Tu(Il.pageNumber),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"13px",textAlign:"left",cursor:"pointer",color:"#ddd",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ru=>ru.currentTarget.style.background="#3a3a3a",onMouseLeave:ru=>ru.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx(Icon,{name:"reset",size:14,color:"#999"}),"Reset"]}),jsxRuntimeExports.jsx("div",{style:{height:"1px",background:"#444",margin:"4px 0"}}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ql(Il.pageNumber),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"13px",textAlign:"left",cursor:"pointer",color:"#ff6b6b",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ru=>ru.currentTarget.style.background="#3a3a3a",onMouseLeave:ru=>ru.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx(Icon,{name:"trash",size:14,color:"#ff6b6b"}),"Delete"]})]})]})},FONT_FAMILY$8='-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Segoe UI", Roboto, Ubuntu, "Noto Sans", Arial, sans-serif',SearchTextPanel=({pdfDoc:cs,numPages:is,onNavigateToPage:us})=>{const[hs,lo]=reactExports.useState(""),[co,uo]=reactExports.useState([]),[ga,ba]=reactExports.useState(!1),[xa,_a]=reactExports.useState(-1),$a=reactExports.useRef(null),xl=reactExports.useCallback(async()=>{if(!cs||!hs.trim()){uo([]);return}ba(!0);const _l=[],El=hs.toLowerCase().trim();try{for(let Sl=1;Sl<=is;Sl++)try{const Fl=(await(await cs.getPage(Sl)).getTextContent()).items.filter(Pl=>Pl.str&&Pl.str.trim().length>0).map(Pl=>Pl.str).join(" ").toLowerCase();if(Fl.includes(El)){let Pl=0;for(;(Pl=Fl.indexOf(El,Pl))!==-1;){const Al=Math.max(0,Pl-50),Rl=Math.min(Fl.length,Pl+El.length+50),Bl=Fl.substring(Al,Rl).replace(/\s+/g," ").trim();_l.push({pageNumber:Sl,index:Pl,snippet:Bl,matchIndex:Pl-Al}),Pl+=El.length}}}catch(Cl){console.error(`Error searching page ${Sl}:`,Cl)}}catch(Sl){console.error("Error performing search:",Sl)}ba(!1),uo(_l),_a(-1)},[cs,is,hs]);reactExports.useEffect(()=>{const _l=setTimeout(()=>{xl()},300);return()=>clearTimeout(_l)},[hs,xl]);const yl=reactExports.useCallback(_l=>{us&&us(_l.pageNumber)},[us]),wl=(_l,El,Sl)=>{const Cl=_l.substring(0,El),Tl=_l.substring(El,El+Sl),Dl=_l.substring(El+Sl);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Cl,jsxRuntimeExports.jsx("strong",{style:{background:"#4A90E2",color:"#ffffff"},children:Tl}),Dl]})};return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",fontFamily:FONT_FAMILY$8,background:"#252525"},children:[jsxRuntimeExports.jsx("div",{style:{padding:"12px",background:"#252525",borderBottom:"1px solid #3a3a3a"},children:jsxRuntimeExports.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(Icon,{name:"search",size:16,color:"#999",style:{position:"absolute",left:"10px",pointerEvents:"none"}}),jsxRuntimeExports.jsx("input",{ref:$a,type:"text",value:hs,onChange:_l=>lo(_l.target.value),placeholder:"Search text in PDF...",style:{width:"100%",padding:"8px 10px 8px 36px",background:"#2b2b2b",border:"1px solid #3a3a3a",borderRadius:"6px",fontSize:"13px",fontFamily:FONT_FAMILY$8,color:"#ddd",outline:"none",transition:"border-color 0.15s ease"},onFocus:_l=>_l.currentTarget.style.borderColor="#4A90E2",onBlur:_l=>_l.currentTarget.style.borderColor="#3a3a3a"}),hs&&jsxRuntimeExports.jsx("button",{onClick:()=>{var _l;lo(""),uo([]),(_l=$a.current)==null||_l.focus()},style:{position:"absolute",right:"8px",background:"transparent",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:_l=>_l.currentTarget.style.background="#333",onMouseLeave:_l=>_l.currentTarget.style.background="transparent",children:jsxRuntimeExports.jsx(Icon,{name:"close",size:14,color:"#999"})})]})}),jsxRuntimeExports.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px"},children:[ga&&jsxRuntimeExports.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#999",fontSize:"13px"},children:"Searching..."}),!ga&&hs&&co.length===0&&jsxRuntimeExports.jsx("div",{style:{padding:"40px 20px",textAlign:"center",color:"#999",fontSize:"13px"},children:"No results found"}),!ga&&!hs&&jsxRuntimeExports.jsx("div",{style:{padding:"40px 20px",textAlign:"center",color:"#999",fontSize:"13px"},children:"Enter a search term to find text in the PDF"}),!ga&&co.length>0&&jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:co.map((_l,El)=>jsxRuntimeExports.jsxs("div",{onClick:()=>{yl(_l),_a(El)},onDoubleClick:()=>yl(_l),style:{padding:"10px 12px",background:xa===El?"#3a3a3a":"#2b2b2b",border:"1px solid #3a3a3a",borderRadius:"6px",cursor:"pointer",transition:"background 0.15s ease",fontSize:"12px",color:"#ddd"},onMouseEnter:Sl=>{xa!==El&&(Sl.currentTarget.style.background="#333")},onMouseLeave:Sl=>{xa!==El&&(Sl.currentTarget.style.background="#2b2b2b")},children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:jsxRuntimeExports.jsxs("span",{style:{fontSize:"11px",fontWeight:"600",color:"#4A90E2",background:"#e8f0fe",padding:"2px 6px",borderRadius:"4px",marginRight:"8px"},children:["Page ",_l.pageNumber]})}),jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",lineHeight:"1.4",color:"#999",overflow:"hidden",textOverflow:"ellipsis"},children:wl(_l.snippet,_l.matchIndex,hs.length)})]},`${_l.pageNumber}-${_l.index}`))}),!ga&&co.length>0&&jsxRuntimeExports.jsxs("div",{style:{padding:"8px 12px",fontSize:"11px",color:"#999",textAlign:"center",borderTop:"1px solid #3a3a3a",marginTop:"8px",paddingTop:"12px"},children:[co.length," result",co.length!==1?"s":""," found"]})]})]})};function useCombinedRefs(){for(var cs=arguments.length,is=new Array(cs),us=0;us<cs;us++)is[us]=arguments[us];return reactExports.useMemo(()=>hs=>{is.forEach(lo=>lo(hs))},is)}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(cs){const is=Object.prototype.toString.call(cs);return is==="[object Window]"||is==="[object global]"}function isNode(cs){return"nodeType"in cs}function getWindow(cs){var is,us;return cs?isWindow(cs)?cs:isNode(cs)&&(is=(us=cs.ownerDocument)==null?void 0:us.defaultView)!=null?is:window:window}function isDocument(cs){const{Document:is}=getWindow(cs);return cs instanceof is}function isHTMLElement(cs){return isWindow(cs)?!1:cs instanceof getWindow(cs).HTMLElement}function isSVGElement(cs){return cs instanceof getWindow(cs).SVGElement}function getOwnerDocument(cs){return cs?isWindow(cs)?cs.document:isNode(cs)?isDocument(cs)?cs:isHTMLElement(cs)||isSVGElement(cs)?cs.ownerDocument:document:document:document}const useIsomorphicLayoutEffect=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(cs){const is=reactExports.useRef(cs);return useIsomorphicLayoutEffect(()=>{is.current=cs}),reactExports.useCallback(function(){for(var us=arguments.length,hs=new Array(us),lo=0;lo<us;lo++)hs[lo]=arguments[lo];return is.current==null?void 0:is.current(...hs)},[])}function useInterval(){const cs=reactExports.useRef(null),is=reactExports.useCallback((hs,lo)=>{cs.current=setInterval(hs,lo)},[]),us=reactExports.useCallback(()=>{cs.current!==null&&(clearInterval(cs.current),cs.current=null)},[]);return[is,us]}function useLatestValue(cs,is){is===void 0&&(is=[cs]);const us=reactExports.useRef(cs);return useIsomorphicLayoutEffect(()=>{us.current!==cs&&(us.current=cs)},is),us}function useLazyMemo(cs,is){const us=reactExports.useRef();return reactExports.useMemo(()=>{const hs=cs(us.current);return us.current=hs,hs},[...is])}function useNodeRef(cs){const is=useEvent(cs),us=reactExports.useRef(null),hs=reactExports.useCallback(lo=>{lo!==us.current&&(is==null||is(lo,us.current)),us.current=lo},[]);return[us,hs]}function usePrevious(cs){const is=reactExports.useRef();return reactExports.useEffect(()=>{is.current=cs},[cs]),is.current}let ids={};function useUniqueId(cs,is){return reactExports.useMemo(()=>{if(is)return is;const us=ids[cs]==null?0:ids[cs]+1;return ids[cs]=us,cs+"-"+us},[cs,is])}function createAdjustmentFn(cs){return function(is){for(var us=arguments.length,hs=new Array(us>1?us-1:0),lo=1;lo<us;lo++)hs[lo-1]=arguments[lo];return hs.reduce((co,uo)=>{const ga=Object.entries(uo);for(const[ba,xa]of ga){const _a=co[ba];_a!=null&&(co[ba]=_a+cs*xa)}return co},{...is})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(cs){return"clientX"in cs&&"clientY"in cs}function isKeyboardEvent(cs){if(!cs)return!1;const{KeyboardEvent:is}=getWindow(cs.target);return is&&cs instanceof is}function isTouchEvent(cs){if(!cs)return!1;const{TouchEvent:is}=getWindow(cs.target);return is&&cs instanceof is}function getEventCoordinates(cs){if(isTouchEvent(cs)){if(cs.touches&&cs.touches.length){const{clientX:is,clientY:us}=cs.touches[0];return{x:is,y:us}}else if(cs.changedTouches&&cs.changedTouches.length){const{clientX:is,clientY:us}=cs.changedTouches[0];return{x:is,y:us}}}return hasViewportRelativeCoordinates(cs)?{x:cs.clientX,y:cs.clientY}:null}const CSS$1=Object.freeze({Translate:{toString(cs){if(!cs)return;const{x:is,y:us}=cs;return"translate3d("+(is?Math.round(is):0)+"px, "+(us?Math.round(us):0)+"px, 0)"}},Scale:{toString(cs){if(!cs)return;const{scaleX:is,scaleY:us}=cs;return"scaleX("+is+") scaleY("+us+")"}},Transform:{toString(cs){if(cs)return[CSS$1.Translate.toString(cs),CSS$1.Scale.toString(cs)].join(" ")}},Transition:{toString(cs){let{property:is,duration:us,easing:hs}=cs;return is+" "+us+"ms "+hs}}}),SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(cs){return cs.matches(SELECTOR)?cs:cs.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(cs){let{id:is,value:us}=cs;return React.createElement("div",{id:is,style:hiddenStyles},us)}function LiveRegion(cs){let{id:is,announcement:us,ariaLiveType:hs="assertive"}=cs;const lo={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React.createElement("div",{id:is,style:lo,role:"status","aria-live":hs,"aria-atomic":!0},us)}function useAnnouncement(){const[cs,is]=reactExports.useState("");return{announce:reactExports.useCallback(hs=>{hs!=null&&is(hs)},[]),announcement:cs}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(cs){const is=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!is)throw new Error("useDndMonitor must be used within a children of <DndContext>");return is(cs)},[cs,is])}function useDndMonitorProvider(){const[cs]=reactExports.useState(()=>new Set),is=reactExports.useCallback(hs=>(cs.add(hs),()=>cs.delete(hs)),[cs]);return[reactExports.useCallback(hs=>{let{type:lo,event:co}=hs;cs.forEach(uo=>{var ga;return(ga=uo[lo])==null?void 0:ga.call(uo,co)})},[cs]),is]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(cs){let{active:is}=cs;return"Picked up draggable item "+is.id+"."},onDragOver(cs){let{active:is,over:us}=cs;return us?"Draggable item "+is.id+" was moved over droppable area "+us.id+".":"Draggable item "+is.id+" is no longer over a droppable area."},onDragEnd(cs){let{active:is,over:us}=cs;return us?"Draggable item "+is.id+" was dropped over droppable area "+us.id:"Draggable item "+is.id+" was dropped."},onDragCancel(cs){let{active:is}=cs;return"Dragging was cancelled. Draggable item "+is.id+" was dropped."}};function Accessibility(cs){let{announcements:is=defaultAnnouncements,container:us,hiddenTextDescribedById:hs,screenReaderInstructions:lo=defaultScreenReaderInstructions}=cs;const{announce:co,announcement:uo}=useAnnouncement(),ga=useUniqueId("DndLiveRegion"),[ba,xa]=reactExports.useState(!1);if(reactExports.useEffect(()=>{xa(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart($a){let{active:xl}=$a;co(is.onDragStart({active:xl}))},onDragMove($a){let{active:xl,over:yl}=$a;is.onDragMove&&co(is.onDragMove({active:xl,over:yl}))},onDragOver($a){let{active:xl,over:yl}=$a;co(is.onDragOver({active:xl,over:yl}))},onDragEnd($a){let{active:xl,over:yl}=$a;co(is.onDragEnd({active:xl,over:yl}))},onDragCancel($a){let{active:xl,over:yl}=$a;co(is.onDragCancel({active:xl,over:yl}))}}),[co,is])),!ba)return null;const _a=React.createElement(React.Fragment,null,React.createElement(HiddenText,{id:hs,value:lo.draggable}),React.createElement(LiveRegion,{id:ga,announcement:uo}));return us?reactDomExports.createPortal(_a,us):_a}var Action;(function(cs){cs.DragStart="dragStart",cs.DragMove="dragMove",cs.DragEnd="dragEnd",cs.DragCancel="dragCancel",cs.DragOver="dragOver",cs.RegisterDroppable="registerDroppable",cs.SetDroppableDisabled="setDroppableDisabled",cs.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop(){}function useSensor(cs,is){return reactExports.useMemo(()=>({sensor:cs,options:is??{}}),[cs,is])}function useSensors(){for(var cs=arguments.length,is=new Array(cs),us=0;us<cs;us++)is[us]=arguments[us];return reactExports.useMemo(()=>[...is].filter(hs=>hs!=null),[...is])}const defaultCoordinates=Object.freeze({x:0,y:0});function distanceBetween(cs,is){return Math.sqrt(Math.pow(cs.x-is.x,2)+Math.pow(cs.y-is.y,2))}function getRelativeTransformOrigin(cs,is){const us=getEventCoordinates(cs);if(!us)return"0 0";const hs={x:(us.x-is.left)/is.width*100,y:(us.y-is.top)/is.height*100};return hs.x+"% "+hs.y+"%"}function sortCollisionsAsc(cs,is){let{data:{value:us}}=cs,{data:{value:hs}}=is;return us-hs}function sortCollisionsDesc(cs,is){let{data:{value:us}}=cs,{data:{value:hs}}=is;return hs-us}function cornersOfRectangle(cs){let{left:is,top:us,height:hs,width:lo}=cs;return[{x:is,y:us},{x:is+lo,y:us},{x:is,y:us+hs},{x:is+lo,y:us+hs}]}function getFirstCollision(cs,is){if(!cs||cs.length===0)return null;const[us]=cs;return us[is]}function centerOfRectangle(cs,is,us){return is===void 0&&(is=cs.left),us===void 0&&(us=cs.top),{x:is+cs.width*.5,y:us+cs.height*.5}}const closestCenter=cs=>{let{collisionRect:is,droppableRects:us,droppableContainers:hs}=cs;const lo=centerOfRectangle(is,is.left,is.top),co=[];for(const uo of hs){const{id:ga}=uo,ba=us.get(ga);if(ba){const xa=distanceBetween(centerOfRectangle(ba),lo);co.push({id:ga,data:{droppableContainer:uo,value:xa}})}}return co.sort(sortCollisionsAsc)};function getIntersectionRatio(cs,is){const us=Math.max(is.top,cs.top),hs=Math.max(is.left,cs.left),lo=Math.min(is.left+is.width,cs.left+cs.width),co=Math.min(is.top+is.height,cs.top+cs.height),uo=lo-hs,ga=co-us;if(hs<lo&&us<co){const ba=is.width*is.height,xa=cs.width*cs.height,_a=uo*ga,$a=_a/(ba+xa-_a);return Number($a.toFixed(4))}return 0}const rectIntersection=cs=>{let{collisionRect:is,droppableRects:us,droppableContainers:hs}=cs;const lo=[];for(const co of hs){const{id:uo}=co,ga=us.get(uo);if(ga){const ba=getIntersectionRatio(ga,is);ba>0&&lo.push({id:uo,data:{droppableContainer:co,value:ba}})}}return lo.sort(sortCollisionsDesc)};function isPointWithinRect(cs,is){const{top:us,left:hs,bottom:lo,right:co}=is;return us<=cs.y&&cs.y<=lo&&hs<=cs.x&&cs.x<=co}const pointerWithin=cs=>{let{droppableContainers:is,droppableRects:us,pointerCoordinates:hs}=cs;if(!hs)return[];const lo=[];for(const co of is){const{id:uo}=co,ga=us.get(uo);if(ga&&isPointWithinRect(hs,ga)){const xa=cornersOfRectangle(ga).reduce(($a,xl)=>$a+distanceBetween(hs,xl),0),_a=Number((xa/4).toFixed(4));lo.push({id:uo,data:{droppableContainer:co,value:_a}})}}return lo.sort(sortCollisionsAsc)};function adjustScale(cs,is,us){return{...cs,scaleX:is&&us?is.width/us.width:1,scaleY:is&&us?is.height/us.height:1}}function getRectDelta(cs,is){return cs&&is?{x:cs.left-is.left,y:cs.top-is.top}:defaultCoordinates}function createRectAdjustmentFn(cs){return function(us){for(var hs=arguments.length,lo=new Array(hs>1?hs-1:0),co=1;co<hs;co++)lo[co-1]=arguments[co];return lo.reduce((uo,ga)=>({...uo,top:uo.top+cs*ga.y,bottom:uo.bottom+cs*ga.y,left:uo.left+cs*ga.x,right:uo.right+cs*ga.x}),{...us})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(cs){if(cs.startsWith("matrix3d(")){const is=cs.slice(9,-1).split(/, /);return{x:+is[12],y:+is[13],scaleX:+is[0],scaleY:+is[5]}}else if(cs.startsWith("matrix(")){const is=cs.slice(7,-1).split(/, /);return{x:+is[4],y:+is[5],scaleX:+is[0],scaleY:+is[3]}}return null}function inverseTransform(cs,is,us){const hs=parseTransform(is);if(!hs)return cs;const{scaleX:lo,scaleY:co,x:uo,y:ga}=hs,ba=cs.left-uo-(1-lo)*parseFloat(us),xa=cs.top-ga-(1-co)*parseFloat(us.slice(us.indexOf(" ")+1)),_a=lo?cs.width/lo:cs.width,$a=co?cs.height/co:cs.height;return{width:_a,height:$a,top:xa,right:ba+_a,bottom:xa+$a,left:ba}}const defaultOptions={ignoreTransform:!1};function getClientRect(cs,is){is===void 0&&(is=defaultOptions);let us=cs.getBoundingClientRect();if(is.ignoreTransform){const{transform:xa,transformOrigin:_a}=getWindow(cs).getComputedStyle(cs);xa&&(us=inverseTransform(us,xa,_a))}const{top:hs,left:lo,width:co,height:uo,bottom:ga,right:ba}=us;return{top:hs,left:lo,width:co,height:uo,bottom:ga,right:ba}}function getTransformAgnosticClientRect(cs){return getClientRect(cs,{ignoreTransform:!0})}function getWindowClientRect(cs){const is=cs.innerWidth,us=cs.innerHeight;return{top:0,left:0,right:is,bottom:us,width:is,height:us}}function isFixed(cs,is){return is===void 0&&(is=getWindow(cs).getComputedStyle(cs)),is.position==="fixed"}function isScrollable(cs,is){is===void 0&&(is=getWindow(cs).getComputedStyle(cs));const us=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(lo=>{const co=is[lo];return typeof co=="string"?us.test(co):!1})}function getScrollableAncestors(cs,is){const us=[];function hs(lo){if(is!=null&&us.length>=is||!lo)return us;if(isDocument(lo)&&lo.scrollingElement!=null&&!us.includes(lo.scrollingElement))return us.push(lo.scrollingElement),us;if(!isHTMLElement(lo)||isSVGElement(lo)||us.includes(lo))return us;const co=getWindow(cs).getComputedStyle(lo);return lo!==cs&&isScrollable(lo,co)&&us.push(lo),isFixed(lo,co)?us:hs(lo.parentNode)}return cs?hs(cs):us}function getFirstScrollableAncestor(cs){const[is]=getScrollableAncestors(cs,1);return is??null}function getScrollableElement(cs){return!canUseDOM||!cs?null:isWindow(cs)?cs:isNode(cs)?isDocument(cs)||cs===getOwnerDocument(cs).scrollingElement?window:isHTMLElement(cs)?cs:null:null}function getScrollXCoordinate(cs){return isWindow(cs)?cs.scrollX:cs.scrollLeft}function getScrollYCoordinate(cs){return isWindow(cs)?cs.scrollY:cs.scrollTop}function getScrollCoordinates(cs){return{x:getScrollXCoordinate(cs),y:getScrollYCoordinate(cs)}}var Direction;(function(cs){cs[cs.Forward=1]="Forward",cs[cs.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(cs){return!canUseDOM||!cs?!1:cs===document.scrollingElement}function getScrollPosition(cs){const is={x:0,y:0},us=isDocumentScrollingElement(cs)?{height:window.innerHeight,width:window.innerWidth}:{height:cs.clientHeight,width:cs.clientWidth},hs={x:cs.scrollWidth-us.width,y:cs.scrollHeight-us.height},lo=cs.scrollTop<=is.y,co=cs.scrollLeft<=is.x,uo=cs.scrollTop>=hs.y,ga=cs.scrollLeft>=hs.x;return{isTop:lo,isLeft:co,isBottom:uo,isRight:ga,maxScroll:hs,minScroll:is}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(cs,is,us,hs,lo){let{top:co,left:uo,right:ga,bottom:ba}=us;hs===void 0&&(hs=10),lo===void 0&&(lo=defaultThreshold);const{isTop:xa,isBottom:_a,isLeft:$a,isRight:xl}=getScrollPosition(cs),yl={x:0,y:0},wl={x:0,y:0},_l={height:is.height*lo.y,width:is.width*lo.x};return!xa&&co<=is.top+_l.height?(yl.y=Direction.Backward,wl.y=hs*Math.abs((is.top+_l.height-co)/_l.height)):!_a&&ba>=is.bottom-_l.height&&(yl.y=Direction.Forward,wl.y=hs*Math.abs((is.bottom-_l.height-ba)/_l.height)),!xl&&ga>=is.right-_l.width?(yl.x=Direction.Forward,wl.x=hs*Math.abs((is.right-_l.width-ga)/_l.width)):!$a&&uo<=is.left+_l.width&&(yl.x=Direction.Backward,wl.x=hs*Math.abs((is.left+_l.width-uo)/_l.width)),{direction:yl,speed:wl}}function getScrollElementRect(cs){if(cs===document.scrollingElement){const{innerWidth:co,innerHeight:uo}=window;return{top:0,left:0,right:co,bottom:uo,width:co,height:uo}}const{top:is,left:us,right:hs,bottom:lo}=cs.getBoundingClientRect();return{top:is,left:us,right:hs,bottom:lo,width:cs.clientWidth,height:cs.clientHeight}}function getScrollOffsets(cs){return cs.reduce((is,us)=>add(is,getScrollCoordinates(us)),defaultCoordinates)}function getScrollXOffset(cs){return cs.reduce((is,us)=>is+getScrollXCoordinate(us),0)}function getScrollYOffset(cs){return cs.reduce((is,us)=>is+getScrollYCoordinate(us),0)}function scrollIntoViewIfNeeded(cs,is){if(is===void 0&&(is=getClientRect),!cs)return;const{top:us,left:hs,bottom:lo,right:co}=is(cs);getFirstScrollableAncestor(cs)&&(lo<=0||co<=0||us>=window.innerHeight||hs>=window.innerWidth)&&cs.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];class Rect{constructor(is,us){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const hs=getScrollableAncestors(us),lo=getScrollOffsets(hs);this.rect={...is},this.width=is.width,this.height=is.height;for(const[co,uo,ga]of properties)for(const ba of uo)Object.defineProperty(this,ba,{get:()=>{const xa=ga(hs),_a=lo[co]-xa;return this.rect[ba]+_a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Listeners{constructor(is){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(us=>{var hs;return(hs=this.target)==null?void 0:hs.removeEventListener(...us)})},this.target=is}add(is,us,hs){var lo;(lo=this.target)==null||lo.addEventListener(is,us,hs),this.listeners.push([is,us,hs])}}function getEventListenerTarget(cs){const{EventTarget:is}=getWindow(cs);return cs instanceof is?cs:getOwnerDocument(cs)}function hasExceededDistance(cs,is){const us=Math.abs(cs.x),hs=Math.abs(cs.y);return typeof is=="number"?Math.sqrt(us**2+hs**2)>is:"x"in is&&"y"in is?us>is.x&&hs>is.y:"x"in is?us>is.x:"y"in is?hs>is.y:!1}var EventName;(function(cs){cs.Click="click",cs.DragStart="dragstart",cs.Keydown="keydown",cs.ContextMenu="contextmenu",cs.Resize="resize",cs.SelectionChange="selectionchange",cs.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault(cs){cs.preventDefault()}function stopPropagation(cs){cs.stopPropagation()}var KeyboardCode;(function(cs){cs.Space="Space",cs.Down="ArrowDown",cs.Right="ArrowRight",cs.Left="ArrowLeft",cs.Up="ArrowUp",cs.Esc="Escape",cs.Enter="Enter",cs.Tab="Tab"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter,KeyboardCode.Tab]},defaultKeyboardCoordinateGetter=(cs,is)=>{let{currentCoordinates:us}=is;switch(cs.code){case KeyboardCode.Right:return{...us,x:us.x+25};case KeyboardCode.Left:return{...us,x:us.x-25};case KeyboardCode.Down:return{...us,y:us.y+25};case KeyboardCode.Up:return{...us,y:us.y-25}}};class KeyboardSensor{constructor(is){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=is;const{event:{target:us}}=is;this.props=is,this.listeners=new Listeners(getOwnerDocument(us)),this.windowListeners=new Listeners(getWindow(us)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:is,onStart:us}=this.props,hs=is.node.current;hs&&scrollIntoViewIfNeeded(hs),us(defaultCoordinates)}handleKeyDown(is){if(isKeyboardEvent(is)){const{active:us,context:hs,options:lo}=this.props,{keyboardCodes:co=defaultKeyboardCodes,coordinateGetter:uo=defaultKeyboardCoordinateGetter,scrollBehavior:ga="smooth"}=lo,{code:ba}=is;if(co.end.includes(ba)){this.handleEnd(is);return}if(co.cancel.includes(ba)){this.handleCancel(is);return}const{collisionRect:xa}=hs.current,_a=xa?{x:xa.left,y:xa.top}:defaultCoordinates;this.referenceCoordinates||(this.referenceCoordinates=_a);const $a=uo(is,{active:us,context:hs.current,currentCoordinates:_a});if($a){const xl=subtract($a,_a),yl={x:0,y:0},{scrollableAncestors:wl}=hs.current;for(const _l of wl){const El=is.code,{isTop:Sl,isRight:Cl,isLeft:Tl,isBottom:Dl,maxScroll:Fl,minScroll:Pl}=getScrollPosition(_l),Al=getScrollElementRect(_l),Rl={x:Math.min(El===KeyboardCode.Right?Al.right-Al.width/2:Al.right,Math.max(El===KeyboardCode.Right?Al.left:Al.left+Al.width/2,$a.x)),y:Math.min(El===KeyboardCode.Down?Al.bottom-Al.height/2:Al.bottom,Math.max(El===KeyboardCode.Down?Al.top:Al.top+Al.height/2,$a.y))},Il=El===KeyboardCode.Right&&!Cl||El===KeyboardCode.Left&&!Tl,Bl=El===KeyboardCode.Down&&!Dl||El===KeyboardCode.Up&&!Sl;if(Il&&Rl.x!==$a.x){const Ol=_l.scrollLeft+xl.x,zl=El===KeyboardCode.Right&&Ol<=Fl.x||El===KeyboardCode.Left&&Ol>=Pl.x;if(zl&&!xl.y){_l.scrollTo({left:Ol,behavior:ga});return}zl?yl.x=_l.scrollLeft-Ol:yl.x=El===KeyboardCode.Right?_l.scrollLeft-Fl.x:_l.scrollLeft-Pl.x,yl.x&&_l.scrollBy({left:-yl.x,behavior:ga});break}else if(Bl&&Rl.y!==$a.y){const Ol=_l.scrollTop+xl.y,zl=El===KeyboardCode.Down&&Ol<=Fl.y||El===KeyboardCode.Up&&Ol>=Pl.y;if(zl&&!xl.x){_l.scrollTo({top:Ol,behavior:ga});return}zl?yl.y=_l.scrollTop-Ol:yl.y=El===KeyboardCode.Down?_l.scrollTop-Fl.y:_l.scrollTop-Pl.y,yl.y&&_l.scrollBy({top:-yl.y,behavior:ga});break}}this.handleMove(is,add(subtract($a,this.referenceCoordinates),yl))}}}handleMove(is,us){const{onMove:hs}=this.props;is.preventDefault(),hs(us)}handleEnd(is){const{onEnd:us}=this.props;is.preventDefault(),this.detach(),us()}handleCancel(is){const{onCancel:us}=this.props;is.preventDefault(),this.detach(),us()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(cs,is,us)=>{let{keyboardCodes:hs=defaultKeyboardCodes,onActivation:lo}=is,{active:co}=us;const{code:uo}=cs.nativeEvent;if(hs.start.includes(uo)){const ga=co.activatorNode.current;return ga&&cs.target!==ga?!1:(cs.preventDefault(),lo==null||lo({event:cs.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(cs){return!!(cs&&"distance"in cs)}function isDelayConstraint(cs){return!!(cs&&"delay"in cs)}class AbstractPointerSensor{constructor(is,us,hs){var lo;hs===void 0&&(hs=getEventListenerTarget(is.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=is,this.events=us;const{event:co}=is,{target:uo}=co;this.props=is,this.events=us,this.document=getOwnerDocument(uo),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(hs),this.windowListeners=new Listeners(getWindow(uo)),this.initialCoordinates=(lo=getEventCoordinates(co))!=null?lo:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:is,props:{options:{activationConstraint:us,bypassActivationConstraint:hs}}}=this;if(this.listeners.add(is.move.name,this.handleMove,{passive:!1}),this.listeners.add(is.end.name,this.handleEnd),is.cancel&&this.listeners.add(is.cancel.name,this.handleCancel),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault),this.documentListeners.add(EventName.Keydown,this.handleKeydown),us){if(hs!=null&&hs({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(us)){this.timeoutId=setTimeout(this.handleStart,us.delay),this.handlePending(us);return}if(isDistanceConstraint(us)){this.handlePending(us);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(is,us){const{active:hs,onPending:lo}=this.props;lo(hs,is,this.initialCoordinates,us)}handleStart(){const{initialCoordinates:is}=this,{onStart:us}=this.props;is&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),us(is))}handleMove(is){var us;const{activated:hs,initialCoordinates:lo,props:co}=this,{onMove:uo,options:{activationConstraint:ga}}=co;if(!lo)return;const ba=(us=getEventCoordinates(is))!=null?us:defaultCoordinates,xa=subtract(lo,ba);if(!hs&&ga){if(isDistanceConstraint(ga)){if(ga.tolerance!=null&&hasExceededDistance(xa,ga.tolerance))return this.handleCancel();if(hasExceededDistance(xa,ga.distance))return this.handleStart()}if(isDelayConstraint(ga)&&hasExceededDistance(xa,ga.tolerance))return this.handleCancel();this.handlePending(ga,xa);return}is.cancelable&&is.preventDefault(),uo(ba)}handleEnd(){const{onAbort:is,onEnd:us}=this.props;this.detach(),this.activated||is(this.props.active),us()}handleCancel(){const{onAbort:is,onCancel:us}=this.props;this.detach(),this.activated||is(this.props.active),us()}handleKeydown(is){is.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var is;(is=this.document.getSelection())==null||is.removeAllRanges()}}const events={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(is){const{event:us}=is,hs=getOwnerDocument(us.target);super(is,events,hs)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(cs,is)=>{let{nativeEvent:us}=cs,{onActivation:hs}=is;return!us.isPrimary||us.button!==0?!1:(hs==null||hs({event:us}),!0)}}];const events$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(cs){cs[cs.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(is){super(is,events$1,getOwnerDocument(is.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(cs,is)=>{let{nativeEvent:us}=cs,{onActivation:hs}=is;return us.button===MouseButton.RightClick?!1:(hs==null||hs({event:us}),!0)}}];const events$2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(is){super(is,events$2)}static setup(){return window.addEventListener(events$2.move.name,is,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,is)};function is(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(cs,is)=>{let{nativeEvent:us}=cs,{onActivation:hs}=is;const{touches:lo}=us;return lo.length>1?!1:(hs==null||hs({event:us}),!0)}}];var AutoScrollActivator;(function(cs){cs[cs.Pointer=0]="Pointer",cs[cs.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(cs){cs[cs.TreeOrder=0]="TreeOrder",cs[cs.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(cs){let{acceleration:is,activator:us=AutoScrollActivator.Pointer,canScroll:hs,draggingRect:lo,enabled:co,interval:uo=5,order:ga=TraversalOrder.TreeOrder,pointerCoordinates:ba,scrollableAncestors:xa,scrollableAncestorRects:_a,delta:$a,threshold:xl}=cs;const yl=useScrollIntent({delta:$a,disabled:!co}),[wl,_l]=useInterval(),El=reactExports.useRef({x:0,y:0}),Sl=reactExports.useRef({x:0,y:0}),Cl=reactExports.useMemo(()=>{switch(us){case AutoScrollActivator.Pointer:return ba?{top:ba.y,bottom:ba.y,left:ba.x,right:ba.x}:null;case AutoScrollActivator.DraggableRect:return lo}},[us,lo,ba]),Tl=reactExports.useRef(null),Dl=reactExports.useCallback(()=>{const Pl=Tl.current;if(!Pl)return;const Al=El.current.x*Sl.current.x,Rl=El.current.y*Sl.current.y;Pl.scrollBy(Al,Rl)},[]),Fl=reactExports.useMemo(()=>ga===TraversalOrder.TreeOrder?[...xa].reverse():xa,[ga,xa]);reactExports.useEffect(()=>{if(!co||!xa.length||!Cl){_l();return}for(const Pl of Fl){if((hs==null?void 0:hs(Pl))===!1)continue;const Al=xa.indexOf(Pl),Rl=_a[Al];if(!Rl)continue;const{direction:Il,speed:Bl}=getScrollDirectionAndSpeed(Pl,Rl,Cl,is,xl);for(const Ol of["x","y"])yl[Ol][Il[Ol]]||(Bl[Ol]=0,Il[Ol]=0);if(Bl.x>0||Bl.y>0){_l(),Tl.current=Pl,wl(Dl,uo),El.current=Bl,Sl.current=Il;return}}El.current={x:0,y:0},Sl.current={x:0,y:0},_l()},[is,Dl,hs,_l,co,uo,JSON.stringify(Cl),JSON.stringify(yl),wl,xa,Fl,_a,JSON.stringify(xl)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(cs){let{delta:is,disabled:us}=cs;const hs=usePrevious(is);return useLazyMemo(lo=>{if(us||!hs||!lo)return defaultScrollIntent;const co={x:Math.sign(is.x-hs.x),y:Math.sign(is.y-hs.y)};return{x:{[Direction.Backward]:lo.x[Direction.Backward]||co.x===-1,[Direction.Forward]:lo.x[Direction.Forward]||co.x===1},y:{[Direction.Backward]:lo.y[Direction.Backward]||co.y===-1,[Direction.Forward]:lo.y[Direction.Forward]||co.y===1}}},[us,is,hs])}function useCachedNode(cs,is){const us=is!=null?cs.get(is):void 0,hs=us?us.node.current:null;return useLazyMemo(lo=>{var co;return is==null?null:(co=hs??lo)!=null?co:null},[hs,is])}function useCombineActivators(cs,is){return reactExports.useMemo(()=>cs.reduce((us,hs)=>{const{sensor:lo}=hs,co=lo.activators.map(uo=>({eventName:uo.eventName,handler:is(uo.handler,hs)}));return[...us,...co]},[]),[cs,is])}var MeasuringStrategy;(function(cs){cs[cs.Always=0]="Always",cs[cs.BeforeDragging=1]="BeforeDragging",cs[cs.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(cs){cs.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(cs,is){let{dragging:us,dependencies:hs,config:lo}=is;const[co,uo]=reactExports.useState(null),{frequency:ga,measure:ba,strategy:xa}=lo,_a=reactExports.useRef(cs),$a=El(),xl=useLatestValue($a),yl=reactExports.useCallback(function(Sl){Sl===void 0&&(Sl=[]),!xl.current&&uo(Cl=>Cl===null?Sl:Cl.concat(Sl.filter(Tl=>!Cl.includes(Tl))))},[xl]),wl=reactExports.useRef(null),_l=useLazyMemo(Sl=>{if($a&&!us)return defaultValue;if(!Sl||Sl===defaultValue||_a.current!==cs||co!=null){const Cl=new Map;for(let Tl of cs){if(!Tl)continue;if(co&&co.length>0&&!co.includes(Tl.id)&&Tl.rect.current){Cl.set(Tl.id,Tl.rect.current);continue}const Dl=Tl.node.current,Fl=Dl?new Rect(ba(Dl),Dl):null;Tl.rect.current=Fl,Fl&&Cl.set(Tl.id,Fl)}return Cl}return Sl},[cs,co,us,$a,ba]);return reactExports.useEffect(()=>{_a.current=cs},[cs]),reactExports.useEffect(()=>{$a||yl()},[us,$a]),reactExports.useEffect(()=>{co&&co.length>0&&uo(null)},[JSON.stringify(co)]),reactExports.useEffect(()=>{$a||typeof ga!="number"||wl.current!==null||(wl.current=setTimeout(()=>{yl(),wl.current=null},ga))},[ga,$a,yl,...hs]),{droppableRects:_l,measureDroppableContainers:yl,measuringScheduled:co!=null};function El(){switch(xa){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return us;default:return!us}}}function useInitialValue(cs,is){return useLazyMemo(us=>cs?us||(typeof is=="function"?is(cs):cs):null,[is,cs])}function useInitialRect(cs,is){return useInitialValue(cs,is)}function useMutationObserver(cs){let{callback:is,disabled:us}=cs;const hs=useEvent(is),lo=reactExports.useMemo(()=>{if(us||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:co}=window;return new co(hs)},[hs,us]);return reactExports.useEffect(()=>()=>lo==null?void 0:lo.disconnect(),[lo]),lo}function useResizeObserver(cs){let{callback:is,disabled:us}=cs;const hs=useEvent(is),lo=reactExports.useMemo(()=>{if(us||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:co}=window;return new co(hs)},[us]);return reactExports.useEffect(()=>()=>lo==null?void 0:lo.disconnect(),[lo]),lo}function defaultMeasure(cs){return new Rect(getClientRect(cs),cs)}function useRect(cs,is,us){is===void 0&&(is=defaultMeasure);const[hs,lo]=reactExports.useState(null);function co(){lo(ba=>{if(!cs)return null;if(cs.isConnected===!1){var xa;return(xa=ba??us)!=null?xa:null}const _a=is(cs);return JSON.stringify(ba)===JSON.stringify(_a)?ba:_a})}const uo=useMutationObserver({callback(ba){if(cs)for(const xa of ba){const{type:_a,target:$a}=xa;if(_a==="childList"&&$a instanceof HTMLElement&&$a.contains(cs)){co();break}}}}),ga=useResizeObserver({callback:co});return useIsomorphicLayoutEffect(()=>{co(),cs?(ga==null||ga.observe(cs),uo==null||uo.observe(document.body,{childList:!0,subtree:!0})):(ga==null||ga.disconnect(),uo==null||uo.disconnect())},[cs]),hs}function useRectDelta(cs){const is=useInitialValue(cs);return getRectDelta(cs,is)}const defaultValue$1=[];function useScrollableAncestors(cs){const is=reactExports.useRef(cs),us=useLazyMemo(hs=>cs?hs&&hs!==defaultValue$1&&cs&&is.current&&cs.parentNode===is.current.parentNode?hs:getScrollableAncestors(cs):defaultValue$1,[cs]);return reactExports.useEffect(()=>{is.current=cs},[cs]),us}function useScrollOffsets(cs){const[is,us]=reactExports.useState(null),hs=reactExports.useRef(cs),lo=reactExports.useCallback(co=>{const uo=getScrollableElement(co.target);uo&&us(ga=>ga?(ga.set(uo,getScrollCoordinates(uo)),new Map(ga)):null)},[]);return reactExports.useEffect(()=>{const co=hs.current;if(cs!==co){uo(co);const ga=cs.map(ba=>{const xa=getScrollableElement(ba);return xa?(xa.addEventListener("scroll",lo,{passive:!0}),[xa,getScrollCoordinates(xa)]):null}).filter(ba=>ba!=null);us(ga.length?new Map(ga):null),hs.current=cs}return()=>{uo(cs),uo(co)};function uo(ga){ga.forEach(ba=>{const xa=getScrollableElement(ba);xa==null||xa.removeEventListener("scroll",lo)})}},[lo,cs]),reactExports.useMemo(()=>cs.length?is?Array.from(is.values()).reduce((co,uo)=>add(co,uo),defaultCoordinates):getScrollOffsets(cs):defaultCoordinates,[cs,is])}function useScrollOffsetsDelta(cs,is){is===void 0&&(is=[]);const us=reactExports.useRef(null);return reactExports.useEffect(()=>{us.current=null},is),reactExports.useEffect(()=>{const hs=cs!==defaultCoordinates;hs&&!us.current&&(us.current=cs),!hs&&us.current&&(us.current=null)},[cs]),us.current?subtract(cs,us.current):defaultCoordinates}function useSensorSetup(cs){reactExports.useEffect(()=>{if(!canUseDOM)return;const is=cs.map(us=>{let{sensor:hs}=us;return hs.setup==null?void 0:hs.setup()});return()=>{for(const us of is)us==null||us()}},cs.map(is=>{let{sensor:us}=is;return us}))}function useSyntheticListeners(cs,is){return reactExports.useMemo(()=>cs.reduce((us,hs)=>{let{eventName:lo,handler:co}=hs;return us[lo]=uo=>{co(uo,is)},us},{}),[cs,is])}function useWindowRect(cs){return reactExports.useMemo(()=>cs?getWindowClientRect(cs):null,[cs])}const defaultValue$2=[];function useRects(cs,is){is===void 0&&(is=getClientRect);const[us]=cs,hs=useWindowRect(us?getWindow(us):null),[lo,co]=reactExports.useState(defaultValue$2);function uo(){co(()=>cs.length?cs.map(ba=>isDocumentScrollingElement(ba)?hs:new Rect(is(ba),ba)):defaultValue$2)}const ga=useResizeObserver({callback:uo});return useIsomorphicLayoutEffect(()=>{ga==null||ga.disconnect(),uo(),cs.forEach(ba=>ga==null?void 0:ga.observe(ba))},[cs]),lo}function getMeasurableNode(cs){if(!cs)return null;if(cs.children.length>1)return cs;const is=cs.children[0];return isHTMLElement(is)?is:cs}function useDragOverlayMeasuring(cs){let{measure:is}=cs;const[us,hs]=reactExports.useState(null),lo=reactExports.useCallback(xa=>{for(const{target:_a}of xa)if(isHTMLElement(_a)){hs($a=>{const xl=is(_a);return $a?{...$a,width:xl.width,height:xl.height}:xl});break}},[is]),co=useResizeObserver({callback:lo}),uo=reactExports.useCallback(xa=>{const _a=getMeasurableNode(xa);co==null||co.disconnect(),_a&&(co==null||co.observe(_a)),hs(_a?is(_a):null)},[is,co]),[ga,ba]=useNodeRef(uo);return reactExports.useMemo(()=>({nodeRef:ga,rect:us,setRef:ba}),[us,ga,ba])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(is){var us;return is!=null&&(us=super.get(is))!=null?us:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(is=>{let{disabled:us}=is;return!us})}getNodeFor(is){var us,hs;return(us=(hs=this.get(is))==null?void 0:hs.node.current)!=null?us:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop,draggableNodes:new Map,over:null,measureDroppableContainers:noop},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(cs,is){switch(is.type){case Action.DragStart:return{...cs,draggable:{...cs.draggable,initialCoordinates:is.initialCoordinates,active:is.active}};case Action.DragMove:return cs.draggable.active==null?cs:{...cs,draggable:{...cs.draggable,translate:{x:is.coordinates.x-cs.draggable.initialCoordinates.x,y:is.coordinates.y-cs.draggable.initialCoordinates.y}}};case Action.DragEnd:case Action.DragCancel:return{...cs,draggable:{...cs.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:us}=is,{id:hs}=us,lo=new DroppableContainersMap(cs.droppable.containers);return lo.set(hs,us),{...cs,droppable:{...cs.droppable,containers:lo}}}case Action.SetDroppableDisabled:{const{id:us,key:hs,disabled:lo}=is,co=cs.droppable.containers.get(us);if(!co||hs!==co.key)return cs;const uo=new DroppableContainersMap(cs.droppable.containers);return uo.set(us,{...co,disabled:lo}),{...cs,droppable:{...cs.droppable,containers:uo}}}case Action.UnregisterDroppable:{const{id:us,key:hs}=is,lo=cs.droppable.containers.get(us);if(!lo||hs!==lo.key)return cs;const co=new DroppableContainersMap(cs.droppable.containers);return co.delete(us),{...cs,droppable:{...cs.droppable,containers:co}}}default:return cs}}function RestoreFocus(cs){let{disabled:is}=cs;const{active:us,activatorEvent:hs,draggableNodes:lo}=reactExports.useContext(InternalContext),co=usePrevious(hs),uo=usePrevious(us==null?void 0:us.id);return reactExports.useEffect(()=>{if(!is&&!hs&&co&&uo!=null){if(!isKeyboardEvent(co)||document.activeElement===co.target)return;const ga=lo.get(uo);if(!ga)return;const{activatorNode:ba,node:xa}=ga;if(!ba.current&&!xa.current)return;requestAnimationFrame(()=>{for(const _a of[ba.current,xa.current]){if(!_a)continue;const $a=findFirstFocusableNode(_a);if($a){$a.focus();break}}})}},[hs,is,lo,uo,co]),null}function applyModifiers(cs,is){let{transform:us,...hs}=is;return cs!=null&&cs.length?cs.reduce((lo,co)=>co({transform:lo,...hs}),us):us}function useMeasuringConfiguration(cs){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...cs==null?void 0:cs.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...cs==null?void 0:cs.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...cs==null?void 0:cs.dragOverlay}}),[cs==null?void 0:cs.draggable,cs==null?void 0:cs.droppable,cs==null?void 0:cs.dragOverlay])}function useLayoutShiftScrollCompensation(cs){let{activeNode:is,measure:us,initialRect:hs,config:lo=!0}=cs;const co=reactExports.useRef(!1),{x:uo,y:ga}=typeof lo=="boolean"?{x:lo,y:lo}:lo;useIsomorphicLayoutEffect(()=>{if(!uo&&!ga||!is){co.current=!1;return}if(co.current||!hs)return;const xa=is==null?void 0:is.node.current;if(!xa||xa.isConnected===!1)return;const _a=us(xa),$a=getRectDelta(_a,hs);if(uo||($a.x=0),ga||($a.y=0),co.current=!0,Math.abs($a.x)>0||Math.abs($a.y)>0){const xl=getFirstScrollableAncestor(xa);xl&&xl.scrollBy({top:$a.y,left:$a.x})}},[is,uo,ga,hs,us])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates,scaleX:1,scaleY:1});var Status;(function(cs){cs[cs.Uninitialized=0]="Uninitialized",cs[cs.Initializing=1]="Initializing",cs[cs.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function cs(is){var us,hs,lo,co;let{id:uo,accessibility:ga,autoScroll:ba=!0,children:xa,sensors:_a=defaultSensors,collisionDetection:$a=rectIntersection,measuring:xl,modifiers:yl,...wl}=is;const _l=reactExports.useReducer(reducer,void 0,getInitialState),[El,Sl]=_l,[Cl,Tl]=useDndMonitorProvider(),[Dl,Fl]=reactExports.useState(Status.Uninitialized),Pl=Dl===Status.Initialized,{draggable:{active:Al,nodes:Rl,translate:Il},droppable:{containers:Bl}}=El,Ol=Al!=null?Rl.get(Al):null,zl=reactExports.useRef({initial:null,translated:null}),Hl=reactExports.useMemo(()=>{var Qu;return Al!=null?{id:Al,data:(Qu=Ol==null?void 0:Ol.data)!=null?Qu:defaultData,rect:zl}:null},[Al,Ol]),ou=reactExports.useRef(null),[au,_c]=reactExports.useState(null),[uu,lu]=reactExports.useState(null),Kl=useLatestValue(wl,Object.values(wl)),xu=useUniqueId("DndDescribedBy",uo),pu=reactExports.useMemo(()=>Bl.getEnabled(),[Bl]),Ll=useMeasuringConfiguration(xl),{droppableRects:Nl,measureDroppableContainers:Ml,measuringScheduled:Ul}=useDroppableMeasuring(pu,{dragging:Pl,dependencies:[Il.x,Il.y],config:Ll.droppable}),Vl=useCachedNode(Rl,Al),Ql=reactExports.useMemo(()=>uu?getEventCoordinates(uu):null,[uu]),Jl=Ru(),iu=useInitialRect(Vl,Ll.draggable.measure);useLayoutShiftScrollCompensation({activeNode:Al!=null?Rl.get(Al):null,config:Jl.layoutShiftCompensation,initialRect:iu,measure:Ll.draggable.measure});const fu=useRect(Vl,Ll.draggable.measure,iu),_u=useRect(Vl?Vl.parentElement:null),bu=reactExports.useRef({activatorEvent:null,active:null,activeNode:Vl,collisionRect:null,collisions:null,droppableRects:Nl,draggableNodes:Rl,draggingNode:null,draggingNodeRect:null,droppableContainers:Bl,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Cu=Bl.getNodeFor((us=bu.current.over)==null?void 0:us.id),Tu=useDragOverlayMeasuring({measure:Ll.dragOverlay.measure}),Fu=(hs=Tu.nodeRef.current)!=null?hs:Vl,ku=Pl?(lo=Tu.rect)!=null?lo:fu:null,tu=!!(Tu.nodeRef.current&&Tu.rect),eu=useRectDelta(tu?null:fu),gu=useWindowRect(Fu?getWindow(Fu):null),ru=useScrollableAncestors(Pl?Cu??Vl:null),Pu=useRects(ru),Lu=applyModifiers(yl,{transform:{x:Il.x-eu.x,y:Il.y-eu.y,scaleX:1,scaleY:1},activatorEvent:uu,active:Hl,activeNodeRect:fu,containerNodeRect:_u,draggingNodeRect:ku,over:bu.current.over,overlayNodeRect:Tu.rect,scrollableAncestors:ru,scrollableAncestorRects:Pu,windowRect:gu}),Ju=Ql?add(Ql,Il):null,Vu=useScrollOffsets(ru),Mu=useScrollOffsetsDelta(Vu),hp=useScrollOffsetsDelta(Vu,[fu]),mp=add(Lu,Mu),Rp=ku?getAdjustedRect(ku,Lu):null,Lp=Hl&&Rp?$a({active:Hl,collisionRect:Rp,droppableRects:Nl,droppableContainers:pu,pointerCoordinates:Ju}):null,Bp=getFirstCollision(Lp,"id"),[Tp,Ip]=reactExports.useState(null),Hp=tu?Lu:add(Lu,hp),qp=adjustScale(Hp,(co=Tp==null?void 0:Tp.rect)!=null?co:null,fu),lp=reactExports.useRef(null),$u=reactExports.useCallback((Qu,up)=>{let{sensor:Ep,options:Cp}=up;if(ou.current==null)return;const Sp=Rl.get(ou.current);if(!Sp)return;const vu=Qu.nativeEvent,Zl=new Ep({active:ou.current,activeNode:Sp,event:vu,options:Cp,context:bu,onAbort(Du){if(!Rl.get(Du))return;const{onDragAbort:Au}=Kl.current,Eu={id:Du};Au==null||Au(Eu),Cl({type:"onDragAbort",event:Eu})},onPending(Du,$l,Au,Eu){if(!Rl.get(Du))return;const{onDragPending:qu}=Kl.current,Xl={id:Du,constraint:$l,initialCoordinates:Au,offset:Eu};qu==null||qu(Xl),Cl({type:"onDragPending",event:Xl})},onStart(Du){const $l=ou.current;if($l==null)return;const Au=Rl.get($l);if(!Au)return;const{onDragStart:Eu}=Kl.current,_f={activatorEvent:vu,active:{id:$l,data:Au.data,rect:zl}};reactDomExports.unstable_batchedUpdates(()=>{Eu==null||Eu(_f),Fl(Status.Initializing),Sl({type:Action.DragStart,initialCoordinates:Du,active:$l}),Cl({type:"onDragStart",event:_f}),_c(lp.current),lu(vu)})},onMove(Du){Sl({type:Action.DragMove,coordinates:Du})},onEnd:Ou(Action.DragEnd),onCancel:Ou(Action.DragCancel)});lp.current=Zl;function Ou(Du){return async function(){const{active:Au,collisions:Eu,over:_f,scrollAdjustedTranslate:qu}=bu.current;let Xl=null;if(Au&&qu){const{cancelDrop:du}=Kl.current;Xl={activatorEvent:vu,active:Au,collisions:Eu,delta:qu,over:_f},Du===Action.DragEnd&&typeof du=="function"&&await Promise.resolve(du(Xl))&&(Du=Action.DragCancel)}ou.current=null,reactDomExports.unstable_batchedUpdates(()=>{Sl({type:Du}),Fl(Status.Uninitialized),Ip(null),_c(null),lu(null),lp.current=null;const du=Du===Action.DragEnd?"onDragEnd":"onDragCancel";if(Xl){const su=Kl.current[du];su==null||su(Xl),Cl({type:du,event:Xl})}})}}},[Rl]),Zu=reactExports.useCallback((Qu,up)=>(Ep,Cp)=>{const Sp=Ep.nativeEvent,vu=Rl.get(Cp);if(ou.current!==null||!vu||Sp.dndKit||Sp.defaultPrevented)return;const Zl={active:vu};Qu(Ep,up.options,Zl)===!0&&(Sp.dndKit={capturedBy:up.sensor},ou.current=Cp,$u(Ep,up))},[Rl,$u]),Ap=useCombineActivators(_a,Zu);useSensorSetup(_a),useIsomorphicLayoutEffect(()=>{fu&&Dl===Status.Initializing&&Fl(Status.Initialized)},[fu,Dl]),reactExports.useEffect(()=>{const{onDragMove:Qu}=Kl.current,{active:up,activatorEvent:Ep,collisions:Cp,over:Sp}=bu.current;if(!up||!Ep)return;const vu={active:up,activatorEvent:Ep,collisions:Cp,delta:{x:mp.x,y:mp.y},over:Sp};reactDomExports.unstable_batchedUpdates(()=>{Qu==null||Qu(vu),Cl({type:"onDragMove",event:vu})})},[mp.x,mp.y]),reactExports.useEffect(()=>{const{active:Qu,activatorEvent:up,collisions:Ep,droppableContainers:Cp,scrollAdjustedTranslate:Sp}=bu.current;if(!Qu||ou.current==null||!up||!Sp)return;const{onDragOver:vu}=Kl.current,Zl=Cp.get(Bp),Ou=Zl&&Zl.rect.current?{id:Zl.id,rect:Zl.rect.current,data:Zl.data,disabled:Zl.disabled}:null,Du={active:Qu,activatorEvent:up,collisions:Ep,delta:{x:Sp.x,y:Sp.y},over:Ou};reactDomExports.unstable_batchedUpdates(()=>{Ip(Ou),vu==null||vu(Du),Cl({type:"onDragOver",event:Du})})},[Bp]),useIsomorphicLayoutEffect(()=>{bu.current={activatorEvent:uu,active:Hl,activeNode:Vl,collisionRect:Rp,collisions:Lp,droppableRects:Nl,draggableNodes:Rl,draggingNode:Fu,draggingNodeRect:ku,droppableContainers:Bl,over:Tp,scrollableAncestors:ru,scrollAdjustedTranslate:mp},zl.current={initial:ku,translated:Rp}},[Hl,Vl,Lp,Rp,Rl,Fu,ku,Nl,Bl,Tp,ru,mp]),useAutoScroller({...Jl,delta:Il,draggingRect:Rp,pointerCoordinates:Ju,scrollableAncestors:ru,scrollableAncestorRects:Pu});const Np=reactExports.useMemo(()=>({active:Hl,activeNode:Vl,activeNodeRect:fu,activatorEvent:uu,collisions:Lp,containerNodeRect:_u,dragOverlay:Tu,draggableNodes:Rl,droppableContainers:Bl,droppableRects:Nl,over:Tp,measureDroppableContainers:Ml,scrollableAncestors:ru,scrollableAncestorRects:Pu,measuringConfiguration:Ll,measuringScheduled:Ul,windowRect:gu}),[Hl,Vl,fu,uu,Lp,_u,Tu,Rl,Bl,Nl,Tp,Ml,ru,Pu,Ll,Ul,gu]),Vp=reactExports.useMemo(()=>({activatorEvent:uu,activators:Ap,active:Hl,activeNodeRect:fu,ariaDescribedById:{draggable:xu},dispatch:Sl,draggableNodes:Rl,over:Tp,measureDroppableContainers:Ml}),[uu,Ap,Hl,fu,Sl,xu,Rl,Tp,Ml]);return React.createElement(DndMonitorContext.Provider,{value:Tl},React.createElement(InternalContext.Provider,{value:Vp},React.createElement(PublicContext.Provider,{value:Np},React.createElement(ActiveDraggableContext.Provider,{value:qp},xa)),React.createElement(RestoreFocus,{disabled:(ga==null?void 0:ga.restoreFocus)===!1})),React.createElement(Accessibility,{...ga,hiddenTextDescribedById:xu}));function Ru(){const Qu=(au==null?void 0:au.autoScrollEnabled)===!1,up=typeof ba=="object"?ba.enabled===!1:ba===!1,Ep=Pl&&!Qu&&!up;return typeof ba=="object"?{...ba,enabled:Ep}:{enabled:Ep}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX$1="Draggable";function useDraggable(cs){let{id:is,data:us,disabled:hs=!1,attributes:lo}=cs;const co=useUniqueId(ID_PREFIX$1),{activators:uo,activatorEvent:ga,active:ba,activeNodeRect:xa,ariaDescribedById:_a,draggableNodes:$a,over:xl}=reactExports.useContext(InternalContext),{role:yl=defaultRole,roleDescription:wl="draggable",tabIndex:_l=0}=lo??{},El=(ba==null?void 0:ba.id)===is,Sl=reactExports.useContext(El?ActiveDraggableContext:NullContext),[Cl,Tl]=useNodeRef(),[Dl,Fl]=useNodeRef(),Pl=useSyntheticListeners(uo,is),Al=useLatestValue(us);useIsomorphicLayoutEffect(()=>($a.set(is,{id:is,key:co,node:Cl,activatorNode:Dl,data:Al}),()=>{const Il=$a.get(is);Il&&Il.key===co&&$a.delete(is)}),[$a,is]);const Rl=reactExports.useMemo(()=>({role:yl,tabIndex:_l,"aria-disabled":hs,"aria-pressed":El&&yl===defaultRole?!0:void 0,"aria-roledescription":wl,"aria-describedby":_a.draggable}),[hs,yl,_l,El,wl,_a.draggable]);return{active:ba,activatorEvent:ga,activeNodeRect:xa,attributes:Rl,isDragging:El,listeners:hs?void 0:Pl,node:Cl,over:xl,setNodeRef:Tl,setActivatorNodeRef:Fl,transform:Sl}}function useDndContext(){return reactExports.useContext(PublicContext)}const ID_PREFIX$1$1="Droppable",defaultResizeObserverConfig={timeout:25};function useDroppable(cs){let{data:is,disabled:us=!1,id:hs,resizeObserverConfig:lo}=cs;const co=useUniqueId(ID_PREFIX$1$1),{active:uo,dispatch:ga,over:ba,measureDroppableContainers:xa}=reactExports.useContext(InternalContext),_a=reactExports.useRef({disabled:us}),$a=reactExports.useRef(!1),xl=reactExports.useRef(null),yl=reactExports.useRef(null),{disabled:wl,updateMeasurementsFor:_l,timeout:El}={...defaultResizeObserverConfig,...lo},Sl=useLatestValue(_l??hs),Cl=reactExports.useCallback(()=>{if(!$a.current){$a.current=!0;return}yl.current!=null&&clearTimeout(yl.current),yl.current=setTimeout(()=>{xa(Array.isArray(Sl.current)?Sl.current:[Sl.current]),yl.current=null},El)},[El]),Tl=useResizeObserver({callback:Cl,disabled:wl||!uo}),Dl=reactExports.useCallback((Rl,Il)=>{Tl&&(Il&&(Tl.unobserve(Il),$a.current=!1),Rl&&Tl.observe(Rl))},[Tl]),[Fl,Pl]=useNodeRef(Dl),Al=useLatestValue(is);return reactExports.useEffect(()=>{!Tl||!Fl.current||(Tl.disconnect(),$a.current=!1,Tl.observe(Fl.current))},[Fl,Tl]),reactExports.useEffect(()=>(ga({type:Action.RegisterDroppable,element:{id:hs,key:co,disabled:us,node:Fl,rect:xl,data:Al}}),()=>ga({type:Action.UnregisterDroppable,key:co,id:hs})),[hs]),reactExports.useEffect(()=>{us!==_a.current.disabled&&(ga({type:Action.SetDroppableDisabled,id:hs,key:co,disabled:us}),_a.current.disabled=us)},[hs,co,us,ga]),{active:uo,rect:xl,isOver:(ba==null?void 0:ba.id)===hs,node:Fl,over:ba,setNodeRef:Pl}}function AnimationManager(cs){let{animation:is,children:us}=cs;const[hs,lo]=reactExports.useState(null),[co,uo]=reactExports.useState(null),ga=usePrevious(us);return!us&&!hs&&ga&&lo(ga),useIsomorphicLayoutEffect(()=>{if(!co)return;const ba=hs==null?void 0:hs.key,xa=hs==null?void 0:hs.props.id;if(ba==null||xa==null){lo(null);return}Promise.resolve(is(xa,co)).then(()=>{lo(null)})},[is,hs,co]),React.createElement(React.Fragment,null,us,hs?reactExports.cloneElement(hs,{ref:uo}):null)}const defaultTransform={x:0,y:0,scaleX:1,scaleY:1};function NullifiedContextProvider(cs){let{children:is}=cs;return React.createElement(InternalContext.Provider,{value:defaultInternalContext},React.createElement(ActiveDraggableContext.Provider,{value:defaultTransform},is))}const baseStyles={position:"fixed",touchAction:"none"},defaultTransition$1=cs=>isKeyboardEvent(cs)?"transform 250ms ease":void 0,PositionedOverlay=reactExports.forwardRef((cs,is)=>{let{as:us,activatorEvent:hs,adjustScale:lo,children:co,className:uo,rect:ga,style:ba,transform:xa,transition:_a=defaultTransition$1}=cs;if(!ga)return null;const $a=lo?xa:{...xa,scaleX:1,scaleY:1},xl={...baseStyles,width:ga.width,height:ga.height,top:ga.top,left:ga.left,transform:CSS$1.Transform.toString($a),transformOrigin:lo&&hs?getRelativeTransformOrigin(hs,ga):void 0,transition:typeof _a=="function"?_a(hs):_a,...ba};return React.createElement(us,{className:uo,style:xl,ref:is},co)}),defaultDropAnimationSideEffects=cs=>is=>{let{active:us,dragOverlay:hs}=is;const lo={},{styles:co,className:uo}=cs;if(co!=null&&co.active)for(const[ga,ba]of Object.entries(co.active))ba!==void 0&&(lo[ga]=us.node.style.getPropertyValue(ga),us.node.style.setProperty(ga,ba));if(co!=null&&co.dragOverlay)for(const[ga,ba]of Object.entries(co.dragOverlay))ba!==void 0&&hs.node.style.setProperty(ga,ba);return uo!=null&&uo.active&&us.node.classList.add(uo.active),uo!=null&&uo.dragOverlay&&hs.node.classList.add(uo.dragOverlay),function(){for(const[ba,xa]of Object.entries(lo))us.node.style.setProperty(ba,xa);uo!=null&&uo.active&&us.node.classList.remove(uo.active)}},defaultKeyframeResolver=cs=>{let{transform:{initial:is,final:us}}=cs;return[{transform:CSS$1.Transform.toString(is)},{transform:CSS$1.Transform.toString(us)}]},defaultDropAnimationConfiguration={duration:250,easing:"ease",keyframes:defaultKeyframeResolver,sideEffects:defaultDropAnimationSideEffects({styles:{active:{opacity:"0"}}})};function useDropAnimation(cs){let{config:is,draggableNodes:us,droppableContainers:hs,measuringConfiguration:lo}=cs;return useEvent((co,uo)=>{if(is===null)return;const ga=us.get(co);if(!ga)return;const ba=ga.node.current;if(!ba)return;const xa=getMeasurableNode(uo);if(!xa)return;const{transform:_a}=getWindow(uo).getComputedStyle(uo),$a=parseTransform(_a);if(!$a)return;const xl=typeof is=="function"?is:createDefaultDropAnimation(is);return scrollIntoViewIfNeeded(ba,lo.draggable.measure),xl({active:{id:co,data:ga.data,node:ba,rect:lo.draggable.measure(ba)},draggableNodes:us,dragOverlay:{node:uo,rect:lo.dragOverlay.measure(xa)},droppableContainers:hs,measuringConfiguration:lo,transform:$a})})}function createDefaultDropAnimation(cs){const{duration:is,easing:us,sideEffects:hs,keyframes:lo}={...defaultDropAnimationConfiguration,...cs};return co=>{let{active:uo,dragOverlay:ga,transform:ba,...xa}=co;if(!is)return;const _a={x:ga.rect.left-uo.rect.left,y:ga.rect.top-uo.rect.top},$a={scaleX:ba.scaleX!==1?uo.rect.width*ba.scaleX/ga.rect.width:1,scaleY:ba.scaleY!==1?uo.rect.height*ba.scaleY/ga.rect.height:1},xl={x:ba.x-_a.x,y:ba.y-_a.y,...$a},yl=lo({...xa,active:uo,dragOverlay:ga,transform:{initial:ba,final:xl}}),[wl]=yl,_l=yl[yl.length-1];if(JSON.stringify(wl)===JSON.stringify(_l))return;const El=hs==null?void 0:hs({active:uo,dragOverlay:ga,...xa}),Sl=ga.node.animate(yl,{duration:is,easing:us,fill:"forwards"});return new Promise(Cl=>{Sl.onfinish=()=>{El==null||El(),Cl()}})}}let key=0;function useKey(cs){return reactExports.useMemo(()=>{if(cs!=null)return key++,key},[cs])}const DragOverlay=React.memo(cs=>{let{adjustScale:is=!1,children:us,dropAnimation:hs,style:lo,transition:co,modifiers:uo,wrapperElement:ga="div",className:ba,zIndex:xa=999}=cs;const{activatorEvent:_a,active:$a,activeNodeRect:xl,containerNodeRect:yl,draggableNodes:wl,droppableContainers:_l,dragOverlay:El,over:Sl,measuringConfiguration:Cl,scrollableAncestors:Tl,scrollableAncestorRects:Dl,windowRect:Fl}=useDndContext(),Pl=reactExports.useContext(ActiveDraggableContext),Al=useKey($a==null?void 0:$a.id),Rl=applyModifiers(uo,{activatorEvent:_a,active:$a,activeNodeRect:xl,containerNodeRect:yl,draggingNodeRect:El.rect,over:Sl,overlayNodeRect:El.rect,scrollableAncestors:Tl,scrollableAncestorRects:Dl,transform:Pl,windowRect:Fl}),Il=useInitialValue(xl),Bl=useDropAnimation({config:hs,draggableNodes:wl,droppableContainers:_l,measuringConfiguration:Cl}),Ol=Il?El.setRef:void 0;return React.createElement(NullifiedContextProvider,null,React.createElement(AnimationManager,{animation:Bl},$a&&Al?React.createElement(PositionedOverlay,{key:Al,id:$a.id,ref:Ol,as:ga,activatorEvent:_a,adjustScale:is,className:ba,transition:co,rect:Il,style:{zIndex:xa,...lo},transform:Rl},us):null))});function arrayMove(cs,is,us){const hs=cs.slice();return hs.splice(us<0?hs.length+us:us,0,hs.splice(is,1)[0]),hs}function getSortedRects(cs,is){return cs.reduce((us,hs,lo)=>{const co=is.get(hs);return co&&(us[lo]=co),us},Array(cs.length))}function isValidIndex(cs){return cs!==null&&cs>=0}function itemsEqual(cs,is){if(cs===is)return!0;if(cs.length!==is.length)return!1;for(let us=0;us<cs.length;us++)if(cs[us]!==is[us])return!1;return!0}function normalizeDisabled(cs){return typeof cs=="boolean"?{draggable:cs,droppable:cs}:cs}const rectSortingStrategy=cs=>{let{rects:is,activeIndex:us,overIndex:hs,index:lo}=cs;const co=arrayMove(is,hs,us),uo=is[lo],ga=co[lo];return!ga||!uo?null:{x:ga.left-uo.left,y:ga.top-uo.top,scaleX:ga.width/uo.width,scaleY:ga.height/uo.height}},defaultScale$1={scaleX:1,scaleY:1},verticalListSortingStrategy=cs=>{var is;let{activeIndex:us,activeNodeRect:hs,index:lo,rects:co,overIndex:uo}=cs;const ga=(is=co[us])!=null?is:hs;if(!ga)return null;if(lo===us){const xa=co[uo];return xa?{x:0,y:us<uo?xa.top+xa.height-(ga.top+ga.height):xa.top-ga.top,...defaultScale$1}:null}const ba=getItemGap$1(co,lo,us);return lo>us&&lo<=uo?{x:0,y:-ga.height-ba,...defaultScale$1}:lo<us&&lo>=uo?{x:0,y:ga.height+ba,...defaultScale$1}:{x:0,y:0,...defaultScale$1}};function getItemGap$1(cs,is,us){const hs=cs[is],lo=cs[is-1],co=cs[is+1];return hs?us<is?lo?hs.top-(lo.top+lo.height):co?co.top-(hs.top+hs.height):0:co?co.top-(hs.top+hs.height):lo?hs.top-(lo.top+lo.height):0:0}const ID_PREFIX="Sortable",Context=React.createContext({activeIndex:-1,containerId:ID_PREFIX,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rectSortingStrategy,disabled:{draggable:!1,droppable:!1}});function SortableContext(cs){let{children:is,id:us,items:hs,strategy:lo=rectSortingStrategy,disabled:co=!1}=cs;const{active:uo,dragOverlay:ga,droppableRects:ba,over:xa,measureDroppableContainers:_a}=useDndContext(),$a=useUniqueId(ID_PREFIX,us),xl=ga.rect!==null,yl=reactExports.useMemo(()=>hs.map(Pl=>typeof Pl=="object"&&"id"in Pl?Pl.id:Pl),[hs]),wl=uo!=null,_l=uo?yl.indexOf(uo.id):-1,El=xa?yl.indexOf(xa.id):-1,Sl=reactExports.useRef(yl),Cl=!itemsEqual(yl,Sl.current),Tl=El!==-1&&_l===-1||Cl,Dl=normalizeDisabled(co);useIsomorphicLayoutEffect(()=>{Cl&&wl&&_a(yl)},[Cl,yl,wl,_a]),reactExports.useEffect(()=>{Sl.current=yl},[yl]);const Fl=reactExports.useMemo(()=>({activeIndex:_l,containerId:$a,disabled:Dl,disableTransforms:Tl,items:yl,overIndex:El,useDragOverlay:xl,sortedRects:getSortedRects(yl,ba),strategy:lo}),[_l,$a,Dl.draggable,Dl.droppable,Tl,yl,El,ba,xl,lo]);return React.createElement(Context.Provider,{value:Fl},is)}const defaultNewIndexGetter=cs=>{let{id:is,items:us,activeIndex:hs,overIndex:lo}=cs;return arrayMove(us,hs,lo).indexOf(is)},defaultAnimateLayoutChanges=cs=>{let{containerId:is,isSorting:us,wasDragging:hs,index:lo,items:co,newIndex:uo,previousItems:ga,previousContainerId:ba,transition:xa}=cs;return!xa||!hs||ga!==co&&lo===uo?!1:us?!0:uo!==lo&&is===ba},defaultTransition={duration:200,easing:"ease"},transitionProperty="transform",disabledTransition=CSS$1.Transition.toString({property:transitionProperty,duration:0,easing:"linear"}),defaultAttributes={roleDescription:"sortable"};function useDerivedTransform(cs){let{disabled:is,index:us,node:hs,rect:lo}=cs;const[co,uo]=reactExports.useState(null),ga=reactExports.useRef(us);return useIsomorphicLayoutEffect(()=>{if(!is&&us!==ga.current&&hs.current){const ba=lo.current;if(ba){const xa=getClientRect(hs.current,{ignoreTransform:!0}),_a={x:ba.left-xa.left,y:ba.top-xa.top,scaleX:ba.width/xa.width,scaleY:ba.height/xa.height};(_a.x||_a.y)&&uo(_a)}}us!==ga.current&&(ga.current=us)},[is,us,hs,lo]),reactExports.useEffect(()=>{co&&uo(null)},[co]),co}function useSortable(cs){let{animateLayoutChanges:is=defaultAnimateLayoutChanges,attributes:us,disabled:hs,data:lo,getNewIndex:co=defaultNewIndexGetter,id:uo,strategy:ga,resizeObserverConfig:ba,transition:xa=defaultTransition}=cs;const{items:_a,containerId:$a,activeIndex:xl,disabled:yl,disableTransforms:wl,sortedRects:_l,overIndex:El,useDragOverlay:Sl,strategy:Cl}=reactExports.useContext(Context),Tl=normalizeLocalDisabled(hs,yl),Dl=_a.indexOf(uo),Fl=reactExports.useMemo(()=>({sortable:{containerId:$a,index:Dl,items:_a},...lo}),[$a,lo,Dl,_a]),Pl=reactExports.useMemo(()=>_a.slice(_a.indexOf(uo)),[_a,uo]),{rect:Al,node:Rl,isOver:Il,setNodeRef:Bl}=useDroppable({id:uo,data:Fl,disabled:Tl.droppable,resizeObserverConfig:{updateMeasurementsFor:Pl,...ba}}),{active:Ol,activatorEvent:zl,activeNodeRect:Hl,attributes:ou,setNodeRef:au,listeners:_c,isDragging:uu,over:lu,setActivatorNodeRef:Kl,transform:xu}=useDraggable({id:uo,data:Fl,attributes:{...defaultAttributes,...us},disabled:Tl.draggable}),pu=useCombinedRefs(Bl,au),Ll=!!Ol,Nl=Ll&&!wl&&isValidIndex(xl)&&isValidIndex(El),Ml=!Sl&&uu,Ul=Ml&&Nl?xu:null,Ql=Nl?Ul??(ga??Cl)({rects:_l,activeNodeRect:Hl,activeIndex:xl,overIndex:El,index:Dl}):null,Jl=isValidIndex(xl)&&isValidIndex(El)?co({id:uo,items:_a,activeIndex:xl,overIndex:El}):Dl,iu=Ol==null?void 0:Ol.id,fu=reactExports.useRef({activeId:iu,items:_a,newIndex:Jl,containerId:$a}),_u=_a!==fu.current.items,bu=is({active:Ol,containerId:$a,isDragging:uu,isSorting:Ll,id:uo,index:Dl,items:_a,newIndex:fu.current.newIndex,previousItems:fu.current.items,previousContainerId:fu.current.containerId,transition:xa,wasDragging:fu.current.activeId!=null}),Cu=useDerivedTransform({disabled:!bu,index:Dl,node:Rl,rect:Al});return reactExports.useEffect(()=>{Ll&&fu.current.newIndex!==Jl&&(fu.current.newIndex=Jl),$a!==fu.current.containerId&&(fu.current.containerId=$a),_a!==fu.current.items&&(fu.current.items=_a)},[Ll,Jl,$a,_a]),reactExports.useEffect(()=>{if(iu===fu.current.activeId)return;if(iu!=null&&fu.current.activeId==null){fu.current.activeId=iu;return}const Fu=setTimeout(()=>{fu.current.activeId=iu},50);return()=>clearTimeout(Fu)},[iu]),{active:Ol,activeIndex:xl,attributes:ou,data:Fl,rect:Al,index:Dl,newIndex:Jl,items:_a,isOver:Il,isSorting:Ll,isDragging:uu,listeners:_c,node:Rl,overIndex:El,over:lu,setNodeRef:pu,setActivatorNodeRef:Kl,setDroppableNodeRef:Bl,setDraggableNodeRef:au,transform:Cu??Ql,transition:Tu()};function Tu(){if(Cu||_u&&fu.current.newIndex===Dl)return disabledTransition;if(!(Ml&&!isKeyboardEvent(zl)||!xa)&&(Ll||bu))return CSS$1.Transition.toString({...xa,property:transitionProperty})}}function normalizeLocalDisabled(cs,is){var us,hs;return typeof cs=="boolean"?{draggable:cs,droppable:!1}:{draggable:(us=cs==null?void 0:cs.draggable)!=null?us:is.draggable,droppable:(hs=cs==null?void 0:cs.droppable)!=null?hs:is.droppable}}KeyboardCode.Down,KeyboardCode.Right,KeyboardCode.Up,KeyboardCode.Left;const FONT_FAMILY$7='-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Segoe UI", Roboto, Ubuntu, "Noto Sans", Arial, sans-serif',DraggableBookmark=({item:cs,isNested:is=!1,parentId:us=null,isEditMode:hs,onNavigate:lo,onRename:co,onDelete:uo,onUpdate:ga,numPages:ba,isSelected:xa,onSelect:_a,recentlyDropped:$a=!1})=>{const{active:xl}=useDndContext(),yl=!!xl,{attributes:wl,listeners:_l,setNodeRef:El,transform:Sl,transition:Cl,isDragging:Tl}=useSortable({id:cs.id,data:{type:"bookmark",item:cs,parentId:us||null},disabled:!hs}),[Dl,Fl]=reactExports.useState(cs.name||""),[Pl,Al]=reactExports.useState(cs.pageIds&&cs.pageIds.length>0?cs.pageIds[0].toString():""),Rl=reactExports.useRef(null),Il=reactExports.useRef(null),Bl=reactExports.useRef(null),Ol=reactExports.useRef(null);reactExports.useEffect(()=>{if(Bl.current&&!Tl){const pu=Bl.current.getBoundingClientRect();pu.width>0&&pu.height>0&&(Ol.current={width:pu.width,height:pu.height})}}),reactExports.useEffect(()=>{cs&&cs.name!==void 0&&Fl(cs.name||"")},[cs.name]),reactExports.useEffect(()=>{cs&&cs.pageIds&&Array.isArray(cs.pageIds)&&cs.pageIds.length>0?Al(cs.pageIds[0].toString()):Al("")},[cs.pageIds]);const zl=()=>{cs&&cs.id&&Dl.trim()&&Dl!==cs.name&&co&&co(cs.id,Dl.trim())},Hl=pu=>{const Ll=pu.replace(/[^\d]/g,"");if(!Ll){Al("");return}const Nl=parseInt(Ll,10);if(isNaN(Nl)||Nl<1){Al("");return}if(ba&&Nl>ba){Al(ba.toString());return}Al(Nl.toString())},ou=()=>{if(!cs||!cs.id||!ga)return;const pu=cs.pageIds&&cs.pageIds.length>0?cs.pageIds[0].toString():"",Ll=Pl.trim();if(!Ll){Al(pu);return}const Nl=parseInt(Ll,10);if(isNaN(Nl)||Nl<1||ba&&Nl>ba){ba&&Nl>ba?alert(`Please enter a page number between 1 and ${ba}.`):alert("Please enter a valid page number."),Al(pu);return}(cs.pageIds||[])[0]!==Nl&&ga(cs.id,{pageIds:[Nl]})},au=pu=>{if(hs){pu.stopPropagation(),Rl.current&&!pu.target.closest("button")&&(Rl.current.focus(),Rl.current.select());return}_a&&_a(cs.id),cs.pageIds&&cs.pageIds.length>0&&lo(cs.pageIds)},_c=(Pl||"").toString(),lu=`${Math.max(3,_c.length||0)+.5}ch`,Kl=Cl||"transform 220ms cubic-bezier(0.22, 1, 0.36, 1)",xu={transform:CSS$1.Transform.toString(Sl),transition:Tl?"transform 0ms linear, opacity 60ms ease-out":`${Kl}, opacity 160ms ease-out`,opacity:Tl?0:1,willChange:"transform, opacity",width:Tl&&Ol.current?`${Ol.current.width}px`:"auto",minWidth:Tl&&Ol.current?`${Ol.current.width}px`:void 0,height:Tl&&Ol.current?`${Ol.current.height}px`:"auto",minHeight:Tl&&Ol.current?`${Ol.current.height}px`:void 0,paddingLeft:is?"16px":"0",marginBottom:"1px"};return jsxRuntimeExports.jsx("div",{ref:pu=>{El(pu),Bl.current=pu},style:xu,children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",padding:hs?"2px 5px":"4px 7px",borderRadius:"6px",cursor:hs?"default":"pointer",background:xa?"#3a3a3a":"transparent",border:$a?"2px solid rgba(74, 144, 226, 0.6)":"1px solid transparent",boxShadow:$a?"0 4px 16px rgba(59, 130, 246, 0.08)":"none",transition:"background 0.15s ease, border-color 0.2s ease, box-shadow 0.2s ease",fontSize:"13px",color:"#ddd",gap:hs?"8px":"0",pointerEvents:Tl?"none":"auto"},onClick:au,onMouseEnter:pu=>{!xa&&!hs&&(pu.currentTarget.style.background="#2b2b2b")},onMouseLeave:pu=>{!xa&&!hs&&(pu.currentTarget.style.background="transparent")},children:[jsxRuntimeExports.jsx("div",{style:{width:is?"32px":"27px",flexShrink:0}}),hs?jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center",minWidth:0},children:[jsxRuntimeExports.jsx("input",{ref:Rl,type:"text",value:Dl,onChange:pu=>Fl(pu.target.value),onBlur:pu=>{pu.currentTarget.style.borderColor="#3a3a3a",zl()},onKeyDown:pu=>{pu.key==="Enter"?(zl(),pu.currentTarget.blur()):pu.key==="Escape"&&(Fl(cs.name),pu.currentTarget.blur())},onClick:pu=>pu.stopPropagation(),style:{flex:1,minWidth:0,padding:"3px 3px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"4px",fontSize:"12px",fontFamily:FONT_FAMILY$7,outline:"none",transition:"border-color 0.15s ease",textAlign:"left"},onFocus:pu=>pu.currentTarget.style.borderColor="#4A90E2"}),jsxRuntimeExports.jsx("input",{ref:Il,type:"text",value:Pl,onChange:pu=>Hl(pu.target.value),onBlur:pu=>{pu.currentTarget.style.borderColor="#3a3a3a",ou()},onKeyDown:pu=>{if(pu.key==="Enter")ou(),pu.currentTarget.blur();else if(pu.key==="Escape"){const Ll=cs.pageIds&&cs.pageIds.length>0?cs.pageIds[0].toString():"";Al(Ll),pu.currentTarget.blur()}},onClick:pu=>pu.stopPropagation(),style:{width:lu,padding:"3px 4px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"4px",fontSize:"11px",fontFamily:FONT_FAMILY$7,outline:"none",transition:"border-color 0.15s ease",textAlign:"center",flexShrink:0,marginLeft:"8px",appearance:"textfield",WebkitAppearance:"none",MozAppearance:"textfield"},onFocus:pu=>pu.currentTarget.style.borderColor="#4A90E2",placeholder:"Page",inputMode:"numeric",pattern:"[0-9]*"})]}):jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center",minWidth:0},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"13px",color:"#ddd",userSelect:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"left"},children:cs.name}),cs.pageIds&&cs.pageIds.length>0&&jsxRuntimeExports.jsxs("span",{style:{color:"#999",fontSize:"11px",fontFamily:FONT_FAMILY$7,flexShrink:0,marginLeft:"8px"},children:["Page ",cs.pageIds[0]]})]}),hs&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:pu=>{pu.stopPropagation(),cs&&cs.id&&cs.name&&window.confirm(`Delete bookmark "${cs.name}"?`)&&uo(cs.id)},style:{background:"transparent",border:"none",padding:"2px 4px",cursor:"pointer",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},onMouseEnter:pu=>pu.currentTarget.style.background="#3a1f1f",onMouseLeave:pu=>pu.currentTarget.style.background="transparent",title:"Delete",children:jsxRuntimeExports.jsx(Icon,{name:"trash",size:12,color:"#ff6b6b"})}),jsxRuntimeExports.jsx("div",{...wl,..._l,style:{cursor:yl?"grabbing":"grab",color:"#888",fontSize:"16px",userSelect:"none",padding:"4px",display:"flex",alignItems:"center",flexShrink:0,touchAction:"none"},onMouseEnter:pu=>{pu.currentTarget.style.color="#aaa"},onMouseLeave:pu=>{pu.currentTarget.style.color="#888"},title:"Drag to reorder",children:""})]})]})})},FONT_FAMILY$6='-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Segoe UI", Roboto, Ubuntu, "Noto Sans", Arial, sans-serif',DraggableBookmarkFolder=({item:cs,isExpanded:is,onToggle:us,isEditMode:hs,onRename:lo,onDelete:co,onAddToGroup:uo,isSelected:ga,onSelect:ba,incomingPlaceholderHeight:xa=0,children:_a})=>{const{attributes:$a,listeners:xl,setNodeRef:yl,transform:wl,transition:_l,isDragging:El}=useSortable({id:cs.id,data:{type:"folder",item:cs},disabled:!hs}),[Sl,Cl]=reactExports.useState(cs.name||""),Tl=reactExports.useRef(null);reactExports.useEffect(()=>{cs&&cs.name!==void 0&&Cl(cs.name||"")},[cs.name]);const Dl=()=>{cs&&cs.id&&Sl.trim()&&Sl!==cs.name&&lo&&lo(cs.id,Sl.trim())},Fl=Il=>{if(hs){Il.stopPropagation(),Tl.current&&!Il.target.closest("button")&&!Il.target.closest("[data-drag-handle]")&&(Tl.current.focus(),Tl.current.select());return}ba&&ba(cs.id),us&&us(cs.id)},Pl=_l||"transform 220ms cubic-bezier(0.22, 1, 0.36, 1)",Al={transform:CSS$1.Transform.toString(wl),transition:El?"transform 0ms linear, opacity 80ms ease-out":Pl,willChange:"transform, opacity",opacity:El?.85:1,marginBottom:"1px"},Rl=Math.max(0,xa);return jsxRuntimeExports.jsxs("div",{style:Al,children:[jsxRuntimeExports.jsxs("div",{ref:yl,style:{display:"flex",alignItems:"center",padding:hs?"3px 6px":"5px 8px",borderRadius:"6px",cursor:hs?"default":"pointer",background:ga?"#3a3a3a":"transparent",border:"1px solid transparent",transition:"background 0.15s ease, border-color 0.15s ease",fontSize:"13px",color:"#ddd",gap:hs?"6px":"4px"},onClick:Fl,onMouseEnter:Il=>{!ga&&!hs&&(Il.currentTarget.style.background="#2b2b2b")},onMouseLeave:Il=>{!ga&&!hs&&(Il.currentTarget.style.background="transparent")},children:[jsxRuntimeExports.jsx("button",{onClick:Il=>{Il.stopPropagation(),us&&us(cs.id)},style:{background:"none",border:"none",color:"#999",cursor:"pointer",padding:"2px",marginRight:"6px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",flexShrink:0,width:"16px"},onMouseEnter:Il=>Il.currentTarget.style.background="#333",onMouseLeave:Il=>Il.currentTarget.style.background="transparent",children:jsxRuntimeExports.jsx(Icon,{name:is?"chevronDown":"chevronRight",size:12})}),hs?jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center",minWidth:0},children:[jsxRuntimeExports.jsx("input",{ref:Tl,type:"text",value:Sl,onChange:Il=>Cl(Il.target.value),onBlur:Il=>{Il.currentTarget.style.borderColor="#3a3a3a",Dl()},onKeyDown:Il=>{Il.key==="Enter"?(Dl(),Il.currentTarget.blur()):Il.key==="Escape"&&(Cl(cs.name),Il.currentTarget.blur())},onClick:Il=>Il.stopPropagation(),style:{flex:1,minWidth:0,padding:"3px 3px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"4px",fontSize:"12px",fontFamily:FONT_FAMILY$6,outline:"none",transition:"border-color 0.15s ease",textAlign:"left"},onFocus:Il=>Il.currentTarget.style.borderColor="#4A90E2"}),jsxRuntimeExports.jsx("div",{style:{width:"45px",marginLeft:"8px",flexShrink:0}})]}):jsxRuntimeExports.jsx("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center",minWidth:0},children:jsxRuntimeExports.jsx("span",{style:{fontSize:"13px",color:"#ddd",userSelect:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"left"},children:cs.name})}),hs&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[uo&&jsxRuntimeExports.jsx("button",{onClick:Il=>{Il.stopPropagation(),uo&&cs&&cs.id&&uo(cs.id)},style:{background:"transparent",border:"none",padding:"2px 4px",cursor:"pointer",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},onMouseEnter:Il=>Il.currentTarget.style.background="#2b3a2b",onMouseLeave:Il=>Il.currentTarget.style.background="transparent",title:"Add Bookmarks to Group",children:jsxRuntimeExports.jsx(Icon,{name:"plus",size:12,color:"#4A90E2"})}),jsxRuntimeExports.jsx("button",{onClick:Il=>{Il.stopPropagation(),cs&&cs.id&&cs.name&&window.confirm(`Delete folder "${cs.name}"?`)&&co(cs.id)},style:{background:"transparent",border:"none",padding:"2px 4px",cursor:"pointer",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},onMouseEnter:Il=>Il.currentTarget.style.background="#3a1f1f",onMouseLeave:Il=>Il.currentTarget.style.background="transparent",title:"Delete",children:jsxRuntimeExports.jsx(Icon,{name:"trash",size:12,color:"#ff6b6b"})}),jsxRuntimeExports.jsx("div",{...$a,...xl,"data-drag-handle":!0,style:{cursor:"grab",color:"#888",fontSize:"16px",userSelect:"none",padding:"4px",display:"flex",alignItems:"center",flexShrink:0,zIndex:10,position:"relative",touchAction:"none"},onMouseEnter:Il=>{Il.currentTarget.style.cursor="grab",Il.currentTarget.style.color="#aaa"},onMouseLeave:Il=>{Il.currentTarget.style.cursor="grab",Il.currentTarget.style.color="#888"},title:`Drag handle for: ${cs.name||cs.id}`,children:""})]})]}),is&&jsxRuntimeExports.jsx("div",{style:{marginLeft:"16px",marginTop:"2px",borderLeft:"2px dashed rgba(74, 144, 226, 0.2)",borderRadius:"4px",paddingLeft:"8px",paddingTop:"4px",paddingBottom:Rl?`${Rl+12}px`:"4px",background:"rgba(0, 0, 0, 0.1)",transition:"padding-bottom 0.2s ease-out"},children:_a})]})},DropSlot=({id:cs,parentId:is=null,index:us,isInsideFolder:hs=!1,isEmptyState:lo=!1})=>{const{setNodeRef:co,isOver:uo}=useDroppable({id:cs,data:{type:"slot",parentId:is||null,index:us,isInsideFolder:hs}});return jsxRuntimeExports.jsx("div",{ref:co,"data-drop-slot-id":cs,"data-drop-slot-parent":is||"root",style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:lo?"32px":hs?"4px":"6px",marginTop:hs?"1px":"2px",marginBottom:hs?"1px":"2px",transition:"all 0.16s ease-out"},children:jsxRuntimeExports.jsx("div",{"aria-hidden":"true",style:{pointerEvents:"none",position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"4px",opacity:uo?1:0,boxShadow:uo?"0 0 0 2px rgba(74, 144, 226, 0.35)":"none",background:uo?"rgba(74, 144, 226, 0.1)":"transparent",transition:"opacity 0.2s ease-out, box-shadow 0.2s ease-out, background 0.2s ease-out"}})})},FONT_FAMILY$5='-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Segoe UI", Roboto, Ubuntu, "Noto Sans", Arial, sans-serif',EXPAND_DELAY_MS=320,COLLAPSE_DELAY_MS=360,generateId=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createSlotId=(cs,is)=>cs?`${cs}::slot::${is}`:`root::slot::${is}`,BookmarksPanel=({bookmarks:cs,onBookmarkCreate:is,onBookmarkUpdate:us,onBookmarkDelete:hs,onNavigateToPage:lo,pageNum:co,numPages:uo})=>{const[ga,ba]=reactExports.useState(new Set),[xa,_a]=reactExports.useState(null),[$a,xl]=reactExports.useState(!1),[yl,wl]=reactExports.useState(!1),[_l,El]=reactExports.useState(""),[Sl,Cl]=reactExports.useState(""),[Tl,Dl]=reactExports.useState(!1),[Fl,Pl]=reactExports.useState(""),[Al,Rl]=reactExports.useState([]),[Il,Bl]=reactExports.useState(!1),[Ol,zl]=reactExports.useState(null),[Hl,ou]=reactExports.useState([]),au=reactExports.useRef(null),[_c,uu]=reactExports.useState(null),[lu,Kl]=reactExports.useState(null),[xu,pu]=reactExports.useState(null),[Ll,Nl]=reactExports.useState(null),[Ml,Ul]=reactExports.useState(null),Vl=reactExports.useRef(new Map),Ql=reactExports.useRef(new Map),Jl=reactExports.useRef(new Set),iu=reactExports.useRef(null),fu=reactExports.useRef([]),_u=useSensors(useSensor(PointerSensor,{activationConstraint:{distance:12}})),bu=reactExports.useCallback($l=>{if(!$l||!Array.isArray($l))return[];const Au=new Map,Eu=[];$l.forEach(qu=>{qu&&qu.id&&qu.name&&qu.name.trim()&&Au.set(qu.id,{...qu,children:[]})}),$l.forEach(qu=>{if(!qu||!qu.id)return;const Xl=Au.get(qu.id);if(Xl)if(qu.parentId){const du=Au.get(qu.parentId);du?du.children.push(Xl):Eu.push(Xl)}else Eu.push(Xl)});const _f=(qu,Xl)=>(qu.order||0)-(Xl.order||0);return Eu.sort(_f),Eu.forEach(qu=>{qu.children&&qu.children.length>0&&qu.children.sort(_f)}),Eu},[]),Cu=reactExports.useMemo(()=>bu(cs||[]),[cs,bu]),Tu=reactExports.useMemo(()=>{const $l=Au=>Au.flatMap(Eu=>{var _f;return Eu.type==="folder"&&((_f=Eu.children)!=null&&_f.length)?[Eu.id,...$l(Eu.children)]:[Eu.id]});return $l(Cu)},[Cu]),Fu=reactExports.useCallback(($l,Au,Eu=null)=>{for(let _f=0;_f<Au.length;_f+=1){const qu=Au[_f];if(qu.id===$l)return{item:qu,index:_f,list:Au,parent:Eu};if(qu.type==="folder"&&qu.children){const Xl=Fu($l,qu.children,qu);if(Xl)return Xl}}return null},[]),ku=reactExports.useCallback($l=>{const Au=Eu=>{for(const _f of Eu){if(_f.id===$l)return _f;if(_f.type==="folder"&&_f.children){const qu=Au(_f.children);if(qu)return qu}}};return Au(Cu)},[Cu]),tu=reactExports.useCallback(($l,Au={})=>{const{trackAuto:Eu=!1}=Au;let _f=!1;ba(qu=>{if(qu.has($l))return qu;const Xl=new Set(qu);return Xl.add($l),_f=!0,Xl}),Eu&&_f&&Jl.current.add($l)},[]),eu=reactExports.useCallback($l=>{const Au=Array.from($l);Au.length&&(ba(Eu=>{let _f=!1;const qu=new Set(Eu);return Au.forEach(Xl=>{qu.delete(Xl)&&(_f=!0)}),_f?qu:Eu}),Au.forEach(Eu=>Jl.current.delete(Eu)))},[]),gu=reactExports.useCallback(($l=null)=>{const Au=Array.from(Jl.current);Jl.current.clear();const Eu=$l?Au.filter(_f=>_f!==$l):Au;Eu.length&&eu(Eu)},[eu]),ru=reactExports.useCallback($l=>{const Au=Vl.current.get($l);Au&&(clearTimeout(Au),Vl.current.delete($l))},[]),Pu=reactExports.useCallback($l=>{const Au=Ql.current.get($l);Au&&(clearTimeout(Au),Ql.current.delete($l))},[]),Lu=reactExports.useCallback($l=>{if(Vl.current.has($l))return;const Au=setTimeout(()=>{Vl.current.delete($l),tu($l,{trackAuto:!0}),Pu($l)},EXPAND_DELAY_MS);Vl.current.set($l,Au)},[tu,Pu]),Ju=reactExports.useCallback($l=>{if(Ql.current.has($l))return;const Au=setTimeout(()=>{Ql.current.delete($l),eu([$l])},COLLAPSE_DELAY_MS);Ql.current.set($l,Au)},[eu]),Vu=reactExports.useCallback(()=>{Vl.current.forEach($l=>clearTimeout($l)),Ql.current.forEach($l=>clearTimeout($l)),Vl.current.clear(),Ql.current.clear()},[]),Mu=reactExports.useCallback($l=>{var Xl,du;const Au=$l.active.id;uu(Au),pu(null),Jl.current.clear(),fu.current=[];const Eu=Fu(Au,Cu),_f=$l.active.rect.current,qu=((Xl=_f==null?void 0:_f.initial)==null?void 0:Xl.height)??0;Nl({id:Au,parentId:((du=Eu==null?void 0:Eu.parent)==null?void 0:du.id)??null,height:qu}),Ul(null)},[Fu,Cu]),hp=reactExports.useCallback($l=>{var su,cu;const Au=$l.over;Kl((Au==null?void 0:Au.id)??null);const Eu=Au==null?void 0:Au.data.current,_f=(su=$l.draggingRect)==null?void 0:su.current,qu=(cu=Au==null?void 0:Au.rect)==null?void 0:cu.current;let Xl=null;if((Eu==null?void 0:Eu.type)==="bookmark"||(Eu==null?void 0:Eu.type)==="slot")Xl=Eu.parentId,Xl&&(tu(Xl,{trackAuto:!0}),Pu(Xl)),Ul({parentId:Eu.parentId??null});else if((Eu==null?void 0:Eu.type)==="folder"){Xl=Au.id,Pu(Xl);const hu=Cu.findIndex(Yu=>Yu.id===Xl),wu=hu===0,Nu=hu===Cu.length-1;let tp=!0;if(_f&&qu){const Yu=qu.top+qu.height/2,zu=_f.top+_f.height/2;(wu&&zu<Yu||Nu&&zu>Yu)&&(tp=!1)}tp?Lu(Xl):ru(Xl),Ul(null)}const du=iu.current;du&&du!==Xl&&(ru(du),Ju(du)),!Xl&&(Eu==null?void 0:Eu.type)!=="folder"&&ga.forEach(hu=>Ju(hu)),iu.current=Xl},[Cu,tu,Pu,ru,Lu,Ju,ga]),mp=reactExports.useCallback($l=>{var zu,rp;const{active:Au,over:Eu}=$l;if(Vu(),iu.current=null,fu.current=[],uu(null),Kl(null),Nl(null),Ul(null),!Eu){gu();return}const _f=Au.id,qu=Eu.id;if(_f===qu)return;const Xl=Eu.data.current,du=Fu(_f,Cu);if(!du)return;const su=(zu=$l.draggingRect)==null?void 0:zu.current,cu=(rp=Eu.rect)==null?void 0:rp.current,wu=(()=>{var dp;if(!Xl)return null;if(Xl.type==="slot")return{parentId:Xl.parentId??null,index:Xl.index};if(Xl.type==="bookmark"){const Ku=Fu(qu,Cu);if(!Ku)return null;const vp=Xl.parentId??null;let fp=Ku.index;if(su&&cu){const Op=cu.top+cu.height/2;su.top+su.height/2>Op&&(fp+=1)}else vp===((dp=du.parent)==null?void 0:dp.id)&&du.index<Ku.index&&(fp+=1);return{parentId:vp,index:fp}}if(Xl.type==="folder"){const Ku=Cu.findIndex(fp=>fp.id===qu);let vp=Ku;if(su&&cu){const fp=cu.top+cu.height/2,Op=su.top+su.height/2;Op>fp&&(vp=Ku+1);const Kp=Ku===0,s0=Cu.length-1;Kp&&Op<fp&&(vp=Ku),s0&&Op>fp&&(vp=Ku+1)}else!du.parent&&du.index<Ku?vp=Ku:vp=Ku+1;return{parentId:null,index:vp}}return null})();if(!wu){gu();return}const Nu=cs.find(dp=>dp.id===_f);if(!Nu)return;let tp;wu.parentId?tp=cs.filter(dp=>dp.parentId===wu.parentId&&dp.id!==_f):tp=cs.filter(dp=>!dp.parentId&&dp.id!==_f),tp.sort((dp,Ku)=>(dp.order||0)-(Ku.order||0)),tp.splice(wu.index,0,Nu),tp.forEach((dp,Ku)=>{us&&us(dp.id,{order:Ku,parentId:wu.parentId})});const Yu=wu.parentId;Yu&&ba(dp=>{const Ku=new Set(dp);return Ku.add(Yu),Ku}),pu(_f),gu(wu.parentId??null)},[cs,Cu,Vu,gu,Fu,us]),Rp=reactExports.useCallback(()=>{Vu(),iu.current=null,fu.current=[],uu(null),Kl(null),Nl(null),Ul(null),gu()},[Vu,gu]);reactExports.useEffect(()=>()=>{Vu()},[Vu]);const Lp=reactExports.useCallback($l=>{var tp,Yu;const Au=pointerWithin($l);let Eu=Au.length>0?Au:rectIntersection($l);if(!Eu||Eu.length===0)return fu.current||[];const _f=(tp=$l==null?void 0:$l.active)==null?void 0:tp.id,qu=_f?Fu(_f,Cu):null,Xl=((Yu=qu==null?void 0:qu.parent)==null?void 0:Yu.id)??null,du=zu=>{var dp,Ku,vp,fp,Op,Kp,s0,r0;if((vp=(Ku=(dp=zu==null?void 0:zu.data)==null?void 0:dp.droppableContainer)==null?void 0:Ku.data)!=null&&vp.current)return zu.data.droppableContainer.data.current;const rp=$l.droppableContainers;if(rp){if(typeof rp.get=="function")return((Op=(fp=rp.get(zu.id))==null?void 0:fp.data)==null?void 0:Op.current)??null;if(Array.isArray(rp)){const u0=rp.find(l0=>(l0==null?void 0:l0.id)===zu.id);return((Kp=u0==null?void 0:u0.data)==null?void 0:Kp.current)??null}if(typeof rp=="object")return((r0=(s0=rp[zu.id])==null?void 0:s0.data)==null?void 0:r0.current)??null}return null},su=Eu.map(zu=>{const rp=du(zu);return rp?{collision:zu,data:rp}:null}).filter(Boolean),cu=su.filter(zu=>zu.data.type==="slot"),hu=cu.length?[...cu].sort((zu,rp)=>{const dp=zu.data.parentId===Xl,Ku=rp.data.parentId===Xl;return dp===Ku?0:dp?-1:1}):[],wu=hu.length?hu:su;if(wu.length===0)return fu.current=Eu,Eu;const Nu=wu.map(zu=>zu.collision);return fu.current=Nu,Nu},[Cu,Fu]),Bp=_c?ku(_c):null,Tp=reactExports.useCallback($l=>!Ll||!Ml||Ml.parentId!==$l||Ll.parentId===Ml.parentId||Ll.id===$l?0:Math.max(0,Ll.height),[Ll,Ml]),Ip=reactExports.useCallback($l=>{ba(Au=>{const Eu=new Set(Au);return Eu.has($l)?Eu.delete($l):Eu.add($l),Eu})},[]),Hp=reactExports.useCallback($l=>{$l&&$l.length>0&&lo($l[0])},[lo]),qp=reactExports.useCallback(($l,Au)=>{us&&us($l,{name:Au})},[us]),lp=reactExports.useCallback($l=>{hs&&hs($l)},[hs]),$u=reactExports.useCallback(()=>{const $l=_l.trim();if(!$l)return;const Au=Sl.trim();if(!Au){alert("Please enter a page number.");return}const Eu=parseInt(Au,10);if(isNaN(Eu)||Eu<1){alert("Please enter a valid page number.");return}if(uo&&Eu>uo){alert(`Please enter a page number between 1 and ${uo}.`);return}is&&is({name:$l,pageIds:[Eu],type:"bookmark"}),El(""),Cl(""),xl(!1)},[_l,Sl,is,uo]),Zu=reactExports.useCallback($l=>{const Au=$l.replace(/[^\d]/g,"");if(!Au){Cl("");return}const Eu=parseInt(Au,10);if(isNaN(Eu)||Eu<1){Cl("");return}if(uo&&Eu>uo){Cl(uo.toString());return}Cl(Eu.toString())},[uo]),Ap=reactExports.useCallback(()=>{Dl(!0),Pl(""),Rl([]),xl(!1)},[]),Np=reactExports.useCallback(()=>{if(!Fl.trim()){alert("Please enter a name for the bookmark group");return}if(Al.length===0){alert("Please add at least one bookmark to the group");return}if(Al.filter(qu=>{if(qu.isExisting)return!1;if(!qu.name||!qu.name.trim()||!qu.pageIds||qu.pageIds.length===0)return!0;const Xl=qu.pageIds[0];return!!(Xl<1||uo&&Xl>uo)}).length>0){alert("Please ensure all new bookmarks have both a name and a valid page number within the PDF page range.");return}const Au=generateId(),Eu=Al.filter(qu=>!qu.isExisting).filter(qu=>{if(!qu.name||!qu.name.trim()||!qu.pageIds||qu.pageIds.length===0)return!1;const Xl=qu.pageIds[0];return!(Xl<1||uo&&Xl>uo)}).map(qu=>({id:generateId(),name:qu.name.trim(),type:"bookmark",pageIds:qu.pageIds||[],parentId:Au})),_f=Al.filter(qu=>qu.isExisting&&qu.id).map(qu=>qu.id);is&&is({id:Au,name:Fl.trim(),type:"folder",children:[]}),Eu.forEach(qu=>{is&&is(qu)}),_f.forEach(qu=>{us&&us(qu,{parentId:Au})}),Dl(!1),Pl(""),Rl([])},[Fl,Al,is,us,uo]),Vp=reactExports.useCallback($l=>{const Au=cs.find(Eu=>Eu.id===$l);!Au||Au.type==="folder"||Al.some(Eu=>Eu.id===$l&&Eu.isExisting)||Rl(Eu=>[...Eu,{id:Au.id,name:Au.name,pageIds:Au.pageIds||[],isExisting:!0}])},[cs,Al]),Ru=reactExports.useCallback(()=>{let $l=null;co&&co>0?$l=uo?Math.min(co,uo):co:uo&&uo>0&&($l=1);const Au={id:`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:"",pageIds:$l?[$l]:[],isExisting:!1};Rl(Eu=>[...Eu,Au])},[co,uo]),Qu=reactExports.useCallback(($l,Au)=>{Rl(Eu=>Eu.map((_f,qu)=>qu===$l?{..._f,...Au}:_f))},[]),up=reactExports.useCallback($l=>{Rl(Au=>Au.filter((Eu,_f)=>_f!==$l))},[]),Ep=reactExports.useCallback($l=>{zl($l),ou([]),Bl(!0)},[]),Cp=reactExports.useCallback($l=>{const Au=cs.find(Eu=>Eu.id===$l);!Au||Au.type==="folder"||Au.parentId!==Ol&&(Hl.some(Eu=>Eu.id===$l&&Eu.isExisting)||ou(Eu=>[...Eu,{id:Au.id,name:Au.name,pageIds:Au.pageIds||[],isExisting:!0}]))},[cs,Ol,Hl]),Sp=reactExports.useCallback(()=>{let $l=null;co&&co>0?$l=uo?Math.min(co,uo):co:uo&&uo>0&&($l=1);const Au={id:`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:"",pageIds:$l?[$l]:[],isExisting:!1};ou(Eu=>[...Eu,Au])},[co,uo]),vu=reactExports.useCallback(($l,Au)=>{ou(Eu=>Eu.map((_f,qu)=>qu===$l?{..._f,...Au}:_f))},[]),Zl=reactExports.useCallback($l=>{ou(Au=>Au.filter((Eu,_f)=>_f!==$l))},[]),Ou=reactExports.useCallback(()=>{if(!Ol)return;if(Hl.length===0){alert("Please add at least one bookmark to the group");return}if(Hl.filter(_f=>{if(_f.isExisting)return!1;if(!_f.name||!_f.name.trim()||!_f.pageIds||_f.pageIds.length===0)return!0;const qu=_f.pageIds[0];return!!(qu<1||uo&&qu>uo)}).length>0){alert("Please ensure all new bookmarks have both a name and a valid page number within the PDF page range.");return}const Au=Hl.filter(_f=>!_f.isExisting).filter(_f=>{if(!_f.name||!_f.name.trim()||!_f.pageIds||_f.pageIds.length===0)return!1;const qu=_f.pageIds[0];return!(qu<1||uo&&qu>uo)}).map(_f=>({id:generateId(),name:_f.name.trim(),type:"bookmark",pageIds:_f.pageIds||[],parentId:Ol})),Eu=Hl.filter(_f=>_f.isExisting&&_f.id).map(_f=>_f.id);Au.forEach(_f=>{is&&is(_f)}),Eu.forEach(_f=>{us&&us(_f,{parentId:Ol})}),Bl(!1),zl(null),ou([])},[Ol,Hl,is,us,uo]);reactExports.useEffect(()=>{const $l=Au=>{au.current&&!au.current.contains(Au.target)&&xl(!1)};if($a)return document.addEventListener("mousedown",$l),()=>document.removeEventListener("mousedown",$l)},[$a]);const Du=($l,Au)=>{const Eu=$l.type==="folder",_f=ga.has($l.id);return Eu?jsxRuntimeExports.jsxs("div",{style:{marginBottom:"0.5px"},children:[jsxRuntimeExports.jsx(DropSlot,{id:createSlotId(null,Au),parentId:null,index:Au}),jsxRuntimeExports.jsx(DraggableBookmarkFolder,{item:$l,isExpanded:_f,onToggle:Ip,isEditMode:yl,onRename:qp,onDelete:lp,onAddToGroup:Ep,isSelected:xa===$l.id,onSelect:_a,incomingPlaceholderHeight:Tp($l.id),children:$l.children&&$l.children.length>0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DropSlot,{id:createSlotId($l.id,0),parentId:$l.id,index:0,isInsideFolder:!0}),$l.children.map((qu,Xl)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(DraggableBookmark,{item:qu,isNested:!0,parentId:$l.id,isEditMode:yl,onNavigate:Hp,onRename:qp,onDelete:lp,onUpdate:us,numPages:uo,isSelected:xa===qu.id,onSelect:_a,recentlyDropped:xu===qu.id}),jsxRuntimeExports.jsx(DropSlot,{id:createSlotId($l.id,Xl+1),parentId:$l.id,index:Xl+1,isInsideFolder:!0})]},qu.id))]}):jsxRuntimeExports.jsx(DropSlot,{id:createSlotId($l.id,0),parentId:$l.id,index:0,isInsideFolder:!0,isEmptyState:!0})})]},$l.id):jsxRuntimeExports.jsxs("div",{style:{marginBottom:"0.5px"},children:[jsxRuntimeExports.jsx(DropSlot,{id:createSlotId(null,Au),parentId:null,index:Au}),jsxRuntimeExports.jsx(DraggableBookmark,{item:$l,parentId:null,isEditMode:yl,onNavigate:Hp,onRename:qp,onDelete:lp,onUpdate:us,numPages:uo,isSelected:xa===$l.id,onSelect:_a,recentlyDropped:xu===$l.id})]},$l.id)};return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",fontFamily:FONT_FAMILY$5,background:"#252525"},children:[jsxRuntimeExports.jsxs("div",{style:{padding:"12px",background:"#252525",borderBottom:"1px solid #3a3a3a",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"13px",fontWeight:"600",color:"#ddd"},children:"Bookmarks"}),jsxRuntimeExports.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:jsxRuntimeExports.jsxs("button",{onClick:()=>wl(!yl),style:{background:yl?"#4A90E2":"#3a3a3a",color:"#ffffff",border:"none",borderRadius:"6px",padding:"6px 10px",fontSize:"12px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontFamily:FONT_FAMILY$5},onMouseEnter:$l=>{yl?$l.currentTarget.style.background="#357abd":$l.currentTarget.style.background="#444"},onMouseLeave:$l=>{yl?$l.currentTarget.style.background="#4A90E2":$l.currentTarget.style.background="#3a3a3a"},children:[jsxRuntimeExports.jsx(Icon,{name:"edit",size:12,color:"#ffffff"}),yl?"Done":"Edit"]})})]}),jsxRuntimeExports.jsx("div",{style:{flex:1,overflowY:"auto",padding:"8px",position:"relative"},children:jsxRuntimeExports.jsxs(DndContext,{sensors:_u,collisionDetection:Lp,onDragStart:Mu,onDragOver:hp,onDragEnd:mp,onDragCancel:Rp,children:[jsxRuntimeExports.jsx(SortableContext,{items:Tu,strategy:verticalListSortingStrategy,children:Cu.length===0?jsxRuntimeExports.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999",fontSize:"13px"},children:"No bookmarks yet. Create one to get started."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Cu.map(($l,Au)=>Du($l,Au)),jsxRuntimeExports.jsx(DropSlot,{id:createSlotId(null,Cu.length),parentId:null,index:Cu.length})]})}),Bp&&jsxRuntimeExports.jsx(DragOverlay,{children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",borderRadius:"8px",border:"2px solid #4A90E2",background:"rgba(43, 43, 43, 0.9)",padding:"12px",boxShadow:"0 12px 28px rgba(0, 0, 0, 0.4)",backdropFilter:"blur(4px)",fontSize:"16px",color:"#4A90E2"},children:["",Bp.type==="folder"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Icon,{name:"folder",size:16,color:"#999"}),jsxRuntimeExports.jsx("span",{style:{fontWeight:"600",color:"#ddd"},children:Bp.name})]}):jsxRuntimeExports.jsx("span",{style:{fontWeight:"500",color:"#ddd"},children:Bp.name})]})})]})}),jsxRuntimeExports.jsx("div",{style:{padding:"12px",background:"#252525",borderTop:"1px solid #3a3a3a"},children:jsxRuntimeExports.jsxs("div",{style:{position:"relative"},ref:au,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>xl(!$a),style:{width:"100%",background:"#4A90E2",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"13px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontFamily:FONT_FAMILY$5},onMouseEnter:$l=>$l.currentTarget.style.background="#357abd",onMouseLeave:$l=>$l.currentTarget.style.background="#4A90E2",children:[jsxRuntimeExports.jsx(Icon,{name:"plus",size:14,color:"#ffffff"}),"Add Bookmark"]}),$a&&jsxRuntimeExports.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,marginBottom:"4px",background:"#333",border:"1px solid #444",borderRadius:"8px",padding:"4px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[jsxRuntimeExports.jsxs("button",{onClick:Ap,style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"13px",textAlign:"left",cursor:"pointer",color:"#ddd",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:$l=>$l.currentTarget.style.background="#2b2b2b",onMouseLeave:$l=>$l.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx(Icon,{name:"folder",size:14,color:"#999"}),"New Bookmark Group"]}),jsxRuntimeExports.jsxs("div",{style:{padding:"8px 12px",borderTop:"1px solid #3a3a3a"},children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Bookmark name",value:_l,onChange:$l=>El($l.target.value),style:{width:"100%",padding:"8px 10px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"6px",fontSize:"13px",fontFamily:FONT_FAMILY$5,marginBottom:"8px",outline:"none",transition:"border-color 0.15s ease"},onFocus:$l=>$l.currentTarget.style.borderColor="#4A90E2",onBlur:$l=>$l.currentTarget.style.borderColor="#3a3a3a"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Page number",value:Sl,onChange:$l=>Zu($l.target.value),style:{width:"100%",padding:"8px 10px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"6px",fontSize:"13px",fontFamily:FONT_FAMILY$5,marginBottom:"8px",outline:"none",transition:"border-color 0.15s ease"},onFocus:$l=>$l.currentTarget.style.borderColor="#4A90E2",onBlur:$l=>$l.currentTarget.style.borderColor="#3a3a3a",inputMode:"numeric",pattern:"[0-9]*"}),jsxRuntimeExports.jsx("button",{onClick:()=>{if(co){const $l=uo?Math.min(co,uo):co;$l>0&&Zu($l.toString())}},style:{width:"100%",padding:"6px 12px",background:"#3a3a3a",color:"#ddd",border:"1px solid #444",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer",fontFamily:FONT_FAMILY$5,marginBottom:"8px",transition:"background 0.15s ease"},onMouseEnter:$l=>$l.currentTarget.style.background="#444",onMouseLeave:$l=>$l.currentTarget.style.background="#3a3a3a",children:"Current Page"}),jsxRuntimeExports.jsx("button",{onClick:$u,style:{width:"100%",padding:"6px 12px",background:"#4A90E2",color:"#ffffff",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"500",cursor:"pointer",fontFamily:FONT_FAMILY$5},onMouseEnter:$l=>$l.currentTarget.style.background="#357abd",onMouseLeave:$l=>$l.currentTarget.style.background="#4A90E2",children:"Create Bookmark"})]})]})]})}),Tl&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>Dl(!1),children:jsxRuntimeExports.jsxs("div",{style:{background:"#252525",borderRadius:"12px",padding:"24px",width:"90%",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",border:"1px solid #3a3a3a",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},onClick:$l=>$l.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#ddd"},children:"Create Bookmark Group"}),jsxRuntimeExports.jsx("button",{onClick:()=>{Dl(!1),Pl(""),Rl([])},style:{background:"transparent",border:"none",color:"#999",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:$l=>{$l.currentTarget.style.background="#3a3a3a",$l.currentTarget.style.color="#ddd"},onMouseLeave:$l=>{$l.currentTarget.style.background="transparent",$l.currentTarget.style.color="#999"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:18})})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#aaa",marginBottom:"8px"},children:"Group Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:Fl,onChange:$l=>Pl($l.target.value),placeholder:"Enter bookmark group name",style:{width:"100%",padding:"10px 12px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"6px",fontSize:"13px",fontFamily:FONT_FAMILY$5,outline:"none",transition:"border-color 0.15s ease"},onFocus:$l=>$l.currentTarget.style.borderColor="#4A90E2",onBlur:$l=>$l.currentTarget.style.borderColor="#3a3a3a",autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[jsxRuntimeExports.jsxs("label",{style:{fontSize:"13px",fontWeight:"500",color:"#aaa"},children:["Bookmarks (",Al.length,")"]}),jsxRuntimeExports.jsxs("button",{onClick:Ru,style:{background:"#3a3a3a",color:"#ddd",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontFamily:FONT_FAMILY$5},onMouseEnter:$l=>$l.currentTarget.style.background="#444",onMouseLeave:$l=>$l.currentTarget.style.background="#3a3a3a",children:[jsxRuntimeExports.jsx(Icon,{name:"plus",size:12}),"New Bookmark"]})]}),jsxRuntimeExports.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #3a3a3a",borderRadius:"6px",background:"#1f1f1f"},children:Al.length===0?jsxRuntimeExports.jsx("div",{style:{padding:"40px 20px",textAlign:"center",color:"#666",fontSize:"13px"},children:"No bookmarks added yet. Add existing bookmarks or create new ones."}):Al.map(($l,Au)=>jsxRuntimeExports.jsxs("div",{style:{padding:"12px",borderBottom:Au<Al.length-1?"1px solid #2a2a2a":"none",display:"flex",gap:"8px",alignItems:"flex-start"},children:[jsxRuntimeExports.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:$l.isExisting?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"13px",color:"#ddd",fontWeight:"500"},children:$l.name}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"11px",color:"#999"},children:["Page ",$l.pageIds&&$l.pageIds.length>0?$l.pageIds[0]:"N/A"]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{type:"text",value:$l.name||"",onChange:Eu=>Qu(Au,{name:Eu.target.value}),placeholder:"Bookmark name",style:{width:"100%",padding:"6px 8px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"4px",fontSize:"12px",fontFamily:FONT_FAMILY$5,outline:"none"},onFocus:Eu=>Eu.currentTarget.style.borderColor="#4A90E2",onBlur:Eu=>Eu.currentTarget.style.borderColor="#3a3a3a"}),jsxRuntimeExports.jsx("input",{type:"text",value:$l.pageIds&&$l.pageIds.length>0?$l.pageIds[0]:"",onChange:Eu=>{const _f=Eu.target.value.replace(/[^\d]/g,"");if(!_f){Qu(Au,{pageIds:[]});return}const qu=parseInt(_f,10);if(isNaN(qu)||qu<1){Qu(Au,{pageIds:[]});return}const Xl=uo&&qu>uo?uo:qu;Qu(Au,{pageIds:[Xl]})},placeholder:"Page number",style:{width:"100%",padding:"6px 8px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"4px",fontSize:"12px",fontFamily:FONT_FAMILY$5,outline:"none"},onFocus:Eu=>Eu.currentTarget.style.borderColor="#4A90E2",onBlur:Eu=>Eu.currentTarget.style.borderColor="#3a3a3a",inputMode:"numeric",pattern:"[0-9]*"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>up(Au),style:{background:"transparent",border:"none",color:"#ff6b6b",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",flexShrink:0},onMouseEnter:Eu=>Eu.currentTarget.style.background="#3a1f1f",onMouseLeave:Eu=>Eu.currentTarget.style.background="transparent",title:"Remove",children:jsxRuntimeExports.jsx(Icon,{name:"trash",size:14})})]},Au))})]}),cs&&cs.length>0&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#aaa",marginBottom:"8px"},children:"Add Existing Bookmarks"}),jsxRuntimeExports.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",border:"1px solid #3a3a3a",borderRadius:"6px",background:"#1f1f1f",padding:"8px"},children:cs.filter($l=>$l.type==="bookmark"&&!$l.parentId).length===0?jsxRuntimeExports.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666",fontSize:"12px"},children:"No existing bookmarks available"}):cs.filter($l=>$l.type==="bookmark"&&!$l.parentId).filter($l=>!Al.some(Au=>Au.id===$l.id&&Au.isExisting)).map($l=>jsxRuntimeExports.jsxs("button",{onClick:()=>Vp($l.id),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"12px",textAlign:"left",cursor:"pointer",color:"#ddd",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},onMouseEnter:Au=>Au.currentTarget.style.background="#2b2b2b",onMouseLeave:Au=>Au.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx("span",{children:$l.name}),jsxRuntimeExports.jsxs("span",{style:{color:"#999",fontSize:"11px"},children:["Page ",$l.pageIds&&$l.pageIds.length>0?$l.pageIds[0]:"N/A"]})]},$l.id))})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Dl(!1),Pl(""),Rl([])},style:{padding:"8px 16px",background:"#3a3a3a",color:"#ddd",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer",fontFamily:FONT_FAMILY$5},onMouseEnter:$l=>$l.currentTarget.style.background="#444",onMouseLeave:$l=>$l.currentTarget.style.background="#3a3a3a",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Np,style:{padding:"8px 16px",background:"#4A90E2",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer",fontFamily:FONT_FAMILY$5},onMouseEnter:$l=>$l.currentTarget.style.background="#357abd",onMouseLeave:$l=>$l.currentTarget.style.background="#4A90E2",children:"Create Group"})]})]})}),Il&&Ol&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>{Bl(!1),zl(null),ou([])},children:jsxRuntimeExports.jsxs("div",{style:{background:"#252525",borderRadius:"12px",padding:"24px",width:"90%",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",border:"1px solid #3a3a3a",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},onClick:$l=>$l.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#ddd"},children:"Add Bookmarks to Group"}),jsxRuntimeExports.jsx("button",{onClick:()=>{Bl(!1),zl(null),ou([])},style:{background:"transparent",border:"none",color:"#999",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:$l=>{$l.currentTarget.style.background="#3a3a3a",$l.currentTarget.style.color="#ddd"},onMouseLeave:$l=>{$l.currentTarget.style.background="transparent",$l.currentTarget.style.color="#999"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:18})})]}),(()=>{const $l=cs.find(Au=>Au.id===Ol);return $l?jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#aaa",marginBottom:"8px"},children:"Group Name"}),jsxRuntimeExports.jsx("div",{style:{padding:"10px 12px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"6px",fontSize:"13px",fontFamily:FONT_FAMILY$5},children:$l.name})]}):null})(),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[jsxRuntimeExports.jsxs("label",{style:{fontSize:"13px",fontWeight:"500",color:"#aaa"},children:["Bookmarks (",Hl.length,")"]}),jsxRuntimeExports.jsxs("button",{onClick:Sp,style:{background:"#3a3a3a",color:"#ddd",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontFamily:FONT_FAMILY$5},onMouseEnter:$l=>$l.currentTarget.style.background="#444",onMouseLeave:$l=>$l.currentTarget.style.background="#3a3a3a",children:[jsxRuntimeExports.jsx(Icon,{name:"plus",size:12}),"New Bookmark"]})]}),jsxRuntimeExports.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #3a3a3a",borderRadius:"6px",background:"#1f1f1f"},children:Hl.length===0?jsxRuntimeExports.jsx("div",{style:{padding:"40px 20px",textAlign:"center",color:"#666",fontSize:"13px"},children:"No bookmarks added yet. Add existing bookmarks or create new ones."}):Hl.map(($l,Au)=>jsxRuntimeExports.jsxs("div",{style:{padding:"12px",borderBottom:Au<Hl.length-1?"1px solid #2a2a2a":"none",display:"flex",gap:"8px",alignItems:"flex-start"},children:[jsxRuntimeExports.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:$l.isExisting?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"13px",color:"#ddd",fontWeight:"500"},children:$l.name}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"11px",color:"#999"},children:["Page ",$l.pageIds&&$l.pageIds.length>0?$l.pageIds[0]:"N/A"]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{type:"text",value:$l.name||"",onChange:Eu=>vu(Au,{name:Eu.target.value}),placeholder:"Bookmark name",style:{width:"100%",padding:"6px 8px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"4px",fontSize:"12px",fontFamily:FONT_FAMILY$5,outline:"none"},onFocus:Eu=>Eu.currentTarget.style.borderColor="#4A90E2",onBlur:Eu=>Eu.currentTarget.style.borderColor="#3a3a3a"}),jsxRuntimeExports.jsx("input",{type:"text",value:$l.pageIds&&$l.pageIds.length>0?$l.pageIds[0]:"",onChange:Eu=>{const _f=Eu.target.value.replace(/[^\d]/g,"");if(!_f){vu(Au,{pageIds:[]});return}const qu=parseInt(_f,10);if(isNaN(qu)||qu<1){vu(Au,{pageIds:[]});return}const Xl=uo&&qu>uo?uo:qu;vu(Au,{pageIds:[Xl]})},placeholder:"Page number",style:{width:"100%",padding:"6px 8px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"4px",fontSize:"12px",fontFamily:FONT_FAMILY$5,outline:"none"},onFocus:Eu=>Eu.currentTarget.style.borderColor="#4A90E2",onBlur:Eu=>Eu.currentTarget.style.borderColor="#3a3a3a",inputMode:"numeric",pattern:"[0-9]*"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>Zl(Au),style:{background:"transparent",border:"none",color:"#ff6b6b",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",flexShrink:0},onMouseEnter:Eu=>Eu.currentTarget.style.background="#3a1f1f",onMouseLeave:Eu=>Eu.currentTarget.style.background="transparent",title:"Remove",children:jsxRuntimeExports.jsx(Icon,{name:"trash",size:14})})]},Au))})]}),cs&&cs.length>0&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#aaa",marginBottom:"8px"},children:"Add Existing Bookmarks"}),jsxRuntimeExports.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",border:"1px solid #3a3a3a",borderRadius:"6px",background:"#1f1f1f",padding:"8px"},children:cs.filter($l=>$l.type==="bookmark"&&$l.parentId!==Ol&&!Hl.some(Au=>Au.id===$l.id&&Au.isExisting)).length===0?jsxRuntimeExports.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666",fontSize:"12px"},children:"No existing bookmarks available"}):cs.filter($l=>$l.type==="bookmark"&&$l.parentId!==Ol&&!Hl.some(Au=>Au.id===$l.id&&Au.isExisting)).map($l=>jsxRuntimeExports.jsxs("button",{onClick:()=>Cp($l.id),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",fontSize:"12px",textAlign:"left",cursor:"pointer",color:"#ddd",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},onMouseEnter:Au=>Au.currentTarget.style.background="#2b2b2b",onMouseLeave:Au=>Au.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx("span",{children:$l.name}),jsxRuntimeExports.jsxs("span",{style:{color:"#999",fontSize:"11px"},children:["Page ",$l.pageIds&&$l.pageIds.length>0?$l.pageIds[0]:"N/A"]})]},$l.id))})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Bl(!1),zl(null),ou([])},style:{padding:"8px 16px",background:"#3a3a3a",color:"#ddd",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer",fontFamily:FONT_FAMILY$5},onMouseEnter:$l=>$l.currentTarget.style.background="#444",onMouseLeave:$l=>$l.currentTarget.style.background="#3a3a3a",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Ou,style:{padding:"8px 16px",background:"#4A90E2",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer",fontFamily:FONT_FAMILY$5},onMouseEnter:$l=>$l.currentTarget.style.background="#357abd",onMouseLeave:$l=>$l.currentTarget.style.background="#4A90E2",children:"Add Bookmarks"})]})]})})]})},parsePageRangeInput=(cs,is={})=>{const{min:us=1,max:hs=1/0}=is,lo=new Set,co=[];if(!cs||typeof cs!="string")return{pages:[],errors:["No page numbers provided."]};const uo=cs.split(/[,;]+/).map(ga=>ga.trim()).filter(Boolean);return uo.length===0?{pages:[],errors:["No page numbers provided."]}:(uo.forEach(ga=>{if(/^\d+$/.test(ga)){const xa=Number(ga);if(!Number.isInteger(xa)||xa<us||xa>hs){co.push(`Page ${ga} is outside the valid range (${us}-${hs}).`);return}lo.add(xa);return}const ba=ga.match(/^(\d+)\s*-\s*(\d+)$/);if(ba){let xa=Number(ba[1]),_a=Number(ba[2]);if(!Number.isInteger(xa)||!Number.isInteger(_a)){co.push(`Range "${ga}" contains non-integer values.`);return}xa>_a&&([xa,_a]=[_a,xa]);for(let $a=xa;$a<=_a;$a+=1){if($a<us||$a>hs){co.push(`Page ${$a} in range "${ga}" is outside the valid range (${us}-${hs}).`);continue}lo.add($a)}return}co.push(`Unable to parse "${ga}". Use formats like "5" or "5-7".`)}),{pages:Array.from(lo).sort((ga,ba)=>ga-ba),errors:co})},formatPageList=(cs=[])=>{if(!Array.isArray(cs)||cs.length===0)return"";const is=[...cs].sort((co,uo)=>co-uo),us=[];let hs=is[0],lo=is[0];for(let co=1;co<is.length;co+=1){const uo=is[co];if(uo===lo+1){lo=uo;continue}hs===lo?us.push(String(hs)):us.push(`${hs}-${lo}`),hs=uo,lo=uo}return hs===lo?us.push(String(hs)):us.push(`${hs}-${lo}`),us.join(", ")},FONT_FAMILY$4='-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Segoe UI", Roboto, Ubuntu, "Noto Sans", Arial, sans-serif',SpaceDragOverlay=React.memo(function cs({space:is}){return is?jsxRuntimeExports.jsx("div",{style:{background:"#2b2b2b",borderRadius:"8px",border:"1px solid rgba(74, 144, 226, 0.6)",padding:"10px 12px",minWidth:"220px",maxWidth:"260px",boxShadow:"0 12px 36px rgba(0, 0, 0, 0.45)",opacity:.9,display:"flex",flexDirection:"column",gap:"4px",fontFamily:FONT_FAMILY$4},children:jsxRuntimeExports.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#e6e6e6"},children:is.name})}):null}),SpaceSortableCard=React.memo(function cs({space:is,isActive:us,isSelected:hs,isExpanded:lo,isEditing:co,editingName:uo,pageSummary:ga,pageCount:ba,regionCount:xa,pageInputValue:_a,pageError:$a,onToggleExpand:xl,onSpaceClick:yl,onRenameClick:wl,onEditingNameChange:_l,onSaveRename:El,onCancelRename:Sl,onDelete:Cl,onExportSpaceCSV:Tl,onExportSpacePDF:Dl,onPageInputChange:Fl,onAssignPages:Pl,onRenameRegion:Al,onRequestRegionEdit:Rl,onRemovePage:Il,onExitSpace:Bl,isRegionSelectionActive:Ol=!1}){var ku;const[zl,Hl]=reactExports.useState(!1),[ou,au]=reactExports.useState(!1),[_c,uu]=reactExports.useState(null),[lu,Kl]=reactExports.useState(""),xu=reactExports.useRef(null),pu=reactExports.useRef(null);React.useEffect(()=>{lo||(Hl(!1),uu(null),Kl(""))},[lo]),React.useEffect(()=>{if(!zl)return;const tu=eu=>{pu.current&&(pu.current.contains(eu.target)||Hl(!1))};return document.addEventListener("mousedown",tu),document.addEventListener("touchstart",tu),()=>{document.removeEventListener("mousedown",tu),document.removeEventListener("touchstart",tu)}},[zl]),React.useEffect(()=>{uu(null),Kl("")},[is.id]),React.useEffect(()=>{_c!==null&&requestAnimationFrame(()=>{var tu,eu;(tu=xu.current)==null||tu.focus(),(eu=xu.current)==null||eu.select()})},[_c]);const Ll=ou||zl,Nl=reactExports.useCallback((tu,eu=!1)=>{if(_c!==tu)return;const gu=lu.trim();Al==null||Al(is.id,tu,gu),uu(null),Kl(""),eu&&(Rl==null||Rl(is.id,tu))},[_c,lu,Al,Rl,is.id]);React.useEffect(()=>{!Ol&&_c!==null&&Nl(_c,!1)},[Ol,_c,Nl]);const Ml=reactExports.useCallback(()=>{uu(null),Kl("")},[]),Ul=reactExports.useCallback((tu,eu)=>{uu(tu),Kl(eu)},[]),{attributes:Vl,listeners:Ql,setNodeRef:Jl,transform:iu,transition:fu,isDragging:_u}=useSortable({id:is.id}),bu={transform:CSS$1.Transform.toString(iu),transition:fu||"transform 180ms cubic-bezier(0.2, 0, 0.2, 1)",marginBottom:"8px"},Cu=hs||us,Tu=Cu?"#3a3a3a":"transparent",Fu=Cu?"#3a3a3a":"#2b2b2b";return jsxRuntimeExports.jsx("div",{ref:Jl,style:bu,children:jsxRuntimeExports.jsxs("div",{style:{background:"#2b2b2b",border:Cu?"1px solid transparent":"1px solid #3a3a3a",borderRadius:"8px",overflow:lo?"visible":"hidden",boxShadow:Cu?"0 4px 16px rgba(0, 0, 0, 0.18)":"0 1px 2px rgba(0, 0, 0, 0.05)",opacity:_u?.75:1,transform:_u?"scale(0.98)":"none",transition:"opacity 0.18s ease, transform 0.18s ease"},children:[jsxRuntimeExports.jsxs("div",{onClick:()=>yl(is.id),onDoubleClick:()=>xl(is.id),style:{padding:"10px 10px 10px 6px",cursor:"pointer",background:Tu,transition:"background 0.15s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:tu=>{!hs&&!us&&(tu.currentTarget.style.background=Fu)},onMouseLeave:tu=>{!hs&&!us&&(tu.currentTarget.style.background="transparent")},children:[jsxRuntimeExports.jsx("div",{...Vl,...Ql,"data-space-drag-handle":!0,onClick:tu=>tu.stopPropagation(),onMouseDown:tu=>tu.stopPropagation(),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",borderRadius:"6px",color:"#666",fontSize:"16px",cursor:_u?"grabbing":"grab",userSelect:"none",touchAction:"none",background:_u?"#3a3a3a":"transparent"},title:"Drag to reorder",children:""}),jsxRuntimeExports.jsx("button",{onClick:tu=>{tu.stopPropagation(),xl(is.id)},style:{background:"none",border:"none",color:"#666",cursor:"pointer",padding:"2px 4px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:tu=>tu.currentTarget.style.background="#f0f0f0",onMouseLeave:tu=>tu.currentTarget.style.background="transparent",title:lo?"Collapse":"Expand",children:jsxRuntimeExports.jsx(Icon,{name:lo?"chevronDown":"chevronRight",size:12})}),co?jsxRuntimeExports.jsx("input",{type:"text",value:uo,onChange:tu=>_l(tu.target.value),onBlur:El,onKeyDown:tu=>{tu.key==="Enter"?El():tu.key==="Escape"&&Sl()},onClick:tu=>tu.stopPropagation(),autoFocus:!0,style:{flex:1,padding:"4px 8px",background:"#2b2b2b",color:"#ddd",border:"1px solid #4A90E2",borderRadius:"4px",fontSize:"13px",fontFamily:FONT_FAMILY$4,outline:"none"}}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{style:{flex:1,fontSize:"13px",fontWeight:"500",color:"#ddd",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:is.name}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center",marginLeft:"auto"},children:[hs&&jsxRuntimeExports.jsx("button",{onClick:tu=>{tu.stopPropagation(),Bl==null||Bl(is.id)},style:{background:"#4A90E2",border:"none",color:"#ffffff",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:"pointer",fontFamily:FONT_FAMILY$4,transition:"background 0.15s ease"},onMouseEnter:tu=>{tu.currentTarget.style.background="#357abd"},onMouseLeave:tu=>{tu.currentTarget.style.background="#4A90E2"},title:"Exit Space",children:"Exit"}),jsxRuntimeExports.jsx("button",{onClick:tu=>{tu.stopPropagation(),wl(is.id,is.name)},style:{background:"transparent",border:"none",padding:"4px",cursor:"pointer",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:tu=>tu.currentTarget.style.background="#f0f0f0",onMouseLeave:tu=>tu.currentTarget.style.background="transparent",title:"Rename",children:jsxRuntimeExports.jsx(Icon,{name:"edit",size:12,color:"#666"})}),jsxRuntimeExports.jsx("button",{onClick:tu=>{tu.stopPropagation(),Cl(is.id)},style:{background:"transparent",border:"none",padding:"4px",cursor:"pointer",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:tu=>tu.currentTarget.style.background="#ffebee",onMouseLeave:tu=>tu.currentTarget.style.background="transparent",title:"Delete",children:jsxRuntimeExports.jsx(Icon,{name:"trash",size:12,color:"#d32f2f"})})]})]})]}),lo&&jsxRuntimeExports.jsxs("div",{style:{padding:"10px 12px 16px 12px",background:"#2b2b2b",borderTop:"1px solid #3a3a3a",display:"flex",flexDirection:"column",gap:"12px",fontSize:"12px",color:"#999",position:"relative"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexWrap:"nowrap",gap:"8px",alignItems:"center"},children:[jsxRuntimeExports.jsx("button",{onClick:tu=>{tu.stopPropagation(),Pl(is.id)},style:{padding:"6px 10px",background:"#4A90E2",color:"#fff",border:"none",borderRadius:"4px",fontSize:"11px",fontWeight:500,cursor:"pointer",fontFamily:FONT_FAMILY$4,whiteSpace:"nowrap"},children:"Add Pages"}),jsxRuntimeExports.jsxs("div",{ref:pu,style:{position:"relative",display:"inline-flex"},onClick:tu=>tu.stopPropagation(),children:[jsxRuntimeExports.jsx("button",{onClick:()=>Hl(tu=>!tu),onMouseEnter:()=>au(!0),onMouseLeave:()=>au(!1),style:{padding:"6px",background:Ll?"#4A90E2":"#3a3a3a",border:"1px solid #4A90E2",color:Ll?"#ffffff":"#4A90E2",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:"pointer",fontFamily:FONT_FAMILY$4,display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.15s ease, border-color 0.15s ease, color 0.15s ease"},children:jsxRuntimeExports.jsx(Icon,{name:"upload",size:14,color:Ll?"#ffffff":"#4A90E2"})}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"50%",left:"calc(100% + 8px)",transform:"translateY(-50%)",background:"#1f1f1f",color:"#fff",padding:"4px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:500,opacity:Ll?1:0,pointerEvents:"none",transition:"opacity 0.2s ease",whiteSpace:"nowrap"},children:"Export"}),zl&&jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:"50%",transform:"translateX(-50%)",background:"#1f1f1f",border:"1px solid #3a3a3a",borderRadius:"6px",boxShadow:"0 8px 20px rgba(0,0,0,0.35)",display:"flex",flexDirection:"column",minWidth:"auto",width:"max-content",zIndex:10,overflow:"hidden"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Hl(!1),Tl==null||Tl(is.id)},style:{padding:"8px 12px",background:"transparent",color:"#ddd",border:"none",fontSize:"12px",textAlign:"left",cursor:"pointer",fontFamily:FONT_FAMILY$4},onMouseEnter:tu=>tu.currentTarget.style.background="#333",onMouseLeave:tu=>tu.currentTarget.style.background="transparent",children:"CSV"}),jsxRuntimeExports.jsx("button",{onClick:()=>{Hl(!1),Dl==null||Dl(is.id)},style:{padding:"8px 12px",background:"transparent",color:"#ddd",border:"none",fontSize:"12px",textAlign:"left",cursor:"pointer",fontFamily:FONT_FAMILY$4},onMouseEnter:tu=>tu.currentTarget.style.background="#333",onMouseLeave:tu=>tu.currentTarget.style.background="transparent",children:"PDF"})]})]}),jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:"10px",right:"12px",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"2px"},children:[jsxRuntimeExports.jsxs("span",{style:{color:"#777",fontSize:"10px",fontWeight:400,lineHeight:"1.2",textAlign:"right"},children:[ba," page",ba!==1?"s":""]}),xa>0&&jsxRuntimeExports.jsxs("span",{style:{color:"#777",fontSize:"10px",fontWeight:400,lineHeight:"1.2",textAlign:"right"},children:[xa," region",xa!==1?"s":""]})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[jsxRuntimeExports.jsx("input",{type:"text",value:_a,placeholder:"Add pages (e.g. 3, 6-9, 12)",onChange:tu=>Fl(is.id,tu.target.value),onKeyDown:tu=>{tu.key==="Enter"&&(tu.preventDefault(),Pl(is.id))},style:{flex:1,padding:"6px 8px",background:"#1f1f1f",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"4px",fontSize:"11px",fontFamily:FONT_FAMILY$4}}),$a&&jsxRuntimeExports.jsx("div",{style:{color:"#ff8a80",fontSize:"11px"},children:$a})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[jsxRuntimeExports.jsx("div",{style:{color:"#ccc",fontSize:"12px",fontWeight:500},children:"Included Pages"}),ba===0?jsxRuntimeExports.jsx("div",{style:{color:"#777",fontSize:"12px"},children:"No pages added yet."}):jsxRuntimeExports.jsx("ul",{style:{listStyle:"none",margin:0,padding:0,display:"flex",flexDirection:"column",gap:"6px"},children:(ku=is.assignedPages)==null?void 0:ku.slice().sort((tu,eu)=>(tu.pageId||0)-(eu.pageId||0)).map(tu=>{const eu=typeof tu.label=="string"&&tu.label.trim().length>0?tu.label.trim():`Region ${tu.pageId}`,gu=_c===tu.pageId;return jsxRuntimeExports.jsxs("li",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 8px",background:"#1f1f1f",border:"1px solid #333",borderRadius:"6px"},children:[jsxRuntimeExports.jsx("div",{style:{flex:1},children:gu?jsxRuntimeExports.jsx("input",{ref:xu,type:"text",value:lu,onChange:ru=>Kl(ru.target.value),onBlur:()=>{Ol||Nl(tu.pageId,!1)},onKeyDown:ru=>{ru.key==="Enter"?(ru.preventDefault(),Nl(tu.pageId,!0)):ru.key==="Escape"&&(ru.preventDefault(),Ml())},style:{width:"100%",padding:"4px 6px",background:"#1f1f1f",color:"#ddd",border:"1px solid #4A90E2",borderRadius:"4px",fontSize:"12px",fontWeight:500,fontFamily:FONT_FAMILY$4,outline:"none"}}):jsxRuntimeExports.jsx("div",{style:{color:"#ddd",fontWeight:500},children:eu})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"4px"},children:[jsxRuntimeExports.jsx("button",{onClick:ru=>{ru.stopPropagation(),gu?Nl(tu.pageId,!0):(Ul(tu.pageId,eu),Rl==null||Rl(is.id,tu.pageId))},onMouseDown:ru=>{gu&&ru.preventDefault()},style:{padding:"6px 10px",background:"#3a3a3a",color:"#fff",border:gu?"1px solid #4A90E2":"1px solid transparent",borderRadius:"4px",fontSize:"11px",cursor:"pointer",fontFamily:FONT_FAMILY$4,boxShadow:gu?"0 0 0 1px rgba(74, 144, 226, 0.35)":"none"},children:"Edit"}),jsxRuntimeExports.jsx("button",{title:"Delete",onClick:()=>Il(is.id,tu.pageId),style:{background:"transparent",border:"none",padding:"4px",cursor:"pointer",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:ru=>ru.currentTarget.style.background="#ffebee",onMouseLeave:ru=>ru.currentTarget.style.background="transparent",children:jsxRuntimeExports.jsx(Icon,{name:"trash",size:12,color:"#d32f2f"})})]})]},tu.pageId)})})]})]})]})})}),SpacesPanel=({spaces:cs,activeSpaceId:is,onSpaceCreate:us,onSpaceUpdate:hs,onSpaceDelete:lo,onSetActiveSpace:co,onExitSpaceMode:uo,onRequestRegionEdit:ga,onSpaceAssignPages:ba,onSpaceRenamePage:xa,onSpaceRemovePage:_a,onReorderSpaces:$a,onExportSpaceCSV:xl,onExportSpacePDF:yl,isRegionSelectionActive:wl=!1,numPages:_l})=>{const[El,Sl]=reactExports.useState(""),[Cl,Tl]=reactExports.useState(null),[Dl,Fl]=reactExports.useState(""),[Pl,Al]=reactExports.useState(new Set),[Rl,Il]=reactExports.useState(null),[Bl,Ol]=reactExports.useState({}),[zl,Hl]=reactExports.useState({}),[ou,au]=reactExports.useState(null),_c=reactExports.useRef(new Set(cs.map(Fu=>Fu.id))),uu=useSensors(useSensor(PointerSensor,{activationConstraint:{distance:6}})),lu=reactExports.useMemo(()=>cs.find(Fu=>Fu.id===ou)||null,[ou,cs]),Kl=reactExports.useCallback(()=>{const Fu=El.trim()||`Space ${cs.length+1}`;us&&us({name:Fu,assignedPages:[]}),Sl("")},[El,cs.length,us]),xu=reactExports.useCallback((Fu,ku)=>{Tl(Fu),Fl(ku)},[]),pu=reactExports.useCallback(()=>{Cl&&Dl.trim()&&hs&&hs(Cl,{name:Dl.trim()}),Tl(null),Fl("")},[Cl,Dl,hs]),Ll=reactExports.useCallback(Fu=>{Fl(Fu)},[]),Nl=reactExports.useCallback(()=>{Tl(null),Fl("")},[]),Ml=reactExports.useCallback(Fu=>{window.confirm("Delete this space? This will not delete the pages, only the space assignment.")&&lo&&lo(Fu)},[lo]),Ul=reactExports.useCallback(Fu=>{Al(ku=>{const tu=new Set(ku);return tu.has(Fu)?tu.delete(Fu):tu.add(Fu),tu})},[]),Vl=reactExports.useCallback(Fu=>{Il(Fu),co&&co(Fu)},[co]),Ql=reactExports.useCallback(Fu=>{Rl===Fu&&Il(null),is===Fu&&uo&&uo()},[Rl,is,uo]),Jl=reactExports.useCallback((Fu,ku)=>{Ol(tu=>({...tu,[Fu]:ku})),Hl(tu=>({...tu,[Fu]:null}))},[]),iu=reactExports.useCallback(Fu=>{const ku=(Bl[Fu]||"").trim(),{pages:tu,errors:eu}=parsePageRangeInput(ku,{min:1,max:typeof _l=="number"&&_l>0?_l:1/0});if(eu.length>0){Hl(gu=>({...gu,[Fu]:eu.join(" ")}));return}if(tu.length===0){Hl(gu=>({...gu,[Fu]:"Enter one or more page numbers."}));return}ba&&ba(Fu,tu),Ol(gu=>({...gu,[Fu]:""})),Hl(gu=>({...gu,[Fu]:null}))},[Bl,_l,ba]);React.useEffect(()=>{const Fu=_c.current,ku=new Set(cs.map(eu=>eu.id)),tu=cs.map(eu=>eu.id).filter(eu=>eu!=null&&!Fu.has(eu));tu.length>0&&Al(eu=>{const gu=new Set(eu);return tu.forEach(ru=>gu.add(ru)),gu}),_c.current=ku},[cs]);const fu=reactExports.useCallback((Fu=[])=>{const ku=Fu.map(tu=>tu==null?void 0:tu.pageId).filter(tu=>typeof tu=="number"&&!Number.isNaN(tu));return formatPageList(ku)},[]),_u=reactExports.useCallback((Fu,ku)=>{_a&&_a(Fu,ku)},[_a]),bu=reactExports.useCallback(({active:Fu})=>{au(Fu.id)},[]),Cu=reactExports.useCallback(({active:Fu,over:ku})=>{if(au(null),!ku||Fu.id===ku.id||!$a)return;const tu=cs.findIndex(gu=>gu.id===Fu.id),eu=cs.findIndex(gu=>gu.id===ku.id);tu===-1||eu===-1||$a(tu,eu)},[$a,cs]),Tu=reactExports.useCallback(()=>{au(null)},[]);return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",fontFamily:FONT_FAMILY$4,background:"#252525"},children:[jsxRuntimeExports.jsxs("div",{style:{padding:"12px",background:"#252525",borderBottom:"1px solid #3a3a3a"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"13px",fontWeight:"600",color:"#333",marginBottom:"12px"},children:"Spaces"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"New space name",value:El,onChange:Fu=>Sl(Fu.target.value),onKeyDown:Fu=>{Fu.key==="Enter"&&Kl()},style:{flex:1,padding:"8px 10px",background:"#2b2b2b",color:"#ddd",border:"1px solid #3a3a3a",borderRadius:"6px",fontSize:"13px",fontFamily:FONT_FAMILY$4,outline:"none"},onFocus:Fu=>Fu.currentTarget.style.borderColor="#4A90E2",onBlur:Fu=>Fu.currentTarget.style.borderColor="#d0d0d0"}),jsxRuntimeExports.jsx("button",{onClick:Kl,style:{padding:"8px 12px",background:"#4A90E2",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:FONT_FAMILY$4},onMouseEnter:Fu=>Fu.currentTarget.style.background="#357abd",onMouseLeave:Fu=>Fu.currentTarget.style.background="#4A90E2",children:jsxRuntimeExports.jsx(Icon,{name:"plus",size:14,color:"#ffffff"})})]})]}),jsxRuntimeExports.jsx("div",{style:{flex:1,overflowY:"auto",padding:"8px"},children:cs.length===0?jsxRuntimeExports.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999",fontSize:"13px"},children:"No spaces yet. Create a space to filter pages by visibility."}):jsxRuntimeExports.jsxs(DndContext,{sensors:uu,collisionDetection:closestCenter,onDragStart:bu,onDragEnd:Cu,onDragCancel:Tu,children:[jsxRuntimeExports.jsx(SortableContext,{items:cs.map(Fu=>Fu.id),strategy:verticalListSortingStrategy,children:cs.map(Fu=>{var Pu,Lu;const ku=is===Fu.id,tu=Rl===Fu.id,eu=Pl.has(Fu.id),gu=((Pu=Fu.assignedPages)==null?void 0:Pu.length)||0,ru=((Lu=Fu.assignedPages)==null?void 0:Lu.reduce((Ju,Vu)=>{var Mu;return Ju+(((Mu=Vu.regions)==null?void 0:Mu.length)||0)},0))||0;return jsxRuntimeExports.jsx(SpaceSortableCard,{space:Fu,isActive:ku,isSelected:tu,isExpanded:eu,isEditing:Cl===Fu.id,editingName:Dl,pageSummary:fu(Fu.assignedPages),pageCount:gu,regionCount:ru,pageInputValue:Bl[Fu.id]||"",pageError:zl[Fu.id],onToggleExpand:Ul,onSpaceClick:Vl,onRenameClick:xu,onEditingNameChange:Ll,onSaveRename:pu,onCancelRename:Nl,onDelete:Ml,onExitSpace:Ql,onExportSpaceCSV:Ju=>xl==null?void 0:xl(Ju),onExportSpacePDF:Ju=>yl==null?void 0:yl(Ju),onPageInputChange:Jl,onAssignPages:iu,onRenameRegion:xa,onRequestRegionEdit:(Ju,Vu)=>ga==null?void 0:ga(Ju,Vu),onRemovePage:_u,isRegionSelectionActive:wl},Fu.id)})}),jsxRuntimeExports.jsx(DragOverlay,{children:lu&&jsxRuntimeExports.jsx(SpaceDragOverlay,{space:lu})})]})})]})},FONT_FAMILY$3='-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Segoe UI", Roboto, Ubuntu, "Noto Sans", Arial, sans-serif',PDFSidebar=({pdfDoc:cs,numPages:is,pageNum:us,onNavigateToPage:hs,onDuplicatePage:lo,onDeletePage:co,onCutPage:uo,onCopyPage:ga,onPastePage:ba,clipboardPage:xa,clipboardType:_a,onRotatePage:$a,onMirrorPage:xl,onResetPage:yl,onReorderPages:wl,pageTransformations:_l,bookmarks:El,onBookmarkCreate:Sl,onBookmarkUpdate:Cl,onBookmarkDelete:Tl,spaces:Dl,onSpaceCreate:Fl,onSpaceUpdate:Pl,onSpaceDelete:Al,activeSpaceId:Rl,onSetActiveSpace:Il,onExitSpaceMode:Bl,onRequestRegionEdit:Ol,onSpaceAssignPages:zl,onSpaceRenamePage:Hl,onSpaceRemovePage:ou,onReorderSpaces:au,onExportSpaceCSV:_c,onExportSpacePDF:uu,isRegionSelectionActive:lu,shouldShowPage:Kl,activeSpacePages:xu,scale:pu,tabId:Ll,onPageDrop:Nl,onToggleCollapse:Ml})=>{const[Ul,Vl]=reactExports.useState(!0),[Ql,Jl]=reactExports.useState("pages"),[iu,fu]=reactExports.useState(null),_u=reactExports.useCallback(()=>{Vl(Cu=>{const Tu=!Cu;return typeof Ml=="function"&&Ml(Tu),Tu})},[Ml]),bu=[{id:"pages",label:"Pages",icon:"pages"},{id:"search",label:"Search Text",icon:"search"},{id:"bookmarks",label:"Bookmarks",icon:"bookmark"},{id:"spaces",label:"Spaces",icon:"folder"}];return jsxRuntimeExports.jsxs("div",{style:{width:Ul?"48px":"280px",height:"100%",background:"#252525",borderRight:"1px solid #3a3a3a",display:"flex",flexDirection:"column",transition:"width 0.2s ease",flexShrink:0},children:[jsxRuntimeExports.jsx("div",{style:{padding:"8px",borderBottom:"1px solid #3a3a3a",display:"flex",justifyContent:"flex-end",background:"#252525"},children:jsxRuntimeExports.jsx("button",{onClick:_u,style:{background:"transparent",border:"none",color:"#999",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.15s ease"},onMouseEnter:Cu=>Cu.currentTarget.style.background="#333",onMouseLeave:Cu=>Cu.currentTarget.style.background="transparent",children:jsxRuntimeExports.jsx(Icon,{name:Ul?"chevronRight":"chevronLeft",size:16,color:"#999"})})}),!Ul&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #3a3a3a",background:"#252525",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},children:[jsxRuntimeExports.jsx("style",{children:`
              .sidebar-tabs::-webkit-scrollbar {
                display: none;
              }
            `}),bu.map(Cu=>jsxRuntimeExports.jsxs("button",{onClick:()=>Jl(Cu.id),style:{flex:1,padding:"10px 8px",background:Ql===Cu.id?"#2b2b2b":"transparent",border:"none",borderBottom:Ql===Cu.id?"2px solid #4A90E2":"2px solid transparent",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",fontSize:"11px",color:Ql===Cu.id?"#ddd":"#999",fontWeight:Ql===Cu.id?"500":"400",fontFamily:FONT_FAMILY$3,transition:"all 0.15s ease",whiteSpace:"nowrap",minWidth:"70px"},onMouseEnter:Tu=>{Ql!==Cu.id&&(Tu.currentTarget.style.background="#2b2b2b")},onMouseLeave:Tu=>{Ql!==Cu.id&&(Tu.currentTarget.style.background="transparent")},children:[jsxRuntimeExports.jsx(Icon,{name:Cu.icon,size:16,color:Ql===Cu.id?"#4A90E2":"#999"}),jsxRuntimeExports.jsx("span",{children:Cu.label})]},Cu.id))]}),jsxRuntimeExports.jsxs("div",{style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column",background:"#252525"},children:[Ql==="pages"&&jsxRuntimeExports.jsx(PagesPanel,{pdfDoc:cs,numPages:is,pageNum:us,onNavigateToPage:hs,onDuplicatePage:lo,onDeletePage:co,onCutPage:uo,onCopyPage:ga,onPastePage:ba,clipboardPage:xa,clipboardType:_a,onRotatePage:$a,onMirrorPage:xl,onResetPage:yl,onReorderPages:wl,pageTransformations:_l,shouldShowPage:Kl,activeSpacePages:xu,scale:pu,tabId:Ll,onPageDragStart:Nl?()=>{}:void 0}),Ql==="search"&&jsxRuntimeExports.jsx(SearchTextPanel,{pdfDoc:cs,numPages:is,onNavigateToPage:hs}),Ql==="bookmarks"&&jsxRuntimeExports.jsx(BookmarksPanel,{bookmarks:El,onBookmarkCreate:Sl,onBookmarkUpdate:Cl,onBookmarkDelete:Tl,onNavigateToPage:hs,pageNum:us,numPages:is}),Ql==="spaces"&&jsxRuntimeExports.jsx(SpacesPanel,{spaces:Dl,activeSpaceId:Rl,onSpaceCreate:Fl,onSpaceUpdate:Pl,onSpaceDelete:Al,onSetActiveSpace:Il,onExitSpaceMode:Bl,onRequestRegionEdit:Ol,onSpaceAssignPages:zl,onSpaceRenamePage:Hl,onSpaceRemovePage:ou,onReorderSpaces:au,onExportSpaceCSV:_c,onExportSpacePDF:uu,isRegionSelectionActive:lu,numPages:is})]})]}),Ul&&jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",padding:"8px",gap:"4px",background:"#252525",position:"relative"},children:bu.map(Cu=>jsxRuntimeExports.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>fu(Cu.id),onMouseLeave:()=>fu(null),children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Vl(!1),typeof Ml=="function"&&Ml(!1),Jl(Cu.id)},style:{background:"transparent",border:"none",borderRadius:"6px",padding:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.15s ease",minWidth:"28px",minHeight:"28px",width:"100%"},onMouseEnter:Tu=>{Tu.currentTarget.style.background="#2b2b2b"},onMouseLeave:Tu=>{Tu.currentTarget.style.background="transparent"},children:jsxRuntimeExports.jsx(Icon,{name:Cu.icon,size:20,color:"#999",style:{width:"20px",height:"20px",flexShrink:0}})}),iu===Cu.id&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"100%",top:"50%",transform:"translateY(-50%)",marginLeft:"8px",background:"#1a1a1a",color:"#ddd",padding:"6px 10px",borderRadius:"4px",fontSize:"12px",fontFamily:FONT_FAMILY$3,whiteSpace:"nowrap",zIndex:1e3,pointerEvents:"none",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",border:"1px solid #3a3a3a"},children:Cu.label})]},Cu.id))})]})},FONT_FAMILY$2='-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Segoe UI", Roboto, Ubuntu, "Noto Sans", Arial, sans-serif',MIN_REGION_SIZE=5,RegionSelectionTool=({active:cs,onRegionComplete:is,onCancel:us,currentSpaceId:hs,currentPageId:lo,scale:co=1,onSetFullPage:uo,canSetFullPage:ga=!1,initialRegions:ba=[]})=>{const[xa,_a]=reactExports.useState("rectangular"),[$a,xl]=reactExports.useState(!1),[yl,wl]=reactExports.useState(null),[_l,El]=reactExports.useState(null),[Sl,Cl]=reactExports.useState([]),[Tl,Dl]=reactExports.useState([]),[Fl,Pl]=reactExports.useState(null),[Al,Rl]=reactExports.useState(null),Il=reactExports.useRef(null),[Bl,Ol]=reactExports.useState(null),[zl,Hl]=reactExports.useState(!1),[ou,au]=reactExports.useState(null);reactExports.useEffect(()=>{const _u=document.getElementById("region-selection-target");Ol(_u)},[cs]),reactExports.useEffect(()=>{if(!cs||!Bl){au(null);return}const _u=()=>{const Cu=Bl.getBoundingClientRect();au({left:Cu.left,top:Cu.top,width:Cu.width,height:Cu.height})};_u();let bu=null;return typeof ResizeObserver=="function"&&(bu=new ResizeObserver(_u),bu.observe(Bl)),window.addEventListener("scroll",_u,!0),window.addEventListener("resize",_u),()=>{au(null),bu&&bu.disconnect(),window.removeEventListener("scroll",_u,!0),window.removeEventListener("resize",_u)}},[cs,Bl,co]),reactExports.useEffect(()=>{if(cs){const _u=(ba||[]).map(bu=>({...bu,coordinates:Array.isArray(bu.coordinates)?[...bu.coordinates]:[]}));Dl(_u)}else Dl([]);Pl(null),Rl(null),xl(!1),El(null),Cl([]),Hl(!1)},[cs,ba]),reactExports.useEffect(()=>{Cl([]),El(null),xl(!1),Rl(null),Hl(!1),xa!=="move"&&Pl(null)},[xa]),reactExports.useEffect(()=>{Tl.length===0&&(Pl(null),Rl(null))},[Tl.length]),reactExports.useEffect(()=>{if(xa!=="move"){console.log("[RegionSelectionTool] toolType changed away from move; clearing selection side-effects");return}Pl(_u=>{if(console.log("[RegionSelectionTool] ensuring region selected in move mode",{previousSelected:_u,regionCount:Tl.length}),_u&&Tl.some(Cu=>Cu.regionId===_u))return _u;const bu=Tl.length>0?Tl[0].regionId:null;return console.log("[RegionSelectionTool] auto-selecting region",{nextId:bu}),bu})},[xa,Tl]);const _c=reactExports.useMemo(()=>Tl.find(_u=>_u.regionId===Fl)||null,[Tl,Fl]),uu=reactExports.useCallback(_u=>{if(!_u||!Array.isArray(_u.coordinates)||_u.coordinates.length<4)return null;let bu=Number.POSITIVE_INFINITY,Cu=Number.POSITIVE_INFINITY,Tu=Number.NEGATIVE_INFINITY,Fu=Number.NEGATIVE_INFINITY;for(let ku=0;ku<_u.coordinates.length;ku+=2){const tu=_u.coordinates[ku],eu=_u.coordinates[ku+1];typeof tu!="number"||typeof eu!="number"||(tu<bu&&(bu=tu),tu>Tu&&(Tu=tu),eu<Cu&&(Cu=eu),eu>Fu&&(Fu=eu))}return!Number.isFinite(bu)||!Number.isFinite(Cu)||!Number.isFinite(Tu)||!Number.isFinite(Fu)?null:{minX:bu,minY:Cu,maxX:Tu,maxY:Fu}},[]),lu=reactExports.useCallback(_u=>{if(!_u)return null;if(_u.maxX-_u.minX<MIN_REGION_SIZE){const Tu=(_u.maxX+_u.minX)/2;_u.minX=Tu-MIN_REGION_SIZE/2,_u.maxX=Tu+MIN_REGION_SIZE/2}if(_u.maxY-_u.minY<MIN_REGION_SIZE){const Tu=(_u.maxY+_u.minY)/2;_u.minY=Tu-MIN_REGION_SIZE/2,_u.maxY=Tu+MIN_REGION_SIZE/2}return _u},[]),Kl=reactExports.useMemo(()=>[{key:"nw",cursor:"nwse-resize",offsetX:0,offsetY:0},{key:"n",cursor:"ns-resize",offsetX:.5,offsetY:0},{key:"ne",cursor:"nesw-resize",offsetX:1,offsetY:0},{key:"e",cursor:"ew-resize",offsetX:1,offsetY:.5},{key:"se",cursor:"nwse-resize",offsetX:1,offsetY:1},{key:"s",cursor:"ns-resize",offsetX:.5,offsetY:1},{key:"sw",cursor:"nesw-resize",offsetX:0,offsetY:1},{key:"w",cursor:"ew-resize",offsetX:0,offsetY:.5}],[]),xu=reactExports.useCallback(_u=>{if(!_u||!Array.isArray(_u.coordinates))return null;const bu=[];for(let Tu=0;Tu<_u.coordinates.length;Tu+=2){const Fu=_u.coordinates[Tu],ku=_u.coordinates[Tu+1];!Number.isFinite(Fu)||!Number.isFinite(ku)||bu.push({x:Fu*co,y:ku*co})}if(bu.length<2)return null;let Cu=`M ${bu[0].x} ${bu[0].y}`;for(let Tu=1;Tu<bu.length;Tu+=1)Cu+=` L ${bu[Tu].x} ${bu[Tu].y}`;return bu.length>2&&(Cu+=" Z"),Cu},[co]),pu=reactExports.useMemo(()=>{if(xa!=="freehand"||Sl.length<2)return null;const _u=Sl.map(Cu=>({x:Cu.x*co,y:Cu.y*co}));let bu=`M ${_u[0].x} ${_u[0].y}`;for(let Cu=1;Cu<_u.length;Cu+=1)bu+=` L ${_u[Cu].x} ${_u[Cu].y}`;return _u.length>2&&(bu+=" Z"),bu},[Sl,xa,co]),Ll=reactExports.useCallback(_u=>{if(!cs||!Bl)return;const bu=Bl.getBoundingClientRect();if(!(_u.clientX>=bu.left&&_u.clientX<=bu.right&&_u.clientY>=bu.top&&_u.clientY<=bu.bottom)||(Hl(!0),xa==="move"))return;const Tu=(_u.clientX-bu.left)/co,Fu=(_u.clientY-bu.top)/co;xa==="rectangular"?(xl(!0),wl({x:Tu,y:Fu}),El({x:Tu,y:Fu,width:0,height:0})):xa==="freehand"&&(xl(!0),Cl([{x:Tu,y:Fu}]))},[cs,Bl,xa,co]),Nl=reactExports.useCallback(_u=>{if(!cs||!Bl)return;const bu=Bl.getBoundingClientRect(),Cu=_u.clientX>=bu.left&&_u.clientX<=bu.right&&_u.clientY>=bu.top&&_u.clientY<=bu.bottom;if(Hl(Cu),!Cu&&!$a&&!Al)return;const Tu=(_u.clientX-bu.left)/co,Fu=(_u.clientY-bu.top)/co;if(Al){if(Al.type==="move"){const ku=Tu-Al.startPoint.x,tu=Fu-Al.startPoint.y;Dl(eu=>eu.map(gu=>{if(gu.regionId!==Al.regionId)return gu;const ru=Al.initialCoords.map((Pu,Lu)=>{const Ju=Lu%2===0;return Pu+(Ju?ku:tu)});return{...gu,coordinates:ru}}))}else if(Al.type==="resize"){const{handle:ku,initialBounds:tu,initialCoords:eu,regionId:gu}=Al;if(!tu)return;const ru={...tu};switch(ku){case"nw":ru.minX=Math.min(Tu,tu.maxX-MIN_REGION_SIZE),ru.minY=Math.min(Fu,tu.maxY-MIN_REGION_SIZE);break;case"n":ru.minY=Math.min(Fu,tu.maxY-MIN_REGION_SIZE);break;case"ne":ru.maxX=Math.max(Tu,tu.minX+MIN_REGION_SIZE),ru.minY=Math.min(Fu,tu.maxY-MIN_REGION_SIZE);break;case"e":ru.maxX=Math.max(Tu,tu.minX+MIN_REGION_SIZE);break;case"se":ru.maxX=Math.max(Tu,tu.minX+MIN_REGION_SIZE),ru.maxY=Math.max(Fu,tu.minY+MIN_REGION_SIZE);break;case"s":ru.maxY=Math.max(Fu,tu.minY+MIN_REGION_SIZE);break;case"sw":ru.minX=Math.min(Tu,tu.maxX-MIN_REGION_SIZE),ru.maxY=Math.max(Fu,tu.minY+MIN_REGION_SIZE);break;case"w":ru.minX=Math.min(Tu,tu.maxX-MIN_REGION_SIZE);break}lu(ru),Dl(Pu=>Pu.map(Lu=>{if(Lu.regionId!==gu)return Lu;if(Lu.shapeType==="rectangular")return{...Lu,coordinates:[ru.minX,ru.minY,ru.maxX,ru.minY,ru.maxX,ru.maxY,ru.minX,ru.maxY]};const Ju=Math.max(tu.maxX-tu.minX,1),Vu=Math.max(tu.maxY-tu.minY,1),Mu=ru.maxX-ru.minX,hp=ru.maxY-ru.minY,mp=Mu/Ju,Rp=hp/Vu,Lp=eu.reduce((Bp,Tp,Ip)=>{if(Ip%2===0){const Hp=Tp-tu.minX;Bp.push(ru.minX+Hp*mp)}else{const Hp=Tp-tu.minY;Bp.push(ru.minY+Hp*Rp)}return Bp},[]);return{...Lu,coordinates:Lp}}))}return}$a&&(xa==="rectangular"&&yl?El({x:Math.min(yl.x,Tu),y:Math.min(yl.y,Fu),width:Math.abs(Tu-yl.x),height:Math.abs(Fu-yl.y)}):xa==="freehand"&&Cl(ku=>[...ku,{x:Tu,y:Fu}]))},[cs,Bl,co,Al,lu,$a,xa,yl]),Ml=reactExports.useCallback(()=>{if(cs){if(Hl(!1),Al){Rl(null);return}if($a){if(xa==="rectangular"&&_l&&_l.width>MIN_REGION_SIZE&&_l.height>MIN_REGION_SIZE){const _u={regionId:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,pageId:lo,shapeType:"rectangular",coordinates:[_l.x,_l.y,_l.x+_l.width,_l.y,_l.x+_l.width,_l.y+_l.height,_l.x,_l.y+_l.height]};Dl(bu=>[...bu,_u])}else if(xa==="freehand"&&Sl.length>2){const _u={regionId:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,pageId:lo,shapeType:"polygon",coordinates:Sl.flatMap(bu=>[bu.x,bu.y])};Dl(bu=>[...bu,_u])}xl(!1),wl(null),El(null),Cl([])}}},[cs,Al,$a,xa,_l,Sl,lo]),Ul=reactExports.useCallback(()=>{if(!is)return;const _u=Tl.map(bu=>({...bu,coordinates:Array.isArray(bu.coordinates)?[...bu.coordinates]:[]}));is(_u),Dl([]),El(null),Cl([]),Pl(null),Rl(null)},[Tl,is]),Vl=reactExports.useCallback(()=>{typeof document<"u"&&document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),Dl([]),El(null),Cl([]),Pl(null),Rl(null),xl(!1),Hl(!1),us&&us()},[us]),Ql=reactExports.useCallback(()=>{uo&&(uo(),Vl())},[uo,Vl]),Jl=reactExports.useCallback((_u,bu)=>{if(!cs||xa!=="move"||!Bl)return;bu.stopPropagation(),bu.preventDefault();const Cu=Bl.getBoundingClientRect(),Tu=(bu.clientX-Cu.left)/co,Fu=(bu.clientY-Cu.top)/co;Pl(_u.regionId),Rl({type:"move",regionId:_u.regionId,startPoint:{x:Tu,y:Fu},initialCoords:[..._u.coordinates]})},[cs,xa,Bl,co]),iu=reactExports.useCallback((_u,bu,Cu)=>{if(!cs||xa!=="move"||!Bl)return;Cu.stopPropagation(),Cu.preventDefault();const Tu=uu(_u);Tu&&(Pl(_u.regionId),Rl({type:"resize",regionId:_u.regionId,handle:bu,initialBounds:{...Tu},initialCoords:[..._u.coordinates]}))},[cs,xa,Bl,uu]),fu=reactExports.useCallback(()=>{const _u=Tl.length>0?Tl[0].regionId:null,bu=Fl||_u;if(console.log("[RegionSelectionTool] delete requested",{selectedRegionId:Fl,fallbackRegionId:_u,targetRegionId:bu,regionCount:Tl.length}),!bu){console.log("[RegionSelectionTool] delete aborted, no target region available");return}let Cu=null;Dl(Tu=>{var tu;const Fu=Tu.length,ku=Tu.filter(eu=>eu.regionId!==bu);return Cu=((tu=ku.find(eu=>eu.regionId===Fl))==null?void 0:tu.regionId)??(ku.length>0?ku[0].regionId:null),console.log("[RegionSelectionTool] regions updated after deletion",{prevLength:Fu,nextLength:ku.length,nextSelectedId:Cu}),ku}),Pl(Cu),Rl(null),console.log("[RegionSelectionTool] delete handler completed",{interactionCleared:!0,nextSelectedId:Cu})},[Fl,Tl]);return reactExports.useEffect(()=>{if(!cs||!Bl)return;const _u=bu=>{Bl.contains(bu.target)||Il.current&&Il.current.contains(bu.target)||bu.target.closest('[data-region-selection-ui="true"]')||Vl()};return document.addEventListener("mousedown",_u),()=>{document.removeEventListener("mousedown",_u)}},[cs,Bl,Vl]),cs?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{"data-region-selection-ui":"true",style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",background:"#2b2b2b",border:"1px solid #555",borderRadius:"8px",padding:"12px",display:"flex",gap:"8px",alignItems:"center",zIndex:1001,boxShadow:"0 4px 12px rgba(0,0,0,0.5)",fontFamily:FONT_FAMILY$2},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"13px",color:"#fff",marginRight:"8px"},children:"Region Selection"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"4px",marginRight:"8px"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>_a("move"),className:`btn btn-sm ${xa==="move"?"btn-active":"btn-default"}`,style:{padding:"6px 12px"},children:[jsxRuntimeExports.jsx(Icon,{name:"pan",size:14,style:{marginRight:"4px"}}),"Select"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>_a("rectangular"),className:`btn btn-sm ${xa==="rectangular"?"btn-active":"btn-default"}`,style:{padding:"6px 12px"},children:[jsxRuntimeExports.jsx(Icon,{name:"rect",size:14,style:{marginRight:"4px"}}),"Rectangle"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>_a("freehand"),className:`btn btn-sm ${xa==="freehand"?"btn-active":"btn-default"}`,style:{padding:"6px 12px"},children:[jsxRuntimeExports.jsx(Icon,{name:"pen",size:14,style:{marginRight:"4px"}}),"Freehand"]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"4px"},children:[xa==="move"&&_c&&jsxRuntimeExports.jsx("button",{onClick:fu,className:"btn btn-default btn-sm",style:{padding:"6px 12px",background:"#611",color:"#fff",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",fontFamily:FONT_FAMILY$2},children:"Delete"}),ga&&jsxRuntimeExports.jsx("button",{onClick:Ql,className:"btn btn-default btn-sm",style:{padding:"6px 12px",background:"#555",color:"#fff",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",fontFamily:FONT_FAMILY$2},children:"Full Page"}),jsxRuntimeExports.jsxs("button",{onClick:Ul,className:"btn btn-primary btn-sm",style:{padding:"6px 12px"},children:["Confirm (",Tl.length,")"]}),jsxRuntimeExports.jsx("button",{onClick:Vl,className:"btn btn-default btn-sm",style:{padding:"6px 12px"},children:"Cancel"})]})]}),ou&&jsxRuntimeExports.jsxs("div",{ref:Il,style:{position:"fixed",left:`${ou.left}px`,top:`${ou.top}px`,width:`${ou.width}px`,height:`${ou.height}px`,zIndex:1e3,cursor:xa==="move"?"default":zl?"crosshair":"default"},onMouseDown:Ll,onMouseMove:Nl,onMouseUp:Ml,onMouseLeave:Ml,children:[jsxRuntimeExports.jsxs("svg",{width:ou.width,height:ou.height,style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:[xa==="rectangular"&&_l&&jsxRuntimeExports.jsx("rect",{x:_l.x*co,y:_l.y*co,width:_l.width*co,height:_l.height*co,fill:"rgba(74, 144, 226, 0.12)",stroke:"#4A90E2",strokeWidth:"2",strokeDasharray:"8 6"}),pu&&jsxRuntimeExports.jsx("path",{d:pu,fill:"rgba(74, 144, 226, 0.12)",stroke:"#4A90E2",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}),Tl.map(_u=>{const bu=xu(_u);if(!bu)return null;const Cu=_u.regionId===Fl;return jsxRuntimeExports.jsx("path",{d:bu,fill:Cu?"rgba(245, 166, 35, 0.18)":"rgba(74, 144, 226, 0.22)",stroke:Cu?"#F5A623":"#4A90E2",strokeWidth:Cu?2.5:2,style:{pointerEvents:"none"}},_u.regionId)})]}),xa==="move"&&Tl.map(_u=>{const bu=uu(_u);if(!bu)return null;const Cu=bu.minX*co,Tu=bu.minY*co,Fu=(bu.maxX-bu.minX)*co,ku=(bu.maxY-bu.minY)*co,tu=_u.regionId===Fl;return jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:`${Cu}px`,top:`${Tu}px`,width:`${Fu}px`,height:`${ku}px`,border:`2px ${tu?"solid":"dashed"} ${tu?"#F5A623":"#4A90E2"}`,background:tu?"rgba(245, 166, 35, 0.2)":"rgba(74, 144, 226, 0.2)",pointerEvents:xa==="move"?"auto":"none",zIndex:tu?1002:998,cursor:xa==="move"?"move":"default"},onMouseDown:xa==="move"?eu=>Jl(_u,eu):void 0,children:xa==="move"&&tu&&Kl.map(eu=>jsxRuntimeExports.jsx("div",{onMouseDown:gu=>iu(_u,eu.key,gu),style:{position:"absolute",left:`${eu.offsetX*100}%`,top:`${eu.offsetY*100}%`,transform:"translate(-50%, -50%)",width:"12px",height:"12px",borderRadius:"50%",background:"#F5A623",border:"2px solid #fff",cursor:eu.cursor}},eu.key))},_u.regionId)})]})]}):null},SpaceRegionOverlay=({pageNumber:cs,regions:is,width:us,height:hs,scale:lo=1})=>{const co=_a=>{if(!_a||!Array.isArray(_a.coordinates))return null;const $a=_a.coordinates;if(_a.shapeType==="rectangular"&&$a.length>=8){const xl=$a.map(yl=>yl*lo);return`M ${xl[0]} ${xl[1]} L ${xl[2]} ${xl[3]} L ${xl[4]} ${xl[5]} L ${xl[6]} ${xl[7]} Z`}if(_a.shapeType==="polygon"&&$a.length>=6){let xl=`M ${$a[0]*lo} ${$a[1]*lo}`;for(let yl=2;yl<$a.length;yl+=2){const wl=$a[yl]*lo,_l=$a[yl+1]*lo;xl+=` L ${wl} ${_l}`}return xl+=" Z",xl}return null},uo=reactExports.useMemo(()=>{if(!is||is.length===0)return null;const _a=us*lo,$a=hs*lo,xl=`M 0 0 H ${_a} V ${$a} H 0 Z`,yl=is.map(co).filter(Boolean).join(" ");return yl?`${xl} ${yl}`:null},[is,us,hs,lo]),ga=reactExports.useMemo(()=>`space-hatch-${cs}`,[cs]);if(!uo)return null;const ba=us*lo,xa=hs*lo;return jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,width:`${ba}px`,height:`${xa}px`,pointerEvents:"auto",zIndex:20},children:jsxRuntimeExports.jsxs("svg",{width:ba,height:xa,style:{position:"absolute",top:0,left:0},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("pattern",{id:ga,x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("path",{d:"M -2 2 L 2 -2",stroke:"#000",strokeWidth:"1"}),jsxRuntimeExports.jsx("path",{d:"M 0 10 L 10 0",stroke:"#000",strokeWidth:"1"}),jsxRuntimeExports.jsx("path",{d:"M 8 12 L 12 8",stroke:"#000",strokeWidth:"1"})]})}),jsxRuntimeExports.jsx("path",{d:uo,fill:"rgba(40, 40, 40, 0.55)",fillRule:"evenodd",pointerEvents:"auto"}),jsxRuntimeExports.jsx("path",{d:uo,fill:`url(#${ga})`,fillRule:"evenodd",opacity:.3,pointerEvents:"auto"})]})})},useDragToReorder=(cs,is,us={})=>{const{itemHeight:hs=null,gap:lo=1,dragHandleSelector:co="[data-drag-handle]",enabled:uo=!0}=us,[ga,ba]=reactExports.useState(null),[xa,_a]=reactExports.useState(null),$a=reactExports.useRef(null),xl=reactExports.useRef(new Map),yl=reactExports.useRef(null),wl=reactExports.useRef(null),_l=reactExports.useRef(new Map),El=reactExports.useRef(null),Sl=reactExports.useRef(null),Cl=reactExports.useCallback(Al=>{const Rl=xl.current.get(Al);return Rl?Rl.getBoundingClientRect().height:null},[]),Tl=reactExports.useCallback(Al=>{var Ol;const Rl=xl.current.get(Al);if(!Rl)return null;const Il=Rl.getBoundingClientRect(),Bl=(Ol=$a.current)==null?void 0:Ol.getBoundingClientRect();return Bl?{top:Il.top-Bl.top,left:Il.left-Bl.left,width:Il.width,height:Il.height,centerY:Il.top+Il.height/2-Bl.top}:null},[]),Dl=reactExports.useCallback(Al=>(El.current||cs.map((Il,Bl)=>({item:Il,index:Bl}))).filter(({item:Il})=>Il.id!==Al).map(({item:Il,index:Bl})=>{const Ol=Tl(Il.id);return Ol?{item:Il,index:Bl,metrics:Ol,midpointY:Ol.top+Ol.height/2}:null}).filter(Boolean),[cs,Tl]),Fl=reactExports.useCallback((Al,Rl)=>{var pu;if(!uo)return;const Il=xl.current.get(Rl);if(!Il)return;Al.preventDefault(),Al.stopPropagation();const Bl=Il.getBoundingClientRect(),Ol=(pu=$a.current)==null?void 0:pu.getBoundingClientRect();if(!Ol)return;const zl=Bl.top-Ol.top,Hl=Bl.left-Ol.left,ou=Bl.width,au=hs||Cl(Rl)||Bl.height,_c=Al.clientY-Bl.top,uu=cs.map((Ll,Nl)=>({item:Ll,index:Nl}));console.log("[DragToReorder] Grab started for item:",Rl),console.log("[DragToReorder] Initial items:",cs.map(Ll=>({id:Ll.id,name:Ll.name||"no name"}))),console.log("[DragToReorder] Initial order:",uu.map(Ll=>({id:Ll.item.id,index:Ll.index}))),_a(uu),El.current=uu,Sl.current=uu;const lu=document.createElement("div");lu.style.position="fixed",lu.style.left=`${Bl.left}px`,lu.style.top=`${Bl.top}px`,lu.style.width=`${ou}px`,lu.style.height=`${au}px`,lu.style.pointerEvents="none",lu.style.zIndex="10000",lu.style.transform="scale(1.05)",lu.style.transition="transform 0.1s ease-out",lu.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 0, 0, 0.1)",lu.style.opacity="0.95",lu.style.backgroundColor=window.getComputedStyle(Il).backgroundColor,lu.style.borderRadius=window.getComputedStyle(Il).borderRadius||"0px",lu.innerHTML=Il.innerHTML,document.body.appendChild(lu),yl.current=lu,Il.style.opacity="0",Il.style.visibility="hidden",Il.style.pointerEvents="none",Il.style.transition="opacity 0.1s",ba({itemId:Rl,startY:zl,startX:Hl,currentY:zl,grabOffsetY:_c,width:ou,height:au,originalIndex:cs.findIndex(Ll=>Ll.id===Rl)});const Kl=Ll=>{wl.current&&cancelAnimationFrame(wl.current),wl.current=requestAnimationFrame(()=>{var Vl;const Nl=(Vl=$a.current)==null?void 0:Vl.getBoundingClientRect();if(!Nl)return;const Ml=Ll.clientY-Nl.top-_c,Ul=Hl;ba(Ql=>{if(!Ql)return null;lu&&Nl&&(lu.style.left=`${Nl.left+Ul}px`,lu.style.top=`${Ll.clientY-_c}px`);const Jl=Ml+Ql.height/2,iu=Dl(Ql.itemId);let fu=[...El.current||cs.map((bu,Cu)=>({item:bu,index:Cu}))],_u=!1;if(iu.forEach(({item:bu,index:Cu,midpointY:Tu})=>{if(fu.findIndex(eu=>eu.item.id===bu.id)===-1)return;const ku=Ql.currentY+Ql.height/2<Tu,tu=Jl<Tu;if(ku!==tu){const eu=fu.findIndex(gu=>gu.item.id===Ql.itemId);if(eu!==-1){const[gu]=fu.splice(eu,1),ru=fu.findIndex(Pu=>Pu.item.id===bu.id);ru!==-1&&(console.log("[DragToReorder] Swapping: dragged item",Ql.itemId,"from index",eu,"to before item",bu.id,"at index",ru),fu.splice(ru,0,gu),_u=!0)}}}),_u){const bu=fu.map((Cu,Tu)=>({...Cu,index:Tu}));console.log("[DragToReorder] Order changed during drag. New order:",bu.map(Cu=>({id:Cu.item.id,index:Cu.index}))),_a(bu),El.current=bu,requestAnimationFrame(()=>{bu.forEach(({item:Cu,index:Tu})=>{var Pu;if(Cu.id===Ql.itemId)return;const Fu=xl.current.get(Cu.id);if(!Fu)return;const ku=Tl(Cu.id);if(!ku)return;let tu=0;for(let Lu=0;Lu<Tu;Lu++){const Ju=bu[Lu];if(Ju.item.id===Ql.itemId)continue;const Vu=hs||_l.current.get(Ju.item.id)||ku.height;tu+=Vu+lo}if(!((Pu=$a.current)==null?void 0:Pu.getBoundingClientRect()))return;const gu=ku.top,ru=tu-gu;Fu.style.transition="transform 0.2s cubic-bezier(0.2, 0, 0.2, 1)",Fu.style.transform=`translateY(${ru}px)`})})}return{...Ql,currentY:Ml}})})},xu=()=>{document.removeEventListener("mousemove",Kl),document.removeEventListener("mouseup",xu),wl.current&&cancelAnimationFrame(wl.current),yl.current&&(yl.current.style.transition="transform 0.3s cubic-bezier(0.2, 0, 0.2, 1), opacity 0.2s",yl.current.style.transform="scale(1)",yl.current.style.opacity="0",setTimeout(()=>{yl.current&&(yl.current.remove(),yl.current=null)},300));const Ll=xl.current.get(Rl);Ll&&(Ll.style.opacity="1",Ll.style.visibility="visible",Ll.style.pointerEvents="auto",Ll.style.transition="transform 0.3s cubic-bezier(0.2, 0, 0.2, 1), opacity 0.2s",Ll.style.transform="translateY(0)"),xl.current.forEach((Jl,iu)=>{iu!==Rl&&(Jl.style.transition="transform 0.3s cubic-bezier(0.2, 0, 0.2, 1)",Jl.style.transform="translateY(0)")});const Nl=El.current||Sl.current||cs.map((Jl,iu)=>({item:Jl,index:iu}));console.log("[DragToReorder] MouseUp - Final Order:",Nl);const Ml=Nl.sort((Jl,iu)=>Jl.index-iu.index).map(({item:Jl})=>Jl),Vl=(Sl.current||cs.map((Jl,iu)=>({item:Jl,index:iu}))).sort((Jl,iu)=>Jl.index-iu.index).map(({item:Jl})=>Jl.id),Ql=Ml.map(Jl=>Jl.id);console.log("[DragToReorder] Initial Order IDs (from drag start):",Vl),console.log("[DragToReorder] New Order IDs:",Ql),console.log("[DragToReorder] Order changed?",JSON.stringify(Vl)!==JSON.stringify(Ql)),console.log("[DragToReorder] Final ordered items:",Ml),JSON.stringify(Vl)!==JSON.stringify(Ql)?(console.log("[DragToReorder] Calling onReorder with:",Ml),is(Ml)):console.log("[DragToReorder] Order unchanged, not calling onReorder"),El.current=null,Sl.current=null,setTimeout(()=>{ba(null),_a(null),xl.current.forEach(Jl=>{Jl.style.transition="",Jl.style.transform=""})},300)};document.addEventListener("mousemove",Kl),document.addEventListener("mouseup",xu)},[uo,cs,hs,Cl,Tl,Dl,is,lo]),Pl=reactExports.useCallback((Al,Rl)=>{if(Rl){xl.current.set(Al,Rl);const Il=Rl.getBoundingClientRect().height;_l.current.set(Al,Il)}else xl.current.delete(Al),_l.current.delete(Al)},[]);return reactExports.useEffect(()=>()=>{yl.current&&yl.current.remove(),wl.current&&cancelAnimationFrame(wl.current)},[]),{draggingState:ga,virtualOrder:xa,handleGrab:Fl,registerItemRef:Pl,containerRef:$a}},FONT_FAMILY$1='-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Segoe UI", Roboto, Ubuntu, "Noto Sans", Arial, sans-serif',TabBar=({tabs:cs,activeTabId:is,onTabClick:us,onTabClose:hs,onTabReorder:lo,onPageDrop:co})=>{const[uo,ga]=reactExports.useState(null),ba=reactExports.useRef(null),xa=cs.filter(Dl=>!Dl.isHome),{draggingState:_a,virtualOrder:$a,handleGrab:xl,registerItemRef:yl,containerRef:wl}=useDragToReorder(xa,Dl=>{const Fl=cs.find(Pl=>Pl.isHome);lo(Fl?[Fl,...Dl]:Dl)},{itemHeight:40,gap:0,dragHandleSelector:"[data-tab-drag-handle]"}),_l=(()=>{const Dl=cs.find(Al=>Al.isHome);if(!Dl)return $a||xa.map((Al,Rl)=>({item:Al,index:Rl}));const Fl={item:Dl,index:0},Pl=$a||xa.map((Al,Rl)=>({item:Al,index:Rl+1}));return[Fl,...Pl]})(),El=(Dl,Fl)=>{Dl.stopPropagation(),hs(Fl)},Sl=(Dl,Fl)=>{Array.from(Dl.dataTransfer.types||[]).includes("application/pdf-page")&&(Dl.preventDefault(),Dl.stopPropagation(),Dl.dataTransfer.dropEffect="move",ga(Fl))},Cl=(Dl,Fl)=>{const Pl=Dl.relatedTarget;(!Pl||!Dl.currentTarget.contains(Pl))&&ga(null)},Tl=(Dl,Fl)=>{Dl.preventDefault(),Dl.stopPropagation(),ga(null);try{const Pl=Dl.dataTransfer.getData("application/pdf-page");if(!Pl)return;const Al=JSON.parse(Pl);if(Al.tabId===Fl)return;co&&co(Al.tabId,Al.pageNumber,Fl)}catch(Pl){console.error("Error handling page drop:",Pl)}};return jsxRuntimeExports.jsxs("div",{ref:ba,style:{display:"flex",background:"#1e1e1e",borderBottom:"1px solid #3a3a3a",overflowX:"auto",overflowY:"hidden",flexShrink:0,scrollbarWidth:"thin",scrollbarColor:"#555 #1e1e1e"},children:[jsxRuntimeExports.jsx("style",{children:`
        .tab-bar::-webkit-scrollbar {
          height: 6px;
        }
        .tab-bar::-webkit-scrollbar-track {
          background: #1e1e1e;
        }
        .tab-bar::-webkit-scrollbar-thumb {
          background: #555;
          border-radius: 3px;
        }
        .tab-bar::-webkit-scrollbar-thumb:hover {
          background: #666;
        }
      `}),jsxRuntimeExports.jsx("div",{ref:wl,className:"tab-bar",style:{display:"flex",minWidth:"100%",height:"40px"},children:_l.sort((Dl,Fl)=>Dl.item.isHome?-1:Fl.item.isHome?1:Dl.index-Fl.index).map(({item:Dl})=>{const Fl=Dl.id===is,Pl=(_a==null?void 0:_a.itemId)===Dl.id,Al=Dl.isHome;return jsxRuntimeExports.jsxs("div",{ref:Rl=>{Al||yl(Dl.id,Rl)},onClick:()=>us(Dl.id),onDragOver:Rl=>!Al&&Sl(Rl,Dl.id),onDragLeave:Rl=>!Al&&Cl(Rl,Dl.id),onDrop:Rl=>!Al&&Tl(Rl,Dl.id),style:{position:"relative",display:"flex",alignItems:"center",minWidth:Al?"240px":"200px",maxWidth:Al?"240px":"300px",width:Al?"240px":"auto",height:"40px",padding:"0 12px",background:uo===Dl.id?"#3a3a3a":Fl?"#2b2b2b":"#252525",borderRight:"1px solid #3a3a3a",borderTop:Fl||uo===Dl.id?"2px solid #4A90E2":"2px solid transparent",cursor:"pointer",userSelect:"none",opacity:Pl?.5:1,transition:"background 0.15s ease, border-color 0.15s ease",fontFamily:FONT_FAMILY$1,fontSize:"13px",color:Fl?"#ddd":"#999"},onMouseEnter:Rl=>{Fl||(Rl.currentTarget.style.background="#2a2a2a")},onMouseLeave:Rl=>{Fl||(Rl.currentTarget.style.background="#252525")},children:[!Al&&jsxRuntimeExports.jsx("div",{"data-tab-drag-handle":!0,onMouseDown:Rl=>{Rl.preventDefault(),Rl.stopPropagation(),xl(Rl,Dl.id)},style:{display:"flex",alignItems:"center",cursor:"grab",padding:"4px",marginRight:"8px",color:"#666",fontSize:"12px"},onMouseEnter:Rl=>{Rl.currentTarget.style.color="#999"},onMouseLeave:Rl=>{Rl.currentTarget.style.color="#666"},children:jsxRuntimeExports.jsx(Icon,{name:"grip",size:12})}),jsxRuntimeExports.jsx(Icon,{name:Al?"home":"document",size:14,style:{marginRight:"8px",flexShrink:0}}),jsxRuntimeExports.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:Fl?"500":"400"},title:Dl.name,children:Dl.name}),!Al&&jsxRuntimeExports.jsx("button",{onClick:Rl=>El(Rl,Dl.id),style:{marginLeft:"8px",padding:"4px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#666",transition:"all 0.15s ease",flexShrink:0},onMouseEnter:Rl=>{Rl.currentTarget.style.background="#3a3a3a",Rl.currentTarget.style.color="#ddd"},onMouseLeave:Rl=>{Rl.currentTarget.style.background="transparent",Rl.currentTarget.style.color="#666"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:12})})]},Dl.id)})})]})};class PageRenderCache{constructor(is=50){this.maxSize=is,this.cache=new Map,this.accessOrder=new Map}getCacheKey(is,us){return`${is}_${us.toFixed(2)}`}get(is,us){const hs=this.getCacheKey(is,us);return this.cache.has(hs)?(this.accessOrder.set(hs,Date.now()),this.cache.get(hs)):null}async set(is,us,hs,lo){const co=this.getCacheKey(is,us);let uo=null;try{uo=await createImageBitmap(hs)}catch(ba){console.warn("Failed to create ImageBitmap for page",is,ba)}const ga={bitmap:uo,viewport:lo,pageNumber:is,scale:us};if(this.cache.size>=this.maxSize&&!this.cache.has(co)){let ba=null,xa=1/0;for(const[_a,$a]of this.accessOrder.entries())$a<xa&&(xa=$a,ba=_a);if(ba){const _a=this.cache.get(ba);if(_a!=null&&_a.bitmap)try{_a.bitmap.close()}catch{}this.cache.delete(ba),this.accessOrder.delete(ba)}}return this.cache.set(co,ga),this.accessOrder.set(co,Date.now()),ga}has(is,us){const hs=this.getCacheKey(is,us);return this.cache.has(hs)}clear(){for(const is of this.cache.values())if(is!=null&&is.bitmap)try{is.bitmap.close()}catch{}this.cache.clear(),this.accessOrder.clear()}clearForScale(is){const us=[];for(const[hs,lo]of this.cache.entries())Math.abs(lo.scale-is)<.01&&us.push(hs);us.forEach(hs=>{const lo=this.cache.get(hs);if(lo!=null&&lo.bitmap)try{lo.bitmap.close()}catch{}this.cache.delete(hs),this.accessOrder.delete(hs)})}}const ZOOM_PREFERENCE_STORAGE_KEY="pdfViewerZoomPreference",ZOOM_MODES={FIT_PAGE:"fitPage",FIT_WIDTH:"fitWidth",FIT_HEIGHT:"fitHeight",MANUAL:"manual"},DEFAULT_ZOOM_PREFERENCES={mode:ZOOM_MODES.FIT_PAGE,manualScale:1},MIN_SCALE=.5,MAX_SCALE=5,SCALE_EPSILON=1e-4,clampScale=cs=>typeof cs!="number"||Number.isNaN(cs)?DEFAULT_ZOOM_PREFERENCES.manualScale:Math.min(Math.max(cs,MIN_SCALE),MAX_SCALE),isValidMode=cs=>Object.values(ZOOM_MODES).includes(cs),loadZoomPreferences=()=>{if(typeof window>"u")return{...DEFAULT_ZOOM_PREFERENCES};try{const cs=window.localStorage.getItem(ZOOM_PREFERENCE_STORAGE_KEY);if(!cs)return{...DEFAULT_ZOOM_PREFERENCES};const is=JSON.parse(cs),us=isValidMode(is==null?void 0:is.mode)?is.mode:DEFAULT_ZOOM_PREFERENCES.mode,hs=clampScale(is==null?void 0:is.manualScale);return{mode:us,manualScale:hs}}catch(cs){return console.warn("[zoomController] Failed to load zoom preferences:",cs),{...DEFAULT_ZOOM_PREFERENCES}}},saveZoomPreferences=cs=>{if(!(typeof window>"u"))try{const is={mode:isValidMode(cs==null?void 0:cs.mode)?cs.mode:DEFAULT_ZOOM_PREFERENCES.mode,manualScale:clampScale(cs==null?void 0:cs.manualScale)};window.localStorage.setItem(ZOOM_PREFERENCE_STORAGE_KEY,JSON.stringify(is))}catch(is){console.warn("[zoomController] Failed to save zoom preferences:",is)}},safeDivide=(cs,is)=>!is||Number.isNaN(is)||is===0?null:cs/is,computeScaleForMode=(cs,is,us)=>{if(!is||!us)return DEFAULT_ZOOM_PREFERENCES.manualScale;const hs=safeDivide(is.width,us.width),lo=safeDivide(is.height,us.height);switch(cs){case ZOOM_MODES.FIT_WIDTH:return clampScale(hs??DEFAULT_ZOOM_PREFERENCES.manualScale);case ZOOM_MODES.FIT_HEIGHT:return clampScale(lo??DEFAULT_ZOOM_PREFERENCES.manualScale);case ZOOM_MODES.FIT_PAGE:default:return hs===null&&lo===null?DEFAULT_ZOOM_PREFERENCES.manualScale:clampScale(hs===null?lo:lo===null?hs:Math.min(hs,lo))}};function createZoomController({initialMode:cs,initialManualScale:is,getContainer:us,getViewportSize:hs,getPageSize:lo,getCurrentScale:co,setScale:uo,onModeChange:ga,onManualScaleChange:ba,persistPreferences:xa}={}){let _a=isValidMode(cs)?cs:DEFAULT_ZOOM_PREFERENCES.mode,$a=clampScale(typeof is=="number"?is:DEFAULT_ZOOM_PREFERENCES.manualScale);const xl=(Sl,Cl)=>{typeof ga=="function"&&ga(Sl,Cl)},yl=(Sl,Cl)=>{typeof ba=="function"&&ba(Sl,Cl)},wl=(Sl={})=>{typeof xa=="function"&&xa({mode:_a,manualScale:$a,...Sl})},_l=(Sl,Cl={})=>(typeof uo=="function"&&uo(Sl,Cl),Sl),El={getMode:()=>_a,getManualScale:()=>$a,getScale:()=>typeof co=="function"?co():$a,setMode:(Sl,Cl={})=>{if(!isValidMode(Sl))return El.getScale();const Tl=Sl!==_a;if(_a=Sl,_a===ZOOM_MODES.MANUAL&&typeof Cl.scale=="number"){const Dl=clampScale(Cl.scale);Math.abs(Dl-$a)>SCALE_EPSILON&&($a=Dl,yl($a,Cl))}return Tl&&xl(_a,Cl),Cl.persist!==!1&&wl(),Cl.skipApply?El.getScale():El.applyZoom(Cl)},setScale:(Sl,Cl={})=>{const Tl=clampScale(Sl),Dl=_a!==ZOOM_MODES.MANUAL,Fl=Math.abs($a-Tl)>SCALE_EPSILON;return $a=Tl,_a=ZOOM_MODES.MANUAL,Fl&&yl($a,Cl),Dl&&xl(_a,Cl),Cl.persist!==!1&&wl(),_l($a,Cl)},applyZoom:(Sl={})=>{Sl.mode&&isValidMode(Sl.mode)&&El.setMode(Sl.mode,{...Sl,skipApply:!0});let Cl=$a;if(_a!==ZOOM_MODES.MANUAL){const Tl=typeof hs=="function"?hs(us==null?void 0:us()):null,Dl=typeof lo=="function"?lo():null;Cl=computeScaleForMode(_a,Tl,Dl)}else if(typeof Sl.scale=="number"){const Tl=clampScale(Sl.scale);Math.abs(Tl-$a)>SCALE_EPSILON&&($a=Tl,yl($a,Sl)),Cl=$a}return Sl.persist!==!1&&wl(),_l(Cl,Sl)}};return El}pdfExports.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfExports.version}/pdf.worker.min.js`;const FONT_FAMILY='-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Segoe UI", Roboto, Ubuntu, "Noto Sans", Arial, sans-serif',hexToRgba=(cs,is=.2)=>{cs=cs.replace("#","");const us=parseInt(cs.substring(0,2),16),hs=parseInt(cs.substring(2,4),16),lo=parseInt(cs.substring(4,6),16);return`rgba(${us}, ${hs}, ${lo}, ${is})`},ensureRgbaOpacity=(cs,is=.2)=>{if(!cs)return`rgba(227, 209, 251, ${is})`;if(cs.startsWith("rgba")){const us=cs.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(us)return`rgba(${us[1]}, ${us[2]}, ${us[3]}, ${is})`}return cs.startsWith("#")?hexToRgba(cs,is):`rgba(227, 209, 251, ${is})`},hexToRgb=cs=>{cs=cs.replace("#","");const is=parseInt(cs.substring(0,2),16),us=parseInt(cs.substring(2,4),16),hs=parseInt(cs.substring(4,6),16);return{r:is,g:us,b:hs}},getHexFromColor=cs=>{if(!cs)return null;if(cs.startsWith("rgba")){const is=cs.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(is){const us=parseInt(is[1]).toString(16).padStart(2,"0"),hs=parseInt(is[2]).toString(16).padStart(2,"0"),lo=parseInt(is[3]).toString(16).padStart(2,"0");return`#${us}${hs}${lo}`}}return cs.startsWith("#")?cs:null},getHexFromBallColor=cs=>{if(!cs)return"#E3D1FB";if(cs.startsWith("rgba")){const is=cs.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(is){const us=parseInt(is[1]).toString(16).padStart(2,"0"),hs=parseInt(is[2]).toString(16).padStart(2,"0"),lo=parseInt(is[3]).toString(16).padStart(2,"0");return`#${us}${hs}${lo}`}}return cs.startsWith("#")?cs:"#E3D1FB"},getOpacityFromBallColor=cs=>100,escapeCSVValue=cs=>{if(cs==null)return"";const is=String(cs);if(is==="")return"";const us=is.replace(/"/g,'""');return/[",\n]/.test(us)?`"${us}"`:us},sanitizeFilename=(cs,is="export")=>!cs||typeof cs!="string"?is:cs.trim().replace(/[^a-z0-9_-]+/gi,"_")||is,dataURLToUint8Array=cs=>{const is=cs.split(",")[1],us=atob(is),hs=us.length,lo=new Uint8Array(hs);for(let co=0;co<hs;co+=1)lo[co]=us.charCodeAt(co);return lo},traceRegionPath=(cs,is,us=1)=>{if(!cs||!is||!Array.isArray(is.coordinates)||is.coordinates.length<4)return!1;const hs=is.coordinates;cs.moveTo(hs[0]*us,hs[1]*us);for(let lo=2;lo<hs.length;lo+=2)cs.lineTo(hs[lo]*us,hs[lo+1]*us);return cs.closePath(),!0},applyRegionMaskToCanvasContext=(cs,is,us=1)=>{if(!cs||!Array.isArray(is)||is.length===0)return;cs.save(),cs.fillStyle="rgba(40, 40, 40, 0.55)",cs.fillRect(0,0,cs.canvas.width,cs.canvas.height),cs.globalCompositeOperation="destination-out",is.forEach(uo=>{cs.beginPath(),traceRegionPath(cs,uo,us)&&cs.fill()}),cs.globalCompositeOperation="source-over",cs.restore(),cs.save();const hs=document.createElement("canvas");hs.width=12,hs.height=12;const lo=hs.getContext("2d");lo.strokeStyle="rgba(0, 0, 0, 0.35)",lo.lineWidth=1,lo.beginPath(),lo.moveTo(0,12),lo.lineTo(12,0),lo.stroke(),lo.beginPath(),lo.moveTo(-4,12),lo.lineTo(8,0),lo.stroke();const co=cs.createPattern(hs,"repeat");co&&(cs.fillStyle=co,cs.globalAlpha=.35,cs.fillRect(0,0,cs.canvas.width,cs.canvas.height),cs.globalAlpha=1,cs.globalCompositeOperation="destination-out",is.forEach(uo=>{cs.beginPath(),traceRegionPath(cs,uo,us)&&cs.fill()}),cs.globalCompositeOperation="source-over"),cs.restore()},generateUniqueId=cs=>`${cs}-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,createCopyName=(cs,is)=>{const hs=(cs||"Untitled").trim().replace(/\s+\(Copy(?:\s+\d+)?\)$/i,"");let lo=`${hs} (Copy)`,co=2;for(;is.has(lo.toLowerCase());)lo=`${hs} (Copy ${co})`,co+=1;return is.add(lo.toLowerCase()),lo},normalizeName=cs=>typeof cs!="string"?"":cs.trim().toLowerCase(),hasNameConflict=(cs,is,{getName:us=uo=>uo==null?void 0:uo.name,getId:hs=uo=>uo==null?void 0:uo.id,ignoreId:lo,predicate:co}={})=>{if(!Array.isArray(cs))return!1;const uo=normalizeName(is);if(!uo)return!1;const ga=typeof lo<"u";return cs.some(ba=>{if(!ba||co&&!co(ba)||ga&&hs(ba)===lo)return!1;const xa=normalizeName(us(ba));return xa&&xa===uo})},ZOOM_MODE_LABELS={[ZOOM_MODES.FIT_PAGE]:"Fit Page",[ZOOM_MODES.FIT_WIDTH]:"Fit Width",[ZOOM_MODES.FIT_HEIGHT]:"Fit Height",[ZOOM_MODES.MANUAL]:"Manual %"},ZOOM_MODE_DESCRIPTIONS={[ZOOM_MODES.FIT_PAGE]:"Show the entire page within the viewport.",[ZOOM_MODES.FIT_WIDTH]:"Fill the viewer width. Scroll vertically for height.",[ZOOM_MODES.FIT_HEIGHT]:"Fill the viewer height. Horizontal scroll may appear.",[ZOOM_MODES.MANUAL]:"Use a specific zoom percentage."},ZOOM_MODE_OPTIONS=[{id:ZOOM_MODES.FIT_PAGE,label:ZOOM_MODE_LABELS[ZOOM_MODES.FIT_PAGE],description:ZOOM_MODE_DESCRIPTIONS[ZOOM_MODES.FIT_PAGE]},{id:ZOOM_MODES.FIT_WIDTH,label:ZOOM_MODE_LABELS[ZOOM_MODES.FIT_WIDTH],description:ZOOM_MODE_DESCRIPTIONS[ZOOM_MODES.FIT_WIDTH]},{id:ZOOM_MODES.FIT_HEIGHT,label:ZOOM_MODE_LABELS[ZOOM_MODES.FIT_HEIGHT],description:ZOOM_MODE_DESCRIPTIONS[ZOOM_MODES.FIT_HEIGHT]},{id:ZOOM_MODES.MANUAL,label:ZOOM_MODE_LABELS[ZOOM_MODES.MANUAL],description:ZOOM_MODE_DESCRIPTIONS[ZOOM_MODES.MANUAL]}],MANUAL_ZOOM_SESSION_KEY="pdfViewerManualZoomScale",TemplateDragOverlayItem=({label:cs})=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",borderRadius:"8px",border:"2px solid #4A90E2",background:"rgba(43, 43, 43, 0.92)",color:"#eaeaea",fontSize:"13px",fontWeight:500,boxShadow:"0 10px 26px rgba(0, 0, 0, 0.45)",backdropFilter:"blur(2px)"},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"16px",color:"#4A90E2"},children:""}),jsxRuntimeExports.jsx("span",{style:{whiteSpace:"nowrap"},children:cs})]}),TemplateModuleSortableRow=React.memo(function cs({module:is,isSelected:us,nameValue:hs,onToggleSelect:lo,onNameChange:co,onNameKeyDown:uo,disabled:ga}){const{attributes:ba,listeners:xa,setNodeRef:_a,transform:$a,transition:xl,isDragging:yl}=useSortable({id:is.id,disabled:ga}),wl={transform:CSS$1.Transform.toString($a),transition:xl||"transform 180ms cubic-bezier(0.2, 0, 0.2, 1)",width:"100%"};return jsxRuntimeExports.jsx("div",{ref:_a,style:wl,children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",padding:"4px 6px",borderRadius:"8px",background:yl?"rgba(58, 58, 58, 0.25)":"transparent",border:us?"1px solid rgba(74, 144, 226, 0.45)":"1px solid transparent",transition:"background 0.18s ease, border-color 0.18s ease"},children:[jsxRuntimeExports.jsx("div",{...ba,...xa,style:{cursor:ga?"default":yl?"grabbing":"grab",color:"#888",fontSize:"16px",userSelect:"none",padding:"4px",display:"flex",alignItems:"center",touchAction:"none"},"aria-label":"Drag to reorder module",children:""}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:us,onChange:()=>lo(is.id),style:{cursor:"pointer",width:"16px",height:"16px",flexShrink:0}}),jsxRuntimeExports.jsx("input",{type:"text",value:hs,onChange:_l=>co(is.id,_l.target.value),onKeyDown:_l=>uo(is.id,_l),style:{flex:1,padding:"6px 8px",borderRadius:"6px",border:"1px solid #4A90E2",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,fontSize:"13px",minWidth:0}})]})})}),BallInCourtSortableRow=React.memo(function cs({entity:is,selectedColorPickerId:us,onOpenColorPicker:hs,onNameChange:lo,onDelete:co,isAnyDragging:uo}){const{attributes:ga,listeners:ba,setNodeRef:xa,transform:_a,transition:$a,isDragging:xl}=useSortable({id:is.id}),yl={transform:CSS$1.Transform.toString(_a),transition:$a||"transform 180ms cubic-bezier(0.2, 0, 0.2, 1)",width:"100%"},wl=us===is.id,_l=getHexFromBallColor(is.color),El=getOpacityFromBallColor(is.color);return jsxRuntimeExports.jsx("div",{ref:xa,style:yl,children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 10px",background:"#1b1b1b",border:xl?"1px solid rgba(74, 144, 226, 0.6)":"1px solid #2f2f2f",borderRadius:"8px",boxShadow:xl?"0 8px 24px rgba(0, 0, 0, 0.45)":"none",opacity:xl?.65:1,transition:"border 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease"},children:[jsxRuntimeExports.jsx("div",{...ga,...ba,"data-ball-drag-handle":!0,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",borderRadius:"6px",background:"#1f1f1f",border:"1px solid #2d2d2d",cursor:xl?"grabbing":"grab",color:"#777",flexShrink:0,transition:"background 0.15s ease, color 0.15s ease, border 0.15s ease"},onMouseEnter:Sl=>{Sl.currentTarget.style.color="#bbb",Sl.currentTarget.style.background="#262626",Sl.currentTarget.style.border="1px solid #3a3a3a"},onMouseLeave:Sl=>{Sl.currentTarget.style.color="#777",Sl.currentTarget.style.background="#1f1f1f",Sl.currentTarget.style.border="1px solid #2d2d2d"},title:"Drag to reorder",children:jsxRuntimeExports.jsx(Icon,{name:"grip",size:11})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flex:1},children:[jsxRuntimeExports.jsx("div",{"data-color-picker-area":!0,style:{display:"flex",gap:"8px",alignItems:"center"},children:jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"32px",border:wl?"2px solid #4A90E2":"1px solid #2f2f2f",borderRadius:"6px",cursor:"pointer",position:"relative",boxSizing:"border-box",overflow:"hidden",background:"#ffffff"},onClick:Sl=>{Sl.stopPropagation(),hs(is.id,_l,El)},children:jsxRuntimeExports.jsx("div",{style:{position:"absolute",inset:0,background:is.color||"rgba(227, 209, 251, 0.2)",borderRadius:"5px"}})})}),jsxRuntimeExports.jsx("input",{type:"text",value:is.name,onChange:Sl=>lo(is.id,Sl.target.value),placeholder:"Entity name (e.g., GC, Subcontractor)",style:{flex:1,padding:"6px 8px",background:"#141414",color:"#ddd",border:"1px solid #2f2f2f",borderRadius:"6px",outline:"none",fontSize:"13px"}})]}),jsxRuntimeExports.jsx("button",{"data-ball-delete":!0,onClick:co,title:"Delete",className:"btn btn-danger btn-icon-only btn-sm",style:{padding:"6px",minWidth:"28px",minHeight:"28px",flexShrink:0,display:uo?"none":"flex"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:11})})]})})}),BallInCourtDragOverlayItem=({entity:cs})=>cs?jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",borderRadius:"8px",border:"2px solid #4A90E2",background:"rgba(43, 43, 43, 0.92)",color:"#eaeaea",fontSize:"13px",fontWeight:500,boxShadow:"0 10px 26px rgba(0, 0, 0, 0.45)",backdropFilter:"blur(2px)"},children:[jsxRuntimeExports.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",borderRadius:"6px",background:"#1f1f1f",border:"1px solid #2d2d2d",color:"#bbb"},children:jsxRuntimeExports.jsx(Icon,{name:"grip",size:11})}),jsxRuntimeExports.jsx("span",{style:{width:"32px",height:"20px",borderRadius:"5px",background:cs.color||"rgba(227, 209, 251, 0.2)",border:"1px solid rgba(255, 255, 255, 0.12)"}}),jsxRuntimeExports.jsx("span",{style:{whiteSpace:"nowrap"},children:cs.name||"Entity"})]}):null,TemplateCategorySortableRow=React.memo(function cs({category:is,isSelected:us,nameValue:hs,onToggleSelect:lo,onNameChange:co,onNameKeyDown:uo,disabled:ga}){const{attributes:ba,listeners:xa,setNodeRef:_a,transform:$a,transition:xl,isDragging:yl}=useSortable({id:is.id,disabled:ga}),wl={transform:CSS$1.Transform.toString($a),transition:xl||"transform 180ms cubic-bezier(0.2, 0, 0.2, 1)",width:"100%"};return jsxRuntimeExports.jsx("div",{ref:_a,style:wl,children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",padding:"4px 6px",borderRadius:"8px",background:yl?"rgba(58, 58, 58, 0.25)":"transparent",border:us?"1px solid rgba(74, 144, 226, 0.45)":"1px solid transparent",transition:"background 0.18s ease, border-color 0.18s ease"},children:[jsxRuntimeExports.jsx("div",{...ba,...xa,style:{cursor:ga?"default":yl?"grabbing":"grab",color:"#888",fontSize:"16px",userSelect:"none",padding:"4px",display:"flex",alignItems:"center",touchAction:"none"},"aria-label":"Drag to reorder category",children:""}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:us,onChange:()=>lo(is.id),style:{cursor:"pointer",width:"16px",height:"16px",flexShrink:0}}),jsxRuntimeExports.jsx("input",{type:"text",value:hs,onChange:_l=>co(is.id,_l.target.value),onKeyDown:_l=>uo(is.id,_l),style:{flex:1,padding:"6px 8px",borderRadius:"6px",border:"1px solid #4A90E2",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,fontSize:"13px",minWidth:0}})]})})}),rgbToHsl=(cs,is,us)=>{cs/=255,is/=255,us/=255;const hs=Math.max(cs,is,us),lo=Math.min(cs,is,us);let co,uo,ga=(hs+lo)/2;if(hs===lo)co=uo=0;else{const ba=hs-lo;switch(uo=ga>.5?ba/(2-hs-lo):ba/(hs+lo),hs){case cs:co=((is-us)/ba+(is<us?6:0))/6;break;case is:co=((us-cs)/ba+2)/6;break;case us:co=((cs-is)/ba+4)/6;break}}return{h:co*360,s:uo*100,l:ga*100}},hslToRgb=(cs,is,us)=>{cs/=360,is/=100,us/=100;let hs,lo,co;if(is===0)hs=lo=co=us;else{const uo=(xa,_a,$a)=>($a<0&&($a+=1),$a>1&&($a-=1),$a<.16666666666666666?xa+(_a-xa)*6*$a:$a<.5?_a:$a<.6666666666666666?xa+(_a-xa)*(.6666666666666666-$a)*6:xa),ga=us<.5?us*(1+is):us+is-us*is,ba=2*us-ga;hs=uo(ba,ga,cs+1/3),lo=uo(ba,ga,cs),co=uo(ba,ga,cs-1/3)}return{r:Math.round(hs*255),g:Math.round(lo*255),b:Math.round(co*255)}},generateColorSwatches=()=>{const cs=[];return cs.push("#FF0000","#CC0000","#990000","#660000","#FF3366","#FF6699","#FF99CC","#CC0066"),cs.push("#FFFF00","#FFCC00","#FF9900","#FF6600","#CC6600","#996600","#CC9900","#FFCC66"),cs.push("#00FF00","#00CC00","#00FF66","#66FF00","#33CC00","#00CC66","#009900","#006600"),cs.push("#0000FF","#0066FF","#0099FF","#00CCFF","#00FFFF","#0066CC","#6600CC","#0000CC"),cs.push("#000000","#333333","#666666","#999999","#CCCCCC","#FFFFFF","#E3D1FB","#CBDCFF"),cs},generateUUID=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,getPDFId=cs=>cs?`${cs.name}-${cs.size}`:null,loadPDFData=cs=>{if(!cs)return{items:{},annotations:{}};try{const is=localStorage.getItem(`pdfData_${cs}`);if(!is)return{items:{},annotations:{}};const us=JSON.parse(is);return{items:us.items||{},annotations:us.annotations||{}}}catch(is){return console.error("Error loading PDF data:",is),{items:{},annotations:{}}}},savePDFData=(cs,is,us)=>{if(cs)try{const hs={items:is,annotations:us};localStorage.setItem(`pdfData_${cs}`,JSON.stringify(hs))}catch(hs){console.error("Error saving PDF data:",hs)}},saveHighlightAnnotations=(cs,is)=>{if(cs)try{const us=`highlightAnnotations_${cs}`,hs=JSON.stringify(is);localStorage.setItem(us,hs),console.log("Successfully saved highlightAnnotations to localStorage:",{key:us,size:hs.length})}catch(us){console.error("Error saving highlight annotations:",us)}},loadHighlightAnnotations=cs=>{if(!cs)return{};try{const is=localStorage.getItem(`highlightAnnotations_${cs}`);return is?JSON.parse(is):{}}catch(is){return console.error("Error loading highlight annotations:",is),{}}},getModuleName=(cs,is)=>{var hs;const us=(hs=cs==null?void 0:cs.modules)==null?void 0:hs.find(lo=>lo.id===is);return(us==null?void 0:us.name)||"Unknown Module"},getCategoryName=(cs,is,us)=>{var co,uo;const hs=(co=cs==null?void 0:cs.modules)==null?void 0:co.find(ga=>ga.id===is),lo=(uo=hs==null?void 0:hs.categories)==null?void 0:uo.find(ga=>ga.id===us);return(lo==null?void 0:lo.name)||"Unknown Category"},escapeRegExp=(cs="")=>cs.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),generateDefaultHighlightName=(cs,is=[])=>{const us=cs.trim()?cs.trim():"Untitled Category",hs=new RegExp(`^${escapeRegExp(us)}\\s+(\\d+)$`,"i");let lo=0;return is.forEach(co=>{const uo=((co==null?void 0:co.name)||"").trim(),ga=hs.exec(uo);if(ga){const ba=parseInt(ga[1],10);Number.isNaN(ba)||(lo=Math.max(lo,ba))}}),`${us} ${lo+1}`},getItemType=(cs,is,us)=>getCategoryName(cs,is,us),createItem=(cs,is,us,hs,lo=1)=>{const co=generateUUID(),uo=getItemType(cs,is,us);getModuleName(cs,is);const ga={};return cs!=null&&cs.modules&&cs.modules.forEach(ba=>{ga[`${ba.name.toLowerCase()}Data`]={}}),{itemId:co,itemType:uo,name:hs,quantity:lo,...ga}},createAnnotation=(cs,is,us,hs,lo,co)=>{const uo=generateUUID(),ga={};return us!=null&&us.modules&&us.modules.forEach(ba=>{ga[`${ba.name.toLowerCase()}Data`]={}}),{annotationId:uo,pdfCoordinates:cs,displayType:is,moduleId:hs,itemId:lo||null,itemType:co||null,notesData:ga}},getModuleDataKey=cs=>`${cs.toLowerCase().replace(/\s+/g,"")}Data`,getCategoryItems=(cs,is,us,hs)=>{const lo=getCategoryName(hs,is,us);return Object.values(cs).filter(co=>co.itemType===lo)},filterAnnotationsByModule=(cs,is)=>Object.fromEntries(Object.entries(cs).filter(([us,hs])=>hs.moduleId===is)),categoryExists=(cs,is,us)=>{var lo;const hs=(lo=cs==null?void 0:cs.modules)==null?void 0:lo.find(co=>co.id===is);return!hs||!hs.categories?!1:hs.categories.some(co=>co.name===us)},transferItems=(cs,is,us,hs,lo,co)=>{const uo={...lo},ga={...co},ba={};cs.forEach(_a=>{const $a=lo[_a];if(!$a)return;const xl=$a.itemType;ba[xl]||(ba[xl]=[]),ba[xl].push($a)});const xa=[];return Object.keys(ba).forEach(_a=>{categoryExists(hs,us,_a)||xa.push({itemType:_a,items:ba[_a]})}),Object.keys(ba).forEach(_a=>{var $a,xl;if(categoryExists(hs,us,_a)){const yl=($a=hs==null?void 0:hs.modules)==null?void 0:$a.find(_l=>_l.id===us),wl=(xl=yl==null?void 0:yl.categories)==null?void 0:xl.find(_l=>_l.name===_a);wl!=null&&wl.id,ba[_a].forEach(_l=>{const El=getModuleName(hs,us),Sl=getModuleDataKey(El);uo[_l.itemId]={..._l,[Sl]:{_initialized:!0}};const Cl=Object.values(co).find(Tl=>Tl.itemId===_l.itemId&&Tl.moduleId===is);if(Cl){const Tl=createAnnotation(Cl.pdfCoordinates,Cl.displayType||"highlight",hs,us,_l.itemId,_a);ga[Tl.annotationId]=Tl}else{const Tl=createAnnotation(null,"highlight",hs,us,_l.itemId,_a);ga[Tl.annotationId]=Tl}})}}),{newItems:uo,updatedAnnotations:ga,categoriesToCreate:xa}},migrateLegacyHighlights=(cs,is,us,hs)=>{const lo={...is},co={...us};return Object.values(cs).forEach(uo=>{const ga=getCategoryName(hs,uo.moduleId,uo.categoryId),ba=Object.values(lo).find(xa=>xa.name===uo.name&&xa.itemType===ga&&uo.moduleId);if(ba){if(!Object.values(co).find(_a=>_a.itemId===ba.itemId&&_a.moduleId===uo.moduleId)){const _a=createAnnotation(uo.bounds,"highlight",hs,uo.moduleId,ba.itemId,ga);co[_a.annotationId]=_a}}else{const xa=createItem(hs,uo.moduleId,uo.categoryId,uo.name||"Untitled Item",1),_a=getModuleName(hs,uo.moduleId),$a=getModuleDataKey(_a);xa[$a]=uo.checklistResponses||{};const xl=createAnnotation(uo.bounds,"highlight",hs,uo.moduleId,xa.itemId,ga);lo[xa.itemId]=xa,co[xl.annotationId]=xl}}),{items:lo,annotations:co}};function PDFThumbnail({dataUrl:cs,docId:is}){const[us,hs]=reactExports.useState(null),[lo,co]=reactExports.useState(!0);return reactExports.useEffect(()=>{(async()=>{if(!cs){co(!1);return}try{const ba=await(await fetch(cs)).arrayBuffer(),$a=await(await pdfExports.getDocument({data:ba}).promise).getPage(1),xl=$a.getViewport({scale:.3}),yl=document.createElement("canvas"),wl=yl.getContext("2d");yl.width=xl.width,yl.height=xl.height,await $a.render({canvasContext:wl,viewport:xl}).promise;const _l=yl.toDataURL("image/jpeg",.85);hs(_l)}catch(ga){console.error("Error generating thumbnail:",ga),hs(null)}finally{co(!1)}})()},[cs,is]),lo?jsxRuntimeExports.jsx("div",{style:{fontSize:"48px",height:"64px",display:"flex",alignItems:"center",justifyContent:"center",opacity:.5},children:jsxRuntimeExports.jsx(Icon,{name:"document",size:32,color:"currentColor"})}):us?jsxRuntimeExports.jsx("img",{src:us,alt:"PDF thumbnail",style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}):jsxRuntimeExports.jsx("div",{style:{height:"64px",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx(Icon,{name:"document",size:48,color:"currentColor"})})}const Dashboard=reactExports.forwardRef(function cs({onDocumentSelect:is,onBack:us,documents:hs,setDocuments:lo,templates:co=[],onTemplatesChange:uo},ga){var Bx,mx,Ux,Im,zx,Wx;const ba=reactExports.useRef(),xa=reactExports.useRef(),[_a,$a]=reactExports.useState(!1),[xl,yl]=reactExports.useState(!1),[wl,_l]=reactExports.useState(!1),[El,Sl]=reactExports.useState(""),[Cl,Tl]=reactExports.useState("personal"),[Dl,Fl]=reactExports.useState([]),[Pl,Al]=reactExports.useState(null),[Rl,Il]=reactExports.useState(null),[Bl,Ol]=reactExports.useState(!1),[zl,Hl]=reactExports.useState(""),[ou,au]=reactExports.useState(!1),[_c,uu]=reactExports.useState(""),[lu,Kl]=reactExports.useState(!1),[xu,pu]=reactExports.useState(!1),[Ll,Nl]=reactExports.useState({}),[Ml,Ul]=reactExports.useState({}),[Vl,Ql]=reactExports.useState([]),[Jl,iu]=reactExports.useState([]),[fu,_u]=reactExports.useState([]),bu=reactExports.useRef(null),[Cu,Tu]=reactExports.useState(!1),[Fu,ku]=reactExports.useState(null),[tu,eu]=reactExports.useState("copy"),[gu,ru]=reactExports.useState([{id:`entity-${Date.now()}-1`,name:"GC",color:"#E3D1FB"},{id:`entity-${Date.now()}-2`,name:"Subcontractor",color:"#FFF5C3"},{id:`entity-${Date.now()}-3`,name:"My Company",color:"#CBDCFF"},{id:`entity-${Date.now()}-4`,name:"100% Complete",color:"#B2FFB2"},{id:`entity-${Date.now()}-5`,name:"Removed",color:"#BBBBBB"}].map(Yl=>({...Yl,color:hexToRgba(Yl.color,.2)}))),[Pu,Lu]=reactExports.useState(null),[Ju,Vu]=reactExports.useState("grid"),[Mu,hp]=reactExports.useState(null),[mp,Rp]=reactExports.useState(null),[Lp,Bp]=reactExports.useState(!1),Tp=useSensors(useSensor(PointerSensor,{activationConstraint:{distance:6}})),[Ip,Hp]=reactExports.useState(null),qp=reactExports.useMemo(()=>gu.find(Yl=>Yl.id===Ip)||null,[Ip,gu]),lp=reactExports.useCallback(({active:Yl})=>{Hp(Yl.id)},[]),$u=reactExports.useCallback(({active:Yl,over:nu})=>{Hp(null),!(!nu||Yl.id===nu.id)&&ru(ju=>{const Wu=ju.findIndex(Xu=>Xu.id===Yl.id),Bu=ju.findIndex(Xu=>Xu.id===nu.id);return Wu===-1||Bu===-1?ju:arrayMove(ju,Wu,Bu)})},[]),Zu=reactExports.useCallback(()=>{Hp(null)},[]),Ap=!!Ip;reactExports.useEffect(()=>(Ap?document.body.classList.add("ball-in-court-dragging"):document.body.classList.remove("ball-in-court-dragging"),()=>{document.body.classList.remove("ball-in-court-dragging")}),[Ap]);const[Np,Vp]=reactExports.useState(""),[Ru,Qu]=reactExports.useState([]),[up,Ep]=reactExports.useState(!1),[Cp,Sp]=reactExports.useState({key:"uploadedAt",direction:"desc"}),[vu,Zl]=reactExports.useState(""),[Ou,Du]=reactExports.useState("grid"),[$l,Au]=reactExports.useState("documents"),[Eu,_f]=reactExports.useState([]),[qu,Xl]=reactExports.useState([]),du=qu,su=reactExports.useRef(!1),cu=reactExports.useCallback(Yl=>{Xl(nu=>{const ju=typeof Yl=="function"?Yl(nu):Yl,Wu=Array.isArray(ju)?ju:[];return su.current||setTimeout(()=>uo==null?void 0:uo(Wu),0),Wu})},[uo]);reactExports.useEffect(()=>{Array.isArray(co)&&(su.current=!0,Xl(Yl=>Yl===co?Yl:co),setTimeout(()=>{su.current=!1},0))},[co]);const[hu,wu]=reactExports.useState(null),[Nu,tp]=reactExports.useState(null),[Yu,zu]=reactExports.useState(null),rp={width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},dp={fontSize:"14px",fontWeight:"500",lineHeight:"20px"},[Ku,vp]=reactExports.useState(!1),[fp,Op]=reactExports.useState([]),[Kp,s0]=reactExports.useState(!1),r0=reactExports.useRef(null);reactExports.useEffect(()=>{try{const Yl=JSON.parse(localStorage.getItem("projects")||"[]");_f(Array.isArray(Yl)?Yl:[])}catch{}try{const Yl=JSON.parse(localStorage.getItem("templates")||"[]");cu(Array.isArray(Yl)?Yl:[])}catch{}try{const Yl=localStorage.getItem("dashboardViewMode");(Yl==="grid"||Yl==="table")&&Du(Yl)}catch{}},[cu]),reactExports.useEffect(()=>{try{localStorage.setItem("dashboardViewMode",Ou)}catch{}},[Ou]),reactExports.useEffect(()=>{const Yl=nu=>{r0.current&&!r0.current.contains(nu.target)&&s0(!1)};return Kp&&document.addEventListener("mousedown",Yl),()=>{document.removeEventListener("mousedown",Yl)}},[Kp]),reactExports.useEffect(()=>{Il(null)},[Pl]);const u0=Yl=>{var ju;const nu=(ju=Yl.target.files)==null?void 0:ju[0];if(console.log("handleFileUpload called, file:",nu),nu&&nu.type==="application/pdf"){console.log("File is valid PDF, name:",nu.name,"size:",nu.size);const Wu={id:Date.now(),name:nu.name,size:nu.size,uploadedAt:new Date().toISOString(),type:nu.type},Bu=new FileReader;Bu.onload=Xu=>{const ip={...Wu,dataUrl:Xu.target.result};if(hu&&$l==="projects"){const cp=Eu.find(yp=>yp.id===hu);if(cp){const yp={...cp,pdfs:[ip,...cp.pdfs||[]]},op=Eu.map(_p=>_p.id===cp.id?yp:_p);i0(op)}}else lo(cp=>[ip,...cp])},Bu.readAsDataURL(nu),console.log("Calling onDocumentSelect with file:",nu),is(nu)}else console.log("File is not a valid PDF or no file selected");Yl.target.value=""},l0=()=>{Vp(""),Qu([]),Ep(!1),$a(!0)},em=Yl=>{const nu=Array.from(Yl.target.files||[]);Yl.target.value="";const ju=nu.filter(Wu=>Wu.type==="application/pdf");Qu(Wu=>[...Wu,...ju])},Wp=Yl=>{var Wu;Yl.preventDefault(),Yl.stopPropagation(),Ep(!1);const ju=Array.from(((Wu=Yl.dataTransfer)==null?void 0:Wu.files)||[]).filter(Bu=>Bu.type==="application/pdf");Qu(Bu=>[...Bu,...ju])},y0=Yl=>{Yl.preventDefault(),Yl.stopPropagation(),Ep(!0)},lm=Yl=>{Yl.preventDefault(),Yl.stopPropagation(),Ep(!1)},d0=async(Yl,nu)=>{const ju=yp=>new Promise((op,_p)=>{const Mp=new FileReader;Mp.onload=()=>op(Mp.result),Mp.onerror=_p,Mp.readAsDataURL(yp)}),Wu=Yl.trim();if(hasNameConflict(Eu,Wu,{getName:yp=>yp==null?void 0:yp.name})){const yp=new Error("A project with this name already exists. Please choose a different name.");throw yp.code="DUPLICATE_PROJECT_NAME",yp}const Bu=await Promise.all(nu.map(async(yp,op)=>{const _p=await ju(yp);return{id:`${Date.now()}-${op}`,name:yp.name,size:yp.size,type:yp.type,uploadedAt:new Date().toISOString(),dataUrl:_p}})),Xu={id:`${Date.now()}`,name:Yl.trim(),createdAt:new Date().toISOString(),pdfs:Bu},ip=localStorage.getItem("projects");let cp=[];try{cp=ip?JSON.parse(ip):[]}catch{}if(hasNameConflict(cp,Wu,{getName:yp=>yp==null?void 0:yp.name})){const yp=new Error("A project with this name already exists. Please choose a different name.");throw yp.code="DUPLICATE_PROJECT_NAME",yp}cp.unshift(Xu),localStorage.setItem("projects",JSON.stringify(cp)),lo(yp=>[...Bu,...yp]),_f(yp=>[Xu,...yp])},F0=async()=>{if(!Np.trim()){alert("Please enter a project name.");return}const Yl=Np.trim();if(hasNameConflict(Eu,Yl,{getName:nu=>nu==null?void 0:nu.name})){alert("A project with this name already exists. Please choose a different name.");return}if(Ru.length===0){alert("Please add at least one PDF.");return}try{await d0(Yl,Ru),$a(!1),Vp(""),Qu([])}catch(nu){if((nu==null?void 0:nu.code)==="DUPLICATE_PROJECT_NAME"){alert(nu.message);return}console.error("Error creating project:",nu),alert("There was an error creating the project. Please try again.")}},mm=()=>{$a(!1)},h0=()=>$l==="projects"?hu?"projectFiles":"projects":$l==="templates"?Nu?"templateFiles":"templates":"documents",Fx=()=>{var nu,ju;const Yl=h0();return Yl==="documents"?g0:Yl==="projects"?B0:Yl==="projectFiles"?((nu=Eu.find(Wu=>Wu.id===hu))==null?void 0:nu.pdfs)||[]:Yl==="templates"?tx:Yl==="templateFiles"?((ju=du.find(Wu=>Wu.id===Nu))==null?void 0:ju.pdfs)||[]:[]},n0=Yl=>fp.includes(Yl),Qp=(Yl,nu)=>{nu&&nu.stopPropagation&&nu.stopPropagation(),Op(ju=>ju.includes(Yl)?ju.filter(Wu=>Wu!==Yl):[...ju,Yl])},C0=()=>{const Yl=Fx();Op(Yl.map(nu=>nu.id))},f0=()=>{vp(!1),Op([])},i0=Yl=>{try{localStorage.setItem("projects",JSON.stringify(Yl))}catch{}_f(Yl)},k0=Yl=>{try{localStorage.setItem("templates",JSON.stringify(Yl))}catch{}cu(Yl)},p0=()=>{const Yl=h0();if(fp.length!==0){if(Yl==="documents")lo(nu=>nu.filter(ju=>!fp.includes(ju.id)));else if(Yl==="projects"){const nu=Eu.filter(ju=>!fp.includes(ju.id));i0(nu)}else if(Yl==="projectFiles"){const nu=Eu.find(ju=>ju.id===hu);if(nu){const ju={...nu,pdfs:(nu.pdfs||[]).filter(Bu=>!fp.includes(Bu.id))},Wu=Eu.map(Bu=>Bu.id===nu.id?ju:Bu);i0(Wu),lo(Bu=>Bu.filter(Xu=>!fp.includes(Xu.id)))}}else if(Yl==="templates"){const nu=du.filter(ju=>!fp.includes(ju.id));k0(nu)}else if(Yl==="templateFiles"){const nu=du.find(ju=>ju.id===Nu);if(nu){const ju={...nu,pdfs:(nu.pdfs||[]).filter(Bu=>!fp.includes(Bu.id))},Wu=du.map(Bu=>Bu.id===nu.id?ju:Bu);k0(Wu)}}f0()}},W0=()=>{const Yl=h0();if(fp.length!==0){if(Yl==="documents"){const ju=g0.filter(Wu=>fp.includes(Wu.id)).map(Wu=>({...Wu,id:`${Date.now()}-${Math.random()}`,name:`${Wu.name} (Copy)`}));lo(Wu=>[...ju,...Wu])}else if(Yl==="projects"){const nu=Eu.filter(Xu=>fp.includes(Xu.id)),ju=new Set(Eu.map(Xu=>normalizeName(Xu==null?void 0:Xu.name)).filter(Boolean)),Bu=[...nu.map(Xu=>{var Mp;const ip=`${Date.now()}-${Math.random()}`,cp=(Xu.pdfs||[]).map(Yp=>({...Yp,id:`${Date.now()}-${Math.random()}`})),yp=((Mp=Xu==null?void 0:Xu.name)==null?void 0:Mp.trim())||"Untitled Project",op=normalizeName(yp);let _p=yp;return op&&ju.has(op)?_p=createCopyName(yp,ju):op&&ju.add(op),{...Xu,id:ip,name:_p,createdAt:new Date().toISOString(),pdfs:cp}}),...Eu];i0(Bu)}else if(Yl==="projectFiles"){const nu=Eu.find(ju=>ju.id===hu);if(nu){const Wu=(nu.pdfs||[]).filter(ip=>fp.includes(ip.id)).map(ip=>({...ip,id:`${Date.now()}-${Math.random()}`,name:`${ip.name} (Copy)`})),Bu={...nu,pdfs:[...Wu,...nu.pdfs||[]]},Xu=Eu.map(ip=>ip.id===nu.id?Bu:ip);i0(Xu),lo(ip=>[...Wu,...ip])}}else if(Yl==="templates"){const nu=du.filter(Xu=>fp.includes(Xu.id)),ju=new Set(du.map(Xu=>normalizeName(Xu==null?void 0:Xu.name)).filter(Boolean)),Bu=[...nu.map(Xu=>{var Mp;const ip=`${Date.now()}-${Math.random()}`,cp=(Xu.pdfs||[]).map(Yp=>({...Yp,id:`${Date.now()}-${Math.random()}`})),yp=((Mp=Xu==null?void 0:Xu.name)==null?void 0:Mp.trim())||"Template",op=normalizeName(yp);let _p=yp;return op&&ju.has(op)?_p=createCopyName(yp,ju):op&&ju.add(op),{...Xu,id:ip,name:_p,createdAt:new Date().toISOString(),pdfs:cp}}),...du];k0(Bu)}else if(Yl==="templateFiles"){const nu=du.find(ju=>ju.id===Nu);if(nu){const Wu=(nu.pdfs||[]).filter(ip=>fp.includes(ip.id)).map(ip=>({...ip,id:`${Date.now()}-${Math.random()}`,name:`${ip.name} (Copy)`})),Bu={...nu,pdfs:[...Wu,...nu.pdfs||[]]},Xu=du.map(ip=>ip.id===nu.id?Bu:ip);k0(Xu)}}f0()}},rv=()=>{const Yl=h0();if(fp.length!==0){if(Yl==="documents")lo(nu=>nu.map(ju=>fp.includes(ju.id)?{...ju,shared:!0}:ju));else if(Yl==="projects"){const nu=Eu.map(ju=>fp.includes(ju.id)?{...ju,shared:!0}:ju);i0(nu)}else if(Yl==="projectFiles"){const nu=Eu.find(ju=>ju.id===hu);if(nu){const ju={...nu,pdfs:(nu.pdfs||[]).map(Bu=>fp.includes(Bu.id)?{...Bu,shared:!0}:Bu)},Wu=Eu.map(Bu=>Bu.id===nu.id?ju:Bu);i0(Wu)}}else if(Yl==="templates"){const nu=du.map(ju=>fp.includes(ju.id)?{...ju,shared:!0}:ju);k0(nu)}else if(Yl==="templateFiles"){const nu=du.find(ju=>ju.id===Nu);if(nu){const ju={...nu,pdfs:(nu.pdfs||[]).map(Bu=>fp.includes(Bu.id)?{...Bu,shared:!0}:Bu)},Wu=du.map(Bu=>Bu.id===nu.id?ju:Bu);k0(Wu)}}alert(`Shared ${fp.length} item(s)`),f0()}},i1=()=>{fp.length!==0&&_l(!0)},Y0=(Yl,nu=!1,ju=!1)=>{if(fp.length===0)return;const Wu=h0();let Bu=[];if(Wu==="documents")Bu=g0.filter(Xu=>fp.includes(Xu.id));else if(Wu==="projectFiles"){const Xu=Eu.find(ip=>ip.id===hu);Xu&&(Bu=(Xu.pdfs||[]).filter(ip=>fp.includes(ip.id)))}if(Bu.length!==0){if(ju){if(Wu==="documents")lo(ip=>ip.filter(cp=>!fp.includes(cp.id)));else if(Wu==="projectFiles"){const ip=Eu.find(cp=>cp.id===hu);if(ip){const cp={...ip,pdfs:(ip.pdfs||[]).filter(op=>!fp.includes(op.id))},yp=Eu.map(op=>op.id===ip.id?cp:op);i0(yp)}lo(cp=>cp.filter(yp=>!fp.includes(yp.id)))}const Xu=Bu.map(ip=>({...ip,id:`${Date.now()}-${Math.random()}`}));lo(ip=>[...Xu,...ip]),_l(!1),Vp(""),f0();return}if(nu){const Xu=Bu.map(op=>({...op,id:`${Date.now()}-${Math.random()}`})),ip={id:`${Date.now()}`,name:Np.trim()||"New Project",createdAt:new Date().toISOString(),pdfs:Xu},cp=localStorage.getItem("projects");let yp=[];try{yp=cp?JSON.parse(cp):[]}catch{}if(yp.unshift(ip),localStorage.setItem("projects",JSON.stringify(yp)),_f([ip,...Eu]),Wu==="documents")lo(op=>op.filter(_p=>!fp.includes(_p.id)));else if(Wu==="projectFiles"){const op=Eu.find(_p=>_p.id===hu);if(op){const _p={...op,pdfs:(op.pdfs||[]).filter(Yp=>!fp.includes(Yp.id))},Mp=Eu.map(Yp=>Yp.id===op.id?_p:Yp);i0(Mp)}}}else{const Xu=Eu.find(ip=>ip.id===Yl);if(Xu){const ip=Bu.map(cp=>({...cp,id:`${Date.now()}-${Math.random()}`}));if(Wu==="documents"){lo(op=>op.filter(_p=>!fp.includes(_p.id)));const cp={...Xu,pdfs:[...ip,...Xu.pdfs||[]]},yp=Eu.map(op=>op.id===Xu.id?cp:op);i0(yp)}else if(Wu==="projectFiles"){const cp=Eu.find(yp=>yp.id===hu);if(cp){const yp={...cp,pdfs:(cp.pdfs||[]).filter(Mp=>!fp.includes(Mp.id))},op={...Xu,pdfs:[...ip,...Xu.pdfs||[]]},_p=Eu.map(Mp=>Mp.id===cp.id?yp:Mp.id===Xu.id?op:Mp);i0(_p)}}}}_l(!1),Vp(""),f0()}},H0=Yl=>{if(Yl===0)return"0 Bytes";const nu=1024,ju=["Bytes","KB","MB","GB"],Wu=Math.floor(Math.log(Yl)/Math.log(nu));return Math.round(Yl/Math.pow(nu,Wu)*100)/100+" "+ju[Wu]},P0=Yl=>{const nu=new Date(Yl),Wu=Math.abs(new Date-nu),Bu=Math.ceil(Wu/(1e3*60*60*24));if(Bu<1){const Xu=Math.floor(Wu/36e5);if(Xu<1){const ip=Math.floor(Wu/6e4);return ip<1?"Just now":`${ip} min ago`}return`${Xu} hour${Xu>1?"s":""} ago`}else if(Bu<7)return`${Bu} day${Bu>1?"s":""} ago`;return nu.toLocaleDateString()},im=Yl=>{Sp(nu=>({key:Yl,direction:nu.key===Yl&&nu.direction==="asc"?"desc":"asc"}))},g0=reactExports.useMemo(()=>{let Yl=hs;return vu&&(Yl=hs.filter(nu=>nu.name.toLowerCase().includes(vu.toLowerCase()))),[...Yl].sort((nu,ju)=>{if(!Cp.key)return 0;let Wu=nu[Cp.key],Bu=ju[Cp.key];return Cp.key==="uploadedAt"&&(Wu=new Date(Wu),Bu=new Date(Bu)),Wu<Bu?Cp.direction==="asc"?-1:1:Wu>Bu?Cp.direction==="asc"?1:-1:0})},[hs,Cp,vu]),B0=reactExports.useMemo(()=>{let Yl=Eu;return vu&&(Yl=Eu.filter(nu=>nu.name.toLowerCase().includes(vu.toLowerCase()))),[...Yl].sort((nu,ju)=>new Date(ju.createdAt)-new Date(nu.createdAt))},[Eu,vu]),tx=reactExports.useMemo(()=>{let Yl=du;return vu&&(Yl=du.filter(nu=>(nu.name||"").toLowerCase().includes(vu.toLowerCase()))),[...Yl].sort((nu,ju)=>new Date(ju.createdAt||0)-new Date(nu.createdAt||0))},[du,vu]),K0=async Yl=>{try{const ju=await(await fetch(Yl.dataUrl)).blob(),Wu=new File([ju],Yl.name,{type:"application/pdf"});is(Wu)}catch(nu){console.error("Error opening document:",nu),alert("Error opening document. Please try again.")}},kx=(Yl,nu)=>{nu.stopPropagation(),lo(ju=>ju.filter(Wu=>Wu.id!==Yl))},Bm=()=>{Ol(!0)},Rx=()=>{const Yl=zl.trim();if(!Yl){alert("Please enter a module name.");return}if(hasNameConflict(Dl,Yl,{getName:ju=>ju==null?void 0:ju.name})){alert("A module with this name already exists. Please choose a different name.");return}const nu={id:`module-${Date.now()}-${Math.random()}`,name:Yl,categories:[]};Fl(ju=>[...ju,nu]),Al(nu.id),Ol(!1),Hl(""),Il(null)},tm=()=>{Ol(!1),Hl("")},b0=Yl=>{lu||(Al(Yl),Il(null))},rx=Yl=>{if(!Yl||Yl.length===0)return;const ju=Dl.filter(Wu=>Yl.includes(Wu.id)).flatMap(Wu=>(Wu.categories||[]).map(Bu=>Bu.id));Fl(Wu=>Wu.filter(Bu=>!Yl.includes(Bu.id))),Ql(Wu=>Wu.filter(Bu=>!Yl.includes(Bu))),Yl.includes(Pl)&&(Al(null),Il(null)),ju.length>0&&(iu(Wu=>Wu.filter(Bu=>!ju.includes(Bu))),Ul(Wu=>{const Bu={...Wu};return ju.forEach(Xu=>{Bu[Xu]!==void 0&&delete Bu[Xu]}),Bu}),Rl&&ju.includes(Rl)&&Il(null)),N0&&Yl.includes(N0)&&(um(null),J0("")),Nl(Wu=>{const Bu={...Wu};return Yl.forEach(Xu=>{Bu[Xu]!==void 0&&delete Bu[Xu]}),Bu}),setSelectedTemplate(Wu=>{if(!Wu)return Wu;const Bu=Xu=>(Xu||[]).filter(ip=>!Yl.includes(ip.id));return{...Wu,modules:Bu(Wu.modules),spaces:Bu(Wu.spaces)}}),cu(Wu=>{const Bu=Wu.map(Xu=>({...Xu,modules:(Xu.modules||[]).filter(ip=>!Yl.includes(ip.id)),spaces:(Xu.spaces||[]).filter(ip=>!Yl.includes(ip.id))}));try{localStorage.setItem("templates",JSON.stringify(Bu))}catch(Xu){console.error("Error persisting templates:",Xu)}return Bu})},nx=(Yl,nu)=>{Nl(ju=>({...ju,[Yl]:nu}))},q0=Yl=>{var ju;const nu=(ju=Ll[Yl])==null?void 0:ju.trim();if(!nu){alert("Module name cannot be empty.");return}if(hasNameConflict(Dl,nu,{getName:Wu=>Wu==null?void 0:Wu.name,ignoreId:Yl})){alert("A module with this name already exists. Please choose a different name.");return}Fl(Wu=>Wu.map(Bu=>Bu.id===Yl?{...Bu,name:nu}:Bu)),Nl(Wu=>{const Bu={...Wu};return delete Bu[Yl],Bu})},ix=Yl=>{Nl(nu=>{const ju={...nu};return delete ju[Yl],ju})},Dx=()=>{Kl(!0),Ql([]);const Yl={};Dl.forEach(nu=>{Yl[nu.id]=nu.name}),Nl(Yl)},xm=useSensors(useSensor(PointerSensor,{activationConstraint:{distance:8}})),[Px,ox]=reactExports.useState(null),Ix=reactExports.useMemo(()=>Dl.find(Yl=>Yl.id===Px)||null,[Px,Dl]),s1=reactExports.useCallback(({active:Yl})=>{ox(Yl.id)},[]),vm=reactExports.useCallback(({active:Yl,over:nu})=>{ox(null),!(!nu||Yl.id===nu.id)&&Fl(ju=>{const Wu=ju.findIndex(Xu=>Xu.id===Yl.id),Bu=ju.findIndex(Xu=>Xu.id===nu.id);return Wu===-1||Bu===-1?ju:arrayMove(ju,Wu,Bu)})},[]),Um=reactExports.useCallback(()=>{ox(null)},[]),ax=reactExports.useCallback((Yl,nu)=>{nu.key==="Enter"?(q0(Yl),nu.currentTarget.blur()):nu.key==="Escape"&&(ix(Yl),nu.currentTarget.blur())},[q0,ix]),km=()=>{if(!lu)return;const Yl={},nu=new Map;for(const ju of Dl){if(!ju)continue;const Bu=((Object.prototype.hasOwnProperty.call(Ll,ju.id)?Ll[ju.id]:ju.name)||"").trim();if(!Bu){alert("Module name cannot be empty.");return}const Xu=normalizeName(Bu);if(Xu){const ip=nu.get(Xu);if(ip&&ip!==ju.id){const cp=Dl.find(op=>op.id===ip),yp=(Object.prototype.hasOwnProperty.call(Ll,ip)?Ll[ip]:cp==null?void 0:cp.name)||Bu;alert(`Module names must be unique. "${Bu}" conflicts with "${yp}".`);return}nu.set(Xu,ju.id)}Yl[ju.id]=Bu}Fl(ju=>ju.map(Wu=>{const Bu=Yl[Wu.id];return typeof Bu>"u"||Bu===Wu.name?Wu:{...Wu,name:Bu}})),Kl(!1),Nl({}),Ql([])},S0=Yl=>{Ql(nu=>nu.includes(Yl)?nu.filter(ju=>ju!==Yl):[...nu,Yl])},Z0=()=>{if(Vl.length===0){alert("Please select at least one module to move/copy.");return}ku("module"),eu("copy"),Tu(!0)},e0=()=>{if(Vl.length===0){alert("Please select at least one module to duplicate.");return}const Yl=new Set(Vl),nu=[],ju={};Fl(Wu=>{const Bu=new Set(Wu.map(ip=>(ip.name||"").trim().toLowerCase()).filter(Boolean)),Xu=[];return Wu.forEach(ip=>{if(Xu.push(ip),Yl.has(ip.id)){const cp=(ip.categories||[]).map(_p=>{const Mp=(_p.checklist||[]).map(Yp=>({...Yp,id:generateUniqueId("item")}));return{..._p,id:generateUniqueId("cat"),checklist:Mp}}),yp=createCopyName(ip.name||"Untitled Module",Bu),op={...ip,id:generateUniqueId("module"),name:yp,categories:cp};Xu.push(op),nu.push(op.id),ju[op.id]=yp}}),Xu}),nu.length>0&&(Ql(nu),Nl(Wu=>({...Wu,...ju})))},cm=()=>{Pl&&au(!0)},I0=()=>{const Yl=_c.trim();if(!Yl){alert("Please enter a category name.");return}if(!Pl)return;const nu=Dl.find(ju=>ju.id===Pl);if(nu){if(hasNameConflict(nu.categories,Yl,{getName:ju=>ju==null?void 0:ju.name})){alert("A category with this name already exists in this module. Please choose a different name.");return}Fl(ju=>ju.map(Wu=>{if(Wu.id!==Pl)return Wu;const Bu={id:`cat-${Date.now()}-${Math.random()}`,name:Yl,checklist:[]};return{...Wu,categories:[...Wu.categories,Bu]}})),au(!1),uu("")}},ym=()=>{au(!1),uu("")},T0=Yl=>{xu||Il(Yl)},Rm=(Yl,nu)=>{Ul(ju=>({...ju,[Yl]:nu}))},Ox=(Yl,nu)=>{var Bu;const ju=(Bu=Ml[nu])==null?void 0:Bu.trim();if(!ju){alert("Category name cannot be empty.");return}const Wu=Dl.find(Xu=>Xu.id===Yl);if(Wu){if(hasNameConflict(Wu.categories,ju,{getName:Xu=>Xu==null?void 0:Xu.name,ignoreId:nu})){alert("A category with this name already exists in this module. Please choose a different name.");return}Fl(Xu=>Xu.map(ip=>ip.id!==Yl?ip:{...ip,categories:ip.categories.map(cp=>cp.id===nu?{...cp,name:ju}:cp)})),Ul(Xu=>{const ip={...Xu};return delete ip[nu],ip})}},zm=Yl=>{Ul(nu=>{const ju={...nu};return delete ju[Yl],ju})},o1=()=>{if(!Pl)return;pu(!0),iu([]);const Yl=Dl.find(nu=>nu.id===Pl);if(Yl){const nu={};(Yl.categories||[]).forEach(ju=>{nu[ju.id]=ju.name}),Ul(nu)}},bm=reactExports.useMemo(()=>Dl.find(Yl=>Yl.id===Pl)||null,[Dl,Pl]),_m=useSensors(useSensor(PointerSensor,{activationConstraint:{distance:8}})),[wm,Wm]=reactExports.useState(null),Mx=reactExports.useMemo(()=>((bm==null?void 0:bm.categories)||[]).find(nu=>nu.id===wm)||null,[wm,bm]),a1=reactExports.useCallback(({active:Yl})=>{Wm(Yl.id)},[]),l1=reactExports.useCallback(({active:Yl,over:nu})=>{Wm(null),!(!nu||Yl.id===nu.id||!Pl)&&Fl(ju=>ju.map(Wu=>{if(Wu.id!==Pl)return Wu;const Bu=Wu.categories||[],Xu=Bu.findIndex(cp=>cp.id===Yl.id),ip=Bu.findIndex(cp=>cp.id===nu.id);return Xu===-1||ip===-1?Wu:{...Wu,categories:arrayMove(Bu,Xu,ip)}}))},[Pl]),c1=reactExports.useCallback(()=>{Wm(null)},[]),u1=reactExports.useCallback((Yl,nu)=>{nu.key==="Enter"?(Pl&&Ox(Pl,Yl),nu.currentTarget.blur()):nu.key==="Escape"&&(zm(Yl),nu.currentTarget.blur())},[Pl,Ox,zm]),d1=()=>{if(!xu)return;if(!Pl){pu(!1),Ul({}),iu([]);return}const Yl=Dl.find(Wu=>Wu.id===Pl);if(!Yl){pu(!1),Ul({}),iu([]);return}const nu={},ju=new Map;for(const Wu of Yl.categories||[]){if(!Wu)continue;const Xu=((Object.prototype.hasOwnProperty.call(Ml,Wu.id)?Ml[Wu.id]:Wu.name)||"").trim();if(!Xu){alert("Category name cannot be empty.");return}const ip=normalizeName(Xu);if(ip){const cp=ju.get(ip);if(cp&&cp!==Wu.id){const yp=(Yl.categories||[]).find(_p=>_p.id===cp),op=(Object.prototype.hasOwnProperty.call(Ml,cp)?Ml[cp]:yp==null?void 0:yp.name)||Xu;alert(`Category names within a module must be unique. "${Xu}" conflicts with "${op}".`);return}ju.set(ip,Wu.id)}nu[Wu.id]=Xu}Fl(Wu=>Wu.map(Bu=>{if(Bu.id!==Pl)return Bu;const Xu=(Bu.categories||[]).map(ip=>{const cp=nu[ip.id];return typeof cp>"u"||cp===ip.name?ip:{...ip,name:cp}});return{...Bu,categories:Xu}})),pu(!1),Ul({}),iu([])},h1=Yl=>{iu(nu=>nu.includes(Yl)?nu.filter(ju=>ju!==Yl):[...nu,Yl])},f1=()=>{if(Jl.length===0){alert("Please select at least one category to move/copy.");return}ku("category"),eu("copy"),Tu(!0)},p1=()=>{if(!Pl){alert("Please select a module before duplicating categories.");return}if(Jl.length===0){alert("Please select at least one category to duplicate.");return}const Yl=new Set(Jl),nu=[],ju={};Fl(Wu=>Wu.map(Bu=>{if(Bu.id!==Pl)return Bu;const Xu=new Set((Bu.categories||[]).map(cp=>(cp.name||"").trim().toLowerCase()).filter(Boolean)),ip=[];return(Bu.categories||[]).forEach(cp=>{if(ip.push(cp),Yl.has(cp.id)){const yp=(cp.checklist||[]).map(Mp=>({...Mp,id:generateUniqueId("item")})),op=createCopyName(cp.name||"Untitled Category",Xu),_p={...cp,id:generateUniqueId("cat"),name:op,checklist:yp};ip.push(_p),nu.push(_p.id),ju[_p.id]=op}}),{...Bu,categories:ip}})),nu.length>0&&(iu(nu),Ul(Wu=>({...Wu,...ju})))},[Sm,Em]=reactExports.useState(null),[N0,um]=reactExports.useState(null),[Hm,Cm]=reactExports.useState(null),[lx,dm]=reactExports.useState(""),[Vm,hm]=reactExports.useState(""),[Dm,J0]=reactExports.useState(""),ux=reactExports.useMemo(()=>Dl.find(Yl=>Yl.id===Pl)||null,[Dl,Pl]),jx=reactExports.useMemo(()=>ux?(ux.categories||[]).filter(Yl=>Jl.includes(Yl.id)):[],[ux,Jl]),dx=reactExports.useMemo(()=>Dl.find(Yl=>Yl.id===N0)||null,[Dl,N0]),Nx=reactExports.useMemo(()=>{if(!dx)return!1;const Yl=new Set((dx.categories||[]).map(nu=>(nu.name||"").trim().toLowerCase()));return jx.some(nu=>Yl.has((nu.name||"").trim().toLowerCase()))},[dx,jx]),x0=Fu==="category"&&N0&&N0!=="new"&&(tu==="copy"||Nx);reactExports.useEffect(()=>{!x0&&Dm&&J0("")},[x0,Dm]);const Tm=()=>{if(Fu==="module"){if(Vl.length===0)return;const Yl=Dl.filter(nu=>Vl.includes(nu.id));if(Sm==="new"){const nu=lx.trim();if(!nu){alert("Please enter a template name.");return}const ju=Yl.map(ip=>({id:tu==="move"?ip.id:`module-${Date.now()}-${Math.random()}`,name:ip.name,categories:(ip.categories||[]).map(cp=>({id:tu==="move"?cp.id:`cat-${Date.now()}-${Math.random()}`,name:cp.name,checklist:(cp.checklist||[]).map(yp=>({id:tu==="move"?yp.id:`item-${Date.now()}-${Math.random()}`,text:yp.text}))}))})),Wu={id:`${Date.now()}-${Math.random()}`,name:nu,visibility:"personal",modules:ju,spaces:ju,createdAt:new Date().toISOString(),ballInCourtEntities:[]},Bu=localStorage.getItem("templates"),Xu=Bu?JSON.parse(Bu):[];if(hasNameConflict(Xu,nu,{getName:ip=>ip==null?void 0:ip.name})){alert("A template with this name already exists. Please choose a different name.");return}Xu.unshift(Wu),localStorage.setItem("templates",JSON.stringify(Xu)),cu(Xu),tu==="move"&&(Fl(ip=>ip.filter(cp=>!Vl.includes(cp.id))),Ql([]))}else{const nu=localStorage.getItem("templates"),ju=nu?JSON.parse(nu):[],Wu=ju.find(Bu=>Bu.id===Sm);if(Wu){const Bu=new Set((Wu.modules||[]).map(cp=>normalizeName(cp==null?void 0:cp.name)).filter(Boolean)),Xu=Yl.map(cp=>{var Mp;const yp=((Mp=cp==null?void 0:cp.name)==null?void 0:Mp.trim())||"Untitled Module";let op=yp;const _p=normalizeName(op);return _p&&Bu.has(_p)?op=createCopyName(yp,Bu):_p&&Bu.add(_p),{...cp,id:tu==="move"?cp.id:`module-${Date.now()}-${Math.random()}`,name:op,categories:(cp.categories||[]).map(Yp=>({id:tu==="move"?Yp.id:`cat-${Date.now()}-${Math.random()}`,name:Yp.name,checklist:(Yp.checklist||[]).map(w0=>({id:tu==="move"?w0.id:`item-${Date.now()}-${Math.random()}`,text:w0.text}))}))}}),ip=[...Wu.modules||[],...Xu];Wu.modules=ip,Wu.spaces=ip,localStorage.setItem("templates",JSON.stringify(ju)),cu(ju),tu==="move"&&(Fl(cp=>cp.filter(yp=>!Vl.includes(yp.id))),Ql([]))}}}else if(Fu==="category"){if(Jl.length===0||!Pl)return;const Yl=Dl.find(ju=>ju.id===Pl);if(!Yl)return;const nu=(Yl.categories||[]).filter(ju=>Jl.includes(ju.id));if(N0==="new"){const ju=Vm.trim();if(!ju){alert("Please enter a module name.");return}if(hasNameConflict(Dl,ju,{getName:Xu=>Xu==null?void 0:Xu.name})){alert("A module with this name already exists. Please choose a different name.");return}const Wu=nu.map(Xu=>({id:tu==="move"?Xu.id:`cat-${Date.now()}-${Math.random()}`,name:Xu.name,checklist:(Xu.checklist||[]).map(ip=>({id:tu==="move"?ip.id:`item-${Date.now()}-${Math.random()}`,text:ip.text}))})),Bu={id:`module-${Date.now()}-${Math.random()}`,name:ju,categories:Wu};Fl(Xu=>{const ip=[...Xu,Bu];return tu==="move"?ip.map(cp=>cp.id===Pl?{...cp,categories:(cp.categories||[]).filter(yp=>!Jl.includes(yp.id))}:cp):ip}),tu==="move"&&iu([])}else{const ju=Dl.find(cp=>cp.id===N0);if(!ju){alert("Selected destination module could not be found. Please choose another destination.");return}const Wu=tu==="move"&&N0===Pl,Bu=Dm.trim(),Xu=new Map;if(!Wu){const cp=new Set((ju.categories||[]).map(op=>(op.name||"").trim().toLowerCase())),yp=nu.filter(op=>cp.has((op.name||"").trim().toLowerCase()));if(yp.length>0){if(nu.length>1||yp.length>1){alert("Multiple selected categories conflict with existing names. Please move or copy them one at a time and provide unique names.");return}if(!Bu){alert("A category with the same name already exists in the destination. Please provide a new name before continuing.");return}Xu.set(yp[0].id,Bu)}else if(Bu){if(nu.length>1){alert("Renaming during move/copy is only supported when a single category is selected.");return}Xu.set(nu[0].id,Bu)}}const ip=nu.map(cp=>({id:tu==="move"?cp.id:`cat-${Date.now()}-${Math.random()}`,name:Xu.get(cp.id)||cp.name,checklist:(cp.checklist||[]).map(yp=>({id:tu==="move"?yp.id:`item-${Date.now()}-${Math.random()}`,text:yp.text}))}));Fl(cp=>cp.map(yp=>yp.id===N0?{...yp,categories:[...yp.categories||[],...ip]}:tu==="move"&&yp.id===Pl?{...yp,categories:(yp.categories||[]).filter(op=>!Jl.includes(op.id))}:yp)),tu==="move"&&iu([])}}Tu(!1),Em(null),um(null),Cm(null),dm(""),hm(""),J0("")},V0=(Yl,nu)=>{if(!nu||nu.length===0)return;const ju=Dl.find(Bu=>Bu.id===Yl);if(!ju)return;const Wu=(ju.categories||[]).filter(Bu=>!nu.includes(Bu.id));Wu.length!==(ju.categories||[]).length&&(Fl(Bu=>Bu.map(Xu=>Xu.id===Yl?{...Xu,categories:Wu}:Xu)),iu(Bu=>Bu.filter(Xu=>!nu.includes(Xu))),Ul(Bu=>{const Xu={...Bu};return nu.forEach(ip=>{Xu[ip]!==void 0&&delete Xu[ip]}),Xu}),Hm&&nu.includes(Hm)&&Cm(null),Dm&&J0("")),Rl&&nu.includes(Rl)&&Il(null),setSelectedTemplate(Bu=>{if(!Bu)return Bu;const Xu=(ip=[])=>ip.map(cp=>cp.id===Yl?{...cp,categories:(cp.categories||[]).filter(yp=>!nu.includes(yp.id))}:cp);return{...Bu,modules:Xu(Bu.modules||[]),spaces:Xu(Bu.spaces||[])}}),cu(Bu=>{const Xu=(cp=[])=>cp.map(yp=>yp.id===Yl?{...yp,categories:(yp.categories||[]).filter(op=>!nu.includes(op.id))}:yp),ip=Bu.map(cp=>({...cp,modules:Xu(cp.modules||[]),spaces:Xu(cp.spaces||[])}));try{localStorage.setItem("templates",JSON.stringify(ip))}catch(cp){console.error("Error persisting templates:",cp)}return ip})},g1=(Yl,nu)=>{Fl(ju=>ju.map(Wu=>Wu.id===Yl?{...Wu,categories:Wu.categories.map(Bu=>Bu.id===nu?{...Bu,checklist:[...Bu.checklist,{id:`item-${Date.now()}-${Math.random()}`,text:""}]}:Bu)}:Wu))},m1=(Yl,nu,ju,Wu)=>{const Bu=typeof Wu=="string"?Wu:"";Fl(Xu=>Xu.map(ip=>ip.id===Yl?{...ip,categories:ip.categories.map(cp=>cp.id===nu?{...cp,checklist:cp.checklist.map(yp=>yp.id===ju?{...yp,text:Bu}:yp)}:cp)}:ip))},x1=(Yl,nu,ju)=>{Fl(Wu=>Wu.map(Bu=>Bu.id===Yl?{...Bu,categories:Bu.categories.map(Xu=>Xu.id===nu?{...Xu,checklist:Xu.checklist.filter(ip=>ip.id!==ju)}:Xu)}:Bu))},v1=()=>{ru(Yl=>{const nu=new Set(Yl.map(Xu=>normalizeName(Xu==null?void 0:Xu.name)).filter(Boolean));let ju=Yl.length+1,Wu=`Entity ${ju}`;for(;nu.has(normalizeName(Wu));)ju+=1,Wu=`Entity ${ju}`;const Bu={id:`entity-${Date.now()}-${Math.random()}`,name:Wu,color:hexToRgba("#E3D1FB",.2)};return[...Yl,Bu]})},O0=(Yl,nu)=>{ru(ju=>ju.map(Wu=>Wu.id===Yl?{...Wu,...nu}:Wu))},Lx=Yl=>{ru(nu=>nu.filter(ju=>ju.id!==Yl))},Xm=(Yl,nu,ju)=>{Lu(Yl),Vu("grid"),hp({hex:nu,opacity:ju}),Rp(null),Bp(!1)},hx=Yl=>{Lx(Yl),Pu===Yl&&Lu(null)},fx=(Yl,nu)=>{O0(Yl,{name:nu})},Gm=reactExports.useCallback(()=>({templateName:El.trim(),templateVisibility:Cl,modules:Dl.map(Yl=>({...Yl,categories:(Yl.categories||[]).map(nu=>({...nu,checklist:(nu.checklist||[]).map(ju=>({...ju}))}))})),ballInCourtEntities:gu.map(Yl=>({...Yl}))}),[El,Cl,Dl,gu]);reactExports.useEffect(()=>{xl?bu.current||(bu.current=JSON.stringify(Gm())):bu.current=null},[xl,Gm]);const $m=reactExports.useMemo(()=>!xl||!bu.current?!1:JSON.stringify(Gm())!==bu.current,[xl,Gm]),Ym=()=>{Sl(""),Tl("personal"),Fl([]),Al(null),Il(null),zu(null),Lu(null),Ol(!1),Hl(""),au(!1),uu(""),Kl(!1),pu(!1),Nl({}),Ul({}),Ql([]),iu([]),_u([]),Tu(!1),Em(null),um(null),Cm(null),dm(""),hm(""),J0(""),ru([{id:`entity-${Date.now()}-1`,name:"GC",color:hexToRgba("#E3D1FB",.2)},{id:`entity-${Date.now()}-2`,name:"Subcontractor",color:hexToRgba("#FFF5C3",.2)},{id:`entity-${Date.now()}-3`,name:"My Company",color:hexToRgba("#CBDCFF",.2)},{id:`entity-${Date.now()}-4`,name:"100% Complete",color:hexToRgba("#B2FFB2",.2)},{id:`entity-${Date.now()}-5`,name:"Removed",color:hexToRgba("#BBBBBB",.2)}]),yl(!0)};reactExports.useImperativeHandle(ga,()=>({openTemplateModal:Ym,openEditTemplateModal:gx,closeTemplateModal:()=>yl(!1)}));const gx=(Yl,nu={})=>{const{moduleId:ju,startAddingCategory:Wu=!1}=nu||{},Bu=du.find(Mp=>Mp.id===Yl);if(!Bu){alert("Template not found.");return}Sl(Bu.name||""),Tl(Bu.visibility||"personal");const Xu=(Bu.modules||Bu.spaces||[]).map(Mp=>({id:Mp.id,name:Mp.name,categories:(Mp.categories||[]).map(Yp=>({id:Yp.id,name:Yp.name,checklist:(Yp.checklist||[]).map(w0=>({id:w0.id,text:w0.text}))}))}));Fl(Xu);const ip=ju&&Xu.some(Mp=>Mp.id===ju)?ju:Xu.length>0?Xu[0].id:null;Al(ip),Il(null),Ol(!1),Hl(""),au(!!(Wu&&ip)),uu(""),Kl(!1),pu(!1),Nl({}),Ul({}),Ql([]),iu([]),_u([]),Tu(!1),Em(null),um(null),Cm(null),dm(""),hm(""),J0("");const yp=[{id:`entity-${Date.now()}-1`,name:"GC",color:hexToRgba("#E3D1FB",.2)},{id:`entity-${Date.now()}-2`,name:"Subcontractor",color:hexToRgba("#FFF5C3",.2)},{id:`entity-${Date.now()}-3`,name:"My Company",color:hexToRgba("#CBDCFF",.2)},{id:`entity-${Date.now()}-4`,name:"100% Complete",color:hexToRgba("#B2FFB2",.2)},{id:`entity-${Date.now()}-5`,name:"Removed",color:hexToRgba("#BBBBBB",.2)}],_p=(Bu.ballInCourtEntities||yp).map(Mp=>{if(Mp.color&&Mp.color.startsWith("#"))return{...Mp,color:hexToRgba(Mp.color,.2)};if(Mp.color&&Mp.color.startsWith("rgba")){const Yp=Mp.color.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(Yp)return{...Mp,color:`rgba(${Yp[1]}, ${Yp[2]}, ${Yp[3]}, 0.2)`}}return Mp});ru(_p),zu(Yl),yl(!0)},Pm=()=>{yl(!1),zu(null),Il(null),Lu(null),Ol(!1),Hl(""),au(!1),uu(""),Kl(!1),pu(!1),Nl({}),Ul({}),Ql([]),iu([]),_u([]),Tu(!1),Em(null),um(null),Cm(null),dm(""),hm(""),J0("")},y1=reactExports.useCallback(Yl=>{Yl.target===Yl.currentTarget&&($m&&!window.confirm("You have unsaved changes. If you close now, all changes will be lost. Continue?")||Pm())},[$m,Pm]),b1=()=>{const Yl=El.trim();if(!Yl){alert("Please enter a template name.");return}if(hasNameConflict(du,Yl,{getName:Xu=>Xu==null?void 0:Xu.name,ignoreId:Yu})){alert("A template with this name already exists. Please choose a different name.");return}for(const Xu of Dl){const ip=((Xu==null?void 0:Xu.name)||"Module").trim()||"Module";for(const cp of(Xu==null?void 0:Xu.categories)||[]){const yp=((cp==null?void 0:cp.name)||"Category").trim()||"Category",op=new Set;for(const _p of(cp==null?void 0:cp.checklist)||[]){const Mp=((_p==null?void 0:_p.text)||"").trim();if(!Mp)continue;const Yp=normalizeName(Mp);if(op.has(Yp)){alert(`Checklist items within "${yp}" (${ip}) must have unique names. Please update duplicates before saving.`);return}op.add(Yp)}}}const nu=Dl.map(Xu=>({id:Xu.id,name:Xu.name.trim()||"Untitled Module",categories:(Xu.categories||[]).map(ip=>({id:ip.id,name:ip.name.trim()||"Untitled Category",checklist:(ip.checklist||[]).map(cp=>({id:cp.id,text:(cp.text||"").trim()})).filter(cp=>cp.text)}))})),ju=gu.map(Xu=>((Xu==null?void 0:Xu.name)||"").trim()).filter(Boolean);if(ju.some((Xu,ip)=>{const cp=normalizeName(Xu);return ju.findIndex(yp=>normalizeName(yp)===cp)!==ip})){alert("Each Ball in Court name must be unique. Please resolve duplicate names before saving.");return}const Bu=gu.filter(Xu=>Xu.name.trim()).map(Xu=>({id:Xu.id,name:Xu.name.trim(),color:Xu.color}));try{const Xu=localStorage.getItem("templates"),ip=Xu?JSON.parse(Xu):[];if(hasNameConflict(ip,Yl,{getName:cp=>cp==null?void 0:cp.name,ignoreId:Yu})){alert("A template with this name already exists. Please choose a different name.");return}if(Yu){const cp=ip.findIndex(yp=>yp.id===Yu);if(cp!==-1){const yp=ip[cp];ip[cp]={...yp,id:Yu,name:Yl,visibility:Cl,modules:nu,spaces:nu,ballInCourtEntities:Bu,createdAt:yp.createdAt}}}else{const cp={id:`tpl-${Date.now()}`,name:Yl,visibility:Cl,modules:nu,spaces:nu,ballInCourtEntities:Bu,createdAt:new Date().toISOString()};ip.unshift(cp)}localStorage.setItem("templates",JSON.stringify(ip)),cu(ip),yl(!1),zu(null)}catch(Xu){console.error("Failed to save template",Xu),alert("Failed to save template.")}};return jsxRuntimeExports.jsxs("div",{style:{height:"100%",minHeight:0,display:"flex",background:"#1E1E1E",fontFamily:FONT_FAMILY},children:[jsxRuntimeExports.jsxs("div",{style:{width:"240px",background:"#1E1E1E",color:"#FFFFFF",display:"flex",flexDirection:"column",boxShadow:"2px 0 12px rgba(0,0,0,0.2), 1px 0 6px rgba(0,0,0,0.15)",height:"100%",position:"relative",zIndex:1},children:[jsxRuntimeExports.jsx("div",{style:{padding:"24px",borderBottom:"1px solid rgba(255,255,255,0.1)",height:"72px",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",boxShadow:"none",position:"relative",width:"100%",zIndex:2},children:jsxRuntimeExports.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",letterSpacing:"-0.5px",margin:0,width:"100%",textAlign:"center"},children:"Survey"})}),jsxRuntimeExports.jsxs("nav",{style:{flex:1,padding:"16px 0"},children:[jsxRuntimeExports.jsxs("div",{onClick:()=>Au("documents"),style:{padding:"12px 24px",background:$l==="documents"?"rgba(255,255,255,0.1)":"transparent",borderLeft:$l==="documents"?"3px solid #4A90E2":"3px solid transparent",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("span",{style:rp,children:jsxRuntimeExports.jsx(Icon,{name:"document",size:20,color:$l==="documents"?"#4A90E2":"#FFFFFF"})}),jsxRuntimeExports.jsx("span",{style:dp,children:"Documents"})]}),jsxRuntimeExports.jsxs("div",{onClick:()=>{Au("projects"),wu(null)},style:{padding:"12px 24px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s",background:$l==="projects"?"rgba(255,255,255,0.1)":"transparent",borderLeft:$l==="projects"?"3px solid #4A90E2":"3px solid transparent"},onMouseEnter:Yl=>Yl.currentTarget.style.background=$l==="projects"?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",onMouseLeave:Yl=>Yl.currentTarget.style.background=$l==="projects"?"rgba(255,255,255,0.1)":"transparent",children:[jsxRuntimeExports.jsx("span",{style:rp,children:jsxRuntimeExports.jsx(Icon,{name:"folder",size:20,color:$l==="projects"?"#4A90E2":"#FFFFFF"})}),jsxRuntimeExports.jsx("span",{style:dp,children:"Projects"})]}),jsxRuntimeExports.jsxs("div",{onClick:()=>{Au("templates"),wu(null),tp(null)},style:{padding:"12px 24px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s",background:$l==="templates"?"rgba(255,255,255,0.1)":"transparent",borderLeft:$l==="templates"?"3px solid #4A90E2":"3px solid transparent"},onMouseEnter:Yl=>Yl.currentTarget.style.background=$l==="templates"?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",onMouseLeave:Yl=>Yl.currentTarget.style.background=$l==="templates"?"rgba(255,255,255,0.1)":"transparent",children:[jsxRuntimeExports.jsx("span",{style:rp,children:jsxRuntimeExports.jsx(Icon,{name:"template",size:20,color:$l==="templates"?"#4A90E2":"#FFFFFF"})}),jsxRuntimeExports.jsx("span",{style:dp,children:"Templates"})]}),jsxRuntimeExports.jsxs("div",{style:{padding:"12px 24px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s"},onMouseEnter:Yl=>Yl.currentTarget.style.background="rgba(255,255,255,0.05)",onMouseLeave:Yl=>Yl.currentTarget.style.background="transparent",children:[jsxRuntimeExports.jsx("span",{style:rp,children:jsxRuntimeExports.jsx(Icon,{name:"settings",size:20,color:"#FFFFFF"})}),jsxRuntimeExports.jsx("span",{style:dp,children:"Settings"})]})]}),jsxRuntimeExports.jsx("div",{style:{padding:"16px 24px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},children:[jsxRuntimeExports.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#4A90E2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",color:"#FFFFFF"},children:"U"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"13px",fontWeight:"500"},children:"User"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"11px",opacity:.7},children:"user@example.com"})]})]})})]}),jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[jsxRuntimeExports.jsxs("div",{style:{background:"#252525",padding:"20px 32px",borderBottom:"1px solid #3A3A3A",display:"flex",alignItems:"center",gap:"24px",height:"72px",boxSizing:"border-box",boxShadow:"none",position:"relative",marginLeft:"-24px",paddingLeft:"56px",zIndex:2},children:[jsxRuntimeExports.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",margin:0,letterSpacing:"-0.5px",color:"#FFFFFF"},children:$l==="documents"?"Documents":$l==="projects"?hu?"Project Files":"Projects":Nu?"Template Files":"Templates"}),$l==="projects"&&hu&&jsxRuntimeExports.jsxs("button",{onClick:()=>wu(null),className:"btn btn-secondary btn-md",children:[jsxRuntimeExports.jsx(Icon,{name:"arrowLeft",size:14,style:{marginRight:"4px"}})," Back to Projects"]}),$l==="templates"&&Nu&&jsxRuntimeExports.jsxs("button",{onClick:()=>tp(null),className:"btn btn-secondary btn-md",children:[jsxRuntimeExports.jsx(Icon,{name:"arrowLeft",size:14,style:{marginRight:"4px"}})," Back to Templates"]}),jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",maxWidth:"400px",margin:"0 auto",position:"relative"},children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:$l==="documents"?"Search documents...":$l==="projects"?hu?"Search files in project...":"Search projects...":Nu?"Search files in template...":"Search templates...",value:vu,onChange:Yl=>Zl(Yl.target.value),style:{width:"100%",padding:"10px 16px 10px 40px",border:"1px solid #3A3A3A",borderRadius:"8px",fontSize:"14px",fontFamily:FONT_FAMILY,outline:"none",background:"#1E1E1E",color:"#FFFFFF"}}),jsxRuntimeExports.jsx("span",{style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",opacity:.5,display:"flex",alignItems:"center"},children:jsxRuntimeExports.jsx(Icon,{name:"search",size:16,color:"currentColor"})})]})]}),jsxRuntimeExports.jsxs("div",{style:{padding:"24px 32px",display:"flex",gap:"16px"},children:[jsxRuntimeExports.jsx("input",{ref:ba,type:"file",accept:"application/pdf",onChange:u0,style:{display:"none"}}),jsxRuntimeExports.jsx("input",{ref:xa,type:"file",accept:"application/pdf",onChange:em,multiple:!0,style:{display:"none"}}),jsxRuntimeExports.jsxs("button",{onClick:()=>{var Yl;return(Yl=ba.current)==null?void 0:Yl.click()},className:"btn-card",style:{borderColor:"#4A90E2"},children:[jsxRuntimeExports.jsx(Icon,{name:"upload",size:24,color:"#4A90E2",className:"icon"}),jsxRuntimeExports.jsx("span",{className:"label",children:"Upload PDF"})]}),jsxRuntimeExports.jsxs("button",{onClick:l0,className:"btn-card",style:{borderColor:"#4A90E2"},children:[jsxRuntimeExports.jsx(Icon,{name:"folder",size:24,color:"#4A90E2",className:"icon"}),jsxRuntimeExports.jsx("span",{className:"label",children:"Create Project"})]}),jsxRuntimeExports.jsxs("button",{onClick:Ym,className:"btn-card",style:{borderColor:"#4A90E2"},children:[jsxRuntimeExports.jsx(Icon,{name:"template",size:24,color:"#4A90E2",className:"icon"}),jsxRuntimeExports.jsx("span",{className:"label",children:"Create Template"})]})]}),jsxRuntimeExports.jsxs("div",{style:{padding:"0 32px 16px 32px",display:"flex",gap:"8px",alignItems:"center",justifyContent:"flex-end"},children:[!Ku&&($l==="documents"||$l==="projects"||$l==="templates")&&jsxRuntimeExports.jsx("button",{onClick:()=>{vp(!0),Op([])},className:"btn btn-secondary btn-md",children:"Select Item"}),($l==="documents"||$l==="projects"||$l==="templates")&&!Ku&&jsxRuntimeExports.jsxs("div",{ref:r0,style:{position:"relative"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>s0(!Kp),className:"btn btn-secondary btn-md",children:[jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{flexShrink:0},children:Ou==="grid"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("rect",{x:"2",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"9",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"2",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"9",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2",fill:"none"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("circle",{cx:"3",cy:"4",r:"1",fill:"currentColor"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"4",x2:"13",y2:"4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("circle",{cx:"3",cy:"8",r:"1",fill:"currentColor"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"8",x2:"13",y2:"8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("circle",{cx:"3",cy:"12",r:"1",fill:"currentColor"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"12",x2:"13",y2:"12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}),jsxRuntimeExports.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{flexShrink:0,opacity:.6},children:jsxRuntimeExports.jsx("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Kp&&jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:"100%",left:0,marginTop:"4px",background:"#FFFFFF",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.12)",padding:"4px",minWidth:"140px",zIndex:1e3,border:"1px solid #E0E0E0"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{Du("grid"),s0(!1)},style:{width:"100%",padding:"8px 12px",background:Ou==="grid"?"#F5F5F5":"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"400",color:"#252525",display:"flex",alignItems:"center",gap:"10px",textAlign:"left",fontFamily:FONT_FAMILY,transition:"background 0.15s"},onMouseEnter:Yl=>{Ou!=="grid"&&(Yl.currentTarget.style.background="#F9F9F9")},onMouseLeave:Yl=>{Ou!=="grid"&&(Yl.currentTarget.style.background="transparent")},children:[jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{flexShrink:0},children:[jsxRuntimeExports.jsx("rect",{x:"2",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"9",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"2",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"9",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2",fill:"none"})]}),jsxRuntimeExports.jsx("span",{children:"Grid"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Du("table"),s0(!1)},style:{width:"100%",padding:"8px 12px",background:Ou==="table"?"#F5F5F5":"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"400",color:"#252525",display:"flex",alignItems:"center",gap:"10px",textAlign:"left",fontFamily:FONT_FAMILY,transition:"background 0.15s"},onMouseEnter:Yl=>{Ou!=="table"&&(Yl.currentTarget.style.background="#F9F9F9")},onMouseLeave:Yl=>{Ou!=="table"&&(Yl.currentTarget.style.background="transparent")},children:[jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{flexShrink:0},children:[jsxRuntimeExports.jsx("circle",{cx:"3",cy:"4",r:"1",fill:"currentColor"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"4",x2:"13",y2:"4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("circle",{cx:"3",cy:"8",r:"1",fill:"currentColor"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"8",x2:"13",y2:"8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("circle",{cx:"3",cy:"12",r:"1",fill:"currentColor"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"12",x2:"13",y2:"12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),jsxRuntimeExports.jsx("span",{children:"Table"})]})]})]})]}),Ku&&jsxRuntimeExports.jsxs("div",{style:{padding:"0 32px 16px 32px",display:"flex",gap:"8px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{onClick:C0,className:"btn btn-secondary btn-md",children:"Select All"}),jsxRuntimeExports.jsx("button",{onClick:W0,className:"btn btn-default btn-md",children:"Copy"}),jsxRuntimeExports.jsx("button",{onClick:rv,className:"btn btn-success btn-md",children:"Share"}),jsxRuntimeExports.jsx("button",{onClick:i1,className:"btn btn-primary btn-md",children:"Move"}),jsxRuntimeExports.jsx("button",{onClick:p0,className:"btn btn-danger btn-md",children:"Delete"}),jsxRuntimeExports.jsx("button",{onClick:f0,className:"btn btn-secondary btn-md",children:"Cancel"})]}),_a&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:jsxRuntimeExports.jsxs("div",{style:{width:"560px",background:"#1f1f1f",color:"#eaeaea",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0,0,0,0.45)",border:"1px solid #2a2a2a",padding:"24px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"24px",fontWeight:700,textAlign:"center",marginBottom:"20px"},children:"Create New Project"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",fontWeight:600,marginBottom:"8px"},children:"Project Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:Np,onChange:Yl=>Vp(Yl.target.value),placeholder:"Enter a descriptive name for your project",style:{width:"100%",padding:"12px 14px",borderRadius:"10px",border:"1px solid #333",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,marginBottom:"18px"}}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",fontWeight:600,marginBottom:"8px"},children:"Upload PDFs"}),jsxRuntimeExports.jsxs("div",{onDrop:Wp,onDragOver:y0,onDragLeave:lm,style:{padding:"24px",borderRadius:"12px",border:`2px dashed ${up?"#4A90E2":"#3a3a3a"}`,background:up?"rgba(74, 144, 226, 0.08)":"#161616",textAlign:"center",transition:"all 0.15s"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{var Yl;return(Yl=xa.current)==null?void 0:Yl.click()},style:{padding:"10px 14px",background:"#2a2a2a",color:"#eaeaea",border:"1px solid #3a3a3a",borderRadius:"10px",cursor:"pointer",fontWeight:600},children:[jsxRuntimeExports.jsx(Icon,{name:"template",size:24,style:{marginRight:"8px"}})," Select Files"]}),jsxRuntimeExports.jsx("div",{style:{color:"#9a9a9a",fontSize:"13px",marginTop:"10px"},children:"or drag and drop PDFs here"}),jsxRuntimeExports.jsx("div",{style:{color:"#6f6f6f",fontSize:"12px",marginTop:"4px"},children:"You can add multiple files"}),Ru.length>0&&jsxRuntimeExports.jsx("div",{style:{marginTop:"14px",textAlign:"left",maxHeight:"160px",overflow:"auto",borderTop:"1px solid #2a2a2a",paddingTop:"10px"},children:Ru.map((Yl,nu)=>jsxRuntimeExports.jsxs("div",{style:{fontSize:"13px",color:"#cfcfcf",marginBottom:"6px"},children:[jsxRuntimeExports.jsx(Icon,{name:"document",size:14,style:{marginRight:"6px",display:"inline-block",verticalAlign:"middle"}})," ",Yl.name]},`${Yl.name}-${nu}`))})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"22px"},children:[jsxRuntimeExports.jsx("button",{onClick:mm,style:{padding:"10px 14px",background:"#2a2a2a",color:"#eaeaea",border:"1px solid #3a3a3a",borderRadius:"10px",cursor:"pointer"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:F0,style:{padding:"10px 14px",background:"#4A90E2",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:600,opacity:Np.trim()&&Ru.length>0?1:.7},children:"Create Project"})]})]})}),xl&&jsxRuntimeExports.jsx("div",{onMouseDown:y1,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:jsxRuntimeExports.jsxs("div",{style:{width:"700px",maxHeight:"90vh",overflow:"auto",background:"#1f1f1f",color:"#eaeaea",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.45)",border:"1px solid #2a2a2a",padding:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px"},children:Yu?"Edit Template":"Create Template"}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",marginBottom:"16px",alignItems:"end"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",fontWeight:500,marginBottom:"4px",color:"#aaa"},children:"Template Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:El,onChange:Yl=>Sl(Yl.target.value),placeholder:"e.g., Security",style:{width:"100%",padding:"8px 10px",borderRadius:"6px",border:"1px solid #333",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,fontSize:"13px"}})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",fontWeight:500,marginBottom:"4px",color:"#aaa"},children:"Visibility"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"6px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>Tl("personal"),style:{padding:"8px 12px",background:Cl==="personal"?"#3498db":"#2a2a2a",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:500,fontSize:"12px"},children:"Personal"}),jsxRuntimeExports.jsx("button",{onClick:()=>Tl("shared"),title:"Shared is a placeholder for team sharing",style:{padding:"8px 12px",background:Cl==="shared"?"#6C757D":"#2a2a2a",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:500,fontSize:"12px",opacity:.9},children:"Shared"})]})]})]}),El.trim()&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",fontWeight:500,marginBottom:"6px",color:"#aaa"},children:"Modules"}),jsxRuntimeExports.jsx("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:lu?jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"6px"},children:[jsxRuntimeExports.jsxs(DndContext,{sensors:xm,collisionDetection:closestCenter,onDragStart:s1,onDragEnd:vm,onDragCancel:Um,children:[jsxRuntimeExports.jsx(SortableContext,{items:Dl.map(Yl=>Yl.id),strategy:verticalListSortingStrategy,children:jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:Dl.map(Yl=>jsxRuntimeExports.jsx(TemplateModuleSortableRow,{module:Yl,isSelected:Vl.includes(Yl.id),nameValue:Ll[Yl.id]!==void 0?Ll[Yl.id]:Yl.name,onToggleSelect:S0,onNameChange:nx,onNameKeyDown:ax,disabled:!lu},Yl.id))})}),jsxRuntimeExports.jsx(DragOverlay,{children:Ix&&jsxRuntimeExports.jsx(TemplateDragOverlayItem,{label:Ix.name})})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"4px"},children:[jsxRuntimeExports.jsx("button",{onClick:e0,disabled:Vl.length===0,className:"btn btn-secondary",style:{padding:"6px 12px",borderRadius:"6px",fontSize:"12px",opacity:Vl.length===0?.5:1,cursor:Vl.length===0?"not-allowed":"pointer"},children:"Duplicate"}),jsxRuntimeExports.jsx("button",{onClick:Z0,className:"btn btn-secondary",style:{padding:"6px 12px",borderRadius:"6px",fontSize:"12px"},children:"Move/Copy"}),jsxRuntimeExports.jsx("button",{onClick:km,className:"btn btn-secondary",style:{padding:"6px 12px",borderRadius:"6px",fontSize:"12px"},children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>{if(Vl.length===0)return;const Yl=Dl.filter(ju=>Vl.includes(ju.id)).map(ju=>ju.name).join(", "),nu=Vl.length===1?`Are you sure you want to delete the module "${Yl}"? This will also delete all categories and checklist items within it.`:`Are you sure you want to delete ${Vl.length} modules (${Yl})? This will also delete all categories and checklist items within them.`;window.confirm(nu)&&(rx(Vl),Ql([]))},disabled:Vl.length===0,className:"btn btn-danger",style:{padding:"6px 12px",borderRadius:"6px",fontSize:"12px",opacity:Vl.length===0?.5:1,cursor:Vl.length===0?"not-allowed":"pointer"},children:"Delete"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("select",{value:Pl||"",onChange:Yl=>b0(Yl.target.value||null),disabled:Dl.length===0,style:{flex:1,padding:"8px 10px",paddingRight:"30px",borderRadius:"6px",border:"1px solid #333",outline:"none",background:"#141414",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='none' stroke='%23eaeaea' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round' d='M1 1l5 5 5-5'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"12px",color:"#eaeaea",fontFamily:FONT_FAMILY,cursor:"pointer",fontSize:"13px",appearance:"none",WebkitAppearance:"none",MozAppearance:"none"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a module..."}),Dl.map(Yl=>jsxRuntimeExports.jsx("option",{value:Yl.id,children:Yl.name},Yl.id))]}),jsxRuntimeExports.jsx("button",{onClick:Bm,className:"btn btn-secondary",style:{padding:"8px 12px",borderRadius:"6px",fontSize:"12px"},children:"Add"}),Dl.length>0&&jsxRuntimeExports.jsx("button",{onClick:Dx,className:"btn btn-secondary",style:{padding:"8px 12px",borderRadius:"6px",fontSize:"12px"},children:"Edit"})]})}),Bl&&!lu&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",marginTop:"6px"},children:[jsxRuntimeExports.jsx("input",{type:"text",value:zl,onChange:Yl=>Hl(Yl.target.value),onKeyDown:Yl=>{Yl.key==="Enter"?Rx():Yl.key==="Escape"&&tm()},placeholder:"Enter module name...",autoFocus:!0,style:{flex:1,padding:"8px 10px",borderRadius:"6px",border:"1px solid #4A90E2",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,fontSize:"13px"}}),jsxRuntimeExports.jsx("button",{onClick:Rx,className:"btn btn-secondary",style:{padding:"8px 12px",borderRadius:"6px",fontSize:"12px"},children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:tm,className:"btn btn-secondary",style:{padding:"8px 12px",borderRadius:"6px",background:"#2a2a2a",fontSize:"12px"},children:"Cancel"})]})]}),El.trim()&&Pl&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",fontWeight:500,marginBottom:"6px",color:"#aaa"},children:"Categories"}),(()=>{const Yl=Dl.find(nu=>nu.id===Pl);return Yl?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:xu?jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"6px"},children:[jsxRuntimeExports.jsxs(DndContext,{sensors:_m,collisionDetection:closestCenter,onDragStart:a1,onDragEnd:l1,onDragCancel:c1,children:[jsxRuntimeExports.jsx(SortableContext,{items:(Yl.categories||[]).map(nu=>nu.id),strategy:verticalListSortingStrategy,children:jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:(Yl.categories||[]).map(nu=>jsxRuntimeExports.jsx(TemplateCategorySortableRow,{category:nu,isSelected:Jl.includes(nu.id),nameValue:Ml[nu.id]!==void 0?Ml[nu.id]:nu.name,onToggleSelect:h1,onNameChange:Rm,onNameKeyDown:u1,disabled:!xu},nu.id))})}),jsxRuntimeExports.jsx(DragOverlay,{children:Mx&&jsxRuntimeExports.jsx(TemplateDragOverlayItem,{label:Mx.name})})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"4px"},children:[jsxRuntimeExports.jsx("button",{onClick:p1,disabled:Jl.length===0,className:"btn btn-secondary",style:{padding:"6px 12px",borderRadius:"6px",fontSize:"12px",opacity:Jl.length===0?.5:1,cursor:Jl.length===0?"not-allowed":"pointer"},children:"Duplicate"}),jsxRuntimeExports.jsx("button",{onClick:f1,className:"btn btn-secondary",style:{padding:"6px 12px",borderRadius:"6px",fontSize:"12px"},children:"Move/Copy"}),jsxRuntimeExports.jsx("button",{onClick:d1,className:"btn btn-secondary",style:{padding:"6px 12px",borderRadius:"6px",fontSize:"12px"},children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>{if(Jl.length===0||!Pl)return;const nu=Dl.find(Bu=>Bu.id===Pl);if(!nu)return;const ju=(nu.categories||[]).filter(Bu=>Jl.includes(Bu.id)).map(Bu=>Bu.name).join(", "),Wu=Jl.length===1?`Are you sure you want to delete the category "${ju}"? This will also delete all checklist items within it.`:`Are you sure you want to delete ${Jl.length} categories (${ju})? This will also delete all checklist items within them.`;window.confirm(Wu)&&(V0(Pl,Jl),iu([]))},disabled:Jl.length===0,className:"btn btn-danger",style:{padding:"6px 12px",borderRadius:"6px",fontSize:"12px",opacity:Jl.length===0?.5:1,cursor:Jl.length===0?"not-allowed":"pointer"},children:"Delete"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("select",{value:Rl||"",onChange:nu=>T0(nu.target.value||null),disabled:(Yl.categories||[]).length===0,style:{flex:1,padding:"8px 10px",paddingRight:"30px",borderRadius:"6px",border:"1px solid #333",outline:"none",background:"#141414",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='none' stroke='%23eaeaea' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round' d='M1 1l5 5 5-5'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"12px",color:"#eaeaea",fontFamily:FONT_FAMILY,cursor:"pointer",fontSize:"13px",appearance:"none",WebkitAppearance:"none",MozAppearance:"none"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a category..."}),(Yl.categories||[]).map(nu=>jsxRuntimeExports.jsx("option",{value:nu.id,children:nu.name},nu.id))]}),jsxRuntimeExports.jsx("button",{onClick:cm,className:"btn btn-secondary",style:{padding:"8px 12px",borderRadius:"6px",fontSize:"12px"},children:"Add"}),(Yl.categories||[]).length>0&&jsxRuntimeExports.jsx("button",{onClick:o1,className:"btn btn-secondary",style:{padding:"8px 12px",borderRadius:"6px",fontSize:"12px"},children:"Edit"})]})}),ou&&!xu&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",marginTop:"6px"},children:[jsxRuntimeExports.jsx("input",{type:"text",value:_c,onChange:nu=>uu(nu.target.value),onKeyDown:nu=>{nu.key==="Enter"?I0():nu.key==="Escape"&&ym()},placeholder:"Enter category name...",autoFocus:!0,style:{flex:1,padding:"8px 10px",borderRadius:"6px",border:"1px solid #4A90E2",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,fontSize:"13px"}}),jsxRuntimeExports.jsx("button",{onClick:I0,className:"btn btn-secondary",style:{padding:"8px 12px",borderRadius:"6px",fontSize:"12px"},children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:ym,className:"btn btn-secondary",style:{padding:"8px 12px",borderRadius:"6px",background:"#2a2a2a",fontSize:"12px"},children:"Cancel"})]})]}):null})()]}),El.trim()&&Pl&&Rl&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",fontWeight:500,marginBottom:"6px",color:"#aaa"},children:"Checklist Items"}),(()=>{const Yl=Dl.find(ju=>ju.id===Pl);if(!Yl)return null;const nu=(Yl.categories||[]).find(ju=>ju.id===Rl);return nu?jsxRuntimeExports.jsxs("div",{style:{padding:"10px",background:"#141414",borderRadius:"8px",border:"1px solid #2a2a2a"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",fontWeight:500,marginBottom:"8px",color:"#cfcfcf"},children:nu.name}),jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px",marginBottom:"8px"},children:(nu.checklist||[]).map(ju=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[jsxRuntimeExports.jsx("input",{type:"text",value:ju.text,onChange:Wu=>m1(Pl,nu.id,ju.id,Wu.target.value),placeholder:"Checklist item (e.g., Cable pulled)",style:{flex:1,padding:"6px 8px",background:"#1b1b1b",color:"#ddd",border:"1px solid #2f2f2f",borderRadius:"6px",outline:"none",fontFamily:FONT_FAMILY,fontSize:"13px"}}),jsxRuntimeExports.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete the checklist item "${ju.text||"Untitled Item"}"?`)&&x1(Pl,nu.id,ju.id)},title:"Delete",className:"btn btn-danger btn-icon-only btn-sm",style:{padding:"6px",minWidth:"28px",minHeight:"28px"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:11})})]},ju.id))}),jsxRuntimeExports.jsx("button",{onClick:()=>g1(Pl,nu.id),className:"btn btn-secondary",style:{padding:"6px 12px",borderRadius:"6px",fontSize:"12px"},children:"+ Add Item"})]}):null})()]}),jsxRuntimeExports.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#141414",border:"1px solid #2a2a2a",borderRadius:"8px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"13px",fontWeight:600},children:"Ball in Court"}),jsxRuntimeExports.jsx("button",{onClick:v1,className:"btn btn-secondary btn-sm",style:{padding:"6px 10px",fontSize:"12px"},children:"+ Add Entity"})]}),jsxRuntimeExports.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"10px"},children:"Define entities and their highlight colors for responsibility tracking"}),jsxRuntimeExports.jsx("style",{children:`
                  body.ball-in-court-dragging [data-ball-delete] {
                    display: none !important;
                  }
                `}),jsxRuntimeExports.jsxs(DndContext,{sensors:Tp,collisionDetection:closestCenter,onDragStart:lp,onDragEnd:$u,onDragCancel:Zu,children:[jsxRuntimeExports.jsx(SortableContext,{items:gu.map(Yl=>Yl.id),strategy:verticalListSortingStrategy,children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[gu.map(Yl=>jsxRuntimeExports.jsx(BallInCourtSortableRow,{entity:Yl,selectedColorPickerId:Pu,onOpenColorPicker:Xm,onNameChange:fx,onDelete:()=>hx(Yl.id),isAnyDragging:Ap},Yl.id)),gu.length===0&&jsxRuntimeExports.jsx("div",{style:{color:"#888",fontSize:"13px",fontStyle:"italic",padding:"12px"},children:"No entities defined. Add at least one entity for Ball in Court tracking."})]})}),jsxRuntimeExports.jsx(DragOverlay,{children:qp&&jsxRuntimeExports.jsx(BallInCourtDragOverlayItem,{entity:qp})})]})]}),Pu&&(()=>{const Yl=gu.find(op=>op.id===Pu);if(!Yl)return null;const nu=op=>{if(op.startsWith("rgba")){const _p=op.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(_p){const Mp=parseInt(_p[1]).toString(16).padStart(2,"0"),Yp=parseInt(_p[2]).toString(16).padStart(2,"0"),w0=parseInt(_p[3]).toString(16).padStart(2,"0");return`#${Mp}${Yp}${w0}`}}return op.startsWith("#")?op:"#E3D1FB"},ju=op=>100,Wu=Mu?Mu.hex:nu(Yl.color),Bu=Mu?Mu.opacity:ju(Yl.color),Xu=hexToRgb(Wu),ip=rgbToHsl(Xu.r,Xu.g,Xu.b),cp=(op,_p,Mp,Yp=Bu)=>{const w0=hslToRgb(op,_p,Mp),Gl=`#${w0.r.toString(16).padStart(2,"0")}${w0.g.toString(16).padStart(2,"0")}${w0.b.toString(16).padStart(2,"0")}`;hp({hex:Gl,opacity:Yp})},yp=generateColorSwatches();return jsxRuntimeExports.jsx("div",{onClick:op=>{op.target===op.currentTarget&&(Lu(null),hp(null),Rp(null),Bp(!1))},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",zIndex:10004,display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{onClick:op=>op.stopPropagation(),"data-color-picker-dialog":!0,style:{background:"#2b2b2b",border:"1px solid #444",borderRadius:"8px",padding:"20px",width:Ju==="grid"?"520px":"420px",maxWidth:"90vw",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#fff",fontFamily:FONT_FAMILY},children:"Choose Color"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Vu("grid"),Rp(null),Bp(!1)},style:{width:"32px",height:"32px",background:Ju==="grid"?"#555":"#333",border:"1px solid #444",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0},title:"Grid View",children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[jsxRuntimeExports.jsx("rect",{x:"2",y:"2",width:"5",height:"5",fill:"#fff"}),jsxRuntimeExports.jsx("rect",{x:"9",y:"2",width:"5",height:"5",fill:"#fff"}),jsxRuntimeExports.jsx("rect",{x:"2",y:"9",width:"5",height:"5",fill:"#fff"}),jsxRuntimeExports.jsx("rect",{x:"9",y:"9",width:"5",height:"5",fill:"#fff"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>{Vu("advanced"),Rp(null),Bp(!1)},style:{width:"32px",height:"32px",background:Ju==="advanced"?"#555":"#333",border:"1px solid #444",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0},title:"Advanced Picker",children:jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:jsxRuntimeExports.jsx("path",{d:"M8 2L10 6L14 8L10 10L8 14L6 10L2 8L6 6L8 2Z",fill:"#fff"})})})]})]}),Ju==="grid"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 1fr)",gap:"4px",marginBottom:"20px"},children:yp.map((op,_p)=>{const Mp=Wu.toLowerCase()===op.toLowerCase();return jsxRuntimeExports.jsx("div",{onClick:()=>{const Yp=Mu?Mu.opacity:Bu,w0=hexToRgba(op,Yp/100);O0(Yl.id,{color:w0}),Lu(null),hp(null)},style:{width:"100%",aspectRatio:"1",background:op,borderRadius:"4px",cursor:"pointer",border:Mp?"2px solid #4A90E2":"1px solid #444",boxSizing:"border-box",transition:"border 0.2s"},onMouseEnter:Yp=>{Mp||(Yp.currentTarget.style.border="2px solid #666")},onMouseLeave:Yp=>{Mp||(Yp.currentTarget.style.border="1px solid #444")}},_p)})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[jsxRuntimeExports.jsx("label",{style:{fontSize:"13px",color:"#999",minWidth:"60px"},children:"Opacity:"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:Bu,onChange:op=>{const _p=parseFloat(op.target.value);hp({hex:Wu,opacity:_p})},onClick:op=>op.stopPropagation(),onMouseDown:op=>op.stopPropagation(),style:{flex:1,height:"4px",background:`linear-gradient(to right, transparent, ${Wu})`,borderRadius:"2px",outline:"none",cursor:"pointer"}}),jsxRuntimeExports.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:Lp?mp!==null?mp.toString():"":Math.round(Bu).toString(),onChange:op=>{const _p=op.target.value;if(_p===""){Rp("");return}if(/^\d+$/.test(_p)){const Mp=parseInt(_p,10);if(!isNaN(Mp)){const Yp=Math.max(0,Math.min(100,Mp));Rp(_p),hp({hex:Wu,opacity:Yp})}}},onBlur:op=>{Bp(!1);const _p=op.target.value.trim();if(_p===""||isNaN(parseInt(_p,10))){Rp(null);const Mp=Mu?Mu.opacity:Bu;hp({hex:Wu,opacity:Mp})}else{const Mp=parseInt(_p,10),Yp=Math.max(0,Math.min(100,Mp));Rp(null),hp({hex:Wu,opacity:Yp})}},onFocus:op=>{op.stopPropagation(),Bp(!0),op.target.select();const _p=Mu?Mu.opacity:Bu;Rp(Math.round(_p).toString())},onClick:op=>{op.stopPropagation(),op.target.select()},onKeyDown:op=>{op.stopPropagation(),!(op.key==="Delete"||op.key==="Backspace"||op.key==="ArrowLeft"||op.key==="ArrowRight")&&(/^\d$/.test(op.key)||op.ctrlKey||op.metaKey||op.preventDefault())},style:{width:"60px",padding:"6px 8px",background:"#141414",color:"#ddd",border:"1px solid #2f2f2f",borderRadius:"6px",outline:"none",fontSize:"13px",fontFamily:"monospace",textAlign:"center"}}),jsxRuntimeExports.jsx("span",{style:{color:"#ddd",fontWeight:"500",fontSize:"13px"},children:"%"})]})]}),Ju==="advanced"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{position:"relative",marginBottom:"16px"},children:jsxRuntimeExports.jsxs("div",{style:{width:"100%",aspectRatio:"1",borderRadius:"6px",position:"relative",cursor:"crosshair",border:"1px solid #444",overflow:"hidden"},onMouseDown:op=>{const _p=op.currentTarget.getBoundingClientRect(),Mp=(op.clientX-_p.left)/_p.width,Yp=(op.clientY-_p.top)/_p.height,w0=Math.max(0,Math.min(100,Mp*100)),Gl=Math.max(0,Math.min(100,(1-Yp)*100));cp(ip.h,w0,Gl,Bu)},onMouseMove:op=>{if(op.buttons===1){const _p=op.currentTarget.getBoundingClientRect(),Mp=(op.clientX-_p.left)/_p.width,Yp=(op.clientY-_p.top)/_p.height,w0=Math.max(0,Math.min(100,Mp*100)),Gl=Math.max(0,Math.min(100,(1-Yp)*100));cp(ip.h,w0,Gl,Bu)}},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`hsl(${ip.h}, 100%, 50%)`}}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to right, white, transparent)",mixBlendMode:"multiply"}}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, transparent, black)"}}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:`${ip.s}%`,top:`${100-ip.l}%`,width:"12px",height:"12px",borderRadius:"50%",border:"2px solid white",background:Wu,transform:"translate(-50%, -50%)",pointerEvents:"none",boxShadow:"0 0 0 1px rgba(0,0,0,0.3)"}})]})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:jsxRuntimeExports.jsx("path",{d:"M8 2L10 6L14 8L10 10L8 14L6 10L2 8L6 6L8 2Z",fill:Wu,stroke:"#fff",strokeWidth:"1"})})}),jsxRuntimeExports.jsxs("div",{style:{flex:1,position:"relative",height:"24px",background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)",borderRadius:"4px",border:"1px solid #444"},children:[jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"360",step:"1",value:ip.h,onChange:op=>{const _p=parseFloat(op.target.value);cp(_p,ip.s,ip.l,Bu)},style:{width:"100%",height:"100%",background:"transparent",outline:"none",cursor:"pointer",WebkitAppearance:"none",appearance:"none",margin:0,padding:0}}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:`${ip.h/360*100}%`,top:"50%",transform:"translate(-50%, -50%)",width:"4px",height:"24px",background:"white",borderRadius:"2px",pointerEvents:"none",boxShadow:"0 0 2px rgba(0,0,0,0.5)"}})]})]}),jsxRuntimeExports.jsx("div",{style:{marginBottom:"16px"},children:jsxRuntimeExports.jsx("input",{type:"text",value:Wu.toUpperCase(),onChange:op=>{let _p=op.target.value.trim().toUpperCase();if(_p.startsWith("#")||(_p="#"+_p),/^#[0-9A-F]{0,6}$/.test(_p))if(_p.length===7)try{const Mp=hexToRgb(_p),Yp=rgbToHsl(Mp.r,Mp.g,Mp.b);hp({hex:_p,opacity:Bu})}catch{}else hp(Mp=>({...Mp,hex:_p,opacity:Bu}))},onBlur:op=>{let _p=op.target.value.trim().toUpperCase();if(_p.startsWith("#")||(_p="#"+_p),/^#[0-9A-F]{6}$/.test(_p))try{const Mp=hexToRgb(_p),Yp=rgbToHsl(Mp.r,Mp.g,Mp.b);hp({hex:_p,opacity:Bu})}catch{hp({hex:Wu,opacity:Bu})}else hp({hex:Wu,opacity:Bu})},onClick:op=>op.stopPropagation(),onFocus:op=>op.stopPropagation(),style:{width:"100%",padding:"8px 12px",background:"#141414",color:"#ddd",border:"1px solid #2f2f2f",borderRadius:"6px",outline:"none",fontFamily:"monospace",fontSize:"14px"},placeholder:"#00FF00"})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[jsxRuntimeExports.jsx("label",{style:{fontSize:"13px",color:"#999",minWidth:"60px"},children:"Opacity:"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:Bu,onChange:op=>{const _p=parseFloat(op.target.value);hp({hex:Wu,opacity:_p})},onClick:op=>op.stopPropagation(),onMouseDown:op=>op.stopPropagation(),style:{flex:1,height:"4px",background:`linear-gradient(to right, rgba(128,128,128,0.3), ${Wu})`,borderRadius:"2px",outline:"none",cursor:"pointer",WebkitAppearance:"none",appearance:"none"}}),jsxRuntimeExports.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:Lp?mp!==null?mp.toString():"":Math.round(Bu).toString(),onChange:op=>{const _p=op.target.value;if(_p===""){Rp("");return}if(/^\d+$/.test(_p)){const Mp=parseInt(_p,10);if(!isNaN(Mp)){const Yp=Math.max(0,Math.min(100,Mp));Rp(_p),hp({hex:Wu,opacity:Yp})}}},onBlur:op=>{Bp(!1);const _p=op.target.value.trim();if(_p===""||isNaN(parseInt(_p,10))){Rp(null);const Mp=Mu?Mu.opacity:Bu;hp({hex:Wu,opacity:Mp})}else{const Mp=parseInt(_p,10),Yp=Math.max(0,Math.min(100,Mp));Rp(null),hp({hex:Wu,opacity:Yp})}},onFocus:op=>{op.stopPropagation(),Bp(!0),op.target.select();const _p=Mu?Mu.opacity:Bu;Rp(Math.round(_p).toString())},onClick:op=>{op.stopPropagation(),op.target.select()},onKeyDown:op=>{op.stopPropagation(),!(op.key==="Delete"||op.key==="Backspace"||op.key==="ArrowLeft"||op.key==="ArrowRight")&&(/^\d$/.test(op.key)||op.ctrlKey||op.metaKey||op.preventDefault())},style:{width:"60px",padding:"6px 8px",background:"#141414",color:"#ddd",border:"1px solid #2f2f2f",borderRadius:"6px",outline:"none",fontSize:"13px",fontFamily:"monospace",textAlign:"center"}}),jsxRuntimeExports.jsx("span",{style:{color:"#ddd",fontWeight:"500",fontSize:"13px"},children:"%"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",marginTop:"20px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Lu(null),hp(null),Rp(null),Bp(!1)},style:{padding:"8px 16px",background:"#333",color:"#fff",border:"1px solid #444",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontFamily:FONT_FAMILY},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const op=Mu?Mu.opacity:Bu,_p=hexToRgba(Wu,op/100);O0(Yl.id,{color:_p}),Lu(null),hp(null),Rp(null),Bp(!1)},style:{padding:"8px 16px",background:"#4A90E2",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontFamily:FONT_FAMILY,fontWeight:"500"},children:"Apply"})]})]})})})(),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #2a2a2a"},children:[jsxRuntimeExports.jsx("button",{onClick:Pm,className:"btn btn-secondary",style:{padding:"8px 16px",borderRadius:"6px",fontSize:"13px"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:b1,className:"btn btn-primary",disabled:!El.trim(),style:{padding:"8px 16px",borderRadius:"6px",fontSize:"13px"},children:Yu?"Save Changes":"Save Template"})]})]})}),Cu&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:jsxRuntimeExports.jsxs("div",{style:{width:"600px",maxHeight:"85vh",overflow:"auto",background:"#1f1f1f",color:"#eaeaea",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.45)",border:"1px solid #2a2a2a",padding:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px"},children:Fu==="module"?"Move/Copy Modules":Fu==="category"?"Move/Copy Categories":"Move/Copy Checklist Items"}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",fontWeight:500,marginBottom:"6px",color:"#aaa"},children:"Action"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>eu("copy"),style:{padding:"8px 16px",background:tu==="copy"?"#4A90E2":"#2a2a2a",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:500,fontSize:"12px"},children:"Copy"}),jsxRuntimeExports.jsx("button",{onClick:()=>eu("move"),style:{padding:"8px 16px",background:tu==="move"?"#4A90E2":"#2a2a2a",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:500,fontSize:"12px"},children:"Move"})]})]}),Fu==="module"&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",fontWeight:500,marginBottom:"6px",color:"#aaa"},children:"Destination Template"}),jsxRuntimeExports.jsxs("select",{value:Sm||"",onChange:Yl=>{Em(Yl.target.value),dm("")},style:{width:"100%",padding:"8px 10px",borderRadius:"6px",border:"1px solid #333",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,cursor:"pointer",fontSize:"13px"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select destination template..."}),jsxRuntimeExports.jsx("option",{value:"new",children:"Create New Template"}),du.filter(Yl=>Yu?Yl.id!==Yu:!0).map(Yl=>jsxRuntimeExports.jsx("option",{value:Yl.id,children:Yl.name},Yl.id))]}),Sm==="new"&&jsxRuntimeExports.jsx("input",{type:"text",value:lx,onChange:Yl=>dm(Yl.target.value),placeholder:"New template name...",style:{width:"100%",padding:"8px 10px",borderRadius:"6px",border:"1px solid #4A90E2",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,fontSize:"13px",marginTop:"8px"}})]}),Fu==="category"&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",fontWeight:500,marginBottom:"6px",color:"#aaa"},children:"Destination Space"}),jsxRuntimeExports.jsxs("select",{value:N0||"",onChange:Yl=>{um(Yl.target.value),hm(""),J0("")},style:{width:"100%",padding:"8px 10px",borderRadius:"6px",border:"1px solid #333",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,cursor:"pointer",fontSize:"13px"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select destination module..."}),jsxRuntimeExports.jsx("option",{value:"new",children:"Create New Module"}),Dl.filter(Yl=>Yl.id!==Pl).map(Yl=>jsxRuntimeExports.jsx("option",{value:Yl.id,children:Yl.name},Yl.id))]}),N0==="new"&&jsxRuntimeExports.jsx("input",{type:"text",value:Vm,onChange:Yl=>hm(Yl.target.value),placeholder:"New module name...",style:{width:"100%",padding:"8px 10px",borderRadius:"6px",border:"1px solid #4A90E2",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,fontSize:"13px",marginTop:"8px"}}),x0&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"12px",display:"flex",flexDirection:"column",gap:"6px"},children:[jsxRuntimeExports.jsxs("label",{style:{fontSize:"12px",fontWeight:500,color:"#aaa"},children:["New category name",Nx?" (required to resolve duplicate)":""]}),jsxRuntimeExports.jsx("input",{type:"text",value:Dm,onChange:Yl=>J0(Yl.target.value),placeholder:tu==="copy"?"Name to use for the copied category...":"New name before moving into destination module...",style:{width:"100%",padding:"8px 10px",borderRadius:"6px",border:"1px solid #333",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,fontSize:"13px"}}),tu==="copy"&&jsxRuntimeExports.jsx("div",{style:{fontSize:"11px",color:"#6f6f6f"},children:"Only the copied category uses this name; the original keeps its current name."})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",marginTop:"16px",paddingTop:"12px",borderTop:"1px solid #2a2a2a"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Tu(!1),Em(null),um(null),Cm(null),dm(""),hm(""),J0("")},className:"btn btn-secondary",style:{padding:"8px 16px",borderRadius:"6px",fontSize:"13px"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Tm,className:"btn btn-primary",disabled:Fu==="module"&&!Sm||Fu==="module"&&Sm==="new"&&!lx.trim()||Fu==="category"&&!N0||Fu==="category"&&N0==="new"&&!Vm.trim(),style:{padding:"8px 16px",borderRadius:"6px",fontSize:"13px"},children:tu==="move"?"Move":"Copy"})]})]})}),wl&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:jsxRuntimeExports.jsxs("div",{style:{width:"560px",background:"#1f1f1f",color:"#eaeaea",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0,0,0,0.45)",border:"1px solid #2a2a2a",padding:"24px"},children:[jsxRuntimeExports.jsxs("div",{style:{fontSize:"24px",fontWeight:700,textAlign:"center",marginBottom:"20px"},children:["Move ",fp.length," document(s)"]}),h0()==="projectFiles"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"Move to Documents"}),jsxRuntimeExports.jsxs("button",{onClick:()=>Y0(null,!1,!0),style:{width:"100%",padding:"12px 14px",background:"#28A745",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",marginBottom:"20px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:Yl=>{Yl.currentTarget.style.background="#218838"},onMouseLeave:Yl=>{Yl.currentTarget.style.background="#28A745"},children:[jsxRuntimeExports.jsx(Icon,{name:"document",size:14,style:{marginRight:"6px"}})," Move to Documents Tab"]}),jsxRuntimeExports.jsx("div",{style:{borderTop:"1px solid #3a3a3a",paddingTop:"20px",marginBottom:"20px"}})]}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"Move to existing project"}),(()=>{const Yl=h0()==="projectFiles"?Eu.filter(nu=>nu.id!==hu):Eu;return Yl.length===0?jsxRuntimeExports.jsx("div",{style:{color:"#888",fontSize:"13px",marginBottom:"20px",fontStyle:"italic"},children:h0()==="projectFiles"?"No other projects available":"No existing projects"}):jsxRuntimeExports.jsx("div",{style:{maxHeight:"200px",overflow:"auto",marginBottom:"20px"},children:Yl.map(nu=>jsxRuntimeExports.jsxs("button",{onClick:()=>Y0(nu.id,!1),style:{width:"100%",padding:"12px 14px",background:"#2a2a2a",color:"#eaeaea",border:"1px solid #3a3a3a",borderRadius:"10px",cursor:"pointer",marginBottom:"8px",textAlign:"left",transition:"all 0.2s"},onMouseEnter:ju=>{ju.currentTarget.style.background="#4A90E2",ju.currentTarget.style.borderColor="#4A90E2"},onMouseLeave:ju=>{ju.currentTarget.style.background="#2a2a2a",ju.currentTarget.style.borderColor="#3a3a3a"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",fontWeight:600},children:nu.name}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:[(nu.pdfs||[]).length," file(s)"]})]},nu.id))})})(),jsxRuntimeExports.jsx("div",{style:{borderTop:"1px solid #3a3a3a",paddingTop:"20px",marginBottom:"20px"}}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"Create new project"}),jsxRuntimeExports.jsx("input",{type:"text",value:Np,onChange:Yl=>Vp(Yl.target.value),placeholder:"Enter project name",style:{width:"100%",padding:"12px 14px",borderRadius:"10px",border:"1px solid #333",outline:"none",background:"#141414",color:"#eaeaea",fontFamily:FONT_FAMILY,marginBottom:"18px"}}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{_l(!1),Vp("")},className:"btn btn-secondary btn-md",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>Y0(null,!0),className:"btn btn-primary btn-md",disabled:!Np.trim(),children:"Create & Move"})]})]})}),jsxRuntimeExports.jsx("div",{style:{flex:1,padding:"32px",overflow:"auto",background:"#1E1E1E"},children:$l==="documents"&&g0.length===0?jsxRuntimeExports.jsxs("div",{style:{background:"transparent",borderRadius:"12px",padding:"80px 60px",textAlign:"center",color:"#9A9A9A"},children:[jsxRuntimeExports.jsx("div",{style:{display:"block",marginBottom:"24px",opacity:.6},children:jsxRuntimeExports.jsx(Icon,{name:"document",size:64})}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:"0 0 8px 0",color:"#FFFFFF"},children:"No documents yet"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",color:"#9A9A9A",margin:0},children:"Upload your first PDF to get started"})]}):$l==="projects"&&!hu&&B0.length===0?jsxRuntimeExports.jsxs("div",{style:{background:"transparent",borderRadius:"12px",padding:"80px 60px",textAlign:"center",color:"#9A9A9A"},children:[jsxRuntimeExports.jsx("div",{style:{display:"block",marginBottom:"24px",opacity:.6},children:jsxRuntimeExports.jsx(Icon,{name:"folder",size:64})}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:"0 0 8px 0",color:"#FFFFFF"},children:"No projects yet"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",color:"#9A9A9A",margin:0},children:"Create your first project to organize PDFs"})]}):$l==="projects"&&hu&&(((Bx=Eu.find(Yl=>Yl.id===hu))==null?void 0:Bx.pdfs)||[]).length===0?jsxRuntimeExports.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"60px",textAlign:"center",color:"#999"},children:[jsxRuntimeExports.jsx(Icon,{name:"document",size:48}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"500",margin:"16px 0 8px",color:"#666"},children:"No files in this project"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px"},children:"Add PDFs to this project from the create project dialog"})]}):$l==="templates"&&!Nu&&tx.length===0?jsxRuntimeExports.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"60px",textAlign:"center",color:"#999"},children:[jsxRuntimeExports.jsx(Icon,{name:"template",size:64}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"500",margin:"16px 0 8px",color:"#666"},children:"No templates yet"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px"},children:"Create a template to reuse annotations and layouts"})]}):$l==="templates"&&Nu&&(((mx=du.find(Yl=>Yl.id===Nu))==null?void 0:mx.pdfs)||[]).length===0?jsxRuntimeExports.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"60px",textAlign:"center",color:"#999"},children:[jsxRuntimeExports.jsx(Icon,{name:"document",size:48}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"500",margin:"16px 0 8px",color:"#666"},children:"No files in this template"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px"},children:"Add PDFs to this template to start editing"})]}):Ou==="grid"?jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"16px"},children:($l==="documents"?g0:$l==="projects"?hu?((Ux=Eu.find(Yl=>Yl.id===hu))==null?void 0:Ux.pdfs)||[]:B0:Nu?((Im=du.find(Yl=>Yl.id===Nu))==null?void 0:Im.pdfs)||[]:tx).filter(Yl=>vu?$l==="projects"&&!hu?Yl.name.toLowerCase().includes(vu.toLowerCase()):(Yl.name||"").toLowerCase().includes(vu.toLowerCase()):!0).map(Yl=>$l==="documents"?jsxRuntimeExports.jsxs("div",{onClick:nu=>{Ku?(nu.preventDefault(),nu.stopPropagation(),Qp(Yl.id)):K0(Yl)},style:{background:"white",borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},onMouseEnter:nu=>{nu.currentTarget.style.transform="translateY(-4px)",nu.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:nu=>{nu.currentTarget.style.transform="translateY(0)",nu.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)"},children:[Ku&&jsxRuntimeExports.jsx("input",{type:"checkbox",checked:n0(Yl.id),onChange:nu=>{nu.stopPropagation(),Qp(Yl.id,nu)},onClick:nu=>nu.stopPropagation(),style:{position:"absolute",left:"8px",top:"8px",zIndex:10}}),Ku&&jsxRuntimeExports.jsx("button",{onClick:nu=>{nu.stopPropagation(),kx(Yl.id,nu)},className:"btn btn-danger btn-icon-only btn-sm",style:{position:"absolute",top:"8px",right:"8px",zIndex:10,borderRadius:"50%"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:12})}),jsxRuntimeExports.jsx(PDFThumbnail,{dataUrl:Yl.dataUrl,docId:Yl.id}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:"#1E1E1E",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Yl.name}),jsxRuntimeExports.jsx("div",{style:{fontSize:"11px",color:"#999"},children:H0(Yl.size)}),jsxRuntimeExports.jsx("div",{style:{fontSize:"11px",color:"#999",marginTop:"4px"},children:P0(Yl.uploadedAt)})]})]},Yl.id):$l==="projects"&&!hu?jsxRuntimeExports.jsxs("div",{onClick:()=>Ku?Qp(Yl.id):wu(Yl.id),style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",position:"relative"},children:[Ku&&jsxRuntimeExports.jsx("input",{type:"checkbox",checked:n0(Yl.id),onChange:nu=>Qp(Yl.id,nu),style:{position:"absolute",left:"8px",top:"8px"}}),jsxRuntimeExports.jsx(Icon,{name:"folder",size:36}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#2c3e50",marginTop:"8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Yl.name}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"12px",color:"#777",marginTop:"4px"},children:[(Yl.pdfs||[]).length," files  ",P0(Yl.createdAt)]})]},Yl.id):$l==="projects"&&hu?jsxRuntimeExports.jsxs("div",{onClick:nu=>{Ku?(nu.preventDefault(),nu.stopPropagation(),Qp(Yl.id)):K0(Yl)},style:{background:"white",borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},onMouseEnter:nu=>{nu.currentTarget.style.transform="translateY(-4px)",nu.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:nu=>{nu.currentTarget.style.transform="translateY(0)",nu.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)"},children:[Ku&&jsxRuntimeExports.jsx("input",{type:"checkbox",checked:n0(Yl.id),onChange:nu=>{nu.stopPropagation(),Qp(Yl.id,nu)},onClick:nu=>nu.stopPropagation(),style:{position:"absolute",left:"8px",top:"8px",zIndex:10}}),jsxRuntimeExports.jsx(PDFThumbnail,{dataUrl:Yl.dataUrl,docId:Yl.id}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:"#2c3e50",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Yl.name}),jsxRuntimeExports.jsx("div",{style:{fontSize:"11px",color:"#999"},children:H0(Yl.size)}),jsxRuntimeExports.jsx("div",{style:{fontSize:"11px",color:"#999",marginTop:"4px"},children:P0(Yl.uploadedAt)})]})]},Yl.id):$l==="templates"&&!Nu?jsxRuntimeExports.jsxs("div",{onClick:()=>Ku?Qp(Yl.id):gx(Yl.id),style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",position:"relative"},children:[Ku&&jsxRuntimeExports.jsx("input",{type:"checkbox",checked:n0(Yl.id),onChange:nu=>Qp(Yl.id,nu),style:{position:"absolute",left:"8px",top:"8px"}}),jsxRuntimeExports.jsx(Icon,{name:"template",size:36}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#2c3e50",marginTop:"8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Yl.name||"Untitled Template"}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"12px",color:"#777",marginTop:"4px"},children:[(Yl.pdfs||[]).length," files  ",P0(Yl.createdAt||new Date().toISOString())]})]},Yl.id):$l==="templates"&&Nu?jsxRuntimeExports.jsxs("div",{onClick:nu=>{Ku?(nu.preventDefault(),nu.stopPropagation(),Qp(Yl.id)):K0(Yl)},style:{background:"white",borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},onMouseEnter:nu=>{nu.currentTarget.style.transform="translateY(-4px)",nu.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseLeave:nu=>{nu.currentTarget.style.transform="translateY(0)",nu.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)"},children:[Ku&&jsxRuntimeExports.jsx("input",{type:"checkbox",checked:n0(Yl.id),onChange:nu=>{nu.stopPropagation(),Qp(Yl.id,nu)},onClick:nu=>nu.stopPropagation(),style:{position:"absolute",left:"8px",top:"8px",zIndex:10}}),jsxRuntimeExports.jsx(PDFThumbnail,{dataUrl:Yl.dataUrl,docId:Yl.id}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:"#2c3e50",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Yl.name}),jsxRuntimeExports.jsx("div",{style:{fontSize:"11px",color:"#999"},children:H0(Yl.size)}),jsxRuntimeExports.jsx("div",{style:{fontSize:"11px",color:"#999",marginTop:"4px"},children:P0(Yl.uploadedAt)})]})]},Yl.id):jsxRuntimeExports.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[jsxRuntimeExports.jsx(Icon,{name:"template",size:36}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#2c3e50",marginTop:"8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Yl.name||"Untitled Template"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:"#777",marginTop:"4px"},children:P0(Yl.createdAt||new Date().toISOString())})]},Yl.id))}):jsxRuntimeExports.jsx("div",{style:{background:"#2a2a2a",borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:$l==="documents"?jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"#333"},children:[Ku&&jsxRuntimeExports.jsx("th",{style:{width:"44px"}}),jsxRuntimeExports.jsxs("th",{onClick:()=>im("name"),style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf",cursor:"pointer",userSelect:"none"},children:["Document Name ",Cp.key==="name"&&(Cp.direction==="asc"?"":"")]}),jsxRuntimeExports.jsxs("th",{onClick:()=>im("size"),style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf",cursor:"pointer",userSelect:"none"},children:["Size ",Cp.key==="size"&&(Cp.direction==="asc"?"":"")]}),jsxRuntimeExports.jsxs("th",{onClick:()=>im("uploadedAt"),style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf",cursor:"pointer",userSelect:"none"},children:["Last Modified ",Cp.key==="uploadedAt"&&(Cp.direction==="asc"?"":"")]}),Ku&&jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",width:"60px"}})]})}),jsxRuntimeExports.jsx("tbody",{children:g0.map(Yl=>jsxRuntimeExports.jsxs("tr",{onClick:nu=>{Ku?(nu.preventDefault(),nu.stopPropagation(),Qp(Yl.id)):K0(Yl)},style:{borderTop:"1px solid #3a3a3a",cursor:"pointer",transition:"background 0.2s",background:"transparent"},onMouseEnter:nu=>nu.currentTarget.style.background="#333",onMouseLeave:nu=>nu.currentTarget.style.background="transparent",children:[Ku&&jsxRuntimeExports.jsx("td",{style:{padding:"14px 8px"},onClick:nu=>nu.stopPropagation(),children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:n0(Yl.id),onChange:nu=>{nu.stopPropagation(),Qp(Yl.id,nu)},onClick:nu=>nu.stopPropagation()})}),jsxRuntimeExports.jsxs("td",{style:{padding:"14px 16px",fontSize:"14px",color:"#eaeaea",display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx(Icon,{name:"document",size:20}),Yl.name]}),jsxRuntimeExports.jsx("td",{style:{padding:"14px 16px",fontSize:"13px",color:"#9a9a9a"},children:H0(Yl.size)}),jsxRuntimeExports.jsx("td",{style:{padding:"14px 16px",fontSize:"13px",color:"#9a9a9a"},children:P0(Yl.uploadedAt)}),Ku&&jsxRuntimeExports.jsx("td",{style:{padding:"14px 16px"},children:jsxRuntimeExports.jsx("button",{onClick:nu=>kx(Yl.id,nu),className:"btn btn-danger btn-sm",children:"Delete"})})]},Yl.id))})]}):$l==="projects"&&!hu?jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"#333"},children:[Ku&&jsxRuntimeExports.jsx("th",{style:{width:"44px"}}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"Project"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"Files"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"Created"})]})}),jsxRuntimeExports.jsx("tbody",{children:B0.filter(Yl=>!vu||Yl.name.toLowerCase().includes(vu.toLowerCase())).map(Yl=>jsxRuntimeExports.jsxs("tr",{onClick:()=>Ku?Qp(Yl.id):wu(Yl.id),style:{borderTop:"1px solid #3a3a3a",cursor:"pointer",background:"transparent"},onMouseEnter:nu=>nu.currentTarget.style.background="#333",onMouseLeave:nu=>nu.currentTarget.style.background="transparent",children:[Ku&&jsxRuntimeExports.jsx("td",{style:{padding:"14px 8px"},children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:n0(Yl.id),onChange:nu=>Qp(Yl.id,nu)})}),jsxRuntimeExports.jsxs("td",{style:{padding:"14px 16px",fontSize:"14px",color:"#eaeaea",display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx(Icon,{name:"folder",size:20}),Yl.name]}),jsxRuntimeExports.jsx("td",{style:{padding:"14px 16px",fontSize:"13px",color:"#9a9a9a"},children:(Yl.pdfs||[]).length}),jsxRuntimeExports.jsx("td",{style:{padding:"14px 16px",fontSize:"13px",color:"#9a9a9a"},children:P0(Yl.createdAt)})]},Yl.id))})]}):$l==="projects"&&hu?jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"#333"},children:[Ku&&jsxRuntimeExports.jsx("th",{style:{width:"44px"}}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"File"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"Size"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"Uploaded"})]})}),jsxRuntimeExports.jsx("tbody",{children:(((zx=Eu.find(Yl=>Yl.id===hu))==null?void 0:zx.pdfs)||[]).filter(Yl=>!vu||(Yl.name||"").toLowerCase().includes(vu.toLowerCase())).map(Yl=>jsxRuntimeExports.jsxs("tr",{onClick:nu=>{Ku?(nu.preventDefault(),nu.stopPropagation(),Qp(Yl.id)):K0(Yl)},style:{borderTop:"1px solid #3a3a3a",cursor:"pointer",background:"transparent"},onMouseEnter:nu=>nu.currentTarget.style.background="#333",onMouseLeave:nu=>nu.currentTarget.style.background="transparent",children:[Ku&&jsxRuntimeExports.jsx("td",{style:{padding:"14px 8px"},onClick:nu=>nu.stopPropagation(),children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:n0(Yl.id),onChange:nu=>{nu.stopPropagation(),Qp(Yl.id,nu)},onClick:nu=>nu.stopPropagation()})}),jsxRuntimeExports.jsxs("td",{style:{padding:"14px 16px",fontSize:"14px",color:"#eaeaea",display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx(Icon,{name:"document",size:20}),Yl.name]}),jsxRuntimeExports.jsx("td",{style:{padding:"14px 16px",fontSize:"13px",color:"#9a9a9a"},children:H0(Yl.size)}),jsxRuntimeExports.jsx("td",{style:{padding:"14px 16px",fontSize:"13px",color:"#9a9a9a"},children:P0(Yl.uploadedAt)})]},Yl.id))})]}):$l==="templates"&&!Nu?jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"#333"},children:[Ku&&jsxRuntimeExports.jsx("th",{style:{width:"44px"}}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"Template"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"Categories"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"Created"})]})}),jsxRuntimeExports.jsx("tbody",{children:tx.filter(Yl=>!vu||(Yl.name||"").toLowerCase().includes(vu.toLowerCase())).map(Yl=>jsxRuntimeExports.jsxs("tr",{onClick:()=>Ku?Qp(Yl.id):gx(Yl.id),style:{borderTop:"1px solid #3a3a3a",cursor:"pointer",background:"transparent"},onMouseEnter:nu=>nu.currentTarget.style.background="#333",onMouseLeave:nu=>nu.currentTarget.style.background="transparent",children:[Ku&&jsxRuntimeExports.jsx("td",{style:{padding:"14px 8px"},children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:n0(Yl.id),onChange:nu=>Qp(Yl.id,nu)})}),jsxRuntimeExports.jsxs("td",{style:{padding:"14px 16px",fontSize:"14px",color:"#eaeaea",display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx(Icon,{name:"template",size:24}),Yl.name||"Untitled Template"]}),jsxRuntimeExports.jsx("td",{style:{padding:"14px 16px",fontSize:"13px",color:"#9a9a9a"},children:(()=>{const nu=new Set;return(Yl.modules||Yl.spaces||[]).forEach(Wu=>{(Wu.categories||[]).forEach(Bu=>{Bu!=null&&Bu.name&&nu.add(Bu.name)})}),nu.size})()}),jsxRuntimeExports.jsx("td",{style:{padding:"14px 16px",fontSize:"13px",color:"#9a9a9a"},children:P0(Yl.createdAt||new Date().toISOString())})]},Yl.id))})]}):jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"#333"},children:[Ku&&jsxRuntimeExports.jsx("th",{style:{width:"44px"}}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"File"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"Size"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"13px",fontWeight:"600",color:"#cfcfcf"},children:"Uploaded"})]})}),jsxRuntimeExports.jsx("tbody",{children:(((Wx=du.find(Yl=>Yl.id===Nu))==null?void 0:Wx.pdfs)||[]).filter(Yl=>!vu||(Yl.name||"").toLowerCase().includes(vu.toLowerCase())).map(Yl=>jsxRuntimeExports.jsxs("tr",{onClick:nu=>{Ku?(nu.preventDefault(),nu.stopPropagation(),Qp(Yl.id)):K0(Yl)},style:{borderTop:"1px solid #3a3a3a",cursor:"pointer",background:"transparent"},onMouseEnter:nu=>nu.currentTarget.style.background="#333",onMouseLeave:nu=>nu.currentTarget.style.background="transparent",children:[Ku&&jsxRuntimeExports.jsx("td",{style:{padding:"14px 8px"},onClick:nu=>nu.stopPropagation(),children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:n0(Yl.id),onChange:nu=>{nu.stopPropagation(),Qp(Yl.id,nu)},onClick:nu=>nu.stopPropagation()})}),jsxRuntimeExports.jsxs("td",{style:{padding:"14px 16px",fontSize:"14px",color:"#eaeaea",display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx(Icon,{name:"document",size:20}),Yl.name]}),jsxRuntimeExports.jsx("td",{style:{padding:"14px 16px",fontSize:"13px",color:"#9a9a9a"},children:H0(Yl.size)}),jsxRuntimeExports.jsx("td",{style:{padding:"14px 16px",fontSize:"13px",color:"#9a9a9a"},children:P0(Yl.uploadedAt)})]},Yl.id))})]})})})]})]})});function PDFViewer({pdfFile:cs,onBack:is,tabId:us,onPageDrop:hs,onUpdatePDFFile:lo,onRequestCreateTemplate:co}){const uo=reactExports.useRef(),ga=reactExports.useRef(),ba=reactExports.useRef({}),xa=reactExports.useRef({}),_a=reactExports.useRef({}),$a=reactExports.useRef(!1),xl=reactExports.useRef(!1),yl=reactExports.useRef(null),wl=reactExports.useRef(null);reactExports.useRef({left:0,top:0});const _l=reactExports.useRef(null),El=reactExports.useRef(null),Sl=reactExports.useRef(new PageRenderCache(100)),Cl=reactExports.useRef(new Set),Tl=reactExports.useRef(1),Dl=reactExports.useRef(null);if(!Dl.current){const Gl=loadZoomPreferences();let yu=null;if(typeof window<"u")try{const Su=window.sessionStorage.getItem(MANUAL_ZOOM_SESSION_KEY);if(Su){const mu=parseFloat(Su);Number.isNaN(mu)||(yu=clampScale(mu))}}catch(Su){console.warn("[PDFViewer] Unable to read session manual zoom level:",Su)}Dl.current={mode:Gl.mode,manualScale:yu??Gl.manualScale}}const Fl=Dl.current,[Pl,Al]=reactExports.useState(null),[Rl,Il]=reactExports.useState(1),[Bl,Ol]=reactExports.useState("1"),[zl,Hl]=reactExports.useState(!1),[ou,au]=reactExports.useState(0),[_c,uu]=reactExports.useState(Fl.manualScale),[lu,Kl]=reactExports.useState(Fl.mode),[xu,pu]=reactExports.useState(Fl.manualScale),[Ll,Nl]=reactExports.useState(String(Math.round(Fl.manualScale*100))),[Ml,Ul]=reactExports.useState(!1),[Vl,Ql]=reactExports.useState("continuous"),[Jl,iu]=reactExports.useState(!1),[fu,_u]=reactExports.useState({x:0,y:0}),[bu,Cu]=reactExports.useState(new Set),[Tu,Fu]=reactExports.useState(new Set([1])),[ku,tu]=reactExports.useState({}),[eu,gu]=reactExports.useState({}),[ru,Pu]=reactExports.useState(!1),[Lu,Ju]=reactExports.useState(!0),[Vu,Mu]=reactExports.useState("pan"),[hp,mp]=reactExports.useState("#ff0000"),[Rp,Lp]=reactExports.useState(3),[Bp,Tp]=reactExports.useState({}),[Ip,Hp]=reactExports.useState(!1),[qp,lp]=reactExports.useState({visible:!1,text:"",x:0,y:0}),[$u,Zu]=reactExports.useState({}),[Ap,Np]=reactExports.useState({}),[Vp,Ru]=reactExports.useState({}),[Qu,up]=reactExports.useState(!1),[Ep,Cp]=reactExports.useState(!1),[Sp,vu]=reactExports.useState(!1),[Zl,Ou]=reactExports.useState(null),[Du,$l]=reactExports.useState(null),Au=reactExports.useRef(null),Eu=reactExports.useRef(null),[_f,qu]=reactExports.useState({top:56,bottom:56}),[Xl,du]=reactExports.useState([]);reactExports.useCallback(Gl=>{var Su;const yu=Array.isArray(Gl)?Gl:[];if(du(yu),Zl){const mu=yu.find(Iu=>Iu.id===Zl.id);if(mu){const Iu=mu.modules||mu.spaces||[];Du&&!Iu.some(Hu=>Hu.id===Du)&&$l(((Su=Iu[0])==null?void 0:Su.id)||null),Ou(mu)}}},[Zl,Du]);const[su,cu]=reactExports.useState({}),[hu,wu]=reactExports.useState(null),[Nu,tp]=reactExports.useState({text:"",photos:[],videos:[]}),[Yu,zu]=reactExports.useState(null),[rp,dp]=reactExports.useState(!1),[Ku,vp]=reactExports.useState({}),[fp,Op]=reactExports.useState({}),[Kp,s0]=reactExports.useState({}),[r0,u0]=reactExports.useState(null),[l0,em]=reactExports.useState(null),[Wp,y0]=reactExports.useState(null),[lm,d0]=reactExports.useState(""),[F0,mm]=reactExports.useState(null),[h0,Fx]=reactExports.useState(null),[n0,Qp]=reactExports.useState({}),[C0,f0]=reactExports.useState({}),[i0,k0]=reactExports.useState(null),[p0,W0]=reactExports.useState({}),[rv,i1]=reactExports.useState(!1),[Y0,H0]=reactExports.useState(!1),[P0,im]=reactExports.useState(!1),[g0,B0]=reactExports.useState({}),[tx,K0]=reactExports.useState(null),[kx,Bm]=reactExports.useState({}),[Rx,tm]=reactExports.useState({}),b0=reactExports.useRef(null),rx=reactExports.useRef(null),nx=reactExports.useRef(Fl),q0=reactExports.useRef(Fl.manualScale),ix=reactExports.useRef(1),Dx=reactExports.useRef({}),xm=reactExports.useRef(Fl.manualScale),Px=reactExports.useCallback((Gl={})=>{const yu={...nx.current,...Gl};saveZoomPreferences(yu),nx.current=yu},[]),ox=reactExports.useMemo(()=>lu===ZOOM_MODES.MANUAL?`Manual ${Math.round((xu||1)*100)}%`:ZOOM_MODE_LABELS[lu]||"Zoom Mode",[lu,xu]),Ix=reactExports.useCallback(()=>{Ul(Gl=>!Gl)},[]),s1=reactExports.useCallback(Gl=>{const yu=b0.current;yu&&(Ul(!1),Gl===ZOOM_MODES.MANUAL?yu.setMode(ZOOM_MODES.MANUAL,{scale:xm.current}):yu.setMode(Gl))},[]);reactExports.useEffect(()=>{q0.current=_c},[_c]),reactExports.useEffect(()=>{ix.current=Rl},[Rl]),reactExports.useEffect(()=>{Dx.current=eu},[eu]),reactExports.useEffect(()=>{xm.current=xu},[xu]),reactExports.useEffect(()=>{nx.current={mode:lu,manualScale:xu}},[lu,xu]),reactExports.useEffect(()=>{if(!(typeof window>"u"))try{window.sessionStorage.setItem(MANUAL_ZOOM_SESSION_KEY,xm.current.toString())}catch(Gl){console.warn("[PDFViewer] Unable to persist manual zoom level in sessionStorage:",Gl)}},[xu]),reactExports.useEffect(()=>{if(!Ml)return;const Gl=Su=>{rx.current&&(rx.current.contains(Su.target)||Ul(!1))},yu=Su=>{Su.key==="Escape"&&Ul(!1)};return document.addEventListener("mousedown",Gl),document.addEventListener("keydown",yu),()=>{document.removeEventListener("mousedown",Gl),document.removeEventListener("keydown",yu)}},[Ml]),reactExports.useEffect(()=>{if(typeof window>"u")return;const Gl=()=>{var Su;(Su=b0.current)==null||Su.applyZoom({persist:!1,force:!0})},yu=()=>{var Su;document.hidden||(Su=b0.current)==null||Su.applyZoom({persist:!1,force:!0})};return window.addEventListener("resize",Gl),document.addEventListener("visibilitychange",yu),()=>{window.removeEventListener("resize",Gl),document.removeEventListener("visibilitychange",yu)}},[]),reactExports.useEffect(()=>{Pl&&b0.current&&(!eu||Object.keys(eu).length===0||b0.current.applyZoom({persist:!1,force:!0}))},[Pl,eu]),reactExports.useEffect(()=>{var Gl;lu!==ZOOM_MODES.MANUAL&&((Gl=b0.current)==null||Gl.applyZoom({persist:!1,force:!0}))},[Rl,lu]),reactExports.useEffect(()=>{var Gl;(Gl=b0.current)==null||Gl.applyZoom({persist:!1,force:!0})},[us]),reactExports.useEffect(()=>{var Gl;(Gl=b0.current)==null||Gl.applyZoom({persist:!1,force:!0})},[Vl]);const[vm,Um]=reactExports.useState({}),[ax,km]=reactExports.useState([]),[S0,Z0]=reactExports.useState([]),[e0,cm]=reactExports.useState(null),[I0,ym]=reactExports.useState(!1),[T0,Rm]=reactExports.useState(null),[Ox,zm]=reactExports.useState(null),[o1,bm]=reactExports.useState(null),[_m,wm]=reactExports.useState({}),Wm=reactExports.useCallback(Gl=>{const yu=_m[Gl]||{rotation:0,mirrorH:!1,mirrorV:!1},Su=[];return yu.rotation&&Su.push(`rotate(${yu.rotation}deg)`),yu.mirrorH&&Su.push("scaleX(-1)"),yu.mirrorV&&Su.push("scaleY(-1)"),Su.length>0?Su.join(" "):"none"},[_m]);reactExports.useEffect(()=>{if(h0)try{const Gl=JSON.parse(localStorage.getItem(`pdfSidebar_${h0}`)||"{}");Um(Gl.pageNames||{}),km(Gl.bookmarks||[]),Z0(Gl.spaces||[]),cm(null),wm(Gl.pageTransformations||{})}catch(Gl){console.error("Error loading sidebar data:",Gl)}},[h0]),reactExports.useEffect(()=>{if(h0)try{localStorage.setItem(`pdfSidebar_${h0}`,JSON.stringify({pageNames:vm,bookmarks:ax,spaces:S0,activeSpaceId:e0,pageTransformations:_m}))}catch(Gl){console.error("Error saving sidebar data:",Gl)}},[h0,vm,ax,S0,e0,_m]);const Mx=reactExports.useCallback(async Gl=>{if(!cs||!lo){alert("PDF file not available for manipulation");return}try{const yu=await cs.arrayBuffer(),Su=await PDFDocument.load(yu);if(!Su.getPages()[Gl-1]){alert(`Page ${Gl} not found`);return}const[Hu]=await Su.copyPages(Su,[Gl-1]);Su.insertPage(Gl,Hu);const Gu=await Su.save(),sp=new File([Gu],cs.name,{type:"application/pdf"});lo(sp)}catch(yu){console.error("Error duplicating page:",yu),alert(`Error duplicating page: ${yu.message}`)}},[cs,lo]);reactExports.useCallback((Gl,yu)=>{Um(Su=>({...Su,[Gl]:yu}))},[]);const a1=reactExports.useCallback(async Gl=>{if(!cs||!lo){alert("PDF file not available for manipulation");return}try{const yu=await cs.arrayBuffer(),Su=await PDFDocument.load(yu);Su.removePage(Gl-1);const mu=await Su.save(),Iu=new File([mu],cs.name,{type:"application/pdf"});lo(Iu)}catch(yu){console.error("Error deleting page:",yu),alert(`Error deleting page: ${yu.message}`)}},[cs,lo]),l1=reactExports.useCallback(Gl=>{zm(Gl),bm("cut")},[]),c1=reactExports.useCallback(Gl=>{zm(Gl),bm("copy")},[]),u1=reactExports.useCallback(async(Gl,yu,Su)=>{if(!cs||!lo){alert("PDF file not available for manipulation");return}try{const mu=await cs.arrayBuffer(),Iu=await PDFDocument.load(mu),[Hu]=await Iu.copyPages(Iu,[yu-1]),Gu=Gl;if(Iu.insertPage(Gu,Hu),Su==="cut"){const ap=yu-1;ap<Gu?Iu.removePage(ap):Iu.removePage(ap+1),zm(null),bm(null)}const sp=await Iu.save(),np=new File([sp],cs.name,{type:"application/pdf"});lo(np)}catch(mu){console.error("Error pasting page:",mu),alert(`Error pasting page: ${mu.message}`)}},[cs,lo]),d1=reactExports.useCallback((Gl,yu)=>{const Su={...vm},mu=vm[Gl]||`Page ${Gl}`,Iu=vm[yu]||`Page ${yu}`;Su[Gl]=Iu,Su[yu]=mu,Um(Su),Rl===Gl?Il(yu):Rl===yu&&Il(Gl)},[vm,Rl]),h1=reactExports.useCallback(Gl=>{wm(yu=>{const Su=yu[Gl]||{rotation:0,mirrorH:!1,mirrorV:!1},mu=(Su.rotation+90)%360;return{...yu,[Gl]:{...Su,rotation:mu}}})},[]),f1=reactExports.useCallback((Gl,yu)=>{wm(Su=>{const mu=Su[Gl]||{rotation:0,mirrorH:!1,mirrorV:!1};return{...Su,[Gl]:{...mu,[yu==="horizontal"?"mirrorH":"mirrorV"]:!mu[yu==="horizontal"?"mirrorH":"mirrorV"]}}})},[]),p1=reactExports.useCallback(Gl=>{wm(yu=>{const Su={...yu};return delete Su[Gl],Su})},[]),Sm=reactExports.useCallback(Gl=>{km(yu=>{const Su=(Gl==null?void 0:Gl.type)==="folder"?"folder":"bookmark",mu=typeof(Gl==null?void 0:Gl.name)=="string"?Gl.name.trim():"";if(!mu)return alert(`Please enter a ${Su==="folder"?"bookmark group":"bookmark"} name.`),yu;if(hasNameConflict(yu,mu,{predicate:Hu=>(Hu==null?void 0:Hu.type)===Su}))return alert(`A ${Su==="folder"?"bookmark group":"bookmark"} with this name already exists. Please choose a different name.`),yu;const Iu={...Gl,name:mu,id:(Gl==null?void 0:Gl.id)||`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,parentId:(Gl==null?void 0:Gl.parentId)||null,children:(Gl==null?void 0:Gl.children)||[]};return[...yu,Iu]})},[]),Em=reactExports.useCallback((Gl,yu)=>{km(Su=>{const mu=Su.find(Hu=>Hu.id===Gl);if(!mu)return Su;let Iu={...yu};if(Object.prototype.hasOwnProperty.call(yu,"name")){const Hu=typeof yu.name=="string"?yu.name.trim():"";if(!Hu)return alert(`${mu.type==="folder"?"Bookmark group":"Bookmark"} name cannot be empty.`),Su;if(hasNameConflict(Su,Hu,{predicate:Gu=>(Gu==null?void 0:Gu.type)===mu.type,ignoreId:Gl}))return alert(`A ${mu.type==="folder"?"bookmark group":"bookmark"} with this name already exists. Please choose a different name.`),Su;Iu={...Iu,name:Hu}}return Su.map(Hu=>Hu.id===Gl?{...Hu,...Iu}:Hu)})},[]),N0=reactExports.useCallback(Gl=>{km(yu=>{const Su=new Set([Gl]);let mu=!0;for(;mu;)mu=!1,yu.forEach(Iu=>{Iu.parentId&&Su.has(Iu.parentId)&&!Su.has(Iu.id)&&(Su.add(Iu.id),mu=!0)});return yu.filter(Iu=>!Su.has(Iu.id))})},[]),um=reactExports.useCallback(Gl=>{Z0(yu=>{const Su=typeof(Gl==null?void 0:Gl.name)=="string"?Gl.name.trim():"";let mu=Su;if(Su){if(hasNameConflict(yu,Su,{getName:Hu=>Hu==null?void 0:Hu.name}))return alert("A space with this name already exists. Please choose a different name."),yu}else{let Hu=yu.length+1,Gu=`Space ${Hu}`;for(;hasNameConflict(yu,Gu,{getName:sp=>sp==null?void 0:sp.name});)Hu+=1,Gu=`Space ${Hu}`;mu=Gu}const Iu={...Gl,name:mu,id:(Gl==null?void 0:Gl.id)||`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,assignedPages:Array.isArray(Gl==null?void 0:Gl.assignedPages)?Gl.assignedPages:[]};return[...yu,Iu]})},[]),Hm=reactExports.useCallback((Gl,yu)=>{Z0(Su=>{if(!Su.find(Hu=>Hu.id===Gl))return Su;let Iu={...yu};if(Object.prototype.hasOwnProperty.call(yu,"name")){const Hu=typeof yu.name=="string"?yu.name.trim():"";if(!Hu)return alert("Space name cannot be empty."),Su;if(hasNameConflict(Su,Hu,{getName:Gu=>Gu==null?void 0:Gu.name,ignoreId:Gl}))return alert("A space with this name already exists. Please choose a different name."),Su;Iu={...Iu,name:Hu}}return Su.map(Hu=>Hu.id===Gl?{...Hu,...Iu}:Hu)})},[]),Cm=reactExports.useCallback((Gl,yu)=>{!Array.isArray(yu)||yu.length===0||Z0(Su=>Su.map(mu=>{if(mu.id!==Gl)return mu;const Iu=new Map((mu.assignedPages||[]).map(Gu=>[Gu.pageId,{pageId:Gu.pageId,label:typeof Gu.label=="string"&&Gu.label.trim().length>0?Gu.label.trim():`Region ${Gu.pageId}`,wholePageIncluded:Gu.wholePageIncluded!==!1,regions:Array.isArray(Gu.regions)?Gu.regions:[]}]));yu.forEach(Gu=>{Number.isInteger(Gu)&&(Iu.has(Gu)||Iu.set(Gu,{pageId:Gu,label:`Region ${Gu}`,wholePageIncluded:!0,regions:[]}))});const Hu=Array.from(Iu.values()).filter(Gu=>typeof Gu.pageId=="number"&&!Number.isNaN(Gu.pageId)).sort((Gu,sp)=>Gu.pageId-sp.pageId);return{...mu,assignedPages:Hu}}))},[]),lx=reactExports.useCallback((Gl,yu)=>{Z0(Su=>{const mu=Su.map(Iu=>{if(Iu.id!==Gl)return Iu;const Hu=(Iu.assignedPages||[]).filter(Gu=>Gu.pageId!==yu);return{...Iu,assignedPages:Hu}});if(e0===Gl){const Iu=mu.find(Hu=>Hu.id===Gl);(!Iu||(Iu.assignedPages||[]).length===0)&&cm(null)}return mu})},[e0]),dm=reactExports.useCallback((Gl,yu,Su)=>{const mu=typeof Su=="string"?Su.trim():"";Z0(Iu=>Iu.map(Hu=>{if(Hu.id!==Gl)return Hu;const Gu=Hu.assignedPages||[],sp=`Region ${yu}`,np=mu.length>0?mu:sp,ap=pp=>typeof pp.label=="string"&&pp.label.trim().length>0?pp.label.trim():`Region ${pp.pageId}`;if(hasNameConflict(Gu,np,{getName:ap,getId:pp=>pp==null?void 0:pp.pageId,ignoreId:yu}))return alert("A region with this name already exists in this space. Please choose a different name."),Hu;const bp=Gu.map(pp=>pp.pageId!==yu?{...pp,label:ap(pp)}:{...pp,label:np});return{...Hu,assignedPages:bp}}))},[]),Vm=reactExports.useCallback((Gl,yu)=>{Z0(Su=>Su.map(mu=>{if(mu.id!==Gl)return mu;const Iu=(mu.assignedPages||[]).map(Hu=>Hu.pageId!==yu?Hu:{...Hu,wholePageIncluded:!0,regions:[]});return{...mu,assignedPages:Iu}}))},[]),hm=reactExports.useCallback((Gl,yu)=>{Z0(Su=>Gl<0||yu<0||Gl>=Su.length||yu>=Su.length?Su:[...arrayMove(Su,Gl,yu)])},[]),Dm=reactExports.useCallback(()=>{if(!Zl){alert("Please select a survey template before exporting.");return}try{const Gl=utils.book_new(),yu=Zl.modules||Zl.spaces||[],Su=new Set,mu=(np,ap)=>{const bp=`${np||"Category"} - ${ap||"Module"}`.trim()||"Sheet",pp=/[\\/?*[\]:]/g,gp=bp.replace(pp,"").substring(0,31)||"Sheet";let kp=gp,Fp=2;for(;Su.has(kp);){const xp=` (${Fp})`;kp=`${gp.substring(0,Math.max(0,31-xp.length))}${xp}`,Fp+=1}return Su.add(kp),kp};if(yu.length===0){const np=utils.aoa_to_sheet([]);utils.book_append_sheet(Gl,np,"Survey")}else yu.forEach(np=>{const ap=(np==null?void 0:np.name)||"Module",bp=np==null?void 0:np.id,pp=(np==null?void 0:np.categories)||[];if(pp.length===0){const gp=mu("General",ap),kp=utils.aoa_to_sheet([]);utils.book_append_sheet(Gl,kp,gp);return}pp.forEach(gp=>{const kp=mu((gp==null?void 0:gp.name)||"Category",ap),Fp=getCategoryItems(n0,bp,gp.id,Zl),xp=(gp==null?void 0:gp.checklist)||[],wp=getModuleDataKey(ap),Dp=getCategoryName(Zl,bp,gp.id),jp=["Item"];xp.forEach(Jp=>{jp.push(Jp.text||"")}),jp.push("Ball in Court"),jp.push("Notes");const Gp=[jp];Fp.forEach(Jp=>{const a0=[];a0.push(Jp.name||"");const Pp=Object.values(Ku).find(m0=>{const M0=(m0==null?void 0:m0.name)||"",L0=m0==null?void 0:m0.categoryId;return M0===Jp.name&&L0===gp.id&&(m0.moduleId===bp||m0.spaceId===bp)}),$p=(Pp==null?void 0:Pp.checklistResponses)||{},Up=Jp[wp]||{};xp.forEach(m0=>{const M0=$p[m0.id],L0=(M0==null?void 0:M0.selection)||"";a0.push(L0)});const Zp=(Pp==null?void 0:Pp.ballInCourtEntityName)||Up.ballInCourtEntityName||"";a0.push(Zp);const v0=[];xp.forEach(m0=>{var Om;const M0=$p[m0.id],L0=(Om=M0==null?void 0:M0.note)==null?void 0:Om.text;L0&&L0.trim()&&v0.push(`${m0.text}: ${L0.trim()}`)}),a0.push(v0.join("; ")),Gp.push(a0)});const Xp=utils.aoa_to_sheet(Gp);utils.book_append_sheet(Gl,Xp,kp)})});const Iu=writeSync(Gl,{bookType:"xlsx",type:"array"}),Hu=new Blob([Iu],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Gu=URL.createObjectURL(Hu),sp=document.createElement("a");sp.href=Gu,sp.download=`${sanitizeFilename((Zl==null?void 0:Zl.name)||"survey","survey")}_export.xlsx`,document.body.appendChild(sp),sp.click(),document.body.removeChild(sp),setTimeout(()=>URL.revokeObjectURL(Gu),0)}catch(Gl){console.error("Failed to create Excel export",Gl),alert("Unable to create the Excel file. Please try again.")}},[Zl,n0,Ku]),J0=reactExports.useCallback(Gl=>{const yu=S0.find(ap=>ap.id===Gl);if(!yu){alert("Space not found.");return}const Su=yu.assignedPages||[];if(Su.length===0){alert("This space has no pages to export.");return}const Iu=[["Space Name","Page","Mode","Region Count","Annotation Type","Annotation ID","Left","Top","Width","Height","Stroke Color","Fill Color","Stroke Width","Notes","Checklist Items","Status","Attachments"].map(escapeCSVValue).join(",")];Su.forEach(ap=>{var Fp;const bp=ap.pageId;if(!bp)return;const pp=ap.wholePageIncluded===!1?"region":"full",gp=Array.isArray(ap.regions)?ap.regions:[];(((Fp=Bp[bp])==null?void 0:Fp.objects)||[]).forEach(xp=>{var Pp,$p;if(!xp)return;const wp=xp.spaceId||null;if(yu.id&&wp&&wp!==yu.id)return;const Dp=(xp.width||0)*(xp.scaleX||1),jp=(xp.height||0)*(xp.scaleY||1),Gp=(xp.left||0)+Dp/2,Xp=(xp.top||0)+jp/2;if(pp==="region"&&gp.length>0&&!gp.some(Zp=>regionContainsPoint(Gp,Xp,Zp,_c)))return;const Jp=Array.isArray(xp.attachments)?xp.attachments.length:"",a0=[escapeCSVValue(yu.name||""),escapeCSVValue(bp),escapeCSVValue(pp),escapeCSVValue(gp.length),escapeCSVValue(xp.type||""),escapeCSVValue(xp.id||""),escapeCSVValue(typeof xp.left=="number"?xp.left.toFixed(2):xp.left||""),escapeCSVValue(typeof xp.top=="number"?xp.top.toFixed(2):xp.top||""),escapeCSVValue(Dp?Dp.toFixed(2):""),escapeCSVValue(jp?jp.toFixed(2):""),escapeCSVValue(xp.stroke||""),escapeCSVValue(xp.fill||""),escapeCSVValue(xp.strokeWidth||""),escapeCSVValue(xp.note||""),escapeCSVValue((($p=(Pp=xp.checklistItems||[]).join)==null?void 0:$p.call(Pp,"; "))||""),escapeCSVValue(xp.status||""),escapeCSVValue(Jp)];Iu.push(a0.join(","))})}),Array.isArray(yu.categories)&&yu.categories.forEach(ap=>{var gp;const bp=((gp=ap==null?void 0:ap.checklist)==null?void 0:gp.length)||0,pp=[escapeCSVValue(yu.name||""),"","category","","","","","","","","","","",escapeCSVValue((ap==null?void 0:ap.name)||""),escapeCSVValue(bp),"",""];Iu.push(pp.join(","))});const Hu=Iu.join(`
`),Gu=new Blob([Hu],{type:"text/csv;charset=utf-8;"}),sp=URL.createObjectURL(Gu),np=document.createElement("a");np.href=sp,np.download=`${sanitizeFilename(yu.name||"space","space")}_export.csv`,document.body.appendChild(np),np.click(),document.body.removeChild(np),URL.revokeObjectURL(sp)},[S0,Bp,_c]),ux=reactExports.useCallback(async Gl=>{const yu=S0.find(mu=>mu.id===Gl);if(!yu){alert("Space not found.");return}if(!Pl){alert("PDF is not ready yet. Please wait for the document to load.");return}const Su=yu.assignedPages||[];if(Su.length===0){alert("This space has no pages to export.");return}try{const mu=await PDFDocument.create();for(const np of Su){const ap=np.pageId;if(!ap)continue;const bp=await Pl.getPage(ap),pp=bp.getViewport({scale:1}),{width:gp,height:kp}=pp,Fp=document.createElement("canvas");Fp.width=gp,Fp.height=kp;const xp=Fp.getContext("2d");await bp.render({canvasContext:xp,viewport:pp}).promise,np.wholePageIncluded===!1&&Array.isArray(np.regions)&&np.regions.length>0&&applyRegionMaskToCanvasContext(xp,np.regions,1);const wp=Fp.toDataURL("image/png"),Dp=dataURLToUint8Array(wp),jp=await mu.embedPng(Dp);mu.addPage([gp,kp]).drawImage(jp,{x:0,y:0,width:gp,height:kp})}const Iu=await mu.save(),Hu=new Blob([Iu],{type:"application/pdf"}),Gu=URL.createObjectURL(Hu),sp=document.createElement("a");sp.href=Gu,sp.download=`${sanitizeFilename(yu.name||"space","space")}_export.pdf`,document.body.appendChild(sp),sp.click(),document.body.removeChild(sp),URL.revokeObjectURL(Gu)}catch(mu){console.error("Error exporting space to PDF:",mu),alert("Unable to export this space to PDF. Please try again.")}},[S0,Pl]),jx=reactExports.useCallback(Gl=>{Z0(yu=>yu.filter(Su=>Su.id!==Gl)),e0===Gl&&cm(null)},[e0]),dx=reactExports.useCallback(Gl=>{cm(Gl)},[]),Nx=reactExports.useCallback(()=>{cm(null)},[]),x0=reactExports.useMemo(()=>{if(!e0)return null;const Gl=S0.find(Su=>Su.id===e0);if(!Gl)return[];const yu=new Set((Gl.assignedPages||[]).map(Su=>Su==null?void 0:Su.pageId).filter(Su=>typeof Su=="number"&&!Number.isNaN(Su)));return Array.from(yu).sort((Su,mu)=>Su-mu)},[e0,S0]),Tm=e0??l0??null;reactExports.useEffect(()=>{if(!Zl||!Du)return;const Gl=getModuleName(Zl,Du);console.log("[Survey Debug] Active module updated",{moduleId:Du,moduleName:Gl,activeSpaceId:e0,selectedSpaceId:l0,effectiveAnnotationSpaceId:Tm})},[Du,Zl,e0,l0,Tm]),reactExports.useEffect(()=>{const Gl=Zl&&Du?getModuleName(Zl,Du):null;console.log("[Survey Debug] Space context updated",{activeSpaceId:e0,selectedSpaceId:l0,effectiveAnnotationSpaceId:Tm,moduleId:Du,moduleName:Gl})},[e0,l0,Tm,Du,Zl]);const V0=reactExports.useCallback((Gl,yu={})=>{const{fallback:Su="nearest"}=yu;let mu=Gl;if(e0){if(!x0||x0.length===0)return;if(!x0.includes(mu))if(Su==="next"){const Iu=x0.find(Hu=>Hu>mu);if(!Iu)return;mu=Iu}else if(Su==="previous"){const Iu=[...x0].reverse().find(Hu=>Hu<mu);if(!Iu)return;mu=Iu}else{const Iu=x0.find(Gu=>Gu>mu),Hu=[...x0].reverse().find(Gu=>Gu<mu);mu=Iu??Hu??x0[0]}}if(!(mu<1||mu>ou))if(Vl==="single")Il(mu);else{$a.current=!0,wl.current=mu;const Iu=ba.current[mu],Hu=uo.current;if(Iu&&Hu){const Gu=Hu.getBoundingClientRect(),sp=Iu.getBoundingClientRect(),np=window.getComputedStyle(Hu),ap=parseFloat(np.paddingTop||"0"),bp=sp.top-Gu.top,pp=Math.max(bp+Hu.scrollTop-ap,0);Hu.scrollTo({top:pp,behavior:"smooth"}),setTimeout(()=>{Il(mu),Ol(String(mu)),Hl(!1),setTimeout(()=>{$a.current=!1,wl.current=null,Il(gp=>gp!==mu?mu:gp)},150)},300)}else Il(mu),$a.current=!1,wl.current=null,Ol(String(mu)),Hl(!1)}},[ou,Vl,e0,x0]),g1=reactExports.useCallback((Gl,yu)=>{var Iu;const Su=S0.find(Hu=>Hu.id===Gl);!Su||!((Iu=Su.assignedPages)!=null&&Iu.find(Hu=>Hu.pageId===yu))||(cm(Gl),Rm(yu),ym(!0),V0(yu,{fallback:"nearest"}))},[S0,V0]),m1=reactExports.useCallback(()=>{!e0||!T0||Vm(e0,T0)},[e0,T0,Vm]),x1=reactExports.useMemo(()=>{var Su;if(!e0||!T0)return!1;const Gl=S0.find(mu=>mu.id===e0);if(!Gl)return!1;const yu=(Su=Gl.assignedPages)==null?void 0:Su.find(mu=>mu.pageId===T0);return yu?yu.wholePageIncluded===!1:!1},[S0,e0,T0]),v1=reactExports.useCallback(Gl=>{if(!e0||!T0)return;const yu=S0.find(Iu=>Iu.id===e0);if(!yu)return;const Su=[...yu.assignedPages||[]],mu=Su.findIndex(Iu=>Iu.pageId===T0);mu>=0?Su[mu]={...Su[mu],wholePageIncluded:!1,regions:Array.isArray(Gl)?Gl:[]}:Su.push({pageId:T0,wholePageIncluded:!1,regions:Array.isArray(Gl)?Gl:[]}),Hm(e0,{assignedPages:Su}),ym(!1),Rm(null)},[e0,T0,S0,Hm]);reactExports.useEffect(()=>{try{const Gl=JSON.parse(localStorage.getItem("templates")||"[]");du(Array.isArray(Gl)?Gl:[])}catch(Gl){console.error("Error loading templates:",Gl),du([])}},[]),reactExports.useEffect(()=>{if(cm(null),km([]),Z0([]),Um({}),wm({}),up(!1),Ou(null),$l(null),u0(null),ym(!1),Rm(null),zu(null),y0(null),d0(""),mm(null),dp(!1),vu(!1),H0(!1),im(!1),K0(null),B0({}),Bm({}),tm({}),i1(!1),k0(null),W0({}),cu({}),wu(null),tp({text:"",photos:[],videos:[]}),Mu("pan"),Hp(!1),!cs){Fx(null),Qp({}),f0({}),vp({});return}const Gl=getPDFId(cs);Fx(Gl);const yu=loadPDFData(Gl);Qp(yu.items),f0(yu.annotations);const Su=loadHighlightAnnotations(Gl);vp(Su)},[cs]),reactExports.useEffect(()=>{h0&&savePDFData(h0,n0,C0)},[h0,n0,C0]),reactExports.useEffect(()=>{if(!h0){console.log("Skipping save - no pdfId");return}console.log("Saving highlightAnnotations to localStorage:",{pdfId:h0,count:Object.keys(Ku).length}),saveHighlightAnnotations(h0,Ku)},[h0,Ku]),reactExports.useEffect(()=>{var yu,Su;if(!hu)return;const Gl=hu.split("-");if(Gl.length>=2){const mu=Gl[Gl.length-1],Iu=Gl.slice(0,-1).join("-");console.log("Note dialog opened, loading note:",{highlightId:Iu,itemId:mu});const Hu=(Su=(yu=Ku[Iu])==null?void 0:yu.checklistResponses)==null?void 0:Su[mu],Gu=Hu==null?void 0:Hu.note;console.log("Found note in highlightAnnotations:",Gu),tp(Gu?{text:Gu.text||"",photos:Gu.photos||[],videos:Gu.videos||[]}:{text:"",photos:[],videos:[]})}},[hu,Ku]),reactExports.useEffect(()=>{if(!Zl||!h0||Object.keys(Ku).length===0||Object.keys(n0).length>0)return;const Gl=migrateLegacyHighlights(Ku,n0,C0,Zl);Object.keys(Gl.items).length>0&&(Qp(Gl.items),f0(Gl.annotations))},[Zl,h0]),reactExports.useEffect(()=>{if(console.log("PDFViewer useEffect triggered. pdfFile:",cs),!cs){console.log("No PDF file provided to viewer");return}(async()=>{try{Ju(!0),console.log("Loading PDF:",cs.name,"Size:",cs.size,"Type:",cs.type);const yu=await cs.arrayBuffer();console.log("ArrayBuffer created, size:",yu.byteLength);const mu=await pdfExports.getDocument({data:yu}).promise;console.log("PDF loaded successfully. Pages:",mu.numPages),Al(mu),au(mu.numPages),Il(1);const Iu={},Hu={},Gu={};for(let sp=1;sp<=mu.numPages;sp++){const np=await mu.getPage(sp),ap=np.getViewport({scale:1});Iu[sp]=ap.height,Hu[sp]={width:ap.width,height:ap.height},Gu[sp]=np}console.log("Page sizes calculated:",Object.keys(Hu).length,"pages"),tu(Iu),gu(Hu),Zu(Gu),Sl.current.clear(),Cu(new Set),Tl.current=_c,Ju(!1),console.log("PDF loading complete, isLoadingPDF set to false")}catch(yu){console.error("Error loading PDF:",yu),console.error("Error stack:",yu.stack),Ju(!1),alert("Error loading PDF: "+yu.message+". Please try uploading the file again.")}})()},[cs]);const O0=reactExports.useCallback(async(Gl,yu="normal")=>{if(!Pl){console.warn(`[renderPage ${Gl}] No pdfDoc available`);return}const Su=xa.current[Gl];if(!Su){console.warn(`[renderPage ${Gl}] Canvas not found`);return}const mu=Sl.current.get(Gl,_c);if(mu&&mu.bitmap&&mu.viewport)try{if(mu.bitmap.width===0||mu.bitmap.height===0)throw new Error("Bitmap is invalid (zero dimensions)");const Iu=Su.getContext("2d"),Hu=window.devicePixelRatio||1,Gu=Math.floor(mu.viewport.width*Hu),sp=Math.floor(mu.viewport.height*Hu);Su.width=Gu,Su.height=sp,Su.style.width=`${Math.floor(mu.viewport.width)}px`,Su.style.height=`${Math.floor(mu.viewport.height)}px`,Iu.setTransform(1,0,0,1,0,0),Iu.clearRect(0,0,Su.width,Su.height),Iu.drawImage(mu.bitmap,0,0),Cu(np=>new Set([...np,Gl])),console.log(`[renderPage ${Gl}] Rendered from cache`);return}catch(Iu){console.warn(`[renderPage ${Gl}] Failed to render from cache, re-rendering:`,Iu)}if(console.log(`[renderPage ${Gl}] Rendering from PDF (cache miss or invalid)`),_a.current[Gl]){try{_a.current[Gl].cancel(),await _a.current[Gl].promise.catch(()=>{})}catch{}delete _a.current[Gl]}try{const Iu=await Pl.getPage(Gl),Hu=Iu.getViewport({scale:_c}),Gu=Su.getContext("2d"),sp=window.devicePixelRatio||1;Su.width=Math.floor(Hu.width*sp),Su.height=Math.floor(Hu.height*sp),Su.style.width=`${Math.floor(Hu.width)}px`,Su.style.height=`${Math.floor(Hu.height)}px`,Gu.setTransform(sp,0,0,sp,0,0),Gu.clearRect(0,0,Su.width,Su.height);const np=Iu.render({canvasContext:Gu,viewport:Hu});_a.current[Gl]=np,await np.promise;try{await Sl.current.set(Gl,_c,Su,Hu),console.log(`[renderPage ${Gl}] Cached successfully`)}catch(ap){console.warn(`[renderPage ${Gl}] Failed to cache:`,ap)}Cu(ap=>new Set([...ap,Gl])),delete _a.current[Gl]}catch(Iu){Iu.name!=="RenderingCancelledException"&&console.error(`Error rendering page ${Gl}:`,Iu.message||Iu),delete _a.current[Gl]}},[Pl,_c]),Lx=reactExports.useCallback(Gl=>{if(!Pl||Vl!=="continuous")return;const yu=2,Su=[];for(let mu=Math.max(1,Gl-yu);mu<=Math.min(ou,Gl+yu);mu++)mu!==Gl&&!Cl.current.has(mu)&&!Sl.current.has(mu,_c)&&Su.push(mu);Su.forEach(mu=>{Cl.current.add(mu),(window.requestIdleCallback||(Hu=>setTimeout(Hu,0)))(()=>{O0(mu,"low").finally(()=>{Cl.current.delete(mu)})})})},[Pl,Vl,ou,_c,O0]);reactExports.useEffect(()=>{if(Vl!=="continuous"||!Pl)return;yl.current&&yl.current.disconnect();let Gl=new Map,yu=null;const Su=new IntersectionObserver(Hu=>{const Gu=new Set;Hu.forEach(sp=>{const np=parseInt(sp.target.dataset.pageNum);if(sp.isIntersecting){Gl.set(np,sp.intersectionRatio);const ap=3;for(let bp=Math.max(1,np-ap);bp<=Math.min(ou,np+ap);bp++)Gu.add(bp);Cu(bp=>(bp.has(np)||O0(np,"high"),bp)),Lx(np)}else Gl.delete(np)}),Gu.size>0&&Fu(sp=>{const np=new Set([...sp,...Gu]);return np.size===sp.size?sp:np}),clearTimeout(yu),yu=setTimeout(()=>{if(Gl.size>0&&!$a.current&&wl.current===null&&!xl.current){let sp=0,np=1;Gl.forEach((ap,bp)=>{ap>sp&&(sp=ap,np=bp)}),Il(ap=>ap!==np?np:ap)}},50)},{root:uo.current,rootMargin:"2000px",threshold:[0,.1,.25,.5,.75,1]});yl.current=Su;const mu=setTimeout(()=>{const Hu=Object.values(ba.current).filter(Boolean);console.log("Setting up IntersectionObserver for",Hu.length,"page containers"),Hu.forEach(Gu=>{Gu&&Su.observe(Gu)})},100),Iu=setInterval(()=>{($a.current||wl.current!==null||xl.current)&&(console.warn("Navigation guards have been active for >2s, resetting for safety"),$a.current=!1,wl.current=null,xl.current=!1)},2e3);return()=>{clearTimeout(mu),clearInterval(Iu),yl.current&&yl.current.disconnect(),clearTimeout(yu)}},[Pl,Vl,O0,Lx]),reactExports.useEffect(()=>{Vl!=="single"||!Pl||(O0(Rl),Rl>1&&O0(Rl-1,"low"),Rl<ou&&O0(Rl+1,"low"))},[Vl,Pl,Rl,_c,O0,ou]),reactExports.useEffect(()=>{if(Vl!=="continuous"||!Pl||Lu)return;const Gl=setTimeout(()=>{const yu=xa.current[1];console.log("Attempting to render first page, canvas exists:",!!yu),yu?O0(1):(console.warn("Canvas for page 1 not found, retrying..."),setTimeout(()=>{xa.current[1]&&O0(1)},500))},200);return()=>clearTimeout(Gl)},[Pl,Vl,Lu,O0]),reactExports.useEffect(()=>{if(!Pl)return;const Gl=Tl.current;Math.abs(Gl-_c)>.1&&(Tl.current=_c),Cu(new Set),Vl==="single"&&O0(Rl)},[_c,Pl,Vl,Rl,O0]),reactExports.useEffect(()=>{},[_m,Pl]),reactExports.useEffect(()=>{const Gl=()=>{const yu=uo.current,Su=ga.current||yu;if(!yu)return;const mu=Su.scrollWidth>yu.clientWidth||Su.scrollHeight>yu.clientHeight;Pu(mu)};return Gl(),window.addEventListener("resize",Gl),()=>window.removeEventListener("resize",Gl)},[_c,Pl,Vl]);const Xm=reactExports.useRef(null),hx=reactExports.useCallback(()=>{V0(Rl-1,{fallback:"previous"})},[V0,Rl]),fx=reactExports.useCallback(()=>{V0(Rl+1,{fallback:"next"})},[V0,Rl]),Gm=reactExports.useCallback((Gl,yu={})=>{const Su=uo.current,mu=q0.current||1,Iu=clampScale(Gl);if(!Su){(Math.abs(Iu-mu)>1e-4||yu.force)&&(q0.current=Iu,uu(Iu));return}if(Math.abs(Iu-mu)<1e-4&&!yu.force)return;const Hu=Su.getBoundingClientRect(),Gu=yu.anchor||{},sp=typeof Gu.x=="number"?Gu.x:Hu.width/2,np=typeof Gu.y=="number"?Gu.y:Hu.height/2,ap=Su.scrollLeft,bp=Su.scrollTop,gp=Iu/mu,kp=(ap+sp)*gp-sp,Fp=(bp+np)*gp-np;Xm.current={newScrollLeft:kp,newScrollTop:Fp},xl.current=!0,q0.current=Iu,uu(Iu);const xp=()=>{const wp=uo.current;if(!wp||!wp.isConnected||!Xm.current)return;const Dp=Xm.current,jp=wp.getBoundingClientRect(),Gp=Math.max(0,wp.scrollWidth-jp.width),Xp=Math.max(0,wp.scrollHeight-jp.height),Jp=Math.max(0,Math.min(Dp.newScrollLeft,Gp)),a0=Math.max(0,Math.min(Dp.newScrollTop,Xp));wp.scrollLeft=Jp,wp.scrollTop=a0,Xm.current=null,xl.current=!1};setTimeout(xp,0),setTimeout(xp,16),setTimeout(xp,50),setTimeout(xp,100),requestAnimationFrame(()=>{requestAnimationFrame(xp)})},[uu]);b0.current||(b0.current=createZoomController({initialMode:Fl.mode,initialManualScale:Fl.manualScale,getContainer:()=>uo.current,getViewportSize:Gl=>{const yu=Gl||uo.current;if(!yu)return null;if(typeof window>"u")return{width:yu.clientWidth,height:yu.clientHeight};const Su=window.getComputedStyle(yu),mu=parseFloat(Su.paddingLeft||"0")+parseFloat(Su.paddingRight||"0"),Iu=parseFloat(Su.paddingTop||"0")+parseFloat(Su.paddingBottom||"0");return{width:Math.max(yu.clientWidth-mu,0),height:Math.max(yu.clientHeight-Iu,0)}},getPageSize:()=>{const Gl=Dx.current;if(!Gl)return null;const yu=Gl[ix.current];if(yu)return yu;const Su=Object.keys(Gl)[0];return Su?Gl[Su]:null},getCurrentScale:()=>q0.current,setScale:(Gl,yu)=>Gm(Gl,yu),onModeChange:Gl=>{Kl(yu=>yu===Gl?yu:Gl)},onManualScaleChange:Gl=>{pu(yu=>Math.abs(yu-Gl)<1e-4?yu:Gl)},persistPreferences:Gl=>{Px(Gl)}}));const $m=reactExports.useCallback(()=>{const Gl=b0.current;if(!Gl)return;const yu=q0.current||xm.current||1,Su=clampScale(yu*1.2);Gl.setScale(Su)},[]),Ym=reactExports.useCallback(()=>{const Gl=b0.current;if(!Gl)return;const yu=q0.current||xm.current||1,Su=clampScale(yu/1.2);Gl.setScale(Su)},[]),gx=reactExports.useCallback(()=>{const Gl=b0.current;Gl&&Gl.setScale(DEFAULT_ZOOM_PREFERENCES.manualScale)},[]),Pm=reactExports.useRef(null),y1=reactExports.useCallback(Gl=>{var yu;if(Gl.ctrlKey||Gl.metaKey){if(Gl.preventDefault(),Pm.current)return;Pm.current=setTimeout(()=>{Pm.current=null},50);const Su=Gl.deltaY>0?.9:1.1,mu=q0.current||xm.current||1,Iu=clampScale(mu*Su);Math.abs(Iu-mu)>1e-4&&((yu=b0.current)==null||yu.setScale(Iu))}},[]),b1=reactExports.useCallback(Gl=>{Vu==="pan"&&!I0&&ru&&Gl.button===0&&(iu(!0),_u({x:Gl.clientX+uo.current.scrollLeft,y:Gl.clientY+uo.current.scrollTop}),Gl.preventDefault())},[Vu,I0,ru]),Bx=reactExports.useCallback(Gl=>{if(Jl){const yu=uo.current;yu&&(yu.scrollLeft=fu.x-Gl.clientX,yu.scrollTop=fu.y-Gl.clientY)}},[Jl,fu]),mx=reactExports.useCallback(()=>{iu(!1)},[]);reactExports.useEffect(()=>{(Vu!=="pan"||I0)&&iu(!1)},[Vu,I0]);const Ux=reactExports.useCallback(Gl=>{const yu=Gl.target.value.replace(/\D/g,"");Ol(yu),Hl(!0)},[]),Im=reactExports.useCallback(()=>{const Gl=parseInt(Bl);!isNaN(Gl)&&Gl>=1&&Gl<=ou?(V0(Gl),Ol(String(Gl)),Hl(!1)):(Ol(String(Rl)),Hl(!1))},[Bl,ou,V0,Rl]),zx=reactExports.useCallback(Gl=>{Gl.key==="Enter"&&(Gl.preventDefault(),Im(),Gl.target.blur())},[Im]),Wx=reactExports.useCallback(()=>{Im()},[Im]);reactExports.useEffect(()=>{const Gl=_l.current;if(!Gl){Ol(String(Rl)),Hl(!1);return}Ol(yu=>{const Su=String(Rl);return yu!==Su?document.activeElement===Gl&&zl?yu:(Hl(!1),Su):yu})},[Rl,zl]),reactExports.useEffect(()=>{const Gl=El.current;if(!Gl){Nl(String(Math.round(_c*100)));return}document.activeElement!==Gl&&Nl(String(Math.round(_c*100)))},[_c]);const Yl=reactExports.useCallback(Gl=>{const yu=Gl.target.value.replace(/\D/g,"");Nl(yu)},[]),nu=reactExports.useCallback(()=>{if(!Ll){Nl(String(Math.round(_c*100)));return}const Gl=parseInt(Ll,10);if(isNaN(Gl)){Nl(String(Math.round(_c*100)));return}const yu=Math.min(Math.max(Gl,50),500),Su=b0.current;if(Su){const mu=clampScale(yu/100);Su.setScale(mu),Nl(String(Math.round(mu*100)))}else Nl(String(yu))},[Ll,_c]),ju=reactExports.useCallback(Gl=>{Gl.key==="Enter"?(Gl.preventDefault(),nu(),Gl.currentTarget.blur()):Gl.key==="Escape"&&(Nl(String(Math.round(_c*100))),Gl.currentTarget.blur())},[nu,_c]),Wu=reactExports.useCallback(()=>{nu()},[nu]);reactExports.useEffect(()=>{const Gl=yu=>{var Iu,Hu,Gu,sp;const Su=document.activeElement;if(!(Su&&(Su.tagName==="INPUT"||Su.tagName==="TEXTAREA"||Su.isContentEditable))&&(yu.metaKey||yu.ctrlKey)){const np=yu.key.toLowerCase();if(!yu.altKey){if(np==="0"){yu.preventDefault(),(Iu=b0.current)==null||Iu.setMode(ZOOM_MODES.FIT_PAGE);return}if(np==="1"){yu.preventDefault(),(Hu=b0.current)==null||Hu.setMode(ZOOM_MODES.FIT_WIDTH);return}if(np==="2"){yu.preventDefault(),(Gu=b0.current)==null||Gu.setMode(ZOOM_MODES.FIT_HEIGHT);return}if(np==="="||np==="+"){yu.preventDefault(),$m();return}if(np==="-"){yu.preventDefault(),Ym();return}if(np==="m"){yu.preventDefault(),(sp=b0.current)==null||sp.setMode(ZOOM_MODES.MANUAL,{scale:q0.current});return}}}Vl==="single"&&(yu.key==="ArrowLeft"?hx():yu.key==="ArrowRight"&&fx())};return window.addEventListener("keydown",Gl),()=>window.removeEventListener("keydown",Gl)},[fx,hx,Vl,$m,Ym]);const Bu=reactExports.useCallback(()=>{Ql(Gl=>Gl==="continuous"?"single":"continuous")},[]),Xu=reactExports.useMemo(()=>({flex:1,overflow:"auto",cursor:Vu==="pan"&&!I0?Jl?"grabbing":ru?"grab":"default":"default",background:"#2b2b2b",padding:"20px",position:"relative",fontFamily:FONT_FAMILY,minHeight:0,minWidth:0}),[Jl,ru,Vu,I0]),ip=reactExports.useMemo(()=>({minWidth:"max-content",minHeight:Vl==="single"?"100%":"auto",display:"flex",flexDirection:"column",gap:Vl==="continuous"?"20px":"0",alignItems:"center",...Vl==="single"&&{justifyContent:"center"}}),[Vl]),cp=reactExports.useCallback((Gl,yu)=>{Tp(Su=>({...Su,[Gl]:yu}))},[]),yp=(Gl,yu,Su=5)=>!Gl||!yu?!1:Math.abs((Gl.x||Gl.left)-(yu.x||yu.left))<Su&&Math.abs((Gl.y||Gl.top)-(yu.y||yu.top))<Su&&Math.abs((Gl.width||Gl.right-Gl.left)-(yu.width||yu.right-yu.left))<Su&&Math.abs((Gl.height||Gl.bottom-Gl.top)-(yu.height||yu.bottom-yu.top))<Su,op=reactExports.useCallback((Gl,yu,Su=null)=>{if(!Du||!Zl)return;const mu=[];if(Su){if(Ku[Su]){const Iu=Ku[Su];(Iu.moduleId||Iu.spaceId)===Du&&Iu.pageNumber===Gl&&mu.push(Su)}}else Object.entries(Ku).forEach(([Iu,Hu])=>{(Hu.moduleId||Hu.spaceId)===Du&&Hu.pageNumber===Gl&&yp(Hu.bounds,yu)&&mu.push(Iu)});if(mu.length>0){const Iu=mu.map(Hu=>({id:Hu,highlight:Ku[Hu]})).filter(({highlight:Hu})=>Hu!=null);vp(Hu=>{const Gu={...Hu};return mu.forEach(sp=>delete Gu[sp]),Gu}),Np(Hu=>{const Gu={...Hu};let sp=!1;return Iu.forEach(({id:np,highlight:ap})=>{if(ap&&ap.pageNumber){const bp=Gu[ap.pageNumber]||[],pp=bp.filter(gp=>gp.highlightId===np?!1:ap.bounds&&gp.x!==void 0&&gp.y!==void 0?!yp({x:gp.x,y:gp.y,width:gp.width,height:gp.height},ap.bounds):!0);pp.length!==bp.length&&(sp=!0,pp.length===0?delete Gu[ap.pageNumber]:Gu[ap.pageNumber]=pp)}}),sp?Gu:Hu}),Iu.forEach(({id:Hu,highlight:Gu})=>{if(!Gu)return;const sp=getCategoryName(Zl,Gu.spaceId||Gu.moduleId,Gu.categoryId),np=Object.values(n0).find(ap=>ap.name===Gu.name&&ap.itemType===sp);if(np){f0(kp=>{const Fp={...kp};return Object.values(Fp).forEach(xp=>{const wp=xp.spaceId||xp.moduleId,Dp=Gu.spaceId||Gu.moduleId;xp.itemId===np.itemId&&wp===Dp&&xp.pdfCoordinates&&yp(xp.pdfCoordinates,yu)&&delete Fp[xp.annotationId]}),Fp});const ap=Gu.moduleId||Gu.spaceId,bp=getModuleName(Zl,ap),pp=getModuleDataKey(bp),gp=n0[np.itemId];if(gp){const kp={...gp};delete kp[pp];const xp=((Zl==null?void 0:Zl.modules)||(Zl==null?void 0:Zl.spaces)||[]).some(wp=>{const Dp=wp.id;if(Dp===ap)return!1;const jp=getModuleName(Zl,Dp),Gp=getModuleDataKey(jp);return kp[Gp]&&Object.keys(kp[Gp]).length>0});Qp(xp?wp=>({...wp,[np.itemId]:kp}):wp=>{const Dp={...wp};return delete Dp[np.itemId],Dp})}}})}},[Du,Zl,Ku,n0]),_p=reactExports.useCallback((Gl,yu)=>{if(!Du||!Zl)return;const Su=`highlight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,mu=getModuleName(Zl,Du);console.log("[Survey Debug] Highlight created",{highlightId:Su,pageNumber:Gl,bounds:yu,moduleId:Du,moduleName:mu,activeSpaceId:e0,selectedSpaceId:l0,effectiveSpaceId:e0??l0??null}),Np(Hu=>{const Gu={};return Object.entries(Hu).forEach(([sp,np])=>{const ap=np.filter(bp=>bp.moduleId===Du);ap.length>0&&(Gu[sp]=ap)}),{...Gu,[Gl]:[...Gu[Gl]||[],{...yu,highlightId:Su,moduleId:Du,needsCategory:!r0,needsBIC:!0}]}}),r0?(((Zl==null?void 0:Zl.ballInCourtEntities)||[]).length>0?mm({highlight:{id:Su,pageNumber:Gl,bounds:yu,moduleId:Du},categoryId:r0}):(y0({highlight:{id:Su,pageNumber:Gl,bounds:yu,moduleId:Du},categoryId:r0}),d0("")),u0(null)):Qu&&zu({id:Su,pageNumber:Gl,bounds:yu,moduleId:Du})},[Du,Zl,r0,Qu]);reactExports.useEffect(()=>{Qu&&Zl&&Du&&Vu!=="highlight"&&Vu!=="eraser"&&Mu("highlight")},[Qu,Zl,Du,Vu]),reactExports.useEffect(()=>{const Gl=()=>{if(Au.current&&Eu.current){const yu=Au.current.getBoundingClientRect().height,Su=Eu.current.getBoundingClientRect().height;qu({top:yu,bottom:Su})}};return Gl(),window.addEventListener("resize",Gl),()=>window.removeEventListener("resize",Gl)},[]),reactExports.useEffect(()=>{r0&&Vu!=="highlight"&&Vu!=="eraser"&&Mu("highlight")},[r0,Vu]);const Mp=reactExports.useCallback((Gl,yu,Su)=>{!yu||!Su||Su.length===0||(Np(mu=>({...mu,[Gl]:Su})),setTimeout(()=>{Np(mu=>{const Iu={...mu};return delete Iu[Gl],Iu})},100))},[]);reactExports.useMemo(()=>{if(!Du)return{};const Gl=filterAnnotationsByModule(C0,Du),yu={};return Object.values(Gl).forEach(Su=>{var Iu;const mu=((Iu=Su.pdfCoordinates)==null?void 0:Iu.page)||1;yu[mu]||(yu[mu]=[]),yu[mu].push(Su.pdfCoordinates)}),yu},[C0,Du]),reactExports.useEffect(()=>{Du&&Np(Gl=>{const yu={};return Object.entries(Gl).forEach(([Su,mu])=>{mu.forEach(Iu=>{if(Iu.moduleId===Du&&Iu.highlightId&&!(Ku&&Ku[Iu.highlightId])){const sp=parseInt(Su);yu[sp]||(yu[sp]=[]),yu[sp].some(ap=>ap.highlightId===Iu.highlightId)||yu[sp].push(Iu)}})}),Ku&&Object.keys(Ku).length>0&&Object.entries(Ku).forEach(([Su,mu])=>{const Iu=mu.moduleId||mu.spaceId;if(Iu!==Du||!mu.pageNumber||!mu.bounds)return;const Hu=mu.pageNumber;if(yu[Hu]||(yu[Hu]=[]),yu[Hu].some(ap=>ap.highlightId===Su))return;const sp=!mu.ballInCourtColor&&!mu.ballInCourtEntityId,np=mu.ballInCourtColor?ensureRgbaOpacity(mu.ballInCourtColor,1):null;yu[Hu].push({x:mu.bounds.x,y:mu.bounds.y,width:mu.bounds.width,height:mu.bounds.height,highlightId:Su,moduleId:Iu,...sp&&{needsBIC:!0},...np&&{color:np}})}),Object.keys(yu).length>0?yu:Gl})},[Du,Ku]),reactExports.useEffect(()=>{const Gl=yu=>{Ip&&!yu.target.closest("[data-shapes-dropdown]")&&Hp(!1)};return document.addEventListener("mousedown",Gl),()=>{document.removeEventListener("mousedown",Gl)}},[Ip]);const Yp=reactExports.useCallback(Gl=>e0?!x0||x0.length===0?!1:x0.includes(Gl):!0,[e0,x0]);reactExports.useEffect(()=>{e0&&(!x0||x0.length===0||x0.includes(Rl)||V0(x0[0],{fallback:"nearest"}))},[e0,x0,Rl,V0]),reactExports.useEffect(()=>{if(ou>0){const Gl=Array.from({length:ou},(yu,Su)=>Su+1).filter(yu=>Yp(yu));console.log("Pages visibility check:",{totalPages:ou,visiblePages:Gl.length,activeSpaceId:e0,visiblePageNumbers:Gl})}},[ou,e0,Yp,S0]);const w0=reactExports.useCallback(Gl=>{var mu;if(!e0)return null;const yu=S0.find(Iu=>Iu.id===e0);if(!yu)return null;const Su=(mu=yu.assignedPages)==null?void 0:mu.find(Iu=>Iu.pageId===Gl);return!Su||Su.wholePageIncluded!==!1||!Su.regions||Su.regions.length===0?null:Su.regions},[e0,S0]);return!Pl||Lu?jsxRuntimeExports.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"row",background:"#2b2b2b",color:"#ddd",fontFamily:FONT_FAMILY},children:[jsxRuntimeExports.jsx(PDFSidebar,{pdfDoc:null,numPages:0,pageNum:1,onNavigateToPage:()=>{},onDuplicatePage:()=>{},onDeletePage:()=>{},onCutPage:()=>{},onCopyPage:()=>{},onPastePage:()=>{},clipboardPage:null,clipboardType:null,onRotatePage:()=>{},onMirrorPage:()=>{},onResetPage:()=>{},onReorderPages:()=>{},pageTransformations:{},bookmarks:[],onBookmarkCreate:()=>{},onBookmarkUpdate:()=>{},onBookmarkDelete:()=>{},spaces:[],onSpaceCreate:()=>{},onSpaceUpdate:()=>{},onSpaceDelete:()=>{},activeSpaceId:null,onSetActiveSpace:()=>{},onExitSpaceMode:()=>{},scale:1,onToggleCollapse:()=>{}}),jsxRuntimeExports.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"15px",letterSpacing:"-0.2px"},children:Lu?jsxRuntimeExports.jsxs("div",{style:{textAlign:"center"},children:[jsxRuntimeExports.jsx("div",{style:{marginBottom:"20px",display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx(Icon,{name:"document",size:48})}),jsxRuntimeExports.jsx("div",{style:{fontSize:"18px",color:"#999"},children:"Loading PDF..."}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"10px"},children:(cs==null?void 0:cs.name)||"document.pdf"})]}):"Loading PDF..."})]}):jsxRuntimeExports.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",background:"#2b2b2b",color:"#ddd",fontFamily:FONT_FAMILY},children:[jsxRuntimeExports.jsxs("div",{ref:Au,style:{padding:"12px 20px",background:"#333",borderBottom:"1px solid #444",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontFamily:FONT_FAMILY,flexShrink:0},children:[jsxRuntimeExports.jsxs("button",{onClick:is,className:"btn btn-default btn-md",children:[jsxRuntimeExports.jsx(Icon,{name:"arrowLeft",size:14,style:{marginRight:"4px"}})," Back"]}),jsxRuntimeExports.jsx("div",{style:{width:"1px",height:"24px",background:"#555"}}),jsxRuntimeExports.jsxs("button",{onClick:Bu,className:"btn btn-default btn-md",style:{display:"flex",alignItems:"center",gap:"6px"},children:[jsxRuntimeExports.jsx(Icon,{name:Vl==="continuous"?"pages":"pageSingle",size:16}),Vl==="continuous"?"Continuous":"Single Page"]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("button",{onClick:hx,disabled:Rl<=1,className:"btn btn-default btn-icon",children:jsxRuntimeExports.jsx(Icon,{name:"chevronLeft",size:18})}),jsxRuntimeExports.jsx("input",{ref:_l,type:"text","data-page-number-input":!0,value:Bl,onChange:Ux,onKeyDown:zx,onBlur:Wx,inputMode:"numeric",pattern:"[0-9]*","aria-label":"Current page",style:{width:"56px",padding:"6px 10px",background:"#444",color:"#ddd",border:"1px solid #555",borderRadius:"5px",fontSize:"14px",fontFamily:FONT_FAMILY,fontWeight:"500",letterSpacing:"-0.2px",textAlign:"center"}}),jsxRuntimeExports.jsxs("span",{style:{color:"#999",fontSize:"14px",fontFamily:FONT_FAMILY,fontWeight:"400"},children:["/ ",ou]}),jsxRuntimeExports.jsx("button",{onClick:fx,disabled:Rl>=ou,className:"btn btn-default btn-icon",children:jsxRuntimeExports.jsx(Icon,{name:"chevronRight",size:18})})]}),jsxRuntimeExports.jsx("div",{style:{width:"1px",height:"24px",background:"#555"}}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("button",{onClick:Ym,className:"btn btn-default btn-icon",children:jsxRuntimeExports.jsx(Icon,{name:"minus",size:18})}),jsxRuntimeExports.jsx("input",{ref:El,type:"text","data-page-number-input":!0,value:Ll,onChange:Yl,onKeyDown:ju,onBlur:Wu,inputMode:"numeric",pattern:"[0-9]*","aria-label":"Zoom percentage",style:{width:"60px",padding:"6px 10px",background:"#444",color:"#ddd",border:"1px solid #555",borderRadius:"5px",fontSize:"14px",fontFamily:FONT_FAMILY,fontWeight:"500",letterSpacing:"-0.2px",textAlign:"center"}}),jsxRuntimeExports.jsx("span",{style:{color:"#999",fontSize:"14px",fontFamily:FONT_FAMILY,fontWeight:"400"},children:"%"}),jsxRuntimeExports.jsx("button",{onClick:$m,className:"btn btn-default btn-icon",children:jsxRuntimeExports.jsx(Icon,{name:"plus",size:18})}),jsxRuntimeExports.jsx("button",{onClick:gx,className:"btn btn-default btn-sm",children:"Reset"}),jsxRuntimeExports.jsxs("div",{ref:rx,style:{position:"relative"},children:[jsxRuntimeExports.jsxs("button",{onClick:Ix,className:"btn btn-default btn-sm","aria-haspopup":"listbox","aria-expanded":Ml,style:{display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},children:[jsxRuntimeExports.jsx(Icon,{name:"settings",size:16}),jsxRuntimeExports.jsx("span",{children:ox}),jsxRuntimeExports.jsx(Icon,{name:Ml?"chevronUp":"chevronDown",size:14})]}),Ml&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",right:0,background:"#2b2b2b",border:"1px solid #3a3a3a",borderRadius:"10px",boxShadow:"0 18px 36px rgba(0,0,0,0.45)",minWidth:"220px",zIndex:2e3,padding:"6px 0"},children:ZOOM_MODE_OPTIONS.map(Gl=>{const yu=Gl.id===lu;return jsxRuntimeExports.jsxs("button",{onClick:()=>s1(Gl.id),className:"btn btn-ghost",style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"10px 14px",background:yu?"#3a3a3a":"transparent",border:"none",textAlign:"left",cursor:"pointer",gap:"2px"},children:[jsxRuntimeExports.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"#e0e0e0"},children:[Gl.label,Gl.id===ZOOM_MODES.MANUAL&&jsxRuntimeExports.jsxs("span",{style:{marginLeft:"6px",fontWeight:400,color:"#9a9a9a"},children:[Math.round((xu||1)*100),"%"]})]}),jsxRuntimeExports.jsx("span",{style:{fontSize:"12px",color:"#9a9a9a"},children:Gl.description})]},Gl.id)})})]})]}),jsxRuntimeExports.jsx("div",{style:{marginLeft:"auto",fontSize:"13px",color:"#999",fontFamily:FONT_FAMILY,fontWeight:"400",letterSpacing:"-0.1px"},children:cs.name}),jsxRuntimeExports.jsx("div",{style:{width:"1px",height:"24px",background:"#555"}}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Qu?(up(!1),Ou(null),$l(null)):vu(!0)},className:`btn btn-md ${Qu?"btn-active":"btn-default"}`,style:{display:"flex",alignItems:"center",gap:"6px"},children:[jsxRuntimeExports.jsx(Icon,{name:"survey",size:16}),"Survey"]})]}),qp.visible&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",left:qp.x,top:qp.y,transform:"translate(-50%, -100%)",background:"#222",color:"#fff",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontFamily:FONT_FAMILY,pointerEvents:"none",zIndex:1e4,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:qp.text}),I0&&jsxRuntimeExports.jsx(RegionSelectionTool,{active:I0,onRegionComplete:v1,onCancel:()=>{ym(!1),Rm(null)},currentSpaceId:e0,currentPageId:T0,scale:_c,initialRegions:T0?w0(T0)||[]:[],onSetFullPage:m1,canSetFullPage:x1}),jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"row",overflow:"hidden",minWidth:0,minHeight:0},children:[jsxRuntimeExports.jsx(PDFSidebar,{pdfDoc:Pl,numPages:ou,pageNum:Rl,onNavigateToPage:V0,onDuplicatePage:Mx,onDeletePage:a1,onCutPage:l1,onCopyPage:c1,onPastePage:u1,clipboardPage:Ox,clipboardType:o1,onRotatePage:h1,onMirrorPage:f1,onResetPage:p1,onReorderPages:d1,pageTransformations:_m,bookmarks:ax,onBookmarkCreate:Sm,onBookmarkUpdate:Em,onBookmarkDelete:N0,spaces:S0,onSpaceCreate:um,onSpaceUpdate:Hm,onSpaceDelete:jx,activeSpaceId:e0,onSetActiveSpace:dx,onExitSpaceMode:Nx,onRequestRegionEdit:g1,onSpaceAssignPages:Cm,onSpaceRenamePage:dm,onSpaceRemovePage:lx,onReorderSpaces:hm,onExportSpaceCSV:J0,onExportSpacePDF:ux,isRegionSelectionActive:I0,shouldShowPage:Yp,activeSpacePages:x0,scale:_c,tabId:us,onPageDrop:hs,onToggleCollapse:()=>{requestAnimationFrame(()=>{var Gl;(Gl=b0.current)==null||Gl.applyZoom({persist:!1,force:!0})})}}),jsxRuntimeExports.jsx("div",{ref:uo,onMouseDown:b1,onMouseMove:Bx,onMouseUp:mx,onMouseLeave:mx,onWheel:y1,style:Xu,"data-testid":"pdf-container",children:jsxRuntimeExports.jsx("div",{ref:ga,style:ip,children:Vl==="continuous"?ou>0?Array.from({length:ou},(Gl,yu)=>yu+1).filter(Gl=>Yp(Gl)).map(Gl=>{var mu,Iu,Hu,Gu;const yu=w0(Gl),Su=Tu.has(Gl);return jsxRuntimeExports.jsx("div",{ref:sp=>ba.current[Gl]=sp,"data-page-num":Gl,style:{minHeight:ku[Gl]?`${ku[Gl]*_c}px`:"800px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,position:"relative"},children:Su?jsxRuntimeExports.jsxs("div",{style:{position:"relative",transform:Wm(Gl),transformOrigin:"center center"},children:[jsxRuntimeExports.jsx("canvas",{ref:sp=>xa.current[Gl]=sp,style:{display:"block",background:bu.has(Gl)?"#fff":"#f5f5f5",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",marginBottom:"0"}}),eu[Gl]&&$u[Gl]&&jsxRuntimeExports.jsx(TextLayer,{pageNumber:Gl,page:$u[Gl],scale:_c,width:eu[Gl].width,height:eu[Gl].height,onTextSelected:Mp,isSelectionMode:Vu==="pan"||Vu==="text-select"}),eu[Gl]&&jsxRuntimeExports.jsx(PageAnnotationLayer,{pageNumber:Gl,width:eu[Gl].width,height:eu[Gl].height,scale:_c,tool:Vu,strokeColor:hp,strokeWidth:Rp,annotations:Bp[Gl],onSaveAnnotations:cp,newHighlights:Ap[Gl],highlightsToRemove:Vp[Gl],onHighlightCreated:_p,onHighlightDeleted:op,selectedSpaceId:Tm,selectedModuleId:Du,activeRegions:yu}),yu&&yu.length>0&&!(I0&&T0===Gl)&&jsxRuntimeExports.jsx(SpaceRegionOverlay,{pageNumber:Gl,regions:yu,width:((mu=eu[Gl])==null?void 0:mu.width)||0,height:((Iu=eu[Gl])==null?void 0:Iu.height)||0,scale:_c}),I0&&T0===Gl&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,width:`${(((Hu=eu[Gl])==null?void 0:Hu.width)||0)*_c}px`,height:`${(((Gu=eu[Gl])==null?void 0:Gu.height)||0)*_c}px`,pointerEvents:"none",zIndex:1e3},children:jsxRuntimeExports.jsx("div",{id:"region-selection-target",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]}):jsxRuntimeExports.jsxs("div",{style:{width:ku[Gl]?`${ku[Gl]*.7*_c}px`:"595px",height:ku[Gl]?`${ku[Gl]*_c}px`:"800px",background:"#f5f5f5",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"14px"},children:["Page ",Gl]})},Gl)}):jsxRuntimeExports.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#999",fontSize:"14px"},children:ou===0?"No pages to display":"No pages match the current filter"}):Yp(Rl)&&(()=>{var yu,Su,mu,Iu;const Gl=w0(Rl);return jsxRuntimeExports.jsx("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{style:{position:"relative",transform:Wm(Rl),transformOrigin:"center center"},children:[jsxRuntimeExports.jsx("canvas",{ref:Hu=>xa.current[Rl]=Hu,style:{display:"block",background:"#fff",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"}}),eu[Rl]&&$u[Rl]&&jsxRuntimeExports.jsx(TextLayer,{pageNumber:Rl,page:$u[Rl],scale:_c,width:eu[Rl].width,height:eu[Rl].height,onTextSelected:Mp,isSelectionMode:Vu==="pan"||Vu==="text-select"}),eu[Rl]&&jsxRuntimeExports.jsx(PageAnnotationLayer,{pageNumber:Rl,width:eu[Rl].width,height:eu[Rl].height,scale:_c,tool:Vu,strokeColor:hp,strokeWidth:Rp,annotations:Bp[Rl],onSaveAnnotations:cp,newHighlights:Ap[Rl],highlightsToRemove:Vp[Rl],onHighlightCreated:_p,onHighlightDeleted:op,selectedSpaceId:Tm,selectedModuleId:Du,activeRegions:Gl}),Gl&&Gl.length>0&&!(I0&&T0===Rl)&&jsxRuntimeExports.jsx(SpaceRegionOverlay,{pageNumber:Rl,regions:Gl,width:((yu=eu[Rl])==null?void 0:yu.width)||0,height:((Su=eu[Rl])==null?void 0:Su.height)||0,scale:_c}),I0&&T0===Rl&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,width:`${(((mu=eu[Rl])==null?void 0:mu.width)||0)*_c}px`,height:`${(((Iu=eu[Rl])==null?void 0:Iu.height)||0)*_c}px`,pointerEvents:"none",zIndex:1e3},children:jsxRuntimeExports.jsx("div",{id:"region-selection-target",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})]})})})()})})]}),jsxRuntimeExports.jsxs("div",{ref:Eu,style:{padding:"12px 20px",background:"#333",borderTop:"1px solid #444",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontFamily:FONT_FAMILY,flexShrink:0},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap",position:"relative"},children:[[{id:"pan",label:"Pan",iconName:"pan"},{id:"pen",label:"Pen",iconName:"pen"},{id:"highlighter",label:"Highlighter",iconName:"highlighter"},...Qu?[{id:"highlight",label:"Highlight (Rect)",iconName:"highlighter"}]:[],{id:"eraser",label:"Eraser",iconName:"eraser"},{id:"text",label:"Text",iconName:"text"}].map(Gl=>jsxRuntimeExports.jsx("div",{style:{position:"relative",display:"inline-block"},children:jsxRuntimeExports.jsx("button",{onClick:()=>Mu(Gl.id),onMouseEnter:yu=>{const Su=yu.currentTarget.getBoundingClientRect();lp({visible:!0,text:Gl.label,x:Su.left+Su.width/2,y:Su.top-10})},onMouseLeave:()=>lp({visible:!1,text:"",x:0,y:0}),className:`btn btn-icon ${Vu===Gl.id?"btn-active":""}`,children:jsxRuntimeExports.jsx(Icon,{name:Gl.iconName,size:16})})},Gl.id)),jsxRuntimeExports.jsxs("div",{style:{position:"relative",display:"inline-block"},"data-shapes-dropdown":!0,children:[jsxRuntimeExports.jsx("button",{onClick:()=>Hp(!Ip),onMouseEnter:Gl=>{const yu=Gl.currentTarget.getBoundingClientRect();lp({visible:!0,text:"Shapes",x:yu.left+yu.width/2,y:yu.top-10})},onMouseLeave:()=>lp({visible:!1,text:"",x:0,y:0}),className:`btn btn-md ${["rect","ellipse","line","arrow","underline","strikeout","squiggly","note"].includes(Vu)?"btn-active":"btn-default"}`,children:"Shapes"}),Ip&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:"100%",left:0,marginBottom:"4px",background:"#444",border:"1px solid #555",borderRadius:"5px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e3,display:"flex",flexDirection:"column",minWidth:"120px"},children:[{id:"rect",label:"Rect",iconName:"rect"},{id:"ellipse",label:"Ellipse",iconName:"ellipse"},{id:"line",label:"Line",iconName:"line"},{id:"arrow",label:"Arrow",iconName:"arrow"},{id:"underline",label:"Underline",iconName:"underline"},{id:"strikeout",label:"Strikeout",iconName:"strikeout"},{id:"squiggly",label:"Squiggly",iconName:"squiggly"},{id:"note",label:"Note",iconName:"note"}].map(Gl=>jsxRuntimeExports.jsxs("button",{onClick:()=>{Mu(Gl.id),Hp(!1)},className:`btn ${Vu===Gl.id?"btn-active":"btn-ghost"}`,style:{borderBottom:Gl.id!=="note"?"1px solid #555":"none",borderRadius:"0",textAlign:"left",justifyContent:"flex-start",padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx(Icon,{name:Gl.iconName,size:16}),jsxRuntimeExports.jsx("span",{style:{fontSize:"13px"},children:Gl.label})]},Gl.id))})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{!e0||!Yp(Rl)||(Rm(Rl),ym(!0))},onMouseEnter:Gl=>{const yu=Gl.currentTarget.getBoundingClientRect();lp({visible:!0,text:"Region Selection",x:yu.left+yu.width/2,y:yu.top-10})},onMouseLeave:()=>lp({visible:!1,text:"",x:0,y:0}),className:`btn btn-md ${I0?"btn-active":"btn-default"}`,disabled:!e0||!Yp(Rl),style:{display:"flex",alignItems:"center",gap:"6px"},title:e0?Yp(Rl)?"Define page regions for this space":"Add this page to the active space to define regions":"Activate a space to define regions",children:[jsxRuntimeExports.jsx(Icon,{name:"rect",size:16}),"Regions"]})]}),jsxRuntimeExports.jsx("div",{style:{width:"1px",height:"24px",background:"#555"}}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("label",{style:{color:"#aaa",fontSize:"13px"},children:"Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:hp,onChange:Gl=>mp(Gl.target.value),style:{width:"32px",height:"28px",border:"none",background:"transparent",cursor:"pointer"}}),jsxRuntimeExports.jsx("label",{style:{color:"#aaa",fontSize:"13px"},children:"Width"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"30",value:Rp,onChange:Gl=>Lp(parseInt(Gl.target.value)||1),style:{width:"60px",padding:"6px 8px",background:"#444",color:"#ddd",border:"1px solid #555",borderRadius:"5px",fontSize:"13px",fontFamily:FONT_FAMILY}})]})]}),jsxRuntimeExports.jsxs("div",{style:{padding:"8px 20px",background:"#333",borderTop:"1px solid #444",fontSize:"12px",color:"#999",display:"flex",gap:"20px",fontFamily:FONT_FAMILY,fontWeight:"400",letterSpacing:"-0.1px"},children:[jsxRuntimeExports.jsx("span",{children:Vl==="continuous"?"Scroll to navigate  Ctrl+Scroll to zoom  Drag to pan":"Use arrow keys  Ctrl+Scroll to zoom  Drag to pan"}),Vl==="continuous"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("span",{style:{marginLeft:"auto",color:"#aaa",fontFamily:FONT_FAMILY,fontWeight:"500"},children:[bu.size," of ",ou," pages rendered"]})})]}),rp&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{onClick:()=>dp(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e4,animation:"fadeIn 0.2s ease-out",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{onClick:Gl=>Gl.stopPropagation(),style:{background:"#2b2b2b",border:"1px solid #444",borderRadius:"8px",padding:"24px",width:"500px",maxWidth:"90vw",maxHeight:"80vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"fadeIn 0.2s ease-out"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#fff",fontFamily:FONT_FAMILY},children:"Select Space"}),jsxRuntimeExports.jsx("button",{onClick:()=>dp(!1),className:"btn btn-icon btn-icon-sm",style:{background:"transparent",border:"none",color:"#999"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:18})})]}),Xl.length===0?jsxRuntimeExports.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:jsxRuntimeExports.jsx("p",{children:"No templates available. Please create a template first."})}):(()=>{const Gl=[];if(Xl.forEach(Iu=>{(Iu.spaces||[]).forEach(Hu=>{Gl.push({...Hu,templateId:Iu.id,templateName:Iu.name})})}),Gl.length===0)return jsxRuntimeExports.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:jsxRuntimeExports.jsx("p",{children:"No spaces available in any template."})});const yu=Object.keys(p0).filter(Iu=>p0[Iu]);let Su=null;if(yu.length>0){const Iu=Ku[yu[0]];Su=(Iu==null?void 0:Iu.moduleId)||(Iu==null?void 0:Iu.spaceId)||Du}else Su=Du;const mu=Su?Gl.filter(Iu=>Iu.id!==Su):Gl;return jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:mu.map(Iu=>jsxRuntimeExports.jsx("button",{onClick:Hu=>{Hu.stopPropagation(),Hu.preventDefault();const Gu=Xl.find(sp=>sp.id===Iu.templateId);if(!Gu){console.error("Template not found for module:",Iu),alert("Template not found. Please try again.");return}if(P0){const sp=Object.keys(g0).filter(pp=>g0[pp]);if(sp.length===0){alert("Please select at least one category to copy.");return}const np=[];if(sp.forEach(pp=>{Object.entries(Ku).filter(([kp,Fp])=>(Fp.moduleId||Fp.spaceId)===Du&&Fp.categoryId===pp).forEach(([kp,Fp])=>{np.push(kp)})}),np.length===0){alert("Selected categories have no items to copy.");return}const ap=[],bp=Zl||Xl.find(pp=>(pp.modules||pp.spaces||[]).some(kp=>kp.id===Du));if(!bp){alert("Unable to find source template. Please try again.");return}if(np.forEach(pp=>{const gp=Ku[pp];if(!gp||!gp.categoryId)return;const kp=getCategoryName(bp,gp.spaceId,gp.categoryId),Fp=Object.values(n0).find(xp=>xp.name===gp.name&&xp.itemType===kp);Fp&&Fp.itemId&&!ap.includes(Fp.itemId)&&ap.push(Fp.itemId)}),ap.length>0){const pp=ap.map(wp=>n0[wp]).filter(Boolean),kp=[...new Set(pp.map(wp=>wp.itemType))].filter(wp=>!categoryExists(Gu,Iu.id,wp));if(kp.length>0){alert(`Some categories don't exist in the destination module. Please create them first: ${kp.join(", ")}`);return}const Fp=transferItems(ap,Du,Iu.id,Gu,n0,C0);Qp(Fp.newItems),f0(Fp.updatedAnnotations);const xp={};ap.forEach(wp=>{var Up;const Dp=Fp.newItems[wp];if(!Dp)return;const jp=Object.values(Fp.updatedAnnotations).find(Zp=>{const v0=Zp.moduleId||Zp.spaceId;return Zp.itemId===wp&&v0===Iu.id}),Gp=np.find(Zp=>{const v0=Ku[Zp];return v0&&v0.name===Dp.name}),Xp=Gp?Ku[Gp]:null,Jp=Object.values(C0).find(Zp=>{const v0=Zp.moduleId||Zp.spaceId;return Zp.itemId===wp&&v0===Du}),a0=(Gu.modules||Gu.spaces||[]).find(Zp=>Zp.id===Iu.id),Pp=(Up=a0==null?void 0:a0.categories)==null?void 0:Up.find(Zp=>Zp.name===Dp.itemType);let $p=null;if(jp!=null&&jp.pdfCoordinates?$p=jp.pdfCoordinates:Jp!=null&&Jp.pdfCoordinates?$p=Jp.pdfCoordinates:Xp!=null&&Xp.bounds&&($p=Xp.bounds),$p){const Zp=`highlight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,v0=(Xp==null?void 0:Xp.pageNumber)||(jp==null?void 0:jp.pageNumber)||1;xp[Zp]={id:Zp,pageNumber:v0,bounds:$p,moduleId:Iu.id,categoryId:(Pp==null?void 0:Pp.id)||null,name:Dp.name||(Xp==null?void 0:Xp.name)||"Untitled Item",checklistResponses:{}},Np(m0=>({...m0,[v0]:[...m0[v0]||[],{...$p,needsBIC:!0,highlightId:Zp}]}))}}),Object.keys(xp).length>0&&vp(wp=>({...wp,...xp})),B0({}),im(!1),K0(null),dp(!1),Ou(Gu),$l(Iu.id),up(!0);return}else{const pp=np.map(xp=>Ku[xp]).filter(Boolean);if(pp.length===0){alert("No valid items found to copy.");return}const gp=(Gu.modules||Gu.spaces||[]).find(xp=>xp.id===Iu.id),kp=[];if(pp.forEach(xp=>{var Gp;const wp=xp.moduleId||xp.spaceId,Dp=getCategoryName(bp,wp,xp.categoryId);!((Gp=gp==null?void 0:gp.categories)==null?void 0:Gp.find(Xp=>Xp.name===Dp))&&Dp&&!kp.includes(Dp)&&kp.push(Dp)}),kp.length>0){alert(`Cannot copy categories. The following categories don't exist in the destination module:

${kp.join(", ")}

Please create these categories in the destination module first.`);return}const Fp={};pp.forEach(xp=>{var Xp;const wp=xp.moduleId||xp.spaceId,Dp=getCategoryName(bp,wp,xp.categoryId),jp=(Xp=gp==null?void 0:gp.categories)==null?void 0:Xp.find(Jp=>Jp.name===Dp),Gp=`highlight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;Fp[Gp]={...xp,id:Gp,moduleId:Iu.id,categoryId:(jp==null?void 0:jp.id)||null}}),vp(xp=>({...xp,...Fp})),B0({}),im(!1),K0(null),dp(!1),Ou(Gu),$l(Iu.id),up(!0);return}}if(console.log("Copy to Spaces - Selected highlight IDs:",yu),console.log("Copy to Spaces - Highlight annotations:",Ku),yu.length>0){const sp=[];if(!sourceSpaceId){console.error("No source space ID found"),alert("Unable to determine source space. Please try again.");return}const np=Zl||Xl.find(ap=>{var bp;return(bp=ap.spaces)==null?void 0:bp.some(pp=>pp.id===sourceSpaceId)});if(!np){console.error("Source template not found for space:",sourceSpaceId),alert("Unable to find source template. Please try again.");return}if(console.log("Source space ID:",sourceSpaceId),console.log("Source template:",np),console.log("Destination space ID:",space.id),console.log("Destination template:",Gu),console.log("All items:",n0),console.log("All annotations:",C0),yu.forEach(ap=>{const bp=Ku[ap];if(console.log(`Processing highlight ${ap}:`,bp),!bp){console.warn(`Highlight ${ap} not found`);return}if(!bp.categoryId){console.warn(`Highlight ${ap} has no categoryId`);return}const pp=getCategoryName(np,bp.spaceId,bp.categoryId);console.log(`Category name for highlight ${ap}:`,pp),console.log("Highlight name:",bp.name);const gp=Object.values(n0).find(kp=>kp.name===bp.name&&kp.itemType===pp);if(console.log(`Matching item for highlight ${ap}:`,gp),gp){const kp=Object.values(C0).find(Fp=>Fp.itemId===gp.itemId&&Fp.spaceId===bp.spaceId);console.log(`Matching annotation for item ${gp.itemId}:`,kp),kp&&gp.itemId?sp.includes(gp.itemId)||(console.log(`Adding item ${gp.itemId} to copy list`),sp.push(gp.itemId)):sp.includes(gp.itemId)||(console.log(`Adding item ${gp.itemId} to copy list (no annotation)`),sp.push(gp.itemId))}else console.warn(`No matching item found for highlight ${ap} with name "${bp.name}" and category "${pp}"`)}),console.log("Items to copy:",sp),sp.length>0){const ap=sp.map(gp=>n0[gp]).filter(Boolean),bp=[...new Set(ap.map(gp=>gp.itemType))];console.log("Item types to copy:",bp);const pp=bp.filter(gp=>!categoryExists(Gu,space.id,gp));if(pp.length>0){alert(`Some categories don't exist in the destination space. Please create them first: ${pp.join(", ")}`);return}else{console.log("Calling transferItems with:",{itemIdsToCopy:sp,sourceSpaceId,destSpaceId:space.id,template:Gu});const gp=transferItems(sp,sourceSpaceId,space.id,Gu,n0,C0);console.log("Transfer result:",gp),Qp(gp.newItems),f0(gp.updatedAnnotations),console.log("Creating highlight entries for",sp.length,"items");const kp={};sp.forEach(Fp=>{var Pp;const xp=gp.newItems[Fp];if(console.log("Processing item for highlight creation:",Fp,xp),!xp){console.log("Item not found in result.newItems");return}const wp=Object.values(gp.updatedAnnotations).find($p=>$p.itemId===Fp&&$p.spaceId===space.id);console.log("Destination annotation:",wp);const Dp=Object.values(C0).find($p=>$p.itemId===Fp&&$p.spaceId===sourceSpaceId);console.log("Source annotation:",Dp);const jp=yu.find($p=>{const Up=Ku[$p];return Up&&Up.name===xp.name}),Gp=jp?Ku[jp]:null;console.log("Source highlight:",Gp);const Xp=Gu.spaces.find($p=>$p.id===space.id),Jp=(Pp=Xp==null?void 0:Xp.categories)==null?void 0:Pp.find($p=>$p.name===xp.itemType);console.log("Destination category:",Jp);let a0=null;if(wp!=null&&wp.pdfCoordinates?a0=wp.pdfCoordinates:Dp!=null&&Dp.pdfCoordinates?a0=Dp.pdfCoordinates:Gp!=null&&Gp.bounds&&(a0=Gp.bounds),console.log("Bounds for highlight:",a0),a0){const $p=`highlight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Up=(Gp==null?void 0:Gp.pageNumber)||(wp==null?void 0:wp.pageNumber)||1;kp[$p]={id:$p,pageNumber:Up,bounds:a0,spaceId:space.id,categoryId:(Jp==null?void 0:Jp.id)||null,name:xp.name||(Gp==null?void 0:Gp.name)||"Untitled Item",checklistResponses:{}},console.log("Created highlight (no BIC):",kp[$p]),Np(Zp=>({...Zp,[Up]:[...Zp[Up]||[],{...a0,needsBIC:!0,highlightId:$p}]}))}else console.log("No bounds available, skipping highlight creation")}),Object.keys(kp).length>0&&(console.log("Adding",Object.keys(kp).length,"new highlights to highlightAnnotations"),vp(Fp=>({...Fp,...kp}))),W0({}),H0(!1),dp(!1),Ou(Gu),em(space.id),up(!0),console.log("Copy completed successfully");return}}else{console.log("No items found, treating highlights as legacy highlights");const ap=yu.map(kp=>Ku[kp]).filter(Boolean);if(ap.length===0){console.error("No valid highlights found to process"),alert("No valid highlights selected. Please select highlights and try again.");return}console.log("Copying legacy highlights:",ap);const bp=Gu.spaces.find(kp=>kp.id===space.id),pp=[];if(ap.forEach(kp=>{var wp;const Fp=getCategoryName(np,kp.spaceId,kp.categoryId);!((wp=bp==null?void 0:bp.categories)==null?void 0:wp.find(Dp=>Dp.name===Fp))&&Fp&&!pp.includes(Fp)&&pp.push(Fp)}),pp.length>0){alert(`Cannot copy highlights. The following categories don't exist in the destination space:

${pp.join(", ")}

Please create these categories in the destination space first.`);return}const gp={};ap.forEach(kp=>{var Dp;const Fp=getCategoryName(np,kp.spaceId,kp.categoryId),xp=(Dp=bp==null?void 0:bp.categories)==null?void 0:Dp.find(jp=>jp.name===Fp),wp=`highlight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;gp[wp]={...kp,id:wp,spaceId:space.id,categoryId:(xp==null?void 0:xp.id)||null},console.log(`Created legacy highlight copy: ${wp}`,gp[wp])}),vp(kp=>({...kp,...gp})),W0({}),H0(!1),dp(!1),Ou(Gu),em(space.id),up(!0),console.log("Legacy highlights copied successfully");return}}else console.warn("No items selected for copy. Closing modal."),dp(!1)},className:"btn btn-default btn-md",style:{textAlign:"left",justifyContent:"flex-start",padding:"12px 16px",background:"#333",border:"1px solid #444"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx(Icon,{name:"template",size:20}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"500",color:"#fff"},children:space.name||"Untitled Space"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:"#999",marginTop:"2px"},children:space.templateName||"Untitled Template"})]})]})},`${Iu.templateId}-${Iu.id}`))})})()]})})}),Sp&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{onClick:()=>vu(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e4,animation:"fadeIn 0.2s ease-out",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{onClick:Gl=>Gl.stopPropagation(),style:{background:"#2b2b2b",border:"1px solid #444",borderRadius:"8px",padding:"24px",width:"500px",maxWidth:"90vw",maxHeight:"80vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"fadeIn 0.2s ease-out"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#fff",fontFamily:FONT_FAMILY},children:"Select Template"}),jsxRuntimeExports.jsx("button",{onClick:()=>vu(!1),className:"btn btn-icon btn-icon-sm",style:{background:"transparent",border:"none",color:"#999"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:18})})]}),Xl.length===0?jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#999",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[jsxRuntimeExports.jsx("p",{style:{margin:0},children:"No templates available."}),jsxRuntimeExports.jsx("p",{style:{margin:0},children:"Please create a template first."}),jsxRuntimeExports.jsx("button",{onClick:()=>{vu(!1),up(!1),Ou(null),$l(null),co==null||co()},className:"btn btn-primary btn-md",style:{minWidth:"160px"},children:"Create Template"})]}):jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Xl.map(Gl=>jsxRuntimeExports.jsx("button",{onClick:()=>{var Su,mu;const yu=((mu=(Su=Gl.modules||Gl.spaces||[])==null?void 0:Su[0])==null?void 0:mu.id)||null;Ou(Gl),$l(yu),vu(!1),up(!0)},className:"btn btn-default btn-md",style:{textAlign:"left",justifyContent:"flex-start",padding:"12px 16px",background:"#333",border:"1px solid #444"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx(Icon,{name:"template",size:20}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"500",color:"#fff"},children:Gl.name||"Untitled Template"}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"12px",color:"#999",marginTop:"2px"},children:[(Gl.modules||Gl.spaces||[]).length," module",(Gl.modules||Gl.spaces||[]).length!==1?"s":""]})]})]})},Gl.id))}),jsxRuntimeExports.jsx("button",{onClick:()=>{vu(!1),up(!1),Ou(null),$l(null),co==null||co()},className:"btn btn-primary btn-md",style:{alignSelf:"center",minWidth:"160px"},children:"Create Template"})]})]})})}),Qu&&Zl&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{style:{position:"fixed",top:`${_f.top}px`,right:0,bottom:`${_f.bottom}px`,width:Ep?"48px":"320px",background:"#2b2b2b",borderLeft:"1px solid #444",zIndex:9999,display:"flex",flexDirection:"column",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.5)",animation:"slideInRight 0.3s ease-out",transition:"width 0.2s ease, top 0.2s ease, bottom 0.2s ease"},children:[jsxRuntimeExports.jsx("div",{style:{padding:"8px",borderBottom:"1px solid #3a3a3a",display:"flex",justifyContent:"flex-end",background:"#252525"},children:jsxRuntimeExports.jsx("button",{onClick:()=>Cp(Gl=>!Gl),style:{background:"transparent",border:"none",color:"#999",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.15s ease"},onMouseEnter:Gl=>Gl.currentTarget.style.background="#333",onMouseLeave:Gl=>Gl.currentTarget.style.background="transparent",children:jsxRuntimeExports.jsx(Icon,{name:Ep?"chevronLeft":"chevronRight",size:16,color:"#999"})})}),!Ep&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #444",display:"flex",alignItems:"center",justifyContent:"space-between",background:"#333"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#fff",fontFamily:FONT_FAMILY,letterSpacing:"-0.2px"},children:Zl.name||"Survey"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Dm,style:{background:"#4A90E2",border:"1px solid #3277c7",color:"#fff",fontSize:"12px",fontWeight:600,padding:"6px 12px",borderRadius:"6px",textTransform:"uppercase",letterSpacing:"0.08em",cursor:"pointer"},children:"Export"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{up(!1),Ou(null),em(null),u0(null)},className:"btn btn-icon btn-icon-sm",style:{background:"transparent",border:"none",color:"#999"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:18})})]}),(Zl.modules||Zl.spaces||[]).length>0&&jsxRuntimeExports.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #444",background:"#333",display:"flex",gap:"8px",overflowX:"auto"},children:(Zl.modules||Zl.spaces||[]).map(Gl=>jsxRuntimeExports.jsx("button",{onClick:()=>{$l(Gl.id),u0(null),H0(!1),W0({})},className:"btn btn-sm",style:{background:Du===Gl.id?"#4A90E2":"#3A3A3A",color:Du===Gl.id?"#fff":"#DDD",border:Du===Gl.id?"1px solid #4A90E2":"1px solid #444",whiteSpace:"nowrap",flexShrink:0},children:Gl.name},Gl.id))}),jsxRuntimeExports.jsx("div",{style:{flex:1,overflowY:"auto",padding:"20px",fontFamily:FONT_FAMILY},children:Du?(()=>{var Su;const Gl=(Su=Zl.modules||Zl.spaces||[])==null?void 0:Su.find(mu=>mu.id===Du);if(!Gl)return null;const yu={};return Object.entries(Ku).forEach(([mu,Iu])=>{(Iu.moduleId||Iu.spaceId)===Du&&Iu.categoryId&&(yu[Iu.categoryId]||(yu[Iu.categoryId]=[]),yu[Iu.categoryId].push({...Iu,id:mu}))}),Object.keys(yu).length>0,jsxRuntimeExports.jsxs("div",{children:[!Y0&&!P0?jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap",alignItems:"center"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>im(!0),className:"btn btn-sm",style:{background:"#3a3a3a",color:"#ddd",border:"1px solid #444",whiteSpace:"nowrap",flexShrink:0,padding:"6px 12px",borderRadius:"6px"},children:"Select Catagory"}),jsxRuntimeExports.jsx("button",{onClick:()=>{if(!(Zl!=null&&Zl.id)||!Du){alert("Please select a template and module before creating a category.");return}co==null||co({mode:"edit",templateId:Zl.id,moduleId:Du,startAddingCategory:!0})},className:"btn btn-sm",style:{background:"#4A90E2",color:"#fff",border:"1px solid #4A90E2",whiteSpace:"nowrap",flexShrink:0,padding:"6px 14px",borderRadius:"6px"},onMouseEnter:mu=>{mu.currentTarget.style.background="#5AA0F2",mu.currentTarget.style.borderColor="#5AA0F2"},onMouseLeave:mu=>{mu.currentTarget.style.background="#4A90E2",mu.currentTarget.style.borderColor="#4A90E2"},children:"Create Category"})]}):Y0?jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"12px",alignItems:"center",paddingBottom:"12px",borderBottom:"1px solid #333"},children:[(()=>{const mu=Object.entries(Ku).filter(([Gu,sp])=>(sp.moduleId||sp.spaceId)===Du).map(([Gu,sp])=>Gu),Hu=mu.filter(Gu=>p0[Gu]===!0).length===mu.length&&mu.length>0;return jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none"},children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Hu,onChange:Gu=>{const sp={...p0};mu.forEach(np=>{Hu?delete sp[np]:sp[np]=!0}),W0(sp)},style:{cursor:"pointer"}}),jsxRuntimeExports.jsx("span",{style:{color:"#ddd",fontSize:"13px",fontWeight:"400"},children:"Select All"})]})})(),jsxRuntimeExports.jsx("div",{style:{width:"1px",height:"16px",background:"#444"}}),jsxRuntimeExports.jsx("button",{onClick:()=>{const mu=Object.keys(p0).filter(Iu=>p0[Iu]);console.log("=== Copy to Spaces Button Clicked ==="),console.log("copiedItemSelection:",p0),console.log("selectedIds:",mu),console.log("highlightAnnotations keys:",Object.keys(Ku)),console.log("Checking if selected IDs exist in highlightAnnotations:"),mu.forEach(Iu=>{console.log(`  ${Iu}: ${Ku[Iu]?"EXISTS":"NOT FOUND"}`)}),mu.length!==0&&dp(!0)},disabled:!Object.values(p0).some(Boolean),style:{padding:0,background:"transparent",border:"none",color:Object.values(p0).some(Boolean)?"#999":"#555",fontSize:"13px",fontWeight:"400",cursor:Object.values(p0).some(Boolean)?"pointer":"not-allowed"},onMouseEnter:mu=>{Object.values(p0).some(Boolean)&&(mu.currentTarget.style.color="#ddd")},onMouseLeave:mu=>{Object.values(p0).some(Boolean)&&(mu.currentTarget.style.color="#999")},children:"Copy to Spaces"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const mu=Object.keys(p0).filter(Hu=>p0[Hu]);if(mu.length===0||!confirm(`Are you sure you want to delete ${mu.length} item${mu.length!==1?"s":""}?`))return;const Iu=mu.map(Hu=>Ku[Hu]).filter(Boolean);vp(Hu=>{const Gu={...Hu};return mu.forEach(sp=>{delete Gu[sp]}),l0&&Object.entries(Gu).filter(([np,ap])=>ap.spaceId===l0).length===0&&setTimeout(()=>{H0(!1),W0({})},0),Gu}),Iu.forEach(Hu=>{const Gu=Hu.pageNumber,sp=Hu.bounds;Gu&&sp&&Ru(np=>({...np,[Gu]:[...np[Gu]||[],sp]}))}),setTimeout(()=>{Iu.forEach(Hu=>{const Gu=Hu.pageNumber;Gu&&Ru(sp=>{const np={...sp};return delete np[Gu],np})})},100),Iu.forEach(Hu=>{const Gu=Hu.pageNumber;Gu&&Bp[Gu]&&Tp(sp=>{const np=sp[Gu];if(!np||!np.objects)return sp;const ap=_c,bp=np.objects.filter(pp=>{if(pp.type!=="rect"||!pp.fill||typeof pp.fill!="string"||!pp.fill.includes("rgba"))return!0;const gp=(pp.left||0)/ap,kp=(pp.top||0)/ap,Fp=(pp.width||0)/ap,xp=(pp.height||0)/ap,wp=Hu.bounds||{},Dp=wp.x||wp.left||0,jp=wp.y||wp.top||0,Gp=wp.width||(wp.right?wp.right-wp.left:0)||0,Xp=wp.height||(wp.bottom?wp.bottom-wp.top:0)||0,Jp=5/ap;return!(Math.abs(gp-Dp)<Jp&&Math.abs(kp-jp)<Jp&&Math.abs(Fp-Gp)<Jp&&Math.abs(xp-Xp)<Jp)});return{...sp,[Gu]:{...np,objects:bp}}})}),Iu.forEach(Hu=>{const Gu=getCategoryName(Zl,Hu.spaceId,Hu.categoryId),sp=Object.values(n0).find(np=>np.name===Hu.name&&np.itemType===Gu);if(sp){f0(gp=>{const kp={...gp};return Object.values(kp).forEach(Fp=>{Fp.itemId===sp.itemId&&Fp.spaceId===Hu.spaceId&&delete kp[Fp.annotationId]}),kp});const np=Hu.moduleId||Hu.spaceId,ap=getModuleName(Zl,np),bp=getModuleDataKey(ap),pp=n0[sp.itemId];if(pp){const gp={...pp};delete gp[bp];const Fp=((Zl==null?void 0:Zl.modules)||(Zl==null?void 0:Zl.spaces)||[]).some(xp=>{const wp=xp.id;if(wp===np)return!1;const Dp=getModuleName(Zl,wp),jp=getModuleDataKey(Dp);return gp[jp]&&Object.keys(gp[jp]).length>0});Qp(Fp?xp=>({...xp,[sp.itemId]:gp}):xp=>{const wp={...xp};return delete wp[sp.itemId],wp})}}}),W0({})},disabled:!Object.values(p0).some(Boolean),style:{padding:0,background:"transparent",border:"none",color:Object.values(p0).some(Boolean)?"#cc4444":"#555",fontSize:"13px",fontWeight:"400",cursor:Object.values(p0).some(Boolean)?"pointer":"not-allowed"},onMouseEnter:mu=>{Object.values(p0).some(Boolean)&&(mu.currentTarget.style.color="#ff6666")},onMouseLeave:mu=>{Object.values(p0).some(Boolean)&&(mu.currentTarget.style.color="#cc4444")},children:"Delete"}),jsxRuntimeExports.jsx("div",{style:{marginLeft:"auto"}}),jsxRuntimeExports.jsx("button",{onClick:()=>{H0(!1),W0({})},style:{padding:0,background:"transparent",border:"none",color:"#999",fontSize:"13px",fontWeight:"400",cursor:"pointer"},onMouseEnter:mu=>mu.currentTarget.style.color="#ddd",onMouseLeave:mu=>mu.currentTarget.style.color="#999",children:"Cancel"})]}):null,jsxRuntimeExports.jsxs("div",{style:{marginBottom:"32px"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#fff",marginBottom:"16px",fontFamily:FONT_FAMILY},children:"Select Category to Highlight"}),P0&&Gl.categories&&Gl.categories.length>0&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px",padding:"12px",background:"#2a2a2a",border:"1px solid #444",borderRadius:"6px",display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{const mu=Gl.categories.map(Hu=>Hu.id),Iu={};mu.forEach(Hu=>{Iu[Hu]=!0}),B0(Iu)},style:{padding:"4px 12px",background:"transparent",border:"none",color:"#999",fontSize:"13px",fontWeight:"400",cursor:"pointer"},onMouseEnter:mu=>mu.currentTarget.style.color="#ddd",onMouseLeave:mu=>mu.currentTarget.style.color="#999",children:"Select All"}),jsxRuntimeExports.jsx("div",{style:{width:"1px",height:"16px",background:"#444"}}),jsxRuntimeExports.jsx("button",{onClick:()=>{const mu=Object.keys(g0).filter(Iu=>g0[Iu]);if(mu.length===0){alert("Please select at least one category to delete.");return}confirm(`Are you sure you want to delete ${mu.length} categor${mu.length!==1?"ies":"y"} and all items within?`)&&(mu.forEach(Iu=>{const Hu=Object.entries(Ku).filter(([Gu,sp])=>(sp.moduleId||sp.spaceId)===Du&&sp.categoryId===Iu);Hu.forEach(([Gu,sp])=>{sp.pageNumber&&sp.bounds&&Ru(np=>({...np,[sp.pageNumber]:[...np[sp.pageNumber]||[],sp.bounds]}))}),vp(Gu=>{const sp={...Gu};return Hu.forEach(([np])=>{delete sp[np]}),sp}),deleteCategory(Du,Iu)}),im(!1),K0(null),B0({}))},disabled:Object.values(g0).filter(Boolean).length===0,style:{padding:"4px 12px",background:"transparent",border:"none",color:Object.values(g0).filter(Boolean).length>0?"#dc3545":"#555",fontSize:"13px",fontWeight:"400",cursor:Object.values(g0).filter(Boolean).length>0?"pointer":"not-allowed"},onMouseEnter:mu=>{Object.values(g0).filter(Boolean).length>0&&(mu.currentTarget.style.color="#ff4444")},onMouseLeave:mu=>{Object.values(g0).filter(Boolean).length>0&&(mu.currentTarget.style.color="#dc3545")},children:"Delete Category"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const mu=Object.keys(g0).filter(Iu=>g0[Iu]);if(mu.length===0){alert("Please select at least one category to copy.");return}B0(Iu=>{const Hu={};return mu.forEach(Gu=>{Hu[Gu]=!0}),Hu}),dp(!0)},disabled:Object.values(g0).filter(Boolean).length===0,style:{padding:"4px 12px",background:"transparent",border:"none",color:Object.values(g0).filter(Boolean).length>0?"#999":"#555",fontSize:"13px",fontWeight:"400",cursor:Object.values(g0).filter(Boolean).length>0?"pointer":"not-allowed"},onMouseEnter:mu=>{Object.values(g0).filter(Boolean).length>0&&(mu.currentTarget.style.color="#ddd")},onMouseLeave:mu=>{Object.values(g0).filter(Boolean).length>0&&(mu.currentTarget.style.color="#999")},children:"Copy Category"}),jsxRuntimeExports.jsx("button",{onClick:()=>{im(!1),K0(null),B0({})},style:{padding:"4px 12px",background:"transparent",border:"none",color:"#999",fontSize:"13px",fontWeight:"400",cursor:"pointer",marginLeft:"auto"},onMouseEnter:mu=>mu.currentTarget.style.color="#ddd",onMouseLeave:mu=>mu.currentTarget.style.color="#999",children:"Cancel"})]}),Gl.categories&&Gl.categories.length>0?jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Gl.categories.map(mu=>{const Iu=yu[mu.id]||[],Hu=Iu.length,Gu=fp[mu.id],np=Iu.filter(Pp=>p0[Pp.id]===!0).length===Iu.length&&Iu.length>0,ap=g0[mu.id]===!0,bp=P0,pp=bp&&ap||r0===mu.id,gp=pp?"#4A90E2":"#333",Fp=`1px solid ${pp?"#4A90E2":"#444"}`,xp=pp?"#fff":"#ddd",wp=pp?"#ddd":"#999",Dp=Y0||bp?"none":Fp,jp=Hu>0?"none":Fp,Gp=kx[mu.id]===!0,Xp=Rx[mu.id]||{},Jp=Object.values(Xp).filter(Boolean).length,a0=Jp===Hu&&Hu>0;return jsxRuntimeExports.jsxs("div",{style:{marginBottom:"8px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"stretch"},children:[Y0&&jsxRuntimeExports.jsx("label",{style:{display:"flex",alignItems:"center",padding:"0 8px",cursor:"pointer",border:"1px solid #444",borderRadius:"6px 0 0 6px",background:"#333",userSelect:"none"},children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:np,onChange:Pp=>{const $p={...p0};Iu.forEach(Up=>{np?delete $p[Up.id]:$p[Up.id]=!0}),W0($p)},onClick:Pp=>Pp.stopPropagation(),style:{cursor:"pointer",flexShrink:0}})}),bp&&jsxRuntimeExports.jsx("label",{style:{display:"flex",alignItems:"center",padding:"0 8px",cursor:"pointer",border:"1px solid #444",borderRadius:"6px 0 0 6px",background:"#333",userSelect:"none"},children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:ap,onChange:Pp=>{B0($p=>({...$p,[mu.id]:Pp.target.checked}))},onClick:Pp=>Pp.stopPropagation(),style:{cursor:"pointer",flexShrink:0}})}),jsxRuntimeExports.jsxs("button",{onClick:Pp=>{if(Pp.stopPropagation(),!Pp.target.closest(".dropdown-arrow")){if(bp){B0($p=>({...$p,[mu.id]:!$p[mu.id]}));return}Y0||(u0(mu.id),up(!1),Mu("highlight"))}},className:"btn btn-default btn-md",style:{textAlign:"left",justifyContent:"flex-start",padding:"12px 16px",background:gp,borderTop:Fp,borderBottom:Fp,borderLeft:Dp,borderRight:jp,color:xp,flex:1,borderRadius:Y0||bp?Hu>0?"0":"6px":Hu>0?"6px 0 0 6px":"6px"},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"500"},children:mu.name||"Untitled Category"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:wp,marginTop:"4px"},children:Hu})]}),Hu>0&&jsxRuntimeExports.jsx("button",{className:"dropdown-arrow",onClick:Pp=>{Pp.stopPropagation(),Op($p=>({...$p,[mu.id]:!$p[mu.id]}))},style:{padding:"12px 8px",background:Gu||r0===mu.id?"#4A90E2":"#333",borderTop:Gu||r0===mu.id?"1px solid #4A90E2":"1px solid #444",borderRight:Gu||r0===mu.id?"1px solid #4A90E2":"1px solid #444",borderBottom:Gu||r0===mu.id?"1px solid #4A90E2":"1px solid #444",borderLeft:"none",borderRadius:"0 6px 6px 0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#ddd",transition:"all 0.2s"},children:jsxRuntimeExports.jsx("span",{style:{fontSize:"14px",transform:Gu?"rotate(180deg)":"rotate(0deg)",display:"inline-block",transition:"transform 0.2s"},children:""})})]}),Gu&&Hu>0&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"8px",padding:"12px",background:"#1b1b1b",border:"1px solid #444",borderRadius:"6px"},children:[!Gp&&!P0&&!Y0&&jsxRuntimeExports.jsx("button",{onClick:()=>{Bm(Pp=>({...Pp,[mu.id]:!0})),tm(Pp=>({...Pp,[mu.id]:{}}))},className:"btn btn-sm",style:{marginBottom:"12px",background:"#3a3a3a",color:"#ddd",border:"1px solid #444",whiteSpace:"nowrap"},children:"Select Item"}),Gp&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"12px",padding:"12px",background:"#2a2a2a",border:"1px solid #555",borderRadius:"6px",display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none"},children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:a0,onChange:Pp=>{const $p={};Iu.forEach(Up=>{$p[Up.id]=Pp.target.checked}),tm(Up=>({...Up,[mu.id]:$p}))},style:{cursor:"pointer"}}),jsxRuntimeExports.jsx("span",{style:{color:"#ddd",fontSize:"13px",fontWeight:"400"},children:"Select All Items"})]}),jsxRuntimeExports.jsx("div",{style:{width:"1px",height:"16px",background:"#444"}}),jsxRuntimeExports.jsx("button",{onClick:()=>{const Pp={};Iu.forEach($p=>{Pp[$p.id]=!0}),tm($p=>({...$p,[mu.id]:Pp}))},style:{padding:"4px 12px",background:"transparent",border:"none",color:"#999",fontSize:"13px",fontWeight:"400",cursor:"pointer"},onMouseEnter:Pp=>Pp.currentTarget.style.color="#ddd",onMouseLeave:Pp=>Pp.currentTarget.style.color="#999",children:"Select All"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const Pp=Object.keys(Xp).filter(Up=>Xp[Up]);if(Pp.length===0){alert("Please select at least one item to delete.");return}if(!confirm(`Are you sure you want to delete ${Pp.length} item${Pp.length!==1?"s":""}?`))return;Pp.forEach(Up=>{const Zp=Ku[Up];if(Zp&&(Zp.pageNumber&&Zp.bounds&&Ru(v0=>({...v0,[Zp.pageNumber]:[...v0[Zp.pageNumber]||[],Zp.bounds]})),vp(v0=>{const m0={...v0};return delete m0[Up],m0}),Zl&&Zp)){const v0=Zp.moduleId||Zp.spaceId,m0=getCategoryName(Zl,v0,Zp.categoryId),M0=Object.values(n0).find(L0=>L0.name===Zp.name&&L0.itemType===m0);if(M0){f0(fm=>{const Mm={...fm};return Object.values(Mm).forEach(zp=>{zp.itemId===M0.itemId&&zp.spaceId===Zp.spaceId&&zp.pdfCoordinates&&Zp.bounds&&yp(zp.pdfCoordinates,Zp.bounds)&&delete Mm[zp.annotationId]}),Mm});const L0=getModuleName(Zl,v0),Om=getModuleDataKey(L0),xx=n0[M0.itemId];if(xx){const fm={...xx};delete fm[Om];const zp=((Zl==null?void 0:Zl.modules)||(Zl==null?void 0:Zl.spaces)||[]).some(o0=>{const E0=o0.id;if(E0===v0)return!1;const R0=getModuleName(Zl,E0),sm=getModuleDataKey(R0);return fm[sm]&&Object.keys(fm[sm]).length>0});Qp(zp?o0=>({...o0,[M0.itemId]:fm}):o0=>{const E0={...o0};return delete E0[M0.itemId],E0})}}}}),Iu.filter(Up=>!Pp.includes(Up.id)).length===0?(Bm(Up=>{const Zp={...Up};return delete Zp[mu.id],Zp}),tm(Up=>{const Zp={...Up};return delete Zp[mu.id],Zp})):tm(Up=>{const Zp={...Up};return Zp[mu.id]={},Zp})},disabled:Jp===0,style:{padding:"4px 12px",background:"transparent",border:"none",color:Jp>0?"#dc3545":"#555",fontSize:"13px",fontWeight:"400",cursor:Jp>0?"pointer":"not-allowed"},onMouseEnter:Pp=>{Jp>0&&(Pp.currentTarget.style.color="#ff4444")},onMouseLeave:Pp=>{Jp>0&&(Pp.currentTarget.style.color="#dc3545")},children:"Delete Item"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const Pp=Object.keys(Xp).filter($p=>Xp[$p]);if(Pp.length===0){alert("Please select at least one item to copy.");return}W0($p=>{const Up={...$p};return Pp.forEach(Zp=>{Up[Zp]=!0}),Up}),dp(!0)},disabled:Jp===0,style:{padding:"4px 12px",background:"transparent",border:"none",color:Jp>0?"#999":"#555",fontSize:"13px",fontWeight:"400",cursor:Jp>0?"pointer":"not-allowed"},onMouseEnter:Pp=>{Jp>0&&(Pp.currentTarget.style.color="#ddd")},onMouseLeave:Pp=>{Jp>0&&(Pp.currentTarget.style.color="#999")},children:"Copy Item"}),jsxRuntimeExports.jsx("button",{onClick:()=>{Bm(Pp=>{const $p={...Pp};return delete $p[mu.id],$p}),tm(Pp=>{const $p={...Pp};return delete $p[mu.id],$p})},style:{padding:"4px 12px",background:"transparent",border:"none",color:"#999",fontSize:"13px",fontWeight:"400",cursor:"pointer",marginLeft:"auto"},onMouseEnter:Pp=>Pp.currentTarget.style.color="#ddd",onMouseLeave:Pp=>Pp.currentTarget.style.color="#999",children:"Cancel"})]}),Iu.map((Pp,$p)=>{var L0,Om,xx,fm,Mm;const Up=Pp.id,Zp=Kp[Up],m0=`${((L0=mu==null?void 0:mu.name)==null?void 0:L0.trim())||"Untitled Category"} ${$p+1}`,M0=((Om=Ku[Up])==null?void 0:Om.name)||Pp.name||m0;return jsxRuntimeExports.jsxs("div",{style:{marginBottom:"8px",background:"#2a2a2a",border:"1px solid #444",borderRadius:"6px",overflow:"hidden"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(Y0||Gp)&&jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Gp?Xp[Up]===!0:p0[Up]===!0,onChange:zp=>{Gp?tm(o0=>({...o0,[mu.id]:{...o0[mu.id]||{},[Up]:zp.target.checked}})):(console.log("Checkbox changed:",{highlightId:Up,checked:zp.target.checked,highlight:Pp,"highlight.id":Pp.id}),W0(o0=>{const E0={...o0};return zp.target.checked?E0[Up]=!0:delete E0[Up],console.log("Updated selection:",E0),E0}))},onClick:zp=>zp.stopPropagation(),style:{cursor:"pointer",flexShrink:0}}),jsxRuntimeExports.jsxs("button",{onClick:()=>{s0(zp=>({...zp,[Up]:!zp[Up]}))},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"transparent",border:"none",cursor:"pointer",textAlign:"left"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[(()=>{let zp=null;if(Zl&&Du){const o0=Ku[Up],E0=getCategoryName(Zl,Du,mu.id),R0=(o0==null?void 0:o0.name)||Pp.name||"",sm=Object.values(n0).find(D0=>D0.name===R0&&D0.itemType===E0);if(sm){const D0=getModuleName(Zl,Du),om=getModuleDataKey(D0),X0=(sm[om]||{}).ballInCourtEntityId||(o0==null?void 0:o0.ballInCourtEntityId);if(X0){const Am=((Zl==null?void 0:Zl.ballInCourtEntities)||[]).find(j0=>j0.id===X0);Am&&Am.color&&(zp=getHexFromColor(Am.color))}}}return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:zp&&jsxRuntimeExports.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:zp,flexShrink:0}})})})(),(xx=Ku[Up])!=null&&xx.editingName?jsxRuntimeExports.jsx("input",{type:"text",value:((fm=Ku[Up])==null?void 0:fm.name)||"",onChange:zp=>{vp(o0=>({...o0,[Pp.id]:{...o0[Pp.id],name:zp.target.value}}))},onBlur:()=>{vp(zp=>({...zp,[Pp.id]:{...zp[Pp.id],editingName:!1}}))},onKeyDown:zp=>{zp.key==="Enter"?zp.target.blur():zp.key==="Escape"&&(vp(o0=>{var E0;return{...o0,[Pp.id]:{...o0[Pp.id],editingName:!1,name:((E0=o0[Pp.id])==null?void 0:E0.name)||m0}}}),zp.target.blur())},onClick:zp=>zp.stopPropagation(),autoFocus:!0,style:{flex:1,padding:"4px 8px",background:"#333",color:"#fff",border:"1px solid #4A90E2",borderRadius:"4px",fontSize:"12px",fontFamily:FONT_FAMILY,outline:"none"}}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"12px",color:"#999",fontWeight:(Mm=Ku[Up])!=null&&Mm.name?"500":"400"},children:M0}),jsxRuntimeExports.jsx("button",{onClick:zp=>{zp.stopPropagation(),vp(o0=>({...o0,[Pp.id]:{...o0[Pp.id],editingName:!0}}))},style:{background:"transparent",border:"none",color:"#999",cursor:"pointer",padding:"2px 4px",fontSize:"10px",opacity:.7},title:"Rename highlight",children:""})]})]}),jsxRuntimeExports.jsx("span",{style:{fontSize:"12px",color:"#999",transform:Zp?"rotate(180deg)":"rotate(0deg)",display:"inline-block",transition:"transform 0.2s",marginLeft:"8px"},children:""})]})]}),Zp&&Zl&&Du&&(()=>{const zp=Ku[Up],o0=getCategoryName(Zl,Du,mu.id),E0=(zp==null?void 0:zp.name)||Pp.name||"",R0=Object.values(n0).find(U0=>U0.name===E0&&U0.itemType===o0),sm=getModuleName(Zl,Du),D0=getModuleDataKey(sm),am=((R0==null?void 0:R0[D0])||{}).ballInCourtEntityId||(zp==null?void 0:zp.ballInCourtEntityId),X0=(Zl==null?void 0:Zl.ballInCourtEntities)||[];return jsxRuntimeExports.jsx("div",{style:{padding:"12px",background:"#333",borderTop:"1px solid #444",marginTop:"0"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px",flexWrap:"wrap"},children:[jsxRuntimeExports.jsx("span",{style:{color:"#DDD",fontSize:"14px",flex:"1",minWidth:"200px"},children:"Ball in Court:"}),jsxRuntimeExports.jsxs("select",{value:am||"",onChange:U0=>{const Am=U0.target.value,j0=X0.find(Fm=>Fm.id===Am);if(R0&&j0){const Fm={...R0,[D0]:{...spaceData,ballInCourtEntityId:j0.id,ballInCourtEntityName:j0.name,ballInCourtColor:j0.color}};Qp(t0=>({...t0,[R0.itemId]:Fm}));const G0=ensureRgbaOpacity(j0.color,1);f0(t0=>{const $0={...t0};return Object.values($0).forEach(z0=>{z0.itemId===R0.itemId&&z0.spaceId===l0&&($0[z0.annotationId]={...z0,ballInCourtEntityId:j0.id,ballInCourtEntityName:j0.name,ballInCourtColor:j0.color})}),$0}),vp(t0=>({...t0,[Up]:{...t0[Up],ballInCourtEntityId:j0.id,ballInCourtEntityName:j0.name,ballInCourtColor:j0.color}})),zp!=null&&zp.pageNumber&&(zp!=null&&zp.bounds)&&Np(t0=>{const z0=(t0[zp.pageNumber]||[]).filter(A0=>{const vx=A0.highlightId===Up,yx=A0.x===zp.bounds.x&&A0.y===zp.bounds.y&&A0.width===zp.bounds.width&&A0.height===zp.bounds.height;return!vx&&!yx});return{...t0,[zp.pageNumber]:[...z0,{...zp.bounds,color:G0,highlightId:Up}]}})}else if(R0&&!j0){const Fm={...R0,[D0]:{...spaceData,ballInCourtEntityId:void 0,ballInCourtEntityName:void 0,ballInCourtColor:void 0}};Qp(G0=>({...G0,[R0.itemId]:Fm})),f0(G0=>{const t0={...G0};return Object.values(t0).forEach($0=>{$0.itemId===R0.itemId&&$0.spaceId===l0&&(t0[$0.annotationId]={...$0,ballInCourtEntityId:void 0,ballInCourtEntityName:void 0,ballInCourtColor:void 0})}),t0}),vp(G0=>({...G0,[Up]:{...G0[Up],ballInCourtEntityId:void 0,ballInCourtEntityName:void 0,ballInCourtColor:void 0}})),zp!=null&&zp.pageNumber&&(zp!=null&&zp.bounds)&&Np(G0=>{const $0=(G0[zp.pageNumber]||[]).filter(z0=>{const A0=z0.highlightId===Up,vx=z0.x===zp.bounds.x&&z0.y===zp.bounds.y&&z0.width===zp.bounds.width&&z0.height===zp.bounds.height;return!A0&&!vx});return{...G0,[zp.pageNumber]:[...$0,{...zp.bounds,needsBIC:!0,highlightId:Up}]}})}},onClick:U0=>U0.stopPropagation(),style:{padding:"6px 10px",fontSize:"13px",background:"#141414",color:"#ddd",border:"1px solid #2f2f2f",borderRadius:"4px",outline:"none",cursor:"pointer",minWidth:"150px"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"None"}),X0.map(U0=>jsxRuntimeExports.jsx("option",{value:U0.id,children:U0.name},U0.id))]})]})})})(),Zp&&mu.checklist&&mu.checklist.map(zp=>{var R0,sm;const o0=((sm=(R0=Ku[Up])==null?void 0:R0.checklistResponses)==null?void 0:sm[zp.id])||{},E0=o0.selection;return jsxRuntimeExports.jsxs("div",{style:{padding:"12px",background:"#333",borderTop:"1px solid #444",marginTop:"0"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px",flexWrap:"wrap"},children:[jsxRuntimeExports.jsx("span",{style:{color:"#DDD",fontSize:"14px",flex:"1",minWidth:"200px"},children:zp.text}),jsxRuntimeExports.jsx("div",{style:{display:"flex",gap:"6px",flexShrink:0},children:["Y","N","N/A"].map(D0=>jsxRuntimeExports.jsx("button",{type:"button",onClick:om=>{om.stopPropagation(),vp(am=>{var Am,j0,Fm;const X0={...am,[Up]:{...am[Up],checklistResponses:{...(Am=am[Up])==null?void 0:Am.checklistResponses,[zp.id]:{...(Fm=(j0=am[Up])==null?void 0:j0.checklistResponses)==null?void 0:Fm[zp.id],selection:D0}}}},U0=X0[Up];if(U0&&mu.checklist&&mu.checklist.length>0&&Zl&&l0){const G0=mu.checklist.every(jm=>{var nm;const _0=(nm=U0.checklistResponses)==null?void 0:nm[jm.id],rm=_0==null?void 0:_0.selection;return rm==="Y"||rm==="N/A"}),t0=X0[Up],$0=getCategoryName(Zl,Du,mu.id),z0=(t0==null?void 0:t0.name)||Pp.name||"",A0=Object.values(n0).find(jm=>jm.name===z0&&jm.itemType===$0),vx=getModuleName(Zl,Du),yx=getModuleDataKey(vx),Lv=(A0==null?void 0:A0[yx])||{};if(G0){const _0=(Zl.ballInCourtEntities||[]).find(rm=>rm.name.toLowerCase().includes("complete"));if(_0){if(A0){const rm={...A0,[yx]:{...Lv,ballInCourtEntityId:_0.id,ballInCourtEntityName:_0.name,ballInCourtColor:_0.color}};Qp(Q0=>({...Q0,[A0.itemId]:rm}));const nm=ensureRgbaOpacity(_0.color,1);f0(Q0=>{const Km={...Q0};return Object.values(Km).forEach(pm=>{const Nm=pm.moduleId||pm.spaceId;pm.itemId===A0.itemId&&Nm===Du&&(Km[pm.annotationId]={...pm,ballInCourtEntityId:_0.id,ballInCourtEntityName:_0.name,ballInCourtColor:_0.color})}),Km}),t0!=null&&t0.pageNumber&&(t0!=null&&t0.bounds)&&Np(Q0=>{const pm=(Q0[t0.pageNumber]||[]).filter(Nm=>{const Bv=Nm.highlightId===Up,Uv=Nm.x===t0.bounds.x&&Nm.y===t0.bounds.y&&Nm.width===t0.bounds.width&&Nm.height===t0.bounds.height;return!Bv&&!Uv});return{...Q0,[t0.pageNumber]:[...pm,{...t0.bounds,color:nm,highlightId:Up}]}})}X0[Up]={...X0[Up],ballInCourtEntityId:_0.id,ballInCourtEntityName:_0.name,ballInCourtColor:_0.color}}}else{if(A0){const jm={...A0,[yx]:{...spaceData,ballInCourtEntityId:void 0,ballInCourtEntityName:void 0,ballInCourtColor:void 0}};Qp(_0=>({..._0,[A0.itemId]:jm})),f0(_0=>{const rm={..._0};return Object.values(rm).forEach(nm=>{nm.itemId===A0.itemId&&nm.spaceId===l0&&(rm[nm.annotationId]={...nm,ballInCourtEntityId:void 0,ballInCourtEntityName:void 0,ballInCourtColor:void 0})}),rm}),t0!=null&&t0.pageNumber&&(t0!=null&&t0.bounds)&&Np(_0=>{const nm=(_0[t0.pageNumber]||[]).filter(Q0=>{const Km=Q0.highlightId===Up,pm=Q0.x===t0.bounds.x&&Q0.y===t0.bounds.y&&Q0.width===t0.bounds.width&&Q0.height===t0.bounds.height;return!Km&&!pm});return{..._0,[t0.pageNumber]:[...nm,{...t0.bounds,needsBIC:!0,highlightId:Up}]}})}X0[Up]={...X0[Up],ballInCourtEntityId:void 0,ballInCourtEntityName:void 0,ballInCourtColor:void 0}}}return X0})},style:{minWidth:"36px",padding:"6px 10px",fontSize:"13px",fontWeight:"500",border:"none",borderRadius:"4px",cursor:"pointer",background:E0===D0?D0==="Y"?"#B8E6D4":D0==="N"?"#FFB3BA":"#777":"#D3D3D3",color:E0===D0?"#FFFFFF":"#333333",transition:"all 0.2s ease"},children:D0},D0))})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:D0=>{D0.stopPropagation(),console.log("Opening note dialog:",{highlightId:Up,itemId:zp.id,response:o0});const om=o0.note;console.log("Existing note:",om),tp(om?{text:om.text||"",photos:om.photos||[],videos:om.videos||[]}:{text:"",photos:[],videos:[]});const am=`${Up}-${zp.id}`;console.log("Setting noteDialogOpen to:",am),wu(am)},style:{fontSize:"11px",color:"#888",background:"transparent",border:"none",cursor:"pointer",padding:"2px 4px",marginTop:"4px",textDecoration:o0.note?"underline":"none",opacity:.7,fontWeight:"400"},children:["Note ",o0.note?"":""]})]},zp.id)})]},Pp.id)})]})]},mu.id)})}):jsxRuntimeExports.jsxs("div",{style:{color:"#999",fontSize:"14px",padding:"20px",textAlign:"center"},children:[jsxRuntimeExports.jsx("div",{children:"No categories available for this space."}),Zl&&Du&&jsxRuntimeExports.jsx("button",{type:"button",onClick:mu=>{if(mu.stopPropagation(),!(Zl!=null&&Zl.id)||!Du){alert("Please select a template and module before creating a category.");return}co==null||co({mode:"edit",templateId:Zl.id,moduleId:Du,startAddingCategory:!0})},style:{marginTop:"12px",padding:"10px 18px",borderRadius:"20px",border:"1px solid #4A90E2",background:"#2a2a2a",color:"#FFFFFF",fontSize:"13px",fontWeight:500,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"background 0.2s ease, border-color 0.2s ease"},onMouseEnter:mu=>{mu.currentTarget.style.background="#3a3a3a",mu.currentTarget.style.borderColor="#5AA0F2"},onMouseLeave:mu=>{mu.currentTarget.style.background="#2a2a2a",mu.currentTarget.style.borderColor="#4A90E2"},children:"Create Category"})]})]})]})})():jsxRuntimeExports.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:jsxRuntimeExports.jsx("p",{children:"Select a space to view categories"})})})]})]})}),Yu&&Zl&&Du&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{onClick:()=>zu(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:10001,animation:"fadeIn 0.2s ease-out",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{onClick:Gl=>Gl.stopPropagation(),style:{background:"#2b2b2b",border:"1px solid #444",borderRadius:"8px",padding:"24px",width:"500px",maxWidth:"90vw",maxHeight:"80vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"fadeIn 0.2s ease-out"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#fff",fontFamily:FONT_FAMILY},children:"Categorize Highlight"}),jsxRuntimeExports.jsx("button",{onClick:()=>zu(null),className:"btn btn-icon btn-icon-sm",style:{background:"transparent",border:"none",color:"#999"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:18})})]}),jsxRuntimeExports.jsx("p",{style:{color:"#999",fontSize:"14px",marginBottom:"20px"},children:"Select a category for this highlighted item:"}),(()=>{var yu;const Gl=(yu=Zl.modules||Zl.spaces||[])==null?void 0:yu.find(Su=>Su.id===Du);return!Gl||!Gl.categories||Gl.categories.length===0?jsxRuntimeExports.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:jsxRuntimeExports.jsx("p",{children:"No categories available for this module."})}):jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Gl.categories.map(Su=>jsxRuntimeExports.jsxs("button",{onClick:()=>{((Zl==null?void 0:Zl.ballInCourtEntities)||[]).length>0?mm({highlight:Yu,categoryId:Su.id}):(y0({highlight:Yu,categoryId:Su.id}),d0("")),zu(null)},className:"btn btn-default btn-md",style:{textAlign:"left",justifyContent:"flex-start",padding:"12px 16px",background:"#333",border:"1px solid #444"},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"500",color:"#fff"},children:Su.name||"Untitled Category"}),Su.checklist&&Su.checklist.length>0&&jsxRuntimeExports.jsxs("div",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:[Su.checklist.length," checklist item",Su.checklist.length!==1?"s":""]})]},Su.id))})})()]})})}),F0&&Zl&&Du&&(()=>{const Gl=Zl.ballInCourtEntities||[];return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{onClick:()=>{y0({highlight:F0.highlight,categoryId:F0.categoryId}),mm(null),d0("")},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:10003,animation:"fadeIn 0.2s ease-out",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{onClick:yu=>yu.stopPropagation(),style:{background:"#2b2b2b",border:"1px solid #444",borderRadius:"8px",padding:"24px",width:"500px",maxWidth:"90vw",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"fadeIn 0.2s ease-out"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#fff",fontFamily:FONT_FAMILY},children:"Ball in Court"}),jsxRuntimeExports.jsx("button",{onClick:()=>{y0({highlight:F0.highlight,categoryId:F0.categoryId}),mm(null),d0("")},className:"btn btn-icon btn-icon-sm",style:{background:"transparent",border:"none",color:"#999"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:18})})]}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#999",marginBottom:"16px"},children:"Select the entity responsible for this highlight:"}),jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"400px",overflowY:"auto"},children:Gl.map(yu=>jsxRuntimeExports.jsxs("button",{onClick:()=>{const Su=ensureRgbaOpacity(yu.color,1);vp(mu=>({...mu,[F0.highlight.id]:{...F0.highlight,categoryId:F0.categoryId,ballInCourtEntityId:yu.id,ballInCourtEntityName:yu.name,ballInCourtColor:Su,checklistResponses:{}}})),Np(mu=>{const Hu=(mu[F0.highlight.pageNumber]||[]).filter(Gu=>Gu.highlightId!==F0.highlight.id);return{...mu,[F0.highlight.pageNumber]:[...Hu,{...F0.highlight.bounds,color:Su,highlightId:F0.highlight.id,moduleId:F0.highlight.moduleId||Du}]}}),y0({highlight:{...F0.highlight,ballInCourtEntityId:yu.id,ballInCourtEntityName:yu.name,ballInCourtColor:Su},categoryId:F0.categoryId}),mm(null),d0("")},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",background:"#333",border:"1px solid #444",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseEnter:Su=>{Su.currentTarget.style.background="#3a3a3a",Su.currentTarget.style.borderColor="#555"},onMouseLeave:Su=>{Su.currentTarget.style.background="#333",Su.currentTarget.style.borderColor="#444"},children:[jsxRuntimeExports.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",background:yu.color,border:"1px solid rgba(255, 255, 255, 0.2)",flexShrink:0}}),jsxRuntimeExports.jsx("span",{style:{color:"#fff",fontSize:"14px",fontWeight:"500",fontFamily:FONT_FAMILY},children:yu.name})]},yu.id))})]})})})})(),Wp&&Zl&&Du&&(()=>{var Hu,Gu,sp;const Gl=(Hu=Zl.modules||Zl.spaces||[])==null?void 0:Hu.find(np=>np.id===Du),yu=(Gu=Gl==null?void 0:Gl.categories)==null?void 0:Gu.find(np=>np.id===Wp.categoryId),Su=((sp=yu==null?void 0:yu.name)==null?void 0:sp.trim())||"Untitled Category",mu=Object.values(Ku).filter(np=>np.categoryId===Wp.categoryId),Iu=generateDefaultHighlightName(Su,mu);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{onClick:()=>{const np={...Wp.highlight,categoryId:Wp.categoryId,name:Iu,checklistResponses:{}};vp(bp=>({...bp,[Wp.highlight.id]:np}));const ap=np.ballInCourtColor?ensureRgbaOpacity(np.ballInCourtColor,1):"rgba(255, 193, 7, 1.0)";Np(bp=>{const gp=(bp[Wp.highlight.pageNumber]||[]).filter(kp=>kp.highlightId!==Wp.highlight.id);return{...bp,[Wp.highlight.pageNumber]:[...gp,{...Wp.highlight.bounds,color:ap,highlightId:Wp.highlight.id,moduleId:Wp.highlight.moduleId||Du}]}}),y0(null),d0(""),up(!0)},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:10002,animation:"fadeIn 0.2s ease-out",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{onClick:np=>np.stopPropagation(),style:{background:"#2b2b2b",border:"1px solid #444",borderRadius:"8px",padding:"24px",width:"500px",maxWidth:"90vw",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"fadeIn 0.2s ease-out"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#fff",fontFamily:FONT_FAMILY},children:"Name Highlight"}),jsxRuntimeExports.jsx("button",{onClick:()=>{var bp,pp;const np={...Wp.highlight,categoryId:Wp.categoryId,name:Iu,checklistResponses:{}};if(vp(gp=>({...gp,[Wp.highlight.id]:np})),np.ballInCourtEntityId&&Zl&&Du){const gp=getCategoryName(Zl,Du,Wp.categoryId),kp=getModuleName(Zl,Du),Fp=getModuleDataKey(kp),xp=Object.values(n0).find(wp=>wp.name===Iu&&wp.itemType===gp);if(xp){const wp=xp[Fp]||{},Dp=(bp=Zl.ballInCourtEntities)==null?void 0:bp.find(jp=>jp.id===np.ballInCourtEntityId);Dp&&Qp(jp=>({...jp,[xp.itemId]:{...xp,[Fp]:{...wp,ballInCourtEntityId:Dp.id,ballInCourtEntityName:Dp.name,ballInCourtColor:Dp.color}}}))}else{const wp=createItem(Zl,Du,Wp.categoryId,Iu,1),Dp=(pp=Zl.ballInCourtEntities)==null?void 0:pp.find(Gp=>Gp.id===np.ballInCourtEntityId);Dp&&(wp[Fp]={ballInCourtEntityId:Dp.id,ballInCourtEntityName:Dp.name,ballInCourtColor:Dp.color}),Qp(Gp=>({...Gp,[wp.itemId]:wp}));const jp=createAnnotation(Wp.highlight.bounds,"highlight",Zl,l0,wp.itemId,gp);Dp&&(jp.ballInCourtEntityId=Dp.id,jp.ballInCourtEntityName=Dp.name,jp.ballInCourtColor=Dp.color),f0(Gp=>({...Gp,[jp.annotationId]:jp}))}}const ap=np.ballInCourtColor?ensureRgbaOpacity(np.ballInCourtColor,1):"rgba(255, 193, 7, 1.0)";Np(gp=>{const Fp=(gp[Wp.highlight.pageNumber]||[]).filter(xp=>xp.highlightId!==Wp.highlight.id);return{...gp,[Wp.highlight.pageNumber]:[...Fp,{...Wp.highlight.bounds,color:ap,highlightId:Wp.highlight.id,moduleId:Wp.highlight.moduleId||Du}]}}),y0(null),d0(""),up(!0)},className:"btn btn-icon btn-icon-sm",style:{background:"transparent",border:"none",color:"#999"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:18})})]}),jsxRuntimeExports.jsxs("p",{style:{color:"#999",fontSize:"14px",marginBottom:"16px"},children:["Category: ",jsxRuntimeExports.jsx("strong",{style:{color:"#fff"},children:(yu==null?void 0:yu.name)||"Untitled Category"})]}),jsxRuntimeExports.jsx("input",{type:"text",autoFocus:!0,value:lm||Iu,onChange:np=>d0(np.target.value),onKeyDown:np=>{if(np.key==="Enter"){const ap=(lm||Iu).trim()||Iu,bp={...Wp.highlight,categoryId:Wp.categoryId,name:ap,checklistResponses:{}};vp(gp=>({...gp,[Wp.highlight.id]:bp}));const pp=bp.ballInCourtColor?ensureRgbaOpacity(bp.ballInCourtColor,1):"rgba(255, 193, 7, 1.0)";Np(gp=>{const Fp=(gp[Wp.highlight.pageNumber]||[]).filter(xp=>xp.highlightId!==Wp.highlight.id);return{...gp,[Wp.highlight.pageNumber]:[...Fp,{...Wp.highlight.bounds,color:pp,highlightId:Wp.highlight.id,moduleId:Wp.highlight.moduleId||Du}]}}),y0(null),d0(""),up(!0)}else if(np.key==="Escape"){const ap={...Wp.highlight,categoryId:Wp.categoryId,name:Iu,checklistResponses:{}};vp(pp=>({...pp,[Wp.highlight.id]:ap}));const bp=ap.ballInCourtColor?ensureRgbaOpacity(ap.ballInCourtColor,1):"rgba(255, 193, 7, 1.0)";Np(pp=>{const kp=(pp[Wp.highlight.pageNumber]||[]).filter(Fp=>Fp.highlightId!==Wp.highlight.id);return{...pp,[Wp.highlight.pageNumber]:[...kp,{...Wp.highlight.bounds,color:bp,highlightId:Wp.highlight.id,moduleId:Wp.highlight.moduleId||Du}]}}),y0(null),d0(""),up(!0)}},style:{width:"100%",padding:"12px 16px",background:"#1b1b1b",border:"1px solid #444",borderRadius:"6px",color:"#fff",fontSize:"14px",fontFamily:FONT_FAMILY,outline:"none",marginBottom:"16px"},placeholder:"Enter highlight name"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{var bp,pp;const np={...Wp.highlight,categoryId:Wp.categoryId,name:Iu,checklistResponses:{}};if(vp(gp=>({...gp,[Wp.highlight.id]:np})),np.ballInCourtEntityId&&Zl&&Du){const gp=getCategoryName(Zl,Du,Wp.categoryId),kp=getModuleName(Zl,Du),Fp=getModuleDataKey(kp),xp=Object.values(n0).find(wp=>wp.name===Iu&&wp.itemType===gp);if(xp){const wp=xp[Fp]||{},Dp=(bp=Zl.ballInCourtEntities)==null?void 0:bp.find(jp=>jp.id===np.ballInCourtEntityId);Dp&&Qp(jp=>({...jp,[xp.itemId]:{...xp,[Fp]:{...wp,ballInCourtEntityId:Dp.id,ballInCourtEntityName:Dp.name,ballInCourtColor:Dp.color}}}))}else{const wp=createItem(Zl,Du,Wp.categoryId,Iu,1),Dp=(pp=Zl.ballInCourtEntities)==null?void 0:pp.find(Gp=>Gp.id===np.ballInCourtEntityId);Dp&&(wp[Fp]={ballInCourtEntityId:Dp.id,ballInCourtEntityName:Dp.name,ballInCourtColor:Dp.color}),Qp(Gp=>({...Gp,[wp.itemId]:wp}));const jp=createAnnotation(Wp.highlight.bounds,"highlight",Zl,l0,wp.itemId,gp);Dp&&(jp.ballInCourtEntityId=Dp.id,jp.ballInCourtEntityName=Dp.name,jp.ballInCourtColor=Dp.color),f0(Gp=>({...Gp,[jp.annotationId]:jp}))}}const ap=np.ballInCourtColor?ensureRgbaOpacity(np.ballInCourtColor,1):"rgba(255, 193, 7, 1.0)";Np(gp=>{const Fp=(gp[Wp.highlight.pageNumber]||[]).filter(xp=>xp.highlightId!==Wp.highlight.id);return{...gp,[Wp.highlight.pageNumber]:[...Fp,{...Wp.highlight.bounds,color:ap,highlightId:Wp.highlight.id,moduleId:Wp.highlight.moduleId||Du}]}}),y0(null),d0(""),up(!0)},className:"btn btn-default btn-md",style:{padding:"10px 20px"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{var pp,gp;const np=(lm||Iu).trim()||Iu,ap={...Wp.highlight,categoryId:Wp.categoryId,name:np,checklistResponses:{}};if(vp(kp=>({...kp,[Wp.highlight.id]:ap})),ap.ballInCourtEntityId&&Zl&&Du){const kp=getCategoryName(Zl,Du,Wp.categoryId),Fp=getModuleName(Zl,Du),xp=getModuleDataKey(Fp),wp=Object.values(n0).find(Dp=>Dp.name===np&&Dp.itemType===kp);if(wp){const Dp=wp[xp]||{},jp=(pp=Zl.ballInCourtEntities)==null?void 0:pp.find(Gp=>Gp.id===ap.ballInCourtEntityId);jp&&Qp(Gp=>({...Gp,[wp.itemId]:{...wp,[xp]:{...Dp,ballInCourtEntityId:jp.id,ballInCourtEntityName:jp.name,ballInCourtColor:jp.color}}}))}else{const Dp=createItem(Zl,l0,Wp.categoryId,np,1),jp=(gp=Zl.ballInCourtEntities)==null?void 0:gp.find(Xp=>Xp.id===ap.ballInCourtEntityId);jp&&(Dp[xp]={ballInCourtEntityId:jp.id,ballInCourtEntityName:jp.name,ballInCourtColor:jp.color}),Qp(Xp=>({...Xp,[Dp.itemId]:Dp}));const Gp=createAnnotation(Wp.highlight.bounds,"highlight",Zl,l0,Dp.itemId,kp);jp&&(Gp.ballInCourtEntityId=jp.id,Gp.ballInCourtEntityName=jp.name,Gp.ballInCourtColor=jp.color),f0(Xp=>({...Xp,[Gp.annotationId]:Gp}))}}const bp=ap.ballInCourtColor?ensureRgbaOpacity(ap.ballInCourtColor,1):"rgba(255, 193, 7, 1.0)";Np(kp=>{const xp=(kp[Wp.highlight.pageNumber]||[]).filter(wp=>wp.highlightId!==Wp.highlight.id);return{...kp,[Wp.highlight.pageNumber]:[...xp,{...Wp.highlight.bounds,color:bp,highlightId:Wp.highlight.id,moduleId:Wp.highlight.moduleId||Du}]}}),y0(null),d0(""),up(!0)},className:"btn btn-primary btn-md",style:{padding:"10px 20px"},children:"Save"})]})]})})})})(),hu&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{onClick:()=>wu(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:10001,animation:"fadeIn 0.2s ease-out",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{onClick:Gl=>Gl.stopPropagation(),style:{background:"#2b2b2b",border:"1px solid #444",borderRadius:"8px",padding:"24px",width:"600px",maxWidth:"90vw",maxHeight:"80vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"fadeIn 0.2s ease-out"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#fff",fontFamily:FONT_FAMILY},children:"Note"}),jsxRuntimeExports.jsx("button",{onClick:()=>wu(null),className:"btn btn-icon btn-icon-sm",style:{background:"transparent",border:"none",color:"#999"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:18})})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#ddd"},children:"Notes"}),jsxRuntimeExports.jsx("textarea",{value:Nu.text,onChange:Gl=>tp(yu=>({...yu,text:Gl.target.value})),rows:6,style:{width:"100%",padding:"10px",background:"#333",color:"#ddd",border:"1px solid #555",borderRadius:"5px",fontSize:"14px",fontFamily:FONT_FAMILY,resize:"vertical"},placeholder:"Enter your notes..."})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#ddd"},children:"Photos"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Gl=>{const Su=Array.from(Gl.target.files||[]).map(mu=>new Promise(Iu=>{const Hu=new FileReader;Hu.onload=Gu=>{Iu({name:mu.name,dataUrl:Gu.target.result})},Hu.readAsDataURL(mu)}));Promise.all(Su).then(mu=>{tp(Iu=>({...Iu,photos:[...Iu.photos,...mu]}))})},style:{display:"none"},id:`photo-upload-${hu}`}),jsxRuntimeExports.jsx("label",{htmlFor:`photo-upload-${hu}`,className:"btn btn-secondary btn-md",style:{cursor:"pointer",display:"inline-block"},children:"Upload Photos"}),Nu.photos.length>0&&jsxRuntimeExports.jsx("div",{style:{marginTop:"12px",display:"flex",flexDirection:"column",gap:"8px"},children:Nu.photos.map((Gl,yu)=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",background:"#333",borderRadius:"4px"},children:[jsxRuntimeExports.jsx("img",{src:Gl.dataUrl,alt:Gl.name,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"4px"}}),jsxRuntimeExports.jsx("span",{style:{flex:1,color:"#ddd",fontSize:"13px"},children:Gl.name}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{tp(Su=>({...Su,photos:Su.photos.filter((mu,Iu)=>Iu!==yu)}))},className:"btn btn-icon btn-icon-sm",style:{background:"#444"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:14})})]},yu))})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#ddd"},children:"Videos"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"video/*",multiple:!0,onChange:Gl=>{const Su=Array.from(Gl.target.files||[]).map(mu=>new Promise(Iu=>{const Hu=new FileReader;Hu.onload=Gu=>{Iu({name:mu.name,dataUrl:Gu.target.result})},Hu.readAsDataURL(mu)}));Promise.all(Su).then(mu=>{tp(Iu=>({...Iu,videos:[...Iu.videos,...mu]}))})},style:{display:"none"},id:`video-upload-${hu}`}),jsxRuntimeExports.jsx("label",{htmlFor:`video-upload-${hu}`,className:"btn btn-secondary btn-md",style:{cursor:"pointer",display:"inline-block"},children:"Upload Videos"}),Nu.videos.length>0&&jsxRuntimeExports.jsx("div",{style:{marginTop:"12px",display:"flex",flexDirection:"column",gap:"8px"},children:Nu.videos.map((Gl,yu)=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",background:"#333",borderRadius:"4px"},children:[jsxRuntimeExports.jsx("video",{src:Gl.dataUrl,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"4px"}}),jsxRuntimeExports.jsx("span",{style:{flex:1,color:"#ddd",fontSize:"13px"},children:Gl.name}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{tp(Su=>({...Su,videos:Su.videos.filter((mu,Iu)=>Iu!==yu)}))},className:"btn btn-icon btn-icon-sm",style:{background:"#444"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:14})})]},yu))})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>wu(null),className:"btn btn-default btn-md",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const Gl=hu.split("-");if(Gl.length>=2){const yu=Gl[Gl.length-1],Su=Gl.slice(0,-1).join("-");console.log("Saving note:",{highlightId:Su,itemId:yu,noteText:Nu.text}),vp(mu=>{var Gu;console.log("Saving note - Current highlightAnnotations:",mu),console.log("Highlight exists?",!!mu[Su]),console.log("Highlight data:",mu[Su]);const Iu=mu[Su]||{},Hu={...mu,[Su]:{...Iu,checklistResponses:{...Iu.checklistResponses||{},[yu]:{...(Gu=Iu.checklistResponses)==null?void 0:Gu[yu],note:{text:Nu.text,photos:Nu.photos,videos:Nu.videos}}}}};return console.log("Updated highlightAnnotations:",Hu),console.log("Note saved for highlight:",Su,"item:",yu),Hu})}else console.error("Invalid noteDialogOpen format:",hu);wu(null)},className:"btn btn-primary btn-md",children:"Save"})]})]})})}),i0&&i0.mode==="select"&&Zl&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{onClick:()=>k0(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:10003,animation:"fadeIn 0.2s ease-out",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{onClick:Gl=>Gl.stopPropagation(),style:{background:"#2b2b2b",border:"1px solid #444",borderRadius:"8px",padding:"24px",width:"500px",maxWidth:"90vw",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"fadeIn 0.2s ease-out"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#fff",fontFamily:FONT_FAMILY},children:"Copy Items to Which Space?"}),jsxRuntimeExports.jsx("button",{onClick:()=>k0(null),className:"btn btn-icon btn-icon-sm",style:{background:"transparent",border:"none",color:"#999"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:18})})]}),jsxRuntimeExports.jsxs("p",{style:{color:"#999",fontSize:"14px",marginBottom:"20px"},children:["Copy ",i0.items.length," item",i0.items.length!==1?"s":""," to:"]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:(Zl.modules||Zl.spaces||[]).filter(Gl=>Gl.id!==i0.sourceModuleId).map(Gl=>jsxRuntimeExports.jsx("button",{onClick:yu=>{var Iu,Hu;yu.stopPropagation(),yu.preventDefault();const Su=[],mu=[];if(console.log("Copying items:",i0.items),console.log("Source module:",i0.sourceModuleId),console.log("Destination module:",Gl.id),i0.items.forEach(Gu=>{const sp=Ku[Gu];if(console.log("Processing highlight:",Gu,sp),!sp){n0[Gu]&&(console.log("Found direct itemId:",Gu),Su.push(Gu));return}const np=getCategoryName(Zl,sp.spaceId,sp.categoryId);console.log("Category name:",np,"Highlight name:",sp.name);const ap=Object.values(n0).find(bp=>bp.name===sp.name&&bp.itemType===np);if(console.log("Matching item:",ap),ap){const bp=Object.values(C0).find(pp=>pp.itemId===ap.itemId&&pp.spaceId===sp.spaceId);console.log("Matching annotation:",bp),console.log("All annotations for item:",Object.values(C0).filter(pp=>pp.itemId===ap.itemId)),bp&&ap.itemId?Su.includes(ap.itemId)||(console.log("Adding itemId to copy:",ap.itemId),Su.push(ap.itemId)):(console.log("No matching annotation, but item exists - copying anyway"),Su.includes(ap.itemId)||Su.push(ap.itemId))}else console.log("No matching item, treating as legacy highlight"),mu.push(sp)}),console.log("Items to copy:",Su),console.log("Legacy highlights to copy:",mu),Su.length>0){const Gu=Su.map(ap=>n0[ap]).filter(Boolean);if([...new Set(Gu.map(ap=>ap.itemType))].filter(ap=>!categoryExists(Zl,Gl.id,ap)).length>0)k0({...i0,mode:"checklist",destModuleId:Gl.id,items:Su});else{const ap=transferItems(Su,i0.sourceModuleId,Gl.id,Zl,n0,C0);Qp(ap.newItems),f0(ap.updatedAnnotations),console.log("Creating highlight entries for",Su.length,"items");const bp={};Su.forEach(pp=>{var Gp;const gp=ap.newItems[pp];if(console.log("Processing item for highlight creation:",pp,gp),!gp){console.log("Item not found in result.newItems");return}const kp=Object.values(ap.updatedAnnotations).find(Xp=>{const Jp=Xp.moduleId||Xp.spaceId;return Xp.itemId===pp&&Jp===Gl.id});console.log("Destination annotation:",kp);const Fp=Object.values(C0).find(Xp=>{const Jp=Xp.moduleId||Xp.spaceId;return Xp.itemId===pp&&Jp===i0.sourceModuleId});console.log("Source annotation:",Fp);let xp=null;if(Fp&&Fp.pdfCoordinates&&(xp=Object.values(Ku).find(Xp=>(Xp.moduleId||Xp.spaceId)===i0.sourceModuleId&&Xp.bounds&&Math.abs((Xp.bounds.x||0)-(Fp.pdfCoordinates.x||0))<1&&Math.abs((Xp.bounds.y||0)-(Fp.pdfCoordinates.y||0))<1)),!xp&&i0.items.length>0){const Xp=i0.items.find(Jp=>{const a0=Ku[Jp],Pp=(a0==null?void 0:a0.moduleId)||(a0==null?void 0:a0.spaceId);return a0&&Pp===i0.sourceModuleId});Xp&&(xp=Ku[Xp])}console.log("Source highlight:",xp);const wp=(Zl.modules||Zl.spaces||[]).find(Xp=>Xp.id===Gl.id),Dp=(Gp=wp==null?void 0:wp.categories)==null?void 0:Gp.find(Xp=>Xp.name===gp.itemType);console.log("Destination category:",Dp);let jp=null;if(kp!=null&&kp.pdfCoordinates?jp=kp.pdfCoordinates:Fp!=null&&Fp.pdfCoordinates?jp=Fp.pdfCoordinates:xp!=null&&xp.bounds&&(jp=xp.bounds),console.log("Bounds for highlight:",jp),jp){const Xp=`highlight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;bp[Xp]={id:Xp,pageNumber:(xp==null?void 0:xp.pageNumber)||1,bounds:jp,spaceId:space.id,categoryId:(Dp==null?void 0:Dp.id)||null,name:gp.name||(xp==null?void 0:xp.name)||"Untitled Item",checklistResponses:{}},console.log("Created highlight:",bp[Xp])}else console.log("No bounds available, skipping highlight creation")}),Object.keys(bp).length>0&&vp(pp=>({...pp,...bp})),k0(null)}}if(mu.length>0){console.log("Copying legacy highlights:",mu),console.log("To module:",Gl.id,Gl.name);const sp=(Zl.modules||Zl.spaces||[]).find(pp=>pp.id===i0.sourceModuleId),np=(Iu=sp==null?void 0:sp.categories)==null?void 0:Iu.find(pp=>pp.id===i0.categoryId),ap=(Hu=Gl.categories)==null?void 0:Hu.find(pp=>pp.name===(np==null?void 0:np.name));console.log("Source category:",np),console.log("Dest category:",ap);const bp={};mu.forEach(pp=>{const gp=generateUUID();bp[gp]={...pp,id:gp,moduleId:Gl.id,categoryId:(ap==null?void 0:ap.id)||null}}),console.log("New highlights to add:",bp),vp(pp=>({...pp,...bp})),Su.length===0&&k0(null)}Su.length===0&&mu.length===0&&(console.warn("No items found to copy. Selected IDs:",i0.items),k0(null))},className:"btn btn-default btn-md",style:{textAlign:"left",justifyContent:"flex-start",padding:"12px 16px",background:"#333",border:"1px solid #444"},children:jsxRuntimeExports.jsx("div",{style:{fontWeight:"500",color:"#fff"},children:Gl.name||"Untitled Module"})},Gl.id))})]})})}),i0&&i0.mode==="checklist"&&Zl&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{onClick:()=>k0(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:10004,animation:"fadeIn 0.2s ease-out",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{onClick:Gl=>Gl.stopPropagation(),style:{background:"#2b2b2b",border:"1px solid #444",borderRadius:"8px",padding:"24px",width:"500px",maxWidth:"90vw",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",animation:"fadeIn 0.2s ease-out"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#fff",fontFamily:FONT_FAMILY},children:"Missing Categories Detected"}),jsxRuntimeExports.jsx("button",{onClick:()=>k0(null),className:"btn btn-icon btn-icon-sm",style:{background:"transparent",border:"none",color:"#999"},children:jsxRuntimeExports.jsx(Icon,{name:"close",size:18})})]}),jsxRuntimeExports.jsx("p",{style:{color:"#999",fontSize:"14px",marginBottom:"20px"},children:"The following categories need to be created in the destination space:"}),jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"20px"},children:(()=>{const Gl=i0.items.map(mu=>n0[mu]);return[...new Set(Gl.map(mu=>mu.itemType))].filter(mu=>!categoryExists(Zl,i0.destSpaceId,mu)).map(mu=>jsxRuntimeExports.jsx("div",{style:{padding:"12px",background:"#333",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontWeight:"500"},children:mu},mu))})()}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{const Gl=transferItems(i0.items,i0.sourceSpaceId,i0.destSpaceId,Zl,n0,C0);Qp(Gl.newItems),f0(Gl.updatedAnnotations);const yu={};i0.items.forEach(Su=>{var Hu;const mu=Gl.newItems[Su];if(!mu)return;const Iu=Object.values(Gl.updatedAnnotations).find(Gu=>Gu.itemId===Su&&Gu.spaceId===i0.destSpaceId);if(Iu&&Iu.pdfCoordinates){const Gu=Object.values(C0).find(pp=>pp.itemId===Su&&pp.spaceId===i0.sourceSpaceId),sp=Gu?Object.values(Ku).find(pp=>pp.spaceId===i0.sourceSpaceId&&pp.bounds&&Gu.pdfCoordinates&&Math.abs((pp.bounds.x||0)-(Gu.pdfCoordinates.x||0))<1&&Math.abs((pp.bounds.y||0)-(Gu.pdfCoordinates.y||0))<1):null,np=(Zl.modules||Zl.spaces||[]).find(pp=>pp.id===i0.destModuleId),ap=(Hu=np==null?void 0:np.categories)==null?void 0:Hu.find(pp=>pp.name===mu.itemType),bp=`highlight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;yu[bp]={id:bp,pageNumber:(sp==null?void 0:sp.pageNumber)||1,bounds:Iu.pdfCoordinates,moduleId:i0.destModuleId,categoryId:(ap==null?void 0:ap.id)||null,name:mu.name||(sp==null?void 0:sp.name)||"Untitled Item",checklistResponses:{}}}}),Object.keys(yu).length>0&&vp(Su=>({...Su,...yu})),k0(null)},className:"btn btn-primary btn-md",style:{flex:1},children:"Copy As-Is"}),jsxRuntimeExports.jsx("button",{onClick:()=>k0(null),className:"btn btn-default btn-md",style:{flex:1},children:"Cancel"})]})]})})})]})}function App(){const[cs,is]=reactExports.useState("dashboard"),[us,hs]=reactExports.useState(null),[lo,co]=reactExports.useState(!1),[uo,ga]=reactExports.useState([]),ba=reactExports.useRef(null),xa="home-tab",[_a,$a]=reactExports.useState([{id:xa,name:"Home",file:null,isHome:!0}]),[xl,yl]=reactExports.useState(xa),[wl,_l]=reactExports.useState([]),El=reactExports.useCallback(Ol=>{const zl=Array.isArray(Ol)?Ol:[];_l(zl)},[]);reactExports.useEffect(()=>{localStorage.removeItem("pdfDocuments")},[]);const Sl=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Cl=Ol=>{if(console.log("handleDocumentSelect called with file:",Ol),!Ol){console.error("No file provided to handleDocumentSelect");return}const zl=_a.find(ou=>!ou.isHome&&ou.file&&ou.file.name===Ol.name&&ou.file.size===Ol.size);if(zl){yl(zl.id),hs(zl.file),is("viewer");return}const Hl={id:Sl(),name:Ol.name,file:Ol,isHome:!1};$a(ou=>[...ou,Hl]),yl(Hl.id),hs(Ol),is("viewer"),co(!0),setTimeout(()=>co(!1),100)},Tl=Ol=>{const zl=_a.find(Hl=>Hl.id===Ol);zl&&(yl(Ol),zl.isHome?(hs(null),is("dashboard")):(hs(zl.file),is("viewer")))},Dl=Ol=>{if(Ol===xa)return;const zl=_a.findIndex(ou=>ou.id===Ol);if(zl===-1)return;const Hl=_a.filter(ou=>ou.id!==Ol);if($a(Hl),Ol===xl)if(Hl.length>1){const ou=Hl.filter(au=>!au.isHome);if(ou.length>0){const au=Math.min(zl-1,ou.length-1),_c=ou[au>=0?au:0];yl(_c.id),hs(_c.file),is("viewer")}else yl(xa),hs(null),is("dashboard")}else yl(xa),hs(null),is("dashboard")},Fl=Ol=>{const zl=Ol.find(ou=>ou.isHome),Hl=Ol.filter(ou=>!ou.isHome);$a(zl?[zl,...Hl]:Ol)},Pl=(Ol,zl,Hl)=>{console.log(`Page ${zl} from tab ${Ol} dropped on tab ${Hl}`),alert(`Page ${zl} drag-and-drop functionality is being implemented. This feature requires PDF manipulation capabilities.`)},Al=()=>{yl(xa),hs(null),is("dashboard")},Rl=Ol=>{var zl,Hl,ou,au;(Ol==null?void 0:Ol.mode)==="edit"&&Ol.templateId?(Hl=(zl=ba.current)==null?void 0:zl.openEditTemplateModal)==null||Hl.call(zl,Ol.templateId,{moduleId:Ol.moduleId,startAddingCategory:Ol.startAddingCategory}):(au=(ou=ba.current)==null?void 0:ou.openTemplateModal)==null||au.call(ou)};if(lo)return jsxRuntimeExports.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#F5F5F5",fontFamily:FONT_FAMILY},children:jsxRuntimeExports.jsxs("div",{style:{textAlign:"center"},children:[jsxRuntimeExports.jsx("div",{style:{marginBottom:"10px",display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx(Icon,{name:"document",size:24})}),jsxRuntimeExports.jsx("div",{style:{fontSize:"16px",color:"#666"},children:"Loading document..."})]})});const Il=_a.find(Ol=>Ol.id===xl),Bl=Il&&!Il.isHome&&us&&cs==="viewer";return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[_a.length>0&&jsxRuntimeExports.jsx(TabBar,{tabs:_a,activeTabId:xl,onTabClick:Tl,onTabClose:Dl,onTabReorder:Fl,onPageDrop:Pl}),jsxRuntimeExports.jsxs("div",{style:{flex:1,overflow:"hidden",position:"relative"},children:[jsxRuntimeExports.jsx(Dashboard,{ref:ba,onDocumentSelect:Cl,onBack:Al,documents:uo,setDocuments:ga,templates:wl,onTemplatesChange:El}),Bl&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",inset:0,background:"#1f1f1f",zIndex:5e3},children:jsxRuntimeExports.jsx(PDFViewer,{pdfFile:us,onBack:Al,tabId:xl,onPageDrop:Pl,onUpdatePDFFile:Ol=>{$a(zl=>zl.map(Hl=>Hl.id===xl?{...Hl,file:Ol}:Hl)),hs(Ol)},onRequestCreateTemplate:Rl})})]})]})})}createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
